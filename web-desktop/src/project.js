window.__require=function t(e,o,n){function i(c,s){if(!o[c]){if(!e[c]){var a=c.split("/");if(a=a[a.length-1],!e[a]){var p="function"==typeof __require&&__require;if(!s&&p)return p(a,!0);if(r)return r(a,!0);throw new Error("Cannot find module '"+c+"'")}}var l=o[c]={exports:{}};e[c][0].call(l.exports,function(t){return i(e[c][1][t]||t)},l,l.exports,t,e,o,n)}return o[c].exports}for(var r="function"==typeof __require&&__require,c=0;c<n.length;c++)i(n[c]);return i}({AudioMgr:[function(t,e,o){"use strict";cc._RF.push(e,"7f0cdtScihEpYe9BAHfiJMb","AudioMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){this.bgmAudioID=-1}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.playBGM=function(t){this.bgmAudioID>=0&&cc.audioEngine.stop(this.bgmAudioID),this.bgmAudioID=cc.audioEngine.play(t,!0,1)},t.prototype.playEffect=function(t){cc.audioEngine.play(t,!1,1)},t}();o.default=n,cc._RF.pop()},{}],GameData:[function(t,e,o){"use strict";cc._RF.push(e,"1478d/IHf5JbYqxsrJ8aaf/","GameData"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),this.instance},t.instance=null,t}();o.default=n,cc._RF.pop()},{}],HttpMgr:[function(t,e,o){"use strict";cc._RF.push(e,"088d7cxV1ZLh5kn8WCXFfB/","HttpMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n="https://dwwxs.265app.com/wxapp/",i=function(){function t(){this._body=null}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),this.instance},t.prototype.req=function(t,e,o){console.log("\u8bf7\u6c42\u53c2\u6570"),console.log(t,e);t.token="55e58ca7feea56f38c1fdc754aba59bbebb6a60cddc41e8df51f74ed48bffe31";var i=n+e,r=cc.loader.getXMLHttpRequest(),c=t;for(var s in c){var a=s+"="+c[s];""==this._body?this._body+=a:this._body+="&"+a}r.open("POST",i),r.timeout=5e3,r.setRequestHeader("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),r.onreadystatechange=function(){if(4==r.readyState&&200==r.status){var t=r.responseText;console.log("\u54cd\u5e94\u53c2\u6570"),console.log(t),o(JSON.parse(t))}},r.send(this._body)},t.instance=null,t}();o.default=i,cc._RF.pop()},{}],ListAdapter:[function(t,e,o){"use strict";cc._RF.push(e,"3a7dfk0dEZD0Kv/1AcNbAR/","ListAdapter"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("./ListView"),i=t("./ListItem"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.updateView=function(t,e){var o=t.getComponent(i.default);o&&o.init(this.getItem(e),e)},e}(n.AbsAdapter);o.default=r,cc._RF.pop()},{"./ListItem":"ListItem","./ListView":"ListView"}],ListItem:[function(t,e,o){"use strict";cc._RF.push(e,"cee84AU+RhJPJmywOH3WXR/","ListItem"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.avatarImgSprite=null,e.data=null,e.rank=0,e}return __extends(e,t),e.prototype.onLoad=function(){mk.UIkill.bindComponent(this),this._Rank.$Label.string=this.rank},e.prototype.init=function(t,e){this.data=t,this.rank=e},e.prototype.createImage=function(t){var e=this;cc.loader.load({url:t,type:"jpg"},function(t,o){e.avatarImgSprite.spriteFrame=new cc.SpriteFrame(o)})},__decorate([r(cc.Sprite)],e.prototype,"avatarImgSprite",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],ListView:[function(t,e,o){"use strict";cc._RF.push(e,"d5ee6xvM6NEXLBs3y/U1av6","ListView"),Object.defineProperty(o,"__esModule",{value:!0});var n=t("../ListView/ListAdapter"),i=cc._decorator,r=i.ccclass,c=i.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.itemTemplate=null,e.spacing=1,e.spawnCount=2,e.scrollView=null,e.content=null,e.adapter=null,e._filledIds={},e._items=new cc.NodePool,e.horizontal=!1,e._itemHeight=1,e._itemWidth=1,e._itemsVisible=1,e.lastStartIndex=-1,e.scrollTopNotifyed=!1,e.scrollBottomNotifyed=!1,e.pullDownCallback=null,e.pullUpCallback=null,e}return __extends(e,t),e.prototype.onLoad=function(){this.scrollView?(this.content=this.scrollView.content,this.horizontal=this.scrollView.horizontal,this.horizontal?(this.scrollView.vertical=!1,this.content.anchorX=0,this.content.x=this.content.parent.width*this.content.parent.anchorX):(this.scrollView.vertical=!0,this.content.anchorY=1,this.content.y=this.content.parent.height*this.content.parent.anchorY)):console.error("ListView need a scrollView for showing.");var t=this._items.get()||cc.instantiate(this.itemTemplate);this._items.put(t),this._itemHeight=t.height||10,this._itemWidth=t.width||10,this.horizontal?this._itemsVisible=Math.ceil(this.content.parent.width/this._itemWidth):this._itemsVisible=Math.ceil(this.content.parent.height/this._itemHeight),console.log("\u53ef\u89c1\u533a\u57df\u7684item\u6570\u91cf\u4e3a:",this._itemsVisible),this.adjustEvent()},e.prototype.start=function(){for(var t=new n.default,e=[],o=0;o<400;o++)e.push(o);t.setDataSet(e),this.setAdapter(t)},e.prototype.setAdapter=function(t){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return this.adapter=t,null==this.adapter?(console.warn("adapter \u4e3a\u7a7a."),[2]):null==this.itemTemplate?(console.error("Listview \u672a\u8bbe\u7f6e\u5f85\u663e\u793a\u7684Item\u6a21\u677f."),[2]):(this.notifyUpdate(),[2])})})},e.prototype.getItemIndex=function(t){return Math.floor(Math.abs(t/(this._itemHeight+this.spacing)))},e.prototype.getPositionInView=function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.scrollView.node.convertToNodeSpaceAR(e)},e.prototype.notifyUpdate=function(t){var e=this;null!=this.adapter&&(t&&t.length>0?t.forEach(function(t){e._filledIds.hasOwnProperty(t)&&delete e._filledIds[t]}):Object.keys(this._filledIds).forEach(function(t){delete e._filledIds[t]}),this.lastStartIndex=-1,this.horizontal?this.content.width=this.adapter.getCount()*(this._itemWidth+this.spacing)+this.spacing:this.content.height=this.adapter.getCount()*(this._itemHeight+this.spacing)+this.spacing,this.scrollView.scrollToTop())},e.prototype.scrollToTop=function(t){void 0===t&&(t=!1),this.scrollView.scrollToTop(t?1:0)},e.prototype.scrollToBottom=function(t){void 0===t&&(t=!1),this.scrollView.scrollToBottom(t?1:0)},e.prototype.scrollToLeft=function(t){void 0===t&&(t=!1),this.scrollView.scrollToLeft(t?1:0)},e.prototype.scrollToRight=function(t){void 0===t&&(t=!1),this.scrollView.scrollToRight(t?1:0)},e.prototype.pullDown=function(t,e){this.pullDownCallback=t.bind(e)},e.prototype.pullUp=function(t,e){this.pullUpCallback=t.bind(e)},e.prototype.update=function(t){var e=this.checkNeedUpdate();e>=0&&this.updateView(e)},e.prototype._layoutVertical=function(t,e){this.content.addChild(t),t._tag=e,this._filledIds[e]=e,t.setPosition(0,-t.height*(.5+e)-this.spacing*(e+1))},e.prototype._layoutHorizontal=function(t,e){this.content.addChild(t),t._tag=e,this._filledIds[e]=e,t.setPosition(-t.width*(.5+e)-this.spacing*(e+1),0)},e.prototype.getRecycleItems=function(t,e){var o=this,n=[];return this.content.children.forEach(function(i){(i._tag<t||i._tag>e)&&(n.push(i),delete o._filledIds[i._tag])}),n},e.prototype.updateView=function(t){var e=this,o=t,n=o+this._itemsVisible+(this.spawnCount||2),i=this.adapter.getCount();if(!(o>=i)){n>i?(n=i,this.scrollBottomNotifyed||(this.notifyScrollToBottom(),this.scrollBottomNotifyed=!0)):this.scrollBottomNotifyed=!1,this.getRecycleItems(o-(this.spawnCount||2),n).forEach(function(t){e._items.put(t)});for(var r=0,c=this.findUpdateIndex(o,n);r<c.length;r++){var s=c[r],a=this.adapter._getView(this._items.get()||cc.instantiate(this.itemTemplate),s);this.horizontal?this._layoutHorizontal(a,s):this._layoutVertical(a,s)}}},e.prototype.checkNeedUpdate=function(){if(null==this.adapter)return-1;var t=this.horizontal?this.content.x-this.content.parent.width*this.content.parent.anchorX:this.content.y-this.content.parent.height*this.content.parent.anchorY,e=Math.floor(t/((this.horizontal?this._itemWidth:this._itemHeight)+this.spacing));return e<0&&!this.scrollTopNotifyed?(this.notifyScrollToTop(),this.scrollTopNotifyed=!0,e):(e>0&&(this.scrollTopNotifyed=!1),this.lastStartIndex!=e?(this.lastStartIndex=e,e):-1)},e.prototype.findUpdateIndex=function(t,e){for(var o=[],n=t;n<e;n++)this._filledIds.hasOwnProperty(n)||o.push(n);return o},e.prototype.notifyScrollToTop=function(){!this.adapter||this.adapter.getCount()<=0||this.pullDownCallback&&this.pullDownCallback()},e.prototype.notifyScrollToBottom=function(){!this.adapter||this.adapter.getCount()<=0||this.pullUpCallback&&this.pullUpCallback()},e.prototype.adjustEvent=function(){var t=this;this.content.on(this.isMobile()?cc.Node.EventType.TOUCH_END:cc.Node.EventType.MOUSE_UP,function(){t.scrollTopNotifyed=!1,t.scrollBottomNotifyed=!1},this),this.content.on(this.isMobile()?cc.Node.EventType.TOUCH_CANCEL:cc.Node.EventType.MOUSE_LEAVE,function(){t.scrollTopNotifyed=!1,t.scrollBottomNotifyed=!1},this)},e.prototype.isMobile=function(){return cc.sys.isMobile||cc.sys.platform===cc.sys.WECHAT_GAME||cc.sys.platform===cc.sys.QQ_PLAY},__decorate([c(cc.Prefab)],e.prototype,"itemTemplate",void 0),__decorate([c],e.prototype,"spacing",void 0),__decorate([c],e.prototype,"spawnCount",void 0),__decorate([c(cc.ScrollView)],e.prototype,"scrollView",void 0),e=__decorate([r],e)}(cc.Component);o.default=s;var a=function(){function t(){this.dataSet=[]}return t.prototype.setDataSet=function(t){this.dataSet=t},t.prototype.getCount=function(){return this.dataSet.length},t.prototype.getItem=function(t){return this.dataSet[t]},t.prototype._getView=function(t,e){return this.updateView(t,e),t},t}();o.AbsAdapter=a,cc._RF.pop()},{"../ListView/ListAdapter":"ListAdapter"}],ListenerMgr:[function(t,e,o){"use strict";cc._RF.push(e,"9bdefAW7+pNPIf7Kwt2XnbX","ListenerMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.getInstance=function(){return null==t.instance&&(t.instance=new t),this.instance},t.prototype.addButtonEvent=function(t,e,o,n){var i=new cc.Component.EventHandler;i.target=t,i.component=e,i.handler=o,i.customEventData=n,t.getComponent(cc.Button).clickEvents.push(i)},t.prototype.addClickEvent=function(t,e,o){t.on("click",function(){cc.loader.loadRes("mus/click",cc.AudioClip,function(t,e){mk.AudioMgr.playEffect(e)}),e.call(o)})},t.instance=null,t}();o.default=n,cc._RF.pop()},{}],MainGame:[function(t,e,o){"use strict";cc._RF.push(e,"b4219obbBFBxrW+emTvL/9N","MainGame"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.towerData=null,e.enemyFab=null,e.towerFab=null,e.pathRoot=null,e.store=null,e.pathArr=[],e.enemyArr=[],e.towerBasePtArr=[],e.towerBaseObjArr=[],e.creatSpeed=2,e.nowTime=0,e.gameState=0,e}return __extends(e,t),e.prototype.onLoad=function(){mk.UIkill.bindComponent(this)},e.prototype.start=function(){this._hello.$Label.string="\u4f60\u597d\uff01";for(var t=this.pathRoot.children,e=0;e<t.length;e++)this.pathArr.push(t[e].position);var o=this._towerRoot.children;for(e=0;e<o.length;e++)this.towerBasePtArr.push(o[e].position),this.towerBaseObjArr.push(o[e]);mk.UtilMgr.unitConversion(100001),mk.UtilMgr.unitConversion("15"),mk.UtilMgr.unitConversion("15");var n=mk.UtilMgr.subTogether("15","15");console.log("result",n)},e.prototype._onBtnStartTouchEnd=function(){console.log("\u5f00\u59cb\u70b9\u51fb"),this.gameState=1,this.creatEnemy()},e.prototype.creatEnemy=function(){var t=cc.instantiate(this.enemyFab);this.enemyArr.push(t),t.getComponent("enemy").init(this),this.pathRoot.addChild(t)},e.prototype.update=function(t){1===this.gameState&&(this.nowTime+=t,this.nowTime>this.creatSpeed&&(this.creatEnemy(),this.nowTime=0))},e.prototype._onBtnStoreTouchEnd=function(){cc.instantiate(this.store).parent=this.node},e.prototype._onTowerBaseTouchEnd=function(t){t.children.length>0||this.upgradeTower(t)},e.prototype.upgradeTower=function(t,e){var o=cc.instantiate(this.towerFab);o.parent=t;var n=null;n=void 0==e?this.towerData.json[0]:this.towerData.json[e+1],o.getComponent("tower").init(this,n),o.towerType=n.TowerType},__decorate([r(cc.JsonAsset)],e.prototype,"towerData",void 0),__decorate([r(cc.Prefab)],e.prototype,"enemyFab",void 0),__decorate([r(cc.Prefab)],e.prototype,"towerFab",void 0),__decorate([r(cc.Node)],e.prototype,"pathRoot",void 0),__decorate([r(cc.Prefab)],e.prototype,"store",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],MathExtension:[function(t,e,o){"use strict";cc._RF.push(e,"ff2a7JbV11B9Zikdqmi6N0R","MathExtension"),Math.randomInt=function(t,e){var o=Math.random();return t+Math.floor(o*(e-t))},Math.randomRangeFloat=function(t,e){return t+Math.random()*(e-t)},Math.fmod=function(t,e){return t-Math.floor(t/e)*e},cc._RF.pop()},{}],UIkill:[function(t,e,o){"use strict";cc._RF.push(e,"ac541c3OelAl6cmQkoqDp1F","UIkill"),Object.defineProperty(o,"__esModule",{value:!0});var n=["_onTouchStart","_onTouchMove","_onTouchEnd","_onTouchCancel"],i=function(){function t(){this._prefix="_",this._plugins=[]}return t.getInstance=function(){return null==t.singleInstance&&(t.singleInstance=new t),this.singleInstance},t.prototype.bindComponent=function(t,e){var o=this;void 0===e&&(e=null),t.$options=e||{};var i=t.node;i._components.forEach(function(t){var e=o.getComponentName(t);i[e="$"+e]=t}),this.bindTouchEvent(i,t,n),this.bindNode(t.node,t)},t.prototype.bindNode=function(t,e,o){var n=this;if(void 0===o&&(o=null),e.$options=o||{},e.$collector){if(e.$collector.node===t)return;delete e.$collector.node,Object.keys(e.$collector).forEach(function(t){delete e[t]})}e.$collector={node:t},t._components.forEach(function(t){var o=n.getComponentName(t);e[o="$"+o]=t,e.$collector[o]=t}),this.bindStartByPlugins(t,e),this.bindSubNode(t,e),this.bindEndByPlugins(t,e)},t.prototype.bindSubNode=function(t,e){var o=this,n=t;n.name[0]===this._prefix&&n._components.forEach(function(t){var i=o.getComponentName(t);n[i="$"+i]&&e.$options.debug?cc.warn(i+" property is already exists"):(n[i]=t,o.isFunction(t.onBind)&&t.onBind(e))}),this.checkNodeByPlugins(n,e)&&n.children.forEach(function(t){var i=t.name;if(i[0]===o._prefix){var r=i.indexOf("$");if(-1!==r&&(t.$eventName=i.substr(0,r),t.$=i.substr(r+1),i=t.$eventName+t.$[0].toUpperCase()+t.$.substr(1),t.name=i),e[i]&&e.$options.debug)return void cc.warn(e.name+"."+i+" property is already exists");o.bindTouchEvent(t,e),e[i]=t,e.$collector&&(e.$collector[i]=t)}else n[i]||(n[i]=t);o.bindSubNode(t,e)})},t.prototype.registerPlugin=function(t){var e=this;Array.isArray(t)||(t=[t]),t.forEach(function(t){e._plugins.some(function(e){return e.name===t.name||e===t})||(e._plugins.push(t),t.onRegister&&t.onRegister())})},t.prototype.getComponentName=function(t){return t.name.match(/<.*>$/)[0].slice(1,-1)},t.prototype.bindStartByPlugins=function(t,e){this._plugins.forEach(function(o){o.onBindStart&&o.onBindStart(t,e)})},t.prototype.bindEndByPlugins=function(t,e){this._plugins.forEach(function(o){o.onBindEnd&&o.onBindEnd(t,e)})},t.prototype.getTouchEventName=function(t,e){void 0===e&&(e=null);var o=t.$eventName||t.name;return o&&(o=o[this._prefix.length].toUpperCase()+o.slice(this._prefix.length+1)),e?"_on"+o+e:["_on"+o+"TouchStart","_on"+o+"TouchMove","_on"+o+"TouchEnd","_on"+o+"TouchCancel"]},t.prototype.bindTouchEvent=function(t,e,o){var n=this;if(void 0===o&&(o=null),!t.getComponent(cc.EditBox)){var i=o||this.getTouchEventName(t),r=[cc.Node.EventType.TOUCH_START,cc.Node.EventType.TOUCH_MOVE,cc.Node.EventType.TOUCH_END,cc.Node.EventType.TOUCH_CANCEL];i.forEach(function(o,i){(e[o]||t.getComponent(cc.Button))&&t.on(r[i],function(i){var r=i.currentTarget;if(!1!==r.interactable&&!1!==r.active){var c=r.getComponent(cc.Button);if(!c||!1!==c.interactable){var s,a=e[o],p=a||c&&c.clickEvents.length;p&&n.beforeHandleEventByPlugins(r,i,!!a),a&&(s=a.call(e,r,i),i.type===cc.Node.EventType.TOUCH_START&&!1===s?r._touchListener.setSwallowTouches(!1):(t._touchListener.setSwallowTouches(!0),i.stopPropagation())),p&&n.afterHandleEventByPlugins(r,i,!!a,s)}}})}),this.bindTouchLongEvent(t,e)}},t.prototype.beforeHandleEventByPlugins=function(t,e,o){this._plugins.forEach(function(n){n.onBeforeHandleEvent&&n.onBeforeHandleEvent(t,e,o)})},t.prototype.bindTouchLongEvent=function(t,e){var o=t,n=this.getTouchEventName(o,"TouchLong"),i=e[""+n];this.isFunction(i)&&(o._touchLongTimer=null,o.on(cc.Node.EventType.TOUCH_END,function(){o._touchLongTimer&&(clearTimeout(o._touchLongTimer),o._touchLongTimer=0,delete o.interactable)}),o.on(cc.Node.EventType.TOUCH_START,function(t){o._touchLongTimer=setTimeout(function(){o.interactable=!!i.call(e,o,t),o._touchLongTimer=0},o.touchLongTime||1e3)}))},t.prototype.checkNodeByPlugins=function(t,e){return!this._plugins.some(function(o){return o.onCheckNode?!1===o.onCheckNode(t,e):null})},t.prototype.afterHandleEventByPlugins=function(t,e,o,n){this._plugins.forEach(function(i){i.onAfterHandleEvent&&i.onAfterHandleEvent(t,e,o,n)})},t.prototype.isFunction=function(t){return"function"==typeof t},t.singleInstance=null,t}();o.default=i,cc._RF.pop()},{}],UtilMgr:[function(t,e,o){"use strict";cc._RF.push(e,"2d3888D+HpCsJy4zItGUvGH","UtilMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype.setItemKey=function(t,e){cc.sys.localStorage.setItem(t,e.toString())},t.prototype.getItemKey=function(t){return parseInt(cc.sys.localStorage.getItem(t))},t.prototype.pastDay=function(){var t=this.getItemKey("powerTime");return!t||((new Date).getTime()-t)/1e3>86400},t.prototype.unitConversion=function(t){var e=["k","M","B","T","aa","bb","cc","dd","ee","ff","gg","hh","ii","jj","kk","ll","mm","nn","oo","pp","qq","rr","ss","tt","uu","vv","ww","xx","yy","zz","Aa","Bb","Cc","Dd","Ee","Ff","Gg","Hh","Ii","Jj","Kk","Ll","Mm","Nn","Oo","Pp","Qq","Rr","Ss","Tt","Uu","Vv","Ww","Xx","Yy","Zz","AA","BB","CC","DD","EE","FF","GG","HH","II","JJ","KK","LL","MM","NN","OO","PP","QQ","RR","SS","TT","UU","VV","WW","XX","YY","ZZ"],o=(t=t.toString()).length;if(o<=3)return t;var n,i,r,c=o/3|0,s=o%3;return 0===s?(n=t.substr(0,3),i=t.substr(3,2),r=e[c-2]):(n=t.substr(0,s),i=t.substr(s,2),r=e[c-1]),n+"."+i+r},t.prototype.addTogether=function(t,e){var o="",n=0;for(t=t.split(""),e=e.split("");t.length||e.length;)0==t.length?n+=0+parseInt(e.pop()):0==e.length?n+=parseInt(t.pop())+0:n+=parseInt(t.pop())+parseInt(e.pop()),o=n%10+o,n>9?(n=1,0==t.length&&0==e.length&&(o=n+o)):n=0;return o.replace(/^0+/,"")},t.prototype.subTogether=function(t,e){var o="",n=0,i=0,r=0,c=0;for(t=t.split(""),e=e.split(""),t.length>e.length||(t.length<e.length?(c=t,t=e,e=c):t.length==e.length&&(t[0]>e[0]||t[0]<e[0]&&(c=t,t=e,e=c)));t.length||e.length;)n=t.pop(),0!=e.length?(n-=r)-(i=e.pop())>0?(o=n-i+o,r=0):n-i<0?(o=n+10-i+o,r=1):n==i&&(o=0+o,r=0):(o=(n-=r)+o,r=0);return o=""==o.replace(/^0+/,"")?"0":o.replace(/^0+/,"")},t}();o.default=n,cc._RF.pop()},{}],WXMgr:[function(t,e,o){"use strict";cc._RF.push(e,"07dd4D+NWJB654UI150+VvF","WXMgr"),Object.defineProperty(o,"__esModule",{value:!0});var n=function(){function t(){0}return t.getInstance=function(){return null==this.instance&&(this.instance=new t),this.instance},t.prototype._regisiterWXCallback=function(){this._regisiterOnShow()},t.prototype._regisiterOnShow=function(){var t=this;wx.onShow(function(e){t._onShowCallback(e)})},t.prototype._onShowCallback=function(t){cc.systemEvent.emit("OnWXShow",t);var e=(new Date).getTime()/1e3;cc.systemEvent.emit("Share",{time:e})},t.prototype.initLaunchCallBack=function(t,e){},t.prototype.initShowCallback=function(t,e){t&&e?cc.systemEvent.on("OnWXShow",t,e):console.log("initShowCallback..","\u7f3a\u5c11\u53c2\u6570")},t.prototype.showShareMenuWithTicket=function(t){},t.prototype.showToast=function(t,e){},t.prototype._regisiterWXShareCallback=function(t){t?t+="& imageId=1":t="imageId=1";var e={title:"@\u6211",imageUrl:"https://dwwxs.265app.com/resource/res/share/1.png",query:t||null};wx.onShareAppMessage(function(){return e})},t.prototype.customShare=function(t,e,o){},t.prototype.commonShare=function(t){},t.prototype._buildShareInfo=function(t,e,o){var n=Math.randomInt(1,5);return mk.HttpMgr.req({},"user/share",function(){}),o?o+="& imageId="+n:o="imageId="+n,{title:"@\u6211",imageUrl:"https://dwwxs.265app.com/resource/res/share/"+n+".png",query:o||null}},t.prototype.login=function(t,e){},t}();o.default=n,cc._RF.pop()},{}],bullet:[function(t,e,o){"use strict";cc._RF.push(e,"6377aqmcWdH14+URiGEzoWg","bullet"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.start=function(){},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],enemy:[function(t,e,o){"use strict";cc._RF.push(e,"57e259pn5hPvJq9JTcXBsxi","enemy"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=(n.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.pathIndex=0,e.pathObjArr=null,e.game=null,e.moveSpeed=70,e}return __extends(e,t),e.prototype.start=function(){},e.prototype.init=function(t){this.game=t,this.node.position=t.pathArr[0],this.pathObjArr=t.pathArr},e.prototype.update=function(t){if(this.pathIndex>this.pathObjArr.length-1)for(var e=0;e<this.game.enemyArr.length;e++)this.game.enemyArr[e]===this.node&&(this.node.removeFromParent(!0),this.game.enemyArr.splice(e,1),e--);else{var o=this.node.position,n=this.pathObjArr[this.pathIndex],i=n.sub(o).normalize(),r=n.sub(o).mag(),c=o.add(i.mul(this.moveSpeed*t));r<1&&this.pathIndex++,this.node.setPosition(c)}},e=__decorate([i],e)}(cc.Component));o.default=r,cc._RF.pop()},{}],heroType:[function(t,e,o){"use strict";cc._RF.push(e,"8eebcElP2hD0ryCfQ69ifeF","heroType"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=null,e.text="hello",e}return __extends(e,t),e.prototype.start=function(){},__decorate([r(cc.Label)],e.prototype,"label",void 0),__decorate([r],e.prototype,"text",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],onLoadMgr:[function(t,e,o){"use strict";cc._RF.push(e,"700b5JTv0dGjaEqo5gTTY4Z","onLoadMgr"),Object.defineProperty(o,"__esModule",{value:!0}),window.mk={};var n=t("./HttpMgr"),i=t("./WXMgr"),r=t("./GameData"),c=t("./ListenerMgr"),s=t("./UtilMgr"),a=t("./AudioMgr"),p=t("./UIkill");mk.UIkill=p.default.getInstance(),mk.HttpMgr=n.default.getInstance(),mk.UtilMgr=s.default.getInstance(),mk.WXMgr=i.default.getInstance(),mk.AudioMgr=a.default.getInstance(),mk.ListenerMgr=c.default.getInstance(),mk.GameData=r.default.getInstance(),cc._RF.pop()},{"./AudioMgr":"AudioMgr","./GameData":"GameData","./HttpMgr":"HttpMgr","./ListenerMgr":"ListenerMgr","./UIkill":"UIkill","./UtilMgr":"UtilMgr","./WXMgr":"WXMgr"}],splash:[function(t,e,o){"use strict";cc._RF.push(e,"fe48bpNIZBFCKyh/y4FQFjL","splash"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.lodinPro=null,e}return __extends(e,t),e.prototype.onLoad=function(){cc.director.preloadScene("main",this.onProgress.bind(this),this.onLoaded.bind(this))},e.prototype.start=function(){},e.prototype.onProgress=function(t,e,o){var n=t/e;this.lodinPro.progress=n},e.prototype.onLoaded=function(t){this.loadScene()},e.prototype.loadScene=function(){cc.director.loadScene("main")},__decorate([r(cc.ProgressBar)],e.prototype,"lodinPro",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}],tower:[function(t,e,o){"use strict";cc._RF.push(e,"d77ddMquYpJlpRY11vGm/yF","tower"),Object.defineProperty(o,"__esModule",{value:!0});var n=cc._decorator,i=n.ccclass,r=n.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.bullet=null,e.towerFrame=[],e.game=null,e.targetEnemy=void 0,e.enemyArr=null,e.nowTime=0,e.pos=cc.v2(0,0),e.towerType=0,e.range=0,e.attackSpeed=0,e.attackHarm=0,e}return __extends(e,t),e.prototype.onLoad=function(){mk.UIkill.bindComponent(this),this.node.on("touchstart",this._onTowerTouchStart,this),this.node.on("touchmove",this._onTowerTouchMove,this),this.node.on("touchend",this._onTowerTouchEnd,this),this.node.on("touchcancel",this._onTowerTouchCancel,this)},e.prototype.start=function(){this.pos=this.node.parent.position},e.prototype._onTowerTouchStart=function(t){this.node.parent.zIndex=999},e.prototype._onTowerTouchMove=function(t){var e=t.getLocation(),o=cc.winSize,n=cc.v2(e.x-o.width/2,e.y-o.height/2),i=n.sub(this.node.parent.position);this.node.position=i;for(var r=this.game.towerBasePtArr,c=this.game.towerBaseObjArr,s=0;s<r.length;s++){if(!r[s].equals(this.pos))if(n.sub(r[s]).mag()<60&&c[s].children.length>0){var a=c[s].children[0];a.towerType==this.towerType&&(this.game.upgradeTower(a.parent,this.towerType),a.removeFromParent(),this.node.removeFromParent());break}}},e.prototype._onTowerTouchEnd=function(t){for(var e=t.getLocation(),o=cc.winSize,n=cc.v2(e.x-o.width/2,e.y-o.height/2),i=this.game.towerBasePtArr,r=this.game.towerBaseObjArr,c=0;c<i.length;c++){if(!i[c].equals(this.pos))if(n.sub(i[c]).mag()<60){if(r[c].children.length>0){var s=r[c].children[0];if(s.towerType==this.towerType);else{var a=this.node.parent,p=s.parent;this.node.parent=p,s.parent=a,this.node.getComponent("tower").pos=p.position,s.getComponent("tower").pos=a.position}}else this.pos=r[c].position,this.node.parent=r[c];break}}this.node.position=cc.v2(0,0),this.resetZindex()},e.prototype.resetZindex=function(){for(var t=this.game.towerBaseObjArr,e=0;e<t.length;e++)t[e].zIndex=1},e.prototype._onTowerTouchCancel=function(){this.node.position=cc.v2(0,0),this.resetZindex()},e.prototype.init=function(t,e){this.game=t,this.enemyArr=this.game.enemyArr,this.towerType=e.TowerType,this.attackHarm=e.AttackHarm,this.range=e.Range,this.attackSpeed=e.AttackSpeed,this.$Sprite.spriteFrame=this.towerFrame[this.towerType]},e.prototype.attackEnemy=function(t){if(void 0!==this.targetEnemy)if(this.nowTime+=t,this.targetEnemy.position.sub(this.pos).mag()<this.range){if(this.nowTime>this.attackSpeed){console.log("attack!!");var e=cc.instantiate(this.bullet);e.parent=this.node,e.getComponent("bullet").init(this.game),this.nowTime=0}}else this.targetEnemy=void 0},e.prototype.update=function(t){if(0!=this.game.enemyArr.length){if(void 0===this.targetEnemy)for(var e=0;e<this.enemyArr.length;e++){this.enemyArr[e].getPosition().sub(this.pos).mag()<101&&(this.targetEnemy=this.enemyArr[e])}this.attackEnemy(t)}},__decorate([r(cc.Prefab)],e.prototype,"bullet",void 0),__decorate([r([cc.SpriteFrame])],e.prototype,"towerFrame",void 0),e=__decorate([i],e)}(cc.Component);o.default=c,cc._RF.pop()},{}]},{},["ListAdapter","ListItem","ListView","MainGame","bullet","enemy","heroType","tower","AudioMgr","GameData","HttpMgr","ListenerMgr","MathExtension","UIkill","UtilMgr","WXMgr","onLoadMgr","splash"]);