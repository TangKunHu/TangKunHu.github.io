window.__require=function e(t,i,n){function a(r,s){if(!i[r]){if(!t[r]){var u=r.split("/");if(u=u[u.length-1],!t[u]){var l="function"==typeof __require&&__require;if(!s&&l)return l(u,!0);if(o)return o(u,!0);throw new Error("Cannot find module '"+r+"'")}}var c=i[r]={exports:{}};t[r][0].call(c.exports,function(e){return a(t[r][1][e]||e)},c,c.exports,e,t,i,n)}return i[r].exports}for(var o="function"==typeof __require&&__require,r=0;r<n.length;r++)a(n[r]);return a}({AIUtil:[function(e,t,i){"use strict";cc._RF.push(t,"a8835WrLthIsqrw8FJh5GaY","AIUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/base/BaseClass"),a=e("../entity/CharRole"),o=e("../module/gamescene/const/ExAttributeType"),r=e("../../core/base/AttributeType"),s=e("./RoleAI"),u=e("../base/EntityManager"),l=e("../map/GameMap"),c=e("../module/fb/UserFb"),d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ins=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.ins.call(this,t)},t.prototype.userSkill=function(e,t,i,n){return void 0===n&&(n=null),!0},t.prototype.hram=function(e,t,i,n){void 0===n&&(n=0),t.hram(n),t.getHP()<=0&&this.relive(t)},t.prototype.relive=function(e){if(e instanceof a.default&&!e.hasBuff(52001)){var t=e.infoModel.attributeExData[o.ExAttributeType.eatGodBlessProbability],i=Math.random();if(i<t/1e4)return e.reset(),e.removeAllBuff(),i=e.infoModel.getAtt(r.AttributeType.atMaxHp)*e.infoModel.attributeExData[o.ExAttributeType.eatGodBlessRate]/1e4,e.hram(i),!0}return!1},t.dead=function(e,t){void 0===t&&(t=null),e.AI_STATE=s.AI_State.Die,u.default.ins().removeByHandle(e.infoModel.handle,!1,l.default.fbType==c.default.FB_TYPE_EXP)},t}(n.default);i.default=d,cc._RF.pop()},{"../../core/base/AttributeType":"AttributeType","../../core/base/BaseClass":"BaseClass","../base/EntityManager":"EntityManager","../entity/CharRole":"CharRole","../map/GameMap":"GameMap","../module/fb/UserFb":"UserFb","../module/gamescene/const/ExAttributeType":"ExAttributeType","./RoleAI":"RoleAI"}],AStarNode:[function(e,t,i){"use strict";cc._RF.push(t,"2b6c857ysZOnZBtyrivVZgn","AStarNode"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(e,t,i){this.nX=e,this.nY=t,this.nDir=i}}();i.default=n,cc._RF.pop()},{}],AStar:[function(e,t,i){"use strict";cc._RF.push(t,"676deyXEwdP3rcmL44ntyya","AStar"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../utils/DirUtil"),a=e("./AStarNode"),o=e("../../game/map/GameMap"),r=function(){function e(e){void 0===e&&(e=null),this.m_nMarkTag=0,e&&this.initFromMap(e)}return e.prototype.initFromMap=function(e){var t=0;this.m_ASMapCells?t=this.m_ASMapCells.length:this.m_ASMapCells=[],this.m_nWidth=e.numCols,this.m_nHeight=e.numRows;var i,n,a,o,r=this.m_nWidth*this.m_nHeight;r>this.m_ASMapCells.length&&(this.m_ASMapCells.length=r);for(var u=t;u<r;++u)this.m_ASMapCells[u]=new s;for(a=0,n=0;n<this.m_nHeight;++n)for(i=0;i<this.m_nWidth;++i)(o=this.m_ASMapCells[a]).X=i,o.Y=n,o.CanNotMove=!e.isWalkableTile(i,n),a++},e.prototype.getPatch=function(t,i,o,r){if(t==o&&i==r)return null;(t<0||t>=this.m_nWidth||i<0||i>=this.m_nHeight)&&debug.log("\u5bfb\u8def\u7684\u8d77\u59cb\u4f4d\u7f6e\u53c2\u6570\u65e0\u6548\uff1a("+t+", "+i+")"),(o<0||o>=this.m_nWidth||r<0||r>=this.m_nHeight)&&debug.log("\u5bfb\u8def\u7684\u76ee\u7684\u4f4d\u7f6e\u53c2\u6570\u65e0\u6548\uff1a("+o+", "+r+")");var u=this.m_ASMapCells[r*this.m_nWidth+o];if(!u||u.CanNotMove)return null;if(this.reset(t,i),this.pathLine({x:t,y:i},{x:o,y:r}))return[new a.default(o,r,n.default.get8DirBy2Point({x:t,y:i},{x:o,y:r}))];var l,c,d,f,p=!1,h=t,g=i,y=this.m_ASMapCells[g*this.m_nWidth+h];for(y.GCost=0,y.LastX=-1,y.LastY=-1,y.X=h,y.Y=g,y.MarkTag=this.m_nMarkTag,y.HCost=Math.abs(o-t)+10*Math.abs(r-i);;){if(h==o&&g==r){p=!0;break}for(y.State!=s.CSCLOSE&&this.closeCell(y),l=0;l<8;++l)c=h+e.NEIGHBORPOS_X_VALUES[l],d=g+e.NEIGHBORPOS_Y_VALUES[l],c<0||c>=this.m_nWidth||d<0||d>=this.m_nHeight||(f=this.m_ASMapCells[d*this.m_nWidth+c]).CanNotMove||(f.MarkTag!=this.m_nMarkTag||f.State==s.CSNONE?(f.MarkTag=this.m_nMarkTag,f.LastX=h,f.LastY=g,f.btDir=l,f.GCost=y.GCost+e.AS_MOVECOST[1&l],f.HCost=Math.abs(o-c)+10*Math.abs(r-d),this.openCell(f)):f.State==s.CSOPEN&&f.GCost>y.GCost+e.AS_MOVECOST[1&l]&&(f.LastX=h,f.LastY=g,f.btDir=l,f.GCost=y.GCost+e.AS_MOVECOST[1&l],this.reopenCell(f)));if(null==(y=this.m_LastOpenCell))break;h=y.X,g=y.Y}if(p){for(var v=new Array,m=void 0;m&&y&&m.nDir==y.btDir||(m=new a.default(y.X,y.Y,y.btDir),v.push(m)),!((y=this.m_ASMapCells[y.LastY*this.m_nWidth+y.LastX]).LastX<=0&&y.LastY<=0||y.MarkTag!=this.m_nMarkTag););return v}return null},e.prototype.pathLine=function(e,t){var i=e,n=0;n=t.x==e.x?1:1*(t.y-e.y)/(t.x-e.x);for(var a=t.y-n*t.x,r=t.x>e.x?1:-1,s=t.y>e.y?1:-1,u=e.x+(r>0?1:0),l=Math.abs(e.x-t.x),c=t,d=0;d<=l;d++,u+=r){if(d!=l&&(c.x=r>0?u:u-1,c.y=Math.floor(n*c.x+a)),i.y!=c.y)for(var f=i.y+s;;f+=s){if(!o.default.checkWalkable(i.x,f))return!1;if(f==c.y)break}if(d!=l&&!o.default.checkWalkable(c.x,c.y))return!1;i=c}return!0},e.prototype.reset=function(e,t){var i=this.m_ASMapCells[t*this.m_nWidth+e];i.LastX=0,i.LastY=0,i.HCost=0,i.GCost=0,i.FValue=0,i.State=0,i.Prev=null,i.Next=null,i.btDir=0,this.m_LastOpenCell=null,this.m_nMarkTag=this.m_nMarkTag+1},e.prototype.closeCell=function(e){e.State==s.CSOPEN&&(e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),e==this.m_LastOpenCell&&(this.m_LastOpenCell=e.Prev)),e.State=s.CSCLOSE},e.prototype.openCell=function(e){e.State=s.CSOPEN;var t=e.HCost+e.GCost;e.FValue=t;var i=this.m_LastOpenCell;if(i){for(;i.FValue<t;){if(null==i.Prev)return i.Prev=e,e.Prev=null,void(e.Next=i);i=i.Prev}e.Prev=i,i.Next?(e.Next=i.Next,i.Next.Prev=e,i.Next=e):(e.Next=null,i.Next=e,this.m_LastOpenCell=e)}else this.m_LastOpenCell=e,e.Prev=null,e.Next=null},e.prototype.reopenCell=function(e){var t=e.HCost+e.GCost;e.FValue=t;var i=e.Next;if(i&&i.FValue>t){do{i=i.Next}while(i&&i.FValue>t);e.Prev&&(e.Prev.Next=e.Next),e.Next&&(e.Next.Prev=e.Prev),i?(e.Next=i,i.Prev?(e.Prev=i.Prev,i.Prev.Next=e):e.Prev=null,i.Prev=e):(e.Prev=this.m_LastOpenCell,e.Next=null,this.m_LastOpenCell.Next=e,this.m_LastOpenCell=e)}},e.RMOVECOST=14,e.DMOVECOST=10,e.AS_MOVECOST=[e.DMOVECOST,e.RMOVECOST],e.NEIGHBORPOS_X_VALUES=[0,1,1,1,0,-1,-1,-1],e.NEIGHBORPOS_Y_VALUES=[-1,-1,0,1,1,1,0,-1],e}();i.default=r;var s=function(){function e(){}return e.CSNONE=0,e.CSOPEN=1,e.CSCLOSE=2,e}();cc._RF.pop()},{"../../game/map/GameMap":"GameMap","../utils/DirUtil":"DirUtil","./AStarNode":"AStarNode"}],AchievementData:[function(e,t,i){"use strict";cc._RF.push(t,"f536dtBy5xPzLcAmoWDtSF8","AchievementData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],AchievementTaskConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7639b8jrQ9MvYBYMeJfEodF","AchievementTaskConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],Activationtongyong:[function(e,t,i){"use strict";cc._RF.push(t,"621bfUYno9JDbmOnfnBJhAT","Activationtongyong"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/view/BaseEuiView"),a=e("../../enum/LayerManager"),o=e("../../../core/base/ViewManager"),r=cc._decorator,s=r.ccclass,u=(r.property,function(e){function t(){var t=e.call(this)||this;return t.parentRoot=a.LayerManager.UI_Main,t.skinName="activationtongyong",t.isTopLevel=!0,t.bgClose.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t.okBtn.addEventListener(egret.TouchEvent.TOUCH_TAP,t.onTap,t),t}var i;return __extends(t,e),i=t,t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.onTap=function(e){switch(e.currentTarget){case this.okBtn:case this.bgClose:o.default.ins().close(i)}},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=e[0],n=e[1],a=e[2],o=e[3];this.closeFunc=e[4];var r=e[5],s=e[6];this.title.source=i?"tongyongjihuochenggongp3":"tongyongjihuochenggongp2";var u=RegExpUtil.NonNumericExp.exec(n);if(u){for(var l="",c="",d=0;d<n.length;d++)d>=u.index?c+=n[d]:l+=n[d];var f="";f=Number(l)/10>=1?l+"\n":" "+l+"\n",this.itemname.text=f+c.split("").join("\n")}else this.itemname.text=n.split("").join("\n");this.img.source=a,r&&(this.imgEff||(this.imgEff=new MovieClip),this.imgEff.parent||this.imgMc.addChild(this.imgEff),this.imgEff.playFile(RES_DIR_EFF+r,-1)),s&&(this.zlEff||(this.zlEff=new MovieClip),this.zlEff.parent||this.zlMc.addChild(this.zlEff),this.zlEff.playFile(RES_DIR_EFF+s,-1)),this.playAnimaiton(o)},t.prototype.close=function(){egret.Tween.removeTweens(this.title),egret.Tween.removeTweens(this.titleBg),egret.Tween.removeTweens(this.img),egret.Tween.removeTweens(this.imgMc),egret.Tween.removeTweens(this.zlMc),egret.Tween.removeTweens(this.tielian),egret.Tween.removeTweens(this.imgAct),this.closeFunc&&this.closeFunc.apply(null),this.closeFunc=null,DisplayUtils.removeFromParent(this.zlEff),DisplayUtils.removeFromParent(this.imgEff),DisplayUtils.removeFromParent(this.mc),this.zlEff=null,this.imgEff=null,this.mc=null},t.prototype.playAnimaiton=function(e){var t=this,i=this.tlpos=this.tlpos||[this.tielian.x,this.tielian.y],n=this.lbgpos=this.lbgpos||[this.lbg.x,this.lbg.y],a=this.rbgpos=this.rbgpos||[this.rbg.x,this.rbg.y],o=this.titleScale=this.titleScale||[this.title.scaleX,this.title.scaleY],r=this.tbgScale=this.tbgScale||[this.titleBg.scaleX,this.titleBg.scaleY],s=this.imgScale=this.imgScale||[this.img.scaleX,this.img.scaleY],u=[0,0];this.imgEff?u=this.imgMcScale=this.imgMcScale||[this.imgMc.scaleX,this.imgMc.scaleY]:this.zlEff&&(u=this.imgMcScale=this.imgMcScale||[this.zlMc.scaleX,this.zlMc.scaleY]),this.bg.visible=!1,this.itemname.visible=!1,this.leftBg.visible=!1,this.buttonBg.visible=!1,this.title.scaleX=0,this.title.scaleY=0,this.titleBg.scaleX=0,this.titleBg.scaleY=0,this.img.scaleX=0,this.img.scaleY=0,this.imgMc.scaleX=0,this.imgMc.scaleY=0,this.tielian.y=2*-this.tielian.height;egret.Tween.get(this.tielian).to({y:i[1]+50},200).to({y:i[1]},100).call(function(){t.bg.visible=!0;var i=egret.Tween.get(t.title),n=egret.Tween.get(t.titleBg),a=egret.Tween.get(t.img),l=egret.Tween.get(t.imgMc);i.to({scaleX:o[0],scaleY:o[1]},500),n.to({scaleX:r[0],scaleY:r[1]},500),l.to({scaleX:u[0],scaleY:u[1]},500),a.to({scaleX:s[0],scaleY:s[1]},500).wait(500).call(function(){t.itemname.visible=!0,t.leftBg.visible=!0,t.buttonBg.visible=!0,t.showPanel(e),t.artifactTween()})}),this.lbg.y=-this.tielian.height,this.rbg.y=-this.tielian.height,egret.Tween.get(this.lbg).to({y:n[1]+50},200).to({y:n[1]},100),egret.Tween.get(this.rbg).to({y:a[1]+50},200).to({y:a[1]},100)},t.prototype.showPanel=function(e){e&&(this.mc=new MovieClip,this.mc.anchorOffsetX=this.Groupeff.anchorOffsetX,this.mc.anchorOffsetY=this.Groupeff.anchorOffsetY,this.Groupeff.addChild(this.mc),this.mc.playFile(RES_DIR_EFF+"artifacteff",-1))},t.prototype.artifactTween=function(){egret.Tween.get(this.imgAct,{loop:!0}).to({y:this.imgAct.y-20},1e3).to({y:this.imgAct.y},1e3)},t.show=function(e,t,n,a,r,s,u){void 0===a&&(a=!0),void 0===r&&(r=null),o.default.ins().open(i,e,t,n,a,r,s,u),StageUtils.ins().setTouchChildren(!0)},t=i=__decorate([s],t)}(n.default));i.default=u,cc._RF.pop()},{"../../../core/base/ViewManager":"ViewManager","../../../core/view/BaseEuiView":"BaseEuiView","../../enum/LayerManager":"LayerManager"}],Activity4configSunmit:[function(e,t,i){"use strict";cc._RF.push(t,"bee0bItO1xO1aNVgPrj1h6x","Activity4configSunmit"),cc._RF.pop()},{}],ActivityBaseData:[function(e,t,i){"use strict";cc._RF.push(t,"8e1dc5qilVBWINDasV63TJi","ActivityBaseData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e){}return e.prototype.init=function(e,t){},e.prototype.update=function(e){},e.prototype.canReward=function(){return!1},e.prototype.isOpenActivity=function(){return!1},Object.defineProperty(e.prototype,"rewardState",{get:function(){return 0},enumerable:!0,configurable:!0}),e.prototype.specialState=function(){return!0},e.prototype.getHide=function(){return!1},e}();i.default=n,function(e){e[e.Normal=0]="Normal",e[e.Personal=1]="Personal",e[e.Nesting=2]="Nesting"}(i.ActivityType||(i.ActivityType={})),cc._RF.pop()},{}],ActivityBtnConfig:[function(e,t,i){"use strict";cc._RF.push(t,"82b7bf7Vf5EK4nIFqMurfwv","ActivityBtnConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityConfig:[function(e,t,i){"use strict";cc._RF.push(t,"cc857D5LHJHRZq9pkSkGBkg","ActivityConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ActivityDataFactory:[function(e,t,i){"use strict";cc._RF.push(t,"2c833LAgEdPKoWtq1Qy6eZC","ActivityDataFactory"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../server/GameServer"),o=e("../../../../core/utils/DateUtils"),r=e("../../../manager/GlobalConfig"),s=e("./ActivityType0Data"),u=e("./ActivityType1Data"),l=e("./ActivityType6Data"),c=e("./ActivityType5Data"),d=e("./ActivityType4Data"),f=e("./ActivityType3Data"),p=e("./ActivityType7Data"),h=e("./ActivityType8Data"),g=e("./ActivityType9Data"),y=e("./ActivityType10Data"),v=e("./ActivityType12Data"),m=e("./ActivityType11Data"),b=e("../Activity"),_=e("./ActivityType17Data"),C=e("./ActivityType18Data"),I=e("./ActivityType19Data"),T=e("./ActivityType20Data"),S=e("./ActivityType21Data"),R=e("./ActivityType22Data"),B=e("../ActivityTypeConst"),M=e("../ThreeHeroes"),E=function(){function e(){}return e.create=function(t){var i,a=t.readInt(),o=t.readInt(),B=t.readInt(),M=t.readShort(),E=t.readInt();switch(M){case e.ACTIVITY_TYPE_1:i=new u.default(t);break;case e.ACTIVITY_TYPE_2:i=new s.default(t);break;case e.ACTIVITY_TYPE_3:i=new f.default(t);break;case e.ACTIVITY_TYPE_4:i=new d.default(t);break;case e.ACTIVITY_TYPE_5:(i=b.default.ins().getActivityDataById(a))?i.updateRecord(t):i=new c.default(t);break;case e.ACTIVITY_TYPE_6:i=new l.default(t);break;case e.ACTIVITY_TYPE_7:i=new p.default(t);break;case e.ACTIVITY_TYPE_8:i=new h.default(t);break;case e.ACTIVITY_TYPE_9:i=new g.default(t);break;case e.ACTIVITY_TYPE_10:i=new y.default(t);break;case e.ACTIVITY_TYPE_11:i=new m.default(t,a,o,B);break;case e.ACTIVITY_TYPE_12:b.default.ins().activityData[a]?(i=b.default.ins().activityData[a]).init(t,a):i=new v.default(t,a);break;case e.ACTIVITY_TYPE_17:i=new _.default(t);break;case e.ACTIVITY_TYPE_18:i=new C.default(t);break;case e.ACTIVITY_TYPE_19:i=new I.default(t);break;case e.ACTIVITY_TYPE_20:i=new T.default(t);break;case e.ACTIVITY_TYPE_21:i=new S.default(t);break;case e.ACTIVITY_TYPE_22:i=new R.default(t);break;default:debug.log("\u9519\u8bef\u6d3b\u52a8\u7c7b\u578b:"+M);for(var D=0;D<E;D++)t.readByte();return null}if(!i)return null;i.id=a,i.startTime=o,i.endTime=B,i.type=M,i.activityType=n.ActivityType.Normal;var A=r.default.ActivityConfig[a];return A&&(i.timeType=A.timeType,i.pageStyle=A.pageStyle,i.pageSkin=A.pageSkin),i},e.createEx=function(){var t,i=r.default.ActivityBtnConfig,u=o.default.formatMiniDateTime(a.default._serverZeroTime),l=o.default.formatMiniDateTime(a.default._serverHeZeroTime);for(var c in i){var d=i[c],f=d.hfTimes?d.hfTimes:0,p=d.timeType?d.timeType:0;if((!p||p!=e.TimeType_Total||!f||f==a.default._hefuCount)&&d.id>1e4){if((t=new s.default(null)).id=d.id,t.type=d.type,t.activityType=n.ActivityType.Normal,t.timeType=d.timeType,d.pageStyle&&(t.pageStyle=d.pageStyle),d.relyOn){t.relyOn=d.relyOn;for(var h=0;h<d.relyOn.length;h++)if(b.default.ins().activityData[d.relyOn[h]]){t.startTime=o.default.formatMiniDateTime(b.default.ins().activityData[d.relyOn[h]].startTime),t.endTime=o.default.formatMiniDateTime(b.default.ins().activityData[d.relyOn[h]].endTime);break}}else if(d.timeType==e.TimeType_Normal){var g=+(I=d.startTime.split("-"))[0],y=I[1].split(":"),v=new Date(u);if(v.setDate(v.getDate()+g),v.setHours(+y[0],+y[1],0,0),t.startTime=v.getTime(),d.endTime){var m=+(I=d.endTime.split("-"))[0],_=I[1].split(":"),C=new Date(u);C.setDate(C.getDate()+m),C.setHours(+_[0],+_[1],0,0),t.endTime=C.getTime()}else t.endTime=a.default.serverTime+2592e6}else if(d.timeType==e.TimeType_Fixed)t.startTime=new Date(d.startTime).getTime(),t.endTime=new Date(d.endTime).getTime();else if(d.timeType==e.TimeType_Total){var I=[];m=o.default.DAYS_PER_WEEK;switch(d.endTime&&(m=+(I=d.endTime.split("-"))[0]),d.id){case B.default.HEFU_XUNBAO:t.startTime=l,t.endTime=l+24*r.default.TreasureHuntConfig.hefuDay*60*60*1e3;break;case B.default.HEFU_BOSS:case B.default.HEFU_JZLC:case B.default.HEFU_CZZS:t.startTime=l,t.endTime=l+m*o.default.SECOND_PER_DAY*1e3}}else t.startTime=u,t.endTime=a.default.serverTime+2592e6;Math.floor((t.endTime-a.default.serverTime)/1e3)>0?b.default.ins().activityData[d.id]=t:d.id==B.default.THREE_HEROES&&M.default.ins().showIcon3DaysLater&&(b.default.ins().activityData[d.id]=t)}}},e.TimeType_Normal=0,e.TimeType_Fixed=1,e.TimeType_Total=2,e.ACTIVITY_TYPE_1=1,e.ACTIVITY_TYPE_2=2,e.ACTIVITY_TYPE_3=3,e.ACTIVITY_TYPE_4=4,e.ACTIVITY_TYPE_5=5,e.ACTIVITY_TYPE_6=6,e.ACTIVITY_TYPE_7=7,e.ACTIVITY_TYPE_8=8,e.ACTIVITY_TYPE_9=9,e.ACTIVITY_TYPE_10=10,e.ACTIVITY_TYPE_11=11,e.ACTIVITY_TYPE_12=12,e.ACTIVITY_TYPE_17=17,e.ACTIVITY_TYPE_18=18,e.ACTIVITY_TYPE_19=19,e.ACTIVITY_TYPE_20=20,e.ACTIVITY_TYPE_21=21,e.ACTIVITY_TYPE_22=22,e}();i.default=E,function(e){e[e.THANKS=1]="THANKS",e[e.NEWYEAR=2]="NEWYEAR",e[e.CHRISTMAS=3]="CHRISTMAS",e[e.HAPPYSEVENDAY=4]="HAPPYSEVENDAY",e[e.TOTALRECHARGE=5]="TOTALRECHARGE",e[e.CELEBRATION=6]="CELEBRATION",e[e.LABA=7]="LABA",e[e.YBZHUANPAN=8]="YBZHUANPAN",e[e.ZHANLING=9]="ZHANLING",e[e.SPRINGBEGIN=10]="SPRINGBEGIN",e[e.XIAONIAN=11]="XIAONIAN",e[e.SPRINGFESTIVAL=12]="SPRINGFESTIVAL",e[e.SPRINGEIGHTDAY=13]="SPRINGEIGHTDAY",e[e.KAIMENHONG=14]="KAIMENHONG",e[e.SANBA=15]="SANBA",e[e.LONGTAITOU=16]="LONGTAITOU",e[e.VERSIONCELE=17]="VERSIONCELE"}(i.ActivityPageStyle||(i.ActivityPageStyle={})),cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","../Activity":"Activity","../ActivityTypeConst":"ActivityTypeConst","../ThreeHeroes":"ThreeHeroes","./ActivityBaseData":"ActivityBaseData","./ActivityType0Data":"ActivityType0Data","./ActivityType10Data":"ActivityType10Data","./ActivityType11Data":"ActivityType11Data","./ActivityType12Data":"ActivityType12Data","./ActivityType17Data":"ActivityType17Data","./ActivityType18Data":"ActivityType18Data","./ActivityType19Data":"ActivityType19Data","./ActivityType1Data":"ActivityType1Data","./ActivityType20Data":"ActivityType20Data","./ActivityType21Data":"ActivityType21Data","./ActivityType22Data":"ActivityType22Data","./ActivityType3Data":"ActivityType3Data","./ActivityType4Data":"ActivityType4Data","./ActivityType5Data":"ActivityType5Data","./ActivityType6Data":"ActivityType6Data","./ActivityType7Data":"ActivityType7Data","./ActivityType8Data":"ActivityType8Data","./ActivityType9Data":"ActivityType9Data"}],ActivityExIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"21903ZzcbVHHJO53r8DZX2a","ActivityExIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../fb/UserFb"),s=e("../../recharge/Recharge"),u=e("../../bag/UserBag"),l=e("../../opensystem/OpenSystem"),c=e("../../../consts/SystemConst"),d=e("../../activity/model/ActivityDataFactory"),f=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange,r.default.ins().postGuanqiaInfo,r.default.ins().postGuanKaIdChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postYbChange,s.default.ins().postUpdateRecharge,s.default.ins().postRechargeTotalDay,s.default.ins().postUpdateRechargeEx,u.default.ins().postItemAdd,u.default.ins().postItemChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!l.default.ins().checkSysOpen(c.SystemType.HFACTIVITY))return!1;var e=a.default.ins().activityData;if(!Object.keys(e).length)return!1;for(var t in e){var i=e[t];if(!i.pageStyle&&i.timeType==d.default.TimeType_Total&&i.isOpenActivity())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(!i.pageStyle&&i.timeType==d.default.TimeType_Total&&i.isOpenActivity()&&i.canReward()&&i.specialState())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(ActivityExWin),this.firstTap=!1,this.update()},t}(n.default);i.default=f,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../bag/UserBag":"UserBag","../../fb/UserFb":"UserFb","../../opensystem/OpenSystem":"OpenSystem","../../recharge/Recharge":"Recharge","./RuleIconBase":"RuleIconBase"}],ActivityForeshowModel:[function(e,t,i){"use strict";cc._RF.push(t,"9d4bbAi6itGsZR/sc+0WBWZ","ActivityForeshowModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/utils/DateUtils"),a=e("../../server/GameServer"),o=e("../../../manager/GlobalConfig"),r=e("../../../entity/Actor"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getForeshow=function(){for(var e in o.default.NewFuncNoticeConfig){var t=o.default.NewFuncNoticeConfig[e];if(this.checkOpenTime(t.open,t.close)&&r.default.level>=t.openLv)return t}return null},t.prototype.checkOpenTime=function(e,t){return a.default.serverOpenDay>=e&&a.default.serverOpenDay<t},t.prototype.getRemainTime=function(){var e=0,t=this.getForeshow();if(t){var i=new Date(n.default.formatMiniDateTime(a.default._serverZeroTime));i.setDate(i.getDate()+t.close),i.setHours(0,0,0,0),(e=i.getTime()-(new Date).getTime())<0&&(e=0)}return e/=1e3},t}(e("../../../../core/base/BaseClass").default);i.default=s,cc._RF.pop()},{"../../../../core/base/BaseClass":"BaseClass","../../../../core/utils/DateUtils":"DateUtils","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer"}],ActivityIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"84f93VnucpL6bF0DK5AUhWk","ActivityIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../fb/UserFb"),r=e("../../activity/Activity"),s=e("../../activitypersonal/PActivity"),u=e("../../recharge/Recharge"),l=e("../../server/GameServer"),c=e("../../opensystem/OpenSystem"),d=e("../../../consts/SystemConst"),f=e("../../activity/model/ActivityDataFactory"),p=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postGuanqiaInfo,o.default.ins().postGuanKaIdChange,r.default.ins().postActivityIsGetAwards,s.default.ins().postActivityIsGetAwards],n.updateMessage=[a.default.ins().postYbChange,u.default.ins().postUpdateRecharge,u.default.ins().postRechargeTotalDay,u.default.ins().postUpdateRechargeEx,r.default.ins().postActivityIsGetAwards,s.default.ins().postActivityIsGetAwards],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return l.default.serverOpenDay<7?t&&(t.icon="zjmkaifu"):t&&(t.icon="zjmhuodong"),t},t.prototype.checkShowIcon=function(){if(l.default.serverOpenDay<7?this.tar&&(this.tar.icon="zjmkaifu"):this.tar&&(this.tar.icon="zjmhuodong"),!c.default.ins().checkSysOpen(d.SystemType.ACTIVITY))return!1;var e=r.default.ins().activityData;if(!Object.keys(e).length)return!1;for(var t in e){if(!(i=e[t]).pageStyle&&i.timeType!=f.default.TimeType_Total&&i.isOpenActivity()&&!i.getHide())return!0}for(var t in e=s.default.ins().activityData){var i;if((i=e[t]).isOpenActivity()&&!i.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=r.default.ins().activityData;for(var t in e){if(!(i=e[t]).pageStyle&&i.timeType!=f.default.TimeType_Total&&i.isOpenActivity()&&i.canReward())return 1}for(var t in e=s.default.ins().activityData){var i;if((i=e[t]).isOpenActivity()&&i.canReward())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(ActivityWin),this.firstTap=!1,this.update()},t}(n.default);i.default=p,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../activitypersonal/PActivity":"PActivity","../../fb/UserFb":"UserFb","../../opensystem/OpenSystem":"OpenSystem","../../recharge/Recharge":"Recharge","../../server/GameServer":"GameServer","./RuleIconBase":"RuleIconBase"}],ActivityType0Data:[function(e,t,i){"use strict";cc._RF.push(t,"c951dXh8VJDdaJmg88UTwTs","ActivityType0Data"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("./ActivityBaseData"),o=e("../../server/GameServer"),r=e("../../../../core/utils/DateUtils"),s=e("../../../manager/GlobalConfig"),u=e("../../city/CityCC"),l=e("../../guild/GuildWar"),c=e("../../recharge/Recharge"),d=e("../../specialring/LyMark"),f=e("../../bag/UserBag"),p=e("../../../../core/utils/CommonUtils"),h=e("../ActivityTypeConst"),g=e("../ThreeHeroes"),y=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.specialState=function(){var e,t,i,n,a=r.default.formatMiniDateTime(o.default._serverHeZeroTime);if(this.id==h.default.HEFU_BOSS){for(var c=[0,1,3,5],d=0;d<c.length;d++)if(e=a+c[d]*r.default.MS_PER_DAY,(t=new Date(e)).setHours(20,30,0),i=a+(c[d]+1)*r.default.MS_PER_DAY,n=new Date(i),o.default.serverTime>=t.getTime()&&o.default.serverTime<n.getTime()){var f=s.default.CityBossConfig[d+1];if(!f)return!1;var p=f.killBossId,g=u.default.ins().bossKillNumData;if(g&&void 0!=g[p]&&1!=g[p][1])return!0}return!1}return this.id!=h.default.HEFU_JZLC||!!(c=s.default.GuildBattleConst.hefuOpen)&&!!l.default.ins().getModel().isWatStart},t.prototype.canReward=function(){if(this.id==h.default.LEI_JI_DAYS42)return c.default.ins().rechargeTotal.hasGetDays.length<c.default.ins().rechargeTotal.totalDay;if(this.id==h.default.LEI_JI_EVERYDAY){var e=c.default.ins().getRechargeData(0),t=c.default.ins().getCurRechargeConfig();for(var i in t){var a=t[i];if(e.curDayPay>=a.pay)if(!(e.isAwards>>a.index&1))return!0}}else{if(this.id==h.default.THREE_HEROES)return g.default.ins().awardState==g.default.CanGet;if(this.id==h.default.HEFU_JZLC||this.id==h.default.HEFU_BOSS)return!0;if(this.id==h.default.SANRI_RECHARGE){var o=s.default.MultiDayRechargeConfig;for(var r in o){var u=o[r];if(c.default.ins().mDayNum==parseInt(r)&&c.default.ins().mRecNum>=u.num&&0==c.default.ins().mReward)return!0}}}var l=s.default.ActivityBtnConfig[this.id];if(l&&l.jump&&l.jump[0]==n.RING&&d.default.ins().checkOpen()&&!d.default.ins().isMax){var p=s.default.FlameStampLevel[d.default.ins().lyMarkLv],y=f.default.ins().getBagItemById(p.costItem);return(y?y.count:0)>=p.costCount}return!1},t.prototype.getHide=function(){if(this.isHide)return this.isHide;if(this.id==h.default.LEI_JI_DAYS42)c.default.ins().rechargeTotal.hasGetDays.length>=p.default.getObjectLength(s.default.RechargeDaysAwardsConfig)&&(this.isHide=!0);else if(this.id==h.default.THREE_HEROES)this.isHide=!this.isOpenActivity();else if(this.id==h.default.HEFU_BOSS){var e=[0,1,3,5],t=s.default.CityBossConfig[e.length];if(t){var i=t.killBossId,n=u.default.ins().bossKillNumData;n&&void 0!=n[i]&&n[i][1]>=1&&(this.isHide=!0)}}else if(this.id==h.default.HEFU_JZLC){var a=r.default.formatMiniDateTime(o.default._serverHeZeroTime)+(e=s.default.GuildBattleConst.hefuOpen)[e.length-1].day*r.default.MS_PER_DAY,l=new Date(a);if(l.setHours(0,0,0),o.default.serverTime>l.getTime())return!0}return this.isHide},t.prototype.isOpenActivity=function(){var e=Math.floor((this.startTime-o.default.serverTime)/1e3),t=Math.floor((this.endTime-o.default.serverTime)/1e3);return e<0&&t>0||this.id==h.default.THREE_HEROES&&g.default.ins().showIcon3DaysLater},t}(a.default);i.default=y,function(e){e[e.WING=1]="WING",e[e.RING=2]="RING"}(n||(n={})),cc._RF.pop()},{"../../../../core/utils/CommonUtils":"CommonUtils","../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../city/CityCC":"CityCC","../../guild/GuildWar":"GuildWar","../../recharge/Recharge":"Recharge","../../server/GameServer":"GameServer","../../specialring/LyMark":"LyMark","../ActivityTypeConst":"ActivityTypeConst","../ThreeHeroes":"ThreeHeroes","./ActivityBaseData":"ActivityBaseData"}],ActivityType10Config:[function(e,t,i){"use strict";cc._RF.push(t,"01d4905MltBybk6qgB1s0df","ActivityType10Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType10Data:[function(e,t,i){"use strict";cc._RF.push(t,"857a4f/nAtKeID2VzC2HBIo","ActivityType10Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../../core/utils/DateUtils"),o=e("../../server/GameServer"),r=e("../../../manager/GlobalConfig"),s=e("../Activity"),u=function(e){function t(t){var i=e.call(this,t)||this;return i.update(t),i}return __extends(t,e),t.prototype.update=function(e){this.record=e.readInt(),this.yb=e.readInt(),this.index=e.readInt(),this.state=e.readByte();var t=e.readByte();this.noticeArr=[];for(var i=0;i<t;i++)this.noticeArr.push({name:e.readString(),multiple:e.readDouble(),yb:e.readInt()});this.noticeArr.reverse()},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&t>0},t.prototype.checkRedPoint=function(){return s.default.ins().getType10RedPoint(this.id)},t.prototype.getLeftTime=function(){if(this.endTime){var e=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&(e=0),e}return 0},t.prototype.getRemainTime=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e>=0?"\u6d3b\u52a8\u672a\u5f00\u542f":t<=0?"\u6d3b\u52a8\u5df2\u7ed3\u675f":a.default.getFormatBySecond(t,a.default.TIME_FORMAT_5,3)},t.prototype.getLevel=function(){var e=r.default.ActivityType10Config[this.id],t=Object.keys(e).length,i=this.record+1;return this.record>=t&&(i=0),i},t.prototype.getCondition=function(e){var t=r.default.ActivityType10Config[this.id][e];return!!t&&this.yb>=t.recharge},t}(n.default);i.default=u,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType11Data:[function(e,t,i){"use strict";cc._RF.push(t,"fd2ec+KAhtEjbmsSQ7tGEkb","ActivityType11Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../manager/GlobalConfig"),o=e("../../../../core/utils/DateUtils"),r=e("../../server/GameServer"),s=e("./ActivityDataFactory"),u=e("../Activity"),l=function(e){function t(t,i,n,a){var o=e.call(this,t)||this;return o._rewardInfo=0,o.id=i,o.startTime=n,o.endTime=a,o.update(t),o}return __extends(t,e),t.prototype.update=function(e){this._rewardInfo=e.readInt();var t,i,n=e.readShort();for(this._achieveInfo=[],this._achieveInfo.length=Object.keys(a.default.ActivityType11_2Config[this.id]).length,t=0;t<n;t++)this._achieveInfo[e.readShort()-1]={times:e.readInt(),isGot:e.readBoolean()};n=this._achieveInfo.length,this._hiScore=0;var o=this.getCurDay();for(t=0;t<n;t++)this._achieveInfo[t]||(this._achieveInfo[t]={times:0,isGot:!1}),(!(i=a.default.ActivityType11_2Config[this.id][t+1]).day||o>=i.day)&&(this._hiScore+=Math.floor(this._achieveInfo[t].times/i.target)*i.score)},Object.defineProperty(t.prototype,"rewardInfo",{get:function(){return this._rewardInfo},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"hiScore",{get:function(){return this._hiScore},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"achieveInfo",{get:function(){return this._achieveInfo},enumerable:!0,configurable:!0}),t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((o.default.formatMiniDateTime(this.startTime)-r.default.serverTime)/1e3),t=Math.floor((o.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3);return e<0&&t>0},t.prototype.checkRedPoint=function(){var e=a.default.ActivityConfig[this.id];if(e.pageStyle==s.ActivityPageStyle.HAPPYSEVENDAY||e.pageStyle==s.ActivityPageStyle.SPRINGEIGHTDAY||e.pageStyle==s.ActivityPageStyle.VERSIONCELE){for(var i=Object.keys(a.default.ActivityType11_2Config[this.id]).length,n=void 0,o=void 0,r=this.getCurDay(),l=1;l<=i;l++)if(n=a.default.ActivityType11_2Config[this.id][l],o=this.achieveInfo[n.index-1],r>=n.day&&!o.isGot&&o.times>=n.dayLimit)return!0}else if(this.checkPhaseAward())return!0;if(e.pageStyle==s.ActivityPageStyle.VERSIONCELE){if(t.FIRST_OPEN_SHOP)return!0;if(this.checkPhaseAward())return!0;for(var c in u.default.ins().activityData){var d=u.default.ins().activityData[c];if(d&&(d.pageStyle==s.ActivityPageStyle.VERSIONCELE&&d.type==s.default.ACTIVITY_TYPE_22&&u.default.ins().getActivityDataById(+c).isOpenActivity()&&!u.default.ins().getActivityDataById(+c).getHide())){if(d.id,d.refreshFree)return!0;break}}}return!1},t.prototype.checkPhaseAward=function(){for(var e=Object.keys(a.default.ActivityType11_1Config[this.id]).length,t=1;t<=e;t++)if((this._rewardInfo>>t&1)<=0&&this._hiScore>=a.default.ActivityType11_1Config[this.id][t].score)return!0;return!1},t.prototype.getRemainTime=function(){var e=Math.floor((o.default.formatMiniDateTime(this.startTime)-r.default.serverTime)/1e3),t=Math.floor((o.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3);return e>=0?"\u6d3b\u52a8\u672a\u5f00\u542f":t<=0?"\u6d3b\u52a8\u5df2\u7ed3\u675f":o.default.getFormatBySecond(t,o.default.TIME_FORMAT_5,3)},t.prototype.getCurDay=function(){var e=Math.floor((o.default.formatMiniDateTime(this.startTime)-r.default.serverTime)/1e3),t=Math.floor((o.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3);return e>=0?0:t<=0?0:Math.ceil(Math.abs(e)/86400)},t.FIRST_OPEN_SHOP=!0,t}(n.default);i.default=l,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData","./ActivityDataFactory":"ActivityDataFactory"}],ActivityType11_1Config:[function(e,t,i){"use strict";cc._RF.push(t,"342b03B1XxG5oEUeguDsmP7","ActivityType11_1Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType11_2Config:[function(e,t,i){"use strict";cc._RF.push(t,"edf72kH4aBDZLDbX10VsU4q","ActivityType11_2Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.rate=1}}();i.default=n,cc._RF.pop()},{}],ActivityType12Config:[function(e,t,i){"use strict";cc._RF.push(t,"54058H7FodC2ZSfXvWHdr9K","ActivityType12Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType12Data:[function(e,t,i){"use strict";cc._RF.push(t,"7aec3WR9J1GlaVbnE2g0MUs","ActivityType12Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../entity/SubRoles"),o=e("../../../entity/Actor"),r=e("../../../../core/utils/DateUtils"),s=e("../../server/GameServer"),u=e("../../../manager/GlobalConfig"),l=e("../Activity"),c=function(e){function t(i,n){var a=e.call(this,i)||this;return a.envelopeSum=t.maxEnvelope,a.SecondCount=0,a.init(i,n),a}return __extends(t,e),t.prototype.init=function(e,t){this.score=e.readInt();var i=e.readShort();this.logs=[];for(var n=0;n<i;n++){var a=e.readShort(),o=e.readString(),r=e.readInt();this.logs.push({name:o,serverId:r,index:a})}-1==l.default.ins().activityTimers.indexOf(t)&&l.default.ins().activityTimers.push(t)},t.prototype.update=function(e){var t=e.readUnsignedShort(),i=e.readInt(),n=e.readInt(),r=e.readShort(),s=[],u=a.default.ins().getSubRoleByIndex(0);s.push({job:u.job,sex:u.sex,name:o.default.myName,yb:i,gold:n});for(var c=0;c<r;c++){var d=e.readShort(),f=e.readShort(),p=e.readString(),h=e.readInt();o.default.myName!=p&&s.push({job:d,sex:f,name:p,yb:h,gold:0})}l.default.ins().postGetRedEnvelope(this.id,t,i,n,s)},Object.defineProperty(t.prototype,"envelopeData",{get:function(){return this._envelopeData=this._envelopeData?this._envelopeData:[],this._envelopeData},set:function(e){e.sort(this.sortTimer),this._envelopeData=e},enumerable:!0,configurable:!0}),t.prototype.sortTimer=function(e,t){return e.timer<t.timer?-1:1},t.prototype.checkClear=function(){this.envelopeData.length>=this.envelopeSum?(this.SecondCount=0,this.clearEnvelopeData(),this.envelopeSum>t.maxEnvelope&&(this.envelopeSum=this.envelopeData.length+t.maxEnvelope)):this.SecondCount>10&&this.envelopeSum>t.maxEnvelope?(this.SecondCount=0,this.envelopeSum=t.maxEnvelope):this.SecondCount>60&&this.envelopeData.length<t.maxEnvelope&&(this.SecondCount=0,this.clearEnvelopeData()),this.SecondCount++},t.prototype.clearEnvelopeData=function(){for(var e=0;e<this.envelopeData.length;)this.envelopeData[e]&&!this.envelopeData[e].isOverTimer()||this.envelopeData.splice(e,1),e++},t.prototype.clearAll=function(){this.envelopeData=[],this.envelopeSum=t.maxEnvelope},t.prototype.popEnvelope=function(e){for(var t=0;t<this.envelopeData.length;){if(!this.envelopeData[t]||this.envelopeData[t].id==e){this.envelopeData.splice(t,1);break}t++}},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((r.default.formatMiniDateTime(this.startTime)-s.default.serverTime)/1e3),t=Math.floor((r.default.formatMiniDateTime(this.endTime)-s.default.serverTime)/1e3);return e<0&&t>0},t.prototype.checkRedPoint=function(){var e=u.default.ActivityType12Config[this.id];for(var t in e)if(this.score>=e[t].score)return!0;return!1},t.prototype.getRemainTime=function(){var e=Math.floor((r.default.formatMiniDateTime(this.startTime)-s.default.serverTime)/1e3),t=Math.floor((r.default.formatMiniDateTime(this.endTime)-s.default.serverTime)/1e3);return e>=0?"\u6d3b\u52a8\u672a\u5f00\u542f":t<=0?"\u6d3b\u52a8\u5df2\u7ed3\u675f":r.default.getFormatBySecond(t,r.default.TIME_FORMAT_5,3)},t.maxEnvelope=10,t}(n.default);i.default=c;var d=function(){function e(){this.id=0,this.timer=0}return e.prototype.isOverTimer=function(){return Math.floor((r.default.formatMiniDateTime(this.timer)-s.default.serverTime)/1e3)<=0},e}();i.RedEnvelope=d;var f=function(){return function(){this.id=0,this.eId=0,this.job=0,this.sex=0,this.index=0,this.serverId=0,this.name="",this.desc=""}}();i.EnvelopeData=f,function(e){e[e.SEND=1]="SEND",e[e.GET=2]="GET"}(i.EnvelopeType||(i.EnvelopeType={})),cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType17Data:[function(e,t,i){"use strict";cc._RF.push(t,"c50f3lkTtdAuaDbRM6N7lmO","ActivityType17Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../../core/utils/DateUtils"),o=e("../../server/GameServer"),r=e("../Activity"),s=function(e){function t(t){var i=e.call(this,t)||this;i.noticeArr=[],i.actStar=[],i.awardIndex=0;for(var n=t.readShort(),a=1;a<=n;a++)i.actStar[a]=t.readShort();var o=t.readShort();i.noticeArr=[];for(a=0;a<o;a++)i.noticeArr.push({name:t.readString(),index:t.readByte()});return i.noticeArr.reverse(),i.score=t.readInt(),i.curRecharge=t.readInt(),i.overDay=t.readInt(),i.recrod=t.readInt(),i}return __extends(t,e),t.prototype.update=function(e){this.awardIndex=e.readShort(),this.recrod=e.readInt()},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&t>0},t.prototype.checkRedPoint=function(){return r.default.ins().getType17RedPoint(this.id)},t}(n.default);i.default=s,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType17_1Config:[function(e,t,i){"use strict";cc._RF.push(t,"869e2wxtaZEt6N/cEni58bI","ActivityType17_1Config"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ActivityType17_2Config:[function(e,t,i){"use strict";cc._RF.push(t,"d4bd5HjgM1Dip3mA2A6xzth","ActivityType17_2Config"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ActivityType17_3Config:[function(e,t,i){"use strict";cc._RF.push(t,"bc32axoc3dHZoSpvXFk21A8","ActivityType17_3Config"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ActivityType18Config:[function(e,t,i){"use strict";cc._RF.push(t,"993c7qMjilDYb3Lyp71OihJ","ActivityType18Config"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ActivityType18Data:[function(e,t,i){"use strict";cc._RF.push(t,"480edCLh5hEA6EVwVEqqQ+Z","ActivityType18Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../../core/utils/DateUtils"),o=e("../../server/GameServer"),r=e("../../../manager/GlobalConfig"),s=function(e){function t(t){var i=e.call(this,t)||this;return i.num=0,i.init(t),i}return __extends(t,e),t.prototype.init=function(e){this.num=e.readInt(),this.recrod=e.readInt();var t=e.readShort();this.logs?this.logs.length=0:this.logs=[];for(var i=0;i<t;i++){var n=[e.readString(),e.readInt()];this.logs.push(n)}this.logs=this.logs.reverse(),this.bestlogs?this.bestlogs.length=0:this.bestlogs=[],t=e.readShort();for(i=0;i<t;i++){n=[e.readString(),e.readInt()];this.bestlogs.push(n)}},t.prototype.update=function(e){var t=e.readShort();this.num=e.readInt(),this.recrod=e.readInt();for(var i=e.readShort(),n=[],a=0;a<i;a++)n[a]=[e.readInt(),e.readShort()];var o=0;2==t&&(o=1),ViewManager.ins().isShow(HuntResultWin)?Activity.ins().postHuntResult(o,n,3,this.id):(ViewManager.ins().open(HuntResultWin,o,n,2,this.id),Activity.ins().postHuntResult(o,n,3,this.id))},t.prototype.isOpenActivity=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&t>0},t.prototype.getLeftTime=function(){var e=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&(e=0),e},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.getStateByIndex=function(e){var t=this.recrod>>e&1;if(0==t){var i=r.default.ActivityType18Config[this.id][e];i&&i.dbCount&&i.dbCount<=this.num&&(t=2)}return t},t.prototype.checkRedPoint=function(){var e=r.default.ActivityType18Config[this.id];for(var t in e)if(e[t].dbCount&&this.num>=e[t].dbCount&&0==(this.recrod>>e[t].index&1))return!0;return!1},t}(n.default);i.default=s,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","./ActivityBaseData":"ActivityBaseData"}],ActivityType19Config:[function(e,t,i){"use strict";cc._RF.push(t,"59559zQQEpE8KolKrCLmLAh","ActivityType19Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType19Data:[function(e,t,i){"use strict";cc._RF.push(t,"3a7b67yp1tL9qwyrv/jerx3","ActivityType19Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../../core/utils/DateUtils"),o=e("../../server/GameServer"),r=e("../../../manager/GlobalConfig"),s=e("../Activity"),u=function(e){function t(t){var i=e.call(this,t)||this;return i.awardIndex=0,i._data={},i._list=[],i}return __extends(t,e),t.prototype.CleanRandData=function(){this._data={},this._list=[]},t.prototype.SetRankData=function(e){this._list[e.rank-1]=e,this._data[e.actorId]=e},t.prototype.GetRankData=function(){return this._data},t.prototype.GetRankList=function(){return this._list},t.prototype.update=function(e){},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&t>0},t.prototype.getleftTime=function(){return this.isOpenActivity()?Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3):0},t.prototype.checkRedPoint=function(){var e=r.default.ActivityType19Config[this.id][1];if(e.activityID){var t=s.default.ins().getActivityDataById(e.activityID);if(t&&t.canReward())return!0}return!1},t}(n.default);i.default=u,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType1Config:[function(e,t,i){"use strict";cc._RF.push(t,"792f2gBg31LBpRayRhcYSQH","ActivityType1Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType1Data:[function(e,t,i){"use strict";cc._RF.push(t,"a659f7tX/dL9qZ2leZcxR/4","ActivityType1Data"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("./ActivityBaseData"),o=e("../../../../core/utils/DateUtils"),r=e("../../server/GameServer"),s=e("../../../manager/GlobalConfig"),u=e("../../../entity/Actor"),l=e("../../zs/UserZs"),c=e("../../rolewin/model/WingsData"),d=e("../../../entity/Role"),f=e("../../../../core/net/PackageID"),p=e("../../loongsoul/LongHunData"),h=e("../../bag/UserBag"),g=e("../../specialring/SpecialRing"),y=e("../../zhanling/model/ZhanLingModel"),v=e("../../activitypersonal/PActivity"),m=e("../../book/Book"),b=e("../Activity"),_=function(e){function t(t){var i=e.call(this,t)||this;return i.rewardsSum=[],i.hFTotalConsumption=0,i.readReawards(t),i}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t);t.readShort();this.record=t.readInt()},t.prototype.readReawards=function(e){this.record=e.readInt(),this.hFTotalConsumption=e.readInt();for(var t=e.readShort(),i=1;i<=t;i++)this.rewardsSum[i]=e.readShort()},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((o.default.formatMiniDateTime(this.startTime)-r.default.serverTime)/1e3),t=Math.floor((o.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3);if(e<0&&t>0)return!0},t.prototype.getConfig=function(){return this.activityType==a.ActivityType.Personal?s.default.PActivityType1Config:s.default.ActivityType1Config},t.prototype.getIns=function(){return this.activityType==a.ActivityType.Personal?v.default.ins():b.default.ins()},t.prototype.getRewardStateById=function(e){var t=this.getConfig()[this.id][e];switch(t.showType){case n.LEVEL:if(u.default.level<t.level||l.default.ins().lv<t.zslevel)return b.default.NotReached;break;case n.WING:if(c.default.getWingAllLevel()<t.wingLv)return b.default.NotReached;break;case n.ZHUZAO:if(d.default.getAllForgeLevelByType(f.PackageID.Zhuling)<t.zzLv)return b.default.NotReached;break;case n.LONGHUN:if(p.default.getLongHunAllLevel()<t.lhLv)return b.default.NotReached;break;case n.BOOK:if(m.default.ins().getBookPowerNumEx()<t.tjPower)return b.default.NotReached;break;case n.EQUIP:if(h.default.ins().getEquipsScoreByRolesOfBody()<t.equipPower)return b.default.NotReached;break;case n.XIAOFEI:if(this.getIns().getActivityDataById(t.Id).hFTotalConsumption<t.consumeYuanbao)return b.default.NotReached;break;case n.RING:var i=0,a=g.default.ins().getSpecialRingDataById(g.default.FIRE_RING_ID);if(a&&a.level&&(i=a.level),i<t.huoyanRingLv)return b.default.NotReached;break;case n.SAMSARA:if(u.default.samsaraLv<t.lunhLv)return b.default.NotReached;break;case n.ZHANLING:if(y.default.ins().getZhanLingDataByLevel(0)<t.zhanlingLv)return b.default.NotReached}return Math.floor(this.record/Math.pow(2,t.index))%2?b.default.Geted:b.default.CanGet},t.prototype.checkRedPoint=function(){var e=this.getConfig()[this.id];for(var t in e){var i=e[t],n=this.getRewardStateById(i.index),a=this.rewardsSum[i.index],o=i.total?i.total-a:1;switch(n){case b.default.NotReached:break;case b.default.CanGet:if(o>0)return!0;break;case b.default.Geted:}}return!1},t.prototype.getHide=function(){if(this.isHide)return this.isHide;var e=this.record>>1,t=this.getConfig()[this.id],i=Object.keys(t);return e>=Math.pow(2,i.length)-1?(this.isHide=!0,this.isHide):(this.isHide=!1,this.isHide)},t}(a.default);i.default=_,function(e){e[e.LEVEL=0]="LEVEL",e[e.WING=1]="WING",e[e.ZHUZAO=2]="ZHUZAO",e[e.LONGHUN=3]="LONGHUN",e[e.BOOK=5]="BOOK",e[e.EQUIP=6]="EQUIP",e[e.RING=7]="RING",e[e.SAMSARA=8]="SAMSARA",e[e.ZHANLING=9]="ZHANLING",e[e.XIAOFEI=100]="XIAOFEI"}(n||(n={})),cc._RF.pop()},{"../../../../core/net/PackageID":"PackageID","../../../../core/utils/DateUtils":"DateUtils","../../../entity/Actor":"Actor","../../../entity/Role":"Role","../../../manager/GlobalConfig":"GlobalConfig","../../activitypersonal/PActivity":"PActivity","../../bag/UserBag":"UserBag","../../book/Book":"Book","../../loongsoul/LongHunData":"LongHunData","../../rolewin/model/WingsData":"WingsData","../../server/GameServer":"GameServer","../../specialring/SpecialRing":"SpecialRing","../../zhanling/model/ZhanLingModel":"ZhanLingModel","../../zs/UserZs":"UserZs","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType20Config:[function(e,t,i){"use strict";cc._RF.push(t,"6a92b9q511FOLghWcWhpI6I","ActivityType20Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType20Data:[function(e,t,i){"use strict";cc._RF.push(t,"c3142pnv5hK6q76VJLtfOKd","ActivityType20Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../../core/utils/DateUtils"),o=e("../../server/GameServer"),r=e("../../../manager/GlobalConfig"),s=function(e){function t(t){var i=e.call(this,t)||this;return i.update(t),i}return __extends(t,e),t.prototype.update=function(e){this.index=e.readInt()||1,this.timer=e.readInt(),this.timer&&(this.timer=Math.floor(a.default.formatMiniDateTime(this.timer)/a.default.MS_PER_SECOND)),this.isGoIn=e.readByte()},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&t>0},t.prototype.getleftTime=function(){return this.isOpenActivity()?Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3):0},t.prototype.checkRedPoint=function(){if(this.IsEnd())return!1;var e=this.getStartTimer(),t=this.getEndTimer(),i=Math.floor(o.default.serverTime/a.default.MS_PER_SECOND);return!(i<e||i>=t)},t.prototype.IsEnd=function(){var e=this.getEndTimer(),t=new Date(e*a.default.MS_PER_SECOND);return new Date(o.default.serverTime).getDate()!=t.getDate()},t.prototype.go2BossFb=function(){return this.isGoIn},t.prototype.getReadyTimer=function(){var e=r.default.ActivityType20Config[this.id][this.index];return this.timer-e.duration-e.enterTime},t.prototype.getStartTimer=function(){var e=r.default.ActivityType20Config[this.id][this.index];return this.timer-e.duration},t.prototype.getEndTimer=function(){return this.timer},t.prototype.getResidueTimer=function(){if(this.IsEnd())return 0;this.getStartTimer();var e=this.getEndTimer(),t=Math.floor(o.default.serverTime/a.default.MS_PER_SECOND);return e-t},t.prototype.getResidueStartTimer=function(){if(this.IsEnd())return 0;var e=this.getStartTimer(),t=Math.floor(o.default.serverTime/a.default.MS_PER_SECOND);return t>=e?0:e-t},t.prototype.getDateTime=function(e){var t=e.split(/[-,.,:]/g);return new Date(+t[0],+t[1]-1,+t[2],+t[3]||0,+t[4]||0)},t}(n.default);i.default=s;cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","./ActivityBaseData":"ActivityBaseData"}],ActivityType21Data:[function(e,t,i){"use strict";cc._RF.push(t,"6d13btx6GRDC7iPHpVP229u","ActivityType21Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../../core/utils/DateUtils"),o=e("../../server/GameServer"),r=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.update=function(e){},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&t>0},t.prototype.getleftTime=function(){return this.isOpenActivity()?Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3):0},t.prototype.checkRedPoint=function(){return!1},t}(n.default);i.default=r,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../server/GameServer":"GameServer","./ActivityBaseData":"ActivityBaseData"}],ActivityType22Data:[function(e,t,i){"use strict";cc._RF.push(t,"03a9dWBaVFEL7kztZAFT6h4","ActivityType22Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../Utils/EgretUtils"),o=e("../../../../core/utils/DateUtils"),r=e("../../server/GameServer"),s=e("../../bag/UserBag"),u=e("../../../manager/GlobalConfig"),l=e("./SpringBeginShopVo"),c=e("../Activity"),d=function(e){function t(t){var i=e.call(this,t)||this;return i._refreshTime=0,i.update(t),i}return __extends(t,e),t.prototype.update=function(e){this.tScore=e.readInt(),this.refreshFree=1==e.readByte(),this._refreshTime=e.readInt(),this._oldTimer=a.default.getTimer();var t,i=e.readShort();this.shopItems=[],this.shopItems.length=i;for(var n=0;n<i;n++)this.shopItems[n]=new l.default,this.shopItems[n].parser(e);i=e.readShort(),this.scoreItems=[],this.scoreItems.length=i;for(n=0;n<i;n++)this.scoreItems[n]=new l.default,this.scoreItems[n].parser2(e);this.limitItems=[],i=e.readShort();for(n=0;n<i;n++)(t=new l.default).parser3(e),this.limitItems.push(t)},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((o.default.formatMiniDateTime(this.startTime)-r.default.serverTime)/1e3),t=Math.floor((o.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3);return e<0&&t>0},t.prototype.getleftTime=function(){return this.isOpenActivity()?Math.floor((o.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3):0},t.prototype.checkRedPoint=function(){if(this.refreshFree)return!0;var e=c.default.ins().getConfig22_3(this.id);if(e&&this.tScore>=e.score)return!0;var t=s.default.ins().getBagItemById(u.default.ActivityType22_1Config[this.id][1].freshItem);return!!(t&&t.count>0)},t.prototype.getRemainTime=function(){var e=Math.floor((o.default.formatMiniDateTime(this.startTime)-r.default.serverTime)/1e3),t=Math.floor((o.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3);return e>=0?"\u6d3b\u52a8\u672a\u5f00\u542f":t<=0?"\u6d3b\u52a8\u5df2\u7ed3\u675f":o.default.getFormatBySecond(t,o.default.TIME_FORMAT_5,3)},t.prototype.getRefreshTime=function(){return this._refreshTime-(a.default.getTimer()-this._oldTimer)/1e3},t}(n.default);i.default=d,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../Utils/EgretUtils":"EgretUtils","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData","./SpringBeginShopVo":"SpringBeginShopVo"}],ActivityType22_1Config:[function(e,t,i){"use strict";cc._RF.push(t,"34b77PD3lNFrKtbfukklUw2","ActivityType22_1Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType22_3Config:[function(e,t,i){"use strict";cc._RF.push(t,"60a19pu8SVANbnba+oFZiFX","ActivityType22_3Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType2Config:[function(e,t,i){"use strict";cc._RF.push(t,"569f4U2LNJM3JbRoEPo0IG9","ActivityType2Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType2Data:[function(e,t,i){"use strict";cc._RF.push(t,"488d7qY4PlF7If8+M/JGh2H","ActivityType2Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../entity/Actor"),o=e("../../../manager/GlobalConfig"),r=e("../../vip/UserVip"),s=e("../../../../core/utils/DateUtils"),u=e("../../server/GameServer"),l=e("../Activity"),c=function(e){function t(t){var i=e.call(this,t)||this;return i.buyData=[],i.serverBuyData=[],i.areaBuyData=[],i.areabuyReward=[],i.initBuyData(t),i}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t);var i=t.readShort(),n=t.readInt();this.buyData[i]=n,this.serverBuyData[i]=t.readInt(),this.areaBuyData[i]=t.readInt(),this.areabuyReward[i]=t.readInt();for(var a=0;a<=n;a++)this.areaBuyData[a]=Math.max(this.areaBuyData[a],this.buyData[a])},t.prototype.initBuyData=function(e){for(var t=e.readShort(),i=1;i<=t;i++)this.buyData[i]=e.readShort(),this.serverBuyData[i]=e.readShort(),this.areaBuyData[i]=e.readInt(),this.areabuyReward[i]=e.readInt();for(var n=0;n<=t;n++)this.areaBuyData[n]=Math.max(this.areaBuyData[n],this.buyData[n]);this.sumRMB=e.readInt()},t.prototype.canReward=function(){if(a.default.level<t.LimitLevel)return!1;var e;e=-1!=l.default.ins().doubleElevenIDs.indexOf(this.id)?l.default.ins().getDoubleElevenDataByID(this.id):l.default.ins().getActivityDataById(this.id);var i=o.default.ActivityType2Config[this.id],n=!1;for(var s in i){var u=i[s],c=e.buyData[u.index]>=u.count;if(n=this.serverBuyData[u.index]>=u.scount,!c&&e.sumRMB>=u.needRecharge&&a.default.yb>=u.price&&r.default.ins().lv>=u.vip&&!n)return!0;if(c&&u.countReward)for(var d in u.countReward)if(this.getAreaReward(u.index,Number(d)+1))return!0}return!1},t.prototype.isSpecialOpen=function(){var e=Math.floor((s.default.formatMiniDateTime(this.startTime)-u.default.serverTime)/1e3),t=Math.floor((s.default.formatMiniDateTime(this.endTime)-u.default.serverTime)/1e3),i=o.default.ActivityType2Config[this.id][1];return e+3600*Number(i.limitTime[0])+60*Number(i.limitTime[1])<0&&t>0},t.prototype.getSpecialStrikeTimes=function(){var e=o.default.ActivityType2Config[this.id][1],t=Number(e.limitTime[0]),i=Number(e.limitTime[1]),n=(u.default.serverTime-s.default.formatMiniDateTime(this.startTime)-36e5*t-6e4*i)/1e3/240;return n>0?n:0},t.prototype.isOpenActivity=function(){var e=Math.floor((s.default.formatMiniDateTime(this.startTime)-u.default.serverTime)/1e3),t=Math.floor((s.default.formatMiniDateTime(this.endTime)-u.default.serverTime)/1e3);return e<0&&t>0},t.prototype.getHide=function(){if(this.isHide)return this.isHide;for(var e=o.default.ActivityType2Config[this.id],t=1;t<this.buyData.length;t++){var i=e[t];if(this.buyData[t]<i.count)return this.isHide=!1,this.isHide}return this.isHide=!0,this.isHide},t.prototype.getLeftTime=function(){if(this.endTime){var e=s.default.formatMiniDateTime(this.endTime)/1e3,t=Math.floor((e-u.default.serverTime)/1e3);return t<0&&(t=0),t}var i=o.default.ActivityConfig[this.id],n=0,a=0;if(0==i.timeType){var r=+i.startTime.split("-")[0];a=+i.endTime.split("-")[0]-r,n=u.default.serverOpenDay-r}else if(1==i.timeType){r=u.default.serverTime;var l=new Date(i.startTime).getTime(),c=new Date(i.endTime).getTime();n=Math.floor((r-l)/1e3/3600/24),a=Math.round((c-l)/1e3/3600/24)}else if(2==i.timeType){r=+i.startTime.split("-")[0];a=+i.endTime.split("-")[0]-r,n=Math.floor((u.default.serverTime-s.default.formatMiniDateTime(u.default._serverHeZeroTime))/1e3/3600/24)-r}var d=new Date(u.default.serverTime),f=a-n;if(f<=0)return 0;var p=new Date(u.default.serverTime);return p.setDate(d.getDate()+f),p.setHours(0,0,0,0),Math.floor((p.getTime()-u.default.serverTime)/1e3)},t.prototype.getSpecialOpenLeftTime=function(){var e=Math.floor((s.default.formatMiniDateTime(this.startTime)-u.default.serverTime)/1e3),t=Math.floor((s.default.formatMiniDateTime(this.endTime)-u.default.serverTime)/1e3),i=o.default.ActivityType2Config[this.id][1];return(e+=3600*Number(i.limitTime[0])+60*Number(i.limitTime[1]))<0&&t>0?e:0},t.prototype.getAreaReward=function(e,t){var i=o.default.ActivityType2Config[this.id][e];if(this.buyData[e]&&this.buyData[e]>=i.count){if((this.areabuyReward[e]>>t&1)>0)return l.default.Geted;if(this.areaBuyData[e]>=i.countReward[t-1].count)return l.default.CanGet}return l.default.NotReached},t.LimitLevel=50,t}(n.default);i.default=c,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","../../vip/UserVip":"UserVip","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType3Config:[function(e,t,i){"use strict";cc._RF.push(t,"d6519oUUa9Meae0ApEdzcM+","ActivityType3Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.day=1}}();i.default=n,cc._RF.pop()},{}],ActivityType3Data:[function(e,t,i){"use strict";cc._RF.push(t,"00ccf16fkNOJJ5rrE7mTQG3","ActivityType3Data"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("./ActivityBaseData"),o=e("../../../manager/GlobalConfig"),r=e("../../server/GameServer"),s=e("../../../../core/utils/DateUtils"),u=e("../Activity"),l=function(e){function t(t){var i=e.call(this,t)||this;return i.dabiao=[],i.chongzhiNum=0,i.chongzhiTotal=0,i.btn1=!1,i.btn2=!1,i.image1=!1,i.image2=!1,i.updateData(t),i.recrod=t.readInt(),i}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t);t.readShort();this.recrod=t.readInt()},t.prototype.openDay=function(){var e=o.default.ActivityType3Config[this.id];return e&&e[0]?e[0].day:7},t.prototype.canReward=function(){var e=o.default.ActivityType3Config[this.id],t=this.recrod,i=-1,n=0;for(var a in e){var r=t>>e[a].index&1;if(1==e[a].type){if(this.dabiao[n]>=e[a].day&&0==r)return!0}else if(2==e[a].type&&e[a].val<=this.chongzhiTotal){if(0==r)return!0}else if(3==e[a].type&&e[a].val<=this.chongzhiNum&&(-1==i&&(i=this.getCurIndex(3)),i==e[a].index&&0==r))return!0;n++}return this.canRewardEx()},t.prototype.isOpenActivity=function(){var e=Math.floor((s.default.formatMiniDateTime(this.startTime)-r.default.serverTime)/1e3),t=Math.floor((s.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3);return e<0&&t>0},t.prototype.updateData=function(e){var t=e.readShort();this.dabiao=[];for(var i=0;i<t;i++)this.dabiao.push(e.readShort());this.chongzhiNum=e.readInt(),this.chongzhiTotal=e.readInt()},Object.defineProperty(t.prototype,"day7text",{get:function(){var e=o.default.ActivityType3Config[this.id];for(var t in e)1==e[t].type&&(this.rewards1=e[t].rewards,this._day7text="\u7d2f\u8ba1<font color='#ffff00'>"+e[t].day+"</font>\u5929\uff0c\u6bcf\u65e5\u5145\u503c<font color='#ffff00'>"+e[t].val+"</font>\u5143\u5b9d\u53ef\u9886\u53d6");return this._day7text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totaltext",{get:function(){var e=o.default.ActivityType3Config[this.id];for(var t in e)2==e[t].type&&(this.maxTotal=e[t].val,this.rewards2=e[t].rewards,this._totaltext="\u6d3b\u52a8\u671f\u95f4\u7d2f\u8ba1\u5145\u503c<font color='#ffff00'>"+e[t].val+"</font>\u5143\u5b9d\u53ef\u9886\u53d6");return this._totaltext},enumerable:!0,configurable:!0}),t.prototype.canOnlyReward=function(){var e=o.default.ActivityType3Config[this.id],t=this.recrod;for(var i in this.btn1=!1,this.btn2=!1,this.image1=!1,this.image2=!1,e){var n=t>>e[i].index&1;1==e[i].type&&this.dabiao&&this.dabiao[0]>=e[i].day&&(0==n&&(this.btn1=!0),1==n&&(this.image1=!0)),2==e[i].type&&e[i].val<=this.chongzhiTotal&&(0==n&&(this.btn2=!0),1==n&&(this.image2=!0))}},t.prototype.getDateTime=function(e){var t=e.split(/[-,.,:]/g);return new Date(+t[0],+t[1]-1,+t[2],+t[3]||0,+t[4]||0).getTime()},t.prototype.isOverTimer=function(e){var t=this.curOpenDay(),i=o.default.ActivityType3Config[this.id][e],n=this.recrod>>i.index&1;return t+1>i.day&&n!=u.default.Geted},t.prototype.curOpenDay=function(){var e=o.default.ActivityConfig[this.id],t=0;if(0==e.timeType){var i=+e.startTime.split("-")[0];t=r.default.serverOpenDay-i}else if(1==e.timeType){i=r.default.serverTime;var n=this.getDateTime(e.startTime);this.getDateTime(e.endTime);t=Math.floor((i-n)/1e3/3600/24)}else if(2==e.timeType){i=+e.startTime.split("-")[0];t=(n=Math.floor((r.default.serverTime-s.default.formatMiniDateTime(r.default._serverHeZeroTime))/1e3/3600/24))-i}return t},t.prototype.getCurIndex=function(e){o.default.ActivityConfig[this.id];var t=o.default.ActivityType3Config[this.id],i=this.curOpenDay(),n={};for(var a in t)n[t[a].type]=1;var r=Object.keys(n);1!=r.length&&void 0!=e||(e=+r[0]);var s,u=[];for(s in t)t[s].type==e&&u.push(t[s]);u.sort(function(e,t){return e.day<t.day?-1:1});for(var l=0,c=u;l<c.length;l++){var d=c[l];if(s=d.index,1==e||2==e){if(i<d.day)return+s}else if(3==e&&i<d.day)return+s}return+s},t.prototype.getLeftTime=function(){if(this.endTime){var e=Math.floor((s.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3);return e<0&&(e=0),e}return 0},t.prototype.getRewardStateById=function(e){var t=o.default.ActivityType3Config[this.id][e];switch(t.showType){case n.TYPE6:case n.TYPE8:case n.TYPE9:if(this.chongzhiTotal<t.val)return u.default.NotReached;break;case n.TYPE7:if(this.dabiao[e-1]<t.day)return u.default.NotReached}return this.recrod>>t.index&1?u.default.Geted:u.default.CanGet},t.prototype.canRewardEx=function(){var e=o.default.ActivityType3Config[this.id];if(e&&e[1]&&e[1].activityID)for(var t=0;t<e[1].activityID.length;t++){var i=u.default.ins().getActivityDataById(e[1].activityID[t]);if(i&&i.canReward())return!0}return!1},t}(a.default);i.default=l,function(e){e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2",e[e.TYPE3=3]="TYPE3",e[e.TYPE4=4]="TYPE4",e[e.TYPE5=5]="TYPE5",e[e.TYPE6=6]="TYPE6",e[e.TYPE7=7]="TYPE7",e[e.TYPE8=8]="TYPE8",e[e.TYPE9=9]="TYPE9",e[e.TYPE10=10]="TYPE10"}(n||(n={})),cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType4Config:[function(e,t,i){"use strict";cc._RF.push(t,"49156UVdvtKYq9eonMVRDVW","ActivityType4Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType4Data:[function(e,t,i){"use strict";cc._RF.push(t,"38b3b8zMi5Mu7j/E901zC7w","ActivityType4Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../../core/utils/DateUtils"),o=e("../../server/GameServer"),r=e("../../../manager/GlobalConfig"),s=e("../Activity"),u=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t)},t.prototype.updateData=function(e){},t.prototype.isOpenActivity=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&t>0},t.prototype.getCostRank=function(e,t){if(!e)return 0;for(var i=0,n=e.numType,a=r.default.ActivityType4Config[this.id];a[t.idx];){if(n>=a[t.idx].value){i=a[t.idx].ranking,t.idx++,e.rankIndex==s.default.ins().myPaiming&&(this.myPaiming=i);break}t.idx++}return i},t}(n.default);i.default=u,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType5Config:[function(e,t,i){"use strict";cc._RF.push(t,"9c9cbYEIJxIBoeLFVjtO+Cy","ActivityType5Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType5Data:[function(e,t,i){"use strict";cc._RF.push(t,"574f8Fz+yRAo6VkvJmMsUTM","ActivityType5Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../../core/utils/DateUtils"),o=e("../../server/GameServer"),r=e("../../../manager/GlobalConfig"),s=e("../Activity"),u=function(e){function t(t){var i=this;if(t)return(i=e.call(this,t)||this).recrod=t.readInt(),i}return __extends(t,e),t.prototype.updateRecord=function(e){this.recrod=e.readInt()},t.prototype.update=function(t){e.prototype.update.call(this,t);t.readShort();this.recrod=t.readInt()},t.prototype.updateData=function(e){this.logTime=e.readInt()},t.prototype.isOpenActivity=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&t>0},t.prototype.canReward=function(e){void 0===e&&(e=0),0==e&&(e=this.logTime);var t=r.default.ActivityType5Config[this.id];for(var i in t){if(0==(this.recrod>>t[i].index&1)&&t[i].day<=this.logTime)return!0}return!1},t.prototype.checkOneDayStatu=function(e){void 0===e&&(e=0),0==e&&(e=this.logTime);r.default.ActivityType5Config[this.id];return 0==(this.recrod>>e&1)},t.prototype.getCurDay=function(){var e=this.logTime;return 157==this.id?e=s.default.ins().hfLoginDay:210==this.id&&(e=s.default.ins().geLoginDay),e},t}(n.default);i.default=u,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType6Config:[function(e,t,i){"use strict";cc._RF.push(t,"8cba7x2hppFIZMjExaKmwcM","ActivityType6Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType6Data:[function(e,t,i){"use strict";cc._RF.push(t,"d83592Pou5CJqo0LFXvJFjF","ActivityType6Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../server/GameServer"),o=e("../../../../core/utils/DateUtils"),r=e("../../../manager/GlobalConfig"),s=e("../Activity"),u=function(e){function t(t){var i=e.call(this,t)||this;return i.rewardsBossSum=[],i.initBuyData(t),i}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t);t.readShort();this.record=t.readInt()},t.prototype.initBuyData=function(e){this.record=e.readInt();for(var t=e.readShort(),i=1;i<=t;i++)this.rewardsBossSum[i]=e.readShort()},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.getBossGroup=function(e,t){for(var i=this.getBossGroupIndex(e,t),n=0;n<i.length;n++)if(!i[n])return s.default.NOKILL;return s.default.KILL},t.prototype.getBossGroupIndex=function(e,t){for(var i=[],n=e<<1,a=1;a<=3;a++){var o=Math.floor(n/Math.pow(2,a))%2;i.push(o)}return i},t.prototype.getBossGroupGiftIndex=function(e){return Math.floor(this.record/Math.pow(2,e.index))%2?s.default.Geted:s.default.CanGet},t.prototype.isOpenActivity=function(){var e=Math.floor((o.default.formatMiniDateTime(this.startTime)-a.default.serverTime)/1e3),t=Math.floor((o.default.formatMiniDateTime(this.endTime)-a.default.serverTime)/1e3);return e<0&&t>0},t.prototype.checkRedPoint=function(){var e=r.default.ActivityType6Config[this.id],t=1;for(var i in e){var n=this.getBossGroupGiftIndex(e[i]);if(this.getBossGroup(this.rewardsBossSum[t],e[i])==s.default.KILL&&n==s.default.CanGet)return!0;t++}return!1},t.prototype.getHide=function(){if(this.isHide)return this.isHide;var e=this.record>>1,t=r.default.ActivityType6Config[this.id],i=Object.keys(t);return e>=Math.pow(2,i.length)-1?(this.isHide=!0,this.isHide):(this.isHide=!1,this.isHide)},t}(n.default);i.default=u,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType7Config:[function(e,t,i){"use strict";cc._RF.push(t,"e41b93s41RHlr3h6dd81hlj","ActivityType7Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType7Data:[function(e,t,i){"use strict";cc._RF.push(t,"2a692gff4hBFKll6GNrCw89","ActivityType7Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../../core/utils/DateUtils"),o=e("../../server/GameServer"),r=e("../../../manager/GlobalConfig"),s=e("../../bag/UserBag"),u=e("../Activity"),l=function(e){function t(t){var i=e.call(this,t)||this;return i.personalRewardsSum=[],i.worldRewardsSum=[],i.exchange=[],i.initBuyData(t),i}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t);var i=t.readShort(),n=t.readShort();this.personalRewardsSum[i]=n,this.worldRewardsSum[i]=t.readShort(),this.exchange[i]=t.readShort()},t.prototype.initBuyData=function(e){for(var t=e.readShort(),i=1;i<=t;i++)this.personalRewardsSum[i]=e.readShort(),this.worldRewardsSum[i]=e.readShort(),this.exchange[i]=e.readShort();this.bossScore=e.readInt()},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&t>0},t.prototype.checkRedPoint=function(){return u.default.ins().getType7RedPoint(this.id)},t.prototype.getAwardState=function(e){var t=r.default.ActivityType7Config[this.id][e];return this.personalRewardsSum[t.index]>=t.count?u.default.Geted:this.bossScore>=t.score?u.default.CanGet:u.default.NotReached},t.prototype.getExchange=function(e){var t=u.default.ins().getActivityDataById(this.id),i=r.default.ActivityType7Config[this.id][e];if(!i.items)return u.default.NotReached;var n=u.default.CanGet,a=t.worldRewardsSum[e],o=t.exchange[e],l=t.personalRewardsSum[e];for(var c in i.items){var d=s.default.ins().getBagItemById(i.items[c].id);if((d?d.count:0)<i.items[c].count){n=u.default.NotReached;break}}return n!=u.default.NotReached&&(i.scount&&a>=i.scount&&(n=u.default.Geted),i.count&&l>=i.count&&(n=u.default.Geted),i.dailyCount&&o>=i.dailyCount&&(n=u.default.Geted)),n},t.prototype.getLeftTime=function(){if(this.endTime){var e=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&(e=0),e}return 0},t.TYPE_RING=1,t.TYPE_HEFUBOSS=2,t.TYPE_CELEBREATE=5,t.TYPE_LABA=6,t}(n.default);i.default=l,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType8Config:[function(e,t,i){"use strict";cc._RF.push(t,"653345MofJAoKbWVR1xHWD0","ActivityType8Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType8Data:[function(e,t,i){"use strict";cc._RF.push(t,"5fac2UO0ShKc7ef91IIH0FG","ActivityType8Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../../../core/utils/DateUtils"),o=e("../../server/GameServer"),r=e("../Activity"),s=function(e){function t(t){var i=e.call(this,t)||this;return i.update(t),i}return __extends(t,e),t.prototype.update=function(e){this.record=e.readInt()},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e<0&&t>0},t.prototype.checkRedPoint=function(){return r.default.ins().getType8RedPoint(this.id)},t.prototype.getRemainTime=function(){var e=Math.floor((a.default.formatMiniDateTime(this.startTime)-o.default.serverTime)/1e3),t=Math.floor((a.default.formatMiniDateTime(this.endTime)-o.default.serverTime)/1e3);return e>=0?"\u6d3b\u52a8\u672a\u5f00\u542f":t<=0?"\u6d3b\u52a8\u5df2\u7ed3\u675f":a.default.getFormatBySecond(t,a.default.TIME_FORMAT_5,3)},t.TYPE_RING=1,t}(n.default);i.default=s,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../server/GameServer":"GameServer","../Activity":"Activity","./ActivityBaseData":"ActivityBaseData"}],ActivityType9Config:[function(e,t,i){"use strict";cc._RF.push(t,"5c86fM8V8pAf6fVjCihsKiI","ActivityType9Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ActivityType9Data:[function(e,t,i){"use strict";cc._RF.push(t,"a23c8DaOUZKXoY7GvEfHudR","ActivityType9Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ActivityBaseData"),a=e("../../activitypersonal/PActivity"),o=e("../../../../core/utils/DateUtils"),r=e("../../server/GameServer"),s=function(e){function t(t){var i=e.call(this,t)||this;return i.update(t),i}return __extends(t,e),t.prototype.getIns=function(){return this.activityType==n.ActivityType.Personal?a.default.ins():Activity.ins()},t.prototype.update=function(e){this.record=e.readInt(),this.count=e.readInt();var t=e.readByte();this.indexs=[];for(var i=0;i<t;i++)this.indexs.push(e.readByte());t=e.readByte(),this.noticeArr=[];for(i=0;i<t;i++)this.noticeArr.push({name:e.readString(),index:e.readByte()});this.noticeArr.reverse()},t.prototype.canReward=function(){return this.checkRedPoint()},t.prototype.isOpenActivity=function(){var e=Math.floor((o.default.formatMiniDateTime(this.startTime)-r.default.serverTime)/1e3),t=Math.floor((o.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3);return e<0&&t>0},t.prototype.checkRedPoint=function(){return this.getIns().getType9RedPoint(this.id)},t.prototype.getRemainTime=function(){var e=Math.floor((o.default.formatMiniDateTime(this.startTime)-r.default.serverTime)/1e3),t=Math.floor((o.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3);return e>=0?"\u6d3b\u52a8\u672a\u5f00\u542f":t<=0?"\u6d3b\u52a8\u5df2\u7ed3\u675f":o.default.getFormatBySecond(t,o.default.TIME_FORMAT_5,3)},t.prototype.getLastTime=function(){var e=Math.floor((o.default.formatMiniDateTime(this.endTime)-r.default.serverTime)/1e3);return o.default.getFormatBySecond(e,o.default.TIME_FORMAT_5,3)},t.prototype.getStateByIndex=function(e){return this.record>>e&1},t}(n.default);i.default=s,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../activitypersonal/PActivity":"PActivity","../../server/GameServer":"GameServer","./ActivityBaseData":"ActivityBaseData"}],ActivityTypeConst:[function(e,t,i){"use strict";cc._RF.push(t,"77da3vqHJtGzIS7ajhLrA3v","ActivityTypeConst"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.LEI_JI_1=1,e.DA_BIAO=2,e.CHONG_JI=3,e.LEI_JI_2=4,e.XIAN_GOU=5,e.QI_XI_XIAN_GOU=6,e.TE_HUI_1=7,e.LEI_JI_3=8,e.TE_HUI_2=9,e.LEI_JI_4=10,e.TE_HUI_3=11,e.ZHONG_QIU=12,e.SHENG_XIA=13,e.GUO_QING_LEI_JI=14,e.GUO_QING_DENG_LU=15,e.GUO_QING_XIAN_GOU=16,e.LEI_JI_DAYS42=10002,e.LEI_JI_EVERYDAY=10003,e.THREE_HEROES=10004,e.HEFU_XUNBAO=10005,e.HEFU_BOSS=10006,e.HEFU_JZLC=10007,e.HEFU_CZZS=10008,e.SANRI_RECHARGE=10017,e}();i.default=n,cc._RF.pop()},{}],Activity:[function(e,t,i){"use strict";cc._RF.push(t,"03ff3luiIxPX5bO9PMeWMAL","Activity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../../manager/GlobalConfig"),s=e("./model/ActivityDataFactory"),u=e("../../manager/TimerManager"),l=e("./model/ActivityType12Data"),c=e("./model/ActivityType5Data"),d=e("../tips/UserTips"),f=e("../../../core/utils/StringUtils"),p=e("../../../core/utils/DateUtils"),h=e("../recharge/Recharge"),g=e("../../entity/Actor"),y=e("../server/GameServer"),v=e("./model/ActivityType7Data"),m=e("../bag/UserBag"),b=e("./model/ActivityType8Data"),_=e("../gamescene/GameLogic"),C=e("../../map/GameMap"),I=e("../../../core/base/ErrorLog"),T=e("../kfactivity/model/KuaFuRank"),S=e("../zs/UserZs"),R=function(e){function t(){var i=e.call(this)||this;return i.activityData={},i.doubleElevenData={},i.doubleElevenIDs=[130,150,151,152,153,156],i.doubleElevenSpecialIDs=[150,151,152,153],i.doubleTwelveData={},i.doubleTwelveIDAry=[221,222,223,224],i.doubleTwelveRechargeData={},i.doubleTwelveRechargeIDAry=[225,226,227],i.hfLoginID=157,i.geLoginID=210,i.palyEffList=[],i.rankInfoList=[],i.indexCurrDabiao=0,i.nextDayState=0,i.hfLoginDay=1,i.geLoginDay=1,i.isSuccee=!1,i.sysId=a.PackageID.Activity,o.default.compile(t),i.regNetMsg(1,i.doActivityData),i.regNetMsg(2,i.postRewardResult),i.regNetMsg(3,i.doDaBiaoInfo),i.regNetMsg(4,i.postIsGetAwards),i.regNetMsg(5,i.doRewardStatu),i.regNetMsg(7,i.postChangePage),i.regNetMsg(11,i.doSevenDayData),i.regNetMsg(12,i.doChangeSevenDayData),i.regNetMsg(21,i.doNextDayLoginData),i.regNetMsg(20,i.doNextDayLoginReward),i.regNetMsg(22,i.postKuaFuRank),i.regNetMsg(6,i.postEnvelopeData),i.regNetMsg(8,i.postRedEnvelopeData),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initLogin=function(){},t.prototype.initZero=function(){if(this.activityData)for(var e in this.activityData){var t=+e;if(t<1e4)r.default.ActivityConfig[e]&&this.sendChangePage(t)}},t.prototype.getActivityDataById=function(e){return this.activityData[e]},t.prototype.getDoubleElevenDataByID=function(e){return this.doubleElevenData[e]},t.prototype.getPalyEffListById=function(e){return this.palyEffList[e]},t.prototype.setPalyEffListById=function(e,t){this.palyEffList[e]=t},t.prototype.getrankInfoListByIndex=function(e){return this.rankInfoList[e]},t.prototype.doActivityData=function(e){this.activityData={};for(var t=e.readShort(),i=0;i<t;i++){var n=s.default.create(e);if(n){var a=n.id;-1!=this.doubleElevenIDs.indexOf(a)?this.doubleElevenData[a]=n:-1!=this.doubleTwelveIDAry.indexOf(a)?this.doubleTwelveData[a]=n:-1!=this.doubleTwelveRechargeIDAry.indexOf(a)?this.doubleTwelveRechargeData[a]=n:this.activityData[a]=n}}this.postActivityIsGetAwards(),s.default.createEx(),this.checkSpecials(),this.checkActivityTimer()},t.prototype.checkSpecials=function(){var e;for(var t in u.default.ins().isExists(this.checkSpecials,this)&&u.default.ins().remove(this.checkSpecials,this),this.postSpecials(),this.doubleElevenData)if(-1!=this.doubleElevenSpecialIDs.indexOf(Number(t))&&!(e=this.doubleElevenData[t]).isSpecialOpen()&&e.getSpecialOpenLeftTime())return void u.default.ins().doTimer(1e3*e.getSpecialOpenLeftTime(),1,this.checkSpecials,this)},t.prototype.postSpecials=function(){},t.prototype.postActivityIsGetAwards=function(){},t.prototype.postRewardResult=function(e){this.isSuccee=e.readBoolean();var t=e.readInt();return-1!=this.doubleElevenIDs.indexOf(t)?this.getDoubleElevenDataByID(t).update(e):-1!=this.doubleTwelveRechargeIDAry.indexOf(t)?this.doubleTwelveRechargeData[t].update(e):-1!=this.doubleTwelveIDAry.indexOf(t)?this.doubleTwelveData[t].update(e):this.getActivityDataById(t).update(e),this.postActivityPanel(t),this.postActivityIsGetAwards(),t},t.prototype.postActivityPanel=function(e){return e},t.prototype.postHuntResult=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.prototype.sendReward=function(e,t,i,n){var a=this.getBytes(2),o=r.default.ActivityConfig[e];if(o&&o.activityType==s.default.ACTIVITY_TYPE_9)t?(a.writeInt(e),a.writeShort(t)):(a.writeInt(e),a.writeShort(t),a.writeByte(i));else if(o&&o.activityType==s.default.ACTIVITY_TYPE_11)a.writeInt(e),a.writeShort(t),a.writeShort(i);else if(o&&o.activityType==s.default.ACTIVITY_TYPE_22)a.writeInt(e),a.writeShort(t),a.writeShort(i),a.writeInt(n);else if(o&&o.activityType==s.default.ACTIVITY_TYPE_12)i==l.EnvelopeType.SEND?(a.writeInt(e),a.writeShort(t),a.writeShort(i),n&&a.writeString(n)):i==l.EnvelopeType.GET&&(a.writeInt(e),a.writeUnsignedShort(t),a.writeShort(i));else if(o&&o.activityType==s.default.ACTIVITY_TYPE_2){a.writeInt(e),a.writeShort(t);var u=i||0;a.writeShort(u)}else a.writeInt(e),a.writeShort(t);this.sendToServer(a)},t.prototype.sendLianxuReward=function(e){var t=this.getBytes(13);t.writeInt(e),this.sendToServer(t)},t.prototype.doRewardStatu=function(e){var t=e.readInt(),i=this.getActivityDataById(t);i?i.id==this.hfLoginID?(i.updateData(e),this.hfLoginDay=i.logTime):i.id==this.geLoginID?(i.updateData(e),this.geLoginDay=i.logTime):i.updateData(e):(i=new c.default(null),this.activityData[t]=i,i.updateData(e)),this.postActivityIsGetAwards()},t.prototype.postChangePage=function(e){var t=s.default.create(e);return t&&(-1!=this.doubleElevenIDs.indexOf(t.id)?this.doubleElevenData[t.id]=t:-1!=this.doubleTwelveRechargeIDAry.indexOf(t.id)?this.doubleTwelveRechargeData[t.id]=t:-1!=this.doubleTwelveIDAry.indexOf(t.id)?this.doubleTwelveData[t.id]=t:this.activityData[t.id]=t),this.postActivityIsGetAwards(),t?t.id:0},t.prototype.sendChangePage=function(e){var t=this.getBytes(7);t.writeInt(e),this.sendToServer(t)},t.prototype.doDaBiaoInfo=function(e){this.dabiaoDecode(e),this.postGetDaBiaoInfo()},t.prototype.postGetDaBiaoInfo=function(){},t.prototype.doNextDayLoginData=function(e){this.nextDayState=e.readShort()},t.prototype.doNextDayLoginReward=function(e){e.readShort()&&(this.nextDayState=2,d.default.ins().showTips(f.default.addColor("\u9886\u53d6\u5956\u52b1\u6210\u529f",15937822)))},t.prototype.sendNextDayReward=function(){var e=this.getBytes(20);this.sendToServer(e)},t.prototype.sendDabiaoInfo=function(e){var t=this.getBytes(3);t.writeInt(e),this.sendToServer(t)},t.prototype.sendGetDabiaoReward=function(e){var t=this.getBytes(4);t.writeInt(e),this.sendToServer(t)},t.prototype.postIsGetAwards=function(e){this.isGetAward=e.readBoolean()},t.prototype.sendGetSevenDayAwards=function(e){var t=this.getBytes(12);t.writeShort(e),this.sendToServer(t)},t.prototype.doSevenDayData=function(e){this.dayNum=e.readShort(),this.isAwards=e.readInt(),this.postSevendayIsAwards()},t.prototype.doChangeSevenDayData=function(e){if(e.readBoolean()){e.readShort();this.isAwards=e.readInt(),this.postSevendayAwardCallback()}else d.default.ins().showTips("|C:0xf3311e&T:\u80cc\u5305\u5df2\u6ee1\uff0c\u8bf7\u6e05\u7406\u80cc\u5305|");this.postSevendayIsAwards()},t.prototype.postSevendayAwardCallback=function(){},t.prototype.postSevendayIsAwards=function(){},t.prototype.postNextDayInfo=function(){},t.prototype.getSevenDayStast=function(){var e=p.default.DAYS_PER_WEEK;e=this.dayNum>14?14:this.dayNum;for(var t=1;t<=e;t++){var i=r.default.LoginRewardsConfig[t];if(i&&this.dayNum>=i.day&&0==(this.isAwards>>i.day&1))return!0}return!1},t.prototype.checkNoticeRed=function(){var e=r.default.WelfareConfig[4],i=t.ins().getActivityDataById(e.activityId?e.activityId:0);return i&&i.canReward()},t.prototype.getSevenDayLogIsVisible=function(){return 0==(this.isAwards>>14&1)},t.prototype.getbtnInfo=function(e){var t=r.default.ActivityBtnConfig;return t[e]?t[e]:null},t.prototype.isShowRedPointByBtnInfo=function(e){return this.checkAcCanGet(e.id+"")},t.prototype.checkAcCanGet=function(e){if(-1!=this.doubleElevenIDs.indexOf(Number(e))){if(-1!=this.doubleElevenSpecialIDs.indexOf(Number(e))){for(var i,n=this.doubleElevenSpecialIDs.length,a=0;a<n;a++)if((i=this.doubleElevenData[this.doubleElevenSpecialIDs[a]]).isSpecialOpen()&&i.canReward())return!0}else{var o=this.doubleElevenData[Number(e)];if(o.isOpenActivity()&&o.canReward())return!0}return!1}if(-1!=this.doubleTwelveIDAry.indexOf(Number(e)))for(var r in this.doubleTwelveData){if(r==e&&this.doubleTwelveData[r].isOpenActivity()&&9==this.doubleTwelveData[r].type)for(var s=0;s<3;s++)if(t.ins().isGetRollReward(this.doubleTwelveData[r].id,s))return!0;return!1}var u=this.activityData;for(var l in u)if(l==e&&u[l].isOpenActivity()&&u[l].canReward()&&u[l].specialState())return!0;return!1},t.prototype.checkOtherCharge2CanGet=function(){var e=h.default.ins().getRechargeData(1),t=r.default.ChongZhi2Config[e.day/7>=1?2:1][e.day%7];for(var i in t)if(0==(e.isAwards>>t[i].index&1)&&e.num>=t[i].pay)return!0;return!1},t.prototype.dabiaoDecode=function(e){this.isDaBiao=e.readBoolean(),this.indexCurrDabiao=Math.max(e.readInt()-1,0);var t=e.readShort();if(t==RankDataType.TYPE_LEVEL)e.readInt(),e.readInt();else if(t==RankDataType.TYPE_BAOSHI)this.myDabiaoInfo=e.readInt();else if(t==RankDataType.TYPE_ZHANLING){var i=e.readInt(),n=e.readInt();this.myDabiaoInfo=[i,n]}else t==RankDataType.TYPE_LONGHUN?this.myDabiaoInfo=e.readInt():t==RankDataType.TYPE_XIAOFEI?this.myDabiaoInfo=e.readInt():t==RankDataType.TYPE_HF_XIAOFEI?(this.myDabiaoInfo=e.readInt(),this.myPaiming=e.readInt()):this.myDabiaoInfo=e.readDouble();var a=e.readShort();this.rankInfoList=[];for(var o=0;o<a;o++)this.rankInfoList[o]||this.rankInfoList.push(new B),this.rankInfoList[o].prase(e,t)},t.prototype.getisCangetDabiao3=function(e){var i=t.ins().getActivityDataById(e);return i.canOnlyReward?(i.canOnlyReward(),i.btn1||i.btn2):this.checkAcCanGet(e+"")},t.prototype.getisCanBuyXianGou=function(e){var t=!1,i=r.default.ActivityType2Config[e];if(i)for(var n=0;n<i.length&&!(t=this.getisCanBuyXianGouItem(e,n));n++);return t},t.prototype.getisCanBuyXianGouItem=function(e,i){var n=!1,a=t.ins().activityData[e],o=r.default.ActivityType2Config[e];if(a&&o){var s=o[i],u=a.buyData[i]||0;if(s&&u){var l=1==s.currencyType?g.default.gold:g.default.yb,c=1==s.currencyType,d=parseInt(l+"")>=s.price,f=s.count-u>0;n=c&&d&&f}}return n},t.prototype.isDoubleElevenCanGet=function(){var e=this.doubleElevenData;for(var t in e)if(e[t].isSpecialOpen()&&e[t].canReward())return!0;return!1},t.prototype.IsHefuXunBaoTimer=function(){if(!y.default._serverHeZeroTime)return!1;var e=p.default.formatMiniDateTime(y.default._serverHeZeroTime),t=e+24*r.default.TreasureHuntConfig.hefuDay*60*60*1e3,i=y.default.serverTime;return i>=e&&i<=t},t.prototype.IsBossScoreTitle=function(e,i){var n=r.default.ActivityType7Config[e],a=t.ins().getActivityDataById(e);for(var o in n){var s=n[o];if(s.title==i&&this.getIsBuy(s)&&a.bossScore>=s.score)return!0}return!1},t.prototype.getIsBuy=function(e){if(e){var i=t.ins().getActivityDataById(e.Id);return!(e.count&&i.personalRewardsSum[e.index]>=e.count)&&!(e.scount&&i.worldRewardsSum[e.index]>=e.scount)}},t.prototype.getType7RedPoint=function(e){var i,n=r.default.ActivityType7Config[e],a=t.ins().getActivityDataById(e);if(n[1].showType==v.default.TYPE_LABA)for(var o in n){if(a.getExchange(n[o].index)==t.CanGet)return!0}else for(var o in n)if(t.ins().getIsBuy(n[o]))if(n[o].itemId){if((i=m.default.ins().getBagItemById(n[o].itemId))&&i.count>=n[o].itemCount)return!0}else if(a.bossScore>=n[o].score)return!0;return!1},t.prototype.getCurrentRingAwardIndex=function(e){var t=1;if(e>0)for(;0!=(e>>t&1);)t++;return t},t.prototype.getRingAward=function(e){for(var t in r.default.ActivityType8Config){if(r.default.ActivityType8Config[t][1].showType==b.default.TYPE_RING)for(var i in r.default.ActivityType8Config[t])if(i==e.toString())return r.default.ActivityType8Config[t][i]}return null},t.prototype.getLastRingAward=function(){var e;for(var t in r.default.ActivityType8Config){if(r.default.ActivityType8Config[t][1].showType==b.default.TYPE_RING)for(var i in r.default.ActivityType8Config[t])e=r.default.ActivityType8Config[t][i]}return e},t.prototype.addEvent=function(){o.default.ins().addListener(_.default.ins().postEnterMap,this.openRingActivity,this)},t.prototype.removeEvent=function(){o.default.ins().removeListener(_.default.ins().postEnterMap.funcallname,this.openRingActivity,this)},t.prototype.openRingActivity=function(){0==C.default.fbType&&(o.default.ins().removeListener(_.default.ins().postEnterMap.funcallname,this.openRingActivity,this),ViewManager.ins().open(ActivityWin,201),t.ins().sendChangePage(201))},t.prototype.getType8RedPoint=function(e){var i=!1,n=t.ins().activityData[e];return n&&0==n.record&&(i=!0),i},t.prototype.getType9RedPoint=function(e){var i=!1;t.ins().activityData[e];if(this.getRollSum(e))i=!0;else{var n=r.default.ActivityType9Config[e];if(I.default.Assert(n,"ActivityType9Config is null!! activityId:"+e))return!1;for(var a in n[0].reward)if(this.isGetRollReward(e,+a)){i=!0;break}}return i},t.prototype.getType10RedPoint=function(e){var i=t.ins().activityData[e],n=r.default.ActivityType10Config[e][i.getLevel()];return!!n&&(i.yb>=n.recharge&&g.default.yb>=n.yuanBao)},t.prototype.getType17RedPoint=function(e){var i=t.ins().activityData[e],n=r.default.ActivityType17_2Config[e];return!!n&&i.score>=n.score},t.prototype.isGetRollReward=function(e,i){var n=t.ins().activityData[e];n||(n=t.ins().doubleTwelveData[e]);var a=r.default.ActivityType9Config[e];return!(!(a&&a[0]&&a[0].reward[i].times&&n.count>=a[0].reward[i].times)||n.record>>i+1&1)},t.prototype.getRollSum=function(e){var t=r.default.ActivityType9Config[e];if(t&&t[0]&&m.default.ins().getBagItemById(t[0].item))return!0;return!1},t.prototype.getIsRollTen=function(e){var t=r.default.ActivityType9Config[e][0];if(t){var i=0;if(t.item){var n=m.default.ins().getBagItemById(t.item);if(n&&(i+=n.count),i>=10)return!0}if(i=10-i,t.yb&&g.default.yb>=t.yb*i)return!0}return!1},t.prototype.postKuaFuRank=function(e){var i=e.readInt(),n=e.readInt(),a=t.ins().getActivityDataById(i);a&&a.CleanRandData();for(var o=0;o<n;o++){var r=new T.default;r.actorId=e.readInt(),r.rmb=e.readInt(),r.rank=e.readInt(),r.serverId=e.readInt(),r.roleName=e.readString(),r.job=e.readInt(),r.sex=e.readInt(),a&&a.SetRankData(r)}var s=e.readInt();a&&(a.mycost=s)},t.prototype.sendKuaFuRank=function(e){var t=this.getBytes(22);t.writeInt(e),this.sendToServer(t)},t.prototype.checkLabaBossData=function(){for(var e in t.ins().activityData)if(t.ins().activityData[e].pageStyle==s.ActivityPageStyle.LABA&&t.ins().activityData[e].type==s.default.ACTIVITY_TYPE_20&&t.ins().getActivityDataById(+e).isOpenActivity()){var i=t.ins().activityData[e].id;return t.ins().getActivityDataById(i)}return null},t.prototype.getConfig22_3=function(e){var t,i=r.default.ActivityType22_3Config[e];for(var n in i)for(var a in t=i[n])if(t[a].low<=S.default.ins().lv&&S.default.ins().lv<=t[a].high)return t[a];return null},t.prototype.sendEnvelopeData=function(e,t){var i=this.getBytes(6);i.writeInt(e),i.writeUnsignedShort(t),this.sendToServer(i)},t.prototype.postEnvelopeData=function(e){var t=e.readInt();if(e.readByte()){var i=e.readUnsignedShort(),n=e.readShort(),a=e.readShort(),o=e.readShort(),r=e.readInt(),s=e.readString(),u=e.readString(),c=new l.EnvelopeData;return c.id=t,c.eId=i,c.job=n,c.sex=a,c.index=o,c.serverId=r,c.name=s,c.desc=u,void this.postEnvelopeDataCall(c)}this.postEnvelopeDataCall(null)},t.prototype.postEnvelopeDataCall=function(e){return e},t.prototype.postRedEnvelopeData=function(e){var t=e.readInt();if(this.activityData[t]&&this.activityData[t]instanceof l.default){var i=this.activityData[t],n=e.readShort(),a=e.readShort();if(1==n){if(a)(s=new l.RedEnvelope).id=e.readUnsignedShort(),s.timer=e.readInt(),i.envelopeData.push(s)}else{for(var o=[],r=0;r<a;r++){var s;(s=new l.RedEnvelope).id=e.readUnsignedShort(),s.timer=e.readInt(),o.push(s)}i.envelopeData=o}}},t.prototype.checkActivityTimer=function(){for(var e in this.activityData)if(this.activityData[e]instanceof l.default){u.default.ins().isExists(this.ActivityTimerSecond1,this)||u.default.ins().doTimer(1e3,0,this.ActivityTimerSecond1,this);break}},t.prototype.postGetRedEnvelope=function(e,t,i,n,a){return[e,t,i,n,a]},t.prototype.ActivityTimerSecond1=function(){for(var e=0;e<this._actTimeSecond1.length;){var t=this._actTimeSecond1[e];if(this.activityData[t]){if(!this.activityData[t].isOpenActivity()){if(this.activityData[t]instanceof l.default)this.activityData[t].clearAll();this._actTimeSecond1.splice(e,1);continue}if(this.activityData[t]instanceof l.default)this.activityData[t].checkClear()}e++}},Object.defineProperty(t.prototype,"activityTimers",{get:function(){return this._actTimeSecond1=this._actTimeSecond1?this._actTimeSecond1:[],this._actTimeSecond1},enumerable:!0,configurable:!0}),t.NotReached=0,t.CanGet=1,t.Geted=2,t.NOKILL=0,t.KILL=1,t}(n.default);i.default=R;var B=function(){function e(){}return e.prototype.prase=function(e,t){if(t==RankDataType.TYPE_XIAOFEI||t==RankDataType.TYPE_HF_XIAOFEI)return this.rankIndex=e.readShort(),this.id=e.readInt(),this.name=e.readString(),void(this.numType=e.readInt());if(this.rankIndex=e.readShort(),this.id=e.readInt(),this.name=e.readString(),this.level=e.readShort(),this.zsLevel=e.readShort(),this.monthCard=e.readShort(),this.vipLv=e.readShort(),RankDataType.TYPE_LEVEL!=t)if(t==RankDataType.TYPE_BAOSHI||t==RankDataType.TYPE_LONGHUN)this.numType=e.readInt();else if(t==RankDataType.TYPE_ZHANLING){var i=e.readInt(),n=e.readInt();this.numType=[i,n]}else this.numType=e.readDouble()},e}();window.GameSystem.push(R.ins.bind(R)),cc._RF.pop()},{"../../../core/base/ErrorLog":"ErrorLog","../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../../core/utils/StringUtils":"StringUtils","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../../map/GameMap":"GameMap","../bag/UserBag":"UserBag","../gamescene/GameLogic":"GameLogic","../kfactivity/model/KuaFuRank":"KuaFuRank","../recharge/Recharge":"Recharge","../server/GameServer":"GameServer","../tips/UserTips":"UserTips","../zs/UserZs":"UserZs","./model/ActivityDataFactory":"ActivityDataFactory","./model/ActivityType12Data":"ActivityType12Data","./model/ActivityType5Data":"ActivityType5Data","./model/ActivityType7Data":"ActivityType7Data","./model/ActivityType8Data":"ActivityType8Data"}],ActorExRing2Config:[function(e,t,i){"use strict";cc._RF.push(t,"2c3baPJ5+lLkIqeLfC8c773","ActorExRing2Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.level=0,this.costItem=0,this.cost=0,this.upPower=0,this.addPower=0,this.bjRate=0,this.bjAddPower=0,this.attrAward=[],this.extAttrAward=[],this.judgeup=0,this.SpecialRingSkin=""}}();i.default=n,cc._RF.pop()},{}],ActorExRing3Config:[function(e,t,i){"use strict";cc._RF.push(t,"682b1+5719EBoQgTa7zkJK8","ActorExRing3Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.level=0,this.costItem=0,this.cost=0,this.upPower=0,this.addPower=0,this.bjRate=0,this.bjAddPower=0,this.attrAward=[],this.extAttrAward=[],this.judgeup=0,this.SpecialRingSkin=""}}();i.default=n,cc._RF.pop()},{}],ActorExRing4Config:[function(e,t,i){"use strict";cc._RF.push(t,"38637o+MVJAtL+0MJt63645","ActorExRing4Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.level=0,this.costItem=0,this.cost=0,this.upPower=0,this.addPower=0,this.bjRate=0,this.bjAddPower=0,this.attrAward=[],this.extAttrAward=[],this.judgeup=0,this.SpecialRingSkin=""}}();i.default=n,cc._RF.pop()},{}],ActorExRing5Config:[function(e,t,i){"use strict";cc._RF.push(t,"adcfbwqa21C/qpGr8M7ZNrc","ActorExRing5Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.level=0,this.costItem=0,this.cost=0,this.upPower=0,this.addPower=0,this.bjRate=0,this.bjAddPower=0,this.attrAward=[],this.extAttrAward=[],this.judgeup=0,this.SpecialRingSkin=""}}();i.default=n,cc._RF.pop()},{}],ActorExRing6Config:[function(e,t,i){"use strict";cc._RF.push(t,"b6efbibkqxEO45KwwF/k9iP","ActorExRing6Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.level=0,this.costItem=0,this.cost=0,this.upPower=0,this.addPower=0,this.bjRate=0,this.bjAddPower=0,this.attrAward=[],this.extAttrAward=[],this.judgeup=0,this.SpecialRingSkin=""}}();i.default=n,cc._RF.pop()},{}],ActorExRing7Config:[function(e,t,i){"use strict";cc._RF.push(t,"b4efdW5/whP2rSvZzwkPD55","ActorExRing7Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.level=0,this.costItem=0,this.cost=0,this.upPower=0,this.addPower=0,this.bjRate=0,this.bjAddPower=0,this.attrAward=[],this.extAttrAward=[],this.judgeup=0,this.SpecialRingSkin="",this.summonerSkillId=0,this.summonerAttr=[]}}();i.default=n,cc._RF.pop()},{}],ActorExRingAbilityConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7db6892ZzZHI5fXhbG6F6GI","ActorExRingAbilityConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.ringLv=0,this.abilityName="",this.abilityDesc="",this.abilityIcon=""}}();i.default=n,cc._RF.pop()},{}],ActorExRingBookConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f835cjmDV9PvKujOFwkU5zE","ActorExRingBookConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.level=0,this.itemId=0,this.num=0,this.attr=[],this.bookAttrPer=[],this.skillName="",this.skillDesc="",this.skillIcon="",this.exPower=0}}();i.default=n,cc._RF.pop()},{}],ActorExRingCommon:[function(e,t,i){"use strict";cc._RF.push(t,"649d3rO/EpEP7WLb59wqtZg","ActorExRingCommon"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.MaxOutNum=[],this.actImbaId=0}}();i.default=n,cc._RF.pop()},{}],ActorExRingConfig:[function(e,t,i){"use strict";cc._RF.push(t,"250eaD/+01KVrIlnYHLZem+","ActorExRingConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.openDay=0,this.openVip=0,this.openYb=0,this.name="",this.effid=0,this.explain="",this.mtCombat=0,this.needLevel=0,this.needZs=0,this.monsterId=0,this.order=0,this.icon="",this.avatarFileName=0,this.wexplain="",this.useYb=0,this.skillGridYb=0}}();i.default=n,cc._RF.pop()},{}],ActorExRingFubenConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5f68bEtSZlDK5nQagCDqsvG","ActorExRingFubenConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ActorExRingItemConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6c23eGwNtNMyqWD8ryKdwY9","ActorExRingItemConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],Actor:[function(e,t,i){"use strict";cc._RF.push(t,"dfae7XgJEdJAqcWIdHO2zqH","Actor"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../base/BaseSystem"),a=e("../../core/net/PackageID"),o=e("../module/server/GameServer"),r=e("../module/bag/UserBag"),s=e("../module/vip/UserVip"),u=e("../../core/base/MessageCenter"),l=e("../module/setting/SysSetting"),c=e("../module/report/ReportData"),d=e("../module/tips/UserTips"),f=e("../module/activity/model/RewardData"),p=e("../consts/MoneyConst"),h=e("../module/samsara/data/SamsaraModel"),g=function(e){function t(){var i=e.call(this)||this;return i._power=0,i._gold=0,i._yb=0,i._feats=0,i._togeatter1=-1,i._togeatter2=-1,i._weiWang=0,i._chip=0,u.default.compile(t),i.sysId=a.PackageID.Default,i.regNetMsg(1,i.postInit),i.regNetMsg(7,i.postExp),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postExp=function(e){var t=this._level;this._level=e.readInt(),this._exp=e.readInt();var i=e.readInt();return t<this._level&&(this.postLevelChange(),c.default.getIns().roleUp()),d.default.ins().showTips("|C:0x23CA23&T:\u7ecf\u9a8c +"+i+"|"),i},t.prototype.postInit=function(e){t.handle=e.readDouble(),t.actorID=e.readInt(),o.default.serverID=e.readInt(),this.postNameChange(e.readUTFBytes(33)),this._level=e.readInt(),this._exp=e.readInt(),e.readDouble(),this.postGoldChange(e.readNumber()),this.postYbChange(e.readNumber()),s.default.ins().lv=e.readInt(),this.postSoulChange(e.readNumber()),r.default.ins().bagNum=e.readInt(),this.postFeatsChange(e.readNumber()),t.runeShatter=e.readNumber(),t.runeExchange=e.readNumber(),this.postUpdateTogeatter(e.readNumber(),1),this.postUpdateTogeatter(e.readNumber(),2),this.postWeiWang(e.readInt()),l.default.ins().init(),c.default.getIns().enterGame()},t.prototype.postNameChange=function(e){this._myName!=e&&(this._myName=e)},t.prototype.postGoldChange=function(e){if(this._gold!=e){if(this._gold>0){var t=e-this._gold;if(t>0){var i="|C:0xffd93f&T:\u91d1\u5e01  +"+t+"|";d.default.ins().showTips(i)}}this._gold=e}},t.prototype.postYbChange=function(e){if(this._yb!=e){if(this._yb>0){var t=e-this._yb;if(t>0){var i="|C:0xffd93f&T:\u5143\u5b9d  +"+t+"|";d.default.ins().showTips(i)}}this._yb=e}},t.prototype.postFeatsChange=function(e){if(this._feats!=e){if(this._feats>0){var t=e-this._feats,i=parseInt(t.toString());if(i>0){var n="|C:0xffd93f&T:\u83b7\u5f97"+i+"\u529f\u52cb|";d.default.ins().showTips(n)}}this._feats=e}},t.prototype.postZsExpChange=function(e){var t="|C:0x00ff00&T:\u4fee\u4e3a+"+e+"|";d.default.ins().showTips(t)},t.prototype.postUpdateTogeatter=function(e,t){var i=0;if((i=1==t?this._togeatter1:this._togeatter2)!=e){if(-1!=i){var n=e-i;if(n>0){var a="|C:0xffd93f&T:\u83b7\u5f97"+n+(1==t?f.default.getCurrencyName(p.MoneyConst.punch1):f.default.getCurrencyName(p.MoneyConst.punch2))+"|";d.default.ins().showTips(a)}}i=e}return 1==t?this._togeatter1=i:this._togeatter2=i,{value:e,type:t}},t.prototype.postLevelChange=function(){},t.prototype.postSoulChange=function(e){if(this._soul>0){var t=e-this._soul;if(t>0){var i="\u83b7\u5f97|C:0xd242fb&T:\u7cbe\u70bc\u77f3 x "+t+"|";d.default.ins().showTips(i)}}this._soul=e},t.prototype.postPowerChange=function(e){this._power!=e&&(this._power<e&&this._power>0&&d.default.ins().showBoostPower(e,this._power),this._power=e)},t.prototype.postWeiWang=function(e){this._weiWang>0&&e-this._weiWang>0&&d.default.ins().showTips("|C:0xff00ff&T:\u83b7\u5f97"+(e-this._weiWang)+f.default.getCurrencyName(p.MoneyConst.weiWang)+"|"),this._weiWang=e},t.prototype.postChip=function(e){this._chip>0&&e-this._chip>0&&d.default.ins().showTips("|C:0xff00ff&T:\u83b7\u5f97"+(e-this._chip)+f.default.getCurrencyName(p.MoneyConst.chip)+"|"),this._chip=e},t.canZhuanSheng=function(){return this.ins()._level>=this.zhuanShengLv},Object.defineProperty(t,"level",{get:function(){return this.ins()._level},enumerable:!0,configurable:!0}),Object.defineProperty(t,"exp",{get:function(){return this.ins()._exp},enumerable:!0,configurable:!0}),Object.defineProperty(t,"power",{get:function(){return this.ins()._power},enumerable:!0,configurable:!0}),Object.defineProperty(t,"myName",{get:function(){return this.ins()._myName},enumerable:!0,configurable:!0}),Object.defineProperty(t,"gold",{get:function(){return this.ins()._gold},enumerable:!0,configurable:!0}),Object.defineProperty(t,"yb",{get:function(){return this.ins()._yb},enumerable:!0,configurable:!0}),Object.defineProperty(t,"soul",{get:function(){return this.ins()._soul},enumerable:!0,configurable:!0}),Object.defineProperty(t,"feats",{get:function(){return this.ins()._feats},enumerable:!0,configurable:!0}),Object.defineProperty(t,"togeatter1",{get:function(){return this.ins()._togeatter1<0?0:this.ins()._togeatter1},enumerable:!0,configurable:!0}),Object.defineProperty(t,"togeatter2",{get:function(){return this.ins()._togeatter2<0?0:this.ins()._togeatter2},enumerable:!0,configurable:!0}),Object.defineProperty(t,"samsaraLv",{get:function(){var e=h.default.ins().samsaraInfo;return e?e.lv:0},enumerable:!0,configurable:!0}),Object.defineProperty(t,"weiWang",{get:function(){return this.ins()._weiWang},enumerable:!0,configurable:!0}),Object.defineProperty(t,"chip",{get:function(){return this.ins()._chip},enumerable:!0,configurable:!0}),t.zhuanShengLv=80,t.runeShatter=0,t.runeExchange=0,t}(n.default);i.default=g,window.GameSystem.push(g.ins.bind(g)),cc._RF.pop()},{"../../core/base/MessageCenter":"MessageCenter","../../core/net/PackageID":"PackageID","../base/BaseSystem":"BaseSystem","../consts/MoneyConst":"MoneyConst","../module/activity/model/RewardData":"RewardData","../module/bag/UserBag":"UserBag","../module/report/ReportData":"ReportData","../module/samsara/data/SamsaraModel":"SamsaraModel","../module/server/GameServer":"GameServer","../module/setting/SysSetting":"SysSetting","../module/tips/UserTips":"UserTips","../module/vip/UserVip":"UserVip"}],AdvanEquipWin:[function(e,t,i){"use strict";cc._RF.push(t,"ed57e5EK4VHxIoywyZe7Nzy","AdvanEquipWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("./OrangeEquipPanel"),r=e("../../extremeEquip/view/ExtremeEquipPanel"),s=e("./LegendEquipPanel"),u=e("../../../entity/Actor"),l=e("../../tips/UserTips"),c=e("../../opensystem/OpenSystem"),d=e("../../../consts/SystemConst"),f=e("../../../../core/utils/ComponentUtil"),p=cc._decorator,h=p.ccclass,g=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Main,t.viewStack=[],t.tab=null,t.tabGroup=[],t.orangeEquipPanel=null,t.extremeEquipPanel=null,t.legendEquipPanel=null,t.rolesGroup=null,t.roleHeadSelects=[],t.rolesLabel=[],t.curRole=0,t.curSelectIndex=0,t}var i;return __extends(t,e),i=t,t.prototype.initData=function(){},t.prototype.initUI=function(){this.panelArr=[this.orangeEquipPanel,this.legendEquipPanel,this.extremeEquipPanel],this.curSelectIndex=i.ShenZhuang,this.rolesGroup.active=!1,this.tabGroup=this.tab.getComponentsInChildren(cc.Button);for(var e=0;e<this.tabGroup.length;e++)this.tabGroup[e].clickEvents[0]=f.ComponentUtil.createEventHandler(this.node,"AdvanEquipWin","onClickTabTouch",""+e);var t=this.rolesGroup.getComponentsInChildren(cc.Button);for(e=0;e<t.length;e++)t[e].clickEvents[0]=f.ComponentUtil.createEventHandler(this.node,"AdvanEquipWin","onClickHeadTouch",""+e)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.panelArr[this.curSelectIndex].close()},t.prototype.refreshRoleHeadShow=function(e){if(e!=this.curRole){for(var t=0;t<this.roleHeadSelects.length;t++)this.roleHeadSelects[t].active=t==e;this.curRole=e}},t.prototype.checkIsOpen=function(e){switch(e){case i.ShenZhuang:case i.ChuanQi:break;case i.ZhiZun:if(!c.default.ins().checkSysOpen(d.SystemType.ZHIZUN))return l.default.ins().showTips(c.default.ins().getNoOpenTips(d.SystemType.ZHIZUN)),!1}return!0},t.prototype.onClickTabTouch=function(e,t){var i=+t;i!=this.curSelectIndex&&(this.panelArr[this.curSelectIndex].close(),this.setSelectedIndex(+i),this.setRedPoint())},t.prototype.onClickHeadTouch=function(e,t){var i=+t;i!=this.curRole&&(this.panelArr[i].open(this.curRole),this.curSelectIndex=i)},t.prototype.setSelectedIndex=function(e){this.rolesGroup.active=3!=e,this.refreshViewStack(e),this.panelArr[e].open(this.curRole)},t.prototype.refreshViewStack=function(e){e!=this.curSelectIndex&&(this.viewStack.forEach(function(t,i){t.active=i==e}),this.curSelectIndex=e)},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return u.default.level>=10||(l.default.ins().showTips("10\u7ea7\u5f00\u542f"),!1)},t.prototype.setRedPoint=function(){},t.ShenZhuang=0,t.ChuanQi=1,t.ZhiZun=2,t.XunBao=3,__decorate([g({type:cc.Node,displayName:"viewStack"})],t.prototype,"viewStack",void 0),__decorate([g({type:cc.Node,displayName:"tab"})],t.prototype,"tab",void 0),__decorate([g({type:o.default,displayName:"orangeEquipPanel"})],t.prototype,"orangeEquipPanel",void 0),__decorate([g({type:r.default,displayName:"extremeEquipPanel"})],t.prototype,"extremeEquipPanel",void 0),__decorate([g({type:s.default,displayName:"legendEquipPanel"})],t.prototype,"legendEquipPanel",void 0),__decorate([g({type:cc.Node,displayName:"roleGroup"})],t.prototype,"rolesGroup",void 0),__decorate([g({type:cc.Node,displayName:"roleHeadSelects"})],t.prototype,"roleHeadSelects",void 0),__decorate([g({type:cc.Label,displayName:"rolesLabel"})],t.prototype,"rolesLabel",void 0),t=i=__decorate([h],t)}(n.default);i.default=y,cc._RF.pop()},{"../../../../core/utils/ComponentUtil":"ComponentUtil","../../../../core/view/BaseEuiView":"BaseEuiView","../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../enum/LayerManager":"LayerManager","../../extremeEquip/view/ExtremeEquipPanel":"ExtremeEquipPanel","../../opensystem/OpenSystem":"OpenSystem","../../tips/UserTips":"UserTips","./LegendEquipPanel":"LegendEquipPanel","./OrangeEquipPanel":"OrangeEquipPanel"}],Algorithm:[function(e,t,i){"use strict";cc._RF.push(t,"7af841VNDpGR4+htdZH1471","Algorithm"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.sortAsc=function(e,t){return e<t?-1:e>t?1:0},e.sortAscAttr=function(t,i,n){var a;if(void 0==n)a=e.sortAsc(t,i);else{var o=t[n],r=i[n];a=o<r?-1:o>r?1:0}return a},e.sortDesc=function(e,t){return e>t?-1:e<t?1:0},e.sortDescAttr=function(t,i,n){var a;if(void 0==n)a=e.sortDesc(t,i);else{var o=t[n],r=i[n];a=o>r?-1:o<r?1:0}return a},e.binSearch=function(t,i,n){if(void 0===n&&(n=null),!t||0==t.length)return 0;n||(n=e.sortAsc);for(var a=0,o=t.length-1;a<=o;){var r=o+a>>1;n(t[r],i)<=0?a=r+1:o=r-1}return a},e.test=function(){for(var t=[],i=0;i<10;i++){var n=Math.floor(1e5*Math.random()),a=e.binSearch(t,n);t.splice(a,0,n)}10!=t.length&&console.log("test fail!count is "+t.length+", except:10");for(var o=0,r=t;o<r.length;o++){var s=r[o];console.log(s)}for(i=0;i<t.length-1;i++)if(t[i]>t[i+1]){console.log("test fail!index:"+i);break}},e}();i.default=n,cc._RF.pop()},{}],AllWorldConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7731e1UtkJH34qYIfkuN8CH","AllWorldConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ArrayUtil:[function(e,t,i){"use strict";cc._RF.push(t,"ebccaDpUOZNwbHf9zQHlhpd","ArrayUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("./Util");(function(e){e[e.UPPER=1]="UPPER",e[e.LOWER=2]="LOWER"})(n=i.ArraySort||(i.ArraySort={}));var o=function(){function e(){}return e.searchValue=function(e,t,i){for(var n=0,o=e;n<o.length;n++){var r=o[n];if(!a.Util.isNullOrUndefined(r)&&(a.Util.isNullOrUndefined(t)?r:r[t])==i)return r}return null},e.exchange=function(e,t,i){var n=e[t];e[t]=e[i],e[i]=n},e.copy=function(e){return e.slice()},e.copySome=function(t,i,n){if(n>=t.length)return e.copy(t);if(n<=0)return[];var a=i;a<0&&(a=0);var o=a+n;return o>t.length?t.slice(a,t.length):t.slice(a,o)},e.containsValue=function(e,t){return!a.Util.isNullOrUndefined(e)&&e.length>0&&-1!=e.indexOf(t)},e.containsValueByFunc=function(e,t){for(var i=0;i<e.length;i++)if(t(e[i]))return!0;return!1},e.getValueByFunc=function(e,t){for(var i=[],n=0;n<e.length;n++)t(e[n])&&i.push(e[n]);return i},e.removeValue=function(e,t){var i=e.indexOf(t);return i>=0&&(e.splice(i,1),!0)},e.removeValueAt=function(e,t){return e.length>t&&t>=0?e.splice(t)[0]:null},e.removeAllValue=function(e){e.length=0},e.removeValues=function(e,t){for(var i=!1,n=0;n<e.length;)t.indexOf(e[n])>=0?(e.splice(n,1),i=!0):n++;return i},e.removeValuesByFun=function(e,t){for(var i,n=[],a=e.length-1;a>=0;a--){t(e[a])&&(i=e.splice(a,1),n.push(i[0]))}return n.reverse()},e.clear=function(e){for(var t=0,i=e.length;t<i;++t)e[t]=null;e.splice(0)},e.swicthArrItem=function(t,i,n){if(!e.isArrayEmpty(t)&&i!=n&&t.length>=i&&t.length>=n){var a=t[i];t[i]=t[n],t[n]=a}return t},e.isArrayEmpty=function(e){return!(!a.Util.isNullOrUndefined(e)&&0!=e.length)},e.insert=function(e,t,i){i>e.length-1?e.push(t):e.splice(i,0,t)},e.mergeAry=function(e,t){var i=[];if(!a.Util.isNullOrUndefined(e))for(var n=0,o=e;n<o.length;n++){var r=o[n];i.push(r)}if(!a.Util.isNullOrUndefined(t))for(var s=0,u=t;s<u.length;s++){var l=u[s];i.push(l)}return i},e.replace=function(e,t,i){return i<=e.length-1&&(e.splice(i,1,t),!0)},e.areEqual=function(e,t){if(e.length!=t.length)return!1;for(var i=0,n=e.length;i<n;++i)if(e[i]!=t[i])return!1;return!0},e.createUniqueCopy=function(t){for(var i=[],n=t.length,a=0;a<n;)e.containsValue(i,t[a])||i.push(t[a]),++a;return i},e.getArrBySort=function(e,t,i){for(var n,a=[],o=0,r=e.length;o<r;++o)(n=e[o])[t]==i&&a.push(n);return a},e.getRandomArr=function(t,i,n,a){if(void 0===n&&(n=!1),void 0===a&&(a=!0),a&&i<t)return null;for(var o=0,r=[];r.length<t;)o=Math.random()*i,a&&(o=Math.floor(o)),!n&&e.containsValue(r,o)||r.push(o);return r},e.getSequence=function(e,t,i){for(var n=[],a=0;a<i;++a)n.push(e),e+=t;return n},e.shuffle=function(t,i){return void 0===i&&(i=!1),i&&(t=e.copy(t)),t.sort(function(){if(Math.random()-.5<0)return-1;return 1}),t},e.MoreKeysSorter=function(e,t,i){var a=0,o=function(e,r){var s=t[a],u=i[a];return e[s]==r[s]?(a+=1)>t.length?(a=0,-1):o(e,r):(a=0,u==n.UPPER?e[s]-r[s]:r[s]-e[s])};e.sort(o)},e.sortMap=function(e,t,i){void 0===i&&(i=!0),e.sort(function(e,n){return i?e[t]-n[t]:n[t]-e[t]})},e.sortNumberArray=function(e,t){return void 0===t&&(t=!0),e.sort(function(e,i){return t?e-i:i-e}),e},e}();i.ArrayUtil=o,cc._RF.pop()},{"./Util":"Util"}],ArtifactData:[function(e,t,i){"use strict";cc._RF.push(t,"830b85pDJNAjLP2Co6v23Kw","ArtifactData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.id=0,this.rank=0}return e.prototype.parser=function(e){this.id=e.readInt(),this.rank=e.readShort()},e}();i.default=n,cc._RF.pop()},{}],ArtifactsRankConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a1a68uTXN9HMoEFcCpZ4rV0","ArtifactsRankConfig");cc._RF.pop()},{}],Artifact:[function(e,t,i){"use strict";cc._RF.push(t,"2cae2G2a19FIbRz+0cXMCql","Artifact"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../manager/GlobalConfig"),a=e("../../../core/net/PackageID"),o=e("../../base/BaseSystem"),r=e("./ArtifactData"),s=e("./NewArtifactData"),u=e("../../../core/base/AttributeData"),l=e("../../Utils/EgretUtils"),c=e("../../manager/TimerManager"),d=e("../tips/UserTips"),f=e("../../../core/utils/CommonUtils"),p=e("../../config/ImbaSkillReviseConfig"),h=e("../bag/ItemData"),g=e("../../../core/base/MessageCenter"),y=function(e){function t(){var i=e.call(this)||this;return i.artifacts=[],i.showGuide=-2e3,i.openHeji=0,i.attArr=["a","args","b","cd","crit","d","selfEff"],i.listArtifacts={},i.sysId=a.PackageID.Artifact,g.default.compile(t),i.regNetMsg(1,i.postArtifactInit),i.regNetMsg(2,i.postArtifactUpdate),i.regNetMsg(3,i.postNewArtifactInit),i.regNetMsg(4,i.postNewArtifactUpdate),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getNewArtifactPower=function(e){var t=n.default.ImbaConf[e],i=this.listArtifacts[t.id];if(!i)return 0;for(var a=0,o=0;o<t.jigsawId.length;o++){i.record>>o&1?a+=n.default.ImbaJigsawConf[t.jigsawId[o]].power:!1}return i.open&&(a+=t.power),a},t.prototype.getAttr=function(){var e={};for(var t in n.default.ImbaConf){for(var i=n.default.ImbaConf[t],a=this.getNewArtifactBy(i.index),o=0;o<i.jigsawId.length;o++){if(a.record>>o&1)for(var r=n.default.ImbaJigsawConf[i.jigsawId[o]],s=0;s<r.attrs.length;s++){var l=r.attrs[s];u.default.addAttrToList(e,l)}}if(a.open&&i.attrs)for(o=0;o<i.attrs.length;o++)u.default.addAttrToList(e,i.attrs[o])}var c=[];for(var d in e)c.push(e[d]);return c.sort(u.default.sortAttribute),c},t.prototype.getAllArtifactPower=function(){var e=0;for(var t in n.default.ImbaConf)e+=this.getNewArtifactPower(+t);return e},t.prototype.getArtifactIndexById=function(e){for(var t in n.default.ImbaConf)if(n.default.ImbaConf[t].id==e)return n.default.ImbaConf[t].index;return 0},t.prototype.getNewArtifactBy=function(e){var t=0;if(!n.default.ImbaConf[e])return null;if(t=n.default.ImbaConf[e].id,!this.listArtifacts[t]){var i=new s.default;i.id=t,i.record=0,this.listArtifacts[t]=i}return this.listArtifacts[t]},t.prototype.getMaxIndex=function(){if(!this.maxIndex){var e=1,t=n.default.ImbaConf;for(var i in t)e=Math.max(t[i].index,e);this.maxIndex=e}return this.maxIndex},t.prototype.getConfById=function(e){var t=n.default.ImbaConf;for(var i in t)if(t[i].id==e)return t[i]},t.prototype.showRedPoint=function(){for(var e=this.getMaxIndex(),t=1;t<=e;t++){var i=n.default.ImbaConf[t],a=this.getNewArtifactBy(t);if(!a.open){var o=i.jigsawId.length;if(Math.pow(2,o)-1==a.record)return!0;if(a.exitRecord!=a.record)return!0}}return!1},t.prototype.getNextChapterId=function(){for(var e=this.getMaxIndex(),t=1;t<=e;t++)this.getNewArtifactBy(t).getNextChipId()},t.prototype.getConfByChipId=function(e){var t=n.default.ImbaConf;for(var i in t)if(-1!=t[i].jigsawId.indexOf(e))return t[i];return null},t.prototype.setGuide=function(){this.showGuide=l.default.getTimer(),this.postGuide(),c.default.ins().remove(this.guideEnd,this),c.default.ins().doTimer(3e3,1,this.guideEnd,this)},t.prototype.guideEnd=function(){t.ins().showGuide=-3e3,t.ins().postGuide()},t.prototype.postGuide=function(){},t.prototype.postArtifactInit=function(e){for(var t=e.readInt(),i=0;i<t;i++){var n=new r.default;n.parser(e),this.artifacts[n.id]=n}},t.prototype.postArtifactUpdate=function(e){var t=e.readBoolean();if(t){var i=e.readInt(),n=e.readShort();this.artifacts[i].rank=n}else d.default.ins().showTips("\u4e0d\u6ee1\u8db3\u6761\u4ef6");return t},t.prototype.sendRank=function(e){var t=this.getBytes(2);t.writeInt(e),this.sendToServer(t)},t.prototype.postNewArtifactInit=function(e){var t=e.readUnsignedShort();this.artifactsOpenDic={};for(var i=0;i<t;i++){var n=new s.default;n.id=e.readInt(),n.record=e.readInt(),n.open=0!=e.readByte(),n.open?(n.exitRecord=Math.pow(2,32)-1,1==t&&1==this.openHeji&&(this.openHeji=2)):n.exitRecord=e.readInt(),this.listArtifacts[n.id]=n,n.open&&(this.artifactsOpenDic[n.id]=n)}this.setImbaBuffDic()},t.prototype.setImbaBuffDic=function(){if(!this.imbaBuffDic){this.imbaBuffDic={};var e=n.default.ImbaSkillReviseConfig;for(var t in e)this.imbaBuffDic[e[t].skill]||(this.imbaBuffDic[e[t].skill]={}),this.imbaBuffDic[e[t].skill][e[t].imba_id]||(this.imbaBuffDic[e[t].skill][e[t].imba_id]={}),this.imbaBuffDic[e[t].skill][e[t].imba_id]=e[t]}if(f.default.getObjectLength(this.artifactsOpenDic))for(var i in this.imbaSkillDic={},this.imbaBuffDic)for(var a in this.imbaBuffDic[i])if(this.artifactsOpenDic[a])for(var o in this.imbaSkillDic[i]||(this.imbaSkillDic[i]=new p.default),this.imbaSkillDic[i])-1!=this.attArr.indexOf(o)&&this.imbaBuffDic[i][a][o]&&("selfEff"==o?(this.imbaSkillDic[i][o]||(this.imbaSkillDic[i][o]=[]),this.imbaSkillDic[i][o].push(this.imbaBuffDic[i][a][o][0])):"args"==o?this.imbaSkillDic[i][o]=this.imbaBuffDic[i][a][o]:this.imbaSkillDic[i][o]+=this.imbaBuffDic[i][a][o])},t.prototype.getReviseBySkill=function(e){if(!this.imbaSkillDic)return null;var t=Math.floor(e/1e3);return this.imbaSkillDic[t]?this.imbaSkillDic[t]:null},t.prototype.postNewArtifactUpdate=function(e){var t=e.readInt(),i=this.listArtifacts[t];if(i){var n=i.exitRecord;i.exitRecord=e.readInt(),i.record=e.readInt();for(var a=i.exitRecord-n,o=this.getConfById(t),r=0;r<o.jigsawId.length;r++){if(a>>r&1)(new h.default).configID=o.jigsawId[r]}}else{var u=new s.default;u.id=t,u.exitRecord=e.readInt(),u.record=e.readInt(),this.listArtifacts[t]=u}},t.prototype.sendOpenChip=function(e){var t=this.getBytes(4);t.writeInt(e),this.sendToServer(t)},t.prototype.openArtifact=function(e){var t=this.getBytes(3);t.writeInt(e),this.sendToServer(t),0==this.openHeji&&(this.openHeji=1)},t}(o.default);i.default=y,window.GameSystem.push(y.ins.bind(y)),cc._RF.pop()},{"../../../core/base/AttributeData":"AttributeData","../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/CommonUtils":"CommonUtils","../../Utils/EgretUtils":"EgretUtils","../../base/BaseSystem":"BaseSystem","../../config/ImbaSkillReviseConfig":"ImbaSkillReviseConfig","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../bag/ItemData":"ItemData","../tips/UserTips":"UserTips","./ArtifactData":"ArtifactData","./NewArtifactData":"NewArtifactData"}],AttrPowerConfig:[function(e,t,i){"use strict";cc._RF.push(t,"95796/JaNpFko8hnDFED/eO","AttrPowerConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],AttributeData:[function(e,t,i){"use strict";cc._RF.push(t,"f644aKRIrlPYZImOeC1SNhH","AttributeData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./AttributeType"),a=e("../../game/module/gamescene/const/ExAttributeType"),o=e("../../game/manager/GlobalConfig"),r=e("../../game/module/gamescene/const/EquipAddAttrType"),s=e("../utils/StringUtils"),u=e("../utils/Algorithm"),l=e("../../game/module/vip/UserVip"),c=function(){function e(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this.type=e,this.value=t}return e.AttrAddition=function(t,i){if(!t||t.length<=0)return i?i.concat():null;if(!i||i.length<=0)return t?t.concat():null;for(var n=t.concat(i),a=[],o=n.length,r=new Object,s=0;s<o;s++)void 0==r[n[s].type]&&(r[n[s].type]=0),r[n[s].type]+=n[s].value;for(var u in r)a.push(new e(+u,+r[u]));return a},e.AttrDel=function(t,i){for(var n=[],a=0;a<t.length;a++){var o=new e;o.type=0!=t[a].type?t[a].type:i[a].type,o.value=t[a].value-i[a].value,n.push(o)}return n},e.AttrMultiply=function(t,i){for(var n=[],a=0;a<t.length;a++){var o=new e;o.type=0!=t[a].type?t[a].type:i[a].type,o.value=t[a].value*(1+i[a].value/1e4),n.push(o)}return n},e.transformAttr=function(t){var i=[];for(var n in t){var a=new e;a.type=t[n].type,a.value=t[n].value,i.push(a)}for(var o=0;o<i.length-1;o++)for(var r=0;r<i.length-o-1;r++)if(i[r]<i[r+1]){var s=i[r+1];i[r+1]=i[r],i[r]=s}return i},e.getAttStr=function(t,i,a,o,r,s,u,l){void 0===i&&(i=4),void 0===a&&(a=1),void 0===o&&(o="+"),void 0===r&&(r=!1),void 0===s&&(s=!0);var c="",d=0;if(t instanceof e)return this.getAttStrByType(t,i,o,r,s);if(!(t instanceof Array)){var f=[];for(var p in this.translate)if(!isNaN(t[p])){var h=new e;h.type=parseInt(this.translate[p]),h.value=t[p],f.push(h)}return this.getAttStr(f,i,a,o,r)}for(var g=t,y=g.length-1,v=0;v<g.length;v++)if(0!=g[v].type)if(g[v].type!=n.AttributeType.atHpEx&&g[v].type!=n.AttributeType.atAtkEx&&g[v].type!=n.AttributeType.atDamageReduction&&g[v].type!=n.AttributeType.atDefEx&&g[v].type!=n.AttributeType.atResEx){if(c+=this.getAttStrByType(g[v],i,o,r,s),u&&u.attr_add&&(c+="+"+Math.floor(g[v].value*(u.attr_add/100))),l&&(c+=l),v<y+d)for(var m=0;m<a;m++)c+="\n"}else d=-1;if(d<0){var b=c.lastIndexOf("\n");c=c.substring(0,b)}return c},e.getAttStr1=function(e,t){for(var i="",n=0;n<e.length;n++)i+=this.getAttStrByType1(e[n],t),n<e.length-1&&(i+=s.default.repeatStr("\n",t.emptyLine+1));return i},e.getAttStrByType1=function(t,i){var a=e.getAttrStrByType(t.type),o=t.type,r=(i.sign,"");r=o==n.AttributeType.atCrit?t.value/100+"%":o==n.AttributeType.atTogetherHolyDamege||o==n.AttributeType.atHolyDamege?t.value.toString():o>=n.AttributeType.atHpEx?o==n.AttributeType.atStunTime?t.value/1e3+"\u79d2":o==n.AttributeType.atAtkEx?t.value/100+"%":o==n.AttributeType.atCritHurt?(t.value>>0)+"":(t.value/100>>0)+"%":t.value.toString();var u=s.default.addColor(a+i.sign,i.wordColor);return i.isShowAttName&&(u=s.default.complementByChar(u,i.intervals)),u+s.default.addColor(r,i.attrColor)},e.getAttStrByType=function(t,i,a,o,r){void 0===i&&(i=4),void 0===a&&(a="+"),void 0===o&&(o=!0),void 0===r&&(r=!0);var u="";switch(r&&(u=o?s.default.complementByChar(e.getAttrStrByType(t.type),8*i):e.getAttrStrByType(t.type)),t.type){case n.AttributeType.atCrit:case n.AttributeType.atZhuiMingPro:u+=a+t.value/100+"%";break;case n.AttributeType.atStunTime:u+=a+t.value/1e3+"\u79d2";break;case n.AttributeType.atJob1HpEx:case n.AttributeType.atJob2HpEx:case n.AttributeType.atJob3HpEx:case n.AttributeType.atHp:case n.AttributeType.atMp:case n.AttributeType.atMaxHp:case n.AttributeType.atMaxMp:case n.AttributeType.atAttack:case n.AttributeType.atDef:case n.AttributeType.atRes:case n.AttributeType.atTough:case n.AttributeType.atMoveSpeed:case n.AttributeType.atAttackSpeed:case n.AttributeType.maxNeiGong:case n.AttributeType.atNeiGongRestore:case n.AttributeType.atJob1AtkEx:case n.AttributeType.atJob2AtkEx:case n.AttributeType.atJob3AtkEx:case n.AttributeType.atJob1DefEx:case n.AttributeType.atJob2DefEx:case n.AttributeType.atJob3DefEx:case n.AttributeType.atJob1ResEx:case n.AttributeType.atJob2ResEx:case n.AttributeType.atJob3ResEx:case n.AttributeType.atHolyDamege:case n.AttributeType.atTogetherHolyDamege:case n.AttributeType.atZhuiMingVal:case n.AttributeType.atCritHurt:case n.AttributeType.atHuiXinDamage:case n.AttributeType.atDeadLyHurt:case n.AttributeType.atDeadLyHurtResist:case n.AttributeType.atCritHurtResist:case n.AttributeType.atHearthDamege:u+=a+t.value;break;default:u+=a+(t.value/100).toFixed(1)+"%"}return t.type==n.AttributeType.atYuPeiDeterDam&&(u="|C:0xFF0000&T:"+u+"|"),u},e.getExtAttStrByType=function(t,i,n,o,r){void 0===i&&(i=4),void 0===n&&(n="+"),void 0===o&&(o=!1),void 0===r&&(r=!0);var u="";return r&&(u=s.default.complementByChar(e.getExtAttrStrByType(t.type),8*i)),t.type==a.ExAttributeType.eatGodBlessRate||t.type==a.ExAttributeType.eatGodBlessProbability||t.type==a.ExAttributeType.eatAttackAddHpProbability||t.type==a.ExAttributeType.eatDeathCurseProbability||t.type==a.ExAttributeType.eatAddWarriorDamageInc||t.type==a.ExAttributeType.eatAddMageDamageInc||t.type==a.ExAttributeType.eatAddTaoistDamageInc||t.type==a.ExAttributeType.eatAddToTaoistDamageInc||t.type==a.ExAttributeType.eatSubWarriorDamageInc||t.type==a.ExAttributeType.eatSubMageDamageInc||t.type==a.ExAttributeType.eatSubTaoistDamageInc||t.type==a.ExAttributeType.eatTogetherHitFree||t.type==a.ExAttributeType.eatMiss||t.type==a.ExAttributeType.eatTogetherHitMonDamageInc||t.type==a.ExAttributeType.eatTogetherHitRoleDamageInc||t.type==a.ExAttributeType.eatAddToWarriorDamageInc||t.type==a.ExAttributeType.eatAddToMageDamageInc||t.type==a.ExAttributeType.eatAddToMageDamageInc||t.type==a.ExAttributeType.eatDeathCurseDamageIncrease?u+=n+t.value/100+"%":t.type==a.ExAttributeType.eatDeathCurseTime?u+=n+t.value/1e3+"\u79d2":t.type==a.ExAttributeType.eatIgnoreReflect?u+="":u+=n+t.value,u},e.inserteBlank=function(e,t,i){void 0===i&&(i=1);for(var n=e.length,a="";t--;)a+=" ";var o="";switch(i){case 0:o=a+e;break;case 1:o=e.slice(0,n/2)+a+e.slice(n/2);break;case 2:o=e+a}return o},e.getAttrInfoByItemData=function(t){var i=o.default.EquipConfig[t.configID],n="",a=0;for(var r in this.translate)if(!(i[r]<=0))for(var s=0;s<t.att.length;s++)a=t.att[s].type,this.translate[r]==a&&(n+=e.getAttrStrByType(a)+": ",n+=i[r]+" +"+t.att[s].value+"\n");return n},e.getAttrStrByType=function(e){var t="";switch(e){case n.AttributeType.atHp:t="\u5f53\u524d\u751f\u547d";break;case n.AttributeType.atMp:t="\u5f53\u524d\u9b54\u6cd5";break;case n.AttributeType.atMaxHp:t="\u751f\u547d";break;case n.AttributeType.atMaxMp:t="\u9b54\u6cd5";break;case n.AttributeType.atAttack:t="\u653b\u51fb";break;case n.AttributeType.atDef:t="\u7269\u9632";break;case n.AttributeType.atRes:t="\u9b54\u9632";break;case n.AttributeType.atCrit:t="\u66b4\u51fb";break;case n.AttributeType.atTough:t="\u6297\u66b4";break;case n.AttributeType.atMoveSpeed:t="\u79fb\u901f";break;case n.AttributeType.atAttackSpeed:t="\u653b\u901f";break;case n.AttributeType.atHpEx:t="\u751f\u547d\u52a0\u6210";break;case n.AttributeType.atAtkEx:t="\u653b\u51fb\u52a0\u6210";break;case n.AttributeType.atStunPower:t="\u9ebb\u75f9\u51e0\u7387";break;case n.AttributeType.atStunRes:t="\u9ebb\u75f9\u62b5\u6297";break;case n.AttributeType.atStunTime:t="\u9ebb\u75f9\u65f6\u95f4";break;case n.AttributeType.atDamageReduction:t="\u4f24\u5bb3\u51cf\u514d";break;case n.AttributeType.atCritHurt:t="\u66b4\u51fb\u4f24\u5bb3";break;case n.AttributeType.atCritEnhance:t="\u66b4\u51fb\u4f24\u5bb3\u52a0\u5f3a";break;case n.AttributeType.atRoleDamageEnhance:t="[\u5168\u6012]\u5bf9\u6240\u6709\u804c\u4e1a\u4f24\u5bb3\u589e\u52a0";break;case n.AttributeType.atRoleDamageReduction:t="[\u5168\u5236]\u53d7\u5230\u6240\u6709\u804c\u4e1a\u4f24\u5bb3\u51cf\u5c11";break;case n.AttributeType.atDefEx:t="\u7269\u7406\u9632\u5fa1\u767e\u5206\u6bd4";break;case n.AttributeType.atResEx:t="\u9b54\u6cd5\u9632\u5fa1\u767e\u5206\u6bd4";break;case n.AttributeType.atJob1HpEx:t="\u6218\u58eb\u751f\u547d";break;case n.AttributeType.atJob2HpEx:t="\u6cd5\u5e08\u751f\u547d";break;case n.AttributeType.atJob3HpEx:t="\u9053\u58eb\u751f\u547d";break;case n.AttributeType.atNeiGongRestore:t="\u95f4\u96943\u79d2\u6062\u590d\u5185\u529f\u503c";break;case n.AttributeType.cruNeiGong:t="\u5f53\u524d\u5185\u529f\u503c";break;case n.AttributeType.maxNeiGong:t="\u5185\u529f\u503c";break;case n.AttributeType.neigongAbsorbHurt:t="\u4f24\u5bb3\u5438\u6536";break;case n.AttributeType.atJob1AtkEx:t="\u6218\u58eb\u653b\u51fb";break;case n.AttributeType.atJob2AtkEx:t="\u6cd5\u5e08\u653b\u51fb";break;case n.AttributeType.atJob3AtkEx:t="\u9053\u58eb\u653b\u51fb";break;case n.AttributeType.atJob1DefEx:t="\u6218\u58eb\u9632\u5fa1";break;case n.AttributeType.atJob2DefEx:t="\u6cd5\u5e08\u9632\u5fa1";break;case n.AttributeType.atJob3DefEx:t="\u9053\u58eb\u9632\u5fa1";break;case n.AttributeType.atJob1ResEx:t="\u6218\u58eb\u9b54\u9632";break;case n.AttributeType.atJob2ResEx:t="\u6cd5\u5e08\u9b54\u9632";break;case n.AttributeType.atJob3ResEx:t="\u9053\u58eb\u9b54\u9632";break;case n.AttributeType.atYuPeiDeterDam:t="\u5a01\u6151";break;case n.AttributeType.atCritEnhanceResist:t="\u66b4\u51fb\u4f24\u5bb3\u51cf\u514d";break;case n.AttributeType.atHolyDamege:t="\u795e\u5723\u4f24\u5bb3";break;case n.AttributeType.atHolyMaster:t="\u795e\u5723\u7cbe\u901a";break;case n.AttributeType.atTogetherHolyDamege:t="\u5408\u51fb\u795e\u5723\u4f24\u5bb3";break;case n.AttributeType.atZhuiMingVal:t="\u65e0\u5f71\u4f24\u5bb3";break;case n.AttributeType.atHuiXinDamage:t="\u66b4\u51fb\u5f3a\u5ea6";break;case n.AttributeType.atNeiGongEx:t="\u5185\u529f\u52a0\u6210";break;case n.AttributeType.atDeadLyPro:t="\u81f4\u547d\u4e00\u51fb\u7387";break;case n.AttributeType.atDeadLyMaster:t="\u81f4\u547d\u4e00\u51fb\u4f24\u5bb3";break;case n.AttributeType.atDeadLyResist:t="\u81f4\u547d\u4e00\u51fb\u4f24\u5bb3\u51cf\u514d";break;case n.AttributeType.atBladeMailPer:t="\u53cd\u4f24";break;case n.AttributeType.atDefPen:t="\u7269\u9632\u7a7f\u900f";break;case n.AttributeType.atResPen:t="\u9b54\u9632\u7a7f\u900f";break;case n.AttributeType.atDeadLyHurt:t="\u81f4\u547d\u4e00\u51fb\u4f24\u5bb3";break;case n.AttributeType.atDeadLyHurtResist:t="\u81f4\u547d\u4e00\u51fb\u51cf\u514d";break;case n.AttributeType.atCritHurtResist:t="\u66b4\u51fb\u4f24\u5bb3\u51cf\u514d";break;case n.AttributeType.atHearthDamege:t="\u593a\u547d\u8ffd\u4f24"}return t},e.getExtAttrStrByType=function(e){var t="";switch(e){case a.ExAttributeType.eatReflectProbability:t="\u53cd\u4f24\u6982\u7387";break;case a.ExAttributeType.eatReflectRate:t="\u53cd\u4f24\u6bd4\u7387";break;case a.ExAttributeType.eatIgnoreReflect:t="\u653b\u51fb\u65e0\u89c6\u53cd\u4f24\u6548\u679c\uff0c\u589e\u52a0\u81ea\u8eab2%\u653b\u51fb\u529b";break;case a.ExAttributeType.eatGodBlessProbability:t="\u795e\u4f51\u89e6\u53d1 \u6982\u7387";break;case a.ExAttributeType.eatGodBlessRate:t="\u795e\u4f51\u590d\u6d3b\u4e07\u5206\u6bd4";break;case a.ExAttributeType.eatDeathCurseProbability:t="\u6b7b\u5492\u89e6\u53d1\u6982\u7387";break;case a.ExAttributeType.eatDeathCurseDamageIncrease:t="\u6b7b\u5492\u589e\u52a0\u4f24\u5bb3";break;case a.ExAttributeType.eatDeathCurseTime:t="\u6b7b\u5492\u6548\u679c\u5c55\u793a\u65f6\u95f4";break;case a.ExAttributeType.eatAllCrit:t="\u66b4\u51fb\u7387";break;case a.ExAttributeType.eatAllCritTime:t="AllCrit\u66b4\u51fb\u89e6\u53d1\u540e\uff0c\u6301\u7eed\u7684\u65f6\u95f4, \u5355\u4f4d:\u79d2";break;case a.ExAttributeType.eatBeHitTimesDodge:t="\u53d7\u5230X\u6b21\u653b\u51fb\u65f6\u5fc5\u5b9a\u95ea\u907f";break;case a.ExAttributeType.eatAttackTimesCrit:t="\u653b\u51fbX\u6b21\u5fc5\u5b9a\u4ea7\u751f\u66b4\u51fb\uff08\u66b4\u51fb\uff09";break;case a.ExAttributeType.eatAttackAddHpProbability:t="\u6cbb\u7597\u6212\u6307,\u653b\u51fb\u65f6\u5019\u8865\u8840\u7684\u6982\u7387";break;case a.ExAttributeType.eatAttackAddHpValue:t="\u6cbb\u7597\u6212\u6307,\u653b\u51fb\u7684\u65f6\u5019\u8865\u8840\u6570";break;case a.ExAttributeType.eatAddToWarriorDamageInc:t="[\u6012\u6218]\u5bf9\u6218\u58eb\u4f24\u5bb3\u589e\u52a0";break;case a.ExAttributeType.eatAddToMageDamageInc:t="[\u6012\u6cd5]\u5bf9\u6cd5\u5e08\u4f24\u5bb3\u589e\u52a0";break;case a.ExAttributeType.eatAddToTaoistDamageInc:t="[\u6012\u9053]\u5bf9\u9053\u58eb\u4f24\u5bb3\u589e\u52a0";break;case a.ExAttributeType.eatSubWarriorDamageInc:t="[\u5236\u6218]\u53d7\u5230\u6218\u58eb\u4f24\u5bb3\u51cf\u5c11";break;case a.ExAttributeType.eatSubMageDamageInc:t="[\u5236\u6cd5]\u53d7\u5230\u6cd5\u5e08\u4f24\u5bb3\u51cf\u5c11";break;case a.ExAttributeType.eatSubTaoistDamageInc:t="[\u5236\u9053]\u53d7\u5230\u9053\u58eb\u4f24\u5bb3\u51cf\u5c11";break;case a.ExAttributeType.eatTogetherHitFree:t="\u5408\u51fb\u53d7\u5230\u7684\u4f24\u5bb3\u51cf\u5c11";break;case a.ExAttributeType.eatTogetherHitMonDamageInc:t="\u5408\u51fb\u6280\u80fd\u5bf9\u602a\u7269\u4f24\u5bb3";break;case a.ExAttributeType.eatTogetherHitRoleDamageInc:t="\u5408\u51fb\u6280\u80fd\u5bf9\u73a9\u5bb6\u4f24\u5bb3";break;case a.ExAttributeType.eatTogetherHitCdSub:t="\u6012\u6c14\u6062\u590d\u901f\u5ea6";break;case a.ExAttributeType.eatAdditionalHarm:t="\u4f24\u5bb3\u589e\u52a0\u56fa\u5b9a\u503c";break;case a.ExAttributeType.eatReductionHarm:t="\u4f24\u5bb3\u51cf\u514d\u56fa\u5b9a\u503c";break;case a.ExAttributeType.eatMiss:t="\u95ea\u907f";break;case a.ExAttributeType.eatBaseSkillExArg:t="\u57fa\u7840\u53ca\u80fd\u989d\u5916\u7cfb\u6570\u52a0\u6210";break;case a.ExAttributeType.eatMultipleCrit:t="\u591a\u91cd\u66b4\u51fb\u51e0\u7387";break;case a.ExAttributeType.eatMultipleCritCoeff:t="\u5e78\u8fd0\u4e00\u51fb\u7684\u4f24\u5bb3\u52a0\u6df1";break;case a.ExAttributeType.atMultipleCritHurt:t="\u5e78\u8fd0\u4e00\u51fb\u7684\u56fa\u5b9a\u4f24\u5bb3\u52a0\u6df1";break;case a.ExAttributeType.eatAddWarriorDamageInc:t="\u6218\u58eb\u4f24\u5bb3";break;case a.ExAttributeType.eatAddMageDamageInc:t="\u6cd5\u5e08\u4f24\u5bb3";break;case a.ExAttributeType.eatAddTaoistDamageInc:t="\u9053\u58eb\u4f24\u5bb3";break;case a.ExAttributeType.eatMultipleCritTime:t="\u5e78\u8fd0\u4e00\u51fb\u7684\u51b7\u5374\u65f6\u95f4";break;case a.ExAttributeType.eatAttackAddHpTime:t="\u6cbb\u7597\u6212\u6307,\u653b\u51fb\u7684\u65f6\u5019\u8865\u8840\u7684\u51b7\u5374\u65f6\u95f4";break;case a.ExAttributeType.eatHit:t="\u547d\u4e2d"}return t},e.getExAttrNameByAttrbute=function(t,i,n,o){void 0===i&&(i=!1),void 0===n&&(n="\uff1a"),void 0===o&&(o=void 0);var r=e.getExtAttrStrByType(t.type),s="";if(i)switch(t.type){case a.ExAttributeType.eatAddWarriorDamageInc:case a.ExAttributeType.eatAddMageDamageInc:case a.ExAttributeType.eatAddTaoistDamageInc:case a.ExAttributeType.eatSubWarriorDamageInc:case a.ExAttributeType.eatSubMageDamageInc:case a.ExAttributeType.eatSubTaoistDamageInc:case a.ExAttributeType.eatTogetherHitFree:case a.ExAttributeType.eatTogetherHitMonDamageInc:case a.ExAttributeType.eatTogetherHitRoleDamageInc:case a.ExAttributeType.eatAllCrit:case a.ExAttributeType.eatHit:case a.ExAttributeType.eatMiss:s=t.value/100+"%";break;default:s+=t.value}return void 0!=o?r=""+r+n+"|C:"+o+"&T:"+s+"|":r+=n+s,r},e.getEEquipAttrStrByType=function(e){var t="";switch(e){case r.EquipAddAttrType.EquipSlotType_Weapon:t="\u6b66\u5668\u57fa\u7840\u5c5e\u6027";break;case r.EquipAddAttrType.EquipSlotType_Helmet:t="\u5934\u76d4\u57fa\u7840\u5c5e\u6027";break;case r.EquipAddAttrType.EquipSlotType_Coat:t="\u8863\u670d\u57fa\u7840\u5c5e\u6027";break;case r.EquipAddAttrType.EquipSlotType_Necklace:t="\u9879\u94fe\u57fa\u7840\u5c5e\u6027";break;case r.EquipAddAttrType.EquipSlotType_Accessory1:t="\u624b\u956f\u57fa\u7840\u5c5e\u6027";break;case r.EquipAddAttrType.EquipSlotType_Accessory2:t="\u8170\u5e26\u57fa\u7840\u5c5e\u6027";break;case r.EquipAddAttrType.EquipSlotType_Ring1:t="\u6212\u6307\u57fa\u7840\u5c5e\u6027";break;case r.EquipAddAttrType.EquipSlotType_Ring2:t="\u978b\u5b50\u57fa\u7840\u5c5e\u6027"}return t},e.getAttrStrAdd=function(t,i){var n=[];if(l.default.ins().lv>=i){var a=o.default.VipConfig[i].attrAddition.percent;a=a||0,t.forEach(function(t){var i=new e;i.type=t.type,i.value=t.value*(100+a)/100>>0,n.push(i)})}else n=t;return n},e.getAttrStarAdd=function(t,i){var n=[];return t.forEach(function(t){var a=new e;a.type=t.type,a.value=t.value*i>>0,n.push(a)}),n},e.getAttrNameByAttrbute=function(t,i,a,o,r){void 0===i&&(i=!1),void 0===a&&(a="\uff1a"),void 0===o&&(o=!1),void 0===r&&(r=void 0);var s=e.getAttrStrByType(t.type);o&&(s=e.inserteBlank(s,7));var u="";if(i)switch(t.type){case n.AttributeType.atCrit:case n.AttributeType.atTough:u=t.value/100+"%";break;default:u=t.value+""}return void 0!=r?s=""+s+a+"|C:"+r+"&T:"+u+"|":s+=a+u,s},e.getPercentAttr=function(t,i){for(var n=[],a=0;a<t.length;a++){var o=new e;o.type=t[a].type,o.value=Math.floor(t[a].value*(1+i)),n.push(o)}return n},e.getPowerBy=function(e){if(!e)return 0;return 0},e.sortAttribute=function(e,t){return u.default.sortAsc(e.type,t.type)},e.copyAttrbute=function(t){var i=new e;return i.type=t.type,i.value=t.value,i},e.addAttrToList=function(t,i){if(!t[i.type]){var n=new e;n.type=i.type,n.value=0,t[i.type]=n}t[i.type].value+=i.value},e.FILTER_EXTDATA_ID=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,35,37,38,39],e.FILTER_BASE_DATA_ID=[18,20],e.translate={hp:n.AttributeType.atMaxHp,atk:n.AttributeType.atAttack,def:n.AttributeType.atDef,res:n.AttributeType.atRes,crit:n.AttributeType.atCrit,tough:n.AttributeType.atTough},e.exRelate={2:n.AttributeType.atHpEx,4:n.AttributeType.atAtkEx,5:n.AttributeType.atDefEx,6:n.AttributeType.atResEx},e}();i.default=c,cc._RF.pop()},{"../../game/manager/GlobalConfig":"GlobalConfig","../../game/module/gamescene/const/EquipAddAttrType":"EquipAddAttrType","../../game/module/gamescene/const/ExAttributeType":"ExAttributeType","../../game/module/vip/UserVip":"UserVip","../utils/Algorithm":"Algorithm","../utils/StringUtils":"StringUtils","./AttributeType":"AttributeType"}],AttributeFormat:[function(e,t,i){"use strict";cc._RF.push(t,"e8bfclioKRAuq5bFAStoMN6","AttributeFormat"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.intervals=4,this.emptyLine=0,this.sign="+",this.spaceCount=0,this.isShowAttName=1,this.wordColor=e.DEFAULT_COLOR,this.attrColor=e.DEFAULT_COLOR}return e.getFormat=function(t,i,n,a,o,r,s){void 0===t&&(t=4),void 0===i&&(i=0),void 0===n&&(n="+"),void 0===a&&(a=0),void 0===o&&(o=1),void 0===r&&(r=this.DEFAULT_COLOR),void 0===s&&(s=this.DEFAULT_COLOR);var u=new e;return u.intervals=t,u.emptyLine=i,u.sign=n,u.spaceCount=a,u.isShowAttName=o,u.wordColor=r,u.attrColor=s,u},e.FORMAT_1=function(){return this.getFormat(0,0,"\uff1a")},e.FORMAT_2=function(){var e=this.FORMAT_1();return e.attrColor=3532333,e},e.DEFAULT_COLOR=14668213,e}();i.default=n,cc._RF.pop()},{}],AttributeType:[function(e,t,i){"use strict";cc._RF.push(t,"9d01aVMBjpEJblaObqlp44I","AttributeType"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.P_ID=0]="P_ID",e[e.P_POS_X=1]="P_POS_X",e[e.P_POS_Y=2]="P_POS_Y",e[e.P_MODELID=3]="P_MODELID",e[e.P_ICON=4]="P_ICON",e[e.P_DIR=5]="P_DIR",e[e.P_MAX_ENTITY=6]="P_MAX_ENTITY"}(i.enPropEntity||(i.enPropEntity={})),function(e){e[e.P_LEVEL=6]="P_LEVEL",e[e.P_HP=7]="P_HP",e[e.P_MP=8]="P_MP",e[e.P_SPEED=9]="P_SPEED",e[e.P_MAXHP=10]="P_MAXHP",e[e.P_MAXMP=11]="P_MAXMP",e[e.P_OUT_ATTACK=12]="P_OUT_ATTACK",e[e.P_OUT_DEFENCE=13]="P_OUT_DEFENCE",e[e.P_DEFCRITICALSTRIKES=14]="P_DEFCRITICALSTRIKES",e[e.P_ALL_ATTACK=15]="P_ALL_ATTACK",e[e.P_SUB_DEF=16]="P_SUB_DEF",e[e.P_IN_ATTACK=17]="P_IN_ATTACK",e[e.P_IN_DEFENCE=18]="P_IN_DEFENCE",e[e.P_CRITICALSTRIKES=19]="P_CRITICALSTRIKES",e[e.P_DODGERATE=20]="P_DODGERATE",e[e.P_HITRATE=21]="P_HITRATE",e[e.P_ATTACK_ADD=22]="P_ATTACK_ADD",e[e.P_HP_RENEW=23]="P_HP_RENEW",e[e.P_MP_RENEW=24]="P_MP_RENEW",e[e.P_ATTACK_SPEED=25]="P_ATTACK_SPEED",e[e.P_IN_ATTACK_DAMAGE_ADD=26]="P_IN_ATTACK_DAMAGE_ADD",e[e.P_OUT_ATTACK_DAMAGE_ADD=27]="P_OUT_ATTACK_DAMAGE_ADD",e[e.P_THUNDER_ATTACK=28]="P_THUNDER_ATTACK",e[e.P_THUNDER_DEFENCE=29]="P_THUNDER_DEFENCE",e[e.P_POISON_ATTACK=30]="P_POISON_ATTACK",e[e.P_POISON_DEFENCE=31]="P_POISON_DEFENCE",e[e.P_ICE_ATTACK=32]="P_ICE_ATTACK",e[e.P_ICE_DEFENCE=33]="P_ICE_DEFENCE",e[e.P_FIRE_ATTACK=34]="P_FIRE_ATTACK",e[e.P_FIRE_DEFENCE=35]="P_FIRE_DEFENCE",e[e.P_STATE=36]="P_STATE",e[e.P_BASE_MAXHP=37]="P_BASE_MAXHP",e[e.P_BASE_MAXMP=38]="P_BASE_MAXMP",e[e.P_STAND_POINT=39]="P_STAND_POINT",e[e.P_MAX_ANIMAL=40]="P_MAX_ANIMAL"}(i.enPropAnimal||(i.enPropAnimal={})),function(e){e[e.P_WEAPON=40]="P_WEAPON",e[e.P_MOUNT=41]="P_MOUNT",e[e.P_DIZZY_RATE11=42]="P_DIZZY_RATE11",e[e.P_DIZZY_TIME1=43]="P_DIZZY_TIME1",e[e.P_HP_STORE=44]="P_HP_STORE",e[e.P_MP_STORE=45]="P_MP_STORE",e[e.P_SPIRIT=46]="P_SPIRIT",e[e.P_PK_MOD=47]="P_PK_MOD",e[e.P_STRONG_EFFECT=48]="P_STRONG_EFFECT",e[e.P_WING=49]="P_WING",e[e.P_STAGE_EFFECT=50]="P_STAGE_EFFECT",e[e.P_PET_HP_STORE=51]="P_PET_HP_STORE",e[e.PROP_ACTOR_XIUWEI_RENEW_RATE=52]="PROP_ACTOR_XIUWEI_RENEW_RATE",e[e.P_SEX=53]="P_SEX",e[e.P_VOCATION=54]="P_VOCATION",e[e.P_EXP=55]="P_EXP",e[e.P_PK_VALUE=57]="P_PK_VALUE",e[e.P_BAG_GRID=58]="P_BAG_GRID",e[e.P_WEEK_CHARM=59]="P_WEEK_CHARM",e[e.P_BIND_COIN=60]="P_BIND_COIN",e[e.P_COIN=61]="P_COIN",e[e.P_BIND_YB=62]="P_BIND_YB",e[e.P_YB=63]="P_YB",e[e.P_SHENGWANG=64]="P_SHENGWANG",e[e.P_CHARM=65]="P_CHARM",e[e.P_SPIRIT_SLOT=66]="P_SPIRIT_SLOT",e[e.P_RENOWN=67]="P_RENOWN",e[e.P_GUILD_ID=68]="P_GUILD_ID",e[e.P_TEAM_ID=69]="P_TEAM_ID",e[e.P_SOCIAL=70]="P_SOCIAL",e[e.P_GUILD_EXP=71]="P_GUILD_EXP",e[e.P_LUCKY=72]="P_LUCKY",e[e.P_SYS_OPEN=73]="P_SYS_OPEN",e[e.P_ROOT_EXP_POWER=74]="P_ROOT_EXP_POWER",e[e.P_CHANGE_MODEL=75]="P_CHANGE_MODEL",e[e.PROP_BANGBANGTANG_EXP=76]="PROP_BANGBANGTANG_EXP",e[e.P_GIVE_YB=77]="P_GIVE_YB",e[e.P_CRITICAL_STRIKE=78]="P_CRITICAL_STRIKE",e[e.P_EXP_RATE=79]="P_EXP_RATE",e[e.P_DEPOT_GRID=80]="P_DEPOT_GRID",e[e.P_ANGER=81]="P_ANGER",e[e.P_ROOT_EXP=82]="P_ROOT_EXP",e[e.P_ACHIEVEPOINT=83]="P_ACHIEVEPOINT",e[e.P_ZYCONT=84]="P_ZYCONT",e[e.P_QQ_VIP=85]="P_QQ_VIP",e[e.P_WING_ID=86]="P_WING_ID",e[e.P_WING_SCORE=87]="P_WING_SCORE",e[e.P_PET_SCORE=88]="P_PET_SCORE",e[e.PROP_ACTOR_VIPFLAG=89]="PROP_ACTOR_VIPFLAG",e[e.P_CAMP=90]="P_CAMP",e[e.P_PET_SLOT=91]="P_PET_SLOT",e[e.P_HONOR=92]="P_HONOR",e[e.P_QING_YUAN=93]="P_QING_YUAN",e[e.PROP_ACTOR_DUR_KILLTIMES=94]="PROP_ACTOR_DUR_KILLTIMES",e[e.PROP_ACTOR_BASE_FIGHT=95]="PROP_ACTOR_BASE_FIGHT",e[e.P_FIGHT_VALUE=96]="P_FIGHT_VALUE",e[e.P_MAX_RENOWN=97]="P_MAX_RENOWN",e[e.P_RECHARGE=98]="P_RECHARGE",e[e.P_VIP_LEVEL=99]="P_VIP_LEVEL",e[e.P_BEAST_LEVEL=100]="P_BEAST_LEVEL",e[e.P_FOOT_EFFECT=101]="P_FOOT_EFFECT",e[e.P_EQUIP_SCORE=102]="P_EQUIP_SCORE",e[e.P_HAIR_MODEL=103]="P_HAIR_MODEL",e[e.P_BUBBLE=104]="P_BUBBLE",e[e.P_ACTOR_STATE=105]="P_ACTOR_STATE",e[e.P_JINGJIE_TITLE=106]="P_JINGJIE_TITLE",e[e.P_ZHUMOBI=107]="P_ZHUMOBI",e[e.P_WARSPIRIT=108]="P_WARSPIRIT",e[e.P_GUILDFB_SCORE=109]="P_GUILDFB_SCORE",e[e.P_SYS_OPENEX=110]="P_SYS_OPENEX",e[e.P_MAX_ACTOR=111]="P_MAX_ACTOR"}(i.enPropActor||(i.enPropActor={})),function(e){e[e.atHp=0]="atHp",e[e.atMp=1]="atMp",e[e.atMaxHp=2]="atMaxHp",e[e.atMaxMp=3]="atMaxMp",e[e.atAttack=4]="atAttack",e[e.atDef=5]="atDef",e[e.atRes=6]="atRes",e[e.atCrit=7]="atCrit",e[e.atTough=8]="atTough",e[e.atMoveSpeed=9]="atMoveSpeed",e[e.atAttackSpeed=10]="atAttackSpeed",e[e.atHpEx=11]="atHpEx",e[e.atAtkEx=12]="atAtkEx",e[e.atStunPower=13]="atStunPower",e[e.atStunRes=14]="atStunRes",e[e.atStunTime=15]="atStunTime",e[e.atDamageReduction=16]="atDamageReduction",e[e.atCritHurt=17]="atCritHurt",e[e.atRegeneration=18]="atRegeneration",e[e.atCritEnhance=19]="atCritEnhance",e[e.atPenetrate=20]="atPenetrate",e[e.atRoleDamageEnhance=21]="atRoleDamageEnhance",e[e.atRoleDamageReduction=22]="atRoleDamageReduction",e[e.atDefEx=23]="atDefEx",e[e.atResEx=24]="atResEx",e[e.cruNeiGong=25]="cruNeiGong",e[e.maxNeiGong=26]="maxNeiGong",e[e.neigongAbsorbHurt=27]="neigongAbsorbHurt",e[e.atJob1HpEx=28]="atJob1HpEx",e[e.atJob2HpEx=29]="atJob2HpEx",e[e.atJob3HpEx=30]="atJob3HpEx",e[e.atNeiGongRestore=31]="atNeiGongRestore",e[e.atVamirePro=32]="atVamirePro",e[e.atVamirePen=33]="atVamirePen",e[e.atVamireCd=34]="atVamireCd",e[e.atCursePro=35]="atCursePro",e[e.atCurseCd=36]="atCurseCd",e[e.atAttAddDamPro=37]="atAttAddDamPro",e[e.atAttAddDamVal=38]="atAttAddDamVal",e[e.atBeAttAddHpPro=39]="atBeAttAddHpPro",e[e.atBeAttAddHpVal=40]="atBeAttAddHpVal",e[e.atAttMbAddDamPen=41]="atAttMbAddDamPen",e[e.atHpLtAddBuff=42]="atHpLtAddBuff",e[e.atAttHpLtPenAddDam=43]="atAttHpLtPenAddDam",e[e.atAttHpLtAddDamPen=44]="atAttHpLtAddDamPen",e[e.atJob1AtkEx=45]="atJob1AtkEx",e[e.atJob2AtkEx=46]="atJob2AtkEx",e[e.atJob3AtkEx=47]="atJob3AtkEx",e[e.atJob1DefEx=48]="atJob1DefEx",e[e.atJob2DefEx=49]="atJob2DefEx",e[e.atJob3DefEx=50]="atJob3DefEx",e[e.atJob1ResEx=51]="atJob1ResEx",e[e.atJob2ResEx=52]="atJob2ResEx",e[e.atJob3ResEx=53]="atJob3ResEx",e[e.atAttPerDamPan=54]="atAttPerDamPan",e[e.atYuPeiDeterDam=55]="atYuPeiDeterDam",e[e.atCritEnhanceResist=56]="atCritEnhanceResist",e[e.atHolyDamege=57]="atHolyDamege",e[e.atHolyMaster=58]="atHolyMaster",e[e.atHolyResist=59]="atHolyResist",e[e.atTogetherHolyDamege=60]="atTogetherHolyDamege",e[e.atTogetherHolyMaster=61]="atTogetherHolyMaster",e[e.atTogetherHolyResist=62]="atTogetherHolyResist",e[e.atZhuiMingPro=63]="atZhuiMingPro",e[e.atZhuiMingVal=64]="atZhuiMingVal",e[e.atHuiXinDamage=65]="atHuiXinDamage",e[e.atNeiGongEx=66]="atNeiGongEx",e[e.atDeadLyPro=67]="atDeadLyPro",e[e.atDeadLyMaster=68]="atDeadLyMaster",e[e.atDeadLyResist=69]="atDeadLyResist",e[e.atAddEnemyHp=70]="atAddEnemyHp",e[e.atHurtMyself=71]="atHurtMyself",e[e.atBladeMailPro=72]="atBladeMailPro",e[e.atBladeMailPer=73]="atBladeMailPer",e[e.atDefPen=74]="atDefPen",e[e.atResPen=75]="atResPen",e[e.atDeadLyHurt=76]="atDeadLyHurt",e[e.atDeadLyHurtResist=77]="atDeadLyHurtResist",e[e.atCritHurtResist=78]="atCritHurtResist",e[e.atHunGuPro=79]="atHunGuPro",e[e.atHunGuHurt=80]="atHunGuHurt",e[e.atHunGuCd=81]="atHunGuCd",e[e.atHearthDamege=82]="atHearthDamege",e[e.atHearthHurt=83]="atHearthHurt",e[e.atHearthCount=84]="atHearthCount",e[e.atCount=85]="atCount"}(i.AttributeType||(i.AttributeType={})),cc._RF.pop()},{}],AuctionConfig:[function(e,t,i){"use strict";cc._RF.push(t,"bca36wzQnlE7ZsZBslZQyRq","AuctionConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],AuctionIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"02f0eJLszVMH4Dt1K2phdHh","AuctionIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../zs/UserZs"),o=e("../../auction/Auction"),r=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postZsData],n.updateMessage=[o.default.ins().postListData,o.default.ins().postAuctionResult,o.default.ins().postBuyResult,o.default.ins().postUpdate],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return!!o.default.ins().isAuctionOpen()},t.prototype.checkShowRedPoint=function(){return o.default.ins().checkRed()&&this.firstTap?1:0},t.prototype.getEffName=function(e){return this.firstTap||e?(this.effX=38,this.effY=38,"actIconCircle"):"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(AuctionWin),o.default.ins().sendGetList(0),this.firstTap&&(o.default.ins().checkRed()&&(this.firstTap=!1),this.update())},t}(n.default);i.default=r,cc._RF.pop()},{"../../auction/Auction":"Auction","../../zs/UserZs":"UserZs","./RuleIconBase":"RuleIconBase"}],AuctionItem:[function(e,t,i){"use strict";cc._RF.push(t,"d9dccky66tAz6EVBobnU+Rf","AuctionItem"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],AuctionRecordVo:[function(e,t,i){"use strict";cc._RF.push(t,"55773rzKEBO6aeNJPazQHQk","AuctionRecordVo");(function(){function e(e){this.type=0,this.parser(e)}e.prototype.parser=function(e){this.aId=e.readInt(),this.roleName=e.readString(),this.state=e.readByte(),this.price=e.readInt(),this.time=e.readInt()}})();cc._RF.pop()},{}],AuctionVo:[function(e,t,i){"use strict";cc._RF.push(t,"871c0lWlBNAXbvwUn83tOs5","AuctionVo");(function(){function e(e){this.parser(e)}e.prototype.parser=function(e){this.type=e.readByte(),this.endTime=e.readInt(),this.id=e.readInt(),this.putAwayTime=e.readInt(),this.aID=e.readInt(),this.auctionTimes=e.readByte(),this.myAuPrice=e.readByte(),this.owner=e.readByte()}})();cc._RF.pop()},{}],Auction:[function(e,t,i){"use strict";cc._RF.push(t,"b5313z80c5KkZMMeGA/eDFH","Auction"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../tips/UserTips"),s=e("../zs/UserZs"),u=e("../server/GameServer"),l=e("../../manager/GlobalConfig"),c=function(e){function t(){var i=e.call(this)||this;return o.default.compile(t),i.sysId=a.PackageID.Auction,i.regNetMsg(1,i.postListData),i.regNetMsg(2,i.onOpenSuccess),i.regNetMsg(4,i.postAuctionResult),i.regNetMsg(5,i.postBuyResult),i.regNetMsg(6,i.postRecord),i.regNetMsg(7,i.noLimit),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initLogin=function(){this.sendGetList(0),this.sendGetList(1)},t.prototype.sendGetList=function(e){var t=this.getBytes(1);t.writeByte(e),this.sendToServer(t)},t.prototype.postListData=function(e){for(var t=e.readByte(),i=e.readInt(),n=[],a=0;a<i;a++)n.push(new AuctionVo(e));n.length>=2&&n.sort(this.sort),0==t?this.auGuildDatas=n:this.auServerDatas=n},t.prototype.sort=function(e,t){return e.putAwayTime>t.putAwayTime?-1:e.putAwayTime<t.putAwayTime?1:0},t.prototype.sortByAuTime=function(e,t){return e.time>t.time?-1:e.time<t.time?1:0},t.prototype.sendOpenAuBox=function(e){var t=this.getBytes(2);t.writeInt(e),this.sendToServer(t)},t.prototype.onOpenSuccess=function(e){ViewManager.ins().open(AuctionItemChoiceWin,e.readInt(),e.readInt())},t.prototype.sendUseAuBox=function(e,t){var i=this.getBytes(3);i.writeByte(e),i.writeInt(t),this.sendToServer(i)},t.prototype.sendAUction=function(e,t,i){var n=this.getBytes(4);n.writeInt(e),n.writeByte(t),n.writeByte(i),this.sendToServer(n)},t.prototype.postAuctionResult=function(e){var t=e.readByte();switch(t){case 0:case 1:case 2:var i=new AuctionVo(e),n=this.getVoByID(i.id);1==t?(this.deleteVo(n),r.default.ins().showTips("\u7269\u54c1\u4e0d\u5b58\u5728")):(this.dateChanged(n,i),r.default.ins().showTips(0==t?"\u7ade\u62cd\u6210\u529f":"\u5546\u54c1\u4fe1\u606f\u5df2\u6539\u53d8"));break;case 3:r.default.ins().showTips("\u8fd8\u5728\u5c55\u793a\u65f6\u95f4");break;case 4:r.default.ins().showTips("\u6d3b\u8dc3\u989d\u5ea6\u4e0d\u8db3")}},t.prototype.deleteVo=function(e){var t;if(this.auGuildDatas&&(t=this.auGuildDatas.indexOf(e))>=0)return void this.auGuildDatas.splice(t,1);this.auServerDatas&&((t=this.auServerDatas.indexOf(e))>=0&&this.auServerDatas.splice(t,1))},t.prototype.postUpdate=function(){},t.prototype.getVoByID=function(e){return this.getVo(e,this.auGuildDatas)||this.getVo(e,this.auServerDatas)},t.prototype.getVo=function(e,t){if(!t||t.length<=0)return null;for(var i=t.length,n=0;n<i;n++)if(t[n].id==e)return t[n];return null},t.prototype.sendBuy=function(e,t){var i=this.getBytes(5);i.writeInt(e),i.writeByte(t),this.sendToServer(i)},t.prototype.postBuyResult=function(e){var t=e.readByte();switch(t){case 0:case 1:case 2:var i=new AuctionVo(e),n=this.getVoByID(i.id);2!=t?(this.deleteVo(n),r.default.ins().showTips(1==t?"\u7269\u54c1\u4e0d\u5b58\u5728":"\u8d2d\u4e70\u6210\u529f")):(this.dateChanged(n,i),r.default.ins().showTips("\u5546\u54c1\u4fe1\u606f\u5df2\u6539\u53d8"));break;case 3:r.default.ins().showTips("\u8fd8\u5728\u5c55\u793a\u65f6\u95f4");break;case 4:r.default.ins().showTips("\u6d3b\u8dc3\u989d\u5ea6\u4e0d\u8db3")}},t.prototype.dateChanged=function(e,t){e.type!=t.type?(this.deleteVo(e),0==t.type?(this.auGuildDatas.push(t),this.auGuildDatas.length>=2&&this.auGuildDatas.sort(this.sort)):(this.auServerDatas.push(t),this.auServerDatas.length>=2&&this.auServerDatas.sort(this.sort))):(e.putAwayTime=t.putAwayTime,e.endTime=t.endTime,e.myAuPrice=t.myAuPrice,e.auctionTimes=t.auctionTimes,e.aID=t.aID)},t.prototype.getMaxPageByType=function(e,t){var i=e?this.auServerDatas:this.auGuildDatas;return i&&i.length?Math.ceil(i.length/t):1},t.prototype.getDataByPage=function(e,t,i){var n=e?this.auServerDatas:this.auGuildDatas;if(!n||!n.length)return null;var a=(t-1)*i;return n.slice(a,a+i)},t.prototype.isAuctionOpen=function(){return s.default.ins().lv>=l.default.AuctionConfig.openzhuanshenglv&&u.default.serverOpenDay+1>=l.default.AuctionConfig.openserverday},t.prototype.sendRecord=function(e){var t=this.getBytes(6);t.writeByte(e),this.sendToServer(t)},t.prototype.postRecord=function(e){for(var t,i=e.readByte(),n=e.readShort(),a=[],o=0;o<n;o++)(t=new AuctionRecordVo(e)).type=i,a.push(t);return a.length>1&&a.sort(this.sortByAuTime),{type:i,list:a}},t.prototype.noLimit=function(e){ViewManager.ins().open(AuctionQuotaTipWin,e.readInt(),e.readInt())},t.prototype.checkRed=function(){return this.checkRedByType(0)||this.checkRedByType(1)},t.prototype.checkRedByType=function(e){var t=e?this.auServerDatas:this.auGuildDatas;return t&&t.length>0},t}(n.default);i.default=c,window.GameSystem.push(c.ins.bind(c)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../manager/GlobalConfig":"GlobalConfig","../server/GameServer":"GameServer","../tips/UserTips":"UserTips","../zs/UserZs":"UserZs"}],AutoChallengeBoss:[function(e,t,i){"use strict";cc._RF.push(t,"dd114amuOVMiY5oU/SZz27L","AutoChallengeBoss"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("./UserBoss"),o=e("../gamescene/GameLogic"),r=e("../../map/GameMap"),s=e("../../manager/TimerManager"),u=function(e){function t(){var t=e.call(this)||this;return t.observe(a.default.ins().postWorldBoss,t.checkEnter),t.observe(a.default.ins().postBossData,t.delayCheckEnter),t.observe(o.default.ins().postEnterMap,function(){0==r.default.fubenID&&t.checkEnter()}),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.refBossTimeFun=function(){s.default.ins().remove(this.refTimes,this),this.refType=a.default.BOSS_SUBTYPE_QMBOSS;var e=a.default.ins().worldBossrestoreTime[this.refType];e>a.default.ins().worldBossrestoreTime[a.default.BOSS_SUBTYPE_SHENYU]&&(this.refType=a.default.BOSS_SUBTYPE_SHENYU,e=a.default.ins().worldBossrestoreTime[this.refType]);var t=e-egret.getTimer();t>0&&s.default.ins().doTimer(t,1,this.refTimes,this)},t.prototype.refTimes=function(){a.default.ins().sendWorldBossInfo(this.refType)},t.prototype.delayCheckEnter=function(e){e[0]&&s.default.ins().doTimer(1e3,2,this.checkEnter,this)},t.prototype.checkEnter=function(){if(a.default.ins().worldInfoList&&0==r.default.fubenID){var e=[],t=[],i=a.default.ins().worldInfoList[a.default.BOSS_SUBTYPE_QMBOSS];if(i&&this.autoYewaiBoss&&a.default.ins().worldBossLeftTime[a.default.BOSS_SUBTYPE_QMBOSS])for(var n=0,o=i;n<o.length;n++){var s=o[n],u=GlobalConfig.WorldBossConfig[s.id];a.default.isCanChallenge(u)&&(u.samsaraLv?e.push(s):t.push(s))}e=e.sort(this.compareFn);for(var l=0;l<e.length;l++){if((s=e[l]).canChallenge&&a.default.ins().getBossRemindByIndex(s.id))return void this.enterFb(s.id,a.default.BOSS_SUBTYPE_QMBOSS)}if(a.default.ins().worldInfoList[a.default.BOSS_SUBTYPE_SHENYU]&&this.autoShenyuBoss&&a.default.ins().worldBossLeftTime[a.default.BOSS_SUBTYPE_SHENYU]){var c=a.default.ins().worldInfoList[a.default.BOSS_SUBTYPE_SHENYU].slice();c=c.sort(this.compareFn);for(l=0;l<c.length;l++){if((s=c[l]).canChallenge&&a.default.ins().getBossRemindByIndex(s.id))return void this.enterFb(s.id,a.default.BOSS_SUBTYPE_SHENYU)}}t=t.sort(this.compareFn);for(l=0;l<t.length;l++){if((s=t[l]).canChallenge&&a.default.ins().getBossRemindByIndex(s.id))return void this.enterFb(s.id,a.default.BOSS_SUBTYPE_QMBOSS)}}},t.prototype.enterFb=function(e,t){var i=a.default.ins().worldBossCd[t]-egret.getTimer();i>0?s.default.ins().doTimer(i,1,this.checkEnter,this):(a.default.ins().postBossData(!1),a.default.ins().sendChallengWorldBoss(e,t))},t.prototype.compareFn=function(e,t){var i=GlobalConfig.WorldBossConfig[e.id],n=GlobalConfig.WorldBossConfig[t.id];return i.zsLevel<n.zsLevel?1:i.zsLevel>n.zsLevel?-1:i.level<n.level?1:i.level>n.level?-1:0},t}(n.default);i.default=u,window.GameSystem.push(u.ins.bind(u)),cc._RF.pop()},{"../../base/BaseSystem":"BaseSystem","../../manager/TimerManager":"TimerManager","../../map/GameMap":"GameMap","../gamescene/GameLogic":"GameLogic","./UserBoss":"UserBoss"}],BagAddItemWarn:[function(e,t,i){"use strict";cc._RF.push(t,"806ef/2snhLVIcI0ignQFoE","BagAddItemWarn"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../../core/base/ViewManager"),r=cc._decorator,s=r.ccclass,u=r.property,l=function(e){function t(){var t=e.call(this)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.decBtn=null,t.addBtn=null,t.count=null,t.sureBtn=null,t.closeBtn=null,t}var i;return __extends(t,e),i=t,t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onTap=function(e){o.default.ins().close(i)},t.prototype.setCount=function(e){},__decorate([u({type:cc.Button,displayName:"decBtn"})],t.prototype,"decBtn",void 0),__decorate([u({type:cc.Button,displayName:"addBtn"})],t.prototype,"addBtn",void 0),__decorate([u({type:cc.Label,displayName:"countLabel"})],t.prototype,"count",void 0),__decorate([u({type:cc.Button,displayName:"sureBtn"})],t.prototype,"sureBtn",void 0),__decorate([u({type:cc.Button,displayName:"closeBtn"})],t.prototype,"closeBtn",void 0),t=i=__decorate([s],t)}(n.default);i.default=l,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager"}],BagBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2b6493Ui3ZBX7aHgZKMH7pE","BagBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],BagEnum:[function(e,t,i){"use strict";var n;cc._RF.push(t,"e9b94tlJ6tG4Zi7jksE/H+7","BagEnum"),function(e){e[e.Equip=0]="Equip",e[e.Rune=1]="Rune",e[e.Heirloom=2]="Heirloom"}(n||(n={})),cc._RF.pop()},{}],BagExpandConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6eee5N3GaZHiKtjFQuDGXbw","BagExpandConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],BagFullTipsWin:[function(e,t,i){"use strict";cc._RF.push(t,"7f5d8l0PztDgJb3MtUTZ/q0","BagFullTipsWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../../core/base/ViewManager"),o=e("../../bag/view/SmeltEquipTotalWin"),r=cc._decorator,s=r.ccclass,u=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeBtn=null,t.sureBtn=null,t.numText=null,t}return __extends(t,e),t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.closeBtn,this.onTap),this.addTouchEvent(this.sureBtn,this.onTap);var i=20;e[0]&&(i=e[0]),this.numText.string=""+i},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onTap=function(e){switch(e){case this.closeBtn:a.default.ins().close(this);break;case this.sureBtn:a.default.ins().close(this),a.default.ins().open(o.default)}},__decorate([u({type:cc.Node,displayName:"\u5173\u95ed\u6309\u94ae"})],t.prototype,"closeBtn",void 0),__decorate([u({type:cc.Node,displayName:"\u786e\u5b9a\u6309\u94ae"})],t.prototype,"sureBtn",void 0),__decorate([u({type:cc.Label,displayName:"\u6570\u91cf"})],t.prototype,"numText",void 0),t=__decorate([s],t)}(n.default);i.default=l,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../bag/view/SmeltEquipTotalWin":"SmeltEquipTotalWin"}],BagWinItemScript:[function(e,t,i){"use strict";cc._RF.push(t,"194a9Y6HzRIGJ4BuT87MwSu","BagWinItemScript"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../customComponent/ItemBase"),a=e("../../../../../core/utils/Util"),o=cc._decorator,r=o.ccclass,s=o.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemBaseScripts=[],t.info=[],t}return __extends(t,e),t.prototype.setParam=function(e){!a.Util.isNullOrUndefined(e)&&a.Util.isNullOrUndefined(e.length)?this.info.push(e):this.info=e},t.prototype.getParam=function(){},t.prototype.onEnable=function(){this.refreshData()},t.prototype.onDestroy=function(){this.info=[]},t.prototype.updateBagWinItem=function(e,t,i){e?this.itemBaseScripts[i].setItemBaseData(t):this.itemBaseScripts[i].setItemBaseData(null)},t.prototype.refreshData=function(){for(var e=this.info.length,t=0;t<5;t++)t<e?this.updateBagWinItem(!0,this.info[t],t):this.updateBagWinItem(!1,null,t)},__decorate([s({type:n.default,displayName:"ItemBaseScript"})],t.prototype,"itemBaseScripts",void 0),t=__decorate([r],t)}(cc.Component);i.default=u,cc._RF.pop()},{"../../../../../core/utils/Util":"Util","../../../../customComponent/ItemBase":"ItemBase"}],BagWin:[function(e,t,i){"use strict";cc._RF.push(t,"cb865g+szZEIJXRs2lBgJyZ","BagWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../../core/base/ViewManager"),o=e("../../gamescene/view/ui/UIView2"),r=e("../UserBag"),s=e("../../../enum/LayerManager"),u=e("../../../base/ListScrollScript"),l=e("../../../manager/GlobalConfig"),c=e("../../../../core/utils/CommonUtils"),d=e("../../tips/UserTips"),f=e("../../../../core/utils/StringUtils"),p=e("../../warn/view/BagAddItemWarn"),h=e("./SmeltEquipTotalWin"),g=cc._decorator,y=g.ccclass,v=g.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.closeBtn=null,t.viewStack=null,t.viewStackGroup=[],t.smeltBtn=null,t.redPoint=null,t.addBtn=null,t.itemCount=null,t.tab=null,t.redPoint0=null,t.redPoint1=null,t.redPoint2=null,t.redPoint3=null,t.redPointGroup=null,t.listScrollScripts=[],t.oldIndex=0,t.selectedIndex=0,t.botToggle=[],t.parentRoot=s.LayerManager.UI_Main,t}var i;return __extends(t,e),i=t,t.prototype.initData=function(){this.botToggle=this.tab.getComponentsInChildren(cc.Toggle)},t.prototype.initUI=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.closeBtn,this.onClick),this.addTouchEvent(this.smeltBtn,this.onClick),this.addTouchEvent(this.addBtn,this.onClick);this.selectedIndex=0,this.setBagData(0),this.setIsExitUsedItem(),r.default.ins().postBagVolChange(),this.showBagBtnRedPoint(r.default.ins().isChange)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=a.default.ins().getView(o.default);i&&i.closeNav(o.default.NAV_BAG)},t.prototype.openMerge=function(){},t.prototype.onClick=function(e){switch(console.log("------\u70b9\u51fb\u5173\u95ed\u80cc\u5305"),e){case this.closeBtn:a.default.ins().close(i);break;case this.smeltBtn:a.default.ins().close(i),a.default.ins().open(h.default);break;case this.addBtn:var t=l.default.BagBaseConfig;(r.default.ins().bagNum-t.baseSize)/t.rowSize==c.default.getObjectLength(l.default.BagExpandConfig)?(d.default.ins().showTips(f.default.addColor("\u683c\u5b50\u4e0d\u80fd\u7ee7\u7eed\u6269\u5f20",15937822)),console.log("\u683c\u5b50\u4e0d\u80fd\u7ee7\u7eed\u6269\u5f20")):a.default.ins().open(p.default)}},t.prototype.onClickMenu=function(e,t){3==+t?console.log("   open bag \u5408\u6210 3 !!!!!"):this.setBagData(+t)},t.prototype.setCount=function(){this.itemCount.string=r.default.ins().getBagItemNum()+"/"+r.default.ins().getMaxBagRoom()},t.prototype.updateBag=function(){this.setBagData(this.oldIndex)},t.prototype.setBagData=function(e){switch(void 0===e&&(e=1),console.log("--------------- setBagData --- ",e),this.refreshBagShowOrHide(e),e){case 0:var t=r.default.ins().getBagSortQualityEquips(5,0,1);t.sort(r.default.ins().sort3),this.updateListScrollViewShow(t,e);break;case 1:var i=r.default.ins().getBagGoodsBySort(0),n=r.default.ins().getBagGoodsBySort(2).concat(i);console.log("setBagData 1 ==== ",n),this.updateListScrollViewShow(n,e);break;case 2:var a=r.default.ins().getBagGoodsBySort(1);console.log("bagTabIndex 2 == ",a),this.updateListScrollViewShow(a,e)}this.oldIndex!=e&&(this.oldIndex=e),this.setCount()},t.prototype.refreshBagShowOrHide=function(e){for(var t=0;t<this.viewStackGroup.length;t++)this.viewStackGroup[t].active=e==t},t.prototype.updateListScrollViewShow=function(e,t){this.listScrollScripts[t].setParam(e)},t.prototype.setIsExitUsedItem=function(){},t.prototype.setBagTips=function(e){},t.prototype.showBagBtnRedPoint=function(e){},__decorate([v({type:cc.Button,displayName:"\u5173\u95ed\u6309\u94ae"})],t.prototype,"closeBtn",void 0),__decorate([v({type:cc.Node,displayName:"\u80cc\u5305\u9875"})],t.prototype,"viewStack",void 0),__decorate([v({type:cc.Node,displayName:"\u80cc\u5305\u5206\u9875"})],t.prototype,"viewStackGroup",void 0),__decorate([v({type:cc.Button,displayName:"\u7194\u70bc\u6309\u94ae"})],t.prototype,"smeltBtn",void 0),__decorate([v({type:cc.Node,displayName:"redPoint"})],t.prototype,"redPoint",void 0),__decorate([v({type:cc.Button,displayName:"addBtn"})],t.prototype,"addBtn",void 0),__decorate([v({type:cc.Label,displayName:"ItemCountLabel"})],t.prototype,"itemCount",void 0),__decorate([v({type:cc.Node,displayName:"tabNode"})],t.prototype,"tab",void 0),__decorate([v({type:cc.Node,displayName:"redPoint0"})],t.prototype,"redPoint0",void 0),__decorate([v({type:cc.Node,displayName:"redPoint1"})],t.prototype,"redPoint1",void 0),__decorate([v({type:cc.Node,displayName:"redPoint2"})],t.prototype,"redPoint2",void 0),__decorate([v({type:cc.Node,displayName:"redPoint3"})],t.prototype,"redPoint3",void 0),__decorate([v({type:cc.Node,displayName:"redPointGroup"})],t.prototype,"redPointGroup",void 0),__decorate([v({type:u.default,displayName:"listScrollScripts"})],t.prototype,"listScrollScripts",void 0),t=i=__decorate([y],t)}(n.default);i.default=m,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/CommonUtils":"CommonUtils","../../../../core/utils/StringUtils":"StringUtils","../../../../core/view/BaseEuiView":"BaseEuiView","../../../base/ListScrollScript":"ListScrollScript","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../gamescene/view/ui/UIView2":"UIView2","../../tips/UserTips":"UserTips","../../warn/view/BagAddItemWarn":"BagAddItemWarn","../UserBag":"UserBag","./SmeltEquipTotalWin":"SmeltEquipTotalWin"}],BaseClass:[function(e,t,i){"use strict";cc._RF.push(t,"97f0aVLQoVBbbg4lTZVbBna","BaseClass"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.ins=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!this._instance){var i=e.length;0==i?this._instance=new this:1==i?this._instance=new this(e[0]):2==i?this._instance=new this(e[0],e[1]):3==i?this._instance=new this(e[0],e[1],e[2]):4==i?this._instance=new this(e[0],e[1],e[2],e[3]):5==i&&(this._instance=new this(e[0],e[1],e[2],e[3],e[4]))}return this._instance},e}();i.default=n,cc._RF.pop()},{}],BaseComponent:[function(e,t,i){"use strict";cc._RF.push(t,"5c6752eJjtIc6qjdOXzSeCe","BaseComponent"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){var t=e.call(this)||this;return t.className="@\u7b56\u5212@\u4f7f\u7528\u6b64\u7ec4\u4ef6\u5fc5\u987b\u586b\u5199\u903b\u8f91\u7c7b\u540d",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},Object.defineProperty(t.prototype,"data",{get:function(){return this._data},set:function(e){this._data=e,this.dataChanged&&this.dataChanged()},enumerable:!0,configurable:!0}),t.filterKeys=["data"],t.copyKeys=["open","close"],t}(e("./BaseView").default);i.BaseComponent=n,cc._RF.pop()},{"./BaseView":"BaseView"}],BaseEuiView:[function(e,t,i){"use strict";cc._RF.push(t,"9aff8X5A+tD3LWm7jA0Jamv","BaseEuiView"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("./BaseView").default);i.default=n,cc._RF.pop()},{"./BaseView":"BaseView"}],BaseEventView:[function(e,t,i){"use strict";cc._RF.push(t,"547eauIMjdJgJYEGE9JRPK3","BaseEventView"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../utils/event/EventData"),a=e("../utils/event/EventDelegate"),o=cc._decorator,r=o.ccclass,s=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.map={},t}return __extends(t,e),t.prototype.addEventListener=function(e,t,i){this.tryInitType(e),this.getDelegate(e).addListener(t,i)},t.prototype.onceEventListener=function(e,t,i){this.tryInitType(e),this.getDelegate(e).onceListener(t,i)},t.prototype.removeEventListener=function(e,t,i){this.hasType(e)&&this.getDelegate(e).removeListener(t,i)},t.prototype.removeEventListenerByType=function(e){this.hasType(e)&&this.getDelegate(e).removeListeners()},t.prototype.removeEventListeners=function(){this.map={}},t.prototype.dispatchEvent=function(e,t){if(void 0===t&&(t=null),this.hasType(e)){var i=new n.EventData(e,t);i.setCurrentTarget(this),this.getDelegate(i.type).handle(i)}},t.prototype.hasType=function(e){return this.map.hasOwnProperty(e)},t.prototype.tryInitType=function(e){this.hasType(e)||(this.map[e]=new a.EventDelegate(e))},t.prototype.getDelegate=function(e){return this.hasType(e)?this.map[e]:null},t.prototype.clearType=function(e){var t=this.getDelegate(e);void 0!==t&&null!=t&&t.removeListeners()},t=__decorate([r],t)}(cc.Component));i.default=s,cc._RF.pop()},{"../utils/event/EventData":"EventData","../utils/event/EventDelegate":"EventDelegate"}],BaseItemRender:[function(e,t,i){"use strict";cc._RF.push(t,"911acWB5LxEw6TBPgvHdd6N","BaseItemRender"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./BaseView"),a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){return e.call(this)||this}return __extends(t,e),t=__decorate([o],t)}(n.default));i.default=r,cc._RF.pop()},{"./BaseView":"BaseView"}],BaseSound:[function(e,t,i){"use strict";cc._RF.push(t,"778e8f70rRG2J+CPfBjzAHo","BaseSound"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../game/manager/TimerManager"),a=function(){function e(){this._cache={},this._loadingCache=new Array,n.default.ins().doTimer(6e4,0,this.dealSoundTimer,this)}return e.prototype.dealSoundTimer=function(){},e.prototype.getSound=function(e){return null},e.prototype.onResourceLoadComplete=function(e,t){},e.prototype.loadedPlay=function(e){},e.prototype.checkCanClear=function(e){return!0},e}();i.default=a,cc._RF.pop()},{"../../game/manager/TimerManager":"TimerManager"}],BaseSystem:[function(e,t,i){"use strict";cc._RF.push(t,"86b62YsVURPUq/cjnhad3j2","BaseSystem"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/base/BaseClass"),a=e("../../core/net/GameSocket"),o=e("../../core/net/GameSocket"),r=e("../../core/base/MessageCenter"),s=e("../manager/TimerManager"),u=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.regNetMsg=function(e,t){a.default.ins().registerSTCFunc(this.sysId,e,t,this)},t.prototype.getBytes=function(e){var t=this.getGameByteArray();return t.writeCmd(this.sysId,e),t},t.prototype.getGameByteArray=function(){return o.default.ins().getBytesObj()},t.prototype.sendToServer=function(e){a.default.ins().sendToServer(e)},t.prototype.observe=function(e,t){r.default.ins().addListener(e,t,this)},t.prototype.sendBaseProto=function(e){var t=this.getGameByteArray();t.writeCmd(this.sysId,e),this.sendToServer(t)},t.prototype.associated=function(e){for(var t=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];for(var a=!1,o=function(){a=!1,e.call(t)},r=function(){a||(a=!0,s.default.ins().doTimer(60,1,o,t))},u=0,l=i;u<l.length;u++){var c=l[u];this.observe(c,r)}},t}(n.default);i.default=u,cc._RF.pop()},{"../../core/base/BaseClass":"BaseClass","../../core/base/MessageCenter":"MessageCenter","../../core/net/GameSocket":"GameSocket","../manager/TimerManager":"TimerManager"}],BaseView:[function(e,t,i){"use strict";cc._RF.push(t,"1d8c8noWhRHjoehiVooKa1W","BaseView"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../base/MessageCenter"),a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.addTouchEvent=function(e,t){e.node?e.node.on("touchend",t.bind(this,e),this):e.on("touchend",t.bind(this,e),this)},t.prototype.removeTouchEvent=function(e,t){e.node?e.node.off("touchend",t.bind(this,e),this):e.off("touchend",t.bind(this,e),this)},t.prototype.addChangeEvent=function(e,t){var i=this;e&&e instanceof cc.Node?e.getComponentsInChildren(cc.Button).forEach(function(e){e.node&&e.node.on("touchend",t.bind(i,e),i)}):console.error("\u4e0d\u5b58\u5728\u7ed1\u5b9a\u5bf9\u8c61")},t.prototype.addTouchToggleGroupEvent=function(){},t.prototype.observe=function(e,t){n.default.ins().addListener(e,t,this)},t.prototype.removeObserve=function(){n.default.ins().removeAll(this)},t=__decorate([o],t)}(cc.Component));i.default=r,cc._RF.pop()},{"../base/MessageCenter":"MessageCenter"}],BaseWinEvents:[function(e,t,i){"use strict";cc._RF.push(t,"5b948pSrs1E17gkYmh73DsP","BaseWinEvents"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.EventRoleChange="RoleWinEvents.EventRoleChange",e.EventRoleChangeEquip="RoleWinEvents.EventRoleChangeEquip",e}();i.RoleWinEvents=n,cc._RF.pop()},{}],BattleCC:[function(e,t,i){"use strict";cc._RF.push(t,"e38a87PQNZIyaC0YajO/ABJ","BattleCC"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../gamescene/GameLogic"),r=e("../../map/GameMap"),s=e("../../manager/GlobalConfig"),u=e("../fb/UserFb"),l=e("../../../core/utils/DateUtils"),c=e("../../Utils/EgretUtils"),d=e("../server/GameServer"),f=e("../tips/UserTips"),p=e("../../entity/Actor"),h=e("../../base/EntityManager"),g=e("../../../core/base/MessageCenter"),y=function(e){function t(){var i=e.call(this)||this;return i._leftTime=0,i.battleRanks=[],i.myRank=0,i.myScore=0,i.awardID=0,i._openLeftTime=0,i._openTimer=0,i._enterCD=0,i._enterCDTimer=0,i._changeTime=0,i._changeLittle=0,i.sysId=a.PackageID.Battle,g.default.compile(t),i.observe(o.default.ins().postEnterMap,i.mapChange),i.regNetMsg(1,i.joinResult),i.regNetMsg(2,i.doRank),i.regNetMsg(3,i.doOpen),i.regNetMsg(4,i.doRelive),i.regNetMsg(5,i.getAwardResult),i.regNetMsg(6,i.doAwardInfo),i.regNetMsg(7,i.doMyScore),i.regNetMsg(10,i.doMyRank),i.regNetMsg(11,i.doEnterCD),i.regNetMsg(12,i.doGameOver),i.regNetMsg(13,i.postLittleChange),i.regNetMsg(14,i.postChangeTime),i.regNetMsg(15,i.postKilled),i}return __extends(t,e),t.prototype.mapChange=function(){r.default.fubenID==s.default.CampBattleConfig.fbId&&this.enterBattle(),this._isBattle&&r.default.fubenID!=s.default.CampBattleConfig.fbId&&this.escBattle(),this.gotoNpc&&r.default.fbType==u.default.FB_TYPE_CITY&&(this.gotoNpc=!1,r.default.myMoveTo(s.default.CampBattleConfig.npcPos[0]*r.default.CELL_SIZE,s.default.CampBattleConfig.npcPos[1]*r.default.CELL_SIZE,this.findComplete),r.default.moveTo(s.default.CampBattleConfig.npcPos[0]*r.default.CELL_SIZE,s.default.CampBattleConfig.npcPos[1]*r.default.CELL_SIZE))},t.prototype.findComplete=function(){ViewManager.ins().open(BattleNpcTipWin)},t.ins=function(){return e.ins.call(this)},t.prototype.isBattle=function(){return this._isBattle},t.prototype.joinBattle=function(){this.sendBaseProto(1)},t.prototype.joinResult=function(e){this.camp=e.readShort(),this._leftTime=l.default.formatMiniDateTime(e.readInt()),this.postEnterSuccess()},t.prototype.postEnterSuccess=function(){},t.prototype.doRank=function(e){var t,i=e.readInt();this.battleRanks.length=i;for(var n=0;n<i;n++)(t=this.battleRanks[n])||(t=new BattleRankVo,this.battleRanks[n]=t),t.parse(e);this.postRankInfo()},t.prototype.doOpen=function(e){this.isOpen=e.readBoolean(),this._openLeftTime=e.readInt(),this._openTimer=c.default.getTimer(),this.postOpenInfo()},t.prototype.doRelive=function(e){UserBoss.ins().reliveTime=e.readInt(),UserBoss.ins().killerHandler=e.readDouble(),ViewManager.ins().close(TargetPlayerBigBloodPanel),UserBoss.ins().reliveTime>0?(UserBoss.ins().clearWorldBossList(),ViewManager.ins().open(WorldBossBeKillWin)):ViewManager.ins().close(WorldBossBeKillWin)},t.prototype.postOpenInfo=function(){},t.prototype.getOpenLeftTime=function(){return this._openLeftTime-(c.default.getTimer()-this._openTimer)/1e3},t.prototype.getRankTop=function(e){return void 0===e&&(e=3),this.battleRanks?this.battleRanks.slice(0,e):null},t.prototype.postRankInfo=function(){},t.prototype.getLeftTime=function(){return Math.floor((this._leftTime-d.default.serverTime)/1e3)},t.prototype.enterBattle=function(){this._isBattle=!0,ViewManager.ins().isShow(BattleWin)||ViewManager.ins().open(BattleWin),ViewManager.ins().close(BattleNpcTipWin)},t.prototype.escBattle=function(){this._isBattle=!1,ViewManager.ins().close(BattleWin);var e=h.default.ins().getEntitysBymasterhHandle(p.default.handle,EntityType.Role);if(e&&e.length>0)for(var t=e.length,i=void 0,n=0;n<t;n++)(i=e[n])&&i.infoModel&&(i.setCharName(i.infoModel.guildAndName),i.updateNameColor())},t.prototype.sendReLive=function(){this.sendBaseProto(4)},t.prototype.getMyAward=function(){this.sendBaseProto(5)},t.prototype.getAwardResult=function(e){e.readBoolean()},t.prototype.doAwardInfo=function(e){this.awardID=e.readInt(),this.postGiftInfo()},t.prototype.postGiftInfo=function(){},t.prototype.doMyScore=function(e){this.myScore=e.readInt();var t,i=e.readInt(),n=e.readString();switch(e.readUnsignedByte()){case 1:t="\u6210\u529f\u51fb\u6740|C:0x00ff00&T:"+n+"|\uff0c\u79ef\u5206+|C:0x00ff00&T:"+i+"|";break;case 2:t="\u52a9\u653b\u51fb\u6740|C:0x00ff00&T:"+n+"|\uff0c\u79ef\u5206+|C:0x00ff00&T:"+i+"|";break;case 3:t="\u88ab|C:0x00ff00&T:"+n+"|\u51fb\u6740\uff0c\u79ef\u5206+|C:0x00ff00&T:"+i+"|";break;case 4:t="\u83b7\u5f97\u6301\u7eed\u53c2\u4e0e\u5956\uff0c\u79ef\u5206+|C:0x00ff00&T:"+i+"|";break;case 5:t="\u6740\u602a\u83b7\u5f97\u79ef\u5206+|C:0x00ff00&T:"+i+"|"}t&&f.default.ins().showCenterTips3(t),this.postScoreChange()},t.prototype.doMyRank=function(e){this.myRank=e.readInt(),this.myScore=e.readInt(),this.postScoreChange()},t.prototype.postScoreChange=function(){},t.prototype.doEnterCD=function(e){this._enterCD=e.readInt(),this._enterCDTimer=c.default.getTimer()},t.prototype.doGameOver=function(e){ViewManager.ins().open(BattleResultWin)},t.prototype.postLittleChange=function(e){this._changeLittle=l.default.formatMiniDateTime(e.readInt())},t.prototype.getChangeLittleTime=function(){return Math.floor((this._changeLittle-d.default.serverTime)/1e3)},t.prototype.canMove=function(){return this.getChangeLittleTime()<=0},t.prototype.postChangeTime=function(e){this._changeTime=l.default.formatMiniDateTime(e.readInt())},t.prototype.postKilled=function(e){return e.readShort()},t.prototype.getChangeTime=function(){return Math.floor((this._changeTime-d.default.serverTime)/1e3)},t.prototype.getEnterCD=function(){return Math.ceil(this._enterCD-(c.default.getTimer()-this._enterCDTimer)/1e3)},t.prototype.checkRedPoint=function(){return this.isOpen&&p.default.level>=s.default.CampBattleConfig.openLevel},t}(n.default);i.default=y,window.GameSystem.push(y.ins.bind(y)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../Utils/EgretUtils":"EgretUtils","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../../map/GameMap":"GameMap","../fb/UserFb":"UserFb","../gamescene/GameLogic":"GameLogic","../server/GameServer":"GameServer","../tips/UserTips":"UserTips"}],BattleIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"ca9ac3df/9G8oVgPcWDq8Pm","BattleIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../battle/BattleCC"),r=e("../../../../core/utils/DateUtils"),s=e("../../../manager/TimerManager"),u=e("../../opensystem/OpenSystem"),l=e("../../../consts/SystemConst"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._time=0,n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postOpenInfo],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);if(o.default.ins().isOpen)this._timeTxt.string="\u8fdb\u884c\u4e2d";else{var i=o.default.ins().getOpenLeftTime();i>0&&(this._time=i,this._timeTxt.string=r.default.getFormatBySecond(this._time,r.default.TIME_FORMAT_5,4),s.default.ins().isExists(this.setRepeat,this)||s.default.ins().doTimer(1e3,0,this.setRepeat,this))}return t},t.prototype.checkShowIcon=function(){if(s.default.ins().removeAll(this),!u.default.ins().checkSysOpen(l.SystemType.BATTLE))return!1;if(o.default.ins().isOpen)return!0;var e=o.default.ins().getOpenLeftTime();return e>0&&(this._time=e,s.default.ins().isExists(this.setRepeat,this)||s.default.ins().doTimer(1e3,0,this.setRepeat,this),!0)},t.prototype.setRepeat=function(){this._time--,this._time>0?this._timeTxt.string=r.default.getFormatBySecond(this._time,r.default.TIME_FORMAT_5,4):(this._timeTxt.string="\u8fdb\u884c\u4e2d",s.default.ins().removeAll(this))},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.getEffName=function(e){return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(FbWin,3),this.update()},t}(n.default);i.default=c,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../manager/TimerManager":"TimerManager","../../battle/BattleCC":"BattleCC","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],BattleRankVo:[function(e,t,i){"use strict";cc._RF.push(t,"21a26BbWdlCiIkO5gfcOldC","BattleRankVo");(function(){function e(){}e.prototype.parse=function(e){this.rank=e.readShort(),this.camp=e.readShort(),this.roleName=e.readString(),this.unionName=e.readString(),this.score=e.readInt()}})();cc._RF.pop()},{}],BlackMarketItemRenderer:[function(e,t,i){"use strict";cc._RF.push(t,"234f1T7E7dHk5z2VQIT17pT","BlackMarketItemRenderer"),Object.defineProperty(i,"__esModule",{value:!0});(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}__extends(t,e),t.prototype.dataChanged=function(){},t.prototype.showTip=function(){},t.moneyTypeToIcon=["\u5360\u4f4d","szjinbi","szyuanbao"]})(e("../../../../core/view/BaseItemRender").default);cc._RF.pop()},{"../../../../core/view/BaseItemRender":"BaseItemRender"}],BlackMarketPanel:[function(e,t,i){"use strict";cc._RF.push(t,"7ee61blGDhNmpEjFKjLfOEt","BlackMarketPanel");cc._RF.pop()},{}],BooKData:[function(e,t,i){"use strict";cc._RF.push(t,"ed9c38+ybBCF4lMV5II6l/i","BooKData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../bag/UserBag"),a=e("../../../manager/GlobalConfig"),o=e("../Book"),r=e("../../../entity/SubRoles"),s=function(){function e(){this.level=-1,this.exp=0,this.number=0}return e.prototype.updateData=function(e){this.level=e.readShort()},e.prototype.getNum=function(e){var t=a.default.CardConfig[this.id][0].itemId,i=n.default.ins().getBagGoodsCountById(0,t);if(isNaN(e)){var s=o.default.ins().getSuitIdByBookId(this.id);if(!s)return i;if(-1==(d=o.default.jobs.indexOf(s)))return i;for(var u=void 0,l=0;l<r.default.ins().subRolesLen;l++){if((f=r.default.ins().getSubRoleByIndex(l))&&f.job==d+1){u=!0;break}}return u?i:0}if(i)for(var c in a.default.SuitConfig){var d;if(-1!=(d=o.default.jobs.indexOf(Number(c)))&&-1!=a.default.SuitConfig[c][1].idList.indexOf(this.id))for(l=0;l<r.default.ins().subRolesLen;l++){var f;if((f=r.default.ins().getSubRoleByIndex(l))&&f.job==e+1)return i}}return 0},e.prototype.getItemId=function(){return a.default.CardConfig[this.id][0].itemId},e.prototype.canOpen=function(){return this.getNum()>0},e.prototype.getNextLevelCost=function(){if(-1==this.level)return 0;var e=a.default.CardConfig[this.id][this.level+1];return e?e.cost:0},e.prototype.getState=function(e){return this.level>-1?BookState.haveOpen:this.getNum(e)>0?BookState.canOpen:BookState.noOpen},e}();i.default=s,cc._RF.pop()},{"../../../entity/SubRoles":"SubRoles","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../Book":"Book"}],BookConst:[function(e,t,i){"use strict";var n;cc._RF.push(t,"f4305qUmY5Flafu4fNe4EBH","BookConst"),function(e){e[e.canOpen=0]="canOpen",e[e.haveOpen=1]="haveOpen",e[e.noOpen=2]="noOpen"}(n||(n={})),cc._RF.pop()},{}],BookListConfig:[function(e,t,i){"use strict";cc._RF.push(t,"fe5e8d09nJLBp8rT8lNxUUm","BookListConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],BookRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"c15f8rX24tIKLzTu6uY9wZb","BookRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/RedPointBase"),a=e("../../../entity/Actor"),o=e("../Book"),r=e("../../bag/UserBag"),s=e("../../gamescene/GameLogic"),u=e("../../lilian/LiLian"),l=e("../../zs/UserZs"),c=function(e){function t(){var t=e.call(this)||this;return t.canLvlUp=!1,t.registerOpen(a.default.ins().postLevelChange,l.default.ins().postZsData),t.registerTab(0,o.default.ins().postDataChange,r.default.ins().postItemAdd,s.default.ins().postSubRoleChange),t.registerTab(1,o.default.ins().postDataChange,r.default.ins().postItemAdd),t.associated(t.postLvlUp,o.default.ins().postDataChange),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postLvlUp=function(){var e=this.canLvlUp;return this.canLvlUp=o.default.ins().getBookUpRed(),e!=this.canLvlUp},t.prototype.getTabRedPoint=function(e){return 0==e?o.default.ins().getBookRed():1==e?o.default.ins().checkResolveRedPoint():2==e&&o.default.ins().getBookUpRed()},t.prototype.getIsOpen=function(){return u.default.ins().checkBookOpen()},t}(n.default);i.default=c,window.GameSystem.push(c.ins.bind(c)),cc._RF.pop()},{"../../../../core/base/RedPointBase":"RedPointBase","../../../entity/Actor":"Actor","../../bag/UserBag":"UserBag","../../gamescene/GameLogic":"GameLogic","../../lilian/LiLian":"LiLian","../../zs/UserZs":"UserZs","../Book":"Book"}],BookSkillInfo:[function(e,t,i){"use strict";cc._RF.push(t,"2db25bMNd9HtJboW9kk6Wqd","BookSkillInfo");cc._RF.pop()},{}],Book:[function(e,t,i){"use strict";cc._RF.push(t,"d159d+WRklCapLaOVO3f/yg","Book"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/MessageCenter"),a=e("../../base/BaseSystem"),o=e("../../../core/net/PackageID"),r=e("../../manager/GlobalConfig"),s=e("../bag/UserBag"),u=e("../../entity/SubRoles"),l=e("../tips/UserTips"),c=e("../../../core/base/ErrorLog"),d=e("../../consts/ItemType"),f=e("./model/BooKData"),p=function(e){function t(){var i=e.call(this)||this;return i.bookPower=0,i.score=-1,i.sysId=o.PackageID.Book,n.default.compile(t),i.regNetMsg(1,i.postDataChange),i.listBook={},i.itemBook={},i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getSuitIdByBookId=function(e){if(!r.default.CardConfig[e][0])return 0;for(var t in r.default.SuitConfig)if(-1!=r.default.SuitConfig[t][1].idList.indexOf(e))return Number(t);return 0},t.prototype.getSuitNum=function(e){for(var t=r.default.SuitConfig[e][1],i=0,n=0;n<t.idList.length;n++){this.getBookById(t.idList[n]).level>-1&&i++}return i},t.prototype.getSuitLevel=function(e){for(var t=this.getSuitNum(e),i=0,n=1;r.default.SuitConfig[e][n];)r.default.SuitConfig[e][n].count<=t&&(i=r.default.SuitConfig[e][n].level),n++;return i},t.prototype.getBookRed=function(){for(var e in r.default.BookListConfig)for(var t=0,i=r.default.BookListConfig[e].idList;t<i.length;t++)for(var n=i[t],a=0,o=r.default.SuitConfig[n][1].idList;a<o.length;a++){var s=o[a];if(this.getBookById(s).getState()==BookState.canOpen)return!0}return!1},t.prototype.getBookUpRed=function(){for(var e in r.default.BookListConfig)for(var t=0,i=r.default.BookListConfig[e].idList;t<i.length;t++){var n=i[t];if(this.getBookUpRedByListId(n))return!0}return!1},t.prototype.getBookUpRedByListId=function(e){for(var t=0,i=r.default.SuitConfig[e][1].idList;t<i.length;t++){var n=i[t],a=this.getBookById(n).getNextLevelCost();if(a&&this.score>=a)return!0}},t.prototype.getBookRedById=function(e){return this.getBookById(e).getState()==BookState.canOpen},t.prototype.getBookById=function(e){if(!this.listBook[e]){var t=new f.default;this.listBook[e]=t,t.id=e}return this.listBook[e]},t.prototype.getBookByItemId=function(e){return this.itemBook[e]||(this.itemBook[e]=[]),this.itemBook[e]},t.prototype.getBookPown=function(){var e=r.default.CardConfig,i=0;for(var n in this.listBook){var a=this.listBook[n];if(a.level>-1){var o=e[n][a.level];i+=Math.floor(s.default.getAttrPower(o.attrs))}}var u=[];for(var l in r.default.BookListConfig){var c=r.default.BookListConfig[l],d=t.ins().getSuitNum(c.idList[0]);for(var f in r.default.SuitConfig[c.idList[0]]){var p=r.default.SuitConfig[c.idList[0]][f];if(!(d>=p.count)){i+=Math.floor(s.default.getAttrPower(u)),u=[];break}u=p.attrs}u.length>0&&(i+=Math.floor(s.default.getAttrPower(u)))}return i},t.prototype.getBookPowerNum=function(e,i){var n=u.default.ins().subRolesLen;if(i)for(var a in r.default.SuitConfig)if(-1!=t.jobs.indexOf(Number(a))&&-1!=r.default.SuitConfig[a][1].idList.indexOf(i)){n=1;break}return e*n},t.prototype.getBookPowerNumEx=function(){return this.bookPower},t.prototype.getUpChipData=function(e){var i=[],n=r.default.CardConfig,a=n[e.id],o=0;for(var u in a)a[u].level>e.level&&(o+=a[u].cost);var l=r.default.DecomposeConfig,c=o-e.exp,d=0;for(var u in this.listBook){var f=n[u][1],p=s.default.ins().getBagGoodsCountById(0,f.itemId),h=l[e.id];if(this.listBook[u].level>-1&&p>0)for(var g=0;g<p&&!(d>c);g++)if(d+=h.value,i.push(+u),i.length>=12)return i}return i.sort(t.sort),i},t.sort=function(e,t){if(e==t)return 0;var i=r.default.DecomposeConfig[e],n=r.default.DecomposeConfig[t];return i.value>n.value?1:i.value<n.value?-1:0},t.prototype.getTitleById=function(e){var t=r.default.BookListConfig;for(var i in t)if(-1!=t[i].idList.indexOf(e))return t[i].name;return""},t.prototype.getListData=function(){return this.listBook},t.prototype.sendBookData=function(){var e=this.getBytes(1);this.sendToServer(e)},t.prototype.postDataChange=function(e){if(-1==this.score){var t=r.default.DecomposeConfig;for(var i in t){var n=this.getBookById(+i);this.getBookByItemId(t[i].itemId).push(n)}}for(var a=e.readInt(),o=0;o<a;o++){i=e.readShort();(n=this.getBookById(i)).updateData(e)}var s=e.readInt();if(this.score>-1){var u=s-this.score;u>0&&l.default.ins().showTips("\u83b7\u5f97|C:0xff700f&T:\u56fe\u9274\u7ecf\u9a8cx"+u+"|")}this.score=s,this.bookPower=e.readDouble()},t.prototype.sendOpen=function(e){var t=this.getBytes(2);t.writeShort(e),this.sendToServer(t)},t.prototype.sendDecompose=function(e){var t=this.getBytes(3);t.writeInt(e.length);for(var i=0;i<e.length;i++)t.writeShort(e[i][0]),t.writeShort(e[i][1]);this.sendToServer(t)},t.prototype.sendUp=function(e){var t=this.getBytes(4);t.writeShort(e),this.sendToServer(t)},t.prototype.getDecomposeConfigByItemId=function(e){var t=r.default.DecomposeConfig;return this.itemBook[e]?this.itemBook[e][0]?t[this.itemBook[e][0].id]:null:(c.default.Assert(!1,"\u56fe\u9274\u6570\u636e\u672a\u521d\u59cb\u5316,id="+e+",itemBook keys length="+Object.keys(this.itemBook).length),null)},t.prototype.checkResolveRedPoint=function(){var e=s.default.ins().getBagGoodsByType(d.ItemType.TYPE_9);if(!e.length)return!1;var t=this.itemBook,i={};for(var n in t)for(var a=0,o=t[n];a<o.length;a++){if(o[a].getState()!=BookState.haveOpen){i[n]=!0;break}}for(var r=0,u=e;r<u.length;r++){if(!i[u[r].configID])return!0}return!1},t.prototype.getSuitRedPoint=function(e){var i=this,n=r.default.SuitConfig,a=s.default.ins().getBagGoodsByType(d.ItemType.TYPE_9);if(0==a.length)return!1;for(var o={},l=0,c=a;l<c.length;l++){var f=c[l];o[f.configID]=!0}var p=function(e){for(var a=n[e][1],s=0,l=a.idList;s<l.length;s++){var c=l[s];if(i.listBook[c]&&-1==i.listBook[c].level){var d=t.jobs.indexOf(a.id);if(-1==d){var f=r.default.DecomposeConfig[c];if(o[f.itemId])return!0}else{for(var p=!1,h=0;h<u.default.ins().subRolesLen;h++){if(u.default.ins().getSubRoleByIndex(h).job==d+1){p=!0;break}}if(!p)continue;var g=r.default.CardConfig[c][0];if(g&&o[g.itemId])return!0}}}return!1};if(0!=e)return p(e);for(var h in n)if(p(h))return!0;return!1},t.prototype.getHaveBookSuit=function(e){var t=s.default.ins().getBagGoodsByType(d.ItemType.TYPE_9),i=r.default.SuitConfig[e][1];if(0==t.length)return{ishave:!1,cur:0,target:i.idList.length}},t.jobs=[6,7,8],t}(a.default);i.default=p,window.GameSystem.push(p.ins.bind(p)),cc._RF.pop()},{"../../../core/base/ErrorLog":"ErrorLog","../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../consts/ItemType":"ItemType","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../tips/UserTips":"UserTips","./model/BooKData":"BooKData"}],BossHomeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9b7056y2xBLZ7Oco0oizbv1","BossHomeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.vip=0,this.boss=[],this.icon=[]}}();i.default=n,cc._RF.pop()},{}],BossIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"4152agoZoZPz7WbD+1FuctN","BossIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../fb/UserFb"),o=e("../../task/UserTask"),r=e("../../gamescene/GameLogic"),s=e("../../boss/UserBoss"),u=e("../../zsboss/ZsBoss"),l=e("../PlayFun"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postGuanKaIdChange,o.default.ins().postUpdteTaskTrace,u.default.ins().postBossOpen,r.default.ins().postEnterMap],n.updateMessage=[s.default.ins().postWorldBoss,s.default.ins().postWorldNotice,u.default.ins().postBossList,s.default.ins().postBossData],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return s.default.ins().checkBossIconShow()},t.prototype.checkShowRedPoint=function(){return l.default.ins().newBossRelive||a.default.isCanChallenge()||s.default.ins().checkWorldBossRedPoint(s.default.BOSS_SUBTYPE_QMBOSS)||s.default.ins().checkWorldBossRedPoint(s.default.BOSS_SUBTYPE_WORLDBOSS)||s.default.ins().checkWorldBossRedPoint(s.default.BOSS_SUBTYPE_HOMEBOSS)||s.default.ins().checkWorldBossRedPoint(s.default.BOSS_SUBTYPE_SHENYU)||s.default.ins().checkWorldBossRedPoint(s.default.BOSS_SUBTYPE_DARKBOSS)?1:0},t.prototype.tapExecute=function(){ViewManager.ins().open(BossWin),s.default.ins().postBossData(!1)},t.OpenTaskIndex=41,t}(n.default);i.default=c,cc._RF.pop()},{"../../boss/UserBoss":"UserBoss","../../fb/UserFb":"UserFb","../../gamescene/GameLogic":"GameLogic","../../task/UserTask":"UserTask","../../zsboss/ZsBoss":"ZsBoss","../PlayFun":"PlayFun","./RuleIconBase":"RuleIconBase"}],BoxIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"88e32Z88D5CFZpYr+RMwhpO","BoxIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../manager/TimerManager"),o=e("../../../entity/Actor"),r=e("../../box/Box"),s=e("../../box/model/BoxModel"),u=e("../../../../core/utils/DateUtils"),l=e("../../book/model/BookRedPoint"),c=e("../../../manager/UILoadMgr"),d=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.updateMessage=[r.default.ins().postUpdateData,o.default.ins().postLevelChange,r.default.ins().postUpdateFreeBox],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return this.alertText=cc.instantiate(c.default.inst.getPrefab(c.prefabName.common_lab)).getComponent(cc.Label),s.default.ins().checkCanTake()?this.alertText.string="\u53ef\u9886\u53d6":(this.startTime(),this.runTime()),t},t.prototype.startTime=function(){a.default.ins().isExists(this.runTime,this)||a.default.ins().doTimer(1e3,0,this.runTime,this)},t.prototype.removeTime=function(){a.default.ins().remove(this.runTime,this)},t.prototype.runTime=function(){var e=s.default.ins().getMinBoxTime();e==Number.MAX_VALUE?(this.alertText.string="",this.removeTime()):e<=0?(this.alertText.string="\u53ef\u9886\u53d6",this.removeTime(),this.update()):this.alertText.string=u.default.getFormatBySecond(e,u.default.TIME_FORMAT_12)},t.prototype.checkShowIcon=function(){return!1},t.prototype.checkShowRedPoint=function(){return s.default.ins().checkRedPointShow()||l.default.ins().redpoint?1:0},t.prototype.tapExecute=function(){ViewManager.ins().open(BoxBgWin)},t.prototype.getEffName=function(e){},t}(n.default);i.default=d,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../entity/Actor":"Actor","../../../manager/TimerManager":"TimerManager","../../../manager/UILoadMgr":"UILoadMgr","../../book/model/BookRedPoint":"BookRedPoint","../../box/Box":"Box","../../box/model/BoxModel":"BoxModel","./RuleIconBase":"RuleIconBase"}],BoxItemData:[function(e,t,i){"use strict";cc._RF.push(t,"476fdiR+j1MVpF9LkeJze0w","BoxItemData");cc._RF.pop()},{}],BoxModel:[function(e,t,i){"use strict";cc._RF.push(t,"03102YEBDpLq5rR5JsrtUlj","BoxModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../../manager/GlobalConfig"),o=e("../Box"),r=e("../../../entity/Actor"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.gridCfgList=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getGridCfgList=function(){if(this.gridCfgList.length>0)return this.gridCfgList;var e=a.default.TreasureBoxGridConfig;for(var t in e)this.gridCfgList.push(e[t]);return this.gridCfgList},t.prototype.countBoxTimeCost=function(e,t){var i=a.default.TreasureBoxBaseConfig.moneyCoefficient,n=Math.ceil(e/60)*i,o=1,r=a.default.TreasureBoxConfig[t];return r&&(o=r.quality),n=Math.ceil(o*n)},t.prototype.getOtherBoxIsTimeDown=function(e){var t=0==e?1:0;return o.default.ins().freeInfoList[t].getTime()<=0},t.prototype.getDownTimeIndex=function(){var e=o.default.ins().freeInfoList[0],t=o.default.ins().freeInfoList[1],i=e.getTime(),n=t.getTime();return n>0&&i>0?i>n?t.pos:e.pos:n>0&&i<=0?t.pos:n<=0&&i>0?e.pos:0},t.prototype.checkRedPointShow=function(){if(r.default.level<a.default.TreasureBoxBaseConfig.openLevel)return!1;var e=o.default.ins(),t=e.freeInfoList[0],i=e.freeInfoList[1];if(!t||!i)return!1;if(t.getTime()<=0||i.getTime()<=0)return!0;for(var n=e.arrOpenData,s=e.isHaveFreePos(),u=0;u<n.length;u++){var l=n[u];if(l.itemId>0&&1==l.state&&s)return!0}return!1},t.prototype.checkCanTake=function(){var e=o.default.ins(),t=e.freeInfoList[0],i=e.freeInfoList[1];if(!t||!i)return!1;if(t.getTime()<=0||i.getTime()<=0)return!0;for(var n=0,a=e.arrOpenData;n<a.length;n++){var r=a[n];if(r.itemId>0&&2==r.state&&r.getTime()<=0)return!0}return!1},t.prototype.getMinBoxTime=function(){for(var e=o.default.ins().freeInfoList,t=Number.MAX_VALUE,i=0,n=e;i<n.length;i++){var a=n[i];a&&a.getTime()<t&&(t=a.getTime())}for(var r=0,s=o.default.ins().arrOpenData;r<s.length;r++){var u=s[r];u.itemId>0&&2==u.state&&u.getTime()<t&&(t=u.getTime())}return t},t}(n.default);i.default=s,cc._RF.pop()},{"../../../../core/base/BaseClass":"BaseClass","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../Box":"Box"}],BoxOpenData:[function(e,t,i){"use strict";cc._RF.push(t,"99a53TSifNBG6Hgf2HAPFoz","BoxOpenData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../Utils/EgretUtils"),a=e("../../../manager/GlobalConfig"),o=function(){function e(){this.itemId=0,this.canUsed=!0}return e.prototype.updateData=function(e){this.pos=e.readShort(),this.itemId=e.readShort(),this.state=e.readShort(),this.remindTime=e.readInt(),this.updateTime=n.default.getTimer()},e.prototype.getTime=function(){return Math.floor((1e3*this.remindTime+this.updateTime-n.default.getTimer())/1e3)},e.prototype.getDetailData=function(){for(var e=a.default.TreasureBoxConfig[this.itemId].desc,t=a.default.TreasureBoxConfig[this.itemId].rewards,i=[],n=0;n<e.length;n++){var o=new BoxItemData;o.desc=e[n],o.reward=t[n],i.push(o)}return i},e}();i.default=o;var r=function(){function e(){this.statu=1}return e.prototype.updateData=function(e){this.pos=e.readShort(),this.remindTime=e.readInt(),this.updateTime=n.default.getTimer()},e.prototype.getTime=function(){return Math.max(Math.floor((1e3*this.remindTime+this.updateTime-n.default.getTimer())/1e3),0)},e}();i.BoxFreeData=r,cc._RF.pop()},{"../../../Utils/EgretUtils":"EgretUtils","../../../manager/GlobalConfig":"GlobalConfig"}],BoxRoomData:[function(e,t,i){"use strict";cc._RF.push(t,"8ca79htGlBByrwp1xw86W/a","BoxRoomData");(function(){function e(){this.itemId=0,this.canUsed=!0}e.prototype.updateData=function(e){this.itemId=e.readShort(),this.itemId&&(this.name=GlobalConfig.TreasureBoxConfig[this.itemId].name)}})();cc._RF.pop()},{}],BoxTipsData:[function(e,t,i){"use strict";cc._RF.push(t,"af1bdKoE29IeKaDq8Mz56y9","BoxTipsData");cc._RF.pop()},{}],Box:[function(e,t,i){"use strict";cc._RF.push(t,"35c1c2Rx7BBlZIkTuwfkPNg","Box"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/MessageCenter"),a=e("../../../core/net/PackageID"),o=e("../../base/BaseSystem"),r=e("../../manager/GlobalConfig"),s=e("../vip/UserVip"),u=e("../../manager/TimerManager"),l=e("../tips/UserTips"),c=e("../activity/model/RewardData"),d=e("./model/BoxOpenData"),f=function(e){function t(){var i=e.call(this)||this;return i.arrOpenData=[],i.freeInfoList=[],i.sysId=a.PackageID.Box,n.default.compile(t),i.regNetMsg(1,i.updateBoxData),i.regNetMsg(2,i.getBox),i.regNetMsg(3,i.updateTipsList),i.regNetMsg(5,i.getBoxNotice),i.regNetMsg(6,i.doShowRewardInfo),i.arrTips=[],i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postUpdateData=function(){},t.prototype.postUpdateFreeBox=function(){},t.prototype.getGridInfoById=function(e){for(var t=0;t<this.arrOpenData.length;t++)if(this.arrOpenData[t].pos==e)return this.arrOpenData[t];return null},t.prototype.isHaveFreePos=function(){for(var e=0,t=0;t<this.arrOpenData.length;t++)2==this.arrOpenData[t].state&&this.arrOpenData[t].getTime()>0&&++e;return(s.default.ins().lv>=r.default.TreasureBoxBaseConfig.thirdOpenLevel?2:1)>e},t.prototype.updateBoxQueue=function(){},t.prototype.canAdd=function(){for(var e=1;e<4;e++)if(this.arrOpenData[e].canUsed&&0==this.arrOpenData[e].itemId)return!0;return!1},t.prototype.getAddIndex=function(){for(var e=1;e<4;e++)if(this.arrOpenData[e].canUsed&&0==this.arrOpenData[e].itemId)return e;return 0},t.prototype.updateBoxData=function(e){var t=e.readShort();this.arrOpenData=[];for(var i=0;i<t;i++){(n=new d.default).updateData(e),this.arrOpenData.push(n)}t=e.readShort(),this.freeInfoList=[];for(i=0;i<t;i++){var n;(n=new d.BoxFreeData).updateData(e),this.freeInfoList.push(n)}u.default.ins().removeAll(this),this.postUpdateData()},t.prototype.sendOpen=function(e){var t=this.getBytes(2);t.writeShort(e),this.sendToServer(t)},t.prototype.getBox=function(e){l.default.ins().showBoxTips(e.readShort())},t.prototype.sendAddToQueue=function(e){var t=this.getBytes(3);t.writeShort(e),this.sendToServer(t)},t.prototype.updateTipsList=function(e){for(var t=e.readShort(),i=0;i<t;i++){var n=new BoxTipsData;n.id=e.readShort(),n.name=e.readString(),this.arrTips.push(n)}this.postUpdateData()},t.prototype.sendOpenFreeBox=function(e){var t=this.getBytes(4);t.writeShort(e),this.sendToServer(t)},t.prototype.getBoxNotice=function(e){l.default.ins().showRewardBox(e.readShort())},t.prototype.doShowRewardInfo=function(e){for(var t=e.readShort(),i=e.readShort(),n=[],a=0;a<i;a++){var o=new c.default;o.parser(e),n.push(o)}ViewManager.ins().open(BoxOpenWin,t,n)},t}(o.default);i.default=f,window.GameSystem.push(f.ins.bind(f)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../activity/model/RewardData":"RewardData","../tips/UserTips":"UserTips","../vip/UserVip":"UserVip","./model/BoxOpenData":"BoxOpenData"}],BresenhamLine:[function(e,t,i){"use strict";cc._RF.push(t,"640c1nGg6NApoQqJvn4Obz0","BresenhamLine"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../game/map/GameMap"),a=function(){function e(){}return e.isAbleToThrough=function(e,t,i,a){var o,r,s,u,l,c,d=0,f=0,p=0,h=0,g=0;for(this.throughCheckResult||(this.throughCheckResult=new Array(4)),this.throughCheckResult[0]=0,this.throughCheckResult[1]=0,c=a-(l=(a-t)/(i-e))*i,s=i>e?1:-1,u=a>t?1:-1,r=a>>0,d=((d=(i>>0)-(o=e>>0))^d>>31)-(d>>31),f=o,h=t>>0,this.throughCheckResult[2]=f,this.throughCheckResult[3]=h,g=0;g<d;g++){for(p=l*(f+=s)+c>>0;h!=p;){if(h+=u,!n.default.checkWalkable(f,h))return this.throughCheckResult;this.throughCheckResult[2]=f,this.throughCheckResult[3]=h}if(!n.default.checkWalkable(f,p))return this.throughCheckResult;this.throughCheckResult[2]=f,this.throughCheckResult[3]=p}for(;h!=r;){if(h+=u,!n.default.checkWalkable(f,h))return this.throughCheckResult;this.throughCheckResult[2]=f,this.throughCheckResult[3]=h}return this.throughCheckResult[0]=1,this.throughCheckResult},e.tileLine=function(e,t,i,n){for(var a=(n-t)/(i-e),o=n-a*i,r=i>e?1:-1,s=Math.abs(i-e),u=[],l=0;l<s;++l){var c=e+l*r>>0,d=a*c+o>>0;u.push(c),u.push(d)}return u},e.getPointOnLine=function(e,t,i,n,a){var o,r,s,u;return s=i-e,u=n-t,r=(o=Math.sqrt(s*s+u*u))+a,[Math.round(e+s*r/o),Math.round(t+u*r/o)]},e.shortenPath=function(t,i,n,a){var o,r,s,u=t,l=i,c=n[n.length-2],d=n[n.length-1];n.length>=4&&(u=n[n.length-4],l=n[n.length-3]),(o=c-u)*o+(r=d-l)*r>a*a?(s=e.getPointOnLine(u,l,c,d,-a),n[n.length-2]=s[0],n[n.length-1]=s[1]):n.length-=2},e}();i.default=a,cc._RF.pop()},{"../../game/map/GameMap":"GameMap"}],BubbleConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ebc30W9+sVBPLT0iY+wNZ2u","BubbleConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.bubbleid=0,this.news="",this.type=0}}();i.default=n,cc._RF.pop()},{}],BuySpecialWin:[function(e,t,i){"use strict";cc._RF.push(t,"99beeKL/bdIb6BgOZgDtbeC","BuySpecialWin"),cc._RF.pop()},{}],BuyWin:[function(e,t,i){"use strict";cc._RF.push(t,"71a5e8WWPVIFrW4gsdNpWYl","BuyWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t}return __extends(t,e),t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.getChipNumRule=function(){},t.prototype.updateView=function(){},t}(n.default);i.default=o,cc._RF.pop()},{"../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager"}],CDkeyIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"d5c41agb+xAC7UEs3xjwUJx","CDkeyIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../fb/UserFb"),o=e("../../../entity/Actor"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=e("../../fuli/UserFuLi"),l=e("../../notice/Notice"),c=e("../../check_in/daily/DailyCheckIn"),d=e("../../activity/Activity"),f=e("../../recharge/Recharge"),p=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[o.default.ins().postLevelChange,a.default.ins().postGuanqiaInfo,a.default.ins().postGuanKaIdChange],n.updateMessage=[u.default.ins().postMoneyInfoChange,l.default.ins().postGameNotice,c.default.ins().postCheckInData,d.default.ins().postSevendayIsAwards,f.default.ins().postFranchiseInfo,d.default.ins().postActivityIsGetAwards],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return r.default.ins().checkSysOpen(s.SystemType.FULI)},t.prototype.checkShowRedPoint=function(){return c.default.ins().showRedPoint()||d.default.ins().getSevenDayStast()||f.default.ins().franchise&&f.default.ins().franchiseget||d.default.ins().checkNoticeRed()?1:0},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){ViewManager.ins().open(FuliWin),this.update()},t}(n.default);i.default=p,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../check_in/daily/DailyCheckIn":"DailyCheckIn","../../fb/UserFb":"UserFb","../../fuli/UserFuLi":"UserFuLi","../../notice/Notice":"Notice","../../opensystem/OpenSystem":"OpenSystem","../../recharge/Recharge":"Recharge","./RuleIconBase":"RuleIconBase"}],CRC16:[function(e,t,i){"use strict";cc._RF.push(t,"b69c6gTDB9Bar+UE2xwr/WV","CRC16"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.update=function(t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var a=0,o=0;0==n&&(n=t.length),t.position=i;for(var r=i;r<n;++r)o=255&e.CRCBitReflect(t.readByte(),8)^a>>8&16777215,o&=255,a=e.CRCTable[o]^a<<8&4294967040;return 65535&(0^e.CRCBitReflect(a,16))},e.makeCRCTable=function(){for(var t=0,i=new Array(256),n=0;n<256;++n){t=n<<8&4294967040;for(var a=0;a<8;++a)t=32768&t?t<<1&4294967294^e.POLYNOMIAL:t<<1&4294967294;i[n]=t}return i},e.CRCBitReflect=function(t,i){var n=0,a=0;i--;for(var o=0;o<=i;++o)a=i-o,1&t&&(n|=1<<a&e.DropBits[a]),t=t>>1&2147483647;return n},e.POLYNOMIAL=4129,e.CRCTable=e.makeCRCTable(),e.DropBits=[4294967295,4294967294,4294967292,4294967288,4294967280,4294967264,4294967232,4294967168,4294967040,4294966784,4294966272,4294965248,4294963200,4294959104,4294950912,4294934528],e}();i.default=n,cc._RF.pop()},{}],CaiKuangConfig:[function(e,t,i){"use strict";cc._RF.push(t,"cd11akfV7VGyYAJrCc1jHJd","CaiKuangConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],CampBattleConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6e2c6ECsuFB9ZMRzL/Ofk8f","CampBattleConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],CampBattlePersonalAwardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5d739+NvC5CgZ9d6xWMvfdL","CampBattlePersonalAwardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],CampBattlePersonalRankAwardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9caad/9epxPCL12VjXUW3Cx","CampBattlePersonalRankAwardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],CardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"1111fovQzNA7p4p7ewf/VtC","CardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],CashCowAmplitudeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b98fa7/1l5F8ItjVCrjgfp2","CashCowAmplitudeConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],CashCowBasicConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6d6303TRZpNh6lUVKiOuB/n","CashCowBasicConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],CashCowBoxConfig:[function(e,t,i){"use strict";cc._RF.push(t,"cae9cTpywpKgIVxgf/xcmwf","CashCowBoxConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],CashCowLimitConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2e4248Jhw5NqKJ0RZkBueSY","CashCowLimitConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],CelebrationIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"956a1931fBMkbQL1QyLgbpA","CelebrationIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=e("../../activity/model/ActivityDataFactory"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!r.default.ins().checkSysOpen(s.SystemType.CELEBRATION))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==u.ActivityPageStyle.CELEBRATION&&n.isOpenActivity()&&!n.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==u.ActivityPageStyle.CELEBRATION&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(CelebrationWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],ChaptersConfig:[function(e,t,i){"use strict";cc._RF.push(t,"57847i/+71HbqkleNgO7sxW","ChaptersConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ChaptersRewardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e320dLhCNhEh60i3zJvqDkN","ChaptersRewardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],CharEffect:[function(e,t,i){"use strict";cc._RF.push(t,"cc648oIX89LObHrRnqrexWZ","CharEffect"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../module/gamescene/const/EntityAction"),a=e("../base/EntityManager"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.myHeight=a.default.CHAR_DEFAULT_HEIGHT,t.typeface=a.default.CHAR_DEFAULT_TYPEFACE,t._dir=4,t._state=n.EntityAction.STAND,t}return __extends(t,e),Object.defineProperty(t.prototype,"infoModel",{get:function(){return this._infoModel},set:function(e){this._infoModel=e},enumerable:!0,configurable:!0}),t.prototype.updateModel=function(){},Object.defineProperty(t.prototype,"dir",{get:function(){return this._dir},set:function(e){this._dir!=e&&(this._dir=e)},enumerable:!0,configurable:!0}),t.prototype.removeAll=function(){},Object.defineProperty(t.prototype,"weight",{get:function(){return this.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"team",{get:function(){return this.infoModel.team},enumerable:!0,configurable:!0}),t.prototype.destroySelf=function(){this.removeAll()},t.ACTION_ODER={8:[n.EntityAction.STAND,n.EntityAction.RUN,n.EntityAction.ATTACK]},t}(cc.Node);i.default=o,cc._RF.pop()},{"../base/EntityManager":"EntityManager","../module/gamescene/const/EntityAction":"EntityAction"}],CharMiner:[function(e,t,i){"use strict";cc._RF.push(t,"5cb0a/l27hFwY2XwCyUF5ar","CharMiner"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./CharNpc"),a=e("../module/server/GameServer"),o=e("../module/mine/MineData"),r=e("../base/ObjectPool"),s=function(e){function t(){return e.call(this)||this}return __extends(t,e),Object.defineProperty(t.prototype,"infoModel",{get:function(){return this._infoModel},set:function(e){this._infoModel=e},enumerable:!0,configurable:!0}),t.prototype.updateModel=function(){e.prototype.updateModel.call(this),this.updateTime(),this.updateTitleState()},t.prototype.updateTime=function(){Math.floor((this.infoModel.endTime-a.default.serverTime)/1e3)>=0||o.default.ins().remove(this.infoModel.index)},t.prototype.updateTitleState=function(){},t.prototype.destruct=function(){this.destroy(),r.default.push(this)},t}(n.default);i.default=s,cc._RF.pop()},{"../base/ObjectPool":"ObjectPool","../module/mine/MineData":"MineData","../module/server/GameServer":"GameServer","./CharNpc":"CharNpc"}],CharModel:[function(e,t,i){"use strict";cc._RF.push(t,"09c98AfGCBJVJxFDcfwM3sV","CharModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./EntityModel"),a=e("../module/activity/model/RewardData"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.parserItemData=function(e){this.itemData=new a.default,this.itemData.parser(e)},t}(n.default);i.default=o,cc._RF.pop()},{"../module/activity/model/RewardData":"RewardData","./EntityModel":"EntityModel"}],CharMonster:[function(e,t,i){"use strict";cc._RF.push(t,"02b52z8ZFFCzq/K6/TJHYzZ","CharMonster"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./CharEffect"),a=e("../ai/RoleAI"),o=e("../../core/utils/TextFlowMaker"),r=e("../base/EntityManager"),s=e("../map/GameMap"),u=e("../../core/base/AttributeType"),l=e("../manager/UILoadMgr"),c=e("../base/ObjectPool"),d=e("../manager/TimerManager"),f=e("../../core/utils/MathUtils"),p=e("../../core/utils/Util"),h=e("../module/gamescene/const/EntityAction"),g=e("../manager/GlobalConfig"),y=e("./CharRole"),v=e("../module/specialring/LyMarkEffect"),m=e("../../core/utils/DisplayUtils"),b=e("../module/gamescene/const/SkillEffType"),_=function(e){function t(){var t=e.call(this)||this;t.AI_STATE=a.AI_State.Stand,t.cutHpVal=0,t.maxHpVal=0,t.publicCD=0,t.nextPatrolTick=0,t.myKill=!1,t.isShowBody=!0,t.canMove=!1,t.moveRange=-1,t.moveLimTime=-1,t.moveMaxTime=-1,t.buffList={},t.buffEff={},t.damageOverTimeList={},t.createTweenObj(),t.effs={};var i=l.default.inst.getPrefab(l.prefabName.common_rich),n=cc.instantiate(i);t.addChild(n),t.mostName=n.getComponent(cc.RichText);var o=l.default.inst.getPrefab(l.prefabName.common_lab),r=cc.instantiate(o);return t.addChild(r),r.position=cc.v2(0,30),t._hpBar=r.getComponent(cc.Label),t.hashCode=p.Util.gethashcode(),t}return __extends(t,e),Object.defineProperty(t.prototype,"infoModel",{get:function(){return this._infoModel},set:function(e){this._infoModel=e,-1!=g.default.FlameStamp.monsterId.indexOf(e.configID)?this._lyMark||(this._lyMark=new v.default(e)):this._lyMark&&this.clearLyMark()},enumerable:!0,configurable:!0}),t.prototype.setCharName=function(e){this.mostName.string=o.default.generateTextFlow(e)},t.prototype.setNameTxtColor=function(e){},t.prototype.usedLyMarkSkill=function(){this._lyMark&&this._lyMark.usedLyMarkSkill()},t.prototype.createTweenObj=function(){var e=this;this.moveTweenObj={set x(t){e.x=t>>0},set y(t){e.y=t>>0},get x(){return e.x},get y(){return e.y}}},t.prototype.playAction=function(e,t){},t.prototype.stopMove=function(){this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.canMove=!1,cc.tween(this.moveTweenObj).stop()},Object.defineProperty(t.prototype,"dir",{get:function(){if(this.infoModel){var e=this.infoModel.getDir();return e<0?this._dir:e}return this._dir},set:function(e){this._dir!=e&&this._state!=h.EntityAction.DIE&&(this._dir=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"action",{get:function(){return this._state},set:function(e){this._state!=h.EntityAction.DIE&&(this._state=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"moveSpeed",{get:function(){return this.infoModel?this.infoModel.getAtt(u.AttributeType.atMoveSpeed)/1e3*s.default.CELL_SIZE:0},enumerable:!0,configurable:!0}),t.prototype.hram=function(e){this.cutHpVal=Math.min(this.cutHpVal-e,this.infoModel.getAtt(u.AttributeType.atMaxHp)),this.team!=a.Team.My&&this instanceof y.default&&console.log(this.infoModel.handle,"\u6263\u8840\uff1a",e,"\u5269\u4f59\u8840\u91cf\uff1a",this.cutHpVal)},t.prototype.getHP=function(){return this.cutHpVal},t.prototype.getRealHp=function(){return this.infoModel.getAtt(u.AttributeType.atHp)},t.prototype.reset=function(){this._state=h.EntityAction.STAND,this.AI_STATE=a.AI_State.Stand,this.dir=4,this.myKill=!1,this.removeAllFilters()},t.prototype.onDead=function(e){this.stopMove(),this.showBlood(!1),this.showName(!1),this.playAction(h.EntityAction.DIE),e&&d.default.ins().doTimer(300,1,e,this)},t.prototype.destruct=function(){this.destroySelf()},t.prototype.destroySelf=function(){e.prototype.destroy.call(this),this.deadDelay(),this.AI_STATE=a.AI_State.Stand,this.clearLyMark(),this.removeAllEffect(),this.removeAllFilters(),d.default.ins().removeAll(this),this.stopMove(),m.default.removeFromParent(this)},t.prototype.deadDelay=function(){this.cutHpVal=0,this.removeHardStraight(),this.removeAllBuff(),this.atking=!1},t.prototype.clearLyMark=function(){this._lyMark&&(this._lyMark.destruct(),this._lyMark=null)},t.prototype.addHardStraight=function(e){this.isHardStraight=!0,d.default.ins().doTimer(e,1,this.removeHardStraight,this)},t.prototype.removeHardStraight=function(){this.isHardStraight=!1},t.prototype.isAtkAction=function(){return this._state==h.EntityAction.ATTACK||this._state==h.EntityAction.CAST},t.prototype.showBodyContainer=function(){this.isShowBody||(this.isShowBody=!0,this._lyMark&&this._lyMark.showBall())},t.prototype.hideBodyContainer=function(){this.isShowBody&&(this.isShowBody=!1,this._lyMark&&this._lyMark.hideBall())},t.prototype.getIsShowBody=function(){return this.isShowBody},t.prototype.resetStand=function(){this.isAtkAction()&&this.playAction(h.EntityAction.STAND)},t.prototype.hasEffById=function(e){return!(!this.effs||!this.effs[e])},t.prototype.updateBlood=function(e){void 0===e&&(e=!1),this.infoModel&&(this.maxHpVal=this.infoModel.getAtt(u.AttributeType.atMaxHp),!e&&r.default.ins().getTeamCount(a.Team.WillEntity)>0&&0==s.default.fubenID||(this.cutHpVal=this.infoModel.getAtt(u.AttributeType.atHp)))},Object.defineProperty(t.prototype,"isCanAddBlood",{get:function(){return this.cutHpVal/this.maxHpVal<.8},enumerable:!0,configurable:!0}),t.prototype.damageOverTime=function(e){console.log("\u6301\u7eed\u4f24\u5bb3")},t.prototype.addEffect=function(e){g.default.EffectConfig[e]},t.prototype.addHalo=function(e){},t.prototype.removeEffect=function(e){var t=g.default.EffectConfig[e];t&&t.type},t.prototype.removeAllEffect=function(){this.effs={}},t.prototype.hasBuff=function(e){return!!this.buffList[e]},t.prototype.addBuff=function(e){var t=e.effConfig,i=t.group,n=this.buffList[i];if(n){if(2==n.effConfig.overlayType){var a=n.multRate+1;a>n.effConfig.overMaxCount&&(a=n.effConfig.overMaxCount),e.multRate=a}this.removeBuff(n)}if(this.buffList[i]=e,t.effName,t.effID&&this.addEffect(t.effID),e.effConfig.type==b.SkillEffType.AdditionalState&&e.effConfig.args&&9==e.effConfig.args.i){var o=e.effConfig.duration;this.addHardStraight(o)}this.addGroup(i)},t.prototype.removeBuff=function(e){var t=e.effConfig,i=t.group;if(this.buffList[i]==e&&(e.dispose(),c.default.push(this.buffList[i]),delete this.buffList[i],this.buffEff[i]&&(m.default.removeFromParent(this.buffEff[i]),delete this.buffEff[i]),t.effID&&this.removeEffect(t.effID),t.unionBuff)){var n=this.buffList[t.unionBuff];n&&this.removeBuff(n)}this.removeGroup(i)},t.prototype.removeAllBuff=function(){for(var e in this.buffList)this.removeBuff(this.buffList[e])},t.prototype.addPaoPao=function(e){},Object.defineProperty(t.prototype,"team",{get:function(){return this._infoModel.team},enumerable:!0,configurable:!0}),t.prototype.startPatrol=function(){if(d.default.ins().getCurrTime()>this.nextPatrolTick){var e=this.getPointCanMove();e&&(s.default.moveEntity(this,e.x,e.y),this.nextPatrolTick=d.default.ins().getCurrTime()+f.default.limit(this.moveLimTime,this.moveMaxTime))}},t.prototype.setMoveAtt=function(e){this.moveRange=e[0],this.moveLimTime=e[1][0],this.moveMaxTime=e[1][1]},t.prototype.getPointCanMove=function(){for(var e,t=0,i=this.moveRange;t<100;){var n=f.default.limit(this.x-i>>0,this.x+i>>0),a=f.default.limit(this.y-i>>0,this.y+i>>0);if(s.default.checkWalkableByPixel(n,a)){(e=cc.v2()).x=n,e.y=a;break}t++}return e},t.prototype.playCount=function(){return this._state==h.EntityAction.RUN||this._state==h.EntityAction.STAND?-1:1},t.prototype.shakeIt=function(){var e=this;this.action!=h.EntityAction.STAND&&this.action!=h.EntityAction.HIT||this.moveSpeed&&this.playAction(h.EntityAction.HIT,function(){e.playAction(h.EntityAction.STAND)})},t.prototype.showName=function(e){this.mostName.node.active=e},t.prototype.showBlood=function(e){e&&this.infoModel&&"\u795e\u517d"==this.infoModel.name||(this._hpBar.node.active=e)},Object.defineProperty(t.prototype,"isMy",{get:function(){return this.infoModel.isMy},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weight",{get:function(){return this._infoModel&&this.team==a.Team.My&&this instanceof y.default?this.y+32:this.y},enumerable:!0,configurable:!0}),t.prototype.updateModel=function(){this.removeAll(),this.parseModel()},t.prototype.parseModel=function(){var e=this.infoModel;e.team!=a.Team.My&&(this.updateBlood(!0),this.setCharName(e.name)),e.avatarEffect&&""!=e.avatarEffect&&this.addHalo(e.avatarEffect),e.movePara&&this.setMoveAtt(e.movePara)},t.prototype.addGroup=function(e){},t.prototype.removeGroup=function(e){},t.prototype.updateFilter=function(){},t.prototype.setFilter=function(e){},t.prototype.setMcFilter=function(e){},t.prototype.setMcFilterPlayOrStop=function(e){},t.prototype.removeAllFilters=function(){},t}(n.default);i.default=_,cc._RF.pop()},{"../../core/base/AttributeType":"AttributeType","../../core/utils/DisplayUtils":"DisplayUtils","../../core/utils/MathUtils":"MathUtils","../../core/utils/TextFlowMaker":"TextFlowMaker","../../core/utils/Util":"Util","../ai/RoleAI":"RoleAI","../base/EntityManager":"EntityManager","../base/ObjectPool":"ObjectPool","../manager/GlobalConfig":"GlobalConfig","../manager/TimerManager":"TimerManager","../manager/UILoadMgr":"UILoadMgr","../map/GameMap":"GameMap","../module/gamescene/const/EntityAction":"EntityAction","../module/gamescene/const/SkillEffType":"SkillEffType","../module/specialring/LyMarkEffect":"LyMarkEffect","./CharEffect":"CharEffect","./CharRole":"CharRole"}],CharNpc:[function(e,t,i){"use strict";cc._RF.push(t,"a0d91+hr8JHm41MAWzYp0xd","CharNpc"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./CharEffect"),a=e("../module/gamescene/const/EntityAction"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),Object.defineProperty(t.prototype,"infoModel",{get:function(){return this._infoModel},set:function(e){this._infoModel=e},enumerable:!0,configurable:!0}),t.prototype.playCount=function(){return this._state==a.EntityAction.RUN||this._state==a.EntityAction.STAND?-1:1},t.prototype.updateModel=function(){this.dir=this.infoModel.dir},t}(n.default);i.default=o,cc._RF.pop()},{"../module/gamescene/const/EntityAction":"EntityAction","./CharEffect":"CharEffect"}],CharRole:[function(e,t,i){"use strict";cc._RF.push(t,"4499ciY7BROrrSLOnTGWwqA","CharRole"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./CharMonster"),a=e("../manager/GlobalConfig"),o=e("../map/GameMap"),r=e("../ai/RoleAI"),s=e("../manager/TimerManager"),u=e("../module/gamescene/const/SkillEffType"),l=e("../module/battle/BattleCC"),c=e("../../core/base/MessageCenter"),d=e("../../core/base/AttributeType"),f=e("../base/EntityManager"),p=e("../module/gamescene/const/EntityAction"),h=e("../module/gamescene/GameLogic"),g=e("../consts/DamageTypes"),y=e("../../core/base/ErrorLog"),v=e("../module/tips/UserTips"),m=e("../module/godweapon/GodWeaponCC"),b=e("../module/artifact/Artifact"),_=e("../module/fb/UserFb"),C=function(e){function t(){var t=e.call(this)||this;return t.ringMc=[],t.zhanLingAttack=!1,t.AI_STATE=r.AI_State.Stand,t}return __extends(t,e),t.prototype.createTweenObj=function(){var e=this;this.moveTweenObj={set x(t){e.x=t>>0,e.moveCamera()},set y(t){e.y=t>>0,e.moveCamera()},get x(){return e.x},get y(){return e.y}}},t.prototype.updateBlood=function(t){var i=this;void 0===t&&(t=!1),e.prototype.updateBlood.call(this,t),this.cutHpVal<=0&&this.onDead(function(){i.deadDelay()})},t.prototype.updateModel=function(){e.prototype.updateModel.call(this)},t.prototype.parseModel=function(){var e=this.infoModel;this.setCharName(e.guildAndName),this.setLilian(e.lilianUrl),this.updateBlood(!0),this.updateNeiGong(),this.updateTitle(),this.updateNameColor()},t.prototype.updateNameColor=function(){var e=this.infoModel;void 0!=e?e.camp>0&&l.default.ins().isBattle()?this.setNameTxtColor(e.camp!=l.default.ins().camp?16711680:65280):this.team==r.Team.WillEntity?this.setNameTxtColor(16776960):this.setNameTxtColor(16777215):console.error("\u89d2\u8272\u66f4\u65b0\u6570\u636e\u5f02\u5e38\uff0cmoidel\u4e3a\u7a7a")},t.prototype.setHeirloomSuitEff=function(){var e=this.infoModel;if(void 0!=e&&e.heirloom){var t=e.heirloom.getSuitConfig(e);t&&t.weff&&this.setHeirloomFileName(t.weff)}},t.prototype.addBuff=function(t){e.prototype.addBuff.call(this,t);var i=t.effConfig;if(0==o.default.fubenID)switch(i.type){case u.SkillEffType.Summon:var n=void 0;if(this.team==r.Team.My){var s=b.default.ins().getReviseBySkill(35001),l=m.default.ins().getReviseBySkill(35001),c=void 0;l&&(c=l[0]);var f=i.args.a;s&&s.args&&s.args[0]&&(f+=s.args[0].vals[2]),c&&c.args&&c.args[0]&&(f+=c.args[0].vals[2]),(n=_.default.createModel(a.default.MonstersConfig[f])).x=this.x,n.y=this.y,n.masterHandle=this.infoModel.handle,n.setAtt(d.AttributeType.atMoveSpeed,this.infoModel.getAtt(d.AttributeType.atMoveSpeed));var p=0,g=n.getAtt(d.AttributeType.atAttack);if(s&&s.args&&s.args[0]){var y=s.args[0].vals[3]?s.args[0].vals[3]:1;p+=this.infoModel.getAtt(d.AttributeType.atAttack)*y}if(c&&c.args&&c.args[0]){y=c.args[0].vals[3]?c.args[0].vals[3]:1;p+=this.infoModel.getAtt(d.AttributeType.atAttack)*y}n.setAtt(d.AttributeType.atAttack,(p>>0)+g)}else(n=_.default.createModel(a.default.MonstersConfig[i.args.a])).x=this.x,n.y=this.y,n.masterHandle=this.infoModel.handle,n.setAtt(d.AttributeType.atMoveSpeed,this.infoModel.getAtt(d.AttributeType.atMoveSpeed));n.isMy=n.checkHandleIsMy(n.masterHandle),h.default.ins().createEntityByModel(n,this.team)}},t.prototype.updateNeiGong=function(){if(this.infoModel)this.infoModel.getAtt(d.AttributeType.maxNeiGong)},t.prototype.checkNeigongVisible=function(){return 0!=this.infoModel.getAtt(d.AttributeType.maxNeiGong)&&this._state!=p.EntityAction.DIE},t.prototype.updateTitle=function(){},t.prototype.updateRingMC=function(){for(var e in this.ringMc)this.ringMc[e]&&(null==this.ringMc[e].parent&&this.addChild(this.ringMc[e]),this.ringMc[e].setEffectXY(this.dir))},t.prototype.setCharName=function(t){e.prototype.setCharName.call(this,t)},t.prototype.setLilian=function(e){},Object.defineProperty(t.prototype,"infoModel",{get:function(){return this._infoModel},set:function(e){e?this._infoModel=e:console.error("\u8bbe\u7f6einfoModel\u5f02\u5e38,\u5bf9\u8c61\u4e3a\u7a7a")},enumerable:!0,configurable:!0}),t.prototype.autoAddBlood=function(){if(this.action!=p.EntityAction.DIE){if(this.getRealHp()<this.infoModel.getAtt(d.AttributeType.atMaxHp)){var e=-this.infoModel.getAtt(d.AttributeType.atRegeneration);this.hram(e);var t=this.infoModel.getAtt(d.AttributeType.atHp)-e,i=this.infoModel.getAtt(d.AttributeType.atMaxHp);this.infoModel.setAtt(d.AttributeType.atHp,t>i?i:t),h.default.ins().postEntityHpChange(this,null,g.DamageTypes.HIT,e)}s.default.ins().doTimer(1e3,1,this.autoAddBlood,this)}},t.prototype.showNeigong=function(e){},t.prototype.showZhanling=function(e,t){var i=a.default.ZhanLingLevel[0][t];i.talentLevel&&(i=a.default.ZhanLingLevel[e][t],y.default.Assert(i,"\u6218\u7075\u5929\u8d4b\u7b49\u7ea7\u914d\u7f6e\u4e3a\u7a7a\uff1aid("+e+"),lv("+t+")")||(s.default.ins().remove(this.playZhanLingAttack,this),s.default.ins().doTimer(200,1,this.playZhanLingAttack,this),s.default.ins().remove(this.hideZhanling,this),s.default.ins().doTimer(3e3,1,this.hideZhanling,this)))},t.prototype.playZhanLingAttack=function(){this.zhanLingAttack=!0},t.prototype.hideZhanling=function(){},t.prototype.reset=function(){e.prototype.reset.call(this),this.zhanLingAttack=!1,this.AI_STATE=r.AI_State.Stand},t.prototype.destruct=function(){for(var t in e.prototype.destruct.call(this),this.AI_STATE=r.AI_State.Stand,this.ringMc)this.ringMc[t]&&(this.ringMc[t].reset(),this.ringMc[t]=null,delete this.ringMc[t])},t.prototype.deadDelay=function(){this.cutHpVal=0,this.stopMove(),this.removeHardStraight(),this.removeAllBuff(),this.hideZhanling(),this.atking=!1,s.default.ins().removeAll(this)},t.prototype.showNameAndHp=function(){},t.prototype.showBodyContainer=function(){this.isShowBody||e.prototype.showBodyContainer.call(this)},t.prototype.hideBodyContainer=function(){this.isShowBody&&e.prototype.hideBodyContainer.call(this)},t.prototype.moveCamera=function(){if(this==f.default.ins().getNoDieRole()){h.default.ins().postMoveCamera();var e={x:o.default.point2Grip(this.x),y:o.default.point2Grip(this.y)};!this.sefety&&o.default.checkSafety(e)?(v.default.ins().showCenterTips("|C:0x00ff00&T:\u8fdb\u5165\u5b89\u5168\u533a|"),this.sefety=!0):this.sefety&&!o.default.checkSafety(e)&&(v.default.ins().showCenterTips("|C:0xff0000&T:\u79bb\u5f00\u5b89\u5168\u533a|"),this.sefety=!1)}},t.prototype.isSafety=function(){var e={x:o.default.point2Grip(this.x),y:o.default.point2Grip(this.y)};return o.default.checkSafety(e)},t.prototype.onDead=function(e){this.stopMove(),this.playAction(p.EntityAction.DIE,e)},t.prototype.stopMove=function(){e.prototype.stopMove.call(this),this==f.default.ins().getNoDieRole()&&h.default.ins().postAdjustMapPos()},__decorate([c.callLater],t.prototype,"moveCamera",null),t}(n.default);i.default=C,cc._RF.pop()},{"../../core/base/AttributeType":"AttributeType","../../core/base/ErrorLog":"ErrorLog","../../core/base/MessageCenter":"MessageCenter","../ai/RoleAI":"RoleAI","../base/EntityManager":"EntityManager","../consts/DamageTypes":"DamageTypes","../manager/GlobalConfig":"GlobalConfig","../manager/TimerManager":"TimerManager","../map/GameMap":"GameMap","../module/artifact/Artifact":"Artifact","../module/battle/BattleCC":"BattleCC","../module/fb/UserFb":"UserFb","../module/gamescene/GameLogic":"GameLogic","../module/gamescene/const/EntityAction":"EntityAction","../module/gamescene/const/SkillEffType":"SkillEffType","../module/godweapon/GodWeaponCC":"GodWeaponCC","../module/tips/UserTips":"UserTips","./CharMonster":"CharMonster"}],CharTransfer:[function(e,t,i){"use strict";cc._RF.push(t,"dc93dVi5KJGMKvUM3ONfv/8","CharTransfer"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("./CharEffect").default);i.default=n,cc._RF.pop()},{"./CharEffect":"CharEffect"}],ChatDataBase:[function(e,t,i){"use strict";cc._RF.push(t,"8483fcgZEdKLoxxYxBvaq86","ChatDataBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ChatInfoData:[function(e,t,i){"use strict";cc._RF.push(t,"2a426OFw3dPw7SoTpldVXnz","ChatInfoData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(t){void 0===t&&(t=null);var i=e.call(this)||this;return i.type=0,i.id=0,i.servId=0,i.name="",i.job=0,i.sex=0,i.vip=0,i.monthCard=0,i.ladderLevel=0,i.pointId=0,i.str="",i.isFirst=0,i.zsLevel=0,i.lv=0,i.guild="",i.titleId=0,t&&(i.type=t.readByte(),i.id=t.readUnsignedInt(),i.servId=t.readInt(),i.name=t.readString(),i.job=t.readByte(),i.sex=t.readByte(),i.vip=t.readByte(),i.monthCard=t.readByte(),i.ladderLevel=t.readByte(),i.isFirst=t.readByte(),i.zsLevel=t.readUnsignedByte(),i.lv=t.readShort(),i.guild=t.readString(),i.pointId=t.readUnsignedInt(),i.str=t.readString()),i}return __extends(t,e),t}(e("./ChatDataBase").default);i.default=n,cc._RF.pop()},{"./ChatDataBase":"ChatDataBase"}],ChatSystemData:[function(e,t,i){"use strict";cc._RF.push(t,"bd505nVLRBAZpLEOt/xVS4x","ChatSystemData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(t,i){var n=e.call(this)||this;return n.type=t,n.str=i,n}return __extends(t,e),t}(e("./ChatDataBase").default);i.default=n,cc._RF.pop()},{"./ChatDataBase":"ChatDataBase"}],Chat:[function(e,t,i){"use strict";cc._RF.push(t,"78251TnhQxE1ovjyN1LAg63","Chat"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../tips/UserTips"),r=e("../report/ReportData"),s=e("../../entity/Actor"),u=(e("../gamescene/GameLogic"),e("../../manager/TimerManager")),l=e("../server/GameServer"),c=e("./model/ChatInfoData"),d=e("../../../core/base/MessageCenter"),f=e("../kf/KFServerSys"),p=e("../kf/kfBoss/KFBossSys"),h=e("../friends/Friends"),g=function(e){function t(){var i=e.call(this)||this;return i.isShowTip=!1,i.chatInterval=5e3,i.charMax=50,i.canSpeak=!0,i.UpSpeak="",i.canSpeakTime=0,i.initData(),d.default.compile(t),i.sysId=a.PackageID.Chat,i.regNetMsg(1,i.doNewChatMsg),i.regNetMsg(2,i.doSystemInfo),i.regNetMsg(3,i.doIsSendSuccess),i.regNetMsg(4,i.doSystemMessage),i.regNetMsg(5,i.doCannotSpeak),i}return __extends(t,e),t.prototype.initData=function(){},t.ins=function(){return e.ins.call(this)},t.prototype.sendChatInfo=function(e,t,i){if(void 0===i&&(i=0),t.length<=0)o.default.ins().showTips("|C:0xf3311e&T:\u8bf7\u8f93\u5165\u804a\u5929\u5185\u5bb9|");else{if("@"==t.charAt(0)){var n=this.getBytes(0);return n.writeString(t),void this.sendToServer(n)}var a=this.getBytes(1);a.writeByte(e),a.writeUnsignedInt(i),a.writeString(t),this.sendToServer(a),7==e&&this.isCanSpeak()&&r.default.getIns().reportChat(t,4)}},t.prototype.doNewChatMsg=function(e){var t=new c.default(e);-1==h.default.ins().indexOfBlackList(t.id)&&this.insertChatMsg(t)},t.prototype.insertChatMsg=function(e){if(this._chatListData||(this._chatListData=new eui.ArrayCollection),this._chatListData.length>=this.charMax){var t=this._chatListData.removeItemAt(0);this.removeAllChatMsg(t)}this._chatListData.addItem(e),this.insertAllChatMsg(e),this.postNewChatMsg(e)},t.prototype.insertAllChatMsg=function(e){this._chatListData2||(this._chatListData2=new eui.ArrayCollection),this._chatListData2.addItem(e)},t.prototype.removeAllChatMsg=function(e){var t=this._chatListData2.getItemIndex(e);t>=0&&this._chatListData2.removeItemAt(t)},t.prototype.removeChatWithId=function(e){if(this._chatListData&&this._chatListData.length){for(var t=[],i=0;i<this._chatListData.length;i++){var n=this._chatListData.getItemAt(i);n.id!=e&&t.push(n)}this._chatListData.source=t,this._chatListData.refresh()}},t.prototype.postNewChatMsg=function(e){return e},t.prototype.doSystemInfo=function(e){},t.prototype.doIsSendSuccess=function(e){e.readBoolean()&&this.postSendInfoSuccess()},t.prototype.postSendInfoSuccess=function(){},t.prototype.doSystemMessage=function(e){var t=e.readInt(),i=e.readInt(),n=e.readString();if(0==t||s.default.level>=t)switch(i){case 8:o.default.ins().showCenterTips2(n);break;case 4:ErrorLog.ins().show(n);break;case 2:o.default.ins().showCenterTips(n);break;default:o.default.ins().showTips(n)}},t.prototype.doCannotSpeak=function(e){this.canSpeakTime=e.readInt()},t.prototype.isCanSpeak=function(){return!(this.canSpeakTime&&this.canSpeakTime>l.default.serverTime/1e3)},Object.defineProperty(t.prototype,"chatListData",{get:function(){return this._chatListData||(this._chatListData=new eui.ArrayCollection),this._chatListData},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chatListData2",{get:function(){return this._chatListData2||(this._chatListData2=new eui.ArrayCollection),this._chatListData2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chatListTip",{get:function(){this._chatListData||(this._chatListData=new eui.ArrayCollection([]));var e,t,i=this._chatListData.length;return i>2?(e=i-2,t=i):(e=0,t=i),this._chatListData.source.slice(e,t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"chatListTip2",{get:function(){this._chatListData2||(this._chatListData2=new eui.ArrayCollection([]));var e,t,i=this._chatListData2.length;return i>2?(e=i-2,t=i):(e=0,t=i),this._chatListData2.source.slice(e,t)},enumerable:!0,configurable:!0}),t.prototype.startInterval=function(){this.canSpeak=!1,u.default.ins().doTimer(this.chatInterval,1,this.timeDo,this)},t.prototype.timeDo=function(){this.canSpeak=!0},t.prototype.postSysChatMsg=function(e){return console.log("\u7cfb\u7edf\u6d88\u606f\uff1a",e.str),e},Object.defineProperty(t.prototype,"systemListData",{get:function(){return this._systemListData||(this._systemListData=new eui.ArrayCollection([])),this._systemListData},enumerable:!0,configurable:!0}),t.prototype.checkRepeatString=function(e){var t=e.length;if(t<=10)return!0;for(var i=0,n=0;n<t;n++){var a=e.charAt(n);-1!=this.UpSpeak.lastIndexOf(a)&&++i}return!(i>=10)||(o.default.ins().showTips("|C:0xf3311e&T:\u8f93\u5165\u7684\u5185\u5bb9\u91cd\u590d\u8fc7\u591a|"),!1)},t.prototype.getWorldStr=function(){return f.default.ins().isKF||p.default.ins().isKFBossBattle?"\u8de8\u670d":"\u4e16\u754c"},t}(n.default);i.default=g,window.GameSystem.push(g.ins.bind(g)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/TimerManager":"TimerManager","../friends/Friends":"Friends","../gamescene/GameLogic":"GameLogic","../kf/KFServerSys":"KFServerSys","../kf/kfBoss/KFBossSys":"KFBossSys","../report/ReportData":"ReportData","../server/GameServer":"GameServer","../tips/UserTips":"UserTips","./model/ChatInfoData":"ChatInfoData"}],CheckInConfigMgr:[function(e,t,i){"use strict";cc._RF.push(t,"691fdrY6/VLbZttk40a6yij","CheckInConfigMgr"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../../manager/GlobalConfig"),o=e("../../../../core/base/ErrorLog"),r=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getMonthRewardCfg_Daily=function(){if(!this.monthListConfig||this.monthListConfig.length<=0){this.monthListConfig=[];var e=a.default.MonthSignConfig;for(var t in e)this.monthListConfig.push(e[t])}return this.monthListConfig},t.prototype.getSingleRewardCfg_Daily=function(e){var t=this.getMonthRewardCfg_Daily();if(t){var i=t[e-1];return o.default.Assert(i,"MonthSignConfig("+e+")")?null:i}return null},t.prototype.getVipCfg_Daily=function(e){var t=a.default.MonthSignVipConfig[e];return o.default.Assert(t,"MonthSignVipConfig("+e+")")?null:t},t}(n.default);i.default=r,cc._RF.pop()},{"../../../../core/base/BaseClass":"BaseClass","../../../../core/base/ErrorLog":"ErrorLog","../../../manager/GlobalConfig":"GlobalConfig"}],CheckInData:[function(e,t,i){"use strict";cc._RF.push(t,"812b342pmNLfZilGiop/aRj","CheckInData");(function(){function e(){}e.prototype.paser=function(e){this.cDate=e.readShort(),this.rewardState=e.readShort()}})();cc._RF.pop()},{}],ChongZhi1Config:[function(e,t,i){"use strict";cc._RF.push(t,"10642rvYjRJc7UKm9UOvsI/","ChongZhi1Config"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ChongZhi2Config:[function(e,t,i){"use strict";cc._RF.push(t,"e3ef6mErUJDGpvpdNeHcyq/","ChongZhi2Config"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ChongZhiConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d0417cCaZhK7JPh200XYlWD","ChongZhiConfig");cc._RF.pop()},{}],ChristmasIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"2cbafw1dUZIxIk1RrkbiCWU","ChristmasIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=e("../../activity/model/ActivityDataFactory"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postYbChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!r.default.ins().checkSysOpen(s.SystemType.CHRISTMAS))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==u.ActivityPageStyle.CHRISTMAS&&n.isOpenActivity()&&!n.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==u.ActivityPageStyle.CHRISTMAS&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(ChristmasDayWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],CityBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"86a58V2qLRP/bP8yMdaDGMS","CityBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],CityBossConfig:[function(e,t,i){"use strict";cc._RF.push(t,"0b7bah1wm5DQru0GnEu06fj","CityBossConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],CityCC:[function(e,t,i){"use strict";cc._RF.push(t,"39da2+eCF5C9Jxs3COHapPa","CityCC"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../boss/UserBoss"),r=e("../../manager/TimerManager"),s=e("../../base/EntityManager"),u=e("../../../core/base/MessageCenter"),l=function(e){function t(){var i=e.call(this)||this;return i.cityBossId=0,i.cityBossHandle=0,i.attStatue=2,i.bossKillNumData={},i.sysId=a.PackageID.City,i.enterCD=0,u.default.compile(t),i}return __extends(t,e),t.prototype.getBossList=function(){var e=new Array;for(var t in GlobalConfig.CityBossConfig){var i=GlobalConfig.CityBossConfig[t];-1==e.indexOf(i.bossId)&&i.killBossId>999&&e.push(i.bossId)}return new eui.ArrayCollection(e)},t.prototype.getCityBossConfig=function(e){var t;for(var i in GlobalConfig.CityBossConfig)if(GlobalConfig.CityBossConfig[i].bossId==e&&GlobalConfig.CityBossConfig[i].killBossId>999){t=GlobalConfig.CityBossConfig[i];break}return t},t.prototype.getKillBossNum=function(e){var i=t.ins().getCityBossConfig(e).killBossId,n=0;void 0!=t.ins().bossKillNumData[i]&&(n=t.ins().bossKillNumData[i][0]);var a=this.getNeedKillBossNum(e);return(e==this.cityBossId||n>a)&&(n=a),n},t.prototype.getNeedKillBossNum=function(e){var i=t.ins().getCityBossConfig(e),n=i.killBossId,a=0;return void 0!=t.ins().bossKillNumData[n]&&(a=t.ins().bossKillNumData[n][1]),a>=i.killCount.length&&(a=i.killCount.length-1),i.killCount[a]},t.prototype.getRefreshTime=function(e){var i,n=t.ins().getCityBossConfig(e).killBossId,a=0;return void 0!=t.ins().bossKillNumData[n]&&(a=t.ins().bossKillNumData[n][2]),0==a?i="":(a=DateUtils.formatMiniDateTime(a),i=DateUtils.checkTime(a,7)||0==a?"":DateUtils.formatFullTime(a)),i},t.prototype.postBossInfo=function(e){for(var t=e.readShort(),i=0;i<t;i++){var n=e.readInt(),a=e.readInt(),o=e.readInt(),r=e.readInt();this.bossKillNumData[n]=[a,o,r]}},t.prototype.postCityBossId=function(e){o.default.ins().monsterID=this.cityBossId=e.readInt(),o.default.ins().bossHandler=this.cityBossHandle=e.readDouble(),this.changeFunView()},t.prototype.getMaxKillNumBoss=function(){var e,t=0,i=0,n=0,a=Number.MAX_VALUE,o=!1,r=0;for(var s in this.bossKillNumData)if(!(+s<999)){var u=(e=this.getCfgByKillBossId(parseInt(s))).killCount[this.bossKillNumData[s][1]];if(void 0==u&&(u=e.killCount[e.killCount.length-1]),(n=this.bossKillNumData[s][0]/u)>=1)return[t,n];t||o||0!=this.bossKillNumData[s][2]||(o=!0,r=e.bossId,i=n),this.bossKillNumData[s][2]&&this.bossKillNumData[s][2]<a&&(t=e.bossId,a=this.bossKillNumData[s][2],i=n)}return[t||r,i]},t.prototype.getShowBossId=function(){return this.cityBossId>0?this.cityBossId:this.getMaxKillNumBoss()[0]},t.prototype.getCfgByKillBossId=function(e){for(var t in GlobalConfig.CityBossConfig)if(GlobalConfig.CityBossConfig[t].killBossId==e)return GlobalConfig.CityBossConfig[t];return null},t.prototype.createStatue=function(e){if(void 0===e&&(e=-1),this.isCity){var t={};t[RankDataType.TYPE_POWER]="chenghaotxdy",t[RankDataType.TYPE_LILIAN]="chenghaomdtx",t[RankDataType.TYPE_SKIRMISH]="chenghaoslzw";var i,n,a=ViewManager.ins().getView(GameSceneView);if(-1==e){var o=GuildWar.ins().getModel().winGuildInfo;n=GlobalConfig.CityBaseConfig.masterPos,i=new StatueView("chenghaolcbz",o.guildOwnName||"\u865a\u4f4d\u4ee5\u5f85","diaoxiang0_"+o.guildOwnSex)}else{if(!(n=GlobalConfig.CityBaseConfig.statuePos[e]))return;var r=Rank.ins().getRankModel(e).praise,s=3;if(r.subRole[0])s=r.subRole[0].job;else switch(e){case RankDataType.TYPE_POWER:s=1;break;case RankDataType.TYPE_SKIRMISH:s=2}i=new StatueView(t[e],r.name||"\u865a\u4f4d\u4ee5\u5f85","statue_"+s+"_"+(r.subRole[0]?r.subRole[0].sex:0))}i.x=n.x,i.y=n.y,a.map.addEntity(i)}},t.prototype.sendEnter=function(){this.sendBaseProto(1)},t.prototype.sendStopAI=function(){this.sendBaseProto(2)},t.prototype.sendRevival=function(){this.sendBaseProto(3)},t.prototype.postEnterCity=function(){this.isCity=!0,this.cityBossId>0&&this.isChallenge&&(this.isChallenge=!1,r.default.ins().doNext(function(){var e=ViewManager.ins().getView(BossBelongPanel);e&&e.attrBoss()},this)),this.changeFunView(),ViewManager.ins().open(CityFunPanel),Rank.ins().sendGetRankingData(),Rank.ins().sendGetPraiseData(RankDataType.TYPE_POWER),Rank.ins().sendGetPraiseData(RankDataType.TYPE_SKIRMISH),Rank.ins().sendGetPraiseData(RankDataType.TYPE_LILIAN),GuildWar.ins().requestWinGuildInfo()},t.prototype.postEscCity=function(){this.isCity=!1,this.attStatue=2,ViewManager.ins().close(CityFunPanel),ViewManager.ins().close(BossBelongPanel),ViewManager.ins().close(BossBloodPanel),ViewManager.ins().close(TargetPlayerBigBloodPanel)},t.prototype.postChangeAttStatue=function(e){return this.attStatue=e,this.changeFunView(),e},t.prototype.changeFunView=function(){this.isCity&&(2==this.attStatue&&0==this.cityBossId?ViewManager.ins().open(PlayFunView):ViewManager.ins().close(PlayFunView),0==this.cityBossId?(ViewManager.ins().close(BossBloodPanel),ViewManager.ins().close(BossBelongPanel)):(ViewManager.ins().open(BossBelongPanel),ViewManager.ins().open(BossBloodPanel)))},t.prototype.postCityBossBelong=function(e){var t=e.readDouble(),i=e.readDouble(),n="";if(t>0){var a=s.default.ins().getMasterList(t);a&&a[0]&&a[0].infoModel&&(n=a[0].infoModel.name)}o.default.ins().postBelongChange(i,t,n)},t.prototype.postRemainTime=function(e){o.default.ins().reliveTime=e.readShort(),o.default.ins().killerHandler=e.readDouble(),o.default.ins().reliveTime>0?(o.default.ins().clearWorldBossList(),ViewManager.ins().open(WorldBossBeKillWin)):ViewManager.ins().close(WorldBossBeKillWin)},t.prototype.postHudunPoint=function(e){e&&(this.hudun=e.readInt(),this.huDunMax=e.readInt(),r.default.ins().remove(this.hudunPointFun,this),this.hudun>0&&r.default.ins().doTimer(1e3,t.ins().hudun,this.hudunPointFun,this))},t.prototype.hudunPointFun=function(){t.ins().hudun--,this.postHudunPoint(null)},t.prototype.postEnterCD=function(e){this.enterCD=e.readInt(),r.default.ins().remove(this.enterCDFun,this),this.enterCD>0&&r.default.ins().doTimer(1e3,this.enterCD,this.enterCDFun,this)},t.prototype.enterCDFun=function(){this.enterCD--},t.ins=function(){return e.ins.call(this)},t}(n.default);i.default=l,window.GameSystem.push(l.ins.bind(l)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../manager/TimerManager":"TimerManager","../boss/UserBoss":"UserBoss"}],CityIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"62e6b6FJ2dNPIXIwpR/Ja9V","CityIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../gamescene/GameLogic"),o=e("../../../entity/Actor"),r=e("../../../map/GameMap"),s=e("../../opensystem/OpenSystem"),u=e("../../../consts/SystemConst"),l=e("../../server/GameServer"),c=e("../../tips/UserTips"),d=e("../../encounter/Encounter"),f=e("../../city/CityCC"),p=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postEnterMap,o.default.ins().postLevelChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return r.default.sceneInMain()&&s.default.ins().checkSysOpen(u.SystemType.CITYMONSTER)},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.tapExecute=function(){l.default.serverOpenDay?s.default.ins().checkSysOpen(u.SystemType.CITY)&&r.default.sceneInMain()&&(d.default.ins().isEncounter()?c.default.ins().showTips("|C:0xf3311e&T:\u6b63\u5728\u6311\u6218\u9644\u8fd1\u7684\u4eba|"):f.default.ins().enterCD<1?f.default.ins().sendEnter():c.default.ins().showTips("\u51b7\u5374\u4e2d\uff0c"+f.default.ins().enterCD+"\u79d2\u540e\u53ef\u8fdb\u5165\u4e3b\u57ce")):c.default.ins().showTips("|C:0xff0000&T:\u6682\u672a\u5f00\u653e\uff0c\u5f00\u670d\u7b2c\u4e8c\u5929\u5f00\u542f")},t.prototype.getEffName=function(e){},t}(n.default);i.default=p,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../map/GameMap":"GameMap","../../city/CityCC":"CityCC","../../encounter/Encounter":"Encounter","../../gamescene/GameLogic":"GameLogic","../../opensystem/OpenSystem":"OpenSystem","../../server/GameServer":"GameServer","../../tips/UserTips":"UserTips","./RuleIconBase":"RuleIconBase"}],CityMonsterIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"67edfGmDNlClaOFAlHj14E9","CityMonsterIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../city/CityCC"),r=e("../../server/GameServer"),s=e("../../opensystem/OpenSystem"),u=e("../../../consts/SystemConst"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postLevelChange],n.updateMessage=[o.default.ins().postBossInfo,o.default.ins().postCityBossId],n}return __extends(t,e),t.prototype.createTar=function(){return e.prototype.createTar.call(this)},t.prototype.checkShowIcon=function(){return r.default.serverOpenDay&&s.default.ins().checkSysOpen(u.SystemType.CITYMONSTER)},t.prototype.checkShowRedPoint=function(){return o.default.ins().cityBossId},t.prototype.tapExecute=function(){ViewManager.ins().open(CityBossView)},t.prototype.getEffName=function(e){},t.prototype.updateIcon=function(){},t}(n.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../city/CityCC":"CityCC","../../opensystem/OpenSystem":"OpenSystem","../../server/GameServer":"GameServer","./RuleIconBase":"RuleIconBase"}],ClientGlobalConfig:[function(e,t,i){"use strict";cc._RF.push(t,"651c60LdfVHjbxpqEQdh8yM","ClientGlobalConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ColorUtil:[function(e,t,i){"use strict";cc._RF.push(t,"b2be939VulPArgp1nuQYN76","ColorUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.mergeARGB=function(e,t,i,n){return e<<24|t<<16|i<<8|n},e.getChannel=function(e,t){return 0},e.numberToString=function(e,t){return void 0===t&&(t="#"),t+e.toString(16)},e.ALPHA="#f3311e00",e.RED="#f3311e",e.GREEN="#35e62d",e.BLUE="#0000FF",e.NORMAL_COLOR="#D1C28F",e.RED_COLOR_N="#F3311E",e.GREEN_COLOR_N="#35E62D",e.GRAY_COLOR2="#838383",e.WHITE_COLOR2="#D1C28F",e.WHITE_COLOR="#D1C28F",e.RED_COLOR="#F3311E",e.GREEN_COLOR="#35E62D",e.GRAY_COLOR="#8B898B",e.COLOR_STR=["\u767d\u8272","\u7eff\u8272","\u7d2b\u8272","\u6a59\u8272","\u7ea2\u8272","\u91d1\u8272"],e.ROLENAME_COLOR_YELLOW="#FFCE0B",e.ROLENAME_COLOR_GREEN="#35E62D",e.ROLENAME_COLOR_NORMAL="#35E62D",e.JUEWEI_COLOR=["#e2dfd4","#35e62d","#81adff","#e27dff","#ff9649","#fc5959","#ffd93f","#ffff00"],e}();i.default=n,cc._RF.pop()},{}],"Colour.ts":[function(e,t,i){"use strict";cc._RF.push(t,"bdd3aREAFJAYYsFoQW8jwv/","Colour.ts"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e["\u7ea2\u8272"]="#DD2A2A",e["\u7eff\u8272"]="#50E621",e["\u7d2b\u8272"]="#B236D1",e["\u6a59\u8272"]="#BD5811"}(i.Colour||(i.Colour={})),cc._RF.pop()},{}],CommonHelpWin:[function(e,t,i){"use strict";cc._RF.push(t,"7bd8dDhY29Nv6Hf2gS21BLi","CommonHelpWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../../core/base/ViewManager"),r=e("../../../../core/utils/TextFlowMaker"),s=cc._decorator,u=s.ccclass,l=(s.property,function(e){function t(){var t=e.call(this)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.skinName="HelpTipsSkin",t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEndEvent(this,this.otherClose),this.textInfo.textFlow=r.default.generateTextFlow(e[0]),this.textInfo.height=this.textInfo.textHeight,this.background.height=this.textInfo.textHeight+60,this.anigroup.y=(StageUtils.ins().getHeight()-this.background.height)/2},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeEventListener(egret.TouchEvent.TOUCH_END,this.otherClose,this)},t.prototype.otherClose=function(e){o.default.ins().close(this)},t=__decorate([u],t)}(n.default));i.default=l,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/TextFlowMaker":"TextFlowMaker","../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager"}],CommonUtils:[function(e,t,i){"use strict";cc._RF.push(t,"84b7fPWDHBHz7NDH862U04A","CommonUtils"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.getObjectLength=function(e){var t=0;for(var i in e)t++;return t},t.getObjectByAttr=function(e,t,i){for(var n in e)if(e[n][t]==i)return e[n];return null},t.getObjectByUnionAttr=function(e,t,i){for(var n in e)if(n==t.toString())for(var a in e[n])if(a==i.toString())return e[n][a];return null},t.copyDataHandler=function(e){var t;if(e instanceof Array)t=[];else{if(!(e instanceof Object))return e;t={}}for(var i=Object.keys(e),n=0,a=i.length;n<a;n++){var o=i[n];t[o]=this.copyDataHandler(e[o])}return t},t.objectToArray=function(e){if(e instanceof Object){e=this.copyDataHandler(e);for(var t=[],i=Object.keys(e),n=0,a=i.length;n<a;n++){var o=i[n];e[o]&&t.push(e[o])}return t}return e},t.labelIsOverLenght=function(e,t){e.string=this.overLength(t)},t.overLength=function(e){var t=null;return e<1e5?t=Math.floor(e)+"":e>1e8?(e/=1e8,t=(e=Math.floor(10*e)/10)+"\u4ebf"):(e/=1e4,t=(e=Math.floor(10*e)/10)+"\u4e07"),t},t.overLengthChange=function(e){var t=null;return e<1e4?t=Math.floor(e)+"":e>1e8?(e/=1e8,t=(e=Math.floor(10*e)/10)+"\u4ebf"):(e/=1e4,t=(e=Math.floor(10*e)/10)+"\u4e07"),t},t}(e("../base/BaseClass").default);i.default=n,cc._RF.pop()},{"../base/BaseClass":"BaseClass"}],ComponentUtil:[function(e,t,i){"use strict";cc._RF.push(t,"ee157FcT8FLz7ji4Mm69Ld0","ComponentUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./Util"),a=function(){function e(){}return e.getComponentScriptName=function(e){var t=e.name;return t=t.match(/<(\S*)>/)[1]},e.hasComponent=function(e,t){if(n.Util.isNullOrUndefined(e))return!1;var i=e.getComponent(t);return!n.Util.isNullOrUndefined(i)},e.clearNodeFrom=function(e,t,i){if(void 0===i&&(i=!0),!(n.Util.isNullOrUndefined(e)||t>=e.length)){for(var a=t;a<e.length;a++)e[a].node.removeFromParent(i);e.length=t}},e.createEventHandler=function(e,t,i,n){void 0===n&&(n="");var a=new cc.Component.EventHandler;return a.target=e,a.component=t,a.handler=i,a.customEventData=n,a},e.equalEvent=function(e,t,i,n,a){if(t instanceof cc.Node)return e.target==t&&e.component==i&&e.handler==n&&e.customEventData==a;var o=t;return e.target==o.target&&e.component==o.component&&e.handler==o.handler&&e.customEventData==o.customEventData},e}();i.ComponentUtil=a,cc._RF.pop()},{"./Util":"Util"}],ComposePanel:[function(e,t,i){"use strict";cc._RF.push(t,"72e47IUakJHA6134C4aTv3Z","ComposePanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){var t=e.call(this)||this;return t._id=-1,t._index=-1,t}return __extends(t,e),t.prototype.initData=function(){},t.prototype.childrenCreated=function(){this.initUI()},t.prototype.initUI=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.initView(),this.updateState(),void 0!=e[0]&&void 0!=e[1]&&void 0!=e[2]&&this.selectList(e[0],e[1],e[2])},t.prototype.initView=function(){},Object.defineProperty(t.prototype,"id",{get:function(){return this._id},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"index",{get:function(){return this._index},enumerable:!0,configurable:!0}),t.prototype.buffUpdata=function(){},t.prototype.updateState=function(){},t.prototype.updateView=function(e,t,i){void 0===i&&(i=0)},t.prototype.refushBarList=function(e){},t.prototype.unSelectList=function(){},t.prototype.selectList=function(e,t,i){},t.prototype.close=function(){},t}(e("../../../../core/view/BaseEuiView").default);i.default=n,cc._RF.pop()},{"../../../../core/view/BaseEuiView":"BaseEuiView"}],CreateScene:[function(e,t,i){"use strict";cc._RF.push(t,"147fdusoyZC7oMOXgTjOdxt","CreateScene"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./core/base/MessageCenter"),a=e("./game/rolemgr/RoleMgr"),o=e("./game/enum/Colour.ts"),r=e("./game/module/tips/UserTips"),s=cc._decorator,u=s.ccclass,l=s.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.renzhunanFram=null,t.yaozunvFrame=null,t.mozunvFrame=null,t.roleSpr=null,t.roleCheckGroup=null,t.roledesc1=null,t.roledesc2=null,t.roledesc3=null,t.inputName=null,t.sex=0,t.job=1,t}var i;return __extends(t,e),i=t,t.prototype.start=function(){i.inst=this;var e=this.roleCheckGroup.toggleItems[0];e.isChecked=!0,this.onToggleCheckClick(e),""==a.default.nickName?a.default.ins().sendRandomName(this.sex):this.setRoleNickName(a.default.nickName),this.observe(a.default.ins().postCreateRole,this.createRuselt)},t.prototype.observe=function(e,t){n.default.ins().addListener(e,t,this)},t.prototype.setRoleNickName=function(e){this.inputName.string=e},t.prototype.onRandNickNameClick=function(){a.default.ins().sendRandomName(this.sex)},t.prototype.onToggleCheckClick=function(e){"toggle1"==e.target.name?(this.roleSpr.spriteFrame=this.renzhunanFram,this.roledesc1.string="\u4eba\u65cf\uff0c\u5929\u5730\u7075\u7269\u4ea7\u7269",this.roledesc2.string="\u667a\u6167\u3001\u575a\u97e7\u3001\u4e0d\u5c48...",this.roledesc3.string="\u4e00\u4e2a\u5149\u8363\u800c\u575a\u6bc5\u7684\u79cd\u65cf\uff0c\u4ed6\u4ee3\u8868\u7740\u6218\u58eb",this.sex=0,this.job=1):"toggle2"==e.target.name?(this.roleSpr.spriteFrame=this.yaozunvFrame,this.roledesc1.string="\u5996\u65cf,\u5927\u81ea\u7136\u7684\u5ba0\u513f",this.roledesc2.string="\u64c5\u957f\u4f7f\u7528\u5404\u7c7b\u6bd2\u86ca\uff0c\u9a6f\u670d\u52a8\u7269",this.roledesc3.string="\u4e00\u4e2a\u6d3b\u6cfc\u800c\u53ef\u7231\u7684\u79cd\u65cf\uff0c\u5979\u4ee3\u8868\u7740\u5c04\u624b",this.sex=1,this.job=3):"toggle3"==e.target.name&&(this.roleSpr.spriteFrame=this.mozunvFrame,this.roledesc1.string="\u9b54\u65cf,\u795e\u65cf\u540e\u88d4",this.roledesc2.string="\u4fca\u7f8e\u65e0\u6bd4\u3001\u9ad8\u50b2\u3001\u5d07\u62dc\u529b\u91cf...",this.roledesc3.string="\u4e00\u4e2a\u9ad8\u8d35\u800c\u795e\u79d8\u7684\u79cd\u65cf\uff0c\u5979\u4ee3\u8868\u6cd5\u5e08",this.sex=1,this.job=2)},t.prototype.onEdiBoxEnd=function(e){a.default.nickName=e.string},t.prototype.onStartBtnClick=function(){a.default.ins().sendCreateRole(this.inputName.string,this.sex,this.job,0)},t.prototype.createRuselt=function(e){r.default.ins().showTips("\u89d2\u8272\u540d\u91cd\u590d",o.Colour.\u7ea2\u8272),6==Math.abs(e)&&a.default.ins().sendRandomName(this.sex)},t.inst=null,__decorate([l({type:cc.SpriteFrame,displayName:"\u4eba\u65cf\u7537\u56fe"})],t.prototype,"renzhunanFram",void 0),__decorate([l({type:cc.SpriteFrame,displayName:"\u5996\u65cf\u5973\u56fe"})],t.prototype,"yaozunvFrame",void 0),__decorate([l({type:cc.SpriteFrame,displayName:"\u9b54\u65cf\u5973\u56fe"})],t.prototype,"mozunvFrame",void 0),__decorate([l({type:cc.Sprite,displayName:"\u89d2\u8272"})],t.prototype,"roleSpr",void 0),__decorate([l({type:cc.ToggleContainer,displayName:"\u89d2\u8272\u9009\u62e9\u7ec4"})],t.prototype,"roleCheckGroup",void 0),__decorate([l({type:cc.Label,displayName:"\u4eba\u7269\u63cf\u8ff01"})],t.prototype,"roledesc1",void 0),__decorate([l({type:cc.Label,displayName:"\u4eba\u7269\u63cf\u8ff02"})],t.prototype,"roledesc2",void 0),__decorate([l({type:cc.Label,displayName:"\u4eba\u7269\u63cf\u8ff03"})],t.prototype,"roledesc3",void 0),__decorate([l({type:cc.EditBox,displayName:"\u8f93\u5165\u6846"})],t.prototype,"inputName",void 0),t=i=__decorate([u],t)}(cc.Component);i.default=c,cc._RF.pop()},{"./core/base/MessageCenter":"MessageCenter","./game/enum/Colour.ts":"Colour.ts","./game/module/tips/UserTips":"UserTips","./game/rolemgr/RoleMgr":"RoleMgr"}],CrossArenaBase:[function(e,t,i){"use strict";cc._RF.push(t,"d0bef1nscFHGrAPdSpegec4","CrossArenaBase"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],CrossArenaDataStruct:[function(e,t,i){"use strict";cc._RF.push(t,"51e0fSfx05AuIA7zDzvsUpH","CrossArenaDataStruct");cc._RF.pop()},{}],CrossArenaScore:[function(e,t,i){"use strict";cc._RF.push(t,"32ce9i8gJBF+6UDAQVnkmDz","CrossArenaScore"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],CrossBossBase:[function(e,t,i){"use strict";cc._RF.push(t,"c6320fIEa5CbKRrz4+wyM+T","CrossBossBase"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],CrossBossConfig:[function(e,t,i){"use strict";cc._RF.push(t,"c842cebRQNKIq7rcXxP9uaf","CrossBossConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],DailyAwardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b4211ScYZ9K5YbJDDLd9QXq","DailyAwardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],DailyCheckIn:[function(e,t,i){"use strict";cc._RF.push(t,"fc418klUlJPmrKUrX1Cocja","DailyCheckIn"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../../base/BaseSystem"),o=e("../../../../core/net/PackageID"),r=e("../../../manager/GlobalConfig"),s=e("../../../../core/base/MessageCenter"),u=function(e){function t(){var i=e.call(this)||this;return i._loginTimes=0,i.conLoginTimes=0,i.todayReward=!1,i.comTimesIndexList=[],s.default.compile(t),i.sysId=o.PackageID.DailyCheckIn,i.regNetMsg(1,i.postCheckInData),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},Object.defineProperty(t.prototype,"loginTimes",{get:function(){return this._loginTimes},enumerable:!0,configurable:!0}),t.prototype.postCheckInData=function(e){this._loginTimes=e.readShort(),this.todayReward=e.readBoolean(),this.conLoginTimes=e.readShort(),this.rewardIndex=e.readShort()},t.prototype.sendCheckIn=function(e){var t=this.getBytes(1);t.writeShort(e),this.sendToServer(t)},t.prototype.sendReCheckIn=function(e){var t=this.getBytes(2);t.writeShort(e),this.sendToServer(t)},t.prototype.postCheckIn=function(e){return e},t.prototype.sendGetReward=function(e){var t=this.getBytes(3);t.writeInt(e),this.sendToServer(t)},t.prototype.postComplement=function(e){return e},t.prototype.showRedPoint=function(){return this.canNormalCheckIn()||this.checkConReward()},t.prototype.canNormalCheckIn=function(){return!this.todayReward},t.prototype.checkConReward=function(){var e=this.getRewardList(this.rewardIndex)?this.getRewardList(this.rewardIndex).days:0;return this.conLoginTimes>=e},t.prototype.getCheckInState=function(e){return e>this.loginTimes?n.notYet:e<this.loginTimes?n.hasChecked:this.todayReward?n.hasChecked:n.canCheck},t.prototype.getRewardDays=function(){return 0},t.prototype.getRewardList=function(e){return r.default.MonthSignDaysConfig[e+1]?r.default.MonthSignDaysConfig[e+1]:null},t}(a.default);i.default=u,window.GameSystem.push(u.ins.bind(u)),function(e){e[e.notYet=0]="notYet",e[e.canCheck=1]="canCheck",e[e.hasChecked=2]="hasChecked"}(n||(n={})),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../../core/net/PackageID":"PackageID","../../../base/BaseSystem":"BaseSystem","../../../manager/GlobalConfig":"GlobalConfig"}],DailyConfig:[function(e,t,i){"use strict";cc._RF.push(t,"0f630g1ACpOA47pBkWH7KCP","DailyConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],DailyFubenConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9d14cs2EG9D/ZyforC3K4Ny","DailyFubenConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.ybRec=0,this.monthcard=0,this.privilege=0,this.specialCard=0,this.sweepLevel=0}}();i.default=n,cc._RF.pop()},{}],DailyRechargeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"76e1bypobFOq4Scy93gZod+","DailyRechargeConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],DamageTypes:[function(e,t,i){"use strict";cc._RF.push(t,"e934cDnlLJCo4JS/zzWc0iR","DamageTypes"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.BLANK=0]="BLANK",e[e.HIT=1]="HIT",e[e.CRIT=2]="CRIT",e[e.Dodge=4]="Dodge",e[e.Lucky=8]="Lucky",e[e.Heji=16]="Heji",e[e.Fujia=32]="Fujia",e[e.Deter=64]="Deter",e[e.Lianji=128]="Lianji",e[e.ZhuiMing=256]="ZhuiMing",e[e.ZhiMing=512]="ZhiMing"}(i.DamageTypes||(i.DamageTypes={})),cc._RF.pop()},{}],DarkMjBoss:[function(e,t,i){"use strict";cc._RF.push(t,"a4f3cEeeZ1F+4h0u1uXWwHC","DarkMjBoss"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../gamescene/GameLogic"),o=e("./UserBoss"),r=e("../../map/GameMap"),s=e("../fb/UserFb"),u=function(e){function t(){var t=e.call(this)||this;return t.isDarkBoss=!1,t.isBossDie=!1,t.observe(a.default.ins().postEnterMap,function(){r.default.fbType==s.default.FB_TYPE_DARK_BOSS?t.postEnterGwBoss():t.isDarkBoss&&t.postEscGwBoss(),t.checkIsShowBtn()}),t.observe(a.default.ins().postCreateOtherEntity,t.onCreateEntity),t.observe(o.default.ins().postRemainTime,t.onDie),t.observe(o.default.ins().postWorldBossEndTime,t.onBossDisappear),t.observe(o.default.ins().postBaseHideBossInfo,t.onHideBossAppear),t}return __extends(t,e),t.prototype.postEnterGwBoss=function(){this.isDarkBoss=r.default.fbType==s.default.FB_TYPE_DARK_BOSS,this.isBossDie=!1,this.showView(!0)},t.prototype.postEscGwBoss=function(){this.isDarkBoss=!1,this.isBossDie=!1,this.showView(!1),ViewManager.ins().close(BossEndView)},t.prototype.showView=function(e){e?(ViewManager.ins().isShow(BossBelongPanel)||ViewManager.ins().open(BossBelongPanel),ViewManager.ins().isShow(BossBloodPanel)||ViewManager.ins().open(BossBloodPanel),ViewManager.ins().isShow(TargetListPanel)||ViewManager.ins().open(TargetListPanel)):(ViewManager.ins().close(BossBelongPanel),ViewManager.ins().close(BossBloodPanel),ViewManager.ins().close(TargetListPanel))},t.prototype.onCreateEntity=function(e){e&&this.isDarkBoss&&(e.type!=EntityType.Monster||e.team!=Team.Monster||e.masterHandle||(o.default.ins().monsterID=e.configID,o.default.ins().bossHandler=e.handle,this.showView(!0)))},t.prototype.onDie=function(){this.isDarkBoss&&(this.isRoleDie()?ViewManager.ins().open(WorldBossBeKillWin):ViewManager.ins().close(WorldBossBeKillWin))},t.prototype.isRoleDie=function(){return o.default.ins().reliveTime>0},t.prototype.onBossDisappear=function(){this.isDarkBoss&&(this.showView(!1),this.isBossDie=!0,ViewManager.ins().open(BossEndView))},t.prototype.checkIsShowBtn=function(){},t.prototype.checkCanShow=function(){var e=o.default.ins().hideBossData.endTime;return o.default.ins().hideBossData.id&&e&&DateUtils.formatMiniDateTime(e)>GameServer.serverTime},t.prototype.onHideBossAppear=function(){},t.prototype.canMove=function(){return!this.isBossDie},t.ins=function(){return e.ins.call(this)},t}(n.default);i.default=u,window.GameSystem.push(u.ins.bind(u)),cc._RF.pop()},{"../../base/BaseSystem":"BaseSystem","../../map/GameMap":"GameMap","../fb/UserFb":"UserFb","../gamescene/GameLogic":"GameLogic","./UserBoss":"UserBoss"}],DateUtils:[function(e,t,i){"use strict";cc._RF.push(t,"9808eqnkWlIdLe8rMgu4UhE","DateUtils"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(t,i,n,a){var o=e.call(this)||this;return o.format=[],o.from=0,o.to=0,o.isFormatNum=!1,o.format=t,o.from=i,o.to=n,o.isFormatNum=a,o}return __extends(t,e),t}(e("../base/BaseClass").default),a=function(){function e(){}return e.getFormatTimeByStyle=function(t,i){if(void 0===i&&(i=e.STYLE_1),t<0&&(t=0,debug.log("\u8f93\u5165\u53c2\u6570\u6709\u8bef!\u65f6\u95f4\u4e3a\u8d1f\u6570:"+t)),i.from>i.to)return debug.log("\u8f93\u5165\u53c2\u6570\u6709\u8bef!to\u53c2\u6570\u5fc5\u987b\u5927\u4e8e\u7b49\u4e8efrom\u53c2\u6570,\u8bf7\u68c0\u67e5style\u53c2\u6570\u7684\u503c"),"";t>>=0;for(var n="",a=i.to;a>=i.from;a--){var o=t/this.mul[a];a!=i.to&&(o%=this.mod[a]),n+=(i.isFormatNum&&o<10?"0"+(o>>0).toString():(o>>0).toString())+i.format[a]}return n},e.getFormatTimeByStyle1=function(t,i){return void 0===i&&(i=e.STYLE_1),this.getFormatTimeByStyle(t/this.MS_PER_SECOND)},e.formatMiniDateTime=function(t){return e.MINI_DATE_TIME_BASE+(2147483647&t)*e.MS_PER_SECOND},e.formatServerTime=function(t){return(t-e.MINI_DATE_TIME_BASE)/e.MS_PER_SECOND},e.getFormatBySecond=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=2);var n="",a=1e3*e;switch(t){case this.TIME_FORMAT_1:n=this.format_1(a);break;case this.TIME_FORMAT_2:n=this.format_2(a);break;case this.TIME_FORMAT_3:n=this.format_3(a);break;case this.TIME_FORMAT_4:n=this.format_4(a);break;case this.TIME_FORMAT_5:n=this.format_5(a,i);break;case this.TIME_FORMAT_6:n=this.format_6(a);break;case this.TIME_FORMAT_7:n=this.format_7(a);break;case this.TIME_FORMAT_8:n=this.format_8(a);break;case this.TIME_FORMAT_9:n=this.format_9(a);break;case this.TIME_FORMAT_10:n=this.format_10(a);break;case this.TIME_FORMAT_11:n=this.format_11(a);break;case this.TIME_FORMAT_12:n=this.format_12(a);break;case this.TIME_FORMAT_13:n=this.format_13(a);break;case this.TIME_FORMAT_14:n=this.format_14(a);break;case this.TIME_FORMAT_15:n=this.format_15(a)}return n},e.getRenainSecond=function(t){var i=t?new Date(t):new Date;return(e.getTodayZeroSecond(i)+86400-i.getTime()/1e3).toFixed(0)},e.getTodayPassedSecond=function(){var e=new Date,t=((Date.now()-new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime())/1e3).toFixed(0);return parseInt(t)},e.getTodayZeroSecond=function(e){var t=e||new Date;return parseInt((new Date(t.getFullYear(),t.getMonth(),t.getDate()).getTime()/1e3).toFixed(0))},e.showWeekFirstDay=function(){var e=new Date,t=e.getDay();return t=t||7,new Date(e-864e5*(t-1))},e.showWeekLastDay=function(){new Date;var t=e.showWeekFirstDay();return new Date(1e3*(t/1e3+518400))},e.calcWeekFirstDay=function(){var e=new Date,t=e.getDay(),i=7-(t=t>0?t:7),n=e.getHours(),a=e.getMinutes(),o=e.getSeconds();return new Date(86400*i*1e3+864e5-(3600*n*1e3+60*a*1e3+1e3*o))},e.format_1=function(t){var i=0,n="##:##:##";return i=Math.floor(t/e.MS_PER_HOUR),n=n.replace("##",e.formatTimeNum(i)),i&&(t-=i*e.MS_PER_HOUR),i=Math.floor(t/e.MS_PER_MINUTE),n=n.replace("##",e.formatTimeNum(i)),i&&(t-=i*e.MS_PER_MINUTE),i=Math.floor(t/1e3),n=n.replace("##",e.formatTimeNum(i))},e.format_2=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()+":"+t.getSeconds()},e.format_3=function(e){var t=this.format_1(e).split(":");return t[1]+":"+t[2]},e.format_4=function(e){return e<this.MS_PER_HOUR?Math.floor(e/this.MS_PER_MINUTE)+"\u5206\u949f\u524d":e<this.MS_PER_DAY?Math.floor(e/this.MS_PER_HOUR)+"\u5c0f\u65f6\u524d":Math.floor(e/this.MS_PER_DAY)+"\u5929\u524d"},e.format_5=function(e,t){void 0===t&&(t=2);var i="",n=["\u5929","\u65f6","\u5206","\u79d2"],a=[],o=Math.floor(e/this.MS_PER_DAY);a.push(o),e-=o*this.MS_PER_DAY;var r=Math.floor(e/this.MS_PER_HOUR);a.push(r),e-=r*this.MS_PER_HOUR;var s=Math.floor(e/this.MS_PER_MINUTE);a.push(s),e-=s*this.MS_PER_MINUTE;var u=Math.floor(e/1e3);for(var l in a.push(u),a)if(a[l]>0&&(i+=this.formatTimeNum(a[l],Number(l))+n[l],--t<=0))break;return i},e.format_6=function(e){var t=new Date(e),i=t.getHours(),n=t.getMinutes(),a=t.getSeconds();return this.formatTimeNum(i)+":"+this.formatTimeNum(n)+":"+this.formatTimeNum(a)},e.format_7=function(e){return e<this.MS_PER_HOUR?"<1\u5c0f\u65f6":e<this.MS_PER_DAY?Math.floor(e/this.MS_PER_HOUR)+"\u5c0f\u65f6":Math.floor(e/this.MS_PER_DAY)+"\u5929"},e.format_8=function(e){var t=new Date(e);return t.getFullYear()+"-"+(t.getMonth()+1)+"-"+t.getDate()+" "+t.getHours()+":"+t.getMinutes()},e.format_9=function(e){var t=Math.floor(e/this.MS_PER_HOUR);e-=t*this.MS_PER_HOUR;var i=Math.floor(e/this.MS_PER_MINUTE);return e-=i*this.MS_PER_MINUTE,t+"\u5c0f\u65f6"+i+"\u5206\u949f"+Math.floor(e/1e3)+"\u79d2"},e.format_10=function(e){var t=Math.floor(e/this.MS_PER_MINUTE);return e-=t*this.MS_PER_MINUTE,t+"\u5206"+Math.floor(e/1e3)+"\u79d2"},e.format_11=function(e){var t=Math.floor(e/this.MS_PER_HOUR);e-=t*this.MS_PER_HOUR;var i=Math.floor(e/this.MS_PER_MINUTE);return e-=i*this.MS_PER_MINUTE,t+"\u65f6"+i+"\u5206"+Math.floor(e/1e3)+"\u79d2"},e.format_12=function(t){var i=Math.floor(t/this.MS_PER_HOUR);t-=i*this.MS_PER_HOUR;var n=Math.floor(t/this.MS_PER_MINUTE);t-=n*this.MS_PER_MINUTE;var a=Math.floor(t/1e3);return e.formatTimeNum(i)+":"+e.formatTimeNum(n)+":"+e.formatTimeNum(a)},e.format_13=function(t){var i=new Date(t),n=(i.getFullYear(),i.getMonth()+1),a=i.getDay(),o=i.getDate(),r=i.getHours(),s=i.getMinutes();return n+"\u6708"+o+"\u65e5(\u5468"+this.WEEK_CN[a]+") "+e.formatTimeNum(r)+":"+e.formatTimeNum(s)},e.format_14=function(e){var t=new Date(e);return t.getHours()+"\u65f6"+t.getMinutes()+"\u5206"},e.format_15=function(t){var i=new Date(t),n=i.getMonth()+1,a=i.getDate(),o=i.getHours(),r=i.getMinutes();return e.formatTimeNum(n)+"-"+e.formatTimeNum(a)+" "+e.formatTimeNum(o)+":"+e.formatTimeNum(r)},e.formatTimeNum=function(e,t){return e>=10?e.toString():0==t?e.toString():"0"+e},e.checkTime=function(e,t){return e>(new Date).getTime()+t*this.MS_PER_DAY},e.formatFullTime=function(e){var t,i=new Date(e),n=i.getFullYear(),a=i.getMonth()+1,o=i.getDate(),r=i.getDay(),s=i.getHours();t=s<10?"0"+s:s.toString();var u,l,c=i.getMinutes();switch(u=c<10?"0"+c:c.toString(),r){case 1:l="\u4e00";break;case 2:l="\u4e8c";break;case 3:l="\u4e09";break;case 4:l="\u56db";break;case 5:l="\u4e94";break;case 6:l="\u516d";break;case 0:l="\u65e5"}return n+"\u5e74"+a+"\u6708"+o+"\u65e5\uff08\u5468"+l+"\uff09 "+t+":"+u},e.formatStrTimeToMs=function(e){var t=new Date,i=e.split(".");t.setFullYear(i[0]),t.setMonth(+i[1]-1);var n=i[2].split("-");t.setDate(n[0]);var a=n[1].split(":");return t.setHours(a[0]),t.setMinutes(a[1]),t.setSeconds(0),t.getTime()},e.TIME_FORMAT_1=1,e.TIME_FORMAT_2=2,e.TIME_FORMAT_3=3,e.TIME_FORMAT_4=4,e.TIME_FORMAT_5=5,e.TIME_FORMAT_6=6,e.TIME_FORMAT_7=7,e.TIME_FORMAT_8=8,e.TIME_FORMAT_9=9,e.TIME_FORMAT_10=10,e.TIME_FORMAT_11=11,e.TIME_FORMAT_12=12,e.TIME_FORMAT_13=13,e.TIME_FORMAT_14=14,e.TIME_FORMAT_15=15,e.MS_PER_SECOND=1e3,e.MS_PER_MINUTE=6e4,e.MS_PER_HOUR=36e5,e.MS_PER_DAY=864e5,e.SECOND_PER_HOUR=3600,e.SECOND_PER_DAY=86400,e.SECOND_PER_MONTH=2592e3,e.SECOND_PER_YEAR=31104e3,e.DAYS_PER_WEEK=7,e.YEAR_PER_YEAR=1,e.MONTH_PER_YEAR=12,e.DAYS_PER_MONTH=30,e.HOURS_PER_DAY=24,e.MUNITE_PER_HOUR=60,e.SECOND_PER_MUNITE=60,e.SECOND_PER_SECOND=1,e.SECOND_2010=1262275200,e.mod=[e.SECOND_PER_MUNITE,e.MUNITE_PER_HOUR,e.HOURS_PER_DAY,e.DAYS_PER_MONTH,e.MONTH_PER_YEAR,e.YEAR_PER_YEAR],e.mul=[e.SECOND_PER_SECOND,e.SECOND_PER_MUNITE,e.SECOND_PER_HOUR,e.SECOND_PER_DAY,e.SECOND_PER_MONTH,e.SECOND_PER_YEAR],e.MINI_DATE_TIME_BASE=Date.UTC(2010,0)+(new Date).getTimezoneOffset()*e.MS_PER_MINUTE,e.TIME_ZONE_OFFSET=8*e.MS_PER_HOUR,e.TO_SECOND=0,e.TO_MINUTE=1,e.TO_HOUR=2,e.TO_DAY=3,e.TO_MONTH=4,e.TO_YEAR=5,e.FORMAT_1=["\u79d2","\u5206","\u65f6","\u5929","\u6708","\u5e74"],e.FORMAT_2=[":",":",":",":",":",":"],e.WEEK_CN=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],e.STYLE_1=new n(e.FORMAT_1,e.TO_SECOND,e.TO_HOUR,!1),e.STYLE_2=new n(e.FORMAT_1,e.TO_SECOND,e.TO_DAY,!1),e.STYLE_3=new n(e.FORMAT_2,e.TO_SECOND,e.TO_HOUR,!0),e.STYLE_4=new n(e.FORMAT_1,e.TO_SECOND,e.TO_MINUTE,!0),e}();i.default=a,cc._RF.pop()},{"../base/BaseClass":"BaseClass"}],DeathGuideConfig:[function(e,t,i){"use strict";cc._RF.push(t,"c21d3nAp2tEwaz+28wrHBl1","DeathGuideConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],DeathgainWayConfig:[function(e,t,i){"use strict";cc._RF.push(t,"93ce9gdarNK4LjvuKzbqmWU","DeathgainWayConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],DebugUtils:[function(e,t,i){"use strict";cc._RF.push(t,"2c19bOqgoFDPJdkEBk1frpW","DebugUtils");var n=function(){function e(){}return e.isOpen=function(e){this._isOpen=e},Object.defineProperty(e,"isDebug",{get:function(){return!0},enumerable:!0,configurable:!0}),e.log=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];e.isDebug&&console.log(t,i)},e.warn=function(t){for(var i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];e.isDebug&&console.warn(t,i)},e.error=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];console.error(e,t)},e.setThreshold=function(e){this._threshold=e},e._startTimes={},e._threshold=3,e}();n.log,n.warn,n.error;cc._RF.pop()},{}],DecomposeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3ee35IcVNdAwKCVXHPIZXLF","DecomposeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],DefineEff:[function(e,t,i){"use strict";cc._RF.push(t,"cb4fb6bDwJAbqWEYTAp2GUc","DefineEff"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.effid=0,this.souce=""}}();i.default=n,cc._RF.pop()},{}],DelayOptManager:[function(e,t,i){"use strict";cc._RF.push(t,"731752Rn0ZJEqLVUUE5XpxJ","DelayOptManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./BaseClass"),a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){var t=e.call(this)||this;return t.TIME_THRESHOLD=2,t._delayOpts=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.addDelayOptFunction=function(e,t,i,n,a){this._delayOpts.push({fun:t,funPara:i,thisObj:e,callBack:n,para:a})},t.prototype.clear=function(){this._delayOpts.length=0},t.prototype.runCachedFun=function(e){if(0==this._delayOpts.length)return!1;for(var t,i=egret.getTimer();this._delayOpts.length&&((t=this._delayOpts.shift()).funPara?t.fun.call(t.thisObj,t.funPara):t.fun.call(t.thisObj),t.callBack&&(void 0!=t.para?t.callBack.call(t.thisObj,t.para):t.callBack()),!(egret.getTimer()-i>this.TIME_THRESHOLD)););return!1},t=__decorate([o],t)}(n.default));i.default=r,cc._RF.pop()},{"./BaseClass":"BaseClass"}],DesktopIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"fd430Nva1JHLoOF3P4So/3G","DesktopIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../consts/SystemConst"),o=e("../../opensystem/OpenSystem"),r=e("../../pfactivity/PfActivity"),s=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[r.default.ins().postGameDesktop],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return o.default.ins().checkSysOpen(a.SystemType.FOCUS)&&!!r.default.ins().isShowGameDesktop},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.tapExecute=function(){r.default.ins().saveGameDesktop()},t}(n.default);i.default=s,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../opensystem/OpenSystem":"OpenSystem","../../pfactivity/PfActivity":"PfActivity","./RuleIconBase":"RuleIconBase"}],DevilBossBase:[function(e,t,i){"use strict";cc._RF.push(t,"97e6aD75x5Fu6SZ/yOP3nWw","DevilBossBase"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],DevilBossConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3be7arRWkFAx7FmU+NyOfGu","DevilBossConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],DevildomBossModel:[function(e,t,i){"use strict";cc._RF.push(t,"c5f62EA/61AYY8MVzigD4N6","DevildomBossModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../../core/base/BaseClass"),a=e("../../../../manager/GlobalConfig"),o=e("../DevildomSys"),r=e("../../../../../core/utils/MathUtils"),s=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.getCurBossIdByIndex=function(e){var t=a.default.DevilBossConfig[e].openBossList;return t[0]||t[1]},t.prototype.getCurFbIndex=function(){var e=o.default.ins();if(e.historyId)return e.historyId-1;var t=[];for(var i in e.killedState)e.killedState[i]||t.push(i);return t.length>0?t[r.default.limit(0,t.length)>>0]-1:r.default.limit(0,3)>>0},t}(n.default);i.default=s,cc._RF.pop()},{"../../../../../core/base/BaseClass":"BaseClass","../../../../../core/utils/MathUtils":"MathUtils","../../../../manager/GlobalConfig":"GlobalConfig","../DevildomSys":"DevildomSys"}],DevildomRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"136c9NPh7JMvqSdjd/pjZdO","DevildomRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../base/BaseSystem"),a=e("./DevildomSys"),o=e("../../../../core/base/MessageCenter"),r=function(e){function t(){var i=e.call(this)||this;return i.redPoint=0,i.redPoints=[],o.default.compile(t),i.associated(i.postRedPoint,a.default.ins().postBossInfo,a.default.ins().postInfo),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postRedPoint=function(){this.redPoint=0;var e=a.default.ins();if(e.isOpen()){for(var t in e.killedState)this.redPoints[t]=!(e.killedState[t]||e.historyId&&e.historyId!=t);this.redPoint=this.redPoints.indexOf(!0)>-1?1:0}},t}(n.default);i.default=r,window.GameSystem.push(r.ins.bind(r)),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../base/BaseSystem":"BaseSystem","./DevildomSys":"DevildomSys"}],DevildomSys:[function(e,t,i){"use strict";cc._RF.push(t,"94760OSZyVB1I4Qr3PnobiH","DevildomSys"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../base/BaseSystem"),a=e("../../../../core/net/PackageID"),o=e("../../gamescene/GameLogic"),r=e("../../fb/UserFb"),s=e("../../../map/GameMap"),u=e("../../boss/UserBoss"),l=e("../../../base/EntityManager"),c=e("../../activity/model/RewardData"),d=e("../../../manager/GlobalConfig"),f=e("../../server/GameServer"),p=e("../../../../core/utils/DateUtils"),h=e("../../../Utils/EgretUtils"),g=e("../../../entity/Actor"),y=e("../KFServerSys"),v=e("../../../../core/base/MessageCenter"),m=function(e){function t(){var i=e.call(this)||this;return i.refTime=[],i.dropRecordDataList=[],i.sysId=a.PackageID.Devildom,v.default.compile(t),i.regNetMsg(1,i.postBossInfo),i.regNetMsg(2,i.postAscriptionChange),i.regNetMsg(3,i.postRevive),i.regNetMsg(7,i.doResult),i.regNetMsg(8,i.postInfo),i.observe(o.default.ins().postEnterMap,function(){s.default.fbType==r.default.FB_TYPE_DEVILDOM_BOSS?i.postEnterFb():s.default.lastFbTyp==r.default.FB_TYPE_DEVILDOM_BOSS&&i.postQuiKFb()}),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postBossInfo=function(e){var t=e.readShort();this.killedState=[];for(var i=[],n=0;n<t;n++){var a=e.readShort(),o=e.readInt(),r=e.readBoolean();this.killedState[a]=r,i[a]=o}this.historyId&&this.refTime[this.historyId]&&i[this.historyId]!=this.refTime[this.historyId]&&(this.historyId=0),this.refTime=i.concat()},t.prototype.postAscriptionChange=function(e){var t=e.readDouble(),i=e.readDouble(),n="";if(t>0){var a=l.default.ins().getMasterList(t);a&&a[0]&&a[0].infoModel&&(n=a[0].infoModel.name)}u.default.ins().postBelongChange(i,t,n)},t.prototype.postRevive=function(e){var t=e.readInt(),i=e.readDouble();if(t>0)ViewManager.ins().open(DevildomReliveWin,t,i);else if(ViewManager.ins().close(DevildomReliveWin),y.default.ins().isKF){var n=g.default.yb-d.default.CrossBossBase.rebornCost;g.default.ins().postYbChange(n)}},t.prototype.doResult=function(e){for(var t=e.readString(),i=e.readDouble(),n=e.readBoolean(),a=e.readShort(),o=[],r=0;r<a;r++){var s=new c.default;s.type=e.readInt(),s.id=e.readInt(),s.count=e.readInt(),o.push(s)}a=e.readShort();var u=[];for(r=0;r<a;r++){var l=e.readInt();u.push(d.default.AuctionItem[l].item)}ViewManager.ins().open(DevildomResultWin,i,t,n,u,o)},t.prototype.postInfo=function(e){this.historyId=e.readShort();var t=e.readShort();this.enterCD=1e3*t+h.default.getTimer()},t.prototype.sendClearReliveCD=function(){this.sendBaseProto(3)},t.prototype.sendCleanBelong=function(){this.sendBaseProto(4)},t.prototype.sendEnter=function(e){var t=this.getBytes(5);t.writeInt(e),this.sendToServer(t)},t.prototype.postEnterFb=function(){this.isDevildomBattle=!0},t.prototype.postQuiKFb=function(){this.isDevildomBattle=!1,ViewManager.ins().close(BossBelongPanel)},t.prototype.isOpen=function(){return f.default.isOpenLF&&f.default.serverOpenDay+1>=d.default.DevilBossBase.openDay&&this.isHfTerm()},t.prototype.isHfTerm=function(){var e=p.default.formatMiniDateTime(f.default._serverHeZeroTime)+d.default.DevilBossBase.hefuTimeLimit*p.default.MS_PER_DAY;return f.default.serverTime-e>0},t}(n.default);i.default=m,window.GameSystem.push(m.ins.bind(m)),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../../core/net/PackageID":"PackageID","../../../../core/utils/DateUtils":"DateUtils","../../../Utils/EgretUtils":"EgretUtils","../../../base/BaseSystem":"BaseSystem","../../../base/EntityManager":"EntityManager","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../../map/GameMap":"GameMap","../../activity/model/RewardData":"RewardData","../../boss/UserBoss":"UserBoss","../../fb/UserFb":"UserFb","../../gamescene/GameLogic":"GameLogic","../../server/GameServer":"GameServer","../KFServerSys":"KFServerSys"}],DictionaryUtil:[function(e,t,i){"use strict";cc._RF.push(t,"6721aKUJ/NIx5RArb/3LnIu","DictionaryUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.getMemberCount=function(e){var t=0;for(var i in e)e.hasOwnProperty(i)&&t++;return t},e.toValueArray=function(e){var t=[];for(var i in e)if(e.hasOwnProperty(i)){var n=e[i];t.push(n)}return t},e.toKeyArray=function(e){var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(i);return t},e.containsValue=function(e,t){for(var i in e){if(e.hasOwnProperty(i))if(e[i]==t)return!0}return!1},e.removeValue=function(e,t){for(var i in e){if(e.hasOwnProperty(i))if(e[i]==t)return delete e[i],!0}return!1},e.getValueKey=function(e,t){for(var i in e){if(e.hasOwnProperty(i))if(e[i]==t)return i}return null},e}();i.default=n,cc._RF.pop()},{}],DieGuide:[function(e,t,i){"use strict";cc._RF.push(t,"ac62bpqIRZOZItOGtKyM4Lw","DieGuide"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../recharge/Recharge"),o=e("../setting/Setting"),r=e("../../../core/base/MessageCenter"),s=e("../../manager/GlobalConfig"),u=e("../zs/UserZs"),l=e("../../entity/Actor"),c=e("../../../core/utils/DateUtils"),d=e("../fb/UserFb"),f=function(e){function t(){var i=e.call(this)||this;return i.resImg=["vipbn2_png","vipbn2_1_png"],r.default.compile(t),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initRecharge1=function(){this.isInitRecharge1=!0},t.prototype.initSetting=function(){this.isInitSetting=!0},t.prototype.postdieGuide=function(e){if(!e){var t=o.default.ins().getValue(o.ClientSet.diedFirstTime);t||(t=Math.floor((new Date).getTime()/1e3),o.default.ins().setValue(o.ClientSet.diedFirstTime,t)),a.default.ins().getRechargeData(0).num&&((t=o.default.ins().getValue(o.ClientSet.diedFirstTime2))||(t=Math.floor((new Date).getTime()/1e3),o.default.ins().setValue(o.ClientSet.diedFirstTime2,t)))}},t.prototype.dieFbRedPoint=function(e,t){var i=s.default.DailyFubenConfig[t];if(!i)return!1;if(u.default.ins().lv<i.zsLevel||l.default.level<i.levelLimit)return!1;var n=o.default.ins().getValue(o.ClientSet.FB);if(n&&n>>t-3e3&1)return!1;var a=o.default.ins().getValue(o.ClientSet.diedFirstTime);return!!a&&(!(Math.floor((new Date).getTime()/1e3)>c.default.getTodayZeroSecond(new Date(1e3*a))+86400)&&e>0)},t.prototype.checkFirstChargeOrVIPWin=function(){if(this.isInitRecharge1&&this.isInitSetting&&!d.default.ins().pkGqboss)if(a.default.ins().getRechargeData(0).num){if((e=o.default.ins().getValue(o.ClientSet.diedFirstTime2))&&e>0)if(UserVip.ins().lv<3)if(!o.default.ins().getValue(o.ClientSet.vip))return(i=ViewManager.ins().getView(PlayFunView))&&i.setDieGuide(t.VIP),void o.default.ins().setValue(o.ClientSet.vip,t.Show)}else{var e,i;if(l.default.level>=30)if(!o.default.ins().getValue(o.ClientSet.recharge1))return(i=ViewManager.ins().getView(PlayFunView))&&i.setDieGuide(t.RECHARGE),void o.default.ins().setValue(o.ClientSet.recharge1,t.Show);if((e=o.default.ins().getValue(o.ClientSet.diedFirstTime))&&e>0)if(!o.default.ins().getValue(o.ClientSet.recharge2))return(i=ViewManager.ins().getView(PlayFunView))&&i.setDieGuide(t.RECHARGE),void o.default.ins().setValue(o.ClientSet.recharge2,t.Show)}},t.prototype.getOpenRoles=function(){var e=o.default.ins().getValue(o.ClientSet.role);if(e==t.Show2&&SubRoles.ins().subRolesLen>=3)return"";for(var i=1;i<3;i++){if(!SubRoles.ins().getSubRoleByIndex(i))return e?e==t.Show&&2==i&&o.default.ins().setValue(o.ClientSet.role,t.Show2):o.default.ins().setValue(o.ClientSet.role,t.Show),this.resImg[i-1]}return""},t.prototype.setClick=function(e){var t=e-3e3,i=o.default.ins().getValue(o.ClientSet.FB);i||(i=0),i>>t&1||(i|=1<<t,o.default.ins().setValue(o.ClientSet.FB,i))},t.prototype.setMaxFb=function(e){for(var t=o.default.ins().getValue(o.ClientSet.FB),i=0;i<e.length;i++)if(e[i]>3e3){var n=e[i]-3e3;if(t>>n&1)continue;t|=1<<n,o.default.ins().setValue(o.ClientSet.FB,t)}},t.Show=1,t.Show2=2,t.RECHARGE=1,t.VIP=2,t.FB=3,t}(n.default);i.default=f,f.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/utils/DateUtils":"DateUtils","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../fb/UserFb":"UserFb","../recharge/Recharge":"Recharge","../setting/Setting":"Setting","../zs/UserZs":"UserZs"}],DirUtil:[function(e,t,i){"use strict";cc._RF.push(t,"e4923RwDuRHFKfs3gS4c30v","DirUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./MathUtils"),a=e("../../game/map/GameMap"),o=function(){function e(){}return e.get8DirBy2Point=function(e,t){var i=n.default.getAngle(n.default.getRadian2(e.x,e.y,t.x,t.y));return this.angle2dir(i)},e.get4DirBy2Point=function(e,t){return e.x<t.x?e.y<t.y?3:1:e.y<t.y?5:7},e.dir2angle=function(e){return e*=45,e-=90},e.angle2dir=function(e){return e<-90&&(e+=360),Math.round((e+90)/45)%8},e.dirOpposit=function(e){return e<4?e+4:e-4},e.get5DirBy8Dir=function(e){return e-this.isScaleX(e)},e.isScaleX=function(e){var t=2*(e-4);return t<0&&(t=0),t},e.getGridByDir=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i={x:0,y:0});var o=this.dir2angle(this.dirOpposit(e));return n.default.getDirMove(o,t*a.default.CELL_SIZE,i.x,i.y)},e}();i.default=o,cc._RF.pop()},{"../../game/map/GameMap":"GameMap","./MathUtils":"MathUtils"}],DisplayUtils:[function(e,t,i){"use strict";cc._RF.push(t,"afb6fF2E8hIxp2+JJuR2/tp","DisplayUtils"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.removeFromParent=function(e){e&&null!=e.parent&&e.removeFromParent()},e}();i.default=n,cc._RF.pop()},{}],DoubleElevenIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"027dfZX98BAV7qCfU73R4pp","DoubleElevenIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../activity/Activity"),a=e("./RuleIconBase"),o=e("../../../entity/Actor"),r=e("../../recharge/Recharge"),s=e("../../../consts/SystemConst"),u=e("../../opensystem/OpenSystem"),l=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.firstTap=!0,a.showMessage=[n.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],a.updateMessage=[n.default.ins().postActivityIsGetAwards,o.default.ins().postYbChange,r.default.ins().postUpdateRecharge,r.default.ins().postRechargeTotalDay,r.default.ins().postUpdateRechargeEx,n.default.ins().postSpecials],a}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!u.default.ins().checkSysOpen(s.SystemType.DOUBLEELEVEN))return!1;var e=n.default.ins().doubleElevenData;for(var t in e)if(e[t].isOpenActivity())return!0;return!1},t.prototype.checkShowRedPoint=function(){var e=n.default.ins().doubleElevenData;for(var t in e){var i=e[t];if(i.canReward())if(-1!=n.default.ins().doubleElevenSpecialIDs.indexOf(i.id)){if(i.isSpecialOpen())return 1}else if(i.isOpenActivity())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(DoubleEleventWin),this.firstTap=!1,this.update()},t}(a.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../opensystem/OpenSystem":"OpenSystem","../../recharge/Recharge":"Recharge","./RuleIconBase":"RuleIconBase"}],DoubleTwelveActivityIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"fb2carDYC1PA40QUdO4ccG1","DoubleTwelveActivityIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../activity/Activity"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postActivityIsGetAwards],n.updateMessage=[o.default.ins().postActivityIsGetAwards],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!r.default.ins().checkSysOpen(s.SystemType.DOUBLE_TWELVE))return!1;var e=o.default.ins().doubleTwelveData;for(var t in e)if(e[t].isOpenActivity())return!0;return!1},t.prototype.checkShowRedPoint=function(){var e=o.default.ins().doubleTwelveData;for(var t in e)if(e[t].isOpenActivity()&&9==e[t].type)for(var i=0;i<3;i++)if(o.default.ins().isGetRollReward(e[t].id,i))return 1;return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(DoubleTwelveWin),this.firstTap=!1,this.update()},t}(n.default);i.default=u,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],DoubleTwelveRechargeIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"870a2F60v9MAZZIVach9bNL","DoubleTwelveRechargeIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../recharge/Recharge"),s=e("../../../../core/utils/DateUtils"),u=e("../../../manager/TimerManager"),l=e("../../opensystem/OpenSystem"),c=e("../../../consts/SystemConst"),d=e("../../../manager/UILoadMgr"),f=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.time=0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards,r.default.ins().postUpdateRecharge,r.default.ins().postUpdateRechargeEx],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return this.alertText=cc.instantiate(d.default.inst.getPrefab(d.prefabName.common_lab)).getComponent(cc.Label),t},t.prototype.runTime=function(){var e=this.time;this.time-=1,e>0?this.alertText.string=s.default.getFormatBySecond(e,s.default.TIME_FORMAT_12):(this.alertText.string="",u.default.ins().remove(this.runTime,this),this.updateShow())},t.prototype.checkShowIcon=function(){if(!l.default.ins().checkSysOpen(c.SystemType.DOUBLE_TWELVE_RECHARGE))return!1;var e=a.default.ins().doubleTwelveRechargeData;for(var t in e)if(e[t].isOpenActivity()){var i=e[a.default.ins().doubleTwelveRechargeIDAry[0]];return i&&(u.default.ins().remove(this.runTime,this),this.time=i.getLeftTime(),u.default.ins().doTimer(1e3,0,this.runTime,this)),!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().doubleTwelveRechargeData;for(var t in e)if(e[t].canReward())return 1;return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(DoubleTwelveRechargeWin),this.firstTap=!1,this.update()},t}(n.default);i.default=f,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../manager/TimerManager":"TimerManager","../../../manager/UILoadMgr":"UILoadMgr","../../activity/Activity":"Activity","../../opensystem/OpenSystem":"OpenSystem","../../recharge/Recharge":"Recharge","./RuleIconBase":"RuleIconBase"}],DressItemInfo:[function(e,t,i){"use strict";cc._RF.push(t,"ca4000QDcZMeq97COJQ3hsk","DressItemInfo"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.isDress=!1,this.lv=0}}();i.default=n,cc._RF.pop()},{}],DressPosInfo:[function(e,t,i){"use strict";cc._RF.push(t,"639dcUDBLNHyJPaRhPzq2Ze","DressPosInfo"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.posAry=[]}}();i.default=n,cc._RF.pop()},{}],DressTimeInfo:[function(e,t,i){"use strict";cc._RF.push(t,"54214sqn3hKqZ72TJxjsiox","DressTimeInfo"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],DressWin:[function(e,t,i){"use strict";cc._RF.push(t,"b8982UD1flMW4cR1IEUOuFi","DressWin"),cc._RF.pop()},{}],Dress:[function(e,t,i){"use strict";cc._RF.push(t,"da637QG1ghFjbHtETTMLQt/","Dress"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("./DressTimeInfo"),r=e("./DressPosInfo"),s=e("../../../core/net/PackageID"),u=e("../tips/UserTips"),l=e("../../entity/SubRoles"),c=e("../../manager/GlobalConfig"),d=e("../../entity/Actor"),f=e("../bag/UserBag");(function(e){e[e.ROLE=1]="ROLE",e[e.ARM=2]="ARM",e[e.WING=3]="WING"})(n=i.DressType||(i.DressType={})),function(e){e[e[""]=0]="",e[e["\u89d2\u8272"]=1]="\u89d2\u8272",e[e["\u6b66\u5668"]=2]="\u6b66\u5668",e[e["\u7fc5\u8180"]=3]="\u7fc5\u8180"}(i.DressTypeName||(i.DressTypeName={}));var p=function(e){function t(){var t=e.call(this)||this;return t.timeInfo={},t.posInfo=[],t.careerDic={},t.itemIdDic={},t.sysId=s.PackageID.Dress,t.regNetMsg(1,t.doDressInfo),t.regNetMsg(2,t.doDressActivationRes),t.regNetMsg(3,t.doDressUserRes),t.regNetMsg(4,t.doUnDressUserRes),t.regNetMsg(5,t.doDressTimeEnd),t.regNetMsg(6,t.postLevelUp),t.regNetMsg(7,t.postAddTime),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendDressInfoReq=function(){this.sendBaseProto(1)},t.prototype.doDressInfo=function(e){this.parser(e),t.ins().postDressInfo()},t.prototype.sendDressActivationReq=function(e){var t=this.getBytes(2);t.writeInt(e),this.sendToServer(t)},t.prototype.doDressActivationRes=function(e){this.parserAct(e),t.ins().postJiHuo(),u.default.ins().showTips("|C:0xffffff&T:\u6fc0\u6d3b\u88c5\u626e\u5f62\u8c61\u6210\u529f|")},t.prototype.sendDressUserReq=function(e,t){var i=this.getBytes(3);i.writeByte(e),i.writeInt(t),this.sendToServer(i)},t.prototype.doDressUserRes=function(e){this.parserDress(e),t.ins().postDressInfo(),u.default.ins().showTips("|C:0xffffff&T:\u5e7b\u5316\u5f62\u8c61\u6210\u529f|")},t.prototype.sendUnDressUserReq=function(e,t){var i=this.getBytes(4);i.writeByte(e),i.writeInt(t),this.sendToServer(i)},t.prototype.doUnDressUserRes=function(e){this.parserDress(e),t.ins().postDressInfo(),u.default.ins().showTips("|C:0xffffff&T:\u53d6\u6d88\u5e7b\u5316\u5f62\u8c61\u6210\u529f|")},t.prototype.doDressTimeEnd=function(e){this.parserDel(e),t.ins().postDressInfo()},t.prototype.parser=function(e){var t=e.readInt();this.timeInfo={};for(var i=0;i<t;i++){var n=new o.default;n.dressId=e.readInt(),n.invalidtime=e.readInt(),n.lv=e.readInt(),this.timeInfo[n.dressId]=n}t=e.readByte(),this.posInfo=[];for(i=0;i<t;i++){for(var a=new r.default,s=0;s<3;s++)a.posAry[s]=e.readInt();this.posInfo.push(a)}},t.prototype.parserAct=function(e){var t=new o.default;t.dressId=e.readInt(),t.invalidtime=e.readInt(),t.lv=e.readInt(),this.timeInfo[t.dressId]=t},t.prototype.parserDress=function(e){},t.prototype.parserDel=function(e){},t.prototype.getModelPosId=function(e){return this.posInfo[e]},t.prototype.redPoint=function(){return this.careerRedPoint()},t.prototype.careerRedPoint=function(){for(var e=0;e<l.default.ins().subRolesLen;e++){var t=l.default.ins().getSubRoleByIndex(e).job,i=this.getIdByCareer(t);for(var n in i)for(var a=0,o=i[n];a<o.length;a++){var r=o[a];if(this.redPointDress(r.id))return!0}}return!1},t.prototype.curRoleRedPoint=function(e){return this.roleRedPoint()[e]},t.prototype.roleRedPoint=function(){for(var e=[!1,!1,!1],t=l.default.ins().subRolesLen,i=0;i<t;i++){var n=l.default.ins().getSubRoleByIndex(i).job,a=this.getIdByCareer(n);for(var o in a){for(var r=0,s=a[o];r<s.length;r++){var u=s[r];if(this.redPointDress(u.id)){e[i]=!0;break}}if(e[i])break}}return e},t.prototype.canDress=function(e,t){return!1},t.prototype.posRedPoint=function(){for(var e=[!1,!1,!1],t=l.default.ins().subRolesLen,i=0;i<t;i++)for(var n=l.default.ins().getSubRoleByIndex(i).job,a=this.getIdByCareer(n),o=0;o<3;o++)if(!e[o])for(var r=0,s=a[o+1];r<s.length;r++){var u=s[r];if(this.redPointDress(u.id)){e[o]=!0;break}}return e},t.prototype.getIdByCareer=function(e){return this.careerDic[e]?this.careerDic[e]:(this.initConfig(),this.careerDic[e])},t.prototype.getIdByItemId=function(e){return this.itemIdDic[e]?this.itemIdDic[e]:(this.initConfig(),this.itemIdDic[e])},t.prototype.initConfig=function(){if(!Object.keys(this.itemIdDic).length){var e=c.default.ZhuangBanId;for(var t in e){var i=e[t],n=i.roletype,a=i.pos;this.careerDic[n]=this.careerDic[n]||{},this.careerDic[n][a]=this.careerDic[n][a]||[],this.careerDic[n][a].push(i);var o=i.cost.itemId;this.itemIdDic[o]=this.itemIdDic[o]||[],this.itemIdDic[o].push(i)}}},t.prototype.redPointDress=function(e){var t=c.default.ZhuangBanId[e];if(t.pos==n.WING&&d.default.level<=16)return!1;var i=t.cost.itemId,a=f.default.ins().getBagGoodsCountById(0,i);if(0==a)return!1;if(this.timeInfo[e]){for(var o=0,r=this.getIdByItemId(i);o<r.length;o++){var s=r[o];if(s.id!=e&&!this.timeInfo[s.id])return!1}var u=this.timeInfo[e].lv+1,l=c.default.ZhuangBanLevelUp[e];if(l&&l[u]&&l[u].cost.num<=a)return!0}else if(a>=t.cost.num)return!0;return!1},t.prototype.getIdZhuangBanId=function(e){var t=c.default.ZhuangBanId;for(var i in t){if(t[i].cost.itemId==e)return e}return 0},t.prototype.sendLevelUp=function(e){var t=this.getBytes(6);t.writeInt(e),this.sendToServer(t)},t.prototype.postLevelUp=function(e){var t=e.readInt(),i=e.readInt(),n=e.readInt(),a=this.timeInfo[t];a.invalidtime=i,a.lv=n,this.postDressInfo()},t.prototype.sendAddTime=function(e){var t=this.getBytes(7);t.writeInt(e),this.sendToServer(t)},t.prototype.postAddTime=function(e){var t=e.readInt(),i=e.readInt(),n=e.readInt(),a=this.timeInfo[t]||new o.default;a.invalidtime=i,a.lv=n,a.dressId=t,this.timeInfo[t]=a},t.prototype.postDressInfo=function(){},t.prototype.postJiHuo=function(){},t.prototype.postChangeWing=function(){},t}(a.default);i.default=p,window.GameSystem.push(p.ins.bind(p)),cc._RF.pop()},{"../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../tips/UserTips":"UserTips","./DressPosInfo":"DressPosInfo","./DressTimeInfo":"DressTimeInfo"}],DropHelp:[function(e,t,i){"use strict";cc._RF.push(t,"4fb38Hv3VxLBLopm00pYolc","DropHelp"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../map/GameMap"),a=e("../../fb/UserFb"),o=e("../../../manager/TimerManager"),r=e("../../../ai/RoleAI"),s=function(){function e(){}return e.addDrop=function(e){},e.start=function(e){o.default.ins().doTimer(100,0,this.findDrop,this),this.starting=!0},e.stop=function(){o.default.ins().removeAll(this),this.starting=!1,r.default.ins().isFindDrop=!1},e.findDrop=function(){this.checkDrop(),0==n.default.fubenID&&a.default.ins().sendGetReward()},e.checkDrop=function(){this.stop(),this.completeFunc&&(this.completeFunc.func.call(this.completeFunc.funcThis),this.completeFunc=null)},e.addCompleteFunc=function(e,t){this.completeFunc={func:e,funcThis:t}},e}();i.default=s,cc._RF.pop()},{"../../../ai/RoleAI":"RoleAI","../../../manager/TimerManager":"TimerManager","../../../map/GameMap":"GameMap","../../fb/UserFb":"UserFb"}],EffectConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5a82dFUUstIlrYhAHV+3PKM","EffectConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],EffectModel:[function(e,t,i){"use strict";cc._RF.push(t,"6fcc37nV7xDQI/QE5Yo7yNj","EffectModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../ai/RoleAI"),a=function(){return function(){this.dir=4,this.team=n.Team.NotAtk}}();i.default=a,cc._RF.pop()},{"../ai/RoleAI":"RoleAI"}],EffectivenessTip:[function(e,t,i){"use strict";cc._RF.push(t,"5fcc52isNdP/6X+wBtpnmE3","EffectivenessTip"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/view/BaseEuiView"),a=e("../fb/UserFb"),o=e("../../../core/base/ViewManager"),r=e("../../enum/LayerManager"),s=cc._decorator,u=s.ccclass,l=s.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.descTxt=null,t.nextInfoMoney=null,t.nextInfoExp=null,t.nextMoney=null,t.nextExp=null,t.curMoney=null,t.curExp=null,t.groupGold=null,t.groupExp=null,t.groupInfoGold=null,t.groupInfoExp=null,t.parentRoot=r.LayerManager.UI_Main,t.showType=0,t}return __extends(t,e),t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.showType=e[0]?e[0]:0,this.updateShow(),this.addTouchEvent(this,this.onTap)},t.prototype.updateShow=function(){a.UserFb.ins().guanqiaID;a.UserFb.ins().expEff==a.UserFb.ins().expEffLast?this.groupExp.active=!1:(this.groupExp.active=!0,this.curExp.string=a.UserFb.ins().expEffLast+"",this.nextExp.string=a.UserFb.ins().expEff+""),a.UserFb.ins().goldEff==a.UserFb.ins().goldEffLast?this.groupGold.active=!1:(this.groupGold.active=!0,this.curMoney.string=a.UserFb.ins().goldEffLast+"",this.nextMoney.string=a.UserFb.ins().goldEff+""),this.showType?(this.groupGold.active=this.groupExp.active=!1,this.groupInfoGold.active=this.groupInfoExp.active=!0,this.nextInfoExp.string=a.UserFb.ins().expEff+"",this.nextInfoMoney.string=a.UserFb.ins().goldEff+"",this.descTxt.string="\u5173\u5361\u6548\u7387"):(this.groupGold.active=this.groupExp.active=!0,this.groupInfoGold.active=this.groupInfoExp.active=!1,this.descTxt.string="\u5173\u5361\u6548\u7387\u63d0\u5347")},t.prototype.onTap=function(){o.default.ins().close(this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.node.destroy()},__decorate([l({type:cc.Label,displayName:"\u5173\u5361\u63cf\u8ff0"})],t.prototype,"descTxt",void 0),__decorate([l({type:cc.Label,displayName:"\u91d1\u94b1\u6548\u7387"})],t.prototype,"nextInfoMoney",void 0),__decorate([l({type:cc.Label,displayName:"\u7ecf\u9a8c\u6548\u7387"})],t.prototype,"nextInfoExp",void 0),__decorate([l({type:cc.Label,displayName:"\u4e0b\u7ea7\u94dc\u94b1"})],t.prototype,"nextMoney",void 0),__decorate([l({type:cc.Label,displayName:"\u4e0b\u7ea7\u7ecf\u9a8c"})],t.prototype,"nextExp",void 0),__decorate([l({type:cc.Label,displayName:"\u5f53\u524d\u94dc\u94b1"})],t.prototype,"curMoney",void 0),__decorate([l({type:cc.Label,displayName:"\u5f53\u524d\u7ecf\u9a8c"})],t.prototype,"curExp",void 0),__decorate([l({type:cc.Node,displayName:"\u63d0\u5347\u94dc\u94b1\u7ec4"})],t.prototype,"groupGold",void 0),__decorate([l({type:cc.Node,displayName:"\u63d0\u5347\u7ecf\u9a8c\u7ec4"})],t.prototype,"groupExp",void 0),__decorate([l({type:cc.Node,displayName:"\u5f53\u524d\u94dc\u94b1\u7ec4"})],t.prototype,"groupInfoGold",void 0),__decorate([l({type:cc.Node,displayName:"\u5f53\u524d\u7ecf\u9a8c\u7ec4"})],t.prototype,"groupInfoExp",void 0),t=__decorate([u],t)}(n.default);i.default=c,cc._RF.pop()},{"../../../core/base/ViewManager":"ViewManager","../../../core/view/BaseEuiView":"BaseEuiView","../../enum/LayerManager":"LayerManager","../fb/UserFb":"UserFb"}],EffectsConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3054efV4btCZKWQSE/fz6N9","EffectsConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../module/gamescene/const/SkillEffType"),a=function(){function e(){}return e.isAddBuff=function(e){return e.type==n.SkillEffType.AdditionalState||e.type==n.SkillEffType.AdditionalDamage||e.type==n.SkillEffType.AdditionalAttributes||e.type==n.SkillEffType.Summon},e}();i.default=a,cc._RF.pop()},{"../module/gamescene/const/SkillEffType":"SkillEffType"}],EgretUtils:[function(e,t,i){"use strict";cc._RF.push(t,"ae245I7YO5IupT5fHtbeFTv","EgretUtils"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../manager/TimerManager"),a=function(){function e(){}return e.getQualifiedClassName=function(e){var t=typeof e;if(!e||"object"!=t&&!e.prototype)return t;var i=e.prototype?e.prototype:Object.getPrototypeOf(e);if(i.hasOwnProperty("__class__"))return i.__class__;var n=i.constructor.toString().trim(),a=n.indexOf("("),o=n.substring(9,a);return Object.defineProperty(i,"__class__",{value:o,enumerable:!1,writable:!0}),o},e.getDefinitionByName=function(e){var t=window.__modular,i="";for(var n in t.nameMap)n==e&&(i=t.nameMap[n]);if(i)try{return t.modules[i].module.exports.default}catch(e){console.error("eleName",i)}},e.getFuncName=function(e,t){var i=typeof e;if(!e||"object"!=i&&!e.prototype)return i;var n=e.prototype?e.prototype:Object.getPrototypeOf(e);for(var a in n){if(n[a]==t)return a}return null},e.startTick=function(t,i){var n=e.getFuncName(i,t)+"."+e.getQualifiedClassName(i);if(!this.timeMap.has(n)){var a=setInterval(function(){t.call(i)});this.timeMap.set(n,a)}},e.stopTick=function(t,i){this.timeMap.size<=0||clearInterval(this.timeMap.get(e.getFuncName(i,t)+"."+e.getQualifiedClassName(i)))},e.getTimer=function(){return n.default.getTimer()},e.timeMap=new Map,e}();i.default=a,cc._RF.pop()},{"../manager/TimerManager":"TimerManager"}],EncounterFight:[function(e,t,i){"use strict";cc._RF.push(t,"43636TEllFNSpnvg37z979i","EncounterFight"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/BaseClass"),a=e("./Encounter"),o=e("../../ai/RoleAI"),r=e("../../base/EntityManager"),s=e("../tips/UserTips"),u=e("../fb/UserFb"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aiList={},t.encounterList={},t.willEntityFightTeam=o.Team.Monster,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.start=function(e){var t=this;if(a.default.ins().isEncounter()||r.default.ins().getTeamCount(o.Team.WillBoss)>0)s.default.ins().showTips("|C:0xf3311e&T:\u6b63\u5728\u6311\u6218\u9644\u8fd1\u7684\u4eba|");else if(!u.default.ins().checkInFB()&&a.default.ins().encounterModel[e]){this.encounterIndex=e,this.rolePositions={},this.removeAllEncounter(),o.default.ins().stop(),DropHelp.clearDrop(),UserSkill.ins().setHejiCD(6e3),HejiUseMgr.ins().register(this),this.addCheckResult();for(var i=0,n=r.default.ins().getEntityByTeam(o.Team.My);i<n.length;i++){var l=n[i];if(l.stopMove(),l.playAction(EntityAction.STAND),l instanceof CharRole){this.rolePositions[l.infoModel.handle]={x:l.x,y:l.y,dir:l.dir};var c=new MovieClip;c.playFile(RES_DIR_SKILLEFF+"skill208",1),l.addChild(c),l.playAction(EntityAction.ATTACK)}else r.default.ins().removeByHandle(l.infoModel.handle)}TimerManager.ins().doTimer(800,1,function(){DropHelp.clearDrop(),t.addRole()},this),this.clearOldAI(),this.createEncounterAndMonster(),SoundUtil.ins().playEffect(SoundUtil.SCENE)}},t.prototype.addCheckResult=function(){TimerManager.ins().doTimer(1e3,0,this.checkResult,this)},t.prototype.checkResult=function(){a.default.ins().isFindDrop||0!=r.default.ins().getTeamCount(o.Team.My)&&0!=r.default.ins().getTeamCount(o.Team.WillEntity)||(0==r.default.ins().getTeamCount(o.Team.WillEntity)?this.sendFightResult(1):this.sendFightResult(0))},t.prototype.sendFightResult=function(e){e?a.default.ins().sendFightResult(e):TimerManager.ins().doTimer(2e3,1,function(){a.default.ins().sendFightResult(e)},this),a.default.ins().postFightResult(e),TimerManager.ins().remove(this.checkResult,this)},t.prototype.win=function(){for(var e=this,t=0,i=r.default.ins().getEntityByTeam(o.Team.My);t<i.length;t++){var n=i[t];if(n.stopMove(),n instanceof CharRole){var a=new MovieClip;a.playFile(RES_DIR_SKILLEFF+"skill208",1),n.addChild(a),n.playAction(EntityAction.ATTACK)}else r.default.ins().removeByHandle(n.infoModel.handle)}SoundUtil.ins().playEffect(SoundUtil.SCENE),TimerManager.ins().doTimer(800,1,function(){for(var t=0,i=r.default.ins().getEntityByTeam(o.Team.My);t<i.length;t++){var n=i[t];r.default.ins().removeByHandle(n.infoModel.handle)}e.stop(),e.fightEnd(),GameMap.sceneInMain()&&(e.resetPos(),o.default.ins().start())},this)},t.prototype.lose=function(){SoundUtil.ins().playEffect(SoundUtil.SCENE),this.stop(),this.fightEnd()},t.prototype.fightEnd=function(){EncounterModel.redName<GlobalConfig.SkirmishBaseConfig.maxPkval&&a.default.ins().getEncounterLength()&&ViewManager.ins().open(LadderWin)},t.prototype.stop=function(){if(void 0!=this.encounterIndex){for(var e in HejiUseMgr.ins().unregister(this),TimerManager.ins().removeAll(this),r.default.ins().resetRole(),this.encounterIndex=void 0,this.willEntityFightTeam=o.Team.Monster,this.removeAllEncounter(),this.aiList){var t=r.default.ins().getEntityByHandle(e);t&&t.AI_STATE!=AI_State.Die&&o.default.ins().add(t)}this.aiList={},GameLogic.ins().postMoveCamera()}},t.prototype.resetPos=function(){var e=r.default.ins().getEntityByTeam(o.Team.My);for(var t in e){var i=e[t],n=this.rolePositions[i.infoModel.handle];n&&(i.x=n.x,i.y=n.y);var a=new MovieClip;a.playFile(RES_DIR_SKILLEFF+"skill208",1),i.addChild(a)}this.rolePositions={},GameLogic.ins().postMoveCamera()},t.prototype.removeAllEncounter=function(){for(var e in this.encounterList)r.default.ins().removeByHandle(e),delete this.encounterList[e]},t.prototype.addRole=function(){for(var e=r.default.ins().getEntityByTeam(o.Team.My),t=0,i=e;t<i.length;t++){var n=i[t];r.default.ins().removeByHandle(n.infoModel.handle)}r.default.ins().resetRole();var s=r.default.ins().getNoDieRole(),u=this.getRolePos();s.x=u[0]*GameMap.CELL_SIZE,s.y=u[1]*GameMap.CELL_SIZE;var l=r.default.ins().screeningTargetByPos(s);if(l[0])s.dir=DirUtil.get8DirBy2Point(s,l[0]);else{var c=a.default.ins().encounterModel[this.encounterIndex];if(c){var d=c.subRole.length;Assert(!1,"\u906d\u9047\u6218\u627e\u4e0d\u5230\u654c\u4eba\uff0c\u5b9e\u9645\u906d\u9047\u6218\u6570\u636e\u4eba\u6570\uff1a"+d)}}var f=r.default.ins().getMyOtherRolePos();for(var p in e=r.default.ins().getEntityByTeam(o.Team.My)){if(e[p].playAction(EntityAction.STAND),o.default.ins().add(e[p]),e[p]!=s){var h=e[p].infoModel.handle;e[p].dir=s.dir,e[p].x=Math.floor(f[h].x),e[p].y=Math.floor(f[h].y)}var g=new MovieClip;g.playFile(RES_DIR_SKILLEFF+"skill208",1),e[p].addChild(g)}GameLogic.ins().postMoveCamera()},t.prototype.getRoles=function(){var e=a.default.ins().encounterModel[this.encounterIndex];return e&&e.subRole},t.prototype.getSkillLvl=function(){var e=a.default.ins().encounterModel[this.encounterIndex];return e&&e.hejiLvl||0},t.prototype.getIsWeiShe=function(e){var t=a.default.ins().encounterModel[this.encounterIndex];return!!t&&(e?Actor.weiWang>t.weiWang:Actor.weiWang<t.weiWang)},t.prototype.getWeiSheHurt=function(e){if(!this.getIsWeiShe(e))return 0;var t=Rank.ins().getRankModel(RankDataType.TYPE_WEIWANG),i="";e?i=Actor.myName:i=a.default.ins().encounterModel[this.encounterIndex].subRole[0].name;var n=0;if(t)for(var o=0;o<3;o++){var r=t.getDataList(o);if(r&&r.player==i){n=r.pos;break}}return GlobalConfig.PrestigeBase.rankDeterDam[n-1]||GlobalConfig.PrestigeBase.normalDeterDam},t.prototype.getRolePos=function(){var e=GlobalConfig.SkirmishBaseConfig.range;return GameMap.getPosRange(this.zyRolePos[0],this.zyRolePos[1],e)},t.prototype.clearOldAI=function(){this.aiList=o.default.ins().getAIList(),o.default.ins().clearAIList()},t.prototype.createEncounterAndMonster=function(){var e=u.default.ins().zyPos,t=e[Math.floor(Math.random()*e.length)],i=t[0];this.zyRolePos=i;var n=u.default.ins().waveMonsterId[0],r=t[1];Assert(r,"\u5173\u5361\u7b2c"+u.default.ins().guanqiaID+"\u5173\u906d\u9047\u6218\u602a\u7269\u51fa\u751f\u70b9\u914d\u9519")&&(r=[]);for(var s=0;s<r.length;s++){var l=u.default.ins().createMonster(n);l.x=r[s][0]*GameMap.CELL_SIZE,l.y=r[s][1]*GameMap.CELL_SIZE;var c=GameLogic.ins().createEntityByModel(l);c.AI_STATE=AI_State.Patrol,this.encounterList[c.infoModel.handle]=c}var d=a.default.ins().encounterModel[this.encounterIndex],f=d.subRole.length;for(s=0;s<f;s++){var p=d.subRole[s];if(p){p.setAtt(AttributeType.atHp,p.getAtt(AttributeType.atMaxHp)),p.setAtt(AttributeType.atMp,p.getAtt(AttributeType.atMaxMp)),p.type=EntityType.Role,p.x=i[0]*GameMap.CELL_SIZE+Math.floor(40*s*Math.random()),p.y=i[1]*GameMap.CELL_SIZE+Math.floor(40*s*Math.random());var h=GameLogic.ins().createEntityByModel(p,o.Team.WillEntity);h.AI_STATE=AI_State.Stand,h.updateNeiGong(),this.encounterList[p.handle]=h}}o.default.ins().start()},t}(n.default);i.default=l,window.GameSystem.push(l.ins.bind(l)),cc._RF.pop()},{"../../../core/base/BaseClass":"BaseClass","../../ai/RoleAI":"RoleAI","../../base/EntityManager":"EntityManager","../fb/UserFb":"UserFb","../tips/UserTips":"UserTips","./Encounter":"Encounter"}],EncounterModel:[function(e,t,i){"use strict";cc._RF.push(t,"5b660I9ydFN/5fsxwNUa4ur","EncounterModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../entity/Role"),a=e("../../base/EntityManager"),o=e("../../map/GameMap"),r=e("../../ai/RoleAI"),s=e("../specialring/model/OtherFireRingData"),u=function(){function e(e){this.subRole=[],this.hejiLvl=0,this.weiWang=0,this.name=e}return e.prototype.parser=function(e){this.index=e.readInt(),this.lv=e.readShort(),this.zsLv=e.readShort(),this.name=e.readString(),this.subRole=[];for(var t=e.readShort(),i=0;i<t;i++){var a=this.subRole[i]=new n.default;a.parser(e),a.name=this.name}this.fireRing=this.fireRing||new s.default,this.fireRing.parser(e),this.firstData=0!=e.readByte(),this.hejiLvl=e.readInt(),this.weiWang=e.readInt()},e.moveEncounterByMasterHandle=function(e,t,i){var n=a.default.ins().getMasterList(e);for(var s in n){var u=n[s];u.parent&&u.infoModel&&(o.default.moveEntity(u,t,i),u.AI_STATE=r.AI_State.Run)}},e.countKillNumByMarster=function(e){var t=0,i=a.default.ins().getMasterList(e);for(var n in i){var o=i[n];o.parent&&o.infoModel&&(t+=o.infoModel.killNum)}return t},e.getLiveNumByMarster=function(e){var t=a.default.ins().getMasterList(e);for(var i in t){var n=t[i];if(n.parent&&n.infoModel)return 1}return 0},e.redName=0,e}();i.default=u,cc._RF.pop()},{"../../ai/RoleAI":"RoleAI","../../base/EntityManager":"EntityManager","../../entity/Role":"Role","../../map/GameMap":"GameMap","../specialring/model/OtherFireRingData":"OtherFireRingData"}],Encounter:[function(e,t,i){"use strict";cc._RF.push(t,"c6f89xGENZG2aflsAhQCVMs","Encounter"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("./EncounterModel"),r=e("./EncounterFight"),s=e("../activity/model/RewardData"),u=e("../../../core/base/MessageCenter"),l=e("../../manager/GlobalConfig"),c=e("../gamescene/GameLogic"),d=e("../../manager/TimerManager"),f=e("../tips/UserTips"),p=e("../../../core/base/ResultManager"),h=e("../../map/GameMap"),g=e("../gamescene/help/DropHelp"),y=e("../playfun/PlayFun"),v=function(e){function t(){var i=e.call(this)||this;return i.encounterModel=[],i.wildModel={},i.isGuiding=!1,i.wildPersonList={},i.isFindDrop=!1,i.buyAndFight=!1,i.encounterRank=0,u.default.compile(t),i.sysId=a.PackageID.Encounter,i.regNetMsg(1,i.doLastRefreshTime),i.regNetMsg(2,i.doEncounterData),i.regNetMsg(3,i.doResult),i.regNetMsg(4,i.postZaoYuRecord),i.regNetMsg(7,i.postDataUpdate),i.regNetMsg(5,i.doUpdateWildBoss),i.regNetMsg(6,i.doWildBossResult),i.regNetMsg(8,i.doAddWildPlayer),i.regNetMsg(9,i.doWildPlayerResult),i.regNetMsg(10,i.doRedNameResult),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.doLastRefreshTime=function(e){o.default.lastTime=e.readInt();e.readInt(),e.readInt();o.default.refreshTimes=e.readInt(),o.default.redName=e.readInt(),this.postEncounterDataChange()},t.prototype.sendRefresh=function(){this.sendBaseProto(1)},t.prototype.sendFightResult=function(e){if(void 0!=r.default.ins().encounterIndex){1==e&&console.log("PK\u503c\u589e\u52a0"+l.default.SkirmishBaseConfig.onesPkval+"\u70b9");var t=this.getBytes(2);t.writeInt(r.default.ins().encounterIndex),t.writeInt(e),this.sendToServer(t)}},t.prototype.postFightResult=function(e){return e},t.prototype.isEncounter=function(){return void 0!=r.default.ins().encounterIndex&&r.default.ins().encounterIndex>=0||this.isFindDrop},t.prototype.isHasRed=function(){for(var e=0,i=0;i<t.ins().encounterModel.length;i++)t.ins().getEncounterModel(i)&&e++;return e>0&&o.default.redName<l.default.SkirmishBaseConfig.maxPkval?e:0},t.prototype.doEncounterData=function(e){var t=e.readInt();e.position-=4,this.encounterModel[t]=this.encounterModel[t]||new o.default,this.encounterModel[t].parser(e),this.postEncounterDataChange()},t.prototype.postEncounterDataChange=function(){},t.prototype.sendGetreward=function(){this.sendBaseProto(3)},t.prototype.doResult=function(e){for(var i,n=e.readInt(),a=e.readInt(),o=[],u=[0,1,4,3],l=u.length,c=0;c<l;c++)(i=new s.default).type=0,i.id=u[c],i.count=e.readInt(),i.count&&o.push(i);l=e.readShort();for(c=0;c<l;c++)(i=new s.default).parser(e),o.push(i);this.encounterModel[n-1]=null;if(a&&l){this.isFindDrop=!0,g.default.addCompleteFunc(function(){t.ins().isFindDrop=!1,this.sendGetreward(),r.default.ins().win()},this),g.default.start()}else a||r.default.ins().lose();console.log("======\u906d\u9047\u6218\u8fd4\u56de  result = "+a+"  \u9053\u5177\u6570\u91cf = "+l),this.postEncounterDataChange()},t.prototype.getEncounterLength=function(){for(var e=0,i=0;i<t.ins().encounterModel.length;i++){t.ins().getEncounterModel(i)&&(e+=1)}return e},t.prototype.postDataUpdate=function(e){var t=e.readInt(),i=e.readShort();return this.encounterRank=i,[t,i]},t.prototype.sendInquirePrestige=function(){this.sendBaseProto(7)},t.prototype.postZaoYuRecord=function(e){if(void 0===e&&(e=null),!e)return null;for(var t=e.readShort(),i=[],n=0;n<t;n++){var a=[];a[0]=e.readInt(),a[1]=e.readBoolean(),a[2]=e.readString(),a[3]=e.readInt(),a[4]=e.readInt(),a[5]=e.readInt(),a[6]=e.readInt(),i[n]=a}return i},t.prototype.sendInquireRecord=function(){this.sendBaseProto(4)},t.prototype.doUpdateWildBoss=function(e){var t=e.readInt();this.willBossID=t,y.default.ins().upDataWillBoss(t)},t.prototype.createBoss=function(){},t.prototype.doWildBossResult=function(e){if(e.readBoolean())for(var t=e.readShort(),i=0;i<t;i++){(new s.default).parser(e)}g.default.addCompleteFunc(function(){this.sendGetAward(),c.default.ins().createGuanqiaMonster()},this),g.default.start()},t.prototype.postCreateDrop=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.prototype.sendResult=function(e){var t=this.getBytes(5);t.writeBoolean(e),this.sendToServer(t)},t.prototype.sendGetAward=function(){this.sendBaseProto(6)},t.prototype.getEncounterModel=function(e){return this.encounterModel[e]},t.prototype.clearEncounterModel=function(){this.encounterModel.length=0},t.prototype.sendCleanRedName=function(){this.sendBaseProto(8)},t.prototype.doAddWildPlayer=function(e){},t.prototype.canRunAwary=function(e){var t=this.wildPersonList[e];return t.backCount--,0==t.backCount},t.prototype.RunAwary=function(e){this.wildPersonList[e];delete this.wildPersonList[e]},t.prototype.sendWildPeopleResult=function(e,t){var i=this.getBytes(9);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.doWildPlayerResult=function(e){e.readInt();for(var i,n=e.readInt(),a=[],o=e.readShort(),r=0;r<o;r++)(i=new s.default).parser(e),a.push(i);if(n){g.default.addCompleteFunc(function(){this.sendGetWildPeopleReward(),c.default.ins().createGuanqiaMonster()},this),g.default.start()}else d.default.ins().doTimer(800,1,function(){p.default.ins().create(h.default.fbType,n,a,"",!1),c.default.ins().createGuanqiaMonster(),t.ins().wildPersonList={}},this)},t.prototype.sendCleanWildPeople=function(e){var t=this.getBytes(10);t.writeInt(e),this.sendToServer(t)},t.prototype.sendGetWildPeopleReward=function(){this.sendBaseProto(11)},t.prototype.doRedNameResult=function(e){f.default.ins().showTips("PK\u503c\u51cf\u5c11"+l.default.SkirmishBaseConfig.subPkval+"\u70b9")},t.prototype.checkIsEncounter=function(e,t){var i=this.encounterModel[e];if(!i)return!1;for(var n=i.subRole,a=0;a<n.length;a++){var o=n[a];if(o&&o.handle==t.handle)return!0}return!1},t}(n.default);i.default=v,window.GameSystem.push(v.ins.bind(v)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/base/ResultManager":"ResultManager","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../../map/GameMap":"GameMap","../activity/model/RewardData":"RewardData","../gamescene/GameLogic":"GameLogic","../gamescene/help/DropHelp":"DropHelp","../playfun/PlayFun":"PlayFun","../tips/UserTips":"UserTips","./EncounterFight":"EncounterFight","./EncounterModel":"EncounterModel"}],Encrypt:[function(e,t,i){"use strict";cc._RF.push(t,"4c484pCoA1Mf4gTOuyC2GZS","Encrypt"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./CRC16"),a=e("../net/binary"),o=function(){function e(){}return e.encode=function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),i>=t.length)return 0;var a=n?i+n:t.length;a>t.length&&(a=t.length),t.position=i;for(var o=i;o<a;++o){var r=t.readByte();r^=e.sKeyBuff[o%4],t.position--,t.writeByte(r)}return a-i},e.decode=function(t,i,n){return void 0===i&&(i=0),void 0===n&&(n=0),e.encode(t,i,n)},e.getCRC16=function(e,t){return void 0===t&&(t=0),n.default.update(e,0,t)},e.getCRC16ByPos=function(e,t,i){return void 0===t&&(t=0),void 0===i&&(i=0),n.default.update(e,t,i)},e.getCheckKey=function(){var t=new a.ByteArray;return t.endian=a.Endian.LITTLE_ENDIAN,t.writeUnsignedInt(e.sKey),n.default.update(t)},e.getSelfSalt=function(){return e.sSelfSalt},e.getTargetSalt=function(){return e.sTargetSalt},e.setTargetSalt=function(t){e.sTargetSalt=t,e.makeKey()},e.makeSalt=function(){new Date;return 1591176970891},e.makeKey=function(){e.sKey=8254+(e.sSelfSalt^e.sTargetSalt);for(var t=0;t<4;++t)e.sKeyBuff[t]=(e.sKey&255<<(t<<3))>>(t<<3)},e.sSelfSalt=e.makeSalt(),e.sKeyBuff=new Array(4),e}();i.default=o,cc._RF.pop()},{"../net/binary":"binary","./CRC16":"CRC16"}],EnhanceAttrConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3ccb69bbaREhI/Jcb+puYn+","EnhanceAttrConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],EnhanceCostConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4eb69NCIeBPOYWITPf8rV/y","EnhanceCostConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],EntityAction:[function(e,t,i){"use strict";cc._RF.push(t,"0db57MBlqVOUqGNsau9a+E8","EntityAction"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.ATTACK="a",e.CAST="c",e.STAND="s",e.RUN="r",e.DIE="d",e.HIT="h",e}();i.EntityAction=n,cc._RF.pop()},{}],EntityBuff:[function(e,t,i){"use strict";cc._RF.push(t,"1de8cw/pDNCfafLfxwGAjR+","EntityBuff"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../manager/GlobalConfig"),a=e("../ai/RoleAI"),o=e("../base/ObjectPool"),r=e("../Utils/EgretUtils"),s=e("../module/gamescene/const/SkillEffType"),u=e("../base/EntityManager"),l=function(){function e(){this.multRate=1}return e.prototype.dispose=function(){this.source=null,this.hostsHandle=null,this.multRate=1},e.createBuff=function(t,i,o){var r=n.default.EffectsConfig[t];r||console.log("EffectsConfig\u4e2d "+t+" \u914d\u7f6e\u4e3a\u7a7a\uff01\uff01\uff01");var s=a.default.ins().skillEffValue(i,r,o),u=o&&o.time||0;return e.createBaseBuff(t,i,s,r.duration+u)},e.createBaseBuff=function(t,i,a,l){var c=n.default.EffectsConfig[t];c||console.log("EffectsConfig\u4e2d "+t+" \u914d\u7f6e\u4e3a\u7a7a\uff01\uff01\uff01");var d=o.default.shift(e);if(d.effConfig=c,d.value=a,d.addTime=r.default.getTimer(),d.endTime=d.addTime+(l||c.duration),d.count=(l||c.duration)/c.interval>>0,d.step=0,d.source=i,c.type==s.SkillEffType.HostAddAttributes){null==d.hostsHandle&&(d.hostsHandle=[]);var f=u.default.ins().getRootMasterHandle(i.infoModel.handle);d.hostsHandle.indexOf(f)<0&&d.hostsHandle.push(f)}return d},e.prototype.isExecute=function(){return r.default.getTimer()-this.addTime>this.step*this.effConfig.interval},e.prototype.canRemove=function(){return this.effConfig.type!=s.SkillEffType.Summon&&r.default.getTimer()>=this.endTime},e.prototype.isCanotHit=function(){return this.effConfig.type==s.SkillEffType.AdditionalState&&1==this.effConfig.args.i},e}();i.default=l,cc._RF.pop()},{"../Utils/EgretUtils":"EgretUtils","../ai/RoleAI":"RoleAI","../base/EntityManager":"EntityManager","../base/ObjectPool":"ObjectPool","../manager/GlobalConfig":"GlobalConfig","../module/gamescene/const/SkillEffType":"SkillEffType"}],EntityFilterUtil:[function(e,t,i){"use strict";cc._RF.push(t,"549a5LNqAFDm6kL9rfeCKtT","EntityFilterUtil"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.no=0]="no",e[e.hard=1]="hard",e[e.poison=2]="poison"}(i.EntityFilter||(i.EntityFilter={}));cc._RF.pop()},{}],EntityHideBody:[function(e,t,i){"use strict";cc._RF.push(t,"7d536dqG3dEppS1l5CtRo5m","EntityHideBody"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./EntityManager"),a=e("../module/gamescene/GameLogic"),o=e("../manager/GlobalConfig"),r=e("../map/GameMap"),s=e("./EntityType"),u=e("../entity/CharRole"),l=e("../module/setting/SysSetting"),c=e("./BaseSystem"),d=e("../module/boss/UserBoss"),f=e("../module/city/CityCC"),p=e("../module/kf/devildom/DevildomSys"),h=e("../module/kf/kfBoss/KFBossSys"),g=e("../../core/base/MessageCenter"),y=function(e){function t(){var t=e.call(this)||this;return t.isOpen=!1,t.isShow=!1,t.showHandles=[],t.showNum=3,t.storageKey="hide_fbtype_",t.lastAtkHandle=0,t.lastFbID=0,t.observe(a.default.ins().postRemoveEntity,t.onRemoveEntity),t.observe(a.default.ins().postAtkTarget,t.onChangeTarget),t.observe(d.default.ins().postRemainTime,t.onRoleDie),t.observe(f.default.ins().postRemainTime,t.onRoleDie),t.observe(p.default.ins().postRevive,t.onRoleDie),t.observe(h.default.ins().postRevive,t.onRoleDie),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.changeScene=function(){this.lastFbID!=r.default.fubenID&&(this.lastFbID=r.default.fubenID,this.isOpen=this.getIsOpen(),this.showHandles.length=0,this.lastAtkHandle=0,this.isOpen&&(this.isShow=!l.default.ins().getBool(this.storageKey+r.default.fbType)),this.isOpen?ViewManager.ins().open(ShieldWin):ViewManager.ins().close(ShieldWin))},t.prototype.onCreateEntity=function(e){this.isOpen&&(e.isMy||e.type!=s.EntityType.Role||this.updateShowHandles(e.masterHandle,!0)&&this.sendHandlesToServer())},t.prototype.setShowState=function(e){this.isShow=e,this.showOrHideEntitys(this.isShow),this.sendHandlesToServer(),l.default.ins().setBool(this.storageKey+r.default.fbType,!e)},t.prototype.checkIsShowBody=function(e){if(!this.isOpen)return!0;if(!this.isShow)return!1;var t=n.default.ins().getRootMasterHandle(e);return!t||this.showHandles.indexOf(t)>=0},t.prototype.onRemoveEntity=function(e){e[0];var t=e[1];this.isOpen&&!t.isMy&&t instanceof u.default&&this.updateShowHandles(t.infoModel.masterHandle,!1)&&(this.sendHandlesToServer(),this.searchNewHandle())},t.prototype.updateShowHandles=function(e,t){if(t&&this.showHandles.length>=this.showNum)return!1;var i=this.showHandles.indexOf(e);if(t){if(-1==i)return this.showHandles.push(e),!0}else if(i>=0)return this.showHandles.splice(i,1),!0;return!1},t.prototype.onChangeTarget=function(){if(this.isOpen&&a.default.ins().currAttackHandle!=this.lastAtkHandle){var e=a.default.ins().currAttackHandle,t=this.lastAtkHandle;if(this.lastAtkHandle=e,this.isShow||(t&&this.hideEntity(t),e&&this.showEntity(e),this.sendHandlesToServer()),e&&!(this.showHandles.indexOf(e)>=0)){if(this.showHandles.length>=this.showNum){var i=this.showHandles.shift();this.hideEntity(i)}this.showHandles.push(e),this.showEntity(e),this.sendHandlesToServer()}}},t.prototype.onRoleDie=function(){if(this.isOpen){var e=this.lastAtkHandle;this.lastAtkHandle=0,this.isShow||e&&(this.hideEntity(e),this.sendHandlesToServer())}},t.prototype.searchNewHandle=function(){var e=n.default.ins().getAllEntity();for(var t in e){var i=e[t].infoModel;if(i&&!i.isMy&&i.type==s.EntityType.Role&&this.updateShowHandles(i.masterHandle,!0)){this.showEntity(i.masterHandle);break}}},t.prototype.showOrHideEntitys=function(e){for(var t=0,i=this.showHandles;t<i.length;t++){var n=i[t];e?this.showEntity(n):this.hideEntity(n)}},t.prototype.showEntity=function(e){for(var t=0,i=n.default.ins().getEntityRelationHandle(e);t<i.length;t++){i[t].showBodyContainer()}},t.prototype.hideEntity=function(e){for(var t=0,i=n.default.ins().getEntityRelationHandle(e);t<i.length;t++){i[t].hideBodyContainer()}},t.prototype.sendHandlesToServer=function(){var e=this.isShow?this.showHandles:this.lastAtkHandle?[this.lastAtkHandle]:[];a.default.ins().sendGetOtherAttr(e)},t.prototype.getIsOpen=function(){return!!o.default.ScenesConfig[r.default.mapID].hideBodyEff},__decorate([g.callDelay(200)],t.prototype,"sendHandlesToServer",null),t}(c.default);i.default=y,cc._RF.pop()},{"../../core/base/MessageCenter":"MessageCenter","../entity/CharRole":"CharRole","../manager/GlobalConfig":"GlobalConfig","../map/GameMap":"GameMap","../module/boss/UserBoss":"UserBoss","../module/city/CityCC":"CityCC","../module/gamescene/GameLogic":"GameLogic","../module/kf/devildom/DevildomSys":"DevildomSys","../module/kf/kfBoss/KFBossSys":"KFBossSys","../module/setting/SysSetting":"SysSetting","./BaseSystem":"BaseSystem","./EntityManager":"EntityManager","./EntityType":"EntityType"}],EntityManager:[function(e,t,i){"use strict";cc._RF.push(t,"31d90ywikVGorSfqrsKcWCu","EntityManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/base/BaseClass"),a=e("./EntityType"),o=e("../ai/RoleAI"),r=e("../entity/Actor"),s=e("../entity/CharRole"),u=e("./ObjectPool"),l=e("../entity/SubRoles"),c=e("../entity/CharMonster"),d=e("../module/encounter/Encounter"),f=e("../../core/utils/MathUtils"),p=e("../map/GameMap"),h=e("../module/encounter/EncounterFight"),g=e("../../core/base/AttributeType"),y=e("../module/gamescene/GameLogic"),v=e("../../core/utils/Algorithm"),m=e("../module/fb/UserFb"),b=e("../consts/JobConst"),_=e("../../core/utils/DisplayUtils"),C=e("../entity/CharMiner"),I=e("../../core/utils/DirUtil"),T=e("../../core/base/ErrorLog"),S=e("../entity/CharNpc"),R=e("../entity/CharTransfer"),B=e("../module/mine/MineFight"),M=e("./EntityHideBody"),E=e("./EntityShowMgr"),D=e("../module/gamescene/GameSceneCtr"),A=function(e){function t(){var t=e.call(this)||this;return t.entityList={},t.transferList={},t.mineList={},t._masterList={},t.distances=[],t.listCount=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getAllEntity=function(){return this.entityList},t.prototype.resetRole=function(){for(var e=l.default.ins().subRolesLen,t=0;t<e;t++){var i=l.default.ins().getSubRoleByIndex(t);if(i.name=r.default.myName,this.getEntityByHandle(i.handle)){var n=this.getEntityByHandle(i.handle);n.infoModel.setAtt(g.AttributeType.atHp,i.getAtt(g.AttributeType.atMaxHp)),n.infoModel.setAtt(g.AttributeType.atMp,i.getAtt(g.AttributeType.atMaxMp)),n.updateBlood(!0)}else i.setPos(DropHelp.tempDropPoint.x*p.default.CELL_SIZE,DropHelp.tempDropPoint.y*p.default.CELL_SIZE),debug.log("--------------\u6240\u6709\u89d2\u8272\u91cd\u7f6e----------------"),i.setAtt(g.AttributeType.atHp,i.getAtt(g.AttributeType.atMaxHp)),i.setAtt(g.AttributeType.atMp,i.getAtt(g.AttributeType.atMaxMp)),y.default.ins().createEntityByModel(i,o.Team.My)}},t.prototype.addList=function(e){if(e.infoModel.handle||(e.infoModel.handle=e.hashCode),this.entityList[e.infoModel.handle]!=e){if(this.entityList[e.infoModel.handle]=e,e.infoModel.masterHandle){var t=e.infoModel.masterHandle;this._masterList[t]||(this._masterList[t]=[]),this._masterList[t].push(e)}e.infoModel.type==a.EntityType.Mine&&(this.mineList[e.infoModel.index]=e);var i=this.listCount[e.team]||0;this.listCount[e.team]=++i}},t.prototype.addTransfer=function(e){this.transferList[e.infoModel.configID]=e,SkillEffPlayer.bottomLayer.addChild(e)},t.prototype.removeTransferById=function(e){var t=this.transferList[e];t&&(delete this.transferList[e],_.default.removeFromParent(t))},t.prototype.getTransferById=function(e){return this.transferList[e]},t.prototype.getMineByIndex=function(e){return this.mineList[e]},t.prototype.removeMineByIndex=function(e){var t=this.mineList[e];t&&(delete this.mineList[e],t.infoModel&&this.removeByHandle(t.infoModel.handle))},t.prototype.createEntity=function(e,t){switch(e.type){case a.EntityType.Role:case a.EntityType.LadderPlayer:var i=e;t&&null!=t[0]?i.team=t[0]:e.masterHandle&&e.masterHandle==r.default.handle?i.team=o.Team.My:i.team=o.Team.WillEntity;var n=u.default.shift(s.default);if(n.reset(),i.masterHandle==r.default.handle){for(var d=void 0,f=l.default.ins().subRolesLen,p=0;p<f;p++)if(p==i.configID){d=p;break}l.default.ins().getSubRoleByIndex(d)&&(i=l.default.ins().getSubRoleByIndex(d).mergeData(i))}n.infoModel=i,n.x=i.x,n.y=i.y,D.default.ins().creatRole(i.getAtt(g.AttributeType.atAttack),i.getAtt(g.AttributeType.atHp)),this.addList(n),o.default.ins().canAddToAi()&&o.default.ins().add(n);var h=!0;if(i.team!=o.Team.My){if(!E.default.ins().checkShowHandle(i.masterHandle))return n.hideBodyContainer(),n.updateModel(),null;h=M.default.ins().checkIsShowBody(i.masterHandle)}return h?n.showBodyContainer():n.hideBodyContainer(),n.updateModel(),n;case a.EntityType.Monster:case a.EntityType.CollectionMonst:t&&null!=t[0]?e.team=t[0]:e.masterHandle&&0!=e.masterHandle?e.isMy?e.team=o.Team.My:e.team=o.Team.WillEntity:e.team=o.Team.Monster;var y=u.default.shift(c.default);y.reset(),y.infoModel=e,y.x=e.x,y.y=e.y,D.default.ins().againCreatMost(e.getAtt(g.AttributeType.atAttack),e.getAtt(g.AttributeType.atHp)),this.addList(y),o.default.ins().canAddToAi()&&o.default.ins().add(y);h=!0;if(y.team!=o.Team.My&&e.masterHandle){var v=this.getRootMasterHandle(e.masterHandle),m=this.getMasterList(v);if(m)for(var b=0,_=m;b<_.length;b++){var I=_[b];if(y!=I&&!I.parent)return y.hideBodyContainer(),y.updateModel(),null}e.team==o.Team.WillEntity&&(h=M.default.ins().checkIsShowBody(e.masterHandle))}return h?y.showBodyContainer():y.hideBodyContainer(),y.updateModel(),y;case a.EntityType.DropItem:var T=u.default.shift(charItem2);return T.setData(e.itemData),T.x=e.x,T.y=e.y,T.infoModel=e,this.addList(T),T.addRoatEffect(),T.addFloatEffect(),T;case a.EntityType.Transfer:var B=u.default.shift(R.default);return B.infoModel=e,this.addTransfer(B),B.updateModel(),B;case a.EntityType.Npc:var A=u.default.shift(S.default);return A.infoModel=e,this.addList(A),A.updateModel(),A;case a.EntityType.Mine:var P=u.default.shift(C.default);return P.infoModel=e,this.addList(P),P.updateModel(),P}return null},t.prototype.removeAll=function(){for(var e in this.entityList)this.removeByHandle(e);for(var e in this.transferList)this.removeTransferById(e);h.default.ins().stop(),this.entityList={},this._masterList={},this.transferList={},this.listCount=[]},t.prototype.hideOtherEntity=function(e){for(var t in this.isHideOther=e,this.entityList)this.entityList[t].team==o.Team.WillEntity&&(e?_.default.removeFromParent(this.entityList[t]):y.default.ins().addEntity(this.entityList[t]))},t.prototype.getEntityRelationHandle=function(e){for(var t=this.getRootMasterHandle(e),i=this.getMasterList(t),n=[].concat(i||[]),a=0,o=n;a<o.length;a++){var r=o[a].infoModel;if(r&&r.job==b.JobConst.DaoShi){var s=this.getMasterList(r.handle);s&&(n=n.concat(s));break}}return n},t.prototype.removeByHandle=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=!1);var n=this.entityList[e];if(n){s.default;console.log("\u5220\u9664----"+e);var r=n.infoModel.masterHandle;if(r){for(var u=this._masterList[r],l=0;u&&l<u.length;l++)if(u[l]==n){u.splice(l,1);break}u&&0==u.length&&delete this._masterList[r]}for(var l in delete this.entityList[e],this.entityList)this.entityList[l].infoModel.masterHandle&&this.entityList[l].infoModel.masterHandle==e&&this.removeByHandle(this.entityList[l].infoModel.handle);var d=this.listCount[n.team]||0;return this.listCount[n.team]=--d,n instanceof c.default&&(n.stopMove(),n.removeAllFilters()),t&&(_.default.removeFromParent(n),n instanceof c.default&&!(n instanceof s.default)&&n.destroy()),o.default.ins().remove(n),(p.default.sceneInMain()||p.default.fbType==m.default.FB_TYPE_EXP)&&n.infoModel.type==a.EntityType.Monster&&i&&y.default.ins().postExpMc(n),n.infoModel.type==a.EntityType.Mine&&(delete this.mineList[n.infoModel.index],n.destruct()),n}},t.prototype.getEntityByHandle=function(e){return this.entityList[e]},t.prototype.getMasterList=function(e){return this._masterList[e]},Object.defineProperty(t.prototype,"masterList",{get:function(){return this._masterList},enumerable:!0,configurable:!0}),t.prototype.getRootMasterHandle=function(e){var i=t.ins().getEntityByHandle(e);return i&&i.infoModel&&i.infoModel.masterHandle>0&&i.infoModel.masterHandle!=e?this.getRootMasterHandle(i.infoModel.masterHandle):e},t.prototype.getMainRole=function(e){return this.getEntityByHandle(l.default.ins().getSubRoleByIndex(e).handle)},t.prototype.getJobMainRole=function(e){var t,i=0;for(var n in l.default.ins().jobDic){if(i==e){t=l.default.ins().jobDic[n];break}i++}return this.getEntityByHandle(t.handle)},t.prototype.getNoDieRoleIndex=function(){for(var e,i=l.default.ins().subRolesLen,n=0;n<i;n++)if((e=t.ins().getJobMainRole(n))&&e.getHP()>0&&e.active)return n;return-1},t.prototype.getNoDieRole=function(){for(var e,i=l.default.ins().subRolesLen,n=0;n<i;n++)if((e=t.ins().getJobMainRole(n))&&e.getHP()>0&&e.active)return e;return null},t.prototype.getMyOtherRolePos=function(){var e=this.getNoDieRole(),t=this.getEntityByTeam(o.Team.My),i=0,n={};for(var a in t){var r=t[a];if(r!=e){var s=[1,-1];2==t.length&&(s=[0]);var u=I.default.getGridByDir(e.dir+s[i]!=null?s[i]:0);i+=1,n[r.infoModel.handle]={x:e.x+u.x,y:e.y+u.y}}}return n[e.infoModel.handle]={x:e.x,y:e.y},n},t.prototype.sortSubRole=function(e,t){return v.default.sortAsc(e.infoModel.job,t.infoModel.job)},t.prototype.getTeamCount=function(e){return B.default.ins().isFighting||d.default.ins().isEncounter()?o.default.ins().getTeamCount(e):this.listCount[e]||0},t.prototype.checkCount=function(e,t,i,n){void 0===i&&(i=1),void 0===n&&(n=!1);var a=0;for(var o in this.entityList){var r=this.entityList[o];if((!n&&r.team!=e.team||n&&r.team==e.team)&&f.default.getDistanceX2ByObject(e,r)<=Math.pow(t*p.default.CELL_SIZE,2)&&++a>=i)break}return a>=i},t.prototype.checkCanAddBlood=function(e){var t=!1;for(var i in this.entityList)this.entityList[i].team==e&&this.entityList[i].isCanAddBlood&&(t=!0);return t},t.prototype.getEntityBymasterhHandle=function(e){for(var t in this.entityList)if(this.entityList[t].infoModel&&this.entityList[t].infoModel.masterHandle&&this.entityList[t].infoModel.masterHandle==e&&this.entityList[t].infoModel.type!=a.EntityType.Monster)return this.entityList[t];return null},t.prototype.getEntitysBymasterhHandle=function(e,t){void 0===t&&(t=-1);var i=[];for(var n in this.entityList){if(i.length>=3)return i;this.entityList[n].infoModel&&this.entityList[n].infoModel.masterHandle&&this.entityList[n].infoModel.masterHandle==e&&(-1!=t&&t!=this.entityList[n].infoModel.type||i.push(this.entityList[n]))}return i},t.prototype.getEntityByTeam=function(e){void 0===e&&(e=o.Team.My);var t=[];for(var i in this.entityList)this.entityList[i].infoModel&&this.entityList[i].infoModel.team==e&&t.push(this.entityList[i]);return t},t.prototype.getEntityByMonsterId=function(e){var t=[];for(var i in this.entityList)this.entityList[i].infoModel&&this.entityList[i].infoModel.configID==e&&t.push(this.entityList[i]);return t},t.prototype.screeningTargetByMap=function(e,t,i,n){if(T.default.Assert(void 0,"SkillCastRangeConf no such areaId:"+n))return this.screeningTargetByPos(e,!1,i,Number.MAX_VALUE);var a=p.default.getTargetIndex(e,t,(void 0).width,(void 0).height);(void 0).range[a];return this.screeningTargetByPos(e,!1,i,Number.MAX_VALUE)},t.prototype.screeningTargetByPos=function(e,t,i,n,a){void 0===t&&(t=!1),void 0===i&&(i=0),void 0===n&&(n=Number.MAX_VALUE),void 0===a&&(a=this.entityList);var r,u=f.default.getDistanceX2ByObject,l=n;for(var c in n!=Number.MAX_VALUE&&(l=n*p.default.CELL_SIZE*(n*p.default.CELL_SIZE)),this.distances.length=0,a){var g=a[c];if((!t||g.team==e.team)&&((t||g.team!=e.team)&&(e.team!=o.Team.My||g.team!=o.Team.Faker)&&(e.team!=o.Team.Faker||g.team==o.Team.Monster||g.team==o.Team.Faker)&&(g instanceof s.default||g.team==o.Team.Monster||g.team==o.Team.WillBoss)&&g.AI_STATE!=o.AI_State.Die)){if(d.default.ins().isEncounter())if(o.Team.My==e.team){if(o.Team.WillEntity!=g.team||t){if(o.Team.My!=g.team||!t)continue}else if(!d.default.ins().checkIsEncounter(h.default.ins().encounterIndex,g.infoModel))continue}else if(o.Team.WillEntity==e.team)if(t&&o.Team.WillEntity==g.team);else if(t||h.default.ins().willEntityFightTeam!=g.team)continue;(r=u(e,g))>l||this.distances.push({priority:r,target:g})}}this.distances.sort(this.sortFunc);var y=[],v=0;v=i?Math.min(this.distances.length,i):this.distances.length;for(var m=0;m<v;m++)y[m]=this.distances[m].target;return y},t.prototype.sortFunc=function(e,t){return e.priority>t.priority?1:e.priority<t.priority?-1:0},t.CHAR_DEFAULT_HEIGHT=118,t.CHAR_DEFAULT_TYPEFACE=110,t}(n.default);i.default=A,cc._RF.pop()},{"../../core/base/AttributeType":"AttributeType","../../core/base/BaseClass":"BaseClass","../../core/base/ErrorLog":"ErrorLog","../../core/utils/Algorithm":"Algorithm","../../core/utils/DirUtil":"DirUtil","../../core/utils/DisplayUtils":"DisplayUtils","../../core/utils/MathUtils":"MathUtils","../ai/RoleAI":"RoleAI","../consts/JobConst":"JobConst","../entity/Actor":"Actor","../entity/CharMiner":"CharMiner","../entity/CharMonster":"CharMonster","../entity/CharNpc":"CharNpc","../entity/CharRole":"CharRole","../entity/CharTransfer":"CharTransfer","../entity/SubRoles":"SubRoles","../map/GameMap":"GameMap","../module/encounter/Encounter":"Encounter","../module/encounter/EncounterFight":"EncounterFight","../module/fb/UserFb":"UserFb","../module/gamescene/GameLogic":"GameLogic","../module/gamescene/GameSceneCtr":"GameSceneCtr","../module/mine/MineFight":"MineFight","./EntityHideBody":"EntityHideBody","./EntityShowMgr":"EntityShowMgr","./EntityType":"EntityType","./ObjectPool":"ObjectPool"}],EntityModel:[function(e,t,i){"use strict";cc._RF.push(t,"96b60KuL3lPGpY1s48J1uCn","EntityModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./NpcModel"),a=e("../manager/GlobalConfig"),o=e("../../core/base/AttributeData"),r=e("../base/EntityType"),s=e("./Actor"),u=e("./SubRoles"),l=e("../module/kf/KFServerSys"),c=e("../module/tips/UserTips"),d=e("../module/godweapon/GodWeaponCC"),f=function(e){function t(){var t=e.call(this)||this;return t.isElite=!1,t.attributeData=[],t.attributeExData=[],t.killNum=0,t.isMy=!1,t.weaponsId=0,t.isWander=!1,t.lyMarkLv=0,t.lyMarkSkills=[],t.type=r.EntityType.Monster,t}return __extends(t,e),t.prototype.parser=function(e){if(this.parserBase(e),this.type!=r.EntityType.CollectionMonst){this.parserAtt(e);for(var t=e.readShort(),i=0;i<t;i++)e.readInt();this.parserLyMark(e)}},t.prototype.parserLyMark=function(e){this.lyMarkLv=e.readShort(),this.lyMarkSkills=[];var t=e.readByte();this.lyMarkSkills.length=t;for(var i=0;i<t;i++)this.lyMarkSkills[i]=e.readShort()},t.prototype.parserBase=function(e){this.type=e.readShort(),this.handle=e.readDouble(),this.configID=e.readInt(),this.masterHandle=e.readDouble(),this.x=e.readInt(),this.y=e.readInt(),this.isMy=this.checkHandleIsMy(this.masterHandle)},t.prototype.checkHandleIsMy=function(e){if(e==s.default.handle)return!0;for(var t=0,i=u.default.ins().roles;t<i.length;t++){if(i[t].handle==e)return!0}return!1},t.prototype.parserAtt=function(e,t){void 0===t&&(t=!1);var i=e.readShort();if(t)for(var n=0;n<i;n++){var a=this.attributeData[n];this.attributeData[n]=e.readDouble();var r=this.attributeData[n]-a;if(a!=this.attributeData[n]&&-1==o.default.FILTER_BASE_DATA_ID.lastIndexOf(n)){if(r<=0)continue;if(n<2||n>6){var s=r>0?"35e62d":"f3311e",u=new o.default(n,r);if(!o.default.getAttrStrByType(u.type))continue;var l="|C:0x"+s+"&T:"+o.default.getAttStrByType(u,0)+"|";d.default.ins().gwshowTips||c.default.ins().showTips(l);continue}}}else for(n=0;n<i;n++)this.attributeData[n]=e.readDouble()},t.prototype.parserExtAtt=function(e,t){void 0===t&&(t=!1);var i=e.readShort();if(t)for(var n=0;n<i;n++){var a=this.attributeExData[n];if(this.attributeExData[n]=e.readInt(),a!=this.attributeExData[n]&&-1==o.default.FILTER_EXTDATA_ID.lastIndexOf(n)){var r=this.attributeExData[n]-a;if(r<=0)continue;var s=r>0?"35e62d":"f3311e",u=new o.default(n,r),l="|C:0x"+s+"&T:"+o.default.getExtAttStrByType(u,0)+"|";c.default.ins().showTips(l)}}else for(n=0;n<i;n++)this.attributeData[n]=e.readInt()},t.prototype.parserHeirloom=function(){},t.prototype.getAtt=function(e){return this.attributeData[e]||0},t.prototype.setAtt=function(e,t){this.attributeData[e]=t},t.prototype.getExAtt=function(e){return this.attributeExData[e]||0},Object.defineProperty(t.prototype,"avatarFileName",{get:function(){return"monster"+this.avatar},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"weaponFileName",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"avatar",{get:function(){return this._avatar||a.default.MonstersConfig[this.configID].avatar},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this._name||a.default.MonstersConfig[this.configID].name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),t.prototype.getNameWithServer=function(){return this._servId&&l.default.ins().isKF?this.name+"S"+this._servId:this.name},t.prototype.getDir=function(){if(!a.default.MonstersConfig[this.configID])return-1;var e=a.default.MonstersConfig[this.configID].dir;return isNaN(e)?-1:e},Object.defineProperty(t.prototype,"dirNum",{get:function(){var e=a.default.MonstersConfig[this.configID];return e&&(this._dirNum=NaN,e.dirNum)?e.dirNum:this._dirNum?this._dirNum:2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"avatarScale",{get:function(){var e=this._scale||a.default.MonstersConfig[this.configID].scale;return e?e/100:1},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"avatarEffect",{get:function(){return a.default.MonstersConfig[this.configID]&&a.default.MonstersConfig[this.configID].effect?a.default.EffectConfig[a.default.MonstersConfig[this.configID].effect].fileName:""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"attRange",{get:function(){return a.default.MonstersConfig[this.configID].attrange?a.default.MonstersConfig[this.configID].attrange:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"movePara",{get:function(){return a.default.YouDangConfig[this.wandertime]&&this.wanderrange?[this.wanderrange,a.default.YouDangConfig[this.wandertime].fileName]:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lv",{get:function(){return a.default.MonstersConfig[this.configID].level},set:function(e){this._lv=e},enumerable:!0,configurable:!0}),t.prototype.setPos=function(e,t){this.x=e,this.y=t},t}(n.default);i.default=f,cc._RF.pop()},{"../../core/base/AttributeData":"AttributeData","../base/EntityType":"EntityType","../manager/GlobalConfig":"GlobalConfig","../module/godweapon/GodWeaponCC":"GodWeaponCC","../module/kf/KFServerSys":"KFServerSys","../module/tips/UserTips":"UserTips","./Actor":"Actor","./NpcModel":"NpcModel","./SubRoles":"SubRoles"}],EntityShowMgr:[function(e,t,i){"use strict";cc._RF.push(t,"779ccljVtBKlpvfaitwWe4q","EntityShowMgr"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/base/BaseClass"),a=e("./EntityHideBody"),o=e("../map/GameMap"),r=e("../module/fb/UserFb"),s=e("./EntityManager"),u=e("../ai/RoleAI"),l=e("./EntityType"),c=e("../module/gamescene/GameLogic"),d=e("../../core/utils/MathUtils"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.MAX_SHOW_NUM=3,t.MAX_EFFECT_NUM=3,t.isOpen=!1,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.changeScene=function(){this.isOpen=!a.default.ins().isOpen,o.default.fbType==r.default.FB_TYPE_NEW_WORLD_BOSS?this.MAX_SHOW_NUM=5:this.MAX_SHOW_NUM=3},t.prototype.hideFurtherOtherRole=function(){if(!(this.countShowNum()<this.MAX_SHOW_NUM)){var e=s.default.ins().getNoDieRole();if(e){var t,i=0,n=StageUtils.ins().getHeight()>>1,a=n*n,o=s.default.ins().getAllEntity();for(var r in o){var c=o[r];if(c.parent&&c.infoModel&&c.team!=u.Team.My&&c.infoModel.type==l.EntityType.Role){var f=d.default.getDistanceX2ByObject(e,c);if(f>a){t=c.infoModel.handle;break}f>i&&(i=f,t=c.infoModel.handle)}}this.hideByHandle(t)}}},t.prototype.showNearSomeOne=function(){if(this.isOpen&&!(this.countShowNum()>=this.MAX_SHOW_NUM)){var e=s.default.ins().getNoDieRole();if(e){var t,i=Number.MAX_VALUE,n=StageUtils.ins().getWidth()>>1,a=n*n,o=s.default.ins().getAllEntity();for(var r in o){var c=o[r];if(!c.parent&&c.infoModel&&c.team!=u.Team.My&&c.infoModel.type==l.EntityType.Role){var f=d.default.getDistanceX2ByObject(e,c);if(f<a){t=c.infoModel.handle;break}f<i&&(i=f,t=c.infoModel.handle)}}this.showByHandle(t)}}},t.prototype.showHideSomeOne=function(e){this.isOpen&&(this.hideFurtherOtherRole(),this.showByHandle(e))},t.prototype.hideByHandle=function(e){if(!(c.default.ins().currAttackHandle==e||this.countShowNum()<this.MAX_SHOW_NUM))for(var t=0,i=s.default.ins().getEntityRelationHandle(e);t<i.length;t++){var n=i[t];DisplayUtils.removeFromParent(n),n.hideBodyContainer()}},t.prototype.showByHandle=function(e){if(this.isOpen&&!(this.countShowNum()>=this.MAX_SHOW_NUM))for(var t=0,i=s.default.ins().getEntityRelationHandle(e);t<i.length;t++){var n=i[t];c.default.ins().addEntity(n),n.showBodyContainer()}},t.prototype.checkShowSkillEffect=function(){return this.countShowNum()<this.MAX_EFFECT_NUM},t.prototype.checkShowHandle=function(e){if(!this.isOpen)return!0;var t=s.default.ins(),i=t.getRootMasterHandle(e);return!i||(!(this.countShowNum()>=this.MAX_SHOW_NUM)||!!(t.masterList[i]&&t.masterList[i].length&&t.masterList[i][0].parent))},t.prototype.countShowNum=function(){var e=0;if(a.default.ins().isOpen)return e;var t=s.default.ins().masterList;for(var i in t){var n=t[i];n&&n.length&&n[0].parent&&n[0].team!=u.Team.My&&n[0].infoModel&&n[0].infoModel.type==l.EntityType.Role&&(e+=1)}return e},t}(n.default);i.default=f,cc._RF.pop()},{"../../core/base/BaseClass":"BaseClass","../../core/utils/MathUtils":"MathUtils","../ai/RoleAI":"RoleAI","../map/GameMap":"GameMap","../module/fb/UserFb":"UserFb","../module/gamescene/GameLogic":"GameLogic","./EntityHideBody":"EntityHideBody","./EntityManager":"EntityManager","./EntityType":"EntityType"}],EntityType:[function(e,t,i){"use strict";cc._RF.push(t,"93b90pIhpZJZqril/XCnCWX","EntityType"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.Actor=0]="Actor",e[e.Role=1]="Role",e[e.Monster=2]="Monster",e[e.Snpc=3]="Snpc",e[e.LadderPlayer=4]="LadderPlayer",e[e.CollectionMonst=5]="CollectionMonst",e[e.DropItem=6]="DropItem",e[e.Npc=100]="Npc",e[e.Transfer=101]="Transfer",e[e.Mine=102]="Mine"}(i.EntityType||(i.EntityType={})),cc._RF.pop()},{}],EquipAddAttrType:[function(e,t,i){"use strict";cc._RF.push(t,"129eaw+IkxCJbEazlZ+zjRP","EquipAddAttrType"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.EquipSlotType_Weapon=0]="EquipSlotType_Weapon",e[e.EquipSlotType_Helmet=1]="EquipSlotType_Helmet",e[e.EquipSlotType_Coat=2]="EquipSlotType_Coat",e[e.EquipSlotType_Necklace=3]="EquipSlotType_Necklace",e[e.EquipSlotType_Accessory1=4]="EquipSlotType_Accessory1",e[e.EquipSlotType_Accessory2=5]="EquipSlotType_Accessory2",e[e.EquipSlotType_Ring1=6]="EquipSlotType_Ring1",e[e.EquipSlotType_Ring2=7]="EquipSlotType_Ring2",e[e.EquipSlotType_Dzi=8]="EquipSlotType_Dzi",e[e.EquipSlotType_Max=9]="EquipSlotType_Max"}(i.EquipAddAttrType||(i.EquipAddAttrType={})),cc._RF.pop()},{}],EquipConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3ca3e44I99KxYWLZXtcCE+M","EquipConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.stoneId=0,this.stoneNum=0,this.moneyNum=0,this.equipRate=0,this.moneyType=0,this.exPower=0}}();i.default=n,cc._RF.pop()},{}],EquipDetailedWin:[function(e,t,i){"use strict";cc._RF.push(t,"f6fbbCOyaJFDYrG8ox2Nv6d","EquipDetailedWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../../core/base/AttributeData"),r=e("../../../config/ItemConfig"),s=e("../../../../core/base/ViewManager"),u=e("../../../entity/Role"),l=e("../ItemData"),c=e("../UserBag"),d=e("../../../entity/SubRoles"),f=e("../../shop/Shop"),p=e("../../../manager/GlobalConfig"),h=e("../../zs/UserZs"),g=e("../../../entity/Actor"),y=e("../../forge/model/EquipPos"),v=e("../../forge/view/ForgeWin"),m=e("../../forge/UserForge"),b=e("../../extremeEquip/ExtremeEquipModel"),_=e("../../../base/NodeObjectPool"),C=e("../../../../core/utils/Util"),I=e("../../rolewin/view/RoleChooseEquipWin"),T=cc._decorator,S=T.ccclass,R=T.property,B=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.closeBtn=null,t.nameLabel=null,t.type=null,t.lv=null,t.levelKey=null,t.career=null,t.score=null,t.jobGroup=null,t._bottomY=0,t._equipPower=0,t._totalPower=0,t.changeBtn=null,t.curRole=0,t.index=0,t.powerLabel=null,t.nameNode=null,t.nameNodePool=null,t.attrNode=null,t.attrNodePool=null,t.attrDesNode=null,t.attrDesNodePool=null,t}var i;return __extends(t,e),i=t,t.prototype.initData=function(){},t.prototype.initUI=function(){this.nameNodePool=new _.NodeObjectPool(this.nameNode,this.nameNode.parent),this.attrNodePool=new _.NodeObjectPool(this.attrNode,this.attrNode.parent),this.attrDesNodePool=new _.NodeObjectPool(this.attrDesNode,this.attrDesNode.parent),this.nameNodePool.setToSize(7),this.attrNodePool.setToSize(8),this.attrDesNodePool.setToSize(2)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log(" open EquipDetailedWin "),console.log(e[0]);var i=e[0][0][0],n=e[0][0][1],a=e[0][0][2],o=e[0][0][3];this.roleModel=e[0][0][4],e[0][0][5]>=0?(this.curRole=e[0][0][5],this.index=e[0][0][6],this.changeBtn.node.active=!0):this.changeBtn.node.active=!1,this.addTouchEvent(this.closeBtn,this.otherClose),this.addTouchEvent(this.changeBtn,this.onEquipChange),this.setData(i,n,a,o)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];C.Util.isNullOrUndefined(this.nameNodePool)&&this.nameNodePool.release(),C.Util.isNullOrUndefined(this.attrNodePool)&&this.attrNodePool.release()},t.prototype.otherClose=function(e){s.default.ins().close(i)},t.prototype.onEquipChange=function(e){s.default.ins().open(I.default,this.curRole,this.index),s.default.ins().close(i)},t.prototype.getExtremeName=function(){if(!this.changeBtn.node.active)return"";var e=b.default.ins().getZhiZunLvByRoleID(this.roleModel,this.index);return e?p.default.ZhiZunEquipLevel[this.index][e].headTxt:""},t.prototype.setData=function(e,t,i,n){var a,s=n instanceof l.default?n:void 0;if(this._totalPower=0,void 0!=t&&void 0==s){if(!(s=c.default.ins().getBagGoodsByHandle(e,t)))for(var v=d.default.ins().subRolesLen,m=0;m<v;m++)for(var b=d.default.ins().getSubRoleByIndex(m),_=b.getEquipLen(),C=0;C<_;C++)if(b.getEquipByIndex(C).item.handle==t){s=b.getEquipByIndex(C).item;break}if(!s){var I=f.default.ins().shopData,T=(v=I.getShopEquipDataLength(),null);for(m=0;m<v;m++)if(null!=(T=I.getShopEquipDataByIndex(m))&&t==T.item.handle){s=T.item;break}}s||new Error("\u8bf7\u68c0\u67e5handle\u662f\u5426\u4f20\u9519\uff01"),a=s.itemConfig,i=s.configID}else a=p.default.ItemConfig[i];this.nameLabel.string=this.getExtremeName()+a.name,this.nameLabel.node.color=r.default.getColoFromHEXByConfig(a);r.default.getQuality(a);var S=r.default.getSubType(a),R=r.default.getJob(a),B=0;if(s instanceof l.default||null!=a)if(s&&4==r.default.getType(s.itemConfig)){this.levelKey.string="\u9700\u6c42\uff1a",this.type.string=u.default.getWingEquipNameByType(S),this.lv.string=a.level+1+"\u9636\u7fbd\u7ffc\u53ef\u7a7f\u6234",this.lv.node.color=cc.Color.BLACK.fromHEX("#f3311e");for(v=d.default.ins().subRolesLen,m=0;m<v;m++)if(d.default.ins().getSubRoleByIndex(m).wingsData.lv>=a.level){this.lv.node.color=cc.Color.BLACK.fromHEX("#35e62d");break}this.career.string=u.default.getJobNameByJob(R),this.jobGroup.active=!0}else s&&5==r.default.getType(s.itemConfig)?(this.levelKey.string=a.zsLevel>0?"\u8f6c\u751f\uff1a":"\u7b49\u7ea7\uff1a",this.type.string=u.default.getHejiEquipNameByType(S),this.lv.string=isNaN(a.zsLevel)?(a.level||1)+"\u7ea7":a.zsLevel+"\u8f6c",a.zsLevel>0?this.lv.node.color=h.default.ins().lv<a.zsLevel?cc.Color.BLACK.fromHEX("#f3311e"):cc.Color.BLACK.fromHEX("#35e62d"):this.lv.node.color=g.default.level<a.level?cc.Color.BLACK.fromHEX("#f3311e"):cc.Color.BLACK.fromHEX("#35e62d"),this.jobGroup.active=!1,-1!=c.default.fitleEquip.indexOf(a.id)&&(this.lv.string="\u65e0\u7ea7\u522b")):(S==y.EquipPos.DZI?(this.levelKey.string="\u7b49\u9636\uff1a",this.type.string=u.default.getEquipNameByType(S),this.lv.string=c.default.ins().getGuanyinLevel(a)):(this.levelKey.string=a.zsLevel>0?"\u8f6c\u751f\uff1a":"\u7b49\u7ea7\uff1a",this.type.string=u.default.getEquipNameByType(S),this.lv.string=isNaN(a.zsLevel)?(a.level||1)+"\u7ea7":a.zsLevel+"\u8f6c",-1!=c.default.fitleEquip.indexOf(a.id)&&(this.lv.string="\u65e0\u7ea7\u522b")),a.zsLevel>0?this.lv.node.color=h.default.ins().lv<a.zsLevel?cc.Color.BLACK.fromHEX("#f3311e"):cc.Color.BLACK.fromHEX("#35e62d"):this.lv.node.color=g.default.level<a.level?cc.Color.BLACK.fromHEX("#f3311e"):cc.Color.BLACK.fromHEX("#35e62d"),this.career.string=u.default.getJobNameByJob(R),this.jobGroup.active=!0);var M=this.nameNodePool.shiftNode();M.active=!0,M.getComponent(cc.Label).string="\u57fa\u7840\u5c5e\u6027:";var E,D=p.default.EquipConfig[i],A=[],P=["","","hp","","atk","def","res"];for(var w in this.roleModel&&(E=this.roleModel.heirloom.getInfoBySolt(this.index)),u.default.translate)if(!isNaN(D[w])&&D[w]){var L="";L+=o.default.getAttrStrByType(u.default.getAttrTypeByName(w))+"  ",L+=D[w];var k=new o.default;if(void 0!=s){if(s.att){for(var F=s.att,G=0;G<F.length;G++)if(F[G].type==u.default.getAttrTypeByName(w)){L+=" +"+F[G].value,E&&E.attr_add&&(L+="+"+Math.floor((D[w]+F[G].value)*(E.attr_add/100))),k.type=F[G].type,k.value=D[w]+F[G].value,A.push(k);break}}else for(var x in D)if(P[x]){var N=D[P[x]];if(void 0!=N&&0!=N){var U=u.default.getAttrTypeByName(P[x]);L+=o.default.getAttrStrByType(U)+"  ",L+=D[x],k.type=U,k.value=D[x],A.push(k)}}}else k.type=u.default.getAttrTypeByName(w),k.value=D[w],A.push(k);var O=this.attrNodePool.shiftNode();O.active=!0,O.getComponent(cc.Label).string=L,0}if(s?this._equipPower=s.point:(this._equipPower=Math.floor(c.default.getAttrPower(A)),D&&D.exPower&&(B=D.exPower)),this._totalPower+=this._equipPower+B,this._score=this._totalPower,this.score.string="\u8bc4\u5206\uff1a"+this._totalPower,this.roleModel){for(v=this.roleModel.getEquipLen(),m=0;m<v;m++){var H=this.roleModel.getEquipByIndex(m);if(H.item.handle==t){this.setForge(H,m);break}}D&&(D.baseAttr1&&(this._equipPower+=r.default.relatePower(D.baseAttr1,this.roleModel)),D.baseAttr2&&(this._equipPower+=r.default.relatePower(D.baseAttr2,this.roleModel)))}S==y.EquipPos.DZI&&this.addTips(null,4,0),this.powerLabel.string=this._totalPower+""},t.prototype.setForge=function(e,t){for(var i=0,n=0;n<4;n++){switch(n){case v.default.Page_Select_Boost:i=e.strengthen;break;case v.default.Page_Select_ZhuLing:i=e.zhuling;break;case v.default.Page_Select_Gem:i=e.gem;break;case v.default.Page_Select_Weapon:i=e.tupo}if(i>0){var a=m.default.ins().getForgeConfigByPos(t,i,n);this.addTips(a.attr,n,i);var o=0;o=3==n?Math.floor(this._equipPower*(Number(a.attr)/100)):Math.floor(c.default.getAttrPower(a.attr)),this._totalPower+=o}}if(t>=y.EquipPos.WEAPON&&t<=y.EquipPos.SHOE&&(i=b.default.ins().getZhiZunLvByRoleID(this.roleModel,t))){(a=p.default.ZhiZunEquipLevel[t][i]).ex_attrs&&(this._totalPower+=Math.floor(c.default.getAttrPower(a.ex_attrs))),this._totalPower+=a.ex_power;var r="",s=b.default.ins().getZhiZunLinkLv(this.curRole+1,t,i),u=s>0,l=void 0,d=!1;for(var f in p.default.ZhiZunLinkLevel[t]){for(var h in p.default.ZhiZunLinkLevel[t][f])if(1==(l=p.default.ZhiZunLinkLevel[t][f][h]).level&&(r=l.chainDesc),l.level==s&&u){d=!0,l.attrs&&(this._totalPower+=Math.floor(c.default.getAttrPower(l.attrs))),l.exAttrs&&(this._totalPower+=Math.floor(c.default.getAttrPower(l.exAttrs))),this._totalPower+=l.ex_power,r=l.chainDesc;break}if(d)break}this._totalPower+=Math.floor(c.default.getAttrPower(a.attrs)),this.addTips(a.attrs,5,i,s,a.skillId,r)}},t.prototype.addTips=function(e,t,i,n,a,r){var s;void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=0),void 0===r&&(r="");var u=this.nameNodePool.shiftNode();u.active=!0;var l,c=this.attrNodePool.shiftNode();switch(c.active=!0,t){case v.default.Page_Select_Boost:u.getComponent(cc.Label).string="\u5f3a\u5316\u5c5e\u6027",c.color=cc.Color.BLACK.fromHEX("#5186fd"),s=o.default.getAttrStrAdd(e,11);break;case v.default.Page_Select_Gem:u.getComponent(cc.Label).string="\u7cbe\u70bc\u5c5e\u6027",c.color=cc.Color.BLACK.fromHEX("#d242fb"),s=o.default.getAttrStrAdd(e,12);break;case v.default.Page_Select_ZhuLing:u.getComponent(cc.Label).string="\u94f8\u9020\u5c5e\u6027",c.color=cc.Color.BLACK.fromHEX("#e5b613"),s=o.default.getAttrStrAdd(e,15);break;case v.default.Page_Select_Weapon:u.getComponent(cc.Label).string="\u7a81\u7834\u5c5e\u6027";break;case 4:u.getComponent(cc.Label).string="\u7279\u6b8a\u5c5e\u6027";break;case 5:u.getComponent(cc.Label).string="\u81f3\u5c0a\u5c5e\u6027",u.color=cc.Color.BLACK.fromHEX("#FCF537"),s=e,c.color=cc.Color.BLACK.fromHEX("#FCF537")}t!=v.default.Page_Select_ZhuLing&&5!=t&&this.roleModel&&(l=this.roleModel.heirloom.getInfoBySolt(this.index));if(s&&t!=v.default.Page_Select_Weapon){o.default.getAttStr(s,1,1,"  ",!1,!0,l);if(5==t&&a){var d=p.default.SkillsConfig[a];p.default.SkillsDescConfig[d.desc]}}},t.prototype.getScore=function(){return this._score},t.prototype.getPower=function(){return 0},t.prototype.getType=function(){return this.type.string},__decorate([R({type:cc.Button,displayName:"closeBtn"})],t.prototype,"closeBtn",void 0),__decorate([R({type:cc.Label,displayName:"nameLabel"})],t.prototype,"nameLabel",void 0),__decorate([R({type:cc.Label,displayName:"type"})],t.prototype,"type",void 0),__decorate([R({type:cc.Label,displayName:"lv"})],t.prototype,"lv",void 0),__decorate([R({type:cc.Label,displayName:"levelKey"})],t.prototype,"levelKey",void 0),__decorate([R({type:cc.Label,displayName:"career"})],t.prototype,"career",void 0),__decorate([R({type:cc.Label,displayName:"score"})],t.prototype,"score",void 0),__decorate([R({type:cc.Node,displayName:"jobGroup"})],t.prototype,"jobGroup",void 0),__decorate([R({type:cc.Button,displayName:"changeBtn"})],t.prototype,"changeBtn",void 0),__decorate([R({type:cc.Label,displayName:"powerLabel"})],t.prototype,"powerLabel",void 0),__decorate([R({type:cc.Node,displayName:"nameNode"})],t.prototype,"nameNode",void 0),__decorate([R({type:cc.Node,displayName:"attrNode"})],t.prototype,"attrNode",void 0),__decorate([R({type:cc.Node,displayName:"attrDesNode"})],t.prototype,"attrDesNode",void 0),t=i=__decorate([S],t)}(n.default);i.default=B,cc._RF.pop()},{"../../../../core/base/AttributeData":"AttributeData","../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/Util":"Util","../../../../core/view/BaseEuiView":"BaseEuiView","../../../base/NodeObjectPool":"NodeObjectPool","../../../config/ItemConfig":"ItemConfig","../../../entity/Actor":"Actor","../../../entity/Role":"Role","../../../entity/SubRoles":"SubRoles","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../extremeEquip/ExtremeEquipModel":"ExtremeEquipModel","../../forge/UserForge":"UserForge","../../forge/model/EquipPos":"EquipPos","../../forge/view/ForgeWin":"ForgeWin","../../rolewin/view/RoleChooseEquipWin":"RoleChooseEquipWin","../../shop/Shop":"Shop","../../zs/UserZs":"UserZs","../ItemData":"ItemData","../UserBag":"UserBag"}],EquipItemConfig:[function(e,t,i){"use strict";cc._RF.push(t,"02453haFHJC9JntMDrBUBwI","EquipItemConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],EquipItemIcon:[function(e,t,i){"use strict";cc._RF.push(t,"1ee8318IXVGPaaz7NM/4Q8i","EquipItemIcon"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/utils/Util"),a=e("../config/ItemConfig"),o=cc._decorator,r=o.ccclass,s=o.property,u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.check=null,t.nameLabel=null,t.numberLabel=null,t.lvLabel=null,t.attLabel=null,t.itemInfo=null,t.RXNameString=["\u70ed\u8840\u795e\u5251","\u70ed\u8840\u795e\u7532"],t}return __extends(t,e),Object.defineProperty(t.prototype,"itemIconInfo",{get:function(){return this.itemInfo},enumerable:!0,configurable:!0}),t.prototype.updateDataView=function(e,t,i,o){if(this.itemInfo=e,n.Util.isNullOrUndefined(e))this.nameLabel.string=1==i?n.Util.getEquipPartName(t):this.RXNameString[t],this.nameLabel.node.color=n.Util.getColoFromHEXByQua(0),this.bg.active=!0,this.bg.color=n.Util.getColoFromHEXByQua(0),this.check.active=!1;else{var r=e.itemConfig;this.nameLabel.string=r.name,this.nameLabel.node.color=a.default.getColoFromHEXByConfig(r),this.bg.color=a.default.getColoFromHEXByConfig(r),this.check.active=1==o}this.reSetValue()},t.prototype.reSetValue=function(){n.Util.isNullOrUndefined(this.numberLabel)||(this.numberLabel.string=""),n.Util.isNullOrUndefined(this.lvLabel)&&(this.lvLabel.string=""),n.Util.isNullOrUndefined(this.attLabel)&&(this.attLabel.string="")},__decorate([s({type:cc.Node,displayName:"bg"})],t.prototype,"bg",void 0),__decorate([s({type:cc.Node,displayName:"check"})],t.prototype,"check",void 0),__decorate([s({type:cc.Label,displayName:"nameLabel"})],t.prototype,"nameLabel",void 0),__decorate([s({type:cc.Label,displayName:"numberLabel"})],t.prototype,"numberLabel",void 0),__decorate([s({type:cc.Label,displayName:"lvLabel"})],t.prototype,"lvLabel",void 0),__decorate([s({type:cc.Label,displayName:"attLabel"})],t.prototype,"attLabel",void 0),t=__decorate([r],t)}(cc.Component);i.EquipItemIcon=u,cc._RF.pop()},{"../../core/utils/Util":"Util","../config/ItemConfig":"ItemConfig"}],EquipPointBasicConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f69e4T8FAdLlJca2ukWrSaY","EquipPointBasicConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],EquipPointConstConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2f7ceEe0XZO4YUaVijXEjaT","EquipPointConstConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],EquipPointGrowUpConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f2af4DulZFM1IK2fF4RkjS1","EquipPointGrowUpConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],EquipPointRankConfig:[function(e,t,i){"use strict";cc._RF.push(t,"8a3c2lesK5JhILTuSJke+Cq","EquipPointRankConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],EquipPointResolveConfig:[function(e,t,i){"use strict";cc._RF.push(t,"489b630ZHJOtroz+vlaUOan","EquipPointResolveConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],EquipPos:[function(e,t,i){"use strict";cc._RF.push(t,"2bf5fZftrZCw7x5vrnEb67h","EquipPos"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.WEAPON=0]="WEAPON",e[e.HEAD=1]="HEAD",e[e.CLOTHES=2]="CLOTHES",e[e.NECKLACE=3]="NECKLACE",e[e.Wrist=4]="Wrist",e[e.BRACELET=5]="BRACELET",e[e.RING=6]="RING",e[e.SHOE=7]="SHOE",e[e.DZI=8]="DZI",e[e.HAT=9]="HAT",e[e.VIZARD=10]="VIZARD",e[e.CLOAK=11]="CLOAK",e[e.SHIELD=12]="SHIELD",e[e.MAX=13]="MAX"}(i.EquipPos||(i.EquipPos={})),cc._RF.pop()},{}],EquipWithEffConfig:[function(e,t,i){"use strict";cc._RF.push(t,"111f1P7m7dE5oYmE8WUPm2q","EquipWithEffConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],EquipsData:[function(e,t,i){"use strict";cc._RF.push(t,"1ac465icG9GlIbgh25YULNA","EquipsData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../bag/ItemData"),a=function(){function e(){}return e.prototype.parser=function(e){this.strengthen=e.readInt(),this.spiritLv=e.readInt(),this.gem=e.readInt(),this.item=new n.default,this.item.parser(e),this.zhuling=e.readInt(),this.soulLv=e.readInt(),this.bless=e.readInt(),this.spiritExp=e.readInt()},e}();i.default=a,cc._RF.pop()},{"../../bag/ItemData":"ItemData"}],ErrorLog:[function(e,t,i){"use strict";cc._RF.push(t,"044f0LMUeJENZRv18gWUekk","ErrorLog"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.Assert=function(e,t){return!e&&(console.log(t),!0)},e}();i.default=n,cc._RF.pop()},{}],EventData:[function(e,t,i){"use strict";cc._RF.push(t,"0c03aGbtxFNDoS3IrlqOi4l","EventData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(e,t){void 0===t&&(t=null),this.mStoped=!1,this.mType=e,this.mData=t}return Object.defineProperty(e.prototype,"type",{get:function(){return this.mType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"data",{get:function(){return this.mData},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"currentTarget",{get:function(){return this.mCurrentTarget},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"stoped",{get:function(){return this.mStoped},enumerable:!0,configurable:!0}),e.prototype.stopImmediatePropagation=function(){this.mStoped=!0},e.prototype.setCurrentTarget=function(e){this.mCurrentTarget=e},e}();i.EventData=n,cc._RF.pop()},{}],EventDelegate:[function(e,t,i){"use strict";cc._RF.push(t,"ea0dbTetAFFgLle4VI/n38p","EventDelegate"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../ArrayUtil"),a=function(){function e(e){this.type="",this.eventCallList=[],this.type=e}return e.prototype.handle=function(e){if(this.type==e.type&&0!=this.eventCallList.length){for(var t=[],i=0,a=n.ArrayUtil.copy(this.eventCallList);i<a.length;i++){var o=a[i];if(e.stoped)break;n.ArrayUtil.containsValue(this.eventCallList,o)&&(o.func.call(o.thisObj,e),o.once&&t.push(o))}this.eventCallList.length>0&&t.length>0&&n.ArrayUtil.removeValues(this.eventCallList,t)}},e.prototype.addListener=function(e,t){this.eventCallList.push(this.createCall(!1,e,t))},e.prototype.onceListener=function(e,t){this.eventCallList.push(this.createCall(!0,e,t))},e.prototype.removeListener=function(e,t){for(var i=this.eventCallList.length-1;i>=0;i--)this.isEqual(this.eventCallList[i],e,t)&&this.eventCallList.splice(i,1)},e.prototype.removeListeners=function(){this.eventCallList.length=0},e.prototype.isEqual=function(e,t,i){return!(this.isNullOrUndefined(e)||this.isNullOrUndefined(e.func)||this.isNullOrUndefined(t)||e.func!=t)&&(this.isNullOrUndefined(e.thisObj)&&this.isNullOrUndefined(i)?e.func==t:e.func==t&&e.thisObj==i)},e.prototype.isNullOrUndefined=function(e){return this.isUndefined(e)||null==e},e.prototype.isUndefined=function(e){return void 0===e},e.prototype.createCall=function(e,t,i){return{once:e,func:t,thisObj:i}},e}();i.EventDelegate=a,cc._RF.pop()},{"../ArrayUtil":"ArrayUtil"}],EventDispatcher:[function(e,t,i){"use strict";cc._RF.push(t,"5e158Ax1oJP2JAkKnwlIUtA","EventDispatcher"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./EventData"),a=e("./EventDelegate"),o=function(){function e(){this.map={}}return e.prototype.addEventListener=function(e,t,i){this.tryInitType(e),this.getDelegate(e).addListener(t,i)},e.prototype.onceEventListener=function(e,t,i){this.tryInitType(e),this.getDelegate(e).onceListener(t,i)},e.prototype.removeEventListener=function(e,t,i){this.hasType(e)&&this.getDelegate(e).removeListener(t,i)},e.prototype.removeEventListenerByType=function(e){this.hasType(e)&&this.getDelegate(e).removeListeners()},e.prototype.removeEventListeners=function(){this.map={}},e.prototype.dispatchEvent=function(e,t){if(void 0===t&&(t=null),this.hasType(e)){var i=new n.EventData(e,t);i.setCurrentTarget(this),this.getDelegate(i.type).handle(i)}},e.prototype.hasType=function(e){return this.map.hasOwnProperty(e)},e.prototype.tryInitType=function(e){this.hasType(e)||(this.map[e]=new a.EventDelegate(e))},e.prototype.getDelegate=function(e){return this.hasType(e)?this.map[e]:null},e.prototype.clearType=function(e){var t=this.getDelegate(e);void 0!==t&&null!=t&&t.removeListeners()},e}();i.EventDispatcher=o,cc._RF.pop()},{"./EventData":"EventData","./EventDelegate":"EventDelegate"}],ExAttributeType:[function(e,t,i){"use strict";cc._RF.push(t,"40591rvrR5PJ5NglAPxUDom","ExAttributeType"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.eatReflectProbability=0]="eatReflectProbability",e[e.eatReflectRate=1]="eatReflectRate",e[e.eatIgnoreReflect=2]="eatIgnoreReflect",e[e.eatGodBlessProbability=3]="eatGodBlessProbability",e[e.eatGodBlessRate=4]="eatGodBlessRate",e[e.eatDeathCurseProbability=5]="eatDeathCurseProbability",e[e.eatDeathCurseDamageIncrease=6]="eatDeathCurseDamageIncrease",e[e.eatDeathCurseTime=7]="eatDeathCurseTime",e[e.eatAllCrit=8]="eatAllCrit",e[e.eatAllCritTime=9]="eatAllCritTime",e[e.eatBeHitTimesDodge=10]="eatBeHitTimesDodge",e[e.eatAttackTimesCrit=11]="eatAttackTimesCrit",e[e.eatAttackAddHpProbability=12]="eatAttackAddHpProbability",e[e.eatAttackAddHpValue=13]="eatAttackAddHpValue",e[e.eatAddToWarriorDamageInc=14]="eatAddToWarriorDamageInc",e[e.eatAddToMageDamageInc=15]="eatAddToMageDamageInc",e[e.eatAddToTaoistDamageInc=16]="eatAddToTaoistDamageInc",e[e.eatSubWarriorDamageInc=17]="eatSubWarriorDamageInc",e[e.eatSubMageDamageInc=18]="eatSubMageDamageInc",e[e.eatSubTaoistDamageInc=19]="eatSubTaoistDamageInc",e[e.eatTogetherHitFree=20]="eatTogetherHitFree",e[e.eatTogetherHitMonDamageInc=21]="eatTogetherHitMonDamageInc",e[e.eatTogetherHitRoleDamageInc=22]="eatTogetherHitRoleDamageInc",e[e.eatTogetherHitCdSub=23]="eatTogetherHitCdSub",e[e.eatAdditionalHarm=24]="eatAdditionalHarm",e[e.eatReductionHarm=25]="eatReductionHarm",e[e.eatMiss=26]="eatMiss",e[e.eatBaseSkillExArg=27]="eatBaseSkillExArg",e[e.eatMultipleCrit=28]="eatMultipleCrit",e[e.eatMultipleCritCoeff=29]="eatMultipleCritCoeff",e[e.atMultipleCritHurt=30]="atMultipleCritHurt",e[e.eatAddWarriorDamageInc=31]="eatAddWarriorDamageInc",e[e.eatAddMageDamageInc=32]="eatAddMageDamageInc",e[e.eatAddTaoistDamageInc=33]="eatAddTaoistDamageInc",e[e.eatMultipleCritTime=34]="eatMultipleCritTime",e[e.eatAttackAddHpTime=35]="eatAttackAddHpTime",e[e.eatStunTime=36]="eatStunTime",e[e.eatGodPowerCd=37]="eatGodPowerCd",e[e.eatGodPowerProbability=38]="eatGodPowerProbability",e[e.eatGodPowerDamageIncrease=39]="eatGodPowerDamageIncrease",e[e.eatHpLtAddBuffId=40]="eatHpLtAddBuffId",e[e.eatHpLtAddBuffCd=41]="eatHpLtAddBuffCd",e[e.eatHit=42]="eatHit",e[e.eatSkillVamirePro=43]="eatSkillVamirePro",e[e.eatWarriorPeakDamageInc=44]="eatWarriorPeakDamageInc",e[e.eatMagePeakDamageInc=45]="eatMagePeakDamageInc",e[e.eatTaoistPeakDamageInc=46]="eatTaoistPeakDamageInc",e[e.eatPetSkillLevel=47]="eatPetSkillLevel",e[e.eatPetAttackInc=48]="eatPetAttackInc",e[e.eatSkillAddArgA=49]="eatSkillAddArgA",e[e.eatSkillAddArgB=50]="eatSkillAddArgB",e[e.eatResistDeathCd=51]="eatResistDeathCd",e[e.eatResistDeathPro=52]="eatResistDeathPro",e[e.eatResistDeathRate=53]="eatResistDeathRate",e[e.eatCritHpLt=54]="eatCritHpLt",e[e.eatCritHpLtAddDamage=55]="eatCritHpLtAddDamage",e[e.eatMiJiKNHpPer=56]="eatMiJiKNHpPer",e[e.eatMiJiKNHpSubPer=57]="eatMiJiKNHpSubPer",e[e.eatMiJiKNDamPer=58]="eatMiJiKNDamPer",e[e.eatMiJiZHDamPer=59]="eatMiJiZHDamPer",e[e.eatMiJiZHTime=60]="eatMiJiZHTime",e[e.eatMiJiBQHpTime=61]="eatMiJiBQHpTime",e[e.eatMiJiBQHpPer=62]="eatMiJiBQHpPer",e[e.eatMiJiBQBuffId=63]="eatMiJiBQBuffId",e[e.eatCount=64]="eatCount"}(i.ExAttributeType||(i.ExAttributeType={})),cc._RF.pop()},{}],ExRing0Config:[function(e,t,i){"use strict";cc._RF.push(t,"e7fcfY05ONIVYGjDurKcOhk","ExRing0Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.power=0}}();i.default=n,cc._RF.pop()},{}],ExRing1Config:[function(e,t,i){"use strict";cc._RF.push(t,"dfb87SVxnlP5rsQtz8zlpvR","ExRing1Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.power=0}}();i.default=n,cc._RF.pop()},{}],ExRingAttrConfig:[function(e,t,i){"use strict";cc._RF.push(t,"47884J3A1hDY52PhjLk81Ox","ExRingAttrConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.level=0,this.costItem=0,this.cost=0,this.attrAward=[],this.extAttrAward=[],this.upPower=0,this.addPower=0,this.judgeup=0,this.SpecialRingSkin=""}}();i.default=n,cc._RF.pop()},{}],ExRingConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ffc46KwHuZIOJj6alyl36oh","ExRingConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ExRingExtendAttrConfig:[function(e,t,i){"use strict";cc._RF.push(t,"770e8QTnaRJWZPxeqWqVN/Z","ExRingExtendAttrConfig"),Object.defineProperty(i,"__esModule",{value:!0});(function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.summonerSkillId=0,t.summonerAiId=0,t}__extends(t,e)})(e("./ExRingAttrConfig").default);cc._RF.pop()},{"./ExRingAttrConfig":"ExRingAttrConfig"}],ExSkillAiLogic:[function(e,t,i){"use strict";cc._RF.push(t,"8744dZEcftPzJVCca9rrD8f","ExSkillAiLogic"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/base/BaseClass"),a=e("../module/zhanling/model/ZhanLingModel"),o=e("../../core/base/AttributeType"),r=e("../manager/GlobalConfig"),s=e("./RoleAI"),u=e("../entity/CharRole"),l=e("../entity/SubRoles"),c=e("../base/EntityManager"),d=e("../module/skill/data/SkillData"),f=e("../entity/EntityBuff"),p=e("../consts/JobConst"),h=e("../Utils/EgretUtils"),g=e("../module/gamescene/GameLogic"),y=e("../module/rolewin/UserSkill"),v=function(e){function t(){var t=e.call(this)||this;return t.ZL_SKILL_DEVIL=0,t.ZL_SKILL_EXPLOSION=1,t.ZL_SKILL_KILL=2,t.ZL_SKILL_SACRIFICE=3,t.ZL_SKILL_RELIEF=4,t.ZL_SKILL_ANGER=5,t.ZL_H_SKILL_DETER=6,t.ZL_H_SKILL_ANTICIPATI=7,t.ZL_SKILL_REMEDY=8,t.ZL_SKILL_RENJIA=9,t.MAX=10,t.triggerInterval={},t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.checkWarSpiritBubbleTrigger=function(){if(a.default.ins().ZhanLingOpen())for(var e in r.default.ZhanLingBase){var t=r.default.ZhanLingBase[e],i=a.default.ins().getZhanLingDataById(t.id);if(i)switch(t.talent){case this.ZL_SKILL_DEVIL:if(!r.default.ZhanLingLevel[t.id][i.level])break;var n=r.default.ZhanLingLevel[t.id][i.level].talentLevel,o=r.default.ZhanLingTalent[t.talent][n];if(o&&g.default.triggerValue(o.rate)){y.default.ins().postShowSkillWord(o.showWords);for(var s=0;s<l.default.ins().subRolesLen;s++){if(d=c.default.ins().getMainRole(s)){var u=f.default.createBuff(o.effId,d);d.addBuff(u)}}}break;case this.ZL_SKILL_REMEDY:if(n=a.default.ins().getZhanLingDataByTalentLv(t.id),o=r.default.ZhanLingTalent[t.talent][n],g.default.triggerValue(o.rate))for(s=0;s<l.default.ins().subRolesLen;s++){var d;if(d=c.default.ins().getMainRole(s)){u=f.default.createBuff(o.effId,d);d.addBuff(u)}}}}},t.prototype.checkHJTrigger=function(e,t){if(a.default.ins().ZhanLingOpen()){if(!e||!t[0])return;e.getHP(),e.infoModel.getAtt(o.AttributeType.atMaxHp);var i=e.infoModel.team==s.Team.My&&e instanceof u.default;for(var n in r.default.ZhanLingBase){var f=r.default.ZhanLingBase[n];if(a.default.ins().getZhanLingDataById(f.id))switch(f.talent){case this.ZL_H_SKILL_DETER:if(i){var p=a.default.ins().getZhanLingDataByTalentLv(f.id),h=r.default.ZhanLingTalent[f.talent][p];if(!h)break;for(var y=0;y<l.default.ins().subRolesLen;y++){var v=c.default.ins().getMainRole(y);if(v)for(var m=function(t){if(!t.type||t.type==v.infoModel.job){var i=new d.default(t.id);b.intervalDoFun(e.infoModel.handle+t.id+f.talent,i.cd,function(){s.default.ins().tryUseWarSpiritSkill(e,t.id,!0)})}},b=this,_=0,C=h.passive;_<C.length;_++){m(C[_])}}}break;case this.ZL_H_SKILL_ANTICIPATI:var I=r.default.ZhanLingTalent[f.talent][1];g.default.triggerValue(I.rate)}}}},t.prototype.checkDieTrigger=function(e,t){if(a.default.ins().ZhanLingOpen()){if(!e||!t[0])return;e.getHP(),e.infoModel.getAtt(o.AttributeType.atMaxHp);var i=e.infoModel.team==s.Team.My&&e instanceof u.default;for(var n in r.default.ZhanLingBase){var h=r.default.ZhanLingBase[n];if(a.default.ins().getZhanLingDataById(h.id)){var g=a.default.ins().getZhanLingDataByTalentLv(h.id),y=r.default.ZhanLingTalent[h.talent][g];if(y)switch(h.talent){case this.ZL_SKILL_KILL:if(i)for(var v=0;v<l.default.ins().subRolesLen;v++){if((S=c.default.ins().getMainRole(v))&&S.infoModel.handle!=e.infoModel.handle)for(var m=function(t){if(!t.type||t.type==S.infoModel.job){var i=new d.default(t.id);b.intervalDoFun(e.infoModel.handle+t.id+h.id,i.cd,function(){s.default.ins().tryUseWarSpiritSkill(e,t.id,!0)})}},b=this,_=0,C=y.passive;_<C.length;_++){m(N=C[_])}}break;case this.ZL_SKILL_EXPLOSION:if(!i&&t[0]&&t[0].infoModel.team==s.Team.My)for(var I=0,T=y.passive;I<T.length;I++){if(!(N=T[I]).type||t[0].infoModel.job==N.type)for(new d.default(N.id),v=0;v<l.default.ins().subRolesLen;v++){var S;if(!(S=c.default.ins().getMainRole(v))||S.infoModel.handle==t[0].infoModel.handle)break;var R=new d.default(N.id);if(R.tarEff&&R.tarEff.length>0)for(var B=0,M=R.tarEff;B<M.length;B++){var E=M[B],D=f.default.createBuff(E,S);S.addBuff(D)}}}break;case this.ZL_SKILL_SACRIFICE:if(!i&&t[0]&&t[0].infoModel.team==s.Team.My&&t[0].infoModel.job==p.JobConst.ZhanShi)for(var A=function(t){if(!t.type||t.type==e.infoModel.job){var i=new d.default(t.id);P.intervalDoFun(e.infoModel.handle+t.id+h.id,i.cd,function(){s.default.ins().tryUseWarSpiritSkill(e,t.id,!0)})}},P=this,w=0,L=y.passive;w<L.length;w++){A(N=L[w])}break;case this.ZL_SKILL_ANGER:if(!i&&t[0]&&t[0].infoModel.team==s.Team.My&&t[0].infoModel.job==p.JobConst.FaShi)for(var k=function(t){if(!t.type||t.type==e.infoModel.job){var i=new d.default(t.id);F.intervalDoFun(e.infoModel.handle+t.id+h.id,i.cd,function(){s.default.ins().tryUseWarSpiritSkill(e,t.id,!0)})}},F=this,G=0,x=y.passive;G<x.length;G++){var N;k(N=x[G])}}}}}},t.prototype.checkHPTrigger=function(e,t){if(a.default.ins().ZhanLingOpen()){if(!e||!t)return;var i=e.getHP(),n=e.infoModel.getAtt(o.AttributeType.atMaxHp),l=e.infoModel.team==s.Team.My&&e instanceof u.default,c=function(t){var o=r.default.ZhanLingBase[t];if(!a.default.ins().getZhanLingDataById(o.id))return"continue";switch(o.talent){case f.ZL_SKILL_RELIEF:break;case f.ZL_SKILL_RENJIA:if(l){var u=a.default.ins().getZhanLingDataBySkill(0),c=a.default.ins().getZhanLingDataById(0),p=0;for(var h in u)c.level>=u[h].open&&(1==u[h].id?p=r.default.ZhanLingSkill[u[h].id].passive:4==u[h].id&&(p=r.default.ZhanLingSkill[u[h].id].passivePlus));if(p>0){var g=new d.default(p);i/n<g.config.passive.p1/1e4&&f.intervalDoFun(e.infoModel.handle+p+0,g.cd,function(){s.default.ins().tryUseWarSpiritSkill(e,p,!0)})}}}},f=this;for(var p in r.default.ZhanLingBase)c(p)}},t.prototype.intervalDoFun=function(e,t,i){void 0==this.triggerInterval[e]&&(this.triggerInterval[e]=h.default.getTimer()),h.default.getTimer()-this.triggerInterval[e]>=0&&i(),this.triggerInterval[e]=h.default.getTimer()+t},t}(n.default);i.default=v,cc._RF.pop()},{"../../core/base/AttributeType":"AttributeType","../../core/base/BaseClass":"BaseClass","../Utils/EgretUtils":"EgretUtils","../base/EntityManager":"EntityManager","../consts/JobConst":"JobConst","../entity/CharRole":"CharRole","../entity/EntityBuff":"EntityBuff","../entity/SubRoles":"SubRoles","../manager/GlobalConfig":"GlobalConfig","../module/gamescene/GameLogic":"GameLogic","../module/rolewin/UserSkill":"UserSkill","../module/skill/data/SkillData":"SkillData","../module/zhanling/model/ZhanLingModel":"ZhanLingModel","./RoleAI":"RoleAI"}],ExpConfig:[function(e,t,i){"use strict";cc._RF.push(t,"54f3afDGWxB6b6ad1x6tZ8K","ExpConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ExpFbMonsterConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2019fFVCs9EnbW1ebSLW6+6","ExpFbMonsterConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ExpFubenBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5338cZTR7xLCooLGgtKcqDQ","ExpFubenBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ExpFubenConfig:[function(e,t,i){"use strict";cc._RF.push(t,"332d4SGof9BLbbN8lyPwo+8","ExpFubenConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ExtremeEquipModel:[function(e,t,i){"use strict";cc._RF.push(t,"b5f40JdFjpA8oZ/7USK4lbw","ExtremeEquipModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/BaseClass"),a=e("../../entity/SubRoles"),o=e("../../config/ItemConfig"),r=e("../../manager/GlobalConfig"),s=e("../bag/UserBag"),u=e("../../../core/utils/CommonUtils"),l=e("../skill/data/SkillData"),c=e("../forge/model/EquipPos"),d=e("../../../core/base/ErrorLog"),f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.selectJob=0,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},Object.defineProperty(t.prototype,"descNames",{get:function(){return["\u81f3\u5c0a\u795e\u5251","\u81f3\u5c0a\u5934\u76d4","\u81f3\u5c0a\u795e\u7532","\u81f3\u5c0a\u9879\u94fe","\u81f3\u5c0a\u624b\u956f","\u81f3\u5c0a\u8170\u5e26","\u81f3\u5c0a\u6212\u6307","\u81f3\u5c0a\u978b\u5b50"]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"positions",{get:function(){return[c.EquipPos.WEAPON,c.EquipPos.CLOTHES,c.EquipPos.Wrist,c.EquipPos.RING,c.EquipPos.SHOE,c.EquipPos.BRACELET,c.EquipPos.NECKLACE,c.EquipPos.HEAD]},enumerable:!0,configurable:!0}),t.prototype.getZhiZunLv=function(e,t){var i=a.default.ins().getSubRoleByJob(e).getEquipByIndex(t);return i.item.configID?i.soulLv:0},t.prototype.getZhiZunLvByRoleID=function(e,t){if(!e||t>c.EquipPos.SHOE)return 0;var i=e.getEquipByIndex(t);return i.item.configID?i.soulLv:0},t.prototype.isWear=function(e,t){return!!a.default.ins().getSubRoleByJob(e).getEquipByIndex(t).item.configID},t.prototype.canOperate=function(e,t){var i=a.default.ins().getSubRoleByJob(e).getEquipByIndex(t);if(i.item.configID){var n=i.soulLv;if(n<this.getMaxZhiZunEquipLevel(o.default.getSubType(i.item.itemConfig))){var u=r.default.ZhiZunEquipLevel[t][n+1],l=u.materialInfo.count;return s.default.ins().getBagGoodsCountById(0,u.materialInfo.id)>=l}}return!1},t.prototype.getRedPointByJob=function(e){for(var t=c.EquipPos.WEAPON;t<=c.EquipPos.SHOE;t++)if(this.canOperate(e,t))return!0;return!1},t.prototype.getRedPoint=function(){for(var e=a.default.ins().subRolesLen,t=0;t<e;t++){var i=a.default.ins().getSubRoleByIndex(t).job;if(this.getRedPointByJob(i))return!0}return!1},t.prototype.getMaxZhiZunEquipLevel=function(e){return u.default.getObjectLength(r.default.ZhiZunEquipLevel[e])},t.prototype.getZhiZunSkills=function(e){for(var t=[],i=0,n=[c.EquipPos.WEAPON,c.EquipPos.CLOTHES];i<n.length;i++){var a=n[i],o=e.getEquipByIndex(a);if(o.item.configID){var s=o.soulLv;if(s>0){var u=r.default.ZhiZunEquipLevel[a][s];u.skillId&&t.push(new l.default(u.skillId))}}}return t},t.prototype.getZhiZunSkill=function(e,t){var i=a.default.ins().getSubRoleByJob(e).getEquipByIndex(t);if(i.item.configID){var n=i.soulLv;if(n>0)return r.default.ZhiZunEquipLevel[t][n].skillId}return 0},t.prototype.getZhiZunLinkLv=function(e,t,i){var n=this.getLinkEquipPos(t),o=a.default.ins().getSubRoleByIndex(e-1);if(d.default.Assert(o,"\u51fd\u6570getZhiZunLinkLv\uff0c roleIndex:"+e+",mainPos:"+t+",soullv:"+i))return 0;var r=o.getEquipByIndex(t),s=o.getEquipByIndex(n);return r&&s?Math.min(i,s.soulLv):0},t.prototype.getZhiZunLinkLvShow=function(e,t,i){return a.default.ins().getSubRoleByIndex(e).getEquipByIndex(t)&&i?r.default.ZhiZunEquipLevel[t][i].soulLinkLevel:1},t.prototype.getLinkEquipPos=function(e){for(var t in r.default.ZhiZunLinkLevel)if(t==e.toString())for(var i in r.default.ZhiZunLinkLevel[t])return+i;return null},t.prototype.getZhiZunLinkLevelConfig=function(e,i,n){var a=e,o=i,s=t.ins().getZhiZunLv(o,a);s||(s=1);var u=t.ins().getLinkEquipPos(a);return n&&(s+=1),r.default.ZhiZunLinkLevel[a][u][s]},t.prototype.getZhiZunEquipLevelConfig=function(e,t,i){var n=e,a=t;return a||(a=1),i&&(a+=1),r.default.ZhiZunEquipLevel[n][a]},t.prototype.getSkillName=function(e){var t=r.default.ZhiZunEquipLevel[e][1];if(!t)return"";var i=r.default.SkillsConfig[t.skillId];if(!i)return"";var n=r.default.SkillsDescConfig[i.desc];return n?n.name:""},t.prototype.getSkillDesc=function(e){var t=r.default.ZhiZunEquipLevel[e][1];if(!t)return"";var i=r.default.SkillsConfig[t.skillId];if(!i)return"";var n=r.default.SkillsDescConfig[i.desc];if(!n)return"";var a=n.desc;return a=a.replace("%s%",i.desc_ex[0]+"")},t}(n.default);i.default=f,cc._RF.pop()},{"../../../core/base/BaseClass":"BaseClass","../../../core/base/ErrorLog":"ErrorLog","../../../core/utils/CommonUtils":"CommonUtils","../../config/ItemConfig":"ItemConfig","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../forge/model/EquipPos":"EquipPos","../skill/data/SkillData":"SkillData"}],ExtremeEquipPanel:[function(e,t,i){"use strict";cc._RF.push(t,"7b4bdT5imJHeb1UWHG5EH3u","ExtremeEquipPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../../../../core/view/BaseView").default);i.default=n,cc._RF.pop()},{"../../../../core/view/BaseView":"BaseView"}],FbBtnIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"a748a8EsX9JT4T7l/aobPn7","FbBtnIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../gamescene/GameLogic"),o=e("../../../entity/Actor"),r=e("../../task/UserTask"),s=e("../../fb/FbRedPoint"),u=e("../../opensystem/OpenSystem"),l=e("../../../consts/SystemConst"),c=e("../../fb/UserFb"),d=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postEnterMap,o.default.ins().postLevelChange,r.default.ins().postUpdteTaskTrace],n.updateMessage=[s.default.ins().postRedPoint],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return u.default.ins().checkSysOpen(l.SystemType.FB)&&!c.default.ins().pkGqboss},t.prototype.checkShowRedPoint=function(){return s.default.ins().redpoint?1:0},t.prototype.tapExecute=function(){ViewManager.ins().open(FbWin)},t}(n.default);i.default=d,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../fb/FbRedPoint":"FbRedPoint","../../fb/UserFb":"UserFb","../../gamescene/GameLogic":"GameLogic","../../opensystem/OpenSystem":"OpenSystem","../../task/UserTask":"UserTask","./RuleIconBase":"RuleIconBase"}],FbChNameConfig:[function(e,t,i){"use strict";cc._RF.push(t,"913c3ZX2k1O1bLfD//9WjH4","FbChNameConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.group=0,this.name=""}}();i.default=n,cc._RF.pop()},{}],FbChallengeBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7507eYiyPpF0JN18+Gpzkli","FbChallengeBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],FbChallengeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4f31dZnioFCsoAtcVoM6Y1A","FbChallengeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.group=0,this.layer=0,this.zsLevelLimit=0,this.levelLimit=0,this.fbId=0,this.describe="",this.showIcon=0,this.equipPos=0,this.clearReward=[],this.dayReward=[],this.lotteryCount=0}}();i.default=n,cc._RF.pop()},{}],FbChallengeLotteryConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4aea6yeFkRBEqT9AAxfVIdl","FbChallengeLotteryConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.group=[]}}();i.default=n,cc._RF.pop()},{}],FbModel:[function(e,t,i){"use strict";cc._RF.push(t,"fd0422OlzNA5Lc4Ntv1kEx7","FbModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../manager/GlobalConfig"),a=e("../zs/UserZs"),o=e("../../entity/Actor"),r=e("../vip/UserVip"),s=e("../../../core/base/ErrorLog"),u=function(){function e(){}return e.prototype.parser=function(e){this.fbID=e.readInt(),this.useCount=e.readShort(),this.vipBuyCount=e.readShort(),this.vipHoldCount=e.readShort(),this.isPass=e.readBoolean()},e.prototype.getCount=function(){if(s.default.Assert(!isNaN(this.fbID),"fbid is undefined"))return 0;var e=n.default.DailyFubenConfig[this.fbID];if(s.default.Assert(e,"DailyFubenConfig is null"))return 0;if(e.zsLevel>0){if(a.default.ins().lv<e.zsLevel)return 0}else if(o.default.level<e.levelLimit)return 0;return e.freeCount+this.vipBuyCount+this.vipHoldCount-this.useCount},e.prototype.getPlayCount=function(){if(s.default.Assert(!isNaN(this.fbID),"fbid is undefined"))return 0;var e=n.default.DailyFubenConfig[this.fbID];return s.default.Assert(e,"DailyFubenConfig is null")?0:e.freeCount+this.vipBuyCount+this.vipHoldCount-this.useCount},e.prototype.getNextVip=function(){if(s.default.Assert(!isNaN(this.fbID),"fbid is undefined"))return-1;var e=n.default.DailyFubenConfig[this.fbID];if(s.default.Assert(e,"DailyFubenConfig is null"))return-1;for(var t in e.vipBuyCount)if(this.useCount-e.freeCount-e.vipBuyCount[t]<0)return parseInt(t);return-1},e.prototype.getResetCount=function(){var e=r.default.ins().lv,t=n.default.DailyFubenConfig[this.fbID];return t.vipBuyCount[e]-(this.useCount-t.freeCount)},e}();i.default=u,cc._RF.pop()},{"../../../core/base/ErrorLog":"ErrorLog","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../vip/UserVip":"UserVip","../zs/UserZs":"UserZs"}],FbRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"35c42StaqJD57bm/iPYkzBR","FbRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/RedPointBase"),a=e("./UserFb"),o=e("../../entity/Actor"),r=e("./UserFb2"),s=e("../millionaire/Millionaire"),u=e("../battle/BattleCC"),l=e("../dieGuide/DieGuide"),c=e("../paoDian/PaoDianCC"),d=e("../zs/UserZs"),f=e("../guard/model/GuardWeaponModel"),p=e("./SkyLevelModel"),h=function(e){function t(){var t=e.call(this)||this;return t.isOpen=!0,t.registerTab(0,a.default.ins().postFbInfoInit,a.default.ins().postUpDataInfo,l.default.ins().postdieGuide,o.default.ins().postExp),t.registerTab(1,a.default.ins().postFbExpInfo),t.registerTab(2,r.default.ins().postUpDataInfo),t.registerTab(3,s.default.ins().postMillionaireInfo,s.default.ins().postTurnDice,s.default.ins().postRoundReward,s.default.ins().postMillionaireUpdate,u.default.ins().postOpenInfo,o.default.ins().postLevelChange,c.default.ins().postOpenInfo),t.registerTab(4,d.default.ins().postZsLv,a.default.ins().postGuardInfo),t}return __extends(t,e),t.prototype.getTabRedPoint=function(e){return 0==e?a.default.ins().hasCount():1==e?a.default.ins().fbExpRed():2==e?p.default.ins().cruLevel>1&&1==p.default.ins().dayReward||p.default.ins().lotteryRemainTimes>0:3==e?u.default.ins().checkRedPoint()||s.default.ins().getRedPoint()||c.default.ins().checkRedPoint():4==e&&f.default.ins().canChallenge()},t}(n.default);i.default=h,h.ins(),cc._RF.pop()},{"../../../core/base/RedPointBase":"RedPointBase","../../entity/Actor":"Actor","../battle/BattleCC":"BattleCC","../dieGuide/DieGuide":"DieGuide","../guard/model/GuardWeaponModel":"GuardWeaponModel","../millionaire/Millionaire":"Millionaire","../paoDian/PaoDianCC":"PaoDianCC","../zs/UserZs":"UserZs","./SkyLevelModel":"SkyLevelModel","./UserFb":"UserFb","./UserFb2":"UserFb2"}],FeatsStoreData:[function(e,t,i){"use strict";cc._RF.push(t,"c7db0MNtuJBR5D1igPsUQ9q","FeatsStoreData"),Object.defineProperty(i,"__esModule",{value:!0});var n,a,o=e("../../../manager/GlobalConfig"),r=e("../../../entity/Actor"),s=function(){function e(e,t){var i,n;this.exchangeCount=[];for(var a=0;a<e;a++)i=t.readInt(),n=t.readInt(),this.exchangeCount[i]=n}return e.prototype.checkHonorBuy=function(e){var t=o.default.FeatsStore[e];if(r.default.chip<t.costMoney.count)return!1;switch(t.buyType){case n.day:if(this.exchangeCount[t.index-1]>=t.daycount)return!0;break;case n.infinite:return!0;case n.forever:if(this.exchangeCount[t.index-1]>=t.daycount)return!0}return!1},e.prototype.checkHonorRedPoint=function(){for(var e in o.default.FeatsStore){if(this.checkHonorBuy(o.default.FeatsStore[e].goods[0].id))return!0}return!1},e}();i.default=s,function(e){e[e.day=1]="day",e[e.infinite=2]="infinite",e[e.forever=3]="forever"}(n||(n={})),function(e){e[e.Money=1]="Money",e[e.Item=2]="Item"}(a||(a={})),cc._RF.pop()},{"../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig"}],FeatsStore:[function(e,t,i){"use strict";cc._RF.push(t,"7da8dymd/9BF6pP0Jb7qHvF","FeatsStore"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],FengceIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"ba606rS641EHJ/W5ipJp55j","FengceIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../opensystem/OpenSystem"),o=e("../../../consts/SystemConst"),r=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return a.default.ins().checkSysOpen(o.SystemType.FENGCE)},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.tapExecute=function(){ViewManager.ins().open(FengceActivityWin)},t}(n.default);i.default=r,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],FieldBossConfig:[function(e,t,i){"use strict";cc._RF.push(t,"bd24bB83ctDh6ZPUjWUJLj3","FieldBossConfig");cc._RF.pop()},{}],FirstRechargeClientConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d1565xpCuNGzZpHnu2eCRAM","FirstRechargeClientConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],FirstRechargeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"547a19kiZdFfLvOWPD63OWS","FirstRechargeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],FirstRechargeIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"da0a6dsB+FC1Lr/6nPgm7wD","FirstRechargeIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../fb/UserFb"),r=e("../../recharge/Recharge"),s=e("../../opensystem/OpenSystem"),u=e("../../../consts/SystemConst"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postGuanqiaInfo,o.default.ins().postGuanKaIdChange,r.default.ins().postUpdateRecharge,r.default.ins().postUpdateRechargeEx],n.updateMessage=[r.default.ins().postUpdateRecharge,r.default.ins().postUpdateRechargeEx],n}return __extends(t,e),t.prototype.createTar=function(){e.prototype.createTar.call(this);var t=r.default.ins().getRechargeData(0);return 2!=t.num?this.tar.icon="zjmshouchong":t.isAwards?this.tar.icon="zjmlibao":this.tar.icon="zjmshouchong2",this.tar},t.prototype.checkShowIcon=function(){if(!s.default.ins().checkSysOpen(u.SystemType.FIRSTCHARGE))return!1;if(r.default.ins().getCurDailyRechargeIsAllGet())return!1;if(this.tar){var e=r.default.ins().getRechargeData(0);2!=e.num?this.tar.icon="zjmshouchong":e.isAwards?this.tar.icon="zjmlibao":this.tar.icon="zjmshouchong2"}return!0},t.prototype.checkShowRedPoint=function(){var e=0,t=r.default.ins().getRechargeData(0);if(1==t.num)e=t.num;else if(2==t.num){var i=r.default.ins().getCurRechargeConfig();for(var n in i){if(0==(t.isAwards>>i[n].index&1)&&t.curDayPay>=i[n].pay)return 1}}return e},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){2==r.default.ins().getRechargeData(0).num?ViewManager.ins().open(Recharge2Win):ViewManager.ins().open(Recharge1Win)},t}(n.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../fb/UserFb":"UserFb","../../opensystem/OpenSystem":"OpenSystem","../../recharge/Recharge":"Recharge","./RuleIconBase":"RuleIconBase"}],FlameStampEffect:[function(e,t,i){"use strict";cc._RF.push(t,"1dca5ABTn9HWLvBjqfoVMfR","FlameStampEffect"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.reloadTime=0,this.exPower=0}}();i.default=n,cc._RF.pop()},{}],FlameStampLevel:[function(e,t,i){"use strict";cc._RF.push(t,"7912bBuiVBLs4827Ppnns7/","FlameStampLevel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],FlameStampMat:[function(e,t,i){"use strict";cc._RF.push(t,"4b4b9x9GKVLkrRCp49tNko3","FlameStampMat"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],FlameStamp:[function(e,t,i){"use strict";cc._RF.push(t,"b9bb2gsEIFNtr1my4qWTLrm","FlameStamp"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],FlowerUseTipsWin:[function(e,t,i){"use strict";cc._RF.push(t,"7e079xzdiZL2YggTHMVzQvS","FlowerUseTipsWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t}return __extends(t,e),t.prototype.initUI=function(){throw new Error("Method not implemented.")},t.prototype.initData=function(){throw new Error("Method not implemented.")},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error("Method not implemented.")},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error("Method not implemented.")},t}(n.default);i.default=o,cc._RF.pop()},{"../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager"}],FocusIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"0667aw7k2JLZ6Sb98QC7p0r","FocusIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../pfactivity/PfActivity"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postGuanZhu],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return r.default.ins().checkSysOpen(s.SystemType.FOCUS)&&0==o.default.ins().focusState},t.prototype.checkShowRedPoint=function(){return 1},t.prototype.tapExecute=function(){ViewManager.ins().open(FocusWin)},t}(n.default);i.default=u,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../opensystem/OpenSystem":"OpenSystem","../../pfactivity/PfActivity":"PfActivity","./RuleIconBase":"RuleIconBase"}],ForgeConst:[function(e,t,i){"use strict";cc._RF.push(t,"8a3a70CuKFNXK05PvwZEuQe","ForgeConst"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./EquipPos");(function(e){e.CAN_FORGE_EQUIP=[n.EquipPos.WEAPON,n.EquipPos.HEAD,n.EquipPos.CLOTHES,n.EquipPos.NECKLACE,n.EquipPos.Wrist,n.EquipPos.BRACELET,n.EquipPos.RING,n.EquipPos.SHOE],e.EQUIP_POS_TO_SUB=[],e.EQUIP_POS_TO_SUB[n.EquipPos.WEAPON]=0,e.EQUIP_POS_TO_SUB[n.EquipPos.HEAD]=1,e.EQUIP_POS_TO_SUB[n.EquipPos.CLOTHES]=2,e.EQUIP_POS_TO_SUB[n.EquipPos.NECKLACE]=3,e.EQUIP_POS_TO_SUB[n.EquipPos.Wrist]=4,e.EQUIP_POS_TO_SUB[n.EquipPos.BRACELET]=5,e.EQUIP_POS_TO_SUB[n.EquipPos.RING]=6,e.EQUIP_POS_TO_SUB[n.EquipPos.SHOE]=7,e.EQUIP_POS_TO_SUB[n.EquipPos.DZI]=8,e.EQUIP_POS_TO_SUB[n.EquipPos.HAT]=9,e.EQUIP_POS_TO_SUB[n.EquipPos.VIZARD]=10,e.EQUIP_POS_TO_SUB[n.EquipPos.CLOAK]=11,e.EQUIP_POS_TO_SUB[n.EquipPos.SHIELD]=12})(i.ForgeConst||(i.ForgeConst={})),cc._RF.pop()},{"./EquipPos":"EquipPos"}],ForgeIndexConfig:[function(e,t,i){"use strict";cc._RF.push(t,"36b12TUUwRALJoI7WTOLnG6","ForgeIndexConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ForgeRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"bd51fmgDlFMMbYmQRuFx30B","ForgeRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../base/BaseSystem"),a=e("../UserForge"),o=e("../../bag/UserBag"),r=e("../../../entity/SubRoles"),s=e("../../../manager/GlobalConfig"),u=e("../../../entity/Actor"),l=e("../../../../core/base/MessageCenter"),c=e("../view/ForgeWin"),d=function(e){function t(){var i=e.call(this)||this;return i.roleTabs={},i.flexible={},i.tabs={},i.roleTabs={},i.flexible={},i.redPoint=!1,l.default.compile(t),i}return __extends(t,e),t.prototype.postForgeRedPoint=function(){},t.prototype.getRedPoint=function(e){return this.tabs[e]},t.prototype.getFlexibleRoleRedPoint=function(e){return this.flexible[e]},t.prototype.postForgeBoostRedPoint=function(){for(var e=c.default.Page_Select_Boost,t=this.tabs[e],i=!1,n=r.default.ins().subRolesLen,s=0;s<n;s++){var u=r.default.ins().getSubRoleByIndex(s),l=u.getMinEquipIndexByType(e),d=u.getEquipByIndex(l).strengthen,f=a.default.ins().getEnhanceCostConfigByLv(d+1);if(f){var p=f.stoneNum;if(p){var h=f.stoneId,g=o.default.ins().getBagGoodsCountById(0,h);if(g>=p)a.default.ins().isMaxForge(u,e)&&(i=!0);this.roleTabs[e]||(this.roleTabs[e]={}),this.roleTabs[e][s]=g>=p}}}return this.tabs[e]=i,t!=i},t.prototype.postForgeZhulingRedPoint=function(){for(var e=c.default.Page_Select_ZhuLing,t=this.tabs[e],i=!1,n=r.default.ins().subRolesLen,s=0;s<n;s++){var u=r.default.ins().getSubRoleByIndex(s),l=u.getMinEquipIndexByType(e),d=u.getEquipByIndex(l).zhuling,f=a.default.ins().getZhulingCostConfigByLv(d+1);if(f){var p=f.count;if(p){var h=f.itemId,g=o.default.ins().getBagGoodsCountById(0,h);if(g>=p)a.default.ins().isMaxForge(u,e)&&(i=!0);this.roleTabs[e]||(this.roleTabs[e]={}),this.roleTabs[e][s]=g>=p}}}return this.tabs[e]=i,t!=i},t.prototype.postForgeGemRedPoint=function(){if(u.default.level<s.default.StoneOpenConfig[0].openLv)return!1;for(var e=c.default.Page_Select_Gem,t=this.tabs[e],i=!1,n=r.default.ins().subRolesLen,o=0;o<n;o++){var l=r.default.ins().getSubRoleByIndex(o),d=l.getMinEquipIndexByType(e),f=l.getEquipByIndex(d).gem,p=a.default.ins().getStoneLevelCostConfigByLv(f+1);if(p){var h=p.soulNum;if(h){p.stoneId;var g=u.default.soul;if(g>=h)a.default.ins().isMaxForge(l,e)&&(i=!0);this.roleTabs[e]||(this.roleTabs[e]={}),this.roleTabs[e][o]=g>=h}}}return this.tabs[e]=i,t!=i},t.prototype.postForgeWeaponRedPoint=function(){},t.prototype.getFlexibleRedPointOnly=function(e,t){var i=r.default.ins().getSubRoleByIndex(e),n=i.weapons.getFlexibleData();if(i.weapons.flexibleCount<=n.length)return!1;var a=i.weapons.getSoulInfoData(),o=[];for(var s in a)a[s]&&a[s].id&&o.push(a[s].id);return-1==n.indexOf(t)},t.prototype.getFlexibleRedPoint=function(e){var t=r.default.ins().getSubRoleByIndex(e),i=t.weapons.getFlexibleData();if(t.weapons.flexibleCount<=i.length)return!1;var n=t.weapons.getSoulInfoData(),a=[];for(var o in n)n[o]&&n[o].id&&a.push(n[o].id);for(var u=0;u<a.length;u++)if(-1==i.indexOf(a[u]))return!0;return t.weapons.flexibleCount-1<s.default.WeaponSoulBaseConfig.maxItemNum},t}(n.default);i.default=d,d.ins(),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../base/BaseSystem":"BaseSystem","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../UserForge":"UserForge","../view/ForgeWin":"ForgeWin"}],ForgeWin:[function(e,t,i){"use strict";cc._RF.push(t,"0c80fSEzKNHAo+bscMQGImc","ForgeWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=cc._decorator,r=o.ccclass,s=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Main,t}return __extends(t,e),t.prototype.initData=function(){},t.prototype.initUI=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onTouch=function(e){},t.prototype.setOpenIndex=function(e,t){},t.prototype.checkIsOpen=function(e){},t.prototype.checkAutoBtn=function(){},t.prototype.onEvent=function(e){},t.prototype.delayRedPoint=function(){},t.prototype.redPointEx=function(){},t.prototype.redPoint=function(){},t.prototype.setRoleId=function(e,t){},t.Page_Select_Boost=0,t.Page_Select_Gem=1,t.Page_Select_ZhuLing=2,t.Page_Select_Weapon=3,t.PageSelectSamsara=4,t=__decorate([r],t)}(n.default));i.default=s,cc._RF.pop()},{"../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager"}],FriendData:[function(e,t,i){"use strict";cc._RF.push(t,"94de3kZNcxHWL3EXvx2TwUz","FriendData");(function(){function e(e,t){if(void 0===t&&(t=null),this._offLineSec=0,this.appDate=0,this._redPoint=!1,this.msgMaxLen=50,this.lastMsg="",this.lastMsgDate=0,this.lastMsgData_local=0,this.type=e,t)switch(this.id=t.readUnsignedInt(),this.name=t.readString(),this.guildName=t.readString(),this.online=t.readUnsignedByte(),this.job=t.readUnsignedByte(),this.sex=t.readUnsignedByte(),this.vip=t.readUnsignedByte(),this.lv=t.readUnsignedByte(),this.zs=t.readUnsignedByte(),this.monthCard=t.readUnsignedByte(),this.ladderLv=t.readUnsignedByte(),this.isLastWeekLadder=t.readUnsignedByte(),this.power=t.readInt(),e){case 1:var i=t.readInt()||0;this.offLineSec=i;break;case 2:this.lastMsgDate=t.readInt();break;case 3:var n=t.readInt()||0;this.appDate=n}}Object.defineProperty(e.prototype,"offLineSec",{get:function(){var e=0;try{var t=Date.now()/1e3;e=Math.floor(this._offLineSec+(t-this._updateTs))}catch(e){debug.log("\u53d6\u597d\u53cb\u79bb\u7ebf\u65f6\u95f4\u5931\u8d25"),debug.log(e)}return e},set:function(e){this._offLineSec=e,this._updateTs=Date.now()/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"redPoint",{get:function(){var e=this._redPoint;return this._redPoint=!1,e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"acMsg",{get:function(){return null==Friends.ins().chatList[this.id]&&(Friends.ins().chatList[this.id]=new eui.ArrayCollection),Friends.ins().chatList[this.id]},set:function(e){Friends.ins().chatList[this.id]=e},enumerable:!0,configurable:!0}),e.prototype.addChat=function(e){if(this._redPoint=e.fromActor.id==this.id,0==this.acMsg.length)e.showDate=!0;else for(var t=this.acMsg.length-1;t>=0;--t){var i=this.acMsg.getItemAt(t);if(e.date-i.date>300&&(e.showDate=!0),i.showDate)break}this.acMsg.addItem(e),this.lastMsgData_local=Date.now(),this.acMsg.length>this.msgMaxLen&&this.acMsg.removeItemAt(0)}})(),function(){function e(e,t,i,n){this.date=0,this.msg="",this.showDate=!1,this.fromActor=e,this.toActor=t,this.date=i,this.msg=n}Object.defineProperty(e.prototype,"dateStr",{get:function(){var e="";return e=DateUtils.getFormatBySecond(DateUtils.formatMiniDateTime(this.date)/1e3,8),e=StringUtils.complementByChar(e,16)},enumerable:!0,configurable:!0})}();cc._RF.pop()},{}],FriendLimit:[function(e,t,i){"use strict";cc._RF.push(t,"c9cbf0D4MJJq7ajAnpp8IKb","FriendLimit"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.sysLv=50,this.chatLv=50,this.friendListLen=50,this.chatsListLen=50,this.applyListLen=50,this.blacklistLen=50,this.contentLimit=50}}();i.default=n,cc._RF.pop()},{}],FriendsIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"0e757aeMcJOGrUiGvLI6+Bi","FriendsIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../friends/Friends"),r=e("../../../manager/GlobalConfig"),s=e("../../tips/UserTips"),u=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!1,n.showMessage=[a.default.ins().postLevelChange],n.updateMessage=[o.default.ins().postFriendChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return a.default.level>=70},t.prototype.checkShowRedPoint=function(){var e=0;if(Object.keys(o.default.ins().newMsg).length>0)for(var t in o.default.ins().newMsg){if(1==o.default.ins().newMsg[t]){e++;break}}return o.default.ins().appList.length>0&&e++,e},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){a.default.level<r.default.FriendLimit.sysLv?s.default.ins().showTips(r.default.FriendLimit.sysLv+"\u7ea7\u5f00\u542f\u597d\u53cb\u529f\u80fd"):ViewManager.ins().open(FriendBgWin)},t}(n.default);i.default=u,cc._RF.pop()},{"../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../friends/Friends":"Friends","../../tips/UserTips":"UserTips","./RuleIconBase":"RuleIconBase"}],Friends:[function(e,t,i){"use strict";cc._RF.push(t,"bc70aT7eKpP4qF9NWncD8DV","Friends"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../report/ReportData"),r=e("../../entity/Actor"),s=e("../tips/UserTips"),u=e("../../manager/GlobalConfig"),l=e("../../../core/base/MessageCenter"),c=e("../chat/Chat"),d=e("../guild/Guild"),f=function(e){function t(){var i=e.call(this)||this;return i.isDebug=!1,i.chatList={},i.newMsg={},i.currentId=-1,i.sysId=a.PackageID.Friends,l.default.compile(t),i.regNetMsg(7,i.doAddListMsg),i.regNetMsg(3,i.doAppList),i.regNetMsg(4,i.doBlackList),i.regNetMsg(13,i.doChatAdd),i.regNetMsg(1,i.doFriendsList),i.regNetMsg(10,i.doFriendsStateChange),i.regNetMsg(14,i.doRecentChatList),i.regNetMsg(9,i.doRemoveListMsg),i.regNetMsg(2,i.doRencentList),i.regNetMsg(11,i.doSendResult),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initLogin=function(){this.sendAppList()},t.prototype.log=function(e){this.isDebug&&debug.log(e)},t.prototype.sendFriendsList=function(){var e=this.getBytes(1);this.sendToServer(e)},t.prototype.sendRecentList=function(){var e=this.getBytes(2);this.sendToServer(e)},t.prototype.sendAppList=function(){var e=this.getBytes(3);this.sendToServer(e)},t.prototype.sendBlackList=function(){var e=this.getBytes(4);this.sendToServer(e)},t.prototype.sendAddFriend=function(e,t){if(r.default.level<u.default.FriendLimit.chatLv)s.default.ins().showTips(u.default.FriendLimit.chatLv+"\u7ea7\u5f00\u653e\u529f\u80fd");else if(-1==this.indexOfBlackList(e)){for(var i=0,n=this.blackList.source;i<n.length;i++){if(n[i].name==t)return void s.default.ins().showTips("\u4e0d\u80fd\u6dfb\u52a0\u9ed1\u540d\u5355\u4e2d\u7684\u7528\u6237\u4e3a\u597d\u53cb")}var a=this.getBytes(5);a.writeInt(e),a.writeString(t),this.sendToServer(a)}else s.default.ins().showTips("\u4e0d\u80fd\u6dfb\u52a0\u9ed1\u540d\u5355\u4e2d\u7684\u7528\u6237\u4e3a\u597d\u53cb")},t.prototype.sendAddBlackList=function(e,t){if(r.default.level<u.default.FriendLimit.chatLv)s.default.ins().showTips(u.default.FriendLimit.chatLv+"\u7ea7\u5f00\u653e\u529f\u80fd");else{var i=this.getBytes(6);i.writeInt(e),i.writeString(t),this.sendToServer(i)}},t.prototype.sendAgreeApp=function(e,t){var i=this.getBytes(8);i.writeInt(e),i.writeByte(t),this.sendToServer(i)},t.prototype.sendDelete=function(e,t){var i=this.getBytes(9);i.writeByte(e),i.writeInt(t),this.sendToServer(i)},t.prototype.sendChat=function(e,t){var i=this.getBytes(11);i.writeInt(e),i.writeString(t),this.sendToServer(i),o.default.getIns().reportChat(t,1)},t.prototype.sendRecentChat=function(e){var t=this.getBytes(14);t.writeInt(e),this.sendToServer(t)},t.prototype.doFriendsList=function(e){this.paserList(1,e),this.postFriendChange()},t.prototype.doRencentList=function(e){this.paserList(2,e),this.postFriendChange()},t.prototype.doAppList=function(e){this.paserList(3,e),this.postFriendChange()},t.prototype.doBlackList=function(e){this.paserList(4,e),this.postFriendChange()},t.prototype.doAddListMsg=function(e){var t=e.readByte();this.paserAddData(t,e),this.postFriendChange()},t.prototype.doRemoveListMsg=function(e){var t=e.readByte(),i=e.readInt();this.paserRemoveData(t,i),this.postFriendChange()},t.prototype.doFriendsStateChange=function(e){var t=e.readUnsignedInt(),i=e.readByte();this.paserOnlineChange(t,i),this.postFriendChange()},t.prototype.doSendResult=function(e){if(0!=e.readByte()){var t=e.readUnsignedInt(),i=e.readInt(),n=e.readString();this.paserChatMsg(1,t,i,n)}this.postFriendChange()},t.prototype.doChatAdd=function(e){var t=e.readUnsignedInt(),i=e.readInt(),n=e.readString();this.paserChatMsg(0,t,i,n),this.postFriendChange()},t.prototype.doRecentChatList=function(e){this.paserRecentMsg(e),this.postFriendChange()},t.prototype.postFriendChange=function(){return 0},t.prototype.postCloseFriendList=function(){},t.prototype.postChatToFriend=function(e){return e},t.prototype.indexOfFriendList=function(e){for(var t=-1,i=0;i<this.friendsList.length;i++){var n=this.friendsList.getItemAt(i);if(n&&n.id==e){t=i;break}}return t},t.prototype.indexOfBlackList=function(e){for(var t=-1,i=0;i<this.blackList.length;i++){var n=this.blackList.getItemAt(i);if(n&&n.id==e){t=i;break}}return t},t.prototype.indexOfRecentList=function(e){for(var t=-1,i=0;i<this.recentList.length;i++){var n=this.recentList.getItemAt(i);if(n&&n.id==e){t=i;break}}return t},t.prototype.indexOfAppList=function(e){for(var t=-1,i=0;i<this.appList.length;i++){var n=this.appList.getItemAt(i);if(n&&n.id==e){t=i;break}}return t},t.prototype.sortRecentList=function(){},t.prototype.sortFriendList=function(){var e=this.friendsList.source,t=[],i=[];e.forEach(function(e){1==e.online?t.push(e):i.push(e)}),t.sort(function(e,t){return t.zs!=e.zs?t.zs-e.zs:t.lv-e.lv}),i.sort(function(e,t){return t.zs!=e.zs?t.zs-e.zs:t.lv-e.lv}),e=t.concat(i),this.friendsList.replaceAll(e)},t.prototype.sortAppList=function(){var e=this.appList.source;e.sort(function(e,t){return t.power-e.power}),this.appList.replaceAll(e)},t.prototype.paserList=function(e,t){},t.prototype.paserAddData=function(e,t){var i=new FriendData(e,t),n=["friendsList","recentList","appList","blackList"][e-1],a=-1;1==e?a=this.indexOfFriendList(i.id):2==e?a=this.indexOfRecentList(i.id):3==e?a=this.indexOfAppList(i.id):4==e&&(a=this.indexOfBlackList(i.id),this.paserRemoveData(1,i.id),this.paserRemoveData(2,i.id),this.paserRemoveData(3,i.id),c.default.ins().removeChatWithId(i.id),d.default.ins().removeMsgWithId(i.id)),this[n]&&2!=e&&(a>-1?this[n].replaceItemAt(i,a):this[n].addItemAt(i,0)),this.sortFriendList(),this.sortRecentList(),this.sortAppList()},t.prototype.paserRemoveData=function(e,t){var i=["friendsList","recentList","appList","blackList"][e-1],n=-1;this[i]&&(1==e?(n=this.indexOfFriendList(t),this.newMsg[t]=!1):2==e?(n=this.indexOfRecentList(t),this.newMsg[t]=!1):3==e?n=this.indexOfAppList(t):4==e&&(n=this.indexOfBlackList(t)),n>-1&&this[i].removeItemAt(n))},t.prototype.paserOnlineChange=function(e,t){var i=this.indexOfFriendList(e);if(i>-1){var n=this.friendsList.getItemAt(i);n.id==e&&(n.online=t,0==n.online?this.friendsList.replaceItemAt(n,i):(this.friendsList.removeItemAt(i),this.friendsList.addItemAt(n,0)))}},t.prototype.paserChatMsg=function(e,t,i,n){if(!(this.indexOfBlackList(t)>-1)){0==e&&this.currentId!=t&&(this.newMsg[t]=!0);var a=this.indexOfFriendList(t);if(a>-1){var o=this.friendsList.getItemAt(a),s=new FriendData(1);s.id=r.default.actorID,s.job=SubRoles.ins().getSubRoleByIndex(0).job,s.sex=SubRoles.ins().getSubRoleByIndex(0).sex,s.power=r.default.power,0==e?o.addChat(new ChatData(o,s,i,n)):1==e&&o.addChat(new ChatData(s,o,i,n))}var u=this.indexOfRecentList(t);if(u>-1)(o=this.recentList.getItemAt(u)).lastMsg=n,this.recentList.removeItemAt(u),this.recentList.addItemAt(o,0);else if(a>-1){(o=this.friendsList.getItemAt(a)).lastMsg=n,this.recentList.addItemAt(o,0)}else debug.log("\u6709\u4e00\u4e2a\u4e0d\u5c5e\u4e8e\u6700\u8fd1\u8054\u7cfb\u4eba\u548c\u597d\u53cb\u5217\u8868\u7684\u79c1\u804a"),debug.log("id:"+t+"/ msg:"+n);this.sortFriendList(),this.sortRecentList(),this.sortAppList()}},t.prototype.paserRecentMsg=function(e){for(var t=e.readByte(),i=0;i<t;i++){var n=e.readByte(),a=e.readInt(),o=e.readString();if(-1==this.indexOfBlackList(n))for(;i<this.recentList.length;i++){var r=this.recentList.getItemAt(0);if(r.id==n){r.lastMsg=o,r.offLineSec=a;break}}}},t.prototype.getFriendIndex=function(e){for(var t=0;;){var i=this.friendsList.getItemAt(t);if(!i)return-1;if(i.id==e)return t;t++}},t.MAXNUM=100,t.CLOSS_FRIEND_LIST_BUTTON="CLOSS_FRIEND_LIST_BUTTON",t}(n.default);i.default=f,window.GameSystem.push(f.ins.bind(f)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../chat/Chat":"Chat","../guild/Guild":"Guild","../report/ReportData":"ReportData","../tips/UserTips":"UserTips"}],FsFbConfig:[function(e,t,i){"use strict";cc._RF.push(t,"bef040aij5Ah7e9MB/mxDRg","FsFbConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],FuLiBtnConfig:[function(e,t,i){"use strict";cc._RF.push(t,"20df1OGp7FCK4vr9r+wVONR","FuLiBtnConfig");cc._RF.pop()},{}],FuncNoticeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"27e5cWmnh9Ffa7f1rnKgTzF","FuncNoticeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],FuncNoticeIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"03b2bsprxhCRZjaB0WRG5G8","FuncNoticeIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../fb/UserFb"),o=e("../../tips/UserTips"),r=e("../../tips/view/FuncNoticeWin"),s=function(e){function t(t){var i=e.call(this,t)||this;return i.funcNoticeLastLv=0,i.showMessage=[a.default.ins().postGuanKaIdChange],i}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=a.default.ins().guanqiaID,t=r.default.getFuncNoticeConfigById(e);if(!t)return!1;var i=t.openLv-e<=10;return i&&(t.openLv-e==0&&(e-this.funcNoticeLastLv==1&&o.default.ins().showFuncNotice(e),(!(t=r.default.getFuncNoticeConfigById(e+1))||t.openLv-e>10)&&(i=!1)),i&&this.tar&&this.updateButton()),this.funcNoticeLastLv=e,i},t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return this.updateButton(),t},t.prototype.updateButton=function(){var e=a.default.ins().guanqiaID,t=r.default.getFuncNoticeConfigById(e);this.tar.iconDisplay.source="yg_"+t.index+"0",this.tar.txt.text=t.openLv+"\u5173\u5f00\u542f",2==t.index?(this.tar.iconDisplay.x=15,this.tar.iconDisplay.y=0):(this.tar.iconDisplay.x=3,this.tar.iconDisplay.y=-30)},t.prototype.tapExecute=function(){var e=a.default.ins().guanqiaID;r.default.getFuncNoticeConfigById(e).openLv-e==0&&(e+=1),o.default.ins().showFuncNotice(e)},t}(n.default);i.default=s,cc._RF.pop()},{"../../fb/UserFb":"UserFb","../../tips/UserTips":"UserTips","../../tips/view/FuncNoticeWin":"FuncNoticeWin","./RuleIconBase":"RuleIconBase"}],FuncNoticeWin:[function(e,t,i){"use strict";cc._RF.push(t,"a2203swwxBADKVGU1Eg487Q","FuncNoticeWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../manager/GlobalConfig"),r=e("../../GameGuider"),s=e("../../../../core/base/ViewManager"),u=e("../../../../core/utils/TextFlowMaker"),l=cc._decorator,c=l.ccclass,d=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Tips,t.sureBtn=null,t.txt=null,t}var i;return __extends(t,e),i=t,t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.showWin=function(e){this.curConfig=i.getFuncNoticeConfigById(e);var t=this.curConfig.openLv;this.iconSource=e==t?"yg_002":"yg_001",this.txt.string=u.default.generateTextFlow("|C:0x35e62d&T:"+t+"|\u5173\u5f00\u542f"),this.addTouchEvent(this.sureBtn,this.onTouch)},t.prototype.onTouch=function(){if("yg_002"==this.iconSource){var e=this.curConfig.openPanel[0].toString(),t=this.curConfig.openPanel[1];r.default.guidance(e,t)}s.default.ins().close(this)},t.getFuncNoticeConfigById=function(e){var t=o.default.FuncNoticeConfig;for(var i in t)if(t[i].openLv>=e)return t[i];return null},__decorate([d({type:cc.Node,displayName:"sureBtn"})],t.prototype,"sureBtn",void 0),__decorate([d({type:cc.RichText,displayName:"\u8bf4\u660e"})],t.prototype,"txt",void 0),t=i=__decorate([c],t)}(n.default);i.default=f,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/TextFlowMaker":"TextFlowMaker","../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../GameGuider":"GameGuider"}],FunctionOpenIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"13a5dNBP6hPDoKp0N2/t1hT","FunctionOpenIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../server/GameServer"),r=e("../../../manager/TimerManager"),s=e("../../../../core/utils/DateUtils"),u=e("../model/ActivityForeshowModel"),l=e("../../../manager/UILoadMgr"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postLevelChange],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);this.alertText=cc.instantiate(l.default.inst.getPrefab(l.prefabName.common_lab)).getComponent(cc.Label);var i=u.default.ins().getForeshow();return i&&(this.dataCfg=i,o.default.serverOpenDay>=i.close?this.alertText.string="":(this.time=this.getLeftTime(),this.runTime(),r.default.ins().doTimer(1e3,0,this.runTime,this)),t.icon=i.icon),t},t.prototype.getLeftTime=function(){var e=0;if(o.default.serverOpenDay<this.dataCfg.close){var t=new Date(o.default.serverTime),i=this.dataCfg.close-o.default.serverOpenDay;t.setDate(t.getDate()+i),t.setHours(0,0,0,0),e=Math.floor((t.getTime()-o.default.serverTime)/1e3)}return e},t.prototype.runTime=function(){var e=this.time;this.time-=1,e>0?this.alertText.string=s.default.getFormatBySecond(e,s.default.TIME_FORMAT_12):(this.alertText.string="",r.default.ins().remove(this.runTime,this),this.updateShow())},t.prototype.checkShowIcon=function(){var e=!1;return u.default.ins().getForeshow()&&(e=!0),e},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.tapExecute=function(){ViewManager.ins().open(ActivityForeshowWin)},t}(n.default);i.default=c,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../entity/Actor":"Actor","../../../manager/TimerManager":"TimerManager","../../../manager/UILoadMgr":"UILoadMgr","../../server/GameServer":"GameServer","../model/ActivityForeshowModel":"ActivityForeshowModel","./RuleIconBase":"RuleIconBase"}],FuwenTreasureConfig:[function(e,t,i){"use strict";cc._RF.push(t,"60b520IzDJFZLsucLIJgpP9","FuwenTreasureConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.huntOnce=500,this.huntTenth=4980}}();i.default=n,cc._RF.pop()},{}],FuwenTreasureLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f7f28Y4g2ROXIBhb8qSlVmy","FuwenTreasureLevelConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],FuwenTreasureRewardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"738faMMQx1HV7qVgrJOVE0U","FuwenTreasureRewardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GGWWaveConf:[function(e,t,i){"use strict";cc._RF.push(t,"f1333oSMJZCa5JQ0xwl0FlU","GGWWaveConf"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GWSkillReviseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"adcd52aBYxIkr3O8dQ3kLEC","GWSkillReviseConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],GainItemConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6907aL2xgRNPJWuqHhBe4da","GainItemConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GainWay:[function(e,t,i){"use strict";cc._RF.push(t,"378ca9i4DxEA7TQrAiRQxNP","GainWay");(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}__extends(t,e),Object.defineProperty(t.prototype,"gainName",{get:function(){return this[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"winName",{get:function(){return this[1]?this[1]:void 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"page",{get:function(){return this[2]?this[2]:0},enumerable:!0,configurable:!0})})(Array);cc._RF.pop()},{}],GainZsWin:[function(e,t,i){"use strict";cc._RF.push(t,"fcabeTVwB5BmotM7ZZzg7P7","GainZsWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../UserZs"),a=e("../../../entity/Actor"),o=e("../../../config/ItemStoreConfig"),r=e("../../../manager/GlobalConfig"),s=e("../../bag/UserBag"),u=e("../../activity/model/RewardData"),l=e("../../../consts/MoneyConst"),c=e("../../shop/Shop"),d=e("../../vip/UserVip"),f=e("../../../../core/base/ViewManager"),p=e("../../tips/UserTips"),h=e("../../shop/view/BuyWin"),g=e("../../../enum/LayerManager");(function(e){function t(){var t=e.call(this)||this;return t.parentRoot=g.LayerManager.UI_Popup,t}__extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="GainZsSkin",this.infoTxts=[this.infoTxt0,this.infoTxt1,this.infoTxt2],this.toDays=[this.toDay0,this.toDay1,this.toDay2],this.items=[this.item0,this.item1,this.item2],this.btns=[this.btn0,this.btn1,this.btn2];for(var t=0;t<this.items.length;t++)this.items[t].isShowName(!1);this.priceIcon1.setType(l.MoneyConst.yuanbao),this.priceIcon2.setType(l.MoneyConst.yuanbao);var i=new u.default;i.type=0,i.id=0,i.count=0,this.items[0].data=i,this.isTopLevel=!0,this.tipsExp=0},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this,this.onTap),this.observe(n.default.ins().postZsData,this.setData),this.observe(a.default.ins().postLevelChange,this.setData),this.observe(c.default.ins().postBuyResult,this.setData),this.observe(c.default.ins().postBuyCount,this.setData),this.setData()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this,this.onTap),this.removeObserve()},t.prototype.setData=function(){var e,t=r.default.ZhuanShengConfig,i=t.level+1,u=Math.max(a.default.level,i),l=(r.default.ZhuanShengLevelConfig[u],r.default.ZhuanShengExpConfig[u]),c=n.default.ins();this.toDays[0].textColor=a.default.level<i?15937822:11050120,this.infoTxts[0].textFlow=(new egret.HtmlTextParser).parser('\u589e\u52a0<font color="#9de242">'+l.exp+"</font>\u4fee\u4e3a\n\n\u7b49\u7ea7\u5151\u6362\uff1a\u964d1\u7ea7"),e=t.conversionCount-c.upgradeCount[0],this.toDays[0].textFlow=(new egret.HtmlTextParser).parser(a.default.level<=80?"\u5927\u4e8e"+(i-1)+"\u7ea7\u624d\u80fd\u5151\u6362":'\u4eca\u5929\u8fd8\u53ef\u5151\u6362<font color="#9de242">'+e+"</font>\u6b21"),this.btns[0].enabled=e>0;var f=t.normalItem,p=r.default.ItemConfig[f],h=s.default.ins().getBagGoodsCountById(0,f),g=o.default.getStoreByItemID(f);this.items[1].data=f,this.btns[1].label=h?"\u7acb\u5373\u4f7f\u7528":"\u8d2d\u4e70",this.btns[1].name=t.normalExp+"",this.priceIcon1.visible=0==h,this.priceIcon1.setPrice(g.price),this.priceIcon1.name=p.name,this.infoTxts[1].textFlow=(new egret.HtmlTextParser).parser('\u589e\u52a0<font color="#9de242">'+t.normalExp+"</font>\u4fee\u4e3a\n\n"+p.name+"\uff1a"+(h?"\u5269\u4f59"+h+"\u4e2a":"")),e=t.normalCount-c.upgradeCount[1],this.toDays[1].textFlow=(new egret.HtmlTextParser).parser('\u4eca\u5929\u8fd8\u53ef\u5151\u6362<font color="#9de242">'+e+"</font>\u6b21"),this.btns[1].enabled=e>0,g.viplv&&d.default.ins().lv<g.viplv?(this.vipLb1.visible=!0,this.vipLb1.text="VIP"+g.viplv+"\u53ef\u8d2d\u4e70"):this.vipLb1.visible=!1,f=t.advanceItem,p=r.default.ItemConfig[f],h=s.default.ins().getBagGoodsCountById(0,f),g=o.default.getStoreByItemID(f),this.items[2].data=f,this.btns[2].label=h?"\u7acb\u5373\u4f7f\u7528":"\u8d2d\u4e70",this.btns[2].name=t.advanceExp+"",this.priceIcon2.visible=0==h,this.priceIcon2.setPrice(o.default.getStoreByItemID(f).price),this.priceIcon2.name=p.name,this.infoTxts[2].textFlow=(new egret.HtmlTextParser).parser('\u589e\u52a0<font color="#cb5ac4">'+t.advanceExp+"</font>\u4fee\u4e3a\n\n"+p.name+"\uff1a"+(h?"\u5269\u4f59"+h+"\u4e2a":"")),e=t.advanceCount-c.upgradeCount[2],this.toDays[2].textFlow=(new egret.HtmlTextParser).parser('\u4eca\u5929\u8fd8\u53ef\u5151\u6362<font color="#9de242">'+e+"</font>\u6b21"),this.btns[2].enabled=e>0,g.viplv&&d.default.ins().lv<g.viplv?(this.vipLb2.visible=!0,this.vipLb2.text="VIP"+g.viplv+"\u53ef\u8d2d\u4e70"):this.vipLb2.visible=!1;for(var y=c.canGet(),v=0;v<3;v++)this["redPoint"+v].visible=y>>v&1,this["redPointRule"+v]&&this["redPointRule"+v]();u=Math.max(a.default.level+1,i),l=r.default.ZhuanShengExpConfig[u],n.default.ins().isSendXW[0]?n.default.ins().isSendXW[0]=!1:n.default.ins().isSendXW[1]?n.default.ins().isSendXW[1]=!1:n.default.ins().isSendXW[2]&&(n.default.ins().isSendXW[2]=!1)},t.prototype.redPointRule0=function(){n.default.ins().exchange||(n.default.ins().exchange=!0)},t.prototype.onTap=function(e){switch(e.target){case this.colorCanvas:case this.closeBtn0:case this.closeBtn:case this.bgClose:f.default.ins().close(this);break;default:var t=this.btns.indexOf(e.target);if(t>-1)if(0==t)n.default.ins().isSendXW[t]=!0,n.default.ins().sendGetXiuWei(t+1);else if("\u7acb\u5373\u4f7f\u7528"==this.btns[t].label)n.default.ins().isSendXW[t]=!0,n.default.ins().sendGetXiuWei(t+1);else{var i=this["priceIcon"+t].getPrice();if(a.default.yb<i)return p.default.ins().showTips("\u5143\u5b9d\u4e0d\u8db3"),void f.default.ins().close(this);if(1==t){var o=r.default.ItemStoreConfig;for(var s in o)if(200009==o[s].itemId)return void this.buyGoodsId(o[s].id)}else if(2==t){o=r.default.ItemStoreConfig;for(var s in o)if(200010==o[s].itemId)return void this.buyGoodsId(o[s].id)}}}},t.prototype.buyGoodsId=function(e){c.default.ins().shopData.checkBuyGoodsId(e)&&f.default.ins().open(h.default,e)}})(e("../../../../core/view/BaseEuiView").default);cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../config/ItemStoreConfig":"ItemStoreConfig","../../../consts/MoneyConst":"MoneyConst","../../../entity/Actor":"Actor","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../activity/model/RewardData":"RewardData","../../bag/UserBag":"UserBag","../../shop/Shop":"Shop","../../shop/view/BuyWin":"BuyWin","../../tips/UserTips":"UserTips","../../vip/UserVip":"UserVip","../UserZs":"UserZs"}],GameApp:[function(e,t,i){"use strict";cc._RF.push(t,"0520duSTplOcI9QDF5wExyg","GameApp"),window.GameSystem=[],function(){var e=cc.loader._assetTables.assets._pathToUuid;for(var t in window.ResPath={},e){var i=t.split("/"),n=i[i.length-1];window.ResPath[n]=t}}(),cc._RF.pop()},{}],GameByteArray:[function(e,t,i){"use strict";cc._RF.push(t,"96254D6ldVJtLhza4zaKSyb","GameByteArray"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./binary"),a=e("../utils/uint64"),o=function(e){function t(){var t=e.call(this)||this;return t.endian=n.Endian.LITTLE_ENDIAN,t}return __extends(t,e),t.prototype.readString=function(){var e=this.readUTF();return this.position+=1,e},t.prototype.readNumber=function(){return+new a.default(this).toString()},t.prototype.writeNumber=function(e){var t=a.default.stringToUint64(e.toString());this.writeInt64(t)},t.prototype.writeInt64=function(e){this.writeUnsignedInt(e._lowUint),this.writeUnsignedInt(e._highUint)},t.prototype.writeString=function(e){this.writeUTF(e),this.writeByte(0)},t.prototype.writeCmd=function(e,t){this.writeByte(e),this.writeByte(t)},t.prototype.readInts=function(e){for(var t=[],i=0;i<e;i++)t.push(this.readInt());return t},t.prototype.writeInts=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i=0,n=e;i<n.length;i++){var a=n[i];this.writeInt(a)}},t}(n.ByteArray);i.default=o,cc._RF.pop()},{"../utils/uint64":"uint64","./binary":"binary"}],GameConfig:[function(e,t,i){"use strict";cc._RF.push(t,"c5ed4NXpBtLW5OGAlAscqTV","GameConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.openID="cehua7",e.password="e10adc3949ba59abbe56e057f20f883e",e.srvId=80,e.srvIp="39.98.55.92",e.srvPort=9001,e.pf="",e.pfid="",e.appid="",e}();i.default=n,cc._RF.pop()},{}],GameGuider:[function(e,t,i){"use strict";cc._RF.push(t,"4de61AZrDtI8pb7CVhtSK5B","GameGuider"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../manager/GlobalConfig"),o=e("./hint/hint"),r=e("./task/UserTask"),s=e("./server/GameServer"),u=e("./artifact/Artifact"),l=e("../ai/RoleAI"),c=e("./fb/UserFb"),d=e("../base/EntityManager"),f=e("../manager/TimerManager"),p=e("./encounter/Encounter"),h=e("./tips/UserTips"),g=e("./bag/UserBag"),y=e("../map/GameMap"),v=e("./gamescene/const/EntityAction"),m=function(){function e(){}return e.taskGuidance=function(t,i){var v;switch(i){case 0:v=a.default.DailyConfig[t];break;case 1:v=r.default.ins().getAchieveConfById(t),o.default.ins().postAchievementBef(v)}switch(v.control){case n.OpenWin:100082==t&&"LimitTaskView"==String(v.controlTarget[0])?r.default.ins().limitTaskEndTime>0&&0!=r.default.ins().limitTaskState&&r.default.ins().limitTaskEndTime>0&&r.default.ins().limitTaskEndTime-Math.floor(s.default.serverTime/1e3)>0?e.guidance(v.controlTarget[0],v.controlTarget[1]):e.guidance("RoleWin",1):e.guidance(v.controlTarget[0],v.controlTarget[1]);break;case n.ChallengeBoss:if(this.challengeBoss(),1==i){var m=v;o.default.ins().postKillBoss(m)}break;case n.ArtifactGuide:u.default.ins().setGuide();break;case n.AtkMonster:l.default.ins().stop();var b=v.controlTarget[0],_=c.default.ins().rPos[b][0].x*y.default.CELL_SIZE,C=c.default.ins().rPos[b][0].y*y.default.CELL_SIZE;this.tempMainRole=d.default.ins().getNoDieRole(),y.default.moveEntity(this.tempMainRole,_,C),f.default.ins().doTimer(500,0,this.guideFun,this);break;case n.AutoPk:c.default.ins().setAutoPk();break;case n.KillDeer:break;case n.GuideFb:if(p.default.ins().isEncounter())return void h.default.ins().showTips("|C:0xf3311e&T:\u6b63\u5728\u6311\u6218\u9644\u8fd1\u7684\u4eba|");if(g.default.ins().getSurplusCount()<g.default.BAG_ENOUGH)return void ViewManager.ins().open(BagFullTipsWin);c.default.ins().sendIntoGuideFb(v.controlTarget[1])}},e.guideFun=function(){this.tempMainRole.action==v.EntityAction.STAND&&(l.default.ins().start(),f.default.ins().remove(this.guideFun,this))},e.guidance=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=-1!=e[1]?e[1]:null;ViewManager.ins().open(e[0],i,e[2])},e.challengeBoss=function(e){g.default.ins().getSurplusCount()<g.default.BAG_ENOUGH?ViewManager.ins().open(BagFullTipsWin):c.default.ins().currentEnergy>=c.default.ins().energy&&(e&&"function"==typeof e&&e(),c.default.ins().autoPk())},e.startTaskEffect=function(){},e.stopTaskEffect=function(){},e}();i.default=m,function(e){e[e.OpenWin=1]="OpenWin",e[e.ChallengeBoss=2]="ChallengeBoss",e[e.ArtifactGuide=3]="ArtifactGuide",e[e.AtkMonster=4]="AtkMonster",e[e.AutoPk=5]="AutoPk",e[e.KillDeer=6]="KillDeer",e[e.GuideFb=7]="GuideFb"}(n=i.GuideType||(i.GuideType={})),cc._RF.pop()},{"../ai/RoleAI":"RoleAI","../base/EntityManager":"EntityManager","../manager/GlobalConfig":"GlobalConfig","../manager/TimerManager":"TimerManager","../map/GameMap":"GameMap","./artifact/Artifact":"Artifact","./bag/UserBag":"UserBag","./encounter/Encounter":"Encounter","./fb/UserFb":"UserFb","./gamescene/const/EntityAction":"EntityAction","./hint/hint":"hint","./server/GameServer":"GameServer","./task/UserTask":"UserTask","./tips/UserTips":"UserTips"}],GameLogic:[function(e,t,i){"use strict";cc._RF.push(t,"89abacp0fdJJaXNBDoZ9Tf9","GameLogic"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../entity/SubRoles"),r=e("../../../core/base/MessageCenter"),s=e("../../map/GameMap"),u=e("../../entity/EntityModel"),l=e("../../entity/CharMonster"),c=e("../../ai/RoleAI"),d=e("../../base/EntityManager"),f=e("../../../core/base/ViewManager"),p=e("./view/GameSceneView"),h=e("../../base/EntityType"),g=e("../../entity/Role"),y=e("../../../core/utils/MathUtils"),v=e("../../../core/base/AttributeType"),m=e("./const/SkillEffType"),b=e("../../entity/CharRole"),_=e("../../manager/GlobalConfig"),C=e("../fb/UserFb"),I=e("./const/ExAttributeType"),T=e("../../entity/Actor"),S=e("../tips/UserTips"),R=e("../../consts/MoneyConst"),B=e("../activity/model/RewardData"),M=e("../boss/UserBoss"),E=e("./const/EntityAction"),D=e("../../../core/net/GameSocket"),A=e("../../rolemgr/RoleMgr"),P=e("../city/CityCC"),w=e("../battle/BattleCC"),L=e("../paoDian/PaoDianCC"),k=e("../boss/GwBoss"),F=e("../rolewin/UserSkill"),G=e("../../../core/utils/DirUtil"),x=e("../../entity/CharModel"),N=e("../guild/GuildWar"),U=e("../mine/MineFight"),O=e("../guild/Guild"),H=e("../../../core/module/guide/GuideUtils"),j=e("../../../core/utils/DisplayUtils"),W=e("../../base/EntityShowMgr"),V=function(e){function t(){var i=e.call(this)||this;i.MONSTER_RADIUS=2,i.MONSTER_LEN=2*i.MONSTER_RADIUS+1,i.currHandle=0,i.currAttackHandle=0,i.rPosindex=[],i.runTime=0,i.guanqiaId=0,i.sysId=a.PackageID.Default,r.default.compile(t),i.regNetMsg(2,i.postSubRoleChange),i.regNetMsg(3,i.postEnterMap),i.regNetMsg(4,i.postCreateOtherEntity),i.regNetMsg(5,i.doGoldChange),i.regNetMsg(8,i.doSubRoleAtt),i.regNetMsg(9,i.postHpChange),i.regNetMsg(10,i.doRemoveEntity),i.regNetMsg(11,i.doMoveEntity),i.regNetMsg(12,i.doStopMoveEntity),i.regNetMsg(13,i.doSyncPos),i.regNetMsg(15,i.postMpChange),i.regNetMsg(17,i.doTips),i.regNetMsg(18,i.doFirstRegister),i.regNetMsg(20,i.doDieNotice),i.regNetMsg(21,i.postGuildChange),i.regNetMsg(22,i.postRename),i.regNetMsg(24,i.postOtherAttChange),i.regNetMsg(25,i.doPaoPao),i.regNetMsg(26,i.doNeiGongChange),i.regNetMsg(27,i.doSubRoleExtAtt),i.regNetMsg(31,i.doFindPath),i.regNetMsg(32,i.doBloodNumShow),i.regNetMsg(34,i.doAddMonsterConfig),i.regNetMsg(35,i.doZeroInit),i.regNetMsg(36,i.postChangeCamp),i.radiusMap=[];for(var n=2*i.MONSTER_RADIUS+1,o=0;o<n;o++)i.radiusMap[o]=[];return i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initLogin=function(){this.sendHeartbeat()},t.prototype.sendNewRole=function(e,t){var i=this.getBytes(2);i.writeByte(e),i.writeByte(t),this.sendToServer(i)},t.prototype.sendHeartbeat=function(){var e=this;setInterval(function(){var t=e.getBytes(255);e.sendToServer(t),console.log("\u5fc3\u8df3")},6e4)},t.prototype.sendGMCommad=function(e){var t=this.getBytes(0);t.writeString(e),this.sendToServer(t)},t.prototype.postSubRoleChange=function(e){o.default.ins().doSubRole(e)},t.prototype.postEnterMap=function(e){s.default.parser(e),c.default.ins().clear(),this.gamescene.map.changeMap()},t.prototype.postCreateOtherEntity=function(e){var t,i=e.readShort();e.readDouble();return e.position-=10,i==h.EntityType.Monster||i==h.EntityType.CollectionMonst?(t=new u.default).parser(e):i==h.EntityType.Role?((t=new g.default).parserBase(e),t.parserOtherRole(e,!0)):i==h.EntityType.LadderPlayer?((t=new g.default).parserBase(e),t.parserOtherRole(e,!1),s.default.fbType==C.default.FB_TYPE_GUIDEBOSS&&(t.masterHandle=t.handle)):i==h.EntityType.DropItem&&((t=new x.default).parserBase(e),t.parserItemData(e)),!!t&&(this.createEntityByModel(t),t)},t.prototype.afterCreateOtherEntity=function(e,t,i){e==h.EntityType.Monster||e==h.EntityType.CollectionMonst?(s.default.fbType==C.default.FB_TYPE_EXP&&(C.default.ins().expMonterCount+=1),s.default.sceneInMine()&&i&&(i.visible=!1)):e==h.EntityType.Role?((N.default.ins().getModel().checkinAppoint()||s.default.fbType==C.default.FB_TYPE_ZHUANSHENGBOSS)&&(t.guildID!=O.default.ins().guildID?N.default.ins().getModel().changecanPlayList(t.masterHandle):N.default.ins().getModel().setMyGuildNum(t.masterHandle)),U.default.ins().isFighting&&i&&(i.visible=!1)):e==h.EntityType.LadderPlayer&&s.default.fbType==C.default.FB_TYPE_GUIDEBOSS&&(C.default.ins().guideBossPlayerId=t.configID,C.default.ins().guideBossPlayerJob=t.job,C.default.ins().guideBossPlayerSex=t.sex,C.default.ins().guideBossPlayerName=t.name,0==C.default.ins().guideBossKill&&M.default.ins().postBelongChange(t.masterHandle))},t.prototype.doGoldChange=function(e){var t=e.readShort();if(1==t){var i=e.readNumber();T.default.ins().postGoldChange(i)}else if(4==t){var n=e.readNumber();T.default.ins().postSoulChange(n)}else if(7==t)T.default.ins().postFeatsChange(e.readNumber());else if(9==t){var a=T.default.runeShatter;T.default.runeShatter=e.readNumber(),T.default.runeShatter-a>0&&S.default.ins().showTips("\u83b7\u5f97|C:0x35e62d&T:\u6218\u7eb9\u7cbe\u534ex"+(T.default.runeShatter-a)+"|"),this.postRuneShatter()}else if(t==R.MoneyConst.piece){var o=T.default.runeExchange;T.default.runeExchange=e.readNumber(),o&&T.default.runeExchange-o>0&&S.default.ins().showTips("|C:0xFFD700&T:\u83b7\u5f97"+(T.default.runeExchange-o)+B.default.getCurrencyName(R.MoneyConst.piece)+"|"),this.postRuneExchange()}else if(11==t){var r=e.readNumber();T.default.ins().postUpdateTogeatter(r,1)}else if(12==t){r=e.readNumber();T.default.ins().postUpdateTogeatter(r,2)}else if(t==R.MoneyConst.weiWang)T.default.ins().postWeiWang(e.readNumber());else if(t==R.MoneyConst.chip)T.default.ins().postChip(e.readNumber());else{var s=e.readNumber();T.default.ins().postYbChange(s)}},t.prototype.postRuneShatter=function(){},t.prototype.postRuneExchange=function(){},t.prototype.postLevelBarChange=function(e){return e},t.prototype.postAdjustMapPos=function(){},t.prototype.doSubRoleAtt=function(e){o.default.ins().doSubRoleAtt(e)},t.prototype.postHpChange=function(e){var t=e.readDouble(),i=e.readDouble(),n=d.default.ins().getEntityByHandle(t);if(!n)return!1;var a=n.infoModel,o=a.getAtt(v.AttributeType.atHp);return a.setAtt(v.AttributeType.atHp,i),n.updateBlood(),i<=0&&c.default.ins().checkPlayDieSound(n),[n,i,o]},t.prototype.doNeiGongChange=function(e){var t=e.readDouble(),i=e.readDouble(),n=d.default.ins().getEntityByHandle(t);n&&n.infoModel&&(n.infoModel.setAtt(v.AttributeType.cruNeiGong,i),n.updateNeiGong())},t.prototype.postEntityHpChange=function(e,t,i,n){return[e,t,i,n]},t.prototype.doRemoveEntity=function(e){var i=e.readDouble(),n=d.default.ins().getEntityByHandle(i);if(n){if(n instanceof b.default)n.infoModel&&n.infoModel.type==h.EntityType.LadderPlayer?s.default.fbType==C.default.FB_TYPE_GUIDEBOSS?0==C.default.ins().guideBossKill?(this.removeEntity(i),M.default.ins().postBelongChange(T.default.handle,i,n.infoModel.name),C.default.ins().guideBossKill+=1):(d.default.ins().removeByHandle(i,!1,!0),n.onDead(function(){n.deadDelay()}),H.default.ins().clickOut(),C.default.ins().guideBossKill+=1,M.default.ins().weixieList.length=0,M.default.ins().postHasAttackChange(0)):this.removeEntity(i):d.default.ins().removeByHandle(i);else if(n instanceof CharItem2)d.default.ins().removeByHandle(i);else{if(this.removeEntity(i),n&&n.team!=c.Team.My){var a=!1,o=d.default.ins().screeningTargetByPos(n,!0);if(o&&0!=o.length){if(s.default.fbType==C.default.FB_TYPE_GUILD_WAR)(!(l=d.default.ins().getEntityByHandle(t.ins().currAttackHandle))||l.infoModel.getAtt(v.AttributeType.atHp)<=0)&&(a=!0)}else a=!0;if(a)for(var r=0,u=d.default.ins().getEntityByTeam(c.Team.My);r<u.length;r++){var l;(l=u[r]).action!=E.EntityAction.RUN&&l.playAction(E.EntityAction.STAND)}if((s.default.fbType==C.default.FB_TYPE_GUANQIABOSS||s.default.fbType==C.default.FB_TYPE_TIAOZHAN)&&n.parent){var f=n.parent.localToGlobal(n.x,n.y);C.default.ins().postExpFly(f,50)}}s.default.fbType==C.default.FB_TYPE_GUIDEBOSS&&(M.default.ins().attHandle=0,C.default.ins().guideBossKill&&(M.default.ins().winner=T.default.myName),H.default.ins().clickOut(),t.ins().postChangeTarget(0))}this.postRemoveEntity(i,n)}},t.prototype.postRemoveEntity=function(e,t){return[e,t]},t.prototype.removeEntity=function(e){var t=d.default.ins().getEntityByHandle(e);t&&t.infoModel.getAtt(v.AttributeType.atHp)<=0?(d.default.ins().removeByHandle(e,!1,!0),t.playAction(E.EntityAction.HIT),t.stopMove(),t.onDead(function(){t.deadDelay(),j.default.removeFromParent(t)})):d.default.ins().removeByHandle(e,!0,!0)},t.prototype.doMoveEntity=function(e){var t=e.readDouble(),i=d.default.ins().getEntityByHandle(t);if(i){var n=e.readInt(),a=e.readInt();i.x==n&&i.y==a||s.default.moveEntity(i,n,a,!0)}},t.prototype.doStopMoveEntity=function(e){var i=e.readDouble(),n=d.default.ins().getEntityByHandle(i);n&&(n.stopMove(),n.infoModel.getAtt(v.AttributeType.atHp)>0&&n.playAction(E.EntityAction.STAND),n.x=e.readInt(),n.y=e.readInt(),n==d.default.ins().getNoDieRole()&&t.ins().postMoveCamera())},t.prototype.doSyncPos=function(e){var t=this,i=e.readDouble(),n=d.default.ins().getEntityByHandle(i),a=e.readShort();if(n){n.stopMove();switch(a){case 0:n.playAction(E.EntityAction.STAND),n.x=e.readInt(),n.y=e.readInt(),n.isMy&&egret.callLater(function(){t.postMoveCamera()},this);break;case 1:n.playAction(E.EntityAction.RUN),egret.Tween.get(n.moveTweenObj).to({x:e.readInt(),y:e.readInt()},e.readInt()).call(function(){n.playAction(E.EntityAction.STAND)});break;case 2:n.playAction(E.EntityAction.STAND),egret.Tween.get(n.moveTweenObj).to({x:e.readInt(),y:e.readInt()},e.readInt())}}},t.prototype.postMoveCamera=function(){var e=d.default.ins().getNoDieRole();return!!e&&[e.x,e.y,s.default.mapID,s.default.fubenID]},t.prototype.sendSyncServerTime=function(){this.sendBaseProto(14)},t.prototype.postMpChange=function(e){var t,i=e.readDouble(),n=e.readDouble(),a=d.default.ins().getEntityByHandle(i);return a&&(t=a.infoModel).setAtt(v.AttributeType.atMp,n),t},t.prototype.postExpMc=function(e){return e},t.prototype.doTips=function(e){var t=_.default.ServerTips[e.readInt()].tips;S.default.ins().showTips(t)},t.prototype.doFirstRegister=function(e){f.default.ins().open(WelcomeWin)},t.prototype.doDieNotice=function(e){},t.prototype.postGuildChange=function(e){return[e.readInt(),e.readString()]},t.prototype.postOtherAttChange=function(e){var t=d.default.ins().getEntityByHandle(e.readDouble());if(!t||!t.infoModel)return!1;for(var i=e.readShort(),n=0;n<i;n++)t.infoModel.setAtt(e.readInt(),e.readDouble());return t},t.prototype.doPaoPao=function(e){var t=e.readDouble(),i=e.readInt(),n=d.default.ins().getEntityByHandle(t);n&&n.addPaoPao(i)},t.prototype.doSubRoleExtAtt=function(e){o.default.ins().doSubRoleExtAtt(e)},t.prototype.sendRename=function(e){var t=this.getBytes(22);t.writeString(e),this.sendToServer(t)},t.prototype.postRename=function(e){var t=e.readByte();0==t?(D.default.ins().close(),f.default.ins().close(RenameWin),alert("\u6539\u540d\u6210\u529f\uff0c\u91cd\u65b0\u767b\u5f55\u5373\u53ef\u751f\u6548\uff01"),location.reload()):A.default.ins().showErrorTips(t)},t.prototype.postChangeAttrPoint=function(e){var t=this.getBytes(25);t.writeDouble(e),this.sendToServer(t),N.default.ins().getModel().clickTime=1},t.prototype.doFindPath=function(e){var t=e.readDouble(),i=Math.floor(e.readInt()/s.default.CELL_SIZE),n=Math.floor(e.readInt()/s.default.CELL_SIZE),a=e.readInt(),o=e.readInt(),r=Math.floor(a/s.default.CELL_SIZE),u=Math.floor(o/s.default.CELL_SIZE),l=s.default.getPatch(i,n,r,u);this.sendFindPathToServer(t,l)},t.prototype.sendFindPathToServer=function(e,t,i){void 0===i&&(i=!0);var n=t?t.length:0,a=this.getBytes(31);a.writeDouble(e),a.writeInt(n);for(var o=0;o<n;o++)0!=o||i?(a.writeInt(t[o].nX*s.default.CELL_SIZE+(s.default.CELL_SIZE>>1)),a.writeInt(t[o].nY*s.default.CELL_SIZE+(s.default.CELL_SIZE>>1))):(a.writeInt(t[o].nX),a.writeInt(t[o].nY));this.sendToServer(a)},t.prototype.doBloodNumShow=function(e){var i=e.readDouble(),n=e.readDouble(),a=-1*Math.ceil(e.readDouble()),o=e.readUnsignedInt(),r=d.default.ins().getEntityByHandle(n);if(r){var s=d.default.ins().getEntityByHandle(i);s&&(s.team==c.Team.My&&s.infoModel.type==h.EntityType.Monster&&a<0||(s instanceof b.default||s.shakeIt(),t.ins().postEntityHpChange(s,r,o,a)))}},t.prototype.doChangeTarget=function(e){var i=e.readDouble(),n=e.readDouble();this.postAllAtkTarget(i,n);var a=d.default.ins().getEntityByHandle(i);if(a&&a.infoModel&&a.infoModel.masterHandle==T.default.handle&&this.postAtkTarget(n),P.default.ins().isCity||w.default.ins().isBattle()||L.default.ins().isPaoDian||k.default.ins().isGwBoss||k.default.ins().isGwTopBoss||KFBossSys.ins().isKFBossBattle||DevildomSys.ins().isDevildomBattle||KfArenaSys.ins().isKFArena)TargetListCC.ins().postTargetList(i,n);else if(s.default.fbType!=C.default.FB_TYPE_GUILD_WAR&&s.default.fbType!=C.default.FB_TYPE_ZHUANSHENGBOSS&&s.default.fbType!=C.default.FB_TYPE_ALLHUMENBOSS&&s.default.fbType!=C.default.FB_TYPE_HOMEBOSS&&s.default.fbType!=C.default.FB_TYPE_GUIDEBOSS||0==n)a&&a==d.default.ins().getNoDieRole()&&(t.ins().currAttackHandle=n);else{var o=d.default.ins().getEntityByHandle(n);if(o&&o.infoModel&&o.infoModel.masterHandle>0){var r=d.default.ins().getEntityByHandle(i);if(r&&r.infoModel&&r.infoModel.masterHandle==T.default.handle&&this.postChangeTarget(o.infoModel.masterHandle),r&&r.infoModel){var u=d.default.ins().getMasterList(r.infoModel.masterHandle);if(o.infoModel.masterHandle==T.default.handle&&u){for(var l in u)u[l]instanceof b.default&&u[l].setNameTxtColor(ColorUtil.ROLENAME_COLOR_YELLOW);if(s.default.fbType==C.default.FB_TYPE_GUIDEBOSS){if(M.default.ins().weixieList[0]!=r.infoModel.masterHandle){var c=r.infoModel.name;if(r.infoModel.type==h.EntityType.LadderPlayer){var f=c.split("\n");c=f[1]?f[1]:f[0],c=StringUtils.replaceStr(c,"0xffffff",ColorUtil.ROLENAME_COLOR_GREEN+"")}C.default.ins().guideBossKill&&S.default.ins().showCenterTips("\u53d7\u5230|C:0x35e62d&T:"+c+"|\u73a9\u5bb6\u7684\u653b\u51fb\uff0c\u70b9\u51fb\u53f3\u8fb9\u5934\u50cf\u8fdb\u884c\u53cd\u51fb")}M.default.ins().weixieList.length=0,M.default.ins().changeWeiXieList(r.infoModel.masterHandle),M.default.ins().postHasAttackChange(0)}}}}else{var p=d.default.ins().getEntityByHandle(i);p&&p.infoModel&&p.infoModel.masterHandle==T.default.handle&&(o&&o.infoModel?this.postChangeTarget(o.infoModel.masterHandle):this.postChangeTarget(0))}}},t.prototype.postChangeTarget=function(e){t.ins().currAttackHandle=e},t.prototype.postAtkTarget=function(e){this.currHandle=e},t.prototype.postAllAtkTarget=function(e,t){return[e,t]},t.prototype.startPkBoss=function(){C.default.ins().autoPk()},t.prototype.createEntityByModel=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=d.default.ins().createEntity(e,t);return n&&this.addEntity(n),n},t.prototype.addEntity=function(e){e instanceof b.default?(e.showBlood(e.isMy||e.team==c.Team.WillEntity),e.showNeigong(e.isMy),e.dir=e.x>=s.default.MAX_WIDTH>>1?6:2):e instanceof l.default&&_.default.MonstersConfig[e.infoModel.configID]&&3==_.default.MonstersConfig[e.infoModel.configID].type&&(e.dir=e.x>=s.default.MAX_WIDTH>>1?6:2),this.gamescene.map.addEntity(e)},t.prototype.playSkillEff=function(e,t,i,n){void 0===n&&(n=null);e.wordEff&&t.team==c.Team.My&&(F.default.ins().postShowSkillWord(e.wordEff+""),F.default.ins().hejiLevel>0&&F.default.ins().isHejiSkill(e.configID)&&(F.default.ins().hejiEnable=!1,F.default.ins().setHejiCD(-1),F.default.ins().postHejiRemove())),(1==i.length&&t!=i[0]||i.length>1)&&(t.dir=G.default.get8DirBy2Point(t,i[0])),e&&e.actionType&&t.playAction(e.actionType,t instanceof b.default?null:function(){t.action!=E.EntityAction.DIE&&t.playAction(E.EntityAction.STAND)});var a=Math.floor(e.configID/1e3);if(!([14].indexOf(a)<0&&!W.default.ins().checkShowSkillEffect()&&t.infoModel.masterHandle)||t.isMy||i[0].isMy)return e.effectId?(t.infoModel.type==h.EntityType.Monster&&-1!=_.default.FlameStamp.skillId.indexOf(e.configID)&&t.usedLyMarkSkill(),t.getIsShowBody(),n&&n(),0):(n&&n(),0)},t.prototype.addOutEff=function(e,t){var i=new TransferModel;i.configID=0,i.x=e,i.y=t,i.type=h.EntityType.Transfer,d.default.ins().createEntity(i)},t.prototype.removeOutEff=function(){d.default.ins().removeTransferById(0)},Object.defineProperty(t.prototype,"gamescene",{get:function(){return f.default.ins().getView(p.default)},enumerable:!0,configurable:!0}),t.prototype.createGuanqiaMonster=function(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=!1),this.guanqiaId=C.default.ins().guanqiaID,s.default.sceneInMain()){var i=Math.ceil(C.default.ins().waveMonsterCount*Math.random()),n=C.default.ins().waveMonsterId.length,a=d.default.ins().getEntityByMonsterId(C.default.ins().eliteMonsterId).length,o=d.default.ins().getTeamCount(c.Team.Monster)-a;if(!(o>3)||t){i=10-o;for(var r=0;r<n;r++){var u=e?C.default.ins().rPos[r].length:1;u>3&&(u=3),i=Math.ceil(i/u);for(var l=t,f=0;f<u;f++){this.runTime=0,(!this.rPosindex[r]||this.rPosindex[r]>=C.default.ins().rPos[r].length)&&(this.rPosindex[r]=0);var p=this.rPosindex[r],h=[],g=C.default.ins().rPos[r][p],y=g.x-this.MONSTER_RADIUS,v=g.y-this.MONSTER_RADIUS;this.writeMap(h,y,v,i);for(var m=0;m<this.MONSTER_LEN;m++)for(var b=0;b<this.MONSTER_LEN;b++){if(h[m])if(h[m][b]){var I=void 0;if(t&&l&&a<5)(I=C.default.ins().createMonster(C.default.ins().eliteMonsterId)).isElite=!0,l=!1,a+=1;else{var T=C.default.ins().waveMonsterId[r];I=C.default.ins().createMonster(T)}I.x=(y+m)*s.default.CELL_SIZE+(s.default.CELL_SIZE>>1),I.y=(v+b)*s.default.CELL_SIZE+(s.default.CELL_SIZE>>1);var S=isNaN(C.default.ins().wanderpercent)?5e3:C.default.ins().wanderpercent;I.isWander=1e4*Math.random()<S;var R=this.createEntityByModel(I);R.AI_STATE=c.AI_State.Patrol,I.effect&&R.addHalo(_.default.EffectConfig[I.effect].fileName)}}this.rPosindex[r]++}}s.default.sceneInMain()&&c.default.ins().start()}}},t.prototype.writeMap=function(e,t,i,n){if(this.runTime++,this.runTime>200)debug.log("\u5173\u5361"+this.guanqiaId+"\u7684\u5237\u602a\u70b9\u53ef\u80fd\u5728\u4e0d\u53ef\u884c\u533a\u57df\u5185,\u8bf7\u7b56\u5212\u68c0\u67e5");else{var a=y.default.limitInteger(0,this.MONSTER_LEN-1),o=y.default.limitInteger(0,this.MONSTER_LEN-1);if(e[a]||(e[a]=[]),e[a][o])this.writeMap(e,t,i,n);else s.default.checkWalkable(t+a,i+o)&&(e[a][o]=1,n--),n>0&&this.writeMap(e,t,i,n)}},t.prototype.postHookStateChange=function(e){return this.hookState=e,e},t.prototype.postMoveEntity=function(e,t,i){return void 0===i&&(i=!0),[e,t,i]},t.calculateRealAttribute=function(e,t,i,n){void 0===n&&(n={});var a,o=e.infoModel.getAtt(t),r=e.buffList;for(var s in r){a=r[s];var u=d.default.ins().getRootMasterHandle(i.infoModel.handle);(a.effConfig.type==m.SkillEffType.AdditionalAttributes||a.effConfig.type==m.SkillEffType.HostAddAttributes&&a.hostsHandle&&a.hostsHandle.indexOf(u)>=0)&&a.effConfig.args.d==t&&(a.multRate?o+=a.value*a.multRate:o+=a.value)}return o+(n[t]?n[t]:0)},t.triggerAttr=function(e,t,i){void 0===i&&(i={});var n=e.infoModel.attributeData[t]||0;if((n+=i[t]?i[t]:0)&&Math.random()<n/1e4)return!0;return!1},t.triggerExAttr=function(e,t){var i=e.infoModel.attributeExData[t];if(i&&Math.random()<i/1e4)return!0;return!1},t.triggerCrit=function(e,t,i){void 0===i&&(i=0);var n=e.infoModel.getAtt(v.AttributeType.atCrit);if(e.buffList[60003]){var a=e.buffList[60003].effConfig;n+=Math.floor(a.args.c/1e4*n)}var o=n-t.infoModel.getAtt(v.AttributeType.atTough)+i;if(o>0&&Math.random()<o/1e4)return!0;return!1},t.triggerMiss=function(e,t){var i=e.infoModel.getExAtt(I.ExAttributeType.eatHit),n=t.infoModel.getExAtt(I.ExAttributeType.eatMiss),a=Math.min(n-i,4e3);if(a>0&&Math.random()<a/1e4)return!0;return!1},t.triggerValue=function(e){if(e&&Math.random()<e/1e4)return!0;return!1},t.prototype.postViewOpen=function(e){return e},t.prototype.doAddMonsterConfig=function(e){var t=JSON.parse(e.readString());for(var i in t)_.default.MonstersConfig[i]=t[i]},t.prototype.doZeroInit=function(e){GameApp.ins().postZeroInit()},t.prototype.postChangeCamp=function(e){var t=e.readDouble(),i=d.default.ins().getEntityByHandle(t);i&&i.infoModel&&(i.infoModel.camp=e.readInt(),i.infoModel.masterHandle==T.default.handle&&(w.default.ins().camp=i.infoModel.camp,w.default.ins().postEnterSuccess()),i.setCharName(i.infoModel.guildAndName),i.updateNameColor())},t.skyBallCheck=function(e){if(this.triggerExAttr(e,I.ExAttributeType.eatAllCrit)){var t=void 0;return(t=ObjectPool.pop("EntityBuff")).effConfig=_.default.EffectsConfig[SkillConst.EFF_SKY_BALL],t.addTime=egret.getTimer(),t.endTime=t.addTime+e.infoModel.getExAtt(I.ExAttributeType.eatAllCritTime),e.addBuff(t),!0}return!1},t.prototype.postFlyItem=function(e){return e},t.prototype.postFlyItemEx=function(e){return e},t.prototype.stopAI=function(){this.sendBaseProto(33)},t.prototype.sendGetOtherAttr=function(e){var t=this.getBytes(34);t.writeShort(e.length);for(var i=0;i<e.length;i++)t.writeDouble(e[i]);this.sendToServer(t)},t.HOOK_STATE_HOOK=0,t.HOOK_STATE_FIND_ENMENY=1,t}(n.default);i.default=V,window.GameSystem.push(V.ins.bind(V)),cc._RF.pop()},{"../../../core/base/AttributeType":"AttributeType","../../../core/base/MessageCenter":"MessageCenter","../../../core/base/ViewManager":"ViewManager","../../../core/module/guide/GuideUtils":"GuideUtils","../../../core/net/GameSocket":"GameSocket","../../../core/net/PackageID":"PackageID","../../../core/utils/DirUtil":"DirUtil","../../../core/utils/DisplayUtils":"DisplayUtils","../../../core/utils/MathUtils":"MathUtils","../../ai/RoleAI":"RoleAI","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../base/EntityShowMgr":"EntityShowMgr","../../base/EntityType":"EntityType","../../consts/MoneyConst":"MoneyConst","../../entity/Actor":"Actor","../../entity/CharModel":"CharModel","../../entity/CharMonster":"CharMonster","../../entity/CharRole":"CharRole","../../entity/EntityModel":"EntityModel","../../entity/Role":"Role","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../../map/GameMap":"GameMap","../../rolemgr/RoleMgr":"RoleMgr","../activity/model/RewardData":"RewardData","../battle/BattleCC":"BattleCC","../boss/GwBoss":"GwBoss","../boss/UserBoss":"UserBoss","../city/CityCC":"CityCC","../fb/UserFb":"UserFb","../guild/Guild":"Guild","../guild/GuildWar":"GuildWar","../mine/MineFight":"MineFight","../paoDian/PaoDianCC":"PaoDianCC","../rolewin/UserSkill":"UserSkill","../tips/UserTips":"UserTips","./const/EntityAction":"EntityAction","./const/ExAttributeType":"ExAttributeType","./const/SkillEffType":"SkillEffType","./view/GameSceneView":"GameSceneView"}],GameMap:[function(e,t,i){"use strict";cc._RF.push(t,"1423fMtKcJFPqwxPb8m33Lz","GameMap"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../module/gamescene/GameLogic"),a=e("../../core/astar/MapGrid"),o=e("../../core/astar/AStar"),r=e("../manager/GlobalConfig"),s=e("../../core/astar/AStarNode"),u=e("../../core/utils/DirUtil"),l=e("../../core/utils/MathUtils"),c=e("../../core/astar/BresenhamLine"),d=e("../module/tips/UserTips"),f=e("../entity/EntityFilterUtil"),p=e("../base/EntityManager"),h=e("../module/setting/SysSetting"),g=e("../manager/TimerManager"),y=e("../module/gamescene/const/EntityAction"),v=e("../entity/SubRoles"),m=function(){function e(){}return e.init=function(e){this.grid=this.grid||new a.default,this.aStar=this.aStar||new o.default,this.mapZip=e},e.update=function(){},e.moveEntity=function(t,i,a,o){void 0===o&&(o=!1);var r,l=e.CELL_SIZE,c=Math.floor(t.x/l),d=Math.floor(t.y/l),f=Math.floor(i/l),p=Math.floor(a/l);if(o)r=[new s.default(i,a,u.default.get8DirBy2Point({x:t.x,y:t.y},{x:i,y:a}))];else if(c==f&&d==p)r=[new s.default(f,p,u.default.get8DirBy2Point({x:t.x,y:t.y},{x:i,y:a}))];else if(!(r=this.aStar.getPatch(c,d,f,p)))return;n.default.ins().postMoveEntity(t,r,!o)},e.getPatch=function(e,t,i,n){return this.aStar.getPatch(e,t,i,n)},e.myMoveTo=function(e,t,i,n){for(var a,o=v.default.ins().subRolesLen,r=0;r<o;r++)(a=p.default.ins().getMainRole(r))&&this.moveEntity(a,e,t);var s=function(){for(var r=!0,u=0;u<o;u++)(a=p.default.ins().getMainRole(u))&&a.action==y.EntityAction.RUN&&(l.default.getDistance(a.x,a.y,e,t)<100&&(a.stopMove(),a.playAction(y.EntityAction.STAND)),r=!1);r&&(g.default.ins().remove(s,this),i&&i.call(n))};g.default.ins().doTimer(500,0,s,this)},e.moveTo=function(t,i){var a=e.CELL_SIZE,o=Math.floor(t/a),r=Math.floor(i/a);if(h.default.ins().setValue("mapClickTx",o),h.default.ins().setValue("mapClickTy",r),!this.checkWalkable(o,r))return!1;var s=p.default.ins().getNoDieRole();if(!s)return!1;if(s.hasFilter(f.EntityFilter.hard))return d.default.ins().showTips("\u88ab\u9ebb\u75f9\uff0c\u65e0\u6cd5\u79fb\u52a8"),!1;var u=Math.floor(s.x/a),l=Math.floor(s.y/a),c=this.aStar.getPatch(u,l,o,r);if(!c||0==c.length)return!1;var g=c[0];return g.nX=t,g.nY=i,n.default.ins().sendFindPathToServer(s.infoModel.handle,c,!1),!0},e.checkWalkable=function(e,t){var i=!1,n=this.grid.getNode(e,t);return n?i=n.walkable:debug.log("\u5730\u56fe:"+this.mapID+"\u526f\u672c:"+this._fubenID+"\u5750\u6807:"+e+","+t+"\u51fa\u73b0\u95ee\u9898!"),i},e.checkAlpha=function(e,t){var i=!1,n=this.grid.getNode(e,t);return n?i=n.hidden:debug.log("\u5730\u56fe:"+this.mapID+"\u526f\u672c:"+this._fubenID+"\u5750\u6807:"+e+","+t+"\u51fa\u73b0\u95ee\u9898!"),i},e.parser=function(t){this.lastFbId=this.fubenID,this.fubenID=t.readInt(),this.mapID=t.readInt(),this.mapX=t.readShort(),this.mapY=t.readShort(),this.lastFbTyp=this.fbType,this.fbType=t.readByte(),this.fbName=t.readString(),this.fbDesc=t.readString();var i=this.getFileName(),n=this.mapZip[i];this.CELL_SIZE=n.title_wh,this.MAX_HEIGHT=n.pixHeight,this.MAX_WIDTH=n.pixWidth,this.COL=n.maxX,this.ROW=n.maxY,this.grid.initMapInfo(n,e.getTurn()),this.aStar.initFromMap(this.grid),this.SafetyZone={};for(var a=r.default.ScenesConfig[this.mapID],o=0;a.area&&o<a.area.length;o++)for(var s=a.area[o],u=s.attr,l=0;l<u.length;l++)switch(u[l].type){case 0:this.safetyCalculate(s)}},e.safetyCalculate=function(t){for(var i=t.grids,n=Number.MAX_VALUE,a=Number.MAX_VALUE,o=Number.MIN_VALUE,r=Number.MIN_VALUE,s=!1,u=0;u<i.length;u++){for(var l=i[u],d=u+1==i.length?i[0]:i[u+1],f=c.default.tileLine(l.x,l.y,d.x,d.y),p=0;p<f.length;p+=2){var h=f[p],g=f[p+1];this.SafetyZone[g*e.CELL_SIZE+h]={x:h,y:g},s=!0}n=Math.min(l.x,n),o=Math.max(l.x,o),a=Math.min(l.y,a),r=Math.max(l.y,r)}if(s)for(u=a;u<=r;u++){for(var y=void 0,v=void 0,m=n;m<=o;m++)if(this.SafetyZone[u*e.CELL_SIZE+m]){y=m;break}for(m=o;m>=n;m--)if(this.SafetyZone[u*e.CELL_SIZE+m]){v=m;break}if(!isNaN(y)&&!isNaN(v))for(m=y+1;m<=v;m++)this.SafetyZone[u*e.CELL_SIZE+m]={x:u,y:m}}},e.checkSafety=function(t){return!!this.SafetyZone[t.y*e.CELL_SIZE+t.x]},Object.defineProperty(e,"fubenID",{get:function(){return this._fubenID},set:function(e){this._fubenID=e,e>0&&n.default.ins().postHookStateChange(n.default.HOOK_STATE_HOOK)},enumerable:!0,configurable:!0}),e.sceneInMain=function(){return 0==e.fbType&&0==e.fubenID},e.sceneInMine=function(){return 0==e.fbType&&0!=e.fubenID},e.canStartAI=function(){return 0==e.fbType},e.getFileName=function(){return r.default.ScenesConfig[this.mapID].mapfilename},e.getTurn=function(){return r.default.ScenesConfig[this.mapID].turn},e.autoPunch=function(){return 1==r.default.ScenesConfig[this.mapID].autoPunch},e.getRectangle=function(t,i,n){var a=t.x+(i-.5)*e.CELL_SIZE,o=t.y+(n-.5)*e.CELL_SIZE;return cc.rect(a,o,e.CELL_SIZE,e.CELL_SIZE)},e.getIncludeElement=function(t,i,n){var a=[];for(var o in i){var r=e.getRectangle(t,i[o].x,i[o].y);for(var s in n){var u=n[s];u.x>=r.x&&u.y>=r.y&&u.x<r.x+r.width&&u.y<r.y+r.height&&a.push(u)}}return a},e.getPoint=function(e,t,i){var n=Math.floor(e/t)-Math.floor(i/2),a=Math.floor(e%t)-Math.floor(t/2);return cc.v2(a,n)},e.getTargetIndex=function(t,i,n,a){var o=i.x-t.x+e.CELL_SIZE*(n/2),r=i.y-t.y+e.CELL_SIZE*(a/2),s=Math.floor(o/e.CELL_SIZE);return n*Math.floor(r/e.CELL_SIZE)+s},e.checkWalkableByPixel=function(t,i){var n=Math.floor(t/e.CELL_SIZE),a=Math.floor(i/e.CELL_SIZE);return e.checkWalkable(n,a)},e.getPosRange=function(t,i,n){var a=l.default.limitInteger(-n,+n),o=l.default.limitInteger(-n,+n);+a!=+n&&(o=Math.random()<.5?-n:n);for(var r=0,s=a,u=o;;){if(e.checkWalkable(t+s,i+u))return[t+s,i+u];if(s==n&&u<n?u+=1:u==n&&s>-n?s-=1:s==-n&&u>-n?u-=1:u==-n&&s<n&&(s+=1),s==a&&u==o&&(a==n&&(s=a=n+1),a==-n&&(s=a=-n-1),o==n&&(u=o=n+1),o==-n&&(u=o=-n-1),n+=1),(r+=1)>100)break}return[t,i]},e.getPosRangeByDir=function(t,i,n,a){var o=t,r=i;return(n>=0&&n<=1||7==n)&&(r-=a),n>=3&&n<=5&&(r+=a),n>=1&&n<=3&&(o+=a),n>=5&&n<=7&&(o-=a),[o,r,e.checkWalkable(o,r)]},e.getPosRangeRandom=function(t,i,n,a){void 0===a&&(a=1);var o=e.point2Grip(t),r=e.point2Grip(i),s=[n],u=Math.random();u>.66?(n=n-1<0?7:n-1,s.unshift(n),u>.8?s.push((n+2)%8):s.splice(1,0,(n+2)%8)):u>.33&&(n=n+1>7?0:n+1,s.unshift(n),u>.5?s.push((n-2+8)%8):s.splice(1,0,(n-2+8)%8));for(var l,c=!1,d=0;d<s.length;d++)if((l=e.getPosRangeByDir(o,r,s[d],a))[2]){c=!0;break}return c||(l=e.getPosRange(o,r,a)),l},e.point2Grip=function(t){return Math.floor(t/e.CELL_SIZE)},e.grip2Point=function(t){return t*e.CELL_SIZE+(e.CELL_SIZE>>1)},e.fbType=0,e.lastFbTyp=0,e.lastFbId=0,e}();i.default=m,cc._RF.pop()},{"../../core/astar/AStar":"AStar","../../core/astar/AStarNode":"AStarNode","../../core/astar/BresenhamLine":"BresenhamLine","../../core/astar/MapGrid":"MapGrid","../../core/utils/DirUtil":"DirUtil","../../core/utils/MathUtils":"MathUtils","../base/EntityManager":"EntityManager","../entity/EntityFilterUtil":"EntityFilterUtil","../entity/SubRoles":"SubRoles","../manager/GlobalConfig":"GlobalConfig","../manager/TimerManager":"TimerManager","../module/gamescene/GameLogic":"GameLogic","../module/gamescene/const/EntityAction":"EntityAction","../module/setting/SysSetting":"SysSetting","../module/tips/UserTips":"UserTips"}],GameSceneCtr:[function(e,t,i){"use strict";cc._RF.push(t,"47218tOgrxEBJCUAtpXhUMV","GameSceneCtr"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/BaseClass"),a=e("../../../MostEntityCtroller"),o=e("../../../core/utils/ArrayUtil"),r=e("../../../core/utils/MathUtils"),s=e("../../../RoleEntityCtroller"),u=e("./view/GameSceneView"),l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.entityList=[],t.dightMap=[{e:0,p:cc.v2(-291.957,247.492)},{e:0,p:cc.v2(-174.975,247.492)},{e:0,p:cc.v2(-57.975,247.492)},{e:0,p:cc.v2(59.025,247.492)},{e:0,p:cc.v2(176.025,247.492)},{e:0,p:cc.v2(293.025,247.492)},{e:0,p:cc.v2(-291.957,158.384)},{e:0,p:cc.v2(-174.975,158.384)},{e:0,p:cc.v2(-57.975,158.384)},{e:0,p:cc.v2(59.025,158.384)},{e:0,p:cc.v2(176.025,158.384)},{e:0,p:cc.v2(293.025,158.384)},{e:0,p:cc.v2(-291.957,69.276)},{e:0,p:cc.v2(-174.975,69.276)},{e:0,p:cc.v2(-57.975,69.276)},{e:0,p:cc.v2(59.025,69.276)},{e:0,p:cc.v2(176.025,69.276)},{e:0,p:cc.v2(293.025,69.276)},{e:0,p:cc.v2(-291.957,-19.932)},{e:0,p:cc.v2(-174.975,-19.932)},{e:0,p:cc.v2(-57.975,-19.932)},{e:0,p:cc.v2(59.025,-19.932)},{e:0,p:cc.v2(176.025,-19.932)},{e:0,p:cc.v2(293.025,-19.932)},{e:0,p:cc.v2(-291.957,-108.74)},{e:0,p:cc.v2(-174.975,-108.74)},{e:0,p:cc.v2(-57.975,-108.74)},{e:0,p:cc.v2(59.025,-108.74)},{e:0,p:cc.v2(176.025,-108.74)},{e:0,p:cc.v2(293.025,-108.74)},{e:0,p:cc.v2(-291.957,-197.448)},{e:0,p:cc.v2(-174.975,-197.448)},{e:0,p:cc.v2(-57.975,-197.448)},{e:0,p:cc.v2(59.025,-197.448)},{e:0,p:cc.v2(176.025,-197.448)},{e:0,p:cc.v2(293.025,-197.448)}],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.creatRole=function(e,t){var i=cc.instantiate(u.default.inst.roleEntity);i.parent=u.default.inst.entityRoot,i.getComponent(s.default).initData(e,t);var n=this.creatRandpos();i.position=n.p;var a=this.dightMap.indexOf(n);this.dightMap[a].e=2,this.entityList.push(i),i.selfPos=a},t.prototype.againCreatMost=function(e,t){if(!(this.entityList.length>=13)){var i=cc.instantiate(u.default.inst.monstEntity);i.parent=u.default.inst.entityRoot,i.getComponent(a.default).initData(e,t);var n=this.creatRandpos();i.position=n.p;var o=this.dightMap.indexOf(n);this.dightMap[o].e=1,this.entityList.push(i),i.selfPos=o}},t.prototype.creatRandpos=function(){var e=this.dightMap.slice(0);e=o.ArrayUtil.shuffle(e);for(var t=0;t<e.length;)e[t].e>0&&(e.splice(t,1),t--),t++;return e[r.default.limitInteger(0,e.length-1)]},t}(n.default);i.default=l,cc._RF.pop()},{"../../../MostEntityCtroller":"MostEntityCtroller","../../../RoleEntityCtroller":"RoleEntityCtroller","../../../core/base/BaseClass":"BaseClass","../../../core/utils/ArrayUtil":"ArrayUtil","../../../core/utils/MathUtils":"MathUtils","./view/GameSceneView":"GameSceneView"}],GameSceneView:[function(e,t,i){"use strict";cc._RF.push(t,"424bcbtPRROkYMuBnBtvPUQ","GameSceneView"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../map/MapView"),r=e("../GameLogic"),s=e("../../../manager/GlobalConfig"),u=e("../../../map/GameMap"),l=e("../../fb/UserFb"),c=e("../../../base/EntityManager"),d=e("../../recharge/Recharge"),f=e("../../rolewin/UserSkill"),p=e("../../godweapon/GodWeaponCC"),h=e("../../../entity/Actor"),g=e("../../mine/MineFight"),y=e("../../tips/UserTips"),v=e("../../playfun/PlayFun"),m=e("../../zsboss/ZsBoss"),b=e("../../boss/UserBoss"),_=e("../../guild/GuildWar"),C=e("../../battle/BattleCC"),I=e("../../paoDian/PaoDianCC"),T=e("../../kf/kfArena/KfArenaSys"),S=e("../../../manager/TimerManager"),R=e("../../../../core/utils/TextFlowMaker"),B=e("../../../../core/utils/DateUtils"),M=cc._decorator,E=M.ccclass,D=M.property,A=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.Game_Bg,t.mapviewReal=null,t.mapviewFake=null,t.flutterFab=null,t.klight=null,t.monstEntity=null,t.roleEntity=null,t.escBtn=null,t.riseup=null,t.map=null,t.entityRoot=null,t.effectRoot=null,t.skillWordList=[],t.mijingpassTime=0,t.gwStartTimes=0,t.leftTimeMj=0,t._miCurFloor=0,t.leftTime=0,t.isStartTime=!1,t.leftFlyExp=0,t.curAddExp=0,t.curExp=0,t}var i;return __extends(t,e),i=t,t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.inst=this,cc.director.on("piao",this.flutterAction,this),this.observe(r.default.ins().postHookStateChange,this.upDataGuajiState),this.observe(r.default.ins().postHpChange,this.updateExpGroup),this.observe(f.default.ins().postShowSkillWord,this.showSkillWord),this.observe(l.default.ins().postFbExpTotal,this.updateKill),this.observe(r.default.ins().postEnterMap,this.onEnterMap),this.observe(l.default.ins().postFbTime,this.onSetTime),this.observe(r.default.ins().postViewOpen,this.onViewOpen),this.observe(p.default.ins().postFubenInfo,this.updateMijingAdd),this.observe(h.default.ins().postExp,this.expChange),this.addTouchEvent(this.escBtn,this.onTap),this.addTouchEvent(this.riseup,this.onTap)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.skillWordList=[],S.default.ins().remove(this.updateTime,this),S.default.ins().remove(this.updateMijingTime,this),this.mijingpassTime=0},t.prototype.flutterAction=function(e,t){var i=cc.instantiate(this.flutterFab);i.getChildByName("num").getComponent(cc.Label).string=e,i.position=t,i.parent=this.effectRoot;var n=cc.sequence(cc.moveBy(.5,0,20),cc.callFunc(function(){i.removeFromParent()}));i.runAction(n);var a=cc.instantiate(this.klight);a.position=t,a.parent=this.effectRoot,this.scheduleOnce(function(){a.removeFromParent()},.3)},t.prototype.initUI=function(){var e=cc.instantiate(this.mapviewReal);this.map=e.getComponent(o.default),this.node.addChild(e);var t=cc.instantiate(this.mapviewFake);this.node.addChild(t),this.entityRoot=t.getChildByName("root"),this.effectRoot=t.getChildByName("effect")},t.prototype.initData=function(){},t.prototype.expChange=function(e){u.default.fbType!=l.default.FB_TYPE_GUANQIABOSS&&u.default.fbType!=l.default.FB_TYPE_TIAOZHAN||!e||c.default.ins().getNoDieRole()&&console.log(this.name,"exp")},t.prototype.onViewOpen=function(e){},t.prototype.onEnterMap=function(){S.default.ins().remove(this.updateTime,this),ViewManager.ins().close(GwMijingRiseUpView),S.default.ins().remove(this.updateMijingTime,this),this.mijingpassTime=0,this.isStartTime=!1,u.default.fbType==l.default.FB_TYPE_EXP?(this.curExp=0,this.expTxt||(this.expTxt=BitmapNumber.ins().createNumPic(0,"r0",5),this.expTxt.x=this.flyExpGroup.width/2,this.expTxt.y=65,this.flyExpGroup.addChild(this.expTxt)),this.updateKill(),this.setExp(this.curExp),this.leftFlyExp=0,this.flyExpGroup.active=!0,this.flyExpGroup1.active=!0):(this.flyExpGroup.active=!1,this.flyExpGroup1.active=!1),this.guildBossGroup.active=!1,this.escBtn.active=u.default.fubenID&&u.default.fbType!=l.default.FB_TYPE_GUANQIABOSS&&u.default.fbType!=l.default.FB_TYPE_CITY&&u.default.fbType!=l.default.FB_TYPE_FIRE_RING&&u.default.fbType!=l.default.FB_TYPE_PEAK,f.default.ins().hejiLevel>=0&&this.checkHJState(),u.default.fbType==l.default.FB_TYPE_MIJING?(this.GwRankGroup.active=!1,this.showMijing()):this.GwRankGroup.active=!1,u.default.fbType==l.default.FB_TYPE_GUARD_WEAPON?ViewManager.ins().open(GuardMainUI):(ViewManager.ins().close(GuardMainUI),ViewManager.ins().close(GuardCallBossWin))},t.prototype.checkHJState=function(){u.default.autoPunch()?ViewManager.ins().open(BtnHejiWin):ViewManager.ins().close(BtnHejiWin)},t.prototype.updateMijingAdd=function(){if(u.default.fbType==l.default.FB_TYPE_MIJING)for(var e=p.default.ins().fubenInfoData.listData,t=0;t<e.length;t++)if(e[t].config.fbId==u.default.fubenID){l.default.ins().oldMijingPoint=e[t].curPoint;break}},t.prototype.showMijing=function(){s.default.GodWeaponBaseConfig;var e=1;for(var t in s.default.GodWeaponFubenConfig)if(s.default.GodWeaponFubenConfig[t].fbId==u.default.fubenID){e=parseInt(t),s.default.GodWeaponFubenConfig[t];break}this._miCurFloor=e;var i=p.default.ins().fubenInfoData;if(i){for(var n=i.listData,a=0;a<n.length;a++)if(n[a].config.fbId==u.default.fubenID){l.default.ins().oldMijingPoint=n[a].curPoint;break}}else p.default.ins().requestFubenInfo()},t.prototype.removeMiingTimeFun=function(){S.default.ins().remove(this.updateMijingTime,this)},t.prototype.updateMijingTime=function(){if(this.leftTimeMj<=0)return ViewManager.ins().close(GwMijingRiseUpView),this.mijingpassTime=0,l.default.ins().sendExitFb(),ViewManager.ins().open(GwResultView,u.default.fubenID,4),void S.default.ins().remove(this.updateMijingTime,this);for(var e=360-this.leftTimeMj,t=void 0,i=0;i<s.default.GodWeaponBaseConfig.fbGrade.length;i++)if(e<=s.default.GodWeaponBaseConfig.fbGrade[i]){this.mijingpassTime=s.default.GodWeaponBaseConfig.fbGrade[i]-e,t=p.default.ins().getPinfenTime(i),l.default.ins().mijingFingfen=i+1,l.default.ins().mijingUseTime=e,this.updateMijingTimeView(t,i);break}this.leftTimeMj=360-(Math.floor((new Date).getTime()/1e3)-this.gwStartTimes)},t.prototype.updateMijingTimeView=function(e,t){this.GwRankGroup.active||(this.GwRankGroup.active=!0);var i,n=360*this.mijingpassTime/e;360==n?n=0:0==n&&(n=360),this.time.string=B.default.getFormatBySecond(this.mijingpassTime,B.default.TIME_FORMAT_1),i=s.default.GodWeaponBaseConfig.fbGrade[t]+"\u79d2";var a="";switch(t+1){case 1:a="S";break;case 2:a="A";break;case 3:a="B";break;case 4:a="C"}this.requireTime.string=i+'<font color="#FFFFFF">\u5185\u901a\u5173\u5c06\u4fdd\u6301</font>'+a+'<font color="#FFFFFF">\u8bc4\u4ef7</font>';var o=s.default.GodWeaponFubenConfig[this._miCurFloor];if(o){var r=o.award[t+1];this.rewardExp.string=r?""+r[0].count:""}else this.rewardExp.string=""},t.prototype.setMJPingfen=function(e){},t.prototype.upDataGuajiState=function(e){},t.prototype.onSetTime=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];u.default.fbType==l.default.FB_TYPE_GUILD_BOSS?e&&e[0]&&(this.leftTime=e[0][1],this.guildBossGroup.active=!0,this.isStartTime||(S.default.ins().doTimer(1e3,0,this.updateTime,this),this.isStartTime=!0,this.updateTime())):u.default.fbType==l.default.FB_TYPE_MIJING&&e&&e[0]&&(this.leftTimeMj=e[0][1],this.leftTimeMj>=2&&(this.leftTimeMj=this.leftTimeMj-2),this.gwStartTimes=Math.floor((new Date).getTime()/1e3)-(360-this.leftTimeMj),S.default.ins().doTimer(1e3,0,this.updateMijingTime,this),this.updateMijingTime())},t.prototype.updateTime=function(){if(this.leftTime<0)return S.default.ins().remove(this.updateTime,this),this.isStartTime=!1,this.guildBossGroup.active=!1,void l.default.ins().sendExitFb();console.log("\u66f4\u65b0\u6062\u590d\u6b21\u6570\u5269\u4f59\u65f6\u95f4\u8ba1\u65f6",this.leftTime),this.leftTime--},t.prototype.updateKill=function(){this.lbNum.string=R.default.generateTextFlow1("|C:0x35e62b&T:"+l.default.ins().expMonterCountKill+"||C:0xF8B141&T:/"+l.default.ins().fbExpTotal+"|")},t.prototype.flyExp=function(e,t){this.addExp(t)},t.prototype.rollExp=function(){var e=this.leftFlyExp>this.curAddExp?this.curAddExp:this.leftFlyExp;this.leftFlyExp=this.leftFlyExp-e,this.curExp+=e,this.setExp(this.curExp),this.leftFlyExp<=0&&S.default.ins().remove(this.rollExp,this)},t.prototype.addExp=function(e){this.leftFlyExp+=e,this.curAddExp=Math.floor(this.leftFlyExp/10),S.default.ins().isExists(this.rollExp,this)||S.default.ins().doTimer(30,0,this.rollExp,this)},t.prototype.setExp=function(e){BitmapNumber.ins().changeNum(this.expTxt,e,"r0",5),this.expTxt.anchorOffsetX=this.expTxt.width/2},t.prototype.updateExpGroup=function(e){var t=e[0];if(!(e[1]>0||u.default.fbType!=l.default.FB_TYPE_EXP)){var i=t.infoModel.configID,n=s.default.ExpFbMonsterConfig[i];if(n){var a=t.parent;if(!a){var o=c.default.ins().getNoDieRole();o&&(a=o.parent)}if(a){var r=s.default.MonthCardConfig.expFubenPrecent/100,f=d.default.ins().getIsForeve()?1+r:1,p=a.localToGlobal(t.x,t.y);this.flyExp(p,Math.ceil(n.exp*f))}this.updateKill()}}},t.prototype.onTap=function(e){switch(e.currentTarget){case this.escBtn:if(u.default.fbType==l.default.FB_TYPE_GUARD_WEAPON)return void ViewManager.ins().open(GuardQuitTips);if(g.default.ins().isFighting)return void y.default.ins().showTips("\u63a0\u593a\u77ff\u4e2d\u4e0d\u53ef\u4ee5\u9000\u51fa");if(u.default.fbType==l.default.FB_TYPE_GUANQIABOSS&&v.default.ins().closeAuto(),m.default.ins().isZsBossFb(u.default.fubenID)&&(b.default.ins().ShowTip=!0),_.default.ins().getModel().checkinAppoint())return void ViewManager.ins().open(GuileWarReliveWin,3);if(C.default.ins().isBattle())return void WarnWin.show("\u662f\u5426\u9000\u51fa\u9635\u8425\u526f\u672c\uff0c\u9000\u51fa\u540e\u670930\u79d2\u8fdb\u5165CD",function(){l.default.ins().sendExitFb()},this);if(I.default.ins().isPaoDian)return void WarnWin.show("\u662f\u5426\u786e\u5b9a\u9000\u51fa\u6fc0\u60c5\u6ce1\u70b9\uff1f\u9000\u51fa\u540e\u5c06\u635f\u5931\u5927\u91cf\u7ecf\u9a8c\u3001\u5a01\u671b\u5956\u52b1\u4e14\u670930\u79d2\u8fdb\u5165CD",function(){l.default.ins().sendExitFb()},this);if(T.default.ins().isKFArena)return void WarnWin.show("\u6218\u573a\u672a\u7ed3\u675f\uff0c\u9000\u51fa\u5c06\u6263\u9664\u5927\u91cf\u7ade\u6280\u573a\u79ef\u5206\uff0c\u662f\u5426\u9000\u51fa\uff1f",function(){l.default.ins().sendExitFb()},this);l.default.ins().sendExitFb(),S.default.ins().remove(this.updateMijingTime,this),this.mijingpassTime=0;break;case this.riseup:ViewManager.ins().open(GwMijingRiseUpView)}},t.prototype.showSkillWord=function(e){},t.inst=null,__decorate([D({type:cc.Prefab,displayName:"\u5b9e\u9645\u5730\u56fe\u9884\u5236\u4f53"})],t.prototype,"mapviewReal",void 0),__decorate([D({type:cc.Prefab,displayName:"\u4fee\u6539\u5730\u56fe\u9884\u5236\u4f53"})],t.prototype,"mapviewFake",void 0),__decorate([D({type:cc.Prefab,displayName:"\u98d8\u8840\u9884\u5236\u4f53"})],t.prototype,"flutterFab",void 0),__decorate([D({type:cc.Prefab,displayName:"\u5200\u5149\u9884\u5236\u4f53"})],t.prototype,"klight",void 0),__decorate([D(cc.Prefab)],t.prototype,"monstEntity",void 0),__decorate([D(cc.Prefab)],t.prototype,"roleEntity",void 0),__decorate([D({type:cc.Node,displayName:"\u9000\u51fa\u6309\u94ae"})],t.prototype,"escBtn",void 0),__decorate([D({type:cc.Node,displayName:"\u9f13\u821e\u6309\u94ae"})],t.prototype,"riseup",void 0),t=i=__decorate([E],t)}(n.default);i.default=A,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../../core/utils/TextFlowMaker":"TextFlowMaker","../../../../core/view/BaseEuiView":"BaseEuiView","../../../base/EntityManager":"EntityManager","../../../entity/Actor":"Actor","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../../manager/TimerManager":"TimerManager","../../../map/GameMap":"GameMap","../../../map/MapView":"MapView","../../battle/BattleCC":"BattleCC","../../boss/UserBoss":"UserBoss","../../fb/UserFb":"UserFb","../../godweapon/GodWeaponCC":"GodWeaponCC","../../guild/GuildWar":"GuildWar","../../kf/kfArena/KfArenaSys":"KfArenaSys","../../mine/MineFight":"MineFight","../../paoDian/PaoDianCC":"PaoDianCC","../../playfun/PlayFun":"PlayFun","../../recharge/Recharge":"Recharge","../../rolewin/UserSkill":"UserSkill","../../tips/UserTips":"UserTips","../../zsboss/ZsBoss":"ZsBoss","../GameLogic":"GameLogic"}],GameServer:[function(e,t,i){"use strict";cc._RF.push(t,"46856WU0QtNXLMmP+oDR43l","GameServer"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/net/PackageID"),a=e("../../base/BaseSystem"),o=e("../../../core/utils/DateUtils"),r=e("../../Utils/EgretUtils"),s=e("../../../core/base/MessageCenter"),u=function(e){function t(){var i=e.call(this)||this;return i.sysId=n.PackageID.Default,s.default.compile(t),i.regNetMsg(23,i.postServerOpenDay),i.regNetMsg(14,i.doServerTime),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},Object.defineProperty(t,"serverTime",{get:function(){return t._serverTime+r.default.getTimer()},enumerable:!0,configurable:!0}),t.setServerTime=function(e){t._serverTime=o.default.formatMiniDateTime(e)-r.default.getTimer()},t.prototype.postServerOpenDay=function(e){t.serverOpenDay=e.readInt(),t._serverZeroTime=e.readInt(),t._serverHeZeroTime=e.readInt(),t._hefuCount=e.readInt(),t.isOpenLF=e.readBoolean()},t.prototype.doServerTime=function(e){t.setServerTime(e.readUnsignedInt())},t}(a.default);i.default=u,window.GameSystem.push(u.ins.bind(u)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../Utils/EgretUtils":"EgretUtils","../../base/BaseSystem":"BaseSystem"}],GameSocket:[function(e,t,i){"use strict";cc._RF.push(t,"39c70cwmyBPSIRi2yedLtLI","GameSocket"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("./WebSock"),o=e("../base/GameConfig"),r=e("../crypto/Encrypt"),s=e("./GameByteArray");(function(e){e[e.STATUS_CONNECTING=1]="STATUS_CONNECTING",e[e.STATUS_CHECKING=2]="STATUS_CHECKING",e[e.STATUS_COMMUNICATION=3]="STATUS_COMMUNICATION",e[e.STATUS_CLOSED=4]="STATUS_CLOSED"})(n||(n={}));var u=function(){function e(){this._socketStatus=n.STATUS_CLOSED,this._packets=null,this._socket=null,this.PACK_HANDLER=[],this.lastPos=-1,this.pid=0,this._socket=new a.WebSock,this._packets=[],this.initSocket()}return e.prototype.registerSTCFunc=function(e,t,i,n){if(this.PACK_HANDLER[e]){if(this.PACK_HANDLER[e][t])return void console.error("\u91cd\u590d\u6ce8\u518c\u534f\u8bae\u63a5\u53e3"+e+"-"+t)}else this.PACK_HANDLER[e]=[];this.PACK_HANDLER[e][t]=[i,n]},e.ins=function(){return null==this.instance&&(this.instance=new e),this.instance},e.prototype.initSocket=function(){var e=this;this._socket.onConnected=function(t){e.onConnected(t)},this._socket.onMessage=function(t){e.onMessage(t)},this._socket.onError=function(t){e.onError(t)},this._socket.onClosed=function(t){e.onClosed(t)}},e.prototype.connect=function(){return this._socketStatus==n.STATUS_CLOSED&&(this.updateStatus(n.STATUS_CONNECTING),this._socket.connect({host:o.default.srvIp,port:o.default.srvPort}),!0)},e.prototype.close=function(){this._socket&&this._socket.close()},e.prototype.onConnected=function(e){this.updateStatus(n.STATUS_CHECKING);var t=new s.default;t.writeUnsignedInt(r.default.getSelfSalt()),this._socket.send(t.buffer),this.recycleByte(t)},e.prototype.onMessage=function(t){if(this._socketStatus<n.STATUS_COMMUNICATION){var i=new s.default;return i._writeUint8Array(new Uint8Array(t)),void this.sendKeyToServer(i)}var a=new s.default;a._writeUint8Array(new Uint8Array(t)),a.position=0,a.readUnsignedShort()==e.DEFAULT_TAG&&(a.position=8,this.dispatchHandler(a))},e.prototype.onError=function(e){console.log("\u7f51\u7edc\u9519\u8bef")},e.prototype.onClosed=function(e){console.log("\u4e0e\u670d\u52a1\u5668\u7684\u8fde\u63a5\u65ad\u5f00\u4e86\uff01"),this.updateStatus(n.STATUS_CLOSED),console.log("\u6267\u884c\u91cd\u767b\u9646\u754c\u9762")},e.prototype.sendKeyToServer=function(e){var t=e;t.position=0;var i=t.readUnsignedInt();r.default.setTargetSalt(i),t.position=0,t.writeShort(r.default.getCheckKey()),t._position=0,t.write_position=2,t.writeBytes(t,0,2),this._socket.send(t.buffer),this.recycleByte(t),this.updateStatus(n.STATUS_COMMUNICATION)},e.prototype.update=function(e){for(var t=0,i=this._packets;t<i.length;t++){var n=i[t];this.lastPos++,this.dispatchHandler(n),-1!=this.lastPos&&(this.recycleByte(this._packets[this.lastPos]),this._packets.splice(0,this.lastPos+1),this.lastPos-=1)}},e.prototype.dispatchHandler=function(e){var t=e.readUnsignedByte(),i=e.readUnsignedByte();if(this.PACK_HANDLER[t]&&this.PACK_HANDLER[t][i]){console.info("\u6d3e\u53d1\u7684\u534f\u8bae\uff1a"+t+"-"+i);var n=this.PACK_HANDLER[t][i];n[0].call(n[1],e),this.recycleByte(e)}else console.error("\u672a\u6ce8\u518c\u7684\u534f\u8bae\uff1a"+t+"-"+i)},e.prototype.updateStatus=function(e){if(this._socketStatus!=e){var t=this._socketStatus;this._socketStatus=e,this.onFinishCheck(e,t)}},e.prototype.onFinishCheck=function(e,t){e==n.STATUS_COMMUNICATION?this.sendCheckAccount():n.STATUS_CLOSED},e.prototype.sendCheckAccount=function(){var e=this.getBytesObj();e.writeCmd(255,1),e.writeInt(o.default.srvId),e.writeString(o.default.openID),e.writeString(o.default.password),this.sendToServer(e)},e.prototype.sendToServer=function(e){this.sendPack(e);var t=e._bytes[12],i=e._bytes[13];console.log("\u53d1\u9001\u5230\u670d\u52a1\u5668\u7684\u534f\u8bae:",t+"--"+i),this.recycleByte(e)},e.prototype.sendPack=function(t){if(this._socketStatus!=n.STATUS_COMMUNICATION)return console.log("\u53d1\u9001\u6570\u636e\u65f6\u6ca1\u548c\u670d\u52a1\u8fde\u63a5\u6216\u8005\u672a\u8fdb\u5165\u901a\u4fe1\u72b6\u6001"),!1;if(null==t||0==t.length)return console.log("\u521b\u5efa\u5ba2\u6237\u7aef\u6570\u636e\u5305\u65f6\u6570\u636e\u4e0d\u80fd\u4e3a\u7a7a\uff01"),!1;var i=e.HEAD_SIZE;t.position=2,t.writeShort(t.length-i);var a=r.default.getCRC16ByPos(t,i);t.position=4,t.writeShort(a);var o=r.default.getCRC16(t,i);t.position=6,t.writeShort(o),r.default.encode(t,4,4),this._socket.send(t.buffer)},e.prototype.getBytesObj=function(){var t=new s.default;return t.writeShort(e.DEFAULT_TAG),t.writeShort(0),t.writeShort(0),t.writeShort(e.DEFAULT_CRC_KEY),t.writeUnsignedInt(this.pid++),t},e.prototype.recycleByte=function(e){e.clear()},e.DEFAULT_TAG=52462,e.DEFAULT_CRC_KEY=30301,e.HEAD_SIZE=8,e.instance=null,e}();i.default=u,cc._RF.pop()},{"../base/GameConfig":"GameConfig","../crypto/Encrypt":"Encrypt","./GameByteArray":"GameByteArray","./WebSock":"WebSock"}],GlobalConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7e21ccGjbtJn4QeODwHMF4P","GlobalConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../map/GameMap"),a=function(){function e(){}return e.initJson=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,this.initCfg()];case 1:return e.sent(),[4,this.initMap()];case 2:return e.sent(),[2]}})})},e.initMap=function(){return new Promise(function(e){cc.loader.loadRes("map/map",cc.JsonAsset,function(t,i){var a=i.json;n.default.init(a),e()})})},e.initCfg=function(){return new Promise(function(t){cc.loader.loadResDir("cfg",cc.JsonAsset,function(i,n){n.forEach(function(t){null==e[t.name]?e[t.name]=JSON.parse(JSON.stringify(t.json)):console.error("\u914d\u7f6e\u8868\u672a\u5b9a\u4e49\uff1a"+t.name)}),t()})})},e.PlayFunConfig=null,e.FsFbConfig=null,e.TeamFuBenGuideConfig=null,e.ShenShouConfig=null,e.ShenShouBase=null,e.ShenShouEquip=null,e.ShenShouSkill=null,e.ActivityType22_1Config=null,e.ActivityType22_3Config=null,e.TeamFuBenBaseConfig=null,e.TeamFuBenConfig=null,e.ActivityType17_1Config=null,e.ActivityType17_2Config=null,e.ActivityType17_3Config=null,e.WujiBaseConfig=null,e.CrossBossConfig=null,e.CrossBossBase=null,e.MergeTotal=null,e.MergeConfig=null,e.ZhanLingConfig=null,e.ZhanLingBase=null,e.ZhanLingLevel=null,e.ZhanLingEquip=null,e.ZhanLingSuit=null,e.ZhanLingTalent=null,e.ZhanLingSkill=null,e.SDKConfig=null,e.FlameStamp=null,e.FlameStampLevel=null,e.PActivity2Config=null,e.FlameStampEffect=null,e.FlameStampMat=null,e.PActivity3Config=null,e.PActivityBtnConfig=null,e.PActivityConfig=null,e.WeaponSoulItemAttr=null,e.WeaponSoulBaseConfig=null,e.PrivilegeData=null,e.ActivityType10Config=null,e.PunchEquipMasterConfig=null,e.PunchEquipConfig=null,e.ActivityType9Config=null,e.SuperVipConfig=null,e.GodWeaponTaskConfig=null,e.ActorExRingFubenConfig=null,e.TrainDayAwardConfig=null,e.ActivityType5Config=null,e.ItemComposeConfig=null,e.LoopRechargeConfig=null,e.MultiDayRechargeConfig=null,e.CampBattleConfig=null,e.CampBattlePersonalAwardConfig=null,e.CampBattlePersonalRankAwardConfig=null,e.GodWingLevelConfig=null,e.MonsterTitleConf=null,e.FbChallengeLotteryConfig=null,e.LoginActivateConfig=null,e.GodWingSuitConfig=null,e.GodWingItemConfig=null,e.NewWorldBossRankConfig=null,e.NewWorldBossAttrConfig=null,e.NewWorldBossBaseConfig=null,e.MailIdConfig=null,e.CityBaseConfig=null,e.CityBossConfig=null,e.LevelMailConfig=null,e.LoginDayMailConfig=null,e.GuildBonFireConfig=null,e.ActivityType4Config=null,e.VipGiftConfig=null,e.ActivityType3Config=null,e.RechargeDaysAwardsConfig=null,e.RechargeItemsConfig=null,e.WeaponSoulSuit=null,e.WeaponSoulPosConfig=null,e.WeaponSoulConfig=null,e.KuangYuanConfig=null,e.NpcBaseConfig=null,e.CaiKuangConfig=null,e.RichManRoundAwardConfig=null,e.RichManGridConfig=null,e.RichManBaseConfig=null,e.FuwenTreasureRewardConfig=null,e.MonsterSpeakConfig=null,e.LeadFubenBaseConfig=null,e.GuanYinAwardConfig=null,e.MonthCardConfig=null,e.ItemGiftConfig=null,e.HeirloomEquipConfig=null,e.HeirloomEquipItemConfig=null,e.HeirloomEquipFireConfig=null,e.HeirloomEquipSetConfig=null,e.ItemDescConfig=null,e.DailyRechargeConfig=null,e.FirstRechargeConfig=null,e.FirstRechargeClientConfig=null,e.ExpFubenBaseConfig=null,e.ExpFubenConfig=null,e.ExpFbMonsterConfig=null,e.ImbaSkillReviseConfig=null,e.HintConfig=null,e.SkillsSorderConfig=null,e.SkillsDescConfig=null,e.ScenesConfig=null,e.YouDangConfig=null,e.BossHomeConfig=null,e.OpenSystemConfig=null,e.LoongSoulBaseConfig=null,e.DeathgainWayConfig=null,e.DeathGuideConfig=null,e.TrainBaseConfig=null,e.FbChNameConfig=null,e.StoneOpenConfig=null,e.WorldBossKillMsgConfig=null,e.MonstershpConfig=null,e.MonthSignVipConfig=null,e.MonthSignDaysConfig=null,e.MonthSignBaseConfig=null,e.MonthSignConfig=null,e.BookListConfig=null,e.DecomposeConfig=null,e.SuitConfig=null,e.CardConfig=null,e.TreasureBoxRateConfig=null,e.TreasureBoxGridConfig=null,e.TreasureBoxConfig=null,e.TreasureBoxBaseConfig=null,e.TianTiConstConfig=null,e.TianTiDanConfig=null,e.TianTiRankAwardConfig=null,e.NeiGongBaseConfig=null,e.NeiGongStageConfig=null,e.FuwenTreasureConfig=null,e.FuwenTreasureLevelConfig=null,e.FbChallengeConfig=null,e.RuneConverConfig=null,e.RuneBaseConfig=null,e.RuneLockPosConfig=null,e.RuneNameConfig=null,e.RuneOtherConfig=null,e.RuneAttrTypeConfig=null,e.RuneComposeConfig=null,e.TogetherHitEquipPageConfig=null,e.TogetherHitEquipQmConfig=null,e.TogetherHitEquipExchangeConfig=null,e.TogetherHitConfig=null,e.LimitTimeTaskConfig=null,e.LimitTimeConfig=null,e.BubbleConfig=null,e.DefineEff=null,e.ActorExRingConfig=null,e.ActorExRingBookConfig=null,e.ActorExRing2Config=null,e.ActorExRing3Config=null,e.ActorExRing4Config=null,e.ActorExRing5Config=null,e.ActorExRing6Config=null,e.ActorExRing7Config=null,e.ActorExRingAbilityConfig=null,e.ActorExRingItemConfig=null,e.MonstersConfig=null,e.ExpConfig=null,e.ItemConfig=null,e.EquipConfig=null,e.SkillsConfig=null,e.SkirmishRewardConfig=null,e.SkirmishBaseConfig=null,e.EffectsConfig=null,e.ChaptersRewardConfig=null,e.WorldRewardConfig=null,e.WingLevelConfig=null,e.WingCommonConfig=null,e.DailyFubenConfig=null,e.DailyConfig=null,e.DailyAwardConfig=null,e.ImbaJigsawConf=null,e.ImbaConf=null,e.AchievementTaskConfig=null,e.ZhuanShengConfig=null,e.ZhuanShengLevelConfig=null,e.JingMaiStageConfig=null,e.JingMaiLevelConfig=null,e.JingMaiCommonConfig=null,e.SkillsUpgradeConfig=null,e.SkillsOpenConfig=null,e.ZhuanShengExpConfig=null,e.NewRoleConfig=null,e.ForgeIndexConfig=null,e.StoneLevelCostConfig=null,e.StoneLevelConfig=null,e.ZhulingAttrConfig=null,e.ZhulingCostConfig=null,e.EnhanceAttrConfig=null,e.EnhanceCostConfig=null,e.LegendLevelupConfig=null,e.LegendComposeConfig=null,e.ExRingConfig=null,e.ExRing0Config=null,e.ExRing1Config=null,e.EquipItemConfig=null,e.ItemStoreConfig=null,e.StoreCommonConfig=null,e.IntegralStore=null,e.TreasureOverViewConfig=null,e.EffectConfig=null,e.VipConfig=null,e.ShieldConfig=null,e.ShieldStageConfig=null,e.LoongSoulConfig=null,e.LoongSoulStageConfig=null,e.TreasureHuntConfig=null,e.TreasureHuntPoolConfig=null,e.TreasureHuntPoolHefuConfig=null,e.SkirmishRankConfig=null,e.GainItemConfig=null,e.BagBaseConfig=null,e.BagExpandConfig=null,e.WorldBossConfig=null,e.WorldBossBaseConfig=null,e.ServerTips=null,e.AttrPowerConfig=null,e.TrainLevelConfig=null,e.LoginRewardsConfig=null,e.ActivityType1Config=null,e.ActivityType2Config=null,e.ActivityType6Config=null,e.ActivityType8Config=null,e.ActivityType7Config=null,e.ActivityConfig=null,e.ActivityBtnConfig=null,e.SkillPowerConfig=null,e.KnighthoodConfig=null,e.KnighthoodBasicConfig=null,e.ChongZhi1Config=null,e.ChongZhi2Config=null,e.FuncNoticeConfig=null,e.RefinesystemExpConfig=null,e.VipGridConfig=null,e.OtherBoss1Config=null,e.EquipPointConstConfig=null,e.EquipPointBasicConfig=null,e.EquipPointGrowUpConfig=null,e.EquipPointRankConfig=null,e.EquipPointResolveConfig=null,e.WanBaGiftbagBasic=null,e.HelpInfoConfig=null,e.ClientGlobalConfig=null,e.CashCowBoxConfig=null,e.CashCowLimitConfig=null,e.CashCowBasicConfig=null,e.CashCowAmplitudeConfig=null,e.GuildConfig=null,e.GuildCommonSkillConfig=null,e.GuildPracticeSkillConfig=null,e.GuildCreateConfig=null,e.GuildDonateConfig=null,e.GuildLevelConfig=null,e.GuildTaskConfig=null,e.WelfareConfig=null,e.OtherBoss2Config=null,e.MiJiGridConfig=null,e.MiJiSkillConfig=null,e.TitleConf=null,e.TrainLevelAwardConfig=null,e.TerraceDescConfig=null,e.WeiXiGuanZhuConst=null,e.GuildBattleLevel=null,e.GuildBattleConst=null,e.GuildBattleDayAward=null,e.GuildBattleDistributionAward=null,e.GuildBattlePersonalAward=null,e.GuildBattlePersonalRankAward=null,e.GuildStoreConfig=null,e.FriendLimit=null,e.ZhuangBanId=null,e.ZhuangBanConfig=null,e.FeatsStore=null,e.GuildBossConfig=null,e.GuildBossInfoConfig=null,e.GuildBossHpAwardsConfig=null,e.GuildBossRankConfig=null,e.AllWorldConfig=null,e.GuideConfig=null,e.TogerherHitBaseConfig=null,e.ActorExRingCommon=null,e.HeirloomTreasureConfig=null,e.HeirloomTreasureRewardConfig=null,e.OptionalGiftConfig=null,e.GodweaponItemConfig=null,e.GodWeaponLineConfig=null,e.GodWeaponLevelConfig=null,e.GodWeaponBaseConfig=null,e.GodWeaponFubenConfig=null,e.GWSkillReviseConfig=null,e.MoneyConfig=null,e.FbChallengeBaseConfig=null,e.YuPeiConfig=null,e.YuPeiBasicConfig=null,e.PassionPointConfig=null,e.PassionPointAwardConfig=null,e.RoleConfig=null,e.NewFuncNoticeConfig=null,e.ReincarnationBase=null,e.ReincarnationExchange=null,e.ReincarnationLevel=null,e.ReincarnateSpirit=null,e.ReincarnateSuit=null,e.ReincarnateEquip=null,e.EquipWithEffConfig=null,e.PrestigeBase=null,e.PrestigeLevel=null,e.ActivityType11_1Config=null,e.ActivityType11_2Config=null,e.ReincarnateEquipCompose=null,e.SpecialEquipsConfig=null,e.ReincarnationSoulLevel=null,e.ReincarnationDemonLevel=null,e.ReincarnationLinkLevel=null,e.PeakRaceBase=null,e.PeakRaceTime=null,e.PeakRaceCrossTime=null,e.ActivityType19Config=null,e.ActivityType18Config=null,e.HeartMethodStarConfig=null,e.GuardGodWeaponConf=null,e.GGWWaveConf=null,e.JadePlateBaseConfig=null,e.JadePlateLevelConfig=null,e.HeartMethodBaseConfig=null,e.HeartMethodConfig=null,e.HeartMethodPosConfig=null,e.HeartMethodLevelConfig=null,e.HeartMethodStageConfig=null,e.HeartMethodSuitConfig=null,e.ZhiZunEquipLevel=null,e.ZhiZunLinkLevel=null,e.ZhuangBanLevelUp=null,e.ActivityType20Config=null,e.PActivityType1Config=null,e.PActivityType9Config=null,e.MijiBaseConfig=null,e.ActivityType12Config=null,e.HideBossConfig=null,e.HunGuConf=null,e.HunGuEquip=null,e.HunYuEquip=null,e.HunGuSuit=null,e.RongLuExpConfig=null,e.DevilBossBase=null,e.DevilBossConfig=null,e.AuctionConfig=null,e.AuctionItem=null,e.InstanceBaseConfig=null,e.CrossArenaBase=null,e.CrossArenaScore=null,e.UpdateRemindConfig=null,e}();i.default=a,cc._RF.pop()},{"../map/GameMap":"GameMap"}],GodWeaponBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b7787onqelG3KZYqn7qQv2e","GodWeaponBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],GodWeaponCC:[function(e,t,i){"use strict";cc._RF.push(t,"508ceLv+DpDhJdxQZvLUBml","GodWeaponCC"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("./model/GodWeaponData"),o=e("./model/GwFubenData"),r=e("./model/GwRankInfoData"),s=e("./model/GwTaskData"),u=e("../../../core/net/PackageID"),l=e("../../manager/GlobalConfig"),c=e("../zs/UserZs"),d=e("../server/GameServer"),f=e("../../entity/SubRoles"),p=e("../tips/UserTips"),h=e("../skill/data/SkillData"),g=e("../../../core/base/MessageCenter"),y=function(e){function t(){var i=e.call(this)||this;return i.curExp=0,i._firstExp=!0,i.weaponDataAry=[],i._isFirst=!1,i.exattrDesObj={43:"\u65bd\u653e\u523a\u6740\u5251\u6cd5\u9644\u52a0\u5438\u8840\u6548\u679c\uff0c\u6062\u590d%s%%\u4f24\u5bb3\u503c\u7684\u751f\u547d",48:"\u767d\u864e\u4f1a\u5438\u6536\u5176\u4ed6\u89d2\u8272\u7684\u4ea1\u9b42\uff0c\u6bcf\u6b7b\u4ea1\u4e00\u4e2a\u89d2\u8272\uff0c\u5176\u4f24\u5bb3\u63d0\u9ad8%s%%",44:"\u653b\u51fb\u65f6\u6709\u51e0\u7387\u89e6\u53d1\u6b66\u795e\u4e4b\u6012\u6548\u679c",45:"\u653b\u51fb\u65f6\u6709\u51e0\u7387\u89e6\u53d1\u6b66\u795e\u4e4b\u6012\u6548\u679c",46:"\u653b\u51fb\u65f6\u6709\u51e0\u7387\u89e6\u53d1\u6b66\u795e\u4e4b\u6012\u6548\u679c",47:"\u767d\u864e\u653b\u51fb\u65f6\u670910%\u673a\u7387\u72c2\u66b4\uff0c\u589e\u52a0\u81ea\u8eab%s%%\u653b\u51fb\u529b\u5e76\u4e14\u5fc5\u66b4\u51fb\uff0c\u6301\u7eed3\u79d2"},i.sysId=u.PackageID.GodWeapon,g.default.compile(t),i.gwTask=new s.default,i.regNetMsg(1,i.postUpdateExp),i.regNetMsg(2,i.postUpdateInfo),i.regNetMsg(6,i.postFubenInfo),i.regNetMsg(9,i.postRankInfo),i.regNetMsg(13,i.doGetAward),i.regNetMsg(10,i.postGwTask),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.createData=function(){0==this._isFirst&&(this.initData(),this._isFirst=!0)},t.prototype.initData=function(){for(var e in this.maxSkillIdAry=[],this.weaponDataAry=[],this.allSkillData={},this.allSkillData2={},this.allGodItemData={},l.default.GodWeaponLineConfig){var t={},i={},n=l.default.GodWeaponLineConfig[e];this.allSkillData[e]=t,this.allSkillData2[e]=i;var o=0;for(var r in n){var s=new a.GwSkillData;s.skillId=parseInt(r),s.skillLv=0,s.config=n[r],s.weaponId=parseInt(e),i[s.skillId]=s,t[s.config.skinId]=s,o++}this.maxSkillIdAry.push(o);for(var u=[],c=0;c<l.default.GodWeaponBaseConfig.weaponItemCount;c++){var d=new a.GwItem;d.pos=c+1,d.itemId=void 0,d.config=null,d.weaponId=parseInt(e),u.push(d)}this.allGodItemData[e]=u}for(var e in this.gwSkillConfig={},l.default.GWSkillReviseConfig){n=l.default.GWSkillReviseConfig[e];this.gwSkillConfig[n.skill]||(this.gwSkillConfig[n.skill]={}),this.gwSkillConfig[n.skill][n.gwIndex]=n}},t.prototype.godWeaponIsOpen=function(){return c.default.ins().lv>=l.default.GodWeaponBaseConfig.zhuanshengLevel&&d.default.serverOpenDay>=l.default.GodWeaponBaseConfig.openDay},t.prototype.getReviseBySkill=function(e){if(!this.allSkillData2)return null;var t=(""+e).charAt(0),i=this.allSkillData2[t];if(!i)return null;var n=Math.floor(e/1e3),a=[];for(var o in i){var r=i[o];if(r.config.skill==n){if(0==r.skillLv)continue;var s=r.skillLv+r.addLv,u=1e3*r.skillId+s;this.gwSkillConfig[n]&&this.gwSkillConfig[n][u]&&a.push(this.gwSkillConfig[n][u])}}return a},t.prototype.getJobGWNewSkill=function(e){if(!this.allSkillData2)return null;var t=this.allSkillData2[e];if(!t)return null;var i=f.default.ins().getSubRoleByJob(e);if(!i)return null;i.godWeaponSkills||(i.godWeaponSkills=[]);var n=0;for(var a in t){var o=t[a];if(o.config.newskill||o.config.passiveskill){var r=1e3*(o.config.newskill||o.config.passiveskill)+(o.skillLv+o.addLv);i.godWeaponSkills[n]=i.godWeaponSkills[n]||new h.default(r),i.godWeaponSkills[n].configID=r,n+=1}}return i.godWeaponSkills},t.prototype.getWeaponSkinIdData=function(e,t){return this.allSkillData[e][t]},t.prototype.getWeaponSkillidData=function(e,t){return this.allSkillData2[e][t]},t.prototype.getGodItemData=function(e,t){return this.allGodItemData[e][t-1]},t.prototype.postUpdateExp=function(e){var t=this.curExp;this.curExp=e.readInt(),this._firstExp||this.curExp-t>0&&p.default.ins().showTips("|C:0xffd93f&T:\u795e\u5175\u7ecf\u9a8c  +"+(this.curExp-t)+"|"),this._firstExp=!1},t.prototype.postUpdateInfo=function(e){this.createData();for(var t,i=e.readInt(),n=0;n<i;n++)this.weaponDataAry[n]?(t=this.weaponDataAry[n]).parse(e):(t=new a.default(e),this.weaponDataAry.push(t));this.weaponDataAry.sort(function(e,t){return e.weaponId<t.weaponId?-1:1})},t.prototype.getWeaponData=function(e){if(this.weaponDataAry)for(var t=0,i=this.weaponDataAry;t<i.length;t++){var n=i[t];if(n.weaponId==e)return n}return null},t.prototype.upSkill=function(e,t){var i=this.getBytes(3);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.inlayItem=function(e,t,i){var n=this.getBytes(4);n.writeInt(e),n.writeInt(t),n.writeInt(i),this.sendToServer(n)},t.prototype.upWeapon=function(e){var t=this.getBytes(5);t.writeInt(e),this.sendToServer(t)},t.prototype.hadRedPoint=function(){this.createData();var e=!1;if(d.default.serverOpenDay<l.default.GodWeaponBaseConfig.openDay)return e;if(GodWeaponRedPoint.ins().gwTaskRed)e=!0;else for(var t=0;t<this.weaponDataAry.length;t++)if(this.weaponDataAry[t]&&1==this.weaponDataAry[t].hasRedPoint||this.getSwRedPoint(this.weaponDataAry[t].weaponId)){e=!0;break}return e=e||this.mijintHadRedPoint()||this.maxLvRedPoint()},t.prototype.maxLvRedPoint=function(){if(!this.weaponDataAry)return!1;var e=this.weaponDataAry.concat();e.sort(function(e,t){return e.curLv-t.curLv});var i=e[e.length-1];return!!(i&&i.config&&t.ins().curExp>=2*i.config.everyExp)},t.prototype.mijintHadRedPoint=function(){return!!(this.godWeaponIsOpen()&&this.fubenInfoData&&this.fubenInfoData.hadChallengeNum>0)},t.prototype.getSwRedPoint=function(e){for(var t,i=this.allGodItemData[e],n=0;n<i.length;n++)if((t=i[n]).isOpen&&!t.itemId&&GwShengWuChooseView.getGwItemType(t).length>0)return!0;return!1},t.prototype.gwAddAttr=function(e){var t=this.getWeaponData(e+1);if(!t)return[];var i,n=t.addAttr.concat(),a=0,o=0;for(a=0;a<this.maxSkillIdAry[e];a++)if((i=this.getWeaponSkillidData(e+1,a+1)).skillLv+i.addLv>0&&i.config.attr)for(o=0;o<i.config.attr.length;o++){(l={value:0,type:0}).value=i.config.attr[o].value*(i.skillLv+i.addLv),l.type=i.config.attr[o].type,n.push(l)}var r=this.allGodItemData[e+1];for(a=0;a<r.length;a++)if(r[a].itemId)for(o=0;o<r[a].config.attr.length;o++){(l={value:0,type:0}).value=r[a].config.attr[o].value,l.type=r[a].config.attr[o].type,n.push(l)}var s=[];for(a=0;a<n.length;a++){var u=!1;for(o=0;o<s.length;o++){if(s[o].type==n[a].type){s[o].value+=n[a].value,u=!1;break}u=!0}if(1==u||0==s.length){var l={value:n[a].value,type:n[a].type};s.push(l)}}return s},t.prototype.postFubenInfo=function(e){this.fubenInfoData||(this.fubenInfoData=new o.default),this.fubenInfoData.parse(e)},t.prototype.postRankInfo=function(e){this.rankInfoDataAry||(this.rankInfoDataAry=[]);for(var t,i=e.readInt(),n=0;n<i;n++)(t=this.rankInfoDataAry[n])||(t=new r.default,this.rankInfoDataAry[n]=t),t.parse(e);this.rankInfoDataAry.sort(this.sortFun)},t.prototype.sortFun=function(e,t){return e.rank-t.rank},t.prototype.postGwTask=function(e){this.gwTask.parser(e)},t.prototype.requestFubenInfo=function(){var e=this.getBytes(6);this.sendToServer(e)},t.prototype.joinFuben=function(e){var t=this.getBytes(7);t.writeInt(e),this.sendToServer(t)},t.prototype.buybuff=function(e){var t=this.getBytes(8);t.writeInt(e),this.sendToServer(t)},t.prototype.requestRanInfo=function(){var e=this.getBytes(9);this.sendToServer(e)},t.prototype.doGetAward=function(e){},t.prototype.requestGetAward=function(){var e=this.getBytes(13);this.sendToServer(e)},t.prototype.requestReceiveTask=function(e){var t=this.getBytes(11);t.writeInt(e),this.sendToServer(t)},t.prototype.requestActiveWeapon=function(){this.sendBaseProto(12)},t.prototype.getPinfenTime=function(e){var t;if(!this._timeMijinAry)for(var i in this._timeMijinAry=[],l.default.GodWeaponBaseConfig.fbGrade)t?(this._timeMijinAry.push(l.default.GodWeaponBaseConfig.fbGrade[i]-t),t=l.default.GodWeaponBaseConfig.fbGrade[i]):(t=l.default.GodWeaponBaseConfig.fbGrade[i],this._timeMijinAry.push(t));return this._timeMijinAry[e]},t.prototype.weaponIsActive=function(e){if(this.createData(),this.weaponDataAry)for(var t=0,i=this.weaponDataAry;t<i.length;t++){if(i[t].weaponId==e)return!0}return!1},t.prototype.taskIsOpen=function(){return d.default.serverOpenDay>=l.default.GodWeaponBaseConfig.openDay},t.prototype.sendReset=function(e){var t=this.getBytes(14);t.writeInt(e),this.sendToServer(t)},t}(n.default);i.default=y,window.GameSystem.push(y.ins.bind(y)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../server/GameServer":"GameServer","../skill/data/SkillData":"SkillData","../tips/UserTips":"UserTips","../zs/UserZs":"UserZs","./model/GodWeaponData":"GodWeaponData","./model/GwFubenData":"GwFubenData","./model/GwRankInfoData":"GwRankInfoData","./model/GwTaskData":"GwTaskData"}],GodWeaponData:[function(e,t,i){"use strict";cc._RF.push(t,"b5925pj0WBJZaaI1gA7ZIrm","GodWeaponData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../GodWeaponCC"),a=e("../../../manager/GlobalConfig"),o=e("../../../../core/base/AttributeData"),r=e("../../skill/data/SkillData"),s=e("../../bag/UserBag"),u=function(){function e(e){this.parse(e)}return e.prototype.parse=function(e){if(this.weaponId=e.readInt(),this.curLv=e.readInt(),this.curExp=e.readInt(),this.skillPoint=e.readInt(),this.openCount=e.readInt(),this.openCount<=0&&this.openSkillAry&&this.openSkillAry.length>0)for(var t=this.openSkillAry.length,i=0;i<t;i++)this.openSkillAry[i].skillLv=0;var o,r,s,u;this.openSkillAry=[];for(i=0;i<this.openCount;i++)r=e.readInt(),(o=n.default.ins().getWeaponSkillidData(this.weaponId,r)).addLv=0,o.skillLv=e.readInt(),this.openSkillAry.push(o);for(var l in n.default.ins().allSkillData2[this.weaponId])0==n.default.ins().allSkillData2[this.weaponId][l].skillLv&&(n.default.ins().allSkillData2[this.weaponId][l].addLv=0);this.inlayCount=e.readInt();for(i=0;i<this.inlayCount;i++){u=e.readInt(),(s=n.default.ins().getGodItemData(this.weaponId,u)).itemId=e.readInt();for(var c=0;c<s.config.skill.length;c++){n.default.ins().getWeaponSkillidData(this.weaponId,s.config.skill[c]).addLv+=1}}this.config=a.default.GodWeaponLevelConfig[this.curLv]},Object.defineProperty(e.prototype,"hasRedPoint",{get:function(){return this.skillPoint>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addAttr",{get:function(){return null==this.config["attr"+this.weaponId]?[]:this.config["attr"+this.weaponId]},enumerable:!0,configurable:!0}),e.prototype.getResetPoint=function(){for(var e=this.openSkillAry?this.openSkillAry.length:0,t=0,i=0;i<e;i++)t+=this.openSkillAry[i].skillLv;return t},e.prototype.getWeaponName=function(){switch(this.weaponId){case 1:return"\u96f7\u9706\u6012\u65a9";case 2:return"\u8d64\u8840\u9b54\u5251";case 3:return"\u65e0\u6781\u900d\u9065\u6247"}return""},e}();i.default=u;var l=function(){function e(e,t){this._skillLv=0,this.addLv=0,this.skillId=e,this.skillLv=t}return Object.defineProperty(e.prototype,"skillLv",{get:function(){return this._skillLv},set:function(e){this._skillLv=e},enumerable:!0,configurable:!0}),e.prototype.lvLabel=function(e){void 0===e&&(e=!1);var t,i=this._skillLv+this.addLv;return t=this.isOpen?this.config.upLevel+this.addLv:0!=this._skillLv?this.config.upLevel+this.addLv:this.addLv,e?""+i:i+"/"+t},Object.defineProperty(e.prototype,"skillPower",{get:function(){return(this.config.exPower||0)*(this._skillLv+this.addLv)},enumerable:!0,configurable:!0}),e.prototype.addAttrValyeType=function(e){var t="";if(this.config.attr)for(var i=0;i<this.config.attr.length;i++)t.length>0&&(t+="\n"),t+=o.default.getAttrStrByType(this.config.attr[i].type)+'\u63d0\u5347<font color="#35E62D">'+this.config.attr[i].value*e+"</font>";return t},e.prototype.addExAttrstr=function(e){var t="";if(this.config.exattr)for(var i="",o="",r=0;r<this.config.exattr.length;r++){switch(t.length>0&&(t+="\n"),i=n.default.ins().exattrDesObj[this.config.exattr[r].type],this.config.exattr[r].type){case 43:case 48:o='<font color="#35E62D">'+this.config.exattr[r].value*e/100+"</font>";break;case 44:case 45:case 46:o='<font color="#35E62D">'+(1+this.config.exattr[r].value*e/100)+"</font>";break;case 47:var s=a.default.EffectsConfig[100400+this.config.exattr[r].value*e];s&&s.args&&(o='<font color="#35E62D">'+100*s.args.a+"</font>")}t+=i=i.replace("%s%",o)}return t},e.prototype.addatrStr=function(e){this._addStr="";var t,i,n=e+this.addLv;return this._addStr+=this.addAttrValyeType(n),this._addStr+=this.addExAttrstr(n),this.config.newskill&&(t=1e3*this.config.newskill+n,i=new r.default(t),this._addStr.length>0&&(this._addStr+="\n"),this._addStr+=this.getSkillDataDes(i)),this.config.passiveskill&&(t=1e3*this.config.passiveskill+n,i=new r.default(t),this._addStr.length>0&&(this._addStr+="\n"),this._addStr+=this.getSkillDataDes(i)),this._addStr+=this.specialSkill(n),this._addStr},e.prototype.getSkillDataDes=function(e){var t=e.config||a.default.SkillsConfig[e.lv1ConfigID];if(t){var i=a.default.SkillsDescConfig[t.desc],n=i?i.desc:"";if(!n.length||!t.desc_ex)return n;for(var o=t.desc_ex.length,r=0;r<o;r++)n=n.replace("%s%",'<font color="#35E62D">'+t.desc_ex[r]+"</font>");return n}console.log("\u6280\u80fdid:"+e.configID+"\u627e\u4e0d\u5230\u914d\u7f6e")},e.prototype.specialSkill=function(e){var t=e+this.addLv,i="";if(this.config.skill){var n=void 0,o=1e3*this.skillId+t;for(var r in a.default.GWSkillReviseConfig)if((n=a.default.GWSkillReviseConfig[r]).skill==this.config.skill&&n.gwIndex==o){i=n.desc;break}}return i},Object.defineProperty(e.prototype,"isOpen",{get:function(){var e=!0;if(this.config.condition){for(var t in this.config.condition){if((0==parseInt(t)?n.default.ins().getWeaponSkillidData(this.weaponId,parseInt(t)+1):n.default.ins().getWeaponSkillidData(this.weaponId,parseInt(t))).skillLv<this.config.condition[t]){e=!1;break}}return e}return e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openTip",{get:function(){if(!this._openTip)if(this._openTip="",this.skillId==n.default.ins().maxSkillIdAry[this.weaponId-1])this._openTip="\u6240\u6709\u6280\u80fd\u6ee1\u7ea7\u540e\u89e3\u9501";else for(var e in this.config.condition){var t=void 0;t=0==parseInt(e)?n.default.ins().getWeaponSkillidData(this.weaponId,parseInt(e)+1):n.default.ins().getWeaponSkillidData(this.weaponId,parseInt(e)),this._openTip.length>0&&(this._openTip+="\n"),this._openTip+=t.config.skillName+"\u8fbe\u5230"+this.config.condition[e]+"\u89e3\u9501"}return this._openTip},enumerable:!0,configurable:!0}),e}();i.GwSkillData=l;var c=function(){function e(){this.isCur=!1}return Object.defineProperty(e.prototype,"itemId",{get:function(){return this._itemId},set:function(e){this._itemId=e,this.config=a.default.GodweaponItemConfig[this.itemId],this.itemConfig=a.default.ItemConfig[this.itemId]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"openLv",{get:function(){return a.default.GodWeaponBaseConfig.openLevel[this.pos-1]},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isOpen",{get:function(){var e=n.default.ins().getWeaponData(this.weaponId);return!(e&&e.curLv<this.openLv)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"addatrStr",{get:function(){if(null==this._addStr){this._addStr="";for(var e=0;e<this.config.attr.length;e++)this._addStr.length>0&&(this._addStr+="\n"),this._addStr+=o.default.getAttrStrByType(this.config.attr[e].type)+" +"+this.config.attr[e].value}return this._addStr},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skillName",{get:function(){if(null==this._skillName){this._skillName="";for(var e=0;e<this.config.skill.length;e++)this._skillName.length>0&&(this._skillName+="\u3001"),this._skillName+=n.default.ins().getWeaponSkillidData(this.weaponId,this.config.skill[e]).config.skillName}return this._skillName},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"skillPower",{get:function(){if(!this._skillPower){this._skillPower=0;for(var e=void 0,t=0;t<this.config.skill.length;t++)if((e=n.default.ins().getWeaponSkillidData(this.weaponId,this.config.skill[t])).config.exPower&&(this._skillPower+=e.config.exPower),e.config.attr){for(var i=[],a=0;a<e.config.attr.length;a++)i.push(new o.default(e.config.attr[a].type,e.config.attr[a].value));this._skillPower+=s.default.getAttrPower(i)}}return this._skillPower},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"power",{get:function(){if(!this._power){this._power=0,this._power+=this.skillPower;for(var e=[],t=0;t<this.config.attr.length;t++)e.push(new o.default(this.config.attr[t].type,this.config.attr[t].value));this._power+=s.default.getAttrPower(e)}return this._power},enumerable:!0,configurable:!0}),e}();i.GwItem=c,cc._RF.pop()},{"../../../../core/base/AttributeData":"AttributeData","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../skill/data/SkillData":"SkillData","../GodWeaponCC":"GodWeaponCC"}],GodWeaponFubenConfig:[function(e,t,i){"use strict";cc._RF.push(t,"928d5nR4SBEa60MIazP1MEw","GodWeaponFubenConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],GodWeaponIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"aaa49INJWdFhoDb/9a+i98K","GodWeaponIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../zs/UserZs"),o=e("../../../entity/Actor"),r=e("../../../manager/GlobalConfig"),s=e("../../server/GameServer"),u=e("../../godweapon/model/GodWeaponRedPoint"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postZsLv,o.default.ins().postLevelChange],n.updateMessage=[u.default.ins().postGodWeapon],n}return __extends(t,e),t.prototype.checkShowRedPoint=function(){return u.default.ins().godWeaponRed?1:0},t.prototype.checkShowIcon=function(){return o.default.level>=r.default.GodWeaponBaseConfig.noticeOpenLv&&s.default.serverOpenDay>=r.default.GodWeaponBaseConfig.openDay},t.prototype.tapExecute=function(){ViewManager.ins().open(GodWeaponWin)},t}(n.default);i.default=l,cc._RF.pop()},{"../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../godweapon/model/GodWeaponRedPoint":"GodWeaponRedPoint","../../server/GameServer":"GameServer","../../zs/UserZs":"UserZs","./RuleIconBase":"RuleIconBase"}],GodWeaponItemCC:[function(e,t,i){"use strict";cc._RF.push(t,"0e353AUT+1IapXwMlzqpM8M","GodWeaponItemCC"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("../../../core/net/PackageID"),r=e("../../../core/base/MessageCenter"),s=function(e){function t(){var i=e.call(this)||this;return i.sysId=o.PackageID.GodWeaponItem,r.default.compile(t),i.regNetMsg(1,i.postCompound),i.regNetMsg(2,i.postFuse),i}return __extends(t,e),t.prototype.requestCompound=function(e,t,i){var n=this.getBytes(1);n.writeInt(e),n.writeInt(t),n.writeInt(i),this.sendToServer(n)},t.prototype.postCompound=function(e){var t=e.readBoolean();e.readShort();return{id:e.readInt(),isSuccess:t}},t.prototype.requestFuse=function(e,t,i){var n=this.getBytes(2);n.writeInt(e),n.writeInt(t),n.writeShort(i),this.sendToServer(n)},t.prototype.postFuse=function(e){var t=e.readBoolean(),i=0;if(t){e.readShort();i=e.readInt()}return{id:i,isSuccess:t}},t.ins=function(){return e.ins.call(this)},t}(a.default);i.default=s,function(e){e.godWeaponItemCC=s.ins.bind(s)}(n||(n={})),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem"}],GodWeaponItemData:[function(e,t,i){"use strict";cc._RF.push(t,"7acbfaDk6xEd6U4QaqLzbSV","GodWeaponItemData");cc._RF.pop()},{}],GodWeaponItemModel:[function(e,t,i){"use strict";cc._RF.push(t,"45142lWh+JFcY0PyPYg/cwa","GodWeaponItemModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../../manager/GlobalConfig"),o=e("../../../config/ItemConfig"),r=e("../../bag/UserBag"),s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.init=function(){if(!this._qualityItemMap&&!this._jobItemMap)for(var e in this._qualityItemMap={},this._jobItemMap={},a.default.GodweaponItemConfig){var t=a.default.GodweaponItemConfig[e],i=a.default.ItemConfig[t.id],n=o.default.getQuality(i);if(n<4){var r=this._qualityItemMap[n];void 0==r&&(r=[]),r.push(t.id),this._qualityItemMap[n]=r}else if(4==n&&(!t.skill||t.skill.length<=1)){var s=o.default.getJob(i),u=this._jobItemMap[s];void 0==u&&(u=[]),u.push(t.id),this._jobItemMap[s]=u}}},Object.defineProperty(t.prototype,"qualityItemMap",{get:function(){return this._qualityItemMap||this.init(),this._qualityItemMap},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jobItemMap",{get:function(){return this._jobItemMap||this.init(),this._jobItemMap},enumerable:!0,configurable:!0}),t.prototype.isCanCompound=function(){var e=!1,t=this.qualityItemMap;for(var i in t)if(parseInt(i)<4&&(e=this.checkNum(t[i])))return e;return e},t.prototype.checkNum=function(e){for(var t=e.length,i=0,n=0;n<t;n++)i+=r.default.ins().getBagGoodsCountById(0,e[n]);return i>=3},t.prototype.getCompoundItemList=function(){var e={},t=this.qualityItemMap;for(var i in t)this.checkNum(t[i])&&(e[i]=this.getItemList(t[i]));return e},t.prototype.filterCompoundItemList=function(e,t){var i=[];for(var n in t){var a=new GodweaponItemData(t[n].id,t[n].count,t[n].quality);a.quality==e.quality&&(a.id==e.id?a.count>1&&(a.count--,i.push(a)):i.push(a))}return i},t.prototype.toList=function(e){var t=[];for(var i in e)t=t.concat(e[i]);return t},t.prototype.getItemList=function(e){for(var t=e.length,i=[],n=0;n<t;n++){var s=e[n],u=r.default.ins().getBagGoodsCountById(0,s),l=o.default.getQuality(a.default.ItemConfig[s]);u>0&&i.push(new GodweaponItemData(s,u,l))}return i},t.prototype.isCanFuse=function(){return!1},t.prototype.checkFuseNum=function(e){for(var t=0,i=0;i<e.length;i++)if(r.default.ins().getBagGoodsCountById(0,e[i])>0&&++t>1)return!0;return!1},t.prototype.getFuseItemList=function(){var e={},t=this.jobItemMap;for(var i in t)this.checkFuseNum(t[i])&&(e[i]=this.getJobFuseItemList(t[i]));return e},t.prototype.getJobFuseItemList=function(e){for(var t=e.length,i=[],n=0;n<t;n++){var s=e[n],u=o.default.getQuality(a.default.ItemConfig[s]),l=r.default.ins().getBagGoodsCountById(0,e[n]);l>0&&i.push(new GodweaponItemData(s,l,u))}return i},t.prototype.filterFuseItemList=function(e,t){var i=[],n=o.default.getJob(a.default.ItemConfig[e.id]);for(var r in t){var s=new GodweaponItemData(t[r].id,t[r].count,t[r].quality);n==o.default.getJob(a.default.ItemConfig[s.id])&&e.id!=s.id&&i.push(s)}return i},t.prototype.getFuseTargetItem=function(e,t){return 4e5+1e4*o.default.getJob(a.default.ItemConfig[e])+Math.max(e,t)-Math.min(e,t)+Math.min(e,t)%20*100},t}(n.default);i.default=s,cc._RF.pop()},{"../../../../core/base/BaseClass":"BaseClass","../../../config/ItemConfig":"ItemConfig","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag"}],GodWeaponLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b2cbeVMv9pD242EZLi7G+rN","GodWeaponLevelConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],GodWeaponLineConfig:[function(e,t,i){"use strict";cc._RF.push(t,"29acdHj/6JDMb5PM72kBuDN","GodWeaponLineConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],GodWeaponRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"efa89LZuctKobMJi8TDO/T4","GodWeaponRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../base/BaseSystem"),a=e("../../../../core/base/MessageCenter"),o=e("../GodWeaponCC"),r=e("../../gamescene/GameLogic"),s=e("../../boss/UserBoss"),u=e("../../bag/UserBag"),l=e("../../../entity/Actor"),c=e("./GwTaskData"),d=e("../../../entity/SubRoles"),f=function(e){function t(){var i=e.call(this)||this;return i.gwTaskRed=!1,i.gwTaskRed1=!1,i.gwTaskRed2=!1,i.gwTaskRed3=!1,i.godWeaponRed=!1,i.gwMjRed=!1,i.gwSbRed=!1,i.gwSbRed1=!1,i.gwSbRed2=!1,i.gwSbRed3=!1,i.gwBossRp=!1,i.gwItem=!1,a.default.compile(t),i.associated(i.postGodWeapon,i.postGwSb,i.postGwMj,i.postgGwBossRp,i.postGodWeaponItem),i.associated(i.postGwSb,i.postGwTab1,i.postGwTab2,i.postGwTab3),i.associated(i.postGwTask,o.default.ins().postGwTask,o.default.ins().postUpdateInfo,r.default.ins().postSubRoleChange),i.associated(i.postGwMj,o.default.ins().postFubenInfo),i.associated(i.postGwTab1,i.postGwTask,o.default.ins().postUpdateInfo,o.default.ins().postUpdateExp),i.associated(i.postGwTab2,i.postGwTask,o.default.ins().postUpdateInfo,o.default.ins().postUpdateExp),i.associated(i.postGwTab3,i.postGwTask,o.default.ins().postUpdateInfo,o.default.ins().postUpdateExp),i.associated(i.postgGwBossRp,s.default.ins().postWorldBoss,o.default.ins().postUpdateInfo,s.default.ins().postWorldNotice,s.default.ins().postUpdateWorldPlayList,l.default.ins().postYbChange,u.default.ins().postItemDel,u.default.ins().postItemAdd),i.associated(i.postGodWeaponItem,u.default.ins().postItemAdd,u.default.ins().postItemDel,u.default.ins().postItemCountChange),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postGodWeaponItem=function(){return!1},t.prototype.postGodWeapon=function(){var e=this.godWeaponRed;return this.godWeaponRed=this.gwSbRed||this.gwMjRed||this.gwItem||this.gwBossRp,e!=this.godWeaponRed},t.prototype.postGwSb=function(){var e=this.gwSbRed;return this.gwSbRed=this.gwSbRed1||this.gwSbRed2||this.gwSbRed3,e!=this.gwSbRed},t.prototype.postGwTab1=function(){var e=this.gwSbRed1;return this.gwTaskRed1?this.gwSbRed1=!0:o.default.ins().getWeaponData(1)?(this.gwSbRed1=o.default.ins().maxLvRedPoint()||o.default.ins().getWeaponData(1).hasRedPoint||o.default.ins().getSwRedPoint(1),this.gwSbRed1||(this.gwSbRed1=o.default.ins().weaponIsActive(1)&&o.default.ins().maxLvRedPoint())):this.gwSbRed1=!1,e!=this.gwSbRed1},t.prototype.postGwTab2=function(){var e=this.gwSbRed2;return this.gwTaskRed2?this.gwSbRed2=!0:o.default.ins().getWeaponData(2)?(this.gwSbRed2=o.default.ins().maxLvRedPoint()||o.default.ins().getWeaponData(2).hasRedPoint||o.default.ins().getSwRedPoint(2),this.gwSbRed2||(this.gwSbRed2=o.default.ins().weaponIsActive(2)&&o.default.ins().maxLvRedPoint())):this.gwSbRed2=!1,e!=this.gwSbRed2},t.prototype.postGwTab3=function(){var e=this.gwSbRed3;return this.gwTaskRed3?this.gwSbRed3=!0:o.default.ins().getWeaponData(3)?(this.gwSbRed3=o.default.ins().maxLvRedPoint()||o.default.ins().getWeaponData(3).hasRedPoint||o.default.ins().getSwRedPoint(3),this.gwSbRed3||(this.gwSbRed3=o.default.ins().weaponIsActive(3)&&o.default.ins().maxLvRedPoint())):this.gwSbRed3=!1,e!=this.gwSbRed3},t.prototype.postGwMj=function(){var e=this.gwMjRed;return this.gwMjRed=o.default.ins().mijintHadRedPoint(),e!=this.gwMjRed},t.prototype.postGwTask=function(){this.gwTaskRed;if(this.gwTaskRed=!1,o.default.ins().taskIsOpen()){var e=o.default.ins().gwTask;if(e.statue==c.default.DONE||e.statue==c.default.FINISH?this.gwTaskRed=!0:0==e.taskIdx&&d.default.ins().subRolesLen>o.default.ins().weaponDataAry.length&&(this.gwTaskRed=!0),this.gwTaskRed)for(var t=1;t<=3;t++)o.default.ins().getWeaponData(t)?this["gwTaskRed"+t]=!1:d.default.ins().getSubRoleByJob(t)&&0==e.taskIdx||e.weapon==t?this["gwTaskRed"+t]=!0:this["gwTaskRed"+t]=!1;else this.gwTaskRed1=!1,this.gwTaskRed2=!1,this.gwTaskRed3=!1}return!0},t.prototype.postgGwBossRp=function(){var e=this.gwBossRp;return this.gwBossRp=o.default.ins().godWeaponIsOpen()&&(s.default.ins().checkWorldBossRedPoint(s.default.BOSS_SUBTYPE_GODWEAPON)||s.default.ins().checkWorldBossRedPoint(s.default.BOSS_SUBTYPE_GODWEAPON_TOP)),e!=this.gwBossRp},t}(n.default);i.default=f,window.GameSystem.push(f.ins.bind(f)),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../base/BaseSystem":"BaseSystem","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../bag/UserBag":"UserBag","../../boss/UserBoss":"UserBoss","../../gamescene/GameLogic":"GameLogic","../GodWeaponCC":"GodWeaponCC","./GwTaskData":"GwTaskData"}],GodWeaponTaskConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ed76dT3g5NAtbGV+r45qkwp","GodWeaponTaskConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],GodWingItemConfig:[function(e,t,i){"use strict";cc._RF.push(t,"42648GmPVhPqZ+AQOJtewpa","GodWingItemConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GodWingLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3d4f5EgsAxHc7RkbktZS7AD","GodWingLevelConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GodWingRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"29baaS5IDxEvZ5rqhYF/Ndu","GodWingRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../rolewin/Wing"),o=e("../bag/UserBag"),r=e("../server/GameServer"),s=e("../../consts/ItemType"),u=e("../../manager/GlobalConfig"),l=e("../../entity/SubRoles"),c=e("../../../core/base/MessageCenter"),d=function(e){function t(){var i=e.call(this)||this;return i.roleTabs={},i.tabs={},i.roleTabs={},i.redPoint=!1,c.default.compile(t),i.associated(i.postGodWingRedPoint,i.postGodWingItem),i.associated(i.postGodWingItem,a.default.ins().postWingWear,a.default.ins().postGodWingData,a.default.ins().postWingUpgrade,a.default.ins().postActivate,o.default.ins().postItemChange,o.default.ins().postItemAdd),i.associated(i.postGodWingCompose,o.default.ins().postItemChange,o.default.ins().postItemAdd),i}return __extends(t,e),t.prototype.postGodWingRedPoint=function(){var e=this.redPoint;return this.redPoint=this.tabs[0]||this.tabs[1],e!=this.redPoint},t.prototype.postGodWingItem=function(){this.roleTabs[0]||(this.roleTabs[0]={});for(var e=0;e<3;e++)this.roleTabs[0]||(this.roleTabs[0]={}),this.roleTabs[0][e]=a.default.ins().isWearGodWing(e);for(var t in this.tabs[0]=!1,this.roleTabs[0])this.roleTabs[0][t]&&(this.tabs[0]=!0);return!0},t.prototype.postGodWingCompose=function(){return this.tabs[1]=a.default.ins().isComposeGodWingAll(),this.roleTabs[1]||(this.roleTabs[1]={}),!0},t.prototype.postGodWingTransfer=function(){this.roleTabs[2]||(this.roleTabs[2]={}),this.tabs[2]=Boolean(o.default.ins().getBagGoodsByType(s.ItemType.TYPE_16))},t.prototype.getGodWingRedPoint=function(){if(r.default.serverOpenDay+1<u.default.WingCommonConfig.openDay)return!1;for(var e=0;e<l.default.ins().subRolesLen;e++){if(l.default.ins().getSubRoleByIndex(e).wingsData.openStatus)return this.redPoint}return!1},t}(n.default);i.default=d,window.GameSystem.push(d.ins.bind(d)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../base/BaseSystem":"BaseSystem","../../consts/ItemType":"ItemType","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../rolewin/Wing":"Wing","../server/GameServer":"GameServer"}],GodWingSuitConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e55029MaX5K3ZcqfG01kOfp","GodWingSuitConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GodweaponItemConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4f127ccy39HuYsXr0/GJjLq","GodweaponItemConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],GuanYinAwardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4a747steFRCTaCPic0Oqz7P","GuanYinAwardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.level=0}}();i.default=n,cc._RF.pop()},{}],GuardCopyInfo:[function(e,t,i){"use strict";cc._RF.push(t,"7f092xwy+tLfJdsSuF7rOcw","GuardCopyInfo"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.wave=0,this.score=0,this.callBossNum=0,this.monsterNum=0,this.minMonsterWave=0,this.minMonsteNums=0}return e.prototype.parser=function(e,t,i,n,a,o){this.wave=e,this.score=t,this.callBossNum=i,this.monsterNum=n,this.minMonsterWave=a,this.minMonsteNums=o},e}();i.default=n,cc._RF.pop()},{}],GuardGodWeaponConf:[function(e,t,i){"use strict";cc._RF.push(t,"839d3SMyD1Gf7YydTxZOg3R","GuardGodWeaponConf"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuardWeaponModel:[function(e,t,i){"use strict";cc._RF.push(t,"d8938RvkZZM84oyfRlHaMnH","GuardWeaponModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../../manager/GlobalConfig"),o=e("../../server/GameServer"),r=e("../../zs/UserZs"),s=e("./GuardCopyInfo"),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.isShowSweep=!1,t.guardCopyInfo=new s.default,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.canChallenge=function(){return this.isOpen()&&a.default.GuardGodWeaponConf.dailyCount>this.challengeTimes},t.prototype.isOpen=function(){var e=a.default.GuardGodWeaponConf.opencondition,t=e[0],i=e[1];return r.default.ins().lv>=t&&o.default.serverOpenDay+1>=i},t.prototype.getDesc=function(){var e=a.default.GuardGodWeaponConf.opencondition;return"\u89d2\u8272"+e[0]+"\u8f6c\uff0c\u5e76\u4e14\u5f00\u670d\u7b2c"+e[1]+"\u5929\u5f00\u542f"},t.prototype.getMaxWaves=function(){var e=a.default.GGWWaveConf[r.default.ins().lv]||{};return Object.keys(e).length},t.prototype.getWaveTime=function(e){return 0==e?a.default.GuardGodWeaponConf.starDelayRsf:a.default.GGWWaveConf[r.default.ins().lv][e].time},t.prototype.isCanCallBoss=function(){return this.getCallBossTimes()>0},t.prototype.getCallBossTimes=function(){var e=this.guardCopyInfo.wave,t=0;for(var i in a.default.GuardGodWeaponConf.sSummonLimit)e>=+i&&(t+=a.default.GuardGodWeaponConf.sSummonLimit[i]);return t-this.guardCopyInfo.callBossNum},t.prototype.callBossMoney=function(){var e=this.getCallBossTimes();return a.default.GuardGodWeaponConf.sSummonCost[e-1]},t.prototype.getKillWave=function(){return this.guardCopyInfo.wave},t}(n.default);i.default=u,cc._RF.pop()},{"../../../../core/base/BaseClass":"BaseClass","../../../manager/GlobalConfig":"GlobalConfig","../../server/GameServer":"GameServer","../../zs/UserZs":"UserZs","./GuardCopyInfo":"GuardCopyInfo"}],GuideCondition:[function(e,t,i){"use strict";cc._RF.push(t,"e6789LgUz5JJ4oPMOWkFTQe","GuideCondition");cc._RF.pop()},{}],GuideConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5fb41t4gDNG07dfxeupDAK1","GuideConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],GuideUtils:[function(require,module,exports){"use strict";cc._RF.push(module,"42a79nCYTZJDpo6pM/yG9JC","GuideUtils"),Object.defineProperty(exports,"__esModule",{value:!0});var BaseClass_1=require("../../base/BaseClass"),GlobalConfig_1=require("../../../game/manager/GlobalConfig"),MessageCenter_1=require("../../base/MessageCenter"),UserTask_1=require("../../../game/module/task/UserTask"),ErrorLog_1=require("../../base/ErrorLog"),TimerManager_1=require("../../../game/manager/TimerManager"),DisplayUtils_1=require("../../utils/DisplayUtils"),Setting_1=require("../../../game/module/setting/Setting"),GuideUtils=function(_super){function GuideUtils(){var e=_super.call(this)||this;return e.step=0,e.part=0,e.wrongCount=0,e.maxWrongCount=2,e}return __extends(GuideUtils,_super),GuideUtils.ins=function(){return _super.ins.call(this)},GuideUtils.prototype.init=function(){if(!this.isInit){var e;for(var t in this.isInit=!0,0==Setting_1.default.currPart?(this.part=1,this.step=1):(this.part=Setting_1.default.currPart,this.step=Setting_1.default.currStep),this.cfg=[],GlobalConfig_1.default.GuideConfig){for(var i in e=[],GlobalConfig_1.default.GuideConfig[t])e.push(GlobalConfig_1.default.GuideConfig[t][i]);this.cfg.push(e)}if(this.part<=this.cfg.length){var n=this.cfg[this.part-1].length-1;this.overs=this.cfg[this.part-1][n].overs}this.part<=this.cfg.length&&MessageCenter_1.default.ins().addListener(UserTask_1.default.ins().postUpdteTaskTrace,this.updateByTask,this)}},GuideUtils.prototype.updateByTask=function(){this.guideOver(),this.update(1)},GuideUtils.prototype.updateByClick=function(){this.update(2)},GuideUtils.prototype.updateByAppear=function(){this.update(3)},GuideUtils.prototype.canShow=function(){return!ErrorLog_1.default.Assert(this.cfg,"\u65b0\u624b\u5f15\u5bfc\u672a\u521d\u59cb\u5316\u5c31\u8c03\u7528 canShow()")&&(this.part>this.cfg.length?(MessageCenter_1.default.ins().removeAll(this),!1):!this.view||!this.view.parent)},GuideUtils.prototype.checkShow=function(){if(!this.curCfg)return!1;try{if(!this.getDisplayObj(this.part,this.step))return!1}catch(e){return!1}return!0},GuideUtils.prototype.addTimeHandler=function(){TimerManager_1.default.ins().isExists(this.timeHandler,this)||TimerManager_1.default.ins().doTimer(50,0,this.timeHandler,this)},GuideUtils.prototype.removeTimeHandler=function(){TimerManager_1.default.ins().remove(this.timeHandler,this)},GuideUtils.prototype.timeHandler=function(){this.canShow()?this.checkShow()&&this.show(this.part,this.step):this.removeTimeHandler()},GuideUtils.prototype.guideOver=function(){var e=UserTask_1.default.ins().taskTrace;if(this.overs&&e&&0==e.state)for(var t=this.overs.length,i=0;i<t;i++){var n=this.overs[i];if(1==n.type&&n.value==e.id)return this.readyForNext(),void this.close()}},GuideUtils.prototype.update=function(e){if((void 0===e&&(e=0),0!=this.canShow())&&(this.curCfg=this.cfg[this.part-1][this.step-1],this.curCfg&&this.curCfg.start))if(1==e){if(1==this.curCfg.start.type)(t=UserTask_1.default.ins().taskTrace).id==this.curCfg.start.value&&0==t.state&&GuideUtils.ins().show(this.part,this.step);else if(3==this.curCfg.start.type){(t=UserTask_1.default.ins().taskTrace).id==this.curCfg.start.value&&1==t.state&&GuideUtils.ins().show(this.part,this.step)}}else if(2==e){var t;if(2==this.curCfg.start.type)(t=UserTask_1.default.ins().taskTrace).id==this.curCfg.start.value&&0==t.state&&GuideUtils.ins().show(this.part,this.step)}else 3==e&&4==this.curCfg.start.type&&GuideUtils.ins().show(this.part,this.step)},GuideUtils.prototype.show=function(e,t){var i=this;this.part=e,this.step=t;var n,a=this.cfg[this.part-1];if(this.curCfg=a?this.cfg[this.part-1][this.step-1]:null,!this.curCfg)return this.readyForNext(),void this.close();if(!this.checkShow())return this.close(),void this.addTimeHandler();null==this.view&&(this.view=new GuideView),this.view.clickCD=!0,this.view.hasEventListener(egret.Event.CHANGE)||this.view.addEventListener(egret.Event.CHANGE,this.next,this),this.save();try{n=this.getDisplayObj(e,t)}catch(n){return this.wrongCount>=this.maxWrongCount?void this.close():(this.wrongCount++,this.view.close(),console.log("\u65b0\u624b\u5f15\u5bfc:"+e+","+t+"\u51fa\u9519,\u91cd\u65b0\u64ad\u653e"),void TimerManager_1.default.ins().doTimer(300,1,function(){i.show(e,t-1)},this))}n?(console.log("\u64ad\u653e\u65b0\u624b\u5f15\u5bfc:"+e+","+t),TimerManager_1.default.ins().doNext(function(){i.view.show(n),StageUtils.ins().getStage().addChild(i.view)},this)):(this.readyForNext(),this.close())},GuideUtils.prototype.clickOut=function(){this.curCfg&&1==this.curCfg.type&&(this.readyForNext(),this.close())},GuideUtils.prototype.readyForNext=function(){if(this.part++,this.step=1,this.part<=this.cfg.length){var e=this.cfg[this.part-1].length-1;this.overs=this.cfg[this.part-1][e].overs}else this.overs=null;this.curCfg=null},GuideUtils.prototype.close=function(){this.view&&(DisplayUtils_1.default.removeFromParent(this.view),this.view.close(),this.view.removeEventListener(egret.Event.CHANGE,this.next,this),this.wrongCount=0),this.removeTimeHandler()},GuideUtils.prototype.next=function(){var e=this;TimerManager_1.default.ins().doNext(function(){e.show(e.part,e.step+1)},this)},GuideUtils.prototype.save=function(){1==this.step&&(Setting_1.default.ins().setValue(Setting_1.ClientSet.guidePart,this.part+1),Setting_1.default.ins().setValue(Setting_1.ClientSet.guideStep,1))},GuideUtils.prototype.getDisplayObj=function(part,step){var displayObject,cfg;return this.cfg[part-1]&&step<=this.cfg[part-1].length&&(cfg=this.cfg[part-1][step-1],displayObject=eval("ViewManager.ins().getView("+cfg.view+")."+cfg.target)),displayObject},GuideUtils}(BaseClass_1.default);exports.default=GuideUtils,GuideUtils.ins(),cc._RF.pop()},{"../../../game/manager/GlobalConfig":"GlobalConfig","../../../game/manager/TimerManager":"TimerManager","../../../game/module/setting/Setting":"Setting","../../../game/module/task/UserTask":"UserTask","../../base/BaseClass":"BaseClass","../../base/ErrorLog":"ErrorLog","../../base/MessageCenter":"MessageCenter","../../utils/DisplayUtils":"DisplayUtils"}],GuildActivityConfig:[function(e,t,i){"use strict";cc._RF.push(t,"1dc3dZRE99PrrRf3XIm3UE0","GuildActivityConfig");cc._RF.pop()},{}],GuildApplyInfo:[function(e,t,i){"use strict";cc._RF.push(t,"2bda9m9lotB/o8JvGv4XwVz","GuildApplyInfo");cc._RF.pop()},{}],GuildBattleConst:[function(e,t,i){"use strict";cc._RF.push(t,"e6df4UgVexJZoIVNf+8hsJk","GuildBattleConst"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildBattleDayAward:[function(e,t,i){"use strict";cc._RF.push(t,"ea172V/qCtHI68jOcGyIxpH","GuildBattleDayAward"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildBattleDistributionAward:[function(e,t,i){"use strict";cc._RF.push(t,"b7b3bw6Y1NB/IB/+Yu/cA/d","GuildBattleDistributionAward"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildBattleLevel:[function(e,t,i){"use strict";cc._RF.push(t,"75b0e/PgXJBXqgReTmZyUMl","GuildBattleLevel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildBattlePersonalAward:[function(e,t,i){"use strict";cc._RF.push(t,"33d8eRXBNtK4a14o2S1rtHq","GuildBattlePersonalAward"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildBattlePersonalRankAward:[function(e,t,i){"use strict";cc._RF.push(t,"6d690cRObtPaKOmPxViSGe6","GuildBattlePersonalRankAward"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildBonFireConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e53e02KvD5Np6kojTX3i6WQ","GuildBonFireConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],GuildBossConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a80daN9BxxHlopzqF5uih2U","GuildBossConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.dayTimes=0,this.notOpenDayOfWeek=0,this.effid=0,this.radisLv=0}}();i.default=n,cc._RF.pop()},{}],GuildBossHpAwardsConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4fdd6ox48tIf6+XAckMGIUk","GuildBossHpAwardsConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.srank=0,this.erank=0,this.mail_head="",this.mail_content=""}}();i.default=n,cc._RF.pop()},{}],GuildBossInfoConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4d770nVvHxK9rfaIAiULZ6T","GuildBossInfoConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.fbId=0,this.enterAwards=0}}();i.default=n,cc._RF.pop()},{}],GuildBossRankConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7eb5clP68JPHZX2avKQPpT/","GuildBossRankConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildBoss:[function(e,t,i){"use strict";cc._RF.push(t,"be77f7k0qZNEIuVjq5QFpH/","GuildBoss"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../activity/model/RewardData"),r=e("../../manager/TimerManager"),s=e("../server/GameServer"),u=e("../../manager/GlobalConfig"),l=e("../../map/GameMap"),c=e("../../../core/base/ResultManager"),d=e("../../../core/base/MessageCenter"),f=function(e){function t(){var i=e.call(this)||this;return i.leftTimes=0,i.canChallenge=0,i.isKilled=0,i.passId=0,i.challengeTime=0,i.bossHP=0,i.otherGuildId=0,i.otherGuildName="",i.otherGuildBossHp=0,i.winnerId=0,i.guildRankDic=[],i.guildPersonRankDic=[],i.guildBossState=0,d.default.compile(t),i.sysId=a.PackageID.GuildBoss,i.regNetMsg(1,i.postGuildBossInfoChange),i.regNetMsg(2,i.doRewardRecord),i.regNetMsg(3,i.postGuildBossDetailChange),i.regNetMsg(4,i.doGuildChallengeBack),i.regNetMsg(5,i.postGuildBossRankInfoChange),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postGuildBossInfoChange=function(e){this.leftTimes=e.readInt();var t=e.readUnsignedByte();this.passRecord=[];for(var i=0;i<t;i++)this.passRecord[e.readByte()]=e.readByte();this.canChallenge=e.readByte()},t.prototype.doRewardRecord=function(e){this.isKilled=e.readByte();for(var t=e.readInt(),i=[],n=0;n<t;n++){var a=new o.default;a.parser(e),i.push(a)}r.default.ins().doTimer(800,1,function(){c.default.ins().create(l.default.fbType,1,i,"\u83b7\u5f97\u5956\u52b1\u5982\u4e0b\uff1a")},this)},t.prototype.postGuildBossDetailChange=function(e){this.passId=e.readInt();var t=e.readInt();this.challengeTime=s.default.serverTime+1e3*t,this.bossHP=e.readInt(),this.otherGuildId=e.readInt(),this.otherGuildName=e.readString(),this.otherGuildBossHp=e.readInt(),this.winnerId=e.readInt()},t.prototype.doGuildChallengeBack=function(e){this.guildBossState=e.readInt(),0==this.guildBossState?(this.leftTimes--,this.postChallengeSuccess()):5==this.guildBossState&&this.sendGetBossInfo()},t.prototype.postGuildBossRankInfoChange=function(e){var t=e.readInt(),i=e.readByte();this.guildRankDic[t]=[],this.guildPersonRankDic[t]=[];for(var n=0;n<i;n++){(a=new p).name=e.readString(),a.damage=e.readInt(),a.rank=n+1,this.guildRankDic[t].push(a)}i=e.readInt();for(n=0;n<i;n++){var a;(a=new p).name=e.readString(),a.damage=e.readInt(),a.devote=e.readInt(),a.rank=n+1,this.guildPersonRankDic[t].push(a)}},t.prototype.sendChallengeBoss=function(e){var t=this.getBytes(1);t.writeByte(e),this.sendToServer(t)},t.prototype.sendGetBossReward=function(e){var t=this.getBytes(2);t.writeInt(e),this.sendToServer(t)},t.prototype.sendGetBossInfo=function(){this.sendBaseProto(3)},t.prototype.sendGetBossRankInfo=function(e){var t=this.getBytes(5);t.writeInt(e),this.sendToServer(t)},t.prototype.getBossRewardState=function(){for(var e in t.ins().passRecord)if(1==t.ins().passRecord[e])return!0;return!1},t.prototype.getBossChallenge=function(){if(!this.isOpen())return!1;if(t.ins().leftTimes<=0)return!1;for(var e in t.ins().passRecord)if(0==t.ins().passRecord[e])return!0;return!1},t.prototype.isOpen=function(){return new Date(s.default.serverTime).getDay()!=u.default.GuildBossConfig.notOpenDayOfWeek},t.prototype.postChallengeSuccess=function(){},t}(n.default);i.default=f;var p=function(){return function(){this.name="",this.damage=0,this.rank=0,this.devote=0}}();f.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/base/ResultManager":"ResultManager","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../../map/GameMap":"GameMap","../activity/model/RewardData":"RewardData","../server/GameServer":"GameServer"}],GuildBuilding:[function(e,t,i){"use strict";var n;cc._RF.push(t,"f3dc6UmorhAfq7Wd9TaxDdc","GuildBuilding"),function(e){e[e.GUILD_HALL=1]="GUILD_HALL",e[e.GUILD_LIANGONGFANG=2]="GUILD_LIANGONGFANG",e[e.GUILD_SHOP=3]="GUILD_SHOP",e[e.GUILD_COMMENT=4]="GUILD_COMMENT"}(n||(n={})),cc._RF.pop()},{}],GuildCommonSkillConfig:[function(e,t,i){"use strict";cc._RF.push(t,"68606WmmpNEOaTxqFo2aYBr","GuildCommonSkillConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildConfig:[function(e,t,i){"use strict";cc._RF.push(t,"06488sP+/BGkp13addOWDLN","GuildConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildCreateConfig:[function(e,t,i){"use strict";cc._RF.push(t,"92c05U/M3FKoqC/oGqvnCd7","GuildCreateConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildDonateConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f31f10AYixCUq9QV2gNk0+j","GuildDonateConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildFBModel:[function(e,t,i){"use strict";cc._RF.push(t,"6ed2aEDLM1D/aBmGwyv0RZk","GuildFBModel");(function(){function e(){this.bossTimer=1}e.prototype.parserBaseInfo=function(e){this.fbNum=e.readShort(),this.sweep=e.readByte(),this.sweepNum=e.readShort(),this.tongguan=e.readByte(),this.zuwei=e.readByte(),this.nextFb=e.readByte()},e.prototype.parserRankInfo=function(e){this.rankDatas=[];for(var t=e.readByte(),i=0;i<t;i++){var n=new GuildFBRankInfo;n.rank=i+1,n.name=e.readString(),n.guanka=e.readShort(),this.rankDatas.push(n)}},e.prototype.parserMaxGkInfo=function(e){this.isMaxGK=e.readByte(),0!=this.isMaxGK&&(this.maxName=e.readString(),this.maxCareer=e.readByte(),this.maxSex=e.readByte(),this.maxNum=e.readShort(),this.maxZhuwei=e.readByte())},e.prototype.parserGkInfo=function(e){this.fbgkNum=e.readShort();var t=e.readByte();this.gkDatas=[];for(var i=0;i<t;i++)this.gkDatas.push(e.readString())},e.prototype.parserRewardInfo=function(e){this.rewardNum=e.readShort(),this.rewardRoleNum=e.readShort()},e.prototype.hasbtn=function(){return GameServer.serverOpenDay>0&&(0==this.sweep&&this.fbNum>0||0==this.tongguan&&this.rewardNum>0)},Object.defineProperty(e.prototype,"bossTimerEnd",{get:function(){return this.bossTimer+egret.getTimer()},enumerable:!0,configurable:!0})})();cc._RF.pop()},{}],GuildFBRankInfo:[function(e,t,i){"use strict";cc._RF.push(t,"a5bd8wt3qlCBIc1mK9TpERm","GuildFBRankInfo");cc._RF.pop()},{}],GuildFB:[function(e,t,i){"use strict";cc._RF.push(t,"d864ajhZTtGH5Qo7xrDINxc","GuildFB"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/utils/DateUtils"),r=e("../server/GameServer"),s=e("../../Utils/EgretUtils"),u=e("../../../core/base/MessageCenter"),l=function(e){function t(){var i=e.call(this)||this;return i.bossTimer=1,u.default.compile(t),i.sysId=a.PackageID.GuildFB,i.regNetMsg(1,i.doGuildFBInfo),i.regNetMsg(2,i.doGuildFBRankInfo),i.regNetMsg(3,i.doGuildFBMaxGKInfo),i.regNetMsg(4,i.doGuildFBGKInfo),i.regNetMsg(5,i.doGuildFBChangeInfo),i.regNetMsg(6,i.doGuildFBRewardInfo),i.regNetMsg(7,i.postGuildFBBossInfo),i.regNetMsg(8,i.postGuildFBBossTimerEndInfo),i.regNetMsg(9,i.postGuildFBSweepEnd),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getGkDatas=function(e){return void 0===e&&(e=-1),-1==e?this._gkDatas:this._gkDatas[e]},t.prototype.doGuildFBInfo=function(e){this.fbNum=e.readShort(),this.sweep=e.readByte(),this.sweepNum=e.readShort(),this.tongguan=e.readByte(),this.zuwei=e.readByte(),this.nextFb=e.readByte(),this.postGuildFubenInfo()},t.prototype.postGuildFubenInfo=function(){},t.prototype.doGuildFBRankInfo=function(e){this.rankDatas=[];for(var t=e.readByte(),i=0;i<t;i++){var n=new GuildFBRankInfo;n.rank=i+1,n.name=e.readString(),n.guanka=e.readShort(),this.rankDatas.push(n)}this.postGuildFubenInfo()},t.prototype.doGuildFBMaxGKInfo=function(e){this.isMaxGK=e.readByte(),0!=this.isMaxGK&&(this.maxName=e.readString(),this.maxCareer=e.readByte(),this.maxSex=e.readByte(),this.maxNum=e.readShort(),this.maxZhuwei=e.readByte()),this.postGuildFubenInfo()},t.prototype.doGuildFBGKInfo=function(e){this.fbgkNum=e.readShort();var t=e.readByte();this._gkDatas=[];for(var i=0;i<t;i++)this._gkDatas.push(e.readString());this.postGuildFubenInfo(),this.postGuildFubenRoleInfo()},t.prototype.postGuildFubenRoleInfo=function(){},t.prototype.doGuildFBChangeInfo=function(e){this.change=e.readByte(),ViewManager.ins().getView(GuildActivityWin)&&ViewManager.ins().getView(GuildActivityWin).isShow()&&(1==this.change?this.sendGuildFBRankInfo():2==this.change&&this.sendGuildFBMaxGKInfo(),this.change=0)},t.prototype.doGuildFBRewardInfo=function(e){this.rewardNum=e.readShort(),this.rewardRoleNum=e.readShort(),this.postGuildFubenInfo()},t.prototype.postGuildFBBossInfo=function(e){this.bossGKNum=e.readShort()},t.prototype.postGuildFBBossTimerEndInfo=function(e){this.bossGKNum=e.readShort(),this.bossTimer=o.default.formatMiniDateTime(e.readInt())},t.prototype.postGuildFBSweepEnd=function(e){},t.prototype.sendGuildFBRankInfo=function(){this.sendBaseProto(2)},t.prototype.sendGuildFBMaxGKInfo=function(){this.sendBaseProto(3)},t.prototype.sendGuildFBGKRoleInfo=function(e){var t=this.getBytes(4);t.writeShort(e),this.sendToServer(t)},t.prototype.sendGuildFBChallange=function(){this.sendBaseProto(5)},t.prototype.sendGuildFBSweep=function(){this.sendBaseProto(6)},t.prototype.sendGuildFBZhuwei=function(){this.sendBaseProto(7)},t.prototype.sendGuildFBReward=function(){this.sendBaseProto(8)},t.prototype.hasbtn=function(){return r.default.serverOpenDay>0&&(0==this.sweep&&this.fbNum>0||0==this.tongguan&&this.rewardNum>0)},Object.defineProperty(t.prototype,"bossTimerEnd",{get:function(){return this.bossTimer+s.default.getTimer()},enumerable:!0,configurable:!0}),t}(n.default);i.default=l,l.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../Utils/EgretUtils":"EgretUtils","../../base/BaseSystem":"BaseSystem","../server/GameServer":"GameServer"}],GuildIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"3f5fa0aPMtJp4u05kuDDIgT","GuildIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../guild/GuildRedPoint"),r=e("../../../manager/GlobalConfig"),s=e("../../guild/Guild"),u=e("../../tips/UserTips"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postLevelChange],n.updateMessage=[o.default.ins().postHanghui],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return a.default.level>=r.default.GuildConfig.openLevel},t.prototype.checkShowRedPoint=function(){return o.default.ins().hanghui},t.prototype.tapExecute=function(){a.default.level>=r.default.GuildConfig.openLevel?void 0==s.default.ins().guildID||0==s.default.ins().guildID?ViewManager.ins().open(GuildApplyWin):ViewManager.ins().open(GuildMap):u.default.ins().showTips(r.default.GuildConfig.openLevel+"\u7ea7\u5f00\u542f")},t}(n.default);i.default=l,cc._RF.pop()},{"../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../guild/Guild":"Guild","../../guild/GuildRedPoint":"GuildRedPoint","../../tips/UserTips":"UserTips","./RuleIconBase":"RuleIconBase"}],GuildLanguage:[function(e,t,i){"use strict";cc._RF.push(t,"b3fc1sUdzdLroiMrlc5NAyD","GuildLanguage");(function(){function e(){}e.guildOffice=["\u6210\u5458","\u7cbe\u82f1","\u5802\u4e3b","\u62a4\u6cd5","\u957f\u8001","\u526f\u4f1a\u957f","\u4f1a\u957f"],e.guildOfficeColor=["d1c3a8","00c832","1694ec","8e2abc","f4b12a","ffff00","ffff00"],e.guildBuilding=["","\u7ba1\u7406\u5927\u5385","\u7ec3\u529f\u623f"]})();cc._RF.pop()},{}],GuildLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9ee8dSFkl5ALZS31sxyWx/H","GuildLevelConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildListInfo:[function(e,t,i){"use strict";cc._RF.push(t,"fde67pozuBH1J2PUsDl/GfV","GuildListInfo");cc._RF.pop()},{}],GuildMemberInfo:[function(e,t,i){"use strict";cc._RF.push(t,"c9c92Fy/6hKuJbwSjWbN1Ol","GuildMemberInfo");(function(){function e(){this.level=0,this.zsLevel=0}e.prototype.parse=function(e){this.roleID=e.readInt(),this.vipLevel=e.readInt(),this.attack=e.readInt(),this.sex=e.readUnsignedByte(),this.job=e.readUnsignedByte(),this.name=e.readString(),this.zsLevel=e.readInt(),this.score=e.readInt(),this.winRate=e.readInt()/1e4,this.KfArenaCount=e.readUnsignedByte(),this.isJoinkfArena=1==e.readUnsignedByte()},e.prototype.copyData=function(e){for(var t in e)this[t]=e[t]}})();cc._RF.pop()},{}],GuildMessageInfo:[function(e,t,i){"use strict";cc._RF.push(t,"4d065bm70lK/7FwZIGPOY2d","GuildMessageInfo");(function(){function e(){}e.prototype.parserMessage=function(e){this.type=e.readUnsignedByte(),this.content=e.readString(),1==this.type&&(this.roleId=e.readInt(),this.name=e.readString(),this.job=e.readUnsignedByte(),this.sex=e.readUnsignedByte(),this.vipLevel=e.readInt(),this.monthCard=e.readUnsignedByte(),this.office=e.readUnsignedByte(),this.zsLevel=e.readUnsignedByte(),this.lv=e.readShort(),this.guildName=e.readString())}})();cc._RF.pop()},{}],GuildOffice:[function(e,t,i){"use strict";var n;cc._RF.push(t,"75650GjJORKg6jt7ZEk2H+1","GuildOffice"),function(e){e[e.GUILD_MEMBER=0]="GUILD_MEMBER",e[e.GUILD_JINGYING=1]="GUILD_JINGYING",e[e.GUILD_TANGZHU=2]="GUILD_TANGZHU",e[e.GUILD_HUFA=3]="GUILD_HUFA",e[e.GUILD_ZHANGLAO=4]="GUILD_ZHANGLAO",e[e.GUILD_FUBANGZHU=5]="GUILD_FUBANGZHU",e[e.GUILD_BANGZHU=6]="GUILD_BANGZHU"}(n||(n={})),cc._RF.pop()},{}],GuildPracticeSkillConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d7084G2SiJNP6N+zlwxjBju","GuildPracticeSkillConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"897c1oTHdhK9Ymzu7m+ZT6C","GuildRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("./GuildWar"),o=e("./Guild"),r=e("../../entity/Actor"),s=e("./GuildRobber"),u=e("./GuildFB"),l=e("./GuildBoss"),c=e("../bag/UserBag"),d=e("../../manager/GlobalConfig"),f=e("../../entity/SubRoles"),p=e("../../../core/base/MessageCenter"),h=function(e){function t(){var i=e.call(this)||this;return i.hanghui=!1,i.sendReward=!1,i.redBag=!1,i.sczb=!1,i.hhdt=!1,i.gldt=!1,i.hhBoss=!1,i.dayReward=!1,i.guildFire=!1,i.roleTabs={},i.roleSkillTabs={},i.liangongRed=!1,p.default.compile(t),i.roleTabs={},i.roleSkillTabs={},i.associated(i.postDayReward,a.default.ins().postDayRewardInfo),i.associated(i.postSczb,i.postDayReward,i.postRedBag),i.associated(i.postSendReward,a.default.ins().postAssignsReward,a.default.ins().postSendRewardSuccess),i.associated(i.postRedBag,a.default.ins().postRedBagInfo),i.associated(i.postHhdt,o.default.ins().postApplyInfos,o.default.ins().postJoinGuild,o.default.ins().postMyGuildInfo,i.postLianGongRedPoint,i.postGldt),i.associated(i.postGldt,o.default.ins().postUpBuilding,o.default.ins().postManageList,o.default.ins().postGuildMoney,o.default.ins().postMyGuildInfo),i.associated(i.postHanghui,i.postSendReward,i.postSczb,i.postHhdt,i.postGuildFire,i.postLianGongRedPoint,r.default.ins().postLevelChange,u.default.ins().postGuildFubenInfo,s.default.ins().postGuildRobberInfo,a.default.ins().postGuildWarStarInfo,o.default.ins().postGuildInfo,i.postHanghuiBoss),i.associated(i.postHanghuiBoss,l.default.ins().postGuildBossDetailChange,l.default.ins().postGuildBossInfoChange),i.associated(i.postGuildFire,c.default.ins().postItemAdd,c.default.ins().postItemDel,o.default.ins().postUpdateFire),i.associated(i.postLianGongRedPoint,o.default.ins().postLearnGuildSkill,o.default.ins().postUpBuilding,o.default.ins().postGuildSkillInfo,o.default.ins().postMyGuildInfo),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postGuildFire=function(){var e=this.guildFire,t=d.default.GuildConfig,i=c.default.ins().getBagItemById(t.bonfireItem);return i&&i.count>=(t.bonfirecaution||1)?this.guildFire=!0:this.guildFire=!1,this.guildFire!=e},t.prototype.postHhdt=function(){var e=this.hhdt;return this.hhdt=o.default.ins().hasApplys()||this.gldt,this.hhdt!=e},t.prototype.postGldt=function(){var e=this.gldt;return this.gldt=o.default.ins().isUpGradeBuilding(),this.gldt!=e},t.prototype.postDayReward=function(){var e=this.dayReward;return this.dayReward=a.default.ins().getModel().canGetDay&&!a.default.ins().getModel().getDayReward,this.dayReward!=e},t.prototype.postSczb=function(){var e=this.sczb;return this.sczb=this.dayReward||this.redBag,this.sczb!=e},t.prototype.postRedBag=function(){var e=this.redBag;return this.redBag=a.default.ins().getModel().isHaveRedBag(),this.redBag!=e},t.prototype.postSendReward=function(){var e=this.sendReward;return this.sendReward=a.default.ins().getModel().canSendReward,this.sendReward!=e},t.prototype.postHanghui=function(){var e=this.hanghui,t=!1;return u.default.ins().hasbtn()&&(t=!0),(void 0==o.default.ins().guildID||0==o.default.ins().guildID)&&r.default.level>69&&(t=!0),this.hanghui=t||this.sendReward||this.redBag||this.sczb||this.hhBoss||this.guildFire||this.liangongRed||a.default.ins().getModel().isWatStart||this.hhdt,this.hanghui!=e},t.prototype.postHanghuiBoss=function(){var e=this.hhBoss;return this.hhBoss=l.default.ins().getBossRewardState()||l.default.ins().getBossChallenge(),this.hhBoss!=e},t.prototype.postLianGongRedPoint=function(){this.liangongRed=!1;for(var e=t.Tab_LianGong,i=f.default.ins().subRolesLen,n=0;n<i;n++){var a=f.default.ins().getSubRoleByIndex(n);if(a){var s=o.default.ins().getSkllInfoByIndex(a.index);if(s){this.roleTabs[e]||(this.roleTabs[e]={}),this.roleTabs[e][n]=!1;for(var u=1;u<=3;u++){this.roleSkillTabs[n]||(this.roleSkillTabs[n]={}),this.roleSkillTabs[n][u]=!1;var l=d.default.GuildCommonSkillConfig[u].length,c=s.guildSkillInfo[u-1].level;if(!(c>=l)){var p=this.getCommonSkillDP(u,c+1);if(p&&!(p.contribute>o.default.ins().myCon||r.default.gold<p.money)){var h=o.default.ins().getBuildingLevels(GuildBuilding.GUILD_LIANGONGFANG-1);h<1||c>=d.default.GuildConfig.commonSkillLevels[h-1]||(this.roleSkillTabs[n][u]=!0,this.liangongRed=!0)}}}for(var g in this.roleSkillTabs[n])if(this.roleSkillTabs[n][g]){this.roleTabs[e][n]=!0;break}}}}},t.prototype.getCommonSkillDP=function(e,t){var i=d.default.GuildCommonSkillConfig[e];if(0==t)return i[1];for(var n in i){var a=i[n];if(a.level==t)return a}return null},t.Tab_LianGong=0,t}(n.default);i.default=h,h.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","./Guild":"Guild","./GuildBoss":"GuildBoss","./GuildFB":"GuildFB","./GuildRobber":"GuildRobber","./GuildWar":"GuildWar"}],GuildRobber:[function(e,t,i){"use strict";cc._RF.push(t,"e8df7ixZ/NPy40nUfL3IR8I","GuildRobber"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=function(e){function t(){var i=e.call(this)||this;return i.robberNum=0,i.robberTotal=0,i.robberDealNum=0,i._robberList=[],i.robberChanllge=0,i.isUpdateRobber=!1,o.default.compile(t),i.sysId=a.PackageID.GuildRobber,i.regNetMsg(1,i.doGuildRobberInfo),i.regNetMsg(2,i.doGuildRobberStarts),i.regNetMsg(3,i.doGuildRobberSX),i.regNetMsg(4,i.doGuildRobberChangller),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getRobberList=function(e){return void 0===e&&(e=-1),-1==e?this._robberList:this._robberList[e]},t.prototype.doGuildRobberInfo=function(e){if(this.robberNum=e.readByte(),this.robberNum>0){this.robberTotal=e.readByte(),this.robberDealNum=e.readByte(),this._robberList=[];for(var t=0;t<this.robberTotal;t++){var i=new RobberStartInfo;i.robberStart=e.readByte(),i.robberType=e.readByte(),this._robberList.push(i)}}this.postGuildRobberInfo()},t.prototype.postGuildRobberInfo=function(){},t.prototype.doGuildRobberStarts=function(e){var t=e.readByte();this._robberList.length>0&&(this._robberList[t-1].robberStart=e.readByte());this.robberDealNum=e.readByte(),this.postGuildRobberInfo()},t.prototype.doGuildRobberSX=function(e){this.robberNum=e.readByte(),ViewManager.ins().getView(GuildMap)?this.sendRobberInfo():this.isUpdateRobber=!0},t.prototype.doGuildRobberChangller=function(e){this.robberChanllge=e.readByte()},t.prototype.sendRobberInfo=function(){this.sendBaseProto(1)},t.prototype.sendRobberChanger=function(e){var t=this.getBytes(2);t.writeByte(e),this.sendToServer(t)},t.prototype.hasbtn=function(){return this.robberTotal>0&&this.robberTotal>this.robberDealNum},t}(n.default);i.default=r,r.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem"}],GuildSkillInfo:[function(e,t,i){"use strict";cc._RF.push(t,"366fb/DeelCyZM7jJtr7CyI","GuildSkillInfo");cc._RF.pop()},{}],GuildStoreConfig:[function(e,t,i){"use strict";cc._RF.push(t,"99f0fS6FVBC/bp4eB6wakJX","GuildStoreConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildStoreItemData:[function(e,t,i){"use strict";cc._RF.push(t,"a9bcfCyNcBD+ZkTZcck6aNQ","GuildStoreItemData");cc._RF.pop()},{}],GuildStoreModel:[function(e,t,i){"use strict";cc._RF.push(t,"97566k2lSNFf6p0IFZyEpht","GuildStoreModel");(function(){function e(){this.guildStoreLv=0,this.recordInfoAry=[],this.recordMax=50}e.prototype.parserBaseInfo=function(e){this.guildStoreLv=e.readByte(),this.guildStoreNum=e.readByte()},e.prototype.parserRecordInfo=function(e){var t,i=e.readByte(),n=[];if(null!=this.recordInfoAry&&this.recordInfoAry.length>0&&this.recordInfoAry.length+i>this.recordMax){var a=this.recordMax-i>0?this.recordMax-i:0;this.recordInfoAry.length=a}for(var o=0;o<i;o++)(t=new GuildStoreRecordInfo).times=e.readInt(),t.roleName=e.readString(),t.itemId=e.readInt(),n.push(t);this.recordInfoAry=n.concat(this.recordInfoAry)},e.prototype.parserBoxItemInfo=function(e){var t=e.readByte();this.guildStoreItemData=[];for(var i=0;i<t;i++){var n=new GuildStoreItemData;n.itemId=e.readInt(),n.num=e.readInt(),this.guildStoreItemData.push(n)}},e.prototype.parserRecord=function(e){this.recordInfo=new GuildStoreRecordInfo,this.recordInfo.roleName=e.readString(),this.recordInfo.itemId=e.readInt()}})();cc._RF.pop()},{}],GuildStoreRecordInfo:[function(e,t,i){"use strict";cc._RF.push(t,"b8ad1dDL6RAV42a1INfbSpl","GuildStoreRecordInfo");cc._RF.pop()},{}],GuildStore:[function(e,t,i){"use strict";cc._RF.push(t,"6f576dVHBNHEa8tDxZcRPeE","GuildStore"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=function(e){function t(){var t=e.call(this)||this;return t.guildStoreLv=0,t.guildStoreNum=0,t._recordInfoAry=[],t._guildStoreItemData=[],t.sysId=a.PackageID.GuildStore,t.regNetMsg(1,t.postGuildStoreInfo),t.regNetMsg(2,t.postGuildStoreBoxInfo),t.regNetMsg(3,t.postGuildStoreBox),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getRecordInfoAry=function(e){return void 0===e&&(e=-1),-1==e?this._recordInfoAry:this._recordInfoAry[e]},t.prototype.getGuildStoreItemData=function(e){return void 0===e&&(e=-1),-1==e?this._guildStoreItemData:this._guildStoreItemData[e]},t.prototype.postGuildStoreInfo=function(e){this.guildStoreLv=e.readByte(),this.guildStoreNum=e.readByte()},t.prototype.postGuildStoreBoxInfo=function(e){for(var t=e.readByte(),i=0;i<t;i++){var n=new GuildStoreRecordInfo;n.times=e.readInt(),n.roleName=e.readString(),n.itemId=e.readInt(),this._recordInfoAry.length>=50&&this._recordInfoAry.pop(),this._recordInfoAry.unshift(n)}},t.prototype.postGuildStoreBox=function(e){var t=e.readByte();this._guildStoreItemData=[];for(var i=0;i<t;i++){var n=new GuildStoreItemData;n.itemId=e.readInt(),n.num=e.readInt(),this._guildStoreItemData.push(n)}this.guildStoreNum-=1},t.prototype.doGuildStoreAddBoxInfo=function(e){this._recordInfo=new GuildStoreRecordInfo,this._recordInfo.roleName=e.readString(),this._recordInfo.itemId=e.readInt()},t.prototype.getGuildStoreInfo=function(){this.sendBaseProto(1)},t.prototype.sendGuildStoreBoxInfo=function(){var e=this.getBytes(2);null==this._recordInfoAry||0==this._recordInfoAry.length?e.writeInt(0):e.writeInt(this.getRecordInfoAry(0).times),this.sendToServer(e)},t.prototype.sendGuildStoreBox=function(){this.sendBaseProto(3)},t}(n.default);i.default=o,o.ins(),cc._RF.pop()},{"../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem"}],GuildTaskConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5b3e1nlLwBJQp75q9e6JXcV","GuildTaskConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],GuildTaskInfo:[function(e,t,i){"use strict";cc._RF.push(t,"a0845vvkwlDAo2aogOwf4y8","GuildTaskInfo");cc._RF.pop()},{}],GuildWarIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"ed3d2jQa6JCjZc/uID1rI+t","GuildWarIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../guild/GuildWar"),o=e("../../guild/Guild"),r=e("../../tips/UserTips"),s=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postGuildWarStarInfo],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return 1==a.default.ins().getModel().getIsShowGuildWarBtn()},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){void 0!=o.default.ins().guildID&&0!=o.default.ins().guildID?(a.default.ins().requestWinGuildInfo(),ViewManager.ins().close(GuildMap),ViewManager.ins().open(GuildWarMainWin)):r.default.ins().showTips("|C:0xf3311e&T:\u52a0\u5165\u516c\u4f1a\u540e\u624d\u80fd\u53c2\u4e0e\u9f99\u57ce\u4e89\u9738\u6d3b\u52a8|")},t}(n.default);i.default=s,cc._RF.pop()},{"../../guild/Guild":"Guild","../../guild/GuildWar":"GuildWar","../../tips/UserTips":"UserTips","./RuleIconBase":"RuleIconBase"}],GuildWarModel:[function(e,t,i){"use strict";cc._RF.push(t,"e8259rl/cNGVL5E4MxlFrGL","GuildWarModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../manager/GlobalConfig"),a=e("../../../entity/Actor"),o=e("../GuildWar"),r=e("../../../map/GameMap"),s=e("../Guild"),u=e("../../tips/UserTips"),l=e("../../../manager/TimerManager"),c=e("../../server/GameServer"),d=function(){function e(){this.guildPoint=0,this.ownPoint=0,this.gongXun=0,this.rewardDay=1,this.remainYB=-1,this.robYbNum=0,this.guildRankList=[],this.killName="",this.killGuild="",this.cityOwn="\u865a\u4f4d\u4ee5\u5f85",this.myRankList=[],this.weixieList=[],this.canPlayList=[],this.flagStatu=0,this.endTime=0,this.flagName="",this.flagAcId=0,this.flagGuild="",this.canClick=!0,this._canSendReward=!1,this.rewardIndex=0,this.sendList=[],this.sendNumList=[],this.rewardFlag=0,this.winGuildInfo=new y,this.guildWarNumDaXie=["\u65e5","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d"],this.rankList=[],this._doorEndtime=0,this.attHandle=0,this.myGuildPointRank=[],this.guildHandleList=[],this.guildNum=0}return e.prototype.creatGuildRankReward=function(e,t){void 0===t&&(t=-1),this.rewardList=[];var i=n.default.GuildBattleDistributionAward[e];for(var a in i)if(!i[a].rewardFlag||this.rewardFlag==f.hf){if(Number(a)==t+1)return i[a].awardShow;var o=i[a].awardShow;for(var r in o)this.checkIsHave(o[r])}return this.rewardList},e.prototype.creatGuildRewardList=function(){if(this.configList)return this.configList;this.configList=[];var e=n.default.GuildBattleDistributionAward;for(var t in e)-1==this.configList.lastIndexOf(e[t][1].rank)&&this.configList.push(e[t][1].rank);return this.configList},e.prototype.checkIsHave=function(e){for(var t=!1,i=this.rewardList.length,n=0;n<i;n++){var a=this.rewardList[n];a.id==e.id&&a.type==e.type&&(t=!0,this.rewardList[n].count+=e.count)}t||this.rewardList.push(e)},e.prototype.getRedbagInfo=function(e){this.remainYB=e.readInt(),this.canSend=e.readBoolean(),this.canRod=e.readBoolean(),this.sendYbNum=e.readInt(),this.maxRedNum=e.readInt(),this.remainRedNum=e.readInt();var t,i=e.readInt();this.rebList=[];for(var n=0;n<i;n++)(t=new p).parse(e),a.default.actorID==t.acId&&(this.robYbNum=t.robNum),this.rebList.push(t)},e.prototype.isHaveRedBag=function(){return this.canSend||this.canRod},e.prototype.checkinAppoint=function(e,t){if(void 0===e&&(e=0),void 0===t&&(t=!1),!o.default.ins().getModel().isWatStart||0==r.default.fubenID||0==s.default.ins().guildID)return!1;var i=n.default.GuildBattleLevel;for(var a in i)if(i[a].fbId==r.default.fubenID)return 0==e||(!!(t&&i[a].id>=e)||i[a].id==e);return!1},e.prototype.decodeGuildRankInfo=function(e){this.lastGuildName=e.readString();e.readByte();var t,i=e.readInt();this.guildRankList=[];for(var n=0;n<i;n++)(t=new h).parse(e),this.guildRankList.push(t);o.default.ins().postRankInfo()},e.prototype.getNextMapName=function(e){void 0===e&&(e=1);r.default.fubenID;var t=n.default.GuildBattleLevel,i=1;for(var a in t)e==t[a].id&&(i=e);return t[i].name},e.prototype.getIntoNextMapGongxun=function(){var e=r.default.fubenID,t=n.default.GuildBattleLevel,i=1;for(var a in t)if(e==t[a].fbId){if(!(t[a].id<4))return 0;i=t[a].id+1}return t[i].feats},e.prototype.getMapLevelInfo=function(){var e=r.default.fubenID,t=n.default.GuildBattleLevel,i=1;for(var a in t)e==t[a].fbId&&(i=t[a].id);return t[i]},e.prototype.decodeMyGuildRankInfo=function(e){var t,i=e.readInt();this.myRankList=[];for(var n=0;n<i;n++)(t=new g).parse(e),this.myRankList.push(t);o.default.ins().postMyRankChange()},e.prototype.changeWeiXieList=function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=""),a.default.handle!=e){var n=this.checkListElements(e,this.weixieList);t?-1==n&&(this.weixieList.push(e),u.default.ins().showTips("|C:0xf3311e&T:"+i+" \u6b63\u5728\u653b\u51fb\u4f60|")):-1!=n&&this.weixieList.splice(n,1),o.default.ins().postWeixieChange(0)}},e.prototype.changecanPlayList=function(e,t){if(void 0===t&&(t=!0),a.default.handle!=e){var i=this.checkListElements(e,this.canPlayList);t?-1==i&&this.canPlayList.push(e):-1!=i&&this.canPlayList.splice(i,1),o.default.ins().postCanplayChange()}},e.prototype.decodeGulidWarResult=function(e){ViewManager.ins().open(GuildWarResultWin,e.readString(),e.readInt(),e.readInt(),e.readInt(),e.readInt())},e.prototype.checkListElements=function(e,t){if(t.length<=0)return-1;for(var i=0;i<t.length;i++)if(t[i]==e)return i;return-1},e.prototype.getRewardByPoint=function(e){var t=[];if(!this.dataList){this.dataList=[];var i=n.default.GuildBattlePersonalAward;for(var a in i)this.dataList.push(i[a])}for(var o=this.dataList.length,r=0;r<o;r++)e>=this.dataList[r].integral&&(t=t.concat(this.dataList[r].award));return t},e.prototype.getMyPointReward=function(){var e,t=n.default.GuildBattlePersonalAward;for(var i in t)if((e=t[i]).id==this.pointInfo.id)return e;return null},e.prototype.getMaxReward=function(){var e,t,i=n.default.GuildBattlePersonalAward,a=0;for(var o in i)(e=i[o]).integral>a&&(a=e.integral,t=e);return t},Object.defineProperty(e.prototype,"clickTime",{get:function(){return this._clickTime},set:function(e){this.canClick=!1,this._clickTime=e,l.default.ins().remove(this.endTimeChangeStatu,this),l.default.ins().doTimer(1e3,this._clickTime,this.endTimeChangeStatu,this)},enumerable:!0,configurable:!0}),e.prototype.endTimeChangeStatu=function(){--this._clickTime,this._clickTime<=0&&(this.canClick=!0,l.default.ins().remove(this.endTimeChangeStatu,this))},Object.defineProperty(e.prototype,"canSendReward",{get:function(){return s.default.ins().myOffice==GuildOffice.GUILD_BANGZHU&&this._canSendReward},set:function(e){this._canSendReward=e},enumerable:!0,configurable:!0}),e.prototype.getCanSendNumByRank=function(e){void 0===e&&(e=-1);var t=n.default.GuildBattleDistributionAward[this.guildWarRank],i=0;for(var a in t)if(!t[a].rewardFlag||this.rewardFlag==f.hf){if(a==e+1+"")return t[a].count;++i}return i},e.prototype.checkISSendAll=function(){for(var e=this.getCanSendNumByRank(),t=0;t<e;t++){var i=this.getCanSendNumByRank(t);if(!this.sendList[t])return u.default.ins().showTips("|C:0xf3311e&T:|\u8bf7\u5148\u9009\u62e9\u9700\u8981\u5206\u914d\u5956\u52b1\u7684\u6210\u5458"),!1;for(var n=0,a=0;a<this.sendNumList[t].length;a++)n+=this.sendNumList[t][a];if(i>n)return u.default.ins().showTips("|C:0xf3311e&T:|\u8bf7\u5148\u9009\u62e9\u9700\u8981\u5206\u914d\u5956\u52b1\u7684\u6210\u5458"),!1;for(a=0;a<this.sendList[t].length;a++)if(!s.default.ins().checkIsInGuild(this.sendList[t][a].roleID))return u.default.ins().showTips("|C:0xf3311e&T:|"+this.sendList[t][a].name+" \u5df2\u9000\u51fa\u516c\u4f1a"),!1}return!0},Object.defineProperty(e.prototype,"acEndTime",{get:function(){return this._acEndTime},set:function(e){this._acEndTime=e,this._acEndTime>0&&(l.default.ins().remove(this.reduceTime,this),l.default.ins().doTimer(1e3,e,this.reduceTime,this))},enumerable:!0,configurable:!0}),e.prototype.reduceTime=function(){--this._acEndTime,this._acEndTime<=0&&l.default.ins().remove(this.reduceTime,this)},e.prototype.setOpenDesc=function(){if(0==this.startTime)return"";var e=new Date(1e3*this.startTime);return e.getMonth()+1+"\u6708"+e.getDate()+"\u53f7(\u5468"+this.guildWarNumDaXie[e.getDay()]+")20:00\u5f00\u542f\u9f99\u57ce\u4e89\u9738"},e.prototype.getCdByType=function(e){if(0==r.default.fubenID)return 0;var t=n.default.GuildBattleLevel;for(var i in t)if(t[i].fbId==r.default.fubenID&&(1==e||3==e))return t[i].switchSceneCd;return 0},e.prototype.getIsShowGuildWarBtn=function(){if(0==this.startTime||n.default.GuildBattleConst.openLevel>a.default.level)return 0;var e=new Date(1e3*this.startTime),t=new Date(c.default.serverTime);return e.getDate()==t.getDate()&&(t.getHours()<20||20==t.getHours()&&t.getMinutes()<=15)||this.isWatStart?1:0},e.prototype.rankListChange=function(e){var t,i=e.readInt();this.rankList=[];for(var n=0;n<i;n++)(t=new v).parse(e),this.rankList.push(t);o.default.ins().postRankListChange()},e.prototype.decodePointRewardInfo=function(e){this.pointInfo||(this.pointInfo=new m),this.pointInfo.parse(e),o.default.ins().postPointRewardChange()},e.prototype.getSelectDataByIndex=function(e){var t,i,n=[];if(this.sendList&&this.sendList[e]&&this.sendList[e].length>0){t=this.sendList[e],i=this.sendNumList[e];for(var a=void 0,o=0;o<t.length;o++)(a=new b).data=t[o],a.num=i[o],n.push(a)}return n},e.prototype.getMyPointRankReward=function(e){var t=n.default.GuildBattlePersonalRankAward;for(var i in t)if(t[i].rank==e)return t[i].award;return[]},e.prototype.doEndDoorTime=function(e){this._doorEndtime=e,l.default.ins().remove(this.timeDo,this),l.default.ins().doTimer(1e3,this._doorEndtime,this.timeDo,this)},e.prototype.timeDo=function(){--this._doorEndtime,this._doorEndtime<=0&&(this._doorEndtime=0,l.default.ins().remove(this.timeDo,this))},Object.defineProperty(e.prototype,"doorEndtime",{get:function(){return this._doorEndtime},enumerable:!0,configurable:!0}),e.prototype.getMyGuildPointRank=function(){var e,t,i=s.default.ins().getGuildMembers(0),n=i.length;this.myGuildPointRank=[];for(var a=0;a<n;a++)e=i[a],(t=new b).data=e,t.num=this.getPointByAcId(e.roleID),this.myGuildPointRank.push(t);return this.myGuildPointRank.sort(this.sort),this.myGuildPointRank},e.prototype.getPointByAcId=function(e){for(var t=this.myRankList.length,i=0;i<t;i++)if(this.myRankList[i].roleID==e)return this.myRankList[i].point;return 0},e.prototype.sort=function(e,t){var i=e.num,n=t.num;return i>n?-1:i<n?1:0},e.prototype.setMyGuildNum=function(e,t){void 0===t&&(t=!0);var i=this.checkListElements(e,this.guildHandleList);t?-1==i&&this.guildHandleList.push(e):i>-1&&this.guildHandleList.splice(i,1),this.guildNum=this.guildHandleList.length,o.default.ins().postGuildNumChange()},e.prototype.clearGuildWarList=function(){this.checkinAppoint()&&(this.weixieList=[],this.canPlayList=[],this.attHandle=0,this.guildHandleList=[])},e}();i.default=d;var f,p=function(){function e(){}return e.prototype.parse=function(e){this.robNum=e.readInt(),this.robName=e.readString(),this.acId=e.readInt()},e}(),h=function(){function e(){}return e.prototype.parse=function(e){this.guildName=e.readString(),this.ownName=e.readString(),this.guildPoint=e.readInt()},e}(),g=function(){function e(){}return e.prototype.parse=function(e){this.roleID=e.readInt(),this.myName=e.readString(),this.mapName=e.readString(),this.point=e.readInt(),this.attr=e.readInt(),this.office=e.readInt(),this.job=e.readInt(),this.sex=e.readInt()},e}(),y=function(){function e(){this.guildId=0,this.guildName="",this.guildOwnName="",this.guildOwnId=0,this.guildOwnJob=0,this.guildOwnSex=0,this.clothID=0,this.wapenId=0,this.wingOpen=0,this.winId=0}return e.prototype.parse=function(e){this.guildId=e.readInt(),this.guildName=e.readString(),this.guildOwnName=e.readString(),this.guildOwnId=e.readInt(),this.guildOwnJob=e.readByte(),this.guildOwnSex=e.readByte(),this.clothID=e.readInt(),this.wapenId=e.readInt(),this.wingOpen=e.readInt(),this.winId=e.readInt()},e}(),v=function(){function e(){}return e.prototype.parse=function(e){this.name=e.readString(),this.point=e.readInt()},e}(),m=function(){function e(){}return e.prototype.parse=function(e){this.isCan=e.readBoolean(),this.id=e.readInt(),this.point=e.readInt()},e}();(function(e){e[e.act=0]="act",e[e.hf=1]="hf",e[e.kf=2]="kf"})(f||(f={}));var b=function(){return function(){}}();cc._RF.pop()},{"../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../../manager/TimerManager":"TimerManager","../../../map/GameMap":"GameMap","../../server/GameServer":"GameServer","../../tips/UserTips":"UserTips","../Guild":"Guild","../GuildWar":"GuildWar"}],GuildWar:[function(e,t,i){"use strict";cc._RF.push(t,"419a31qunZCEZ32Vsb+RWPY","GuildWar"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../entity/Actor"),r=e("../tips/UserTips"),s=e("../boss/UserBoss"),u=e("../../map/GameMap"),l=e("../../../core/base/MessageCenter"),c=e("./model/GuildWarModel"),d=function(e){function t(){var i=e.call(this)||this;return i.sysId=a.PackageID.GuildWar,l.default.compile(t),i.regNetMsg(1,i.postRedBagInfo),i.regNetMsg(2,i.doSendRedBack),i.regNetMsg(3,i.doRobRedBack),i.regNetMsg(4,i.postJoinPlayBack),i.regNetMsg(5,i.doPlayNextCard),i.regNetMsg(6,i.doGetPointInfo),i.regNetMsg(7,i.doGetGongXunChange),i.regNetMsg(8,i.doGuildRankinfo),i.regNetMsg(9,i.postGuildPersonalRank),i.regNetMsg(10,i.doGuildWarKillInfo),i.regNetMsg(11,i.doGuildWarCityOwn),i.regNetMsg(12,i.postDayRewardInfo),i.regNetMsg(14,i.doMyActivityRankInfo),i.regNetMsg(15,i.postFlagInfoChange),i.regNetMsg(17,i.doGuildWarResult),i.regNetMsg(18,i.doHuDunInfoChange),i.regNetMsg(19,i.postAssignsReward),i.regNetMsg(20,i.postSendRewardSuccess),i.regNetMsg(21,i.postWinGuildInfo),i.regNetMsg(22,i.postGuildWarStarInfo),i.regNetMsg(23,i.doGuildWarDoorHuDun),i.regNetMsg(24,i.doLotteryInfo),i.regNetMsg(25,i.doGetMyPoint),i.regNetMsg(26,i.doRankInfoChange),i.regNetMsg(27,i.doChangeAttrHandle),i.regNetMsg(28,i.doChangeShowList),i.regNetMsg(29,i.doPointRewardInfo),i.regNetMsg(31,i.doDoorEndtime),i.regNetMsg(32,i.doTalkMaxPoint),i.regNetMsg(33,i.postKillHuman),i.regNetMsg(34,i.postHeFuBelong),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getModel=function(){return this._guildWarModel||(this._guildWarModel=new c.default),this._guildWarModel},t.prototype.requestSendRedBag=function(e,t){var i=this.getBytes(2);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.requestRobRedBag=function(){var e=this.getBytes(3);this.sendToServer(e)},t.prototype.requestJoinAc=function(){var e=this.getBytes(4);this.sendToServer(e)},t.prototype.requestPlayNextMap=function(e){var t=this.getBytes(5);t.writeByte(e),this.sendToServer(t)},t.prototype.requestGuildRank=function(){var e=this.getBytes(8);this.sendToServer(e)},t.prototype.requestOwnGuildRank=function(){var e=this.getBytes(9);this.sendToServer(e)},t.prototype.postGuildPersonalRank=function(e){for(var t=[],i=e.readInt(),n=0;n<i;n++){var a=new RankGuildInfo;a.parse(e),t[n]=a}return t},t.prototype.requestDayReward=function(e){var t=this.getBytes(13);t.writeInt(e),this.sendToServer(t)},t.prototype.requestOwnMyGuildRank=function(){var e=this.getBytes(14);this.sendToServer(e)},t.prototype.requestStartGetFlag=function(){var e=this.getBytes(16);this.sendToServer(e)},t.prototype.requestWinGuildInfo=function(){var e=this.getBytes(21);this.sendToServer(e)},t.prototype.postRedBagInfo=function(e){this.getModel().getRedbagInfo(e)},t.prototype.doSendRedBack=function(e){e.readBoolean()&&(ViewManager.ins().close(RedBagWin),r.default.ins().showTips("|C:0x35e62d&T:\u53d1\u9001\u7ea2\u5305\u6210\u529f|"))},t.prototype.doRobRedBack=function(e){e.readBoolean()&&(ViewManager.ins().close(RedBagWin),ViewManager.ins().open(RedBagDetailsWin,1))},t.prototype.postJoinPlayBack=function(e){var t=e.readBoolean();this.getModel().doorDie=e.readBoolean(),this.getModel().rewardFlag=e.readByte(),t&&(ViewManager.ins().close(GuildWarMainWin),ViewManager.ins().close(GuildMap))},t.prototype.doPlayNextCard=function(e){},t.prototype.doGetPointInfo=function(e){this.getModel().ownPoint=e.readInt(),this.getModel().guildPoint=e.readInt();var t=e.readInt();t>0&&r.default.ins().showTips("\u83b7\u5f97 "+t+" \u79ef\u5206"),this.postPointUpdate()},t.prototype.postPointUpdate=function(){},t.prototype.doGetGongXunChange=function(e){this.getModel().gongXun=e.readInt(),this.postPointUpdate()},t.prototype.doGuildRankinfo=function(e){this.getModel().decodeGuildRankInfo(e)},t.prototype.doGuildWarKillInfo=function(e){var t=e.readInt();this.getModel().killName=e.readString(),this.getModel().killGuild=e.readString(),ViewManager.ins().open(GuileWarReliveWin,2,t)},t.prototype.doGuildWarCityOwn=function(e){this.getModel().cityOwn=e.readString(),this.postCityownChange()},t.prototype.postCityownChange=function(){},t.prototype.doMyActivityRankInfo=function(e){this.getModel().decodeMyGuildRankInfo(e)},t.prototype.postDayRewardInfo=function(e){this.getModel().canGetDay=e.readBoolean(),this.getModel().getDayReward=e.readBoolean(),this.getModel().rewardDay=e.readInt()},t.prototype.postFlagInfoChange=function(e){this.getModel().flagAcId=0,this.getModel().flagStatu=e.readShort(),0==this.getModel().flagStatu?this.getModel().endTime=e.readInt():2==this.getModel().flagStatu&&(this.getModel().flagName=e.readString(),this.getModel().flagAcId=e.readInt(),this.getModel().endTime=e.readInt(),this.getModel().flagGuild=e.readString(),this.getModel().flagAcId==o.default.actorID&&r.default.ins().showTips("\u5f00\u59cb\u91c7\u96c6"))},t.prototype.doGuildWarResult=function(e){this.getModel().decodeGulidWarResult(e)},t.prototype.doHuDunInfoChange=function(e){this.postHudunInfo(e.readInt(),e.readInt())},t.prototype.postHudunInfo=function(e,t){return[e,t]},t.prototype.postAssignsReward=function(e){this.getModel().guildWarRank=e.readInt(),this.getModel().canSendReward=e.readBoolean(),this.getModel().rewardFlag=e.readByte()},t.prototype.sendFenReward=function(e,t){var i=this.getModel().sendNumList,n=this.getBytes(20);n.writeInt(e);for(var a=1;a<=e;a++){n.writeInt(a);var o=a-1,r=t[o].length;n.writeInt(r);for(var s=0;s<r;s++){var u=t[o][s];n.writeInt(u.roleID),n.writeInt(i[o][s])}}this.sendToServer(n)},t.prototype.postSendRewardSuccess=function(e){e.readBoolean()&&(ViewManager.ins().close(SelectMemberRewardWin),this.getModel().canSendReward=!1,r.default.ins().showTips("\u5956\u52b1\u5df2\u5206\u914d\u5b8c"))},t.prototype.postWinGuildInfo=function(e){this.getModel().winGuildInfo||(this.getModel().winGuildInfo=new WinGuildInfo),this.getModel().winGuildInfo.parse(e)},t.prototype.postGuildWarStarInfo=function(e){this.getModel().isWatStart=e.readBoolean(),this.getModel().startTime=e.readInt(),this.getModel().acEndTime=e.readInt()},t.prototype.doGuildWarDoorHuDun=function(e){s.default.ins().curShield=e.readInt(),s.default.ins().postShieldPer()},t.prototype.doLotteryInfo=function(e){s.default.ins().worldPrize=e.readInt(),ViewManager.ins().open(WorldBossJiangLiWin,1)},t.prototype.sendPlayLotteryInfo=function(){var e=this.getBytes(25);this.sendToServer(e)},t.prototype.doRankInfoChange=function(e){this.getModel().rankListChange(e)},t.prototype.doChangeAttrHandle=function(e){if(14==u.default.fbType){var t=e.readDouble();this.getModel().attHandle!=t&&(this.getModel().attHandle=t,EntityShowMgr.ins().showHideSomeOne(t),debug.log("add-----------:"+t)),this.postWeixieChange(1)}},t.prototype.postWeixieChange=function(e){return e},t.prototype.postGuildRedPointChange=function(e){return e},t.prototype.doChangeShowList=function(e){if(14==u.default.fbType){var t=e.readDouble();this.getModel().changeWeiXieList(t,!1),this.getModel().changecanPlayList(t,!1),this.getModel().setMyGuildNum(t,!1),this.getModel().attHandle&&this.getModel().attHandle==t&&(this.getModel().attHandle=0,debug.log("cancel------------:"+t))}},t.prototype.doPointRewardInfo=function(e){this.getModel().decodePointRewardInfo(e)},t.prototype.sendPointReward=function(){var e=this.getBytes(30);this.sendToServer(e)},t.prototype.doDoorEndtime=function(e){this.getModel().doEndDoorTime(e.readByte())},t.prototype.doGetMyPoint=function(e){var t=e.readShort();s.default.ins().postLotteryRan(t)},t.prototype.postLotteryPoint=function(e){return e},t.prototype.doTalkMaxPoint=function(e){var t=e.readInt(),i=e.readString();s.default.ins().postLotteryResult(i,t)},t.prototype.postKillHuman=function(e){return e.readInt()},t.prototype.postHeFuBelong=function(e){var t=e.readShort();this.GuildNameBelongs=[];for(var i=0;i<t;i++){var n=e.readString();this.GuildNameBelongs.push(n)}},t.prototype.sendHeFuBelong=function(){this.sendBaseProto(34)},t.prototype.postLotteryMaxPost=function(e,t){return[e,t]},t.prototype.postMyRankChange=function(){},t.prototype.postPointRewardChange=function(){},t.prototype.postCanplayChange=function(){},t.prototype.postRankListChange=function(){},t.prototype.postGuildNumChange=function(){},t.prototype.postSendListChange=function(){},t.prototype.postRankInfo=function(){},t}(n.default);i.default=d,d.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../map/GameMap":"GameMap","../boss/UserBoss":"UserBoss","../tips/UserTips":"UserTips","./model/GuildWarModel":"GuildWarModel"}],Guild:[function(e,t,i){"use strict";cc._RF.push(t,"b479bVBOFNLLpizAnsLHecl","Guild"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../tips/UserTips"),s=e("../../manager/GlobalConfig"),u=e("../chat/model/ChatInfoData"),l=e("../chat/Chat"),c=e("../../config/ItemConfig"),d=e("./GuildWar"),f=e("../../../core/utils/DateUtils"),p=e("../../../core/utils/StringUtils"),h=e("../bag/UserBag"),g=function(e){function t(){var i=e.call(this)||this;return i.guildID=0,i.guildName="",i.guildLv=0,i._buildingLevels=[],i.money=0,i.notice="",i.records=[],i.guildListInfos=[],i._guildMembers=[],i.applyGuilds=[],i._guillRoleSkillInfo=[],i.isFirstGetMessageInfo=!0,i._memberSortType=0,i.pageMax=1,i.hasApply=!1,i.changeNameNum=0,i.hasNewMsg=!1,i.sendToFireCount=[],i.isAuto=1,i.attrLimit=99999,i._conCount=[],i.sysId=a.PackageID.Guild,o.default.compile(t),i.regNetMsg(1,i.postGuildInfo),i.regNetMsg(2,i.postGuildMembers),i.regNetMsg(3,i.postGuildList),i.regNetMsg(4,i.postGuildCreate),i.regNetMsg(6,i.postJoinGuild),i.regNetMsg(7,i.postApplyInfos),i.regNetMsg(8,i.postProcessJoin),i.regNetMsg(9,i.doChangeOffice),i.regNetMsg(11,i.postQuitGuild),i.regNetMsg(12,i.doUpdateGuildInfo),i.regNetMsg(13,i.postGuildMoney),i.regNetMsg(14,i.postChangeNotice),i.regNetMsg(15,i.doGuildSkillInfo),i.regNetMsg(16,i.postLearnGuildSkill),i.regNetMsg(17,i.postUpBuilding),i.regNetMsg(18,i.doPracticeGuildSkill),i.regNetMsg(19,i.doGuildTaskInfos),i.regNetMsg(20,i.doGuildTaskUpdate),i.regNetMsg(22,i.postManageList),i.regNetMsg(23,i.doManage),i.regNetMsg(24,i.postConCount),i.regNetMsg(25,i.postMyGuildInfo),i.regNetMsg(26,i.doGuildMessage),i.regNetMsg(27,i.postAllGuildMessage),i.regNetMsg(28,i.doAddGuildlimit),i.regNetMsg(30,i.postUpdateFire),i.initData(),i}return __extends(t,e),t.prototype.initData=function(){},t.prototype.setGuild=function(e){var t=e[0],i=e[1];this.guildID!=t&&(this.guildID=t,this.guildName=i,this.sendGuildInfo(),0!=this.guildID&&ViewManager.ins().isShow(GuildApplyWin)&&(ViewManager.ins().close(GuildApplyWin),ViewManager.ins().open(GuildMap)))},t.ins=function(){return e.ins.call(this)},t.prototype.initLogin=function(){this.sendGuildInfo(),this.sendMyGuildInfo()},t.prototype.getSkllInfoByIndex=function(e){return this._guillRoleSkillInfo[e]},t.prototype.getGuildMembersByIndex=function(e){return this._guildMembers[e]},t.prototype.getGuildTaskInfosByIndex=function(e){return this.guildTaskInfos.getItemAt(e)},t.prototype.getBuildingLevels=function(e){return void 0===e&&(e=-1),-1==e?this._buildingLevels:this._buildingLevels[e]},t.prototype.getConCount=function(e){return void 0===e&&(e=-1),-1==e?this._conCount:this._conCount[e]},t.prototype.sendGuildInfo=function(){this.sendBaseProto(1)},t.prototype.postGuildInfo=function(e){if(this._buildingLevels=[],1==e.readByte()){this.guildID=e.readUnsignedInt(),this.guildName=e.readString();for(var t=e.readUnsignedByte(),i=0;i<t;i++)this._buildingLevels.push(e.readUnsignedByte());return this.money=e.readInt(),this.notice=e.readString(),this.doAddGuildlimit(e),this.guildLv=this._buildingLevels[0],this.sendGuildMembers(),this.sendGuildSkillInfo(),this.postUpdateFire(e),this.changeNameNum=e.readInt(),[this.guildID,this.guildName]}return!1},t.prototype.sendGuildMembers=function(){this.sendBaseProto(2)},t.prototype.postGuildMembers=function(e){var t=e.readInt();this._guildMembers=[];for(var i=0;i<t;i++){var n=new GuildMemberInfo;n.roleID=e.readInt(),n.name=e.readString(),n.office=e.readUnsignedByte(),n.job=e.readUnsignedByte(),n.sex=e.readUnsignedByte(),n.vipLevel=e.readInt(),n.monthCard=e.readUnsignedByte(),n.contribution=e.readInt(),n.curContribution=e.readInt(),n.attack=e.readDouble(),n.downTime=e.readUnsignedInt(),n.level=e.readInt(),n.zsLevel=e.readInt(),this._guildMembers.push(n)}},t.prototype.sendGuildList=function(e,t){this.sendBaseProto(3)},t.prototype.postGuildList=function(e){this.guildListInfos=[];for(var t=e.readInt(),i=0;i<t;i++){var n=new GuildListInfo;n.guildRank=i+1,n.guildID=e.readUnsignedInt(),n.guildLevel=e.readUnsignedByte(),n.commentLv=e.readUnsignedByte(),n.guildMember=e.readInt(),n.guildName=e.readString(),n.guildPresident=e.readString(),n.attr=e.readInt(),this.guildListInfos.push(n)}},t.prototype.sendGuildCreate=function(e,t){var i=this.getBytes(4);i.writeByte(e),i.writeString(t),this.sendToServer(i)},t.prototype.postGuildCreate=function(e){return 0==e.readUnsignedByte()&&(this.guildID=e.readUnsignedInt(),ViewManager.ins().close(GuildCreateWin),ViewManager.ins().close(GuildApplyWin),ViewManager.ins().open(GuildMap),r.default.ins().showTips("\u516c\u4f1a\u521b\u5efa\u6210\u529f"),this.sendGuildInfo(),!0)},t.prototype.sendQuitGuild=function(){this.sendBaseProto(5)},t.prototype.sendJoinGuild=function(e){var t=this.getBytes(6);t.writeInt(e),this.sendToServer(t)},t.prototype.postJoinGuild=function(e){this.hasApply=!0},t.prototype.sendApplyInfos=function(){this.sendBaseProto(7)},t.prototype.postApplyInfos=function(e){for(var t=e.readInt(),i=[],n=0;n<t;n++){var a=new GuildApplyInfo;a.roleID=e.readInt(),a.vipLevel=e.readInt(),a.job=e.readUnsignedByte(),a.sex=e.readUnsignedByte(),a.attack=e.readDouble(),a.name=e.readString(),i.push(a)}return this.hasApply=t>0,i},t.prototype.sendProcessJoin=function(e,t){var i=this.getBytes(8);i.writeInt(e),i.writeByte(t),this.sendToServer(i)},t.prototype.postProcessJoin=function(e){var t=e.readUnsignedInt(),i=e.readUnsignedByte(),n=this.applyGuilds,a=n.indexOf(t);return-1!=a&&0==i&&n.splice(a,1),1==i},t.prototype.sendChangeOffice=function(e,t){var i=this.getBytes(9);i.writeInt(e),i.writeByte(t),this.sendToServer(i)},t.prototype.doChangeOffice=function(e){for(var t=e.readInt(),i=e.readUnsignedByte(),n=0;n<this._guildMembers.length;n++){var a=this.getGuildMembersByIndex(n);if(a.roleID==t)return void(a.office=i)}},t.prototype.sendDemise=function(){this.sendBaseProto(10)},t.prototype.sendKick=function(e){var t=this.getBytes(11);t.writeInt(e),this.sendToServer(t)},t.prototype.postQuitGuild=function(e){return e.readInt()==Actor.actorID&&(this.clearGuildInfo(),ViewManager.ins().close(GuildWin),ViewManager.ins().close(GuildMap),!0)},t.prototype.doUpdateGuildInfo=function(e){switch(e.readUnsignedByte()){case 1:break;case 2:this.sendGuildInfo();break;case 3:this.sendGuildMembers();break;case 4:break;case 5:this.sendApplyInfos()}},t.prototype.sendCon=function(e){var t=this.getBytes(13);t.writeInt(e),this.sendToServer(t)},t.prototype.postGuildMoney=function(e){this.money=e.readInt()},t.prototype.sendChangeNotice=function(e){var t=this.getBytes(14);t.writeString(e),this.sendToServer(t)},t.prototype.postChangeNotice=function(e){0==e.readUnsignedByte()&&(this.notice=e.readString())},t.prototype.sendGuildSkillInfo=function(){this.sendBaseProto(15)},t.prototype.doGuildSkillInfo=function(e){var t=e.readUnsignedByte();this._guillRoleSkillInfo=[];for(var i=0;i<t;i++){for(var n=new GuildRoleSkillInfo,a=e.readUnsignedByte(),o=0;o<a;o++){(s=new GuildSkillInfo).level=e.readInt(),n.guildSkillInfo.push(s)}a=e.readUnsignedByte();for(var r=0;r<a;r++){var s;a[r];(s=new GuildSkillInfo).level=e.readInt(),s.exp=e.readInt(),n.practiceSkillInfo.push(s)}this._guillRoleSkillInfo.push(n)}this.postGuildSkillInfo()},t.prototype.postGuildSkillInfo=function(){},t.prototype.sendLearnGuildSkill=function(e,t){var i=this.getBytes(16);i.writeShort(e),i.writeByte(t),this.sendToServer(i)},t.prototype.postLearnGuildSkill=function(e){var t=e.readShort(),i=e.readUnsignedByte();this.getSkllInfoByIndex(t).guildSkillInfo[i-1].level=e.readInt(),this.postGuildSkillInfo(),r.default.ins().showTips("\u5347\u7ea7\u6210\u529f")},t.prototype.sendPracticeGuildSkill=function(e,t){var i=this.getBytes(18);i.writeShort(e),i.writeByte(t),this.sendToServer(i)},t.prototype.doPracticeGuildSkill=function(e){var t=e.readShort(),i=e.readUnsignedByte();this.getSkllInfoByIndex(t).practiceSkillInfo[i-1].level=e.readInt(),this.getSkllInfoByIndex(t).practiceSkillInfo[i-1].exp=e.readInt();var n=e.readInt();this.postGuildSkillInfo(),r.default.ins().showTips("|C:0x23CA23&T:\u4fee\u70bc\u503c +"+n+"|")},t.prototype.sendUpBuilding=function(e){var t=this.getBytes(17);t.writeByte(e),this.sendToServer(t)},t.prototype.postUpBuilding=function(e){var t=e.readByte();this._buildingLevels[t-1]=e.readByte(),this.guildLv=this._buildingLevels[0]},t.prototype.doGuildTaskInfos=function(e){this.guildTaskInfos.removeAll(),this.initTaskInfos();for(var t=e.readInt(),i=0;i<t;i++){var n=new GuildTaskInfo;n.taskID=e.readInt(),n.param=e.readInt(),n.state=e.readInt(),n.stdTask=s.default.GuildTaskConfig[n.taskID],this.guildTaskInfos.addItem(n)}this.updateTaskList()},t.prototype.postGuildTaskUpdate=function(){},t.prototype.doGuildTaskUpdate=function(e){for(var t=e.readInt(),i=e.readInt(),n=e.readInt(),a=0;a<this.guildTaskInfos.length;a++){var o=this.guildTaskInfos.getItemAt(a);if(o&&o.taskID==t){o.param=i,o.state=n;break}}this.updateTaskList()},t.prototype.updateTaskList=function(){for(var e=this.guildTaskInfos.source,t=e.length-1;t>=0;t--)0==e[t].stdTask.type&&e.splice(t,1);e.sort(this.taskInfosSortFunc),this.guildTaskInfos.replaceAll(e),this.postGuildTaskUpdate()},t.prototype.sendGetTaskAward=function(e){var t=this.getBytes(21);t.writeByte(e),this.sendToServer(t)},t.prototype.sendManageList=function(){this.sendBaseProto(22)},t.prototype.postManageList=function(e){this.records=[];for(var t=e.readInt(),i=0;i<t;i++)this.parserManage(e)},t.prototype.doManage=function(e){},t.prototype.sendConCount=function(){this.sendBaseProto(24)},t.prototype.postConCount=function(e){for(var t=e.readUnsignedByte(),i=0;i<t;i++)this._conCount[i]=e.readInt()},t.prototype.sendMyGuildInfo=function(){this.sendBaseProto(25)},t.prototype.postMyGuildInfo=function(e){this.myCon=e.readInt(),this.myTotalCon=e.readInt(),this.myOffice=e.readUnsignedByte()},t.prototype.sendGuildMessage=function(e){var t=this.getBytes(26);t.writeString(e),this.sendToServer(t),ReportData.getIns().reportChat(e,6)},t.prototype.doGuildMessage=function(e){var t=new GuildMessageInfo;if(t.parserMessage(e),-1==Friends.ins().indexOfBlackList(t.roleId)){if(this.guildMessageInfoData.length>=50){var i=this.guildMessageInfoData.removeItemAt(0);l.default.ins().removeAllChatMsg(i)}this.guildMessageInfoData.addItem(t),l.default.ins().insertAllChatMsg(t),l.default.ins().postNewChatMsg(t),1==t.type&&t.roleId!=Actor.actorID&&(this.hasNewMsg=!0)}1==t.type&&((i=new u.default(null)).name=t.name,i.type=7,i.str=t.content,l.default.ins().postNewChatMsg(i));2==t.type&&this.postGuildBossHaveRelive(!0,t.content)},t.prototype.postGetNewGuildMessage=function(e){return e},t.prototype.postGuildBossHaveRelive=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.prototype.sendAllGuildMessage=function(){this.isFirstGetMessageInfo&&(this.isFirstGetMessageInfo=!1,this.sendBaseProto(27))},t.prototype.postAllGuildMessage=function(e){this.guildMessageInfoData.removeAll();for(var t=e.readInt(),i=0;i<t;i++){var n=new GuildMessageInfo;n.parserMessage(e),-1==Friends.ins().indexOfBlackList(n.roleId)&&(this.guildMessageInfoData.addItem(n),l.default.ins().insertAllChatMsg(n))}this.guildMessageInfoData.length&&l.default.ins().postNewChatMsg(this.guildMessageInfoData.getItemAt(this.guildMessageInfoData.length-1))},t.prototype.sendAddGuildLimit=function(e,t){var i=this.getBytes(28);i.writeByte(e),i.writeInt(t),this.sendToServer(i)},t.prototype.doAddGuildlimit=function(e){this.isAuto=e.readUnsignedByte(),this.attrLimit=e.readInt()},t.prototype.sendToFire=function(e,t){var i=this.getBytes(30);i.writeShort(e),this.sendToServer(i),this.sendToFireCount.push([e,t])},t.prototype.postUpdateFire=function(e){this.fireDic=this.fireDic||{};var t=e.readShort(),i=e.readInt(),n=this.fireDic.fireLvl!=t||this.fireDic.fireVal!=i;if(this.fireDic.fireLvl=t,this.fireDic.fireVal=i,n)for(var a=s.default.GuildConfig,o=h.default.ins().getBagItemById(a.bonfireItem),u=o?o.count:0,l=0;l<this.sendToFireCount.length;l++)if(u==this.sendToFireCount[l][1]){for(;l>=0;){var c=this.sendToFireCount.shift()[0];r.default.ins().showCenterTips("\u884c\u4f1a\u603b\u7bdd\u706b\u503c +"+5*c+" \u4e2a\u4eba\u884c\u4f1a\u8d21\u732e +"+30*c),l-=1}break}},t.prototype.sendGuildChangeName=function(e){var t=this.getBytes(31);t.writeString(e),this.sendToServer(t)},t.prototype.parserManage=function(e){if(this.records){var t="",i=f.default.getFormatBySecond(.001*f.default.formatMiniDateTime(e.readUnsignedInt()),8);i=p.default.complementByChar(i,16);var n=e.readUnsignedByte(),a=e.readInt(),o=e.readInt(),r=(e.readInt(),e.readString());e.readString();switch(n){case 1:t=i+"  ["+r+"]\u52a0\u5165\u5de5\u4f1a";break;case 2:t=i+"  ["+r+"]\u79bb\u5f00\u5de5\u4f1a";break;case 3:t=i+"  ["+r+"]\u88ab\u4efb\u547d\u526f\u4f1a\u957f";break;case 4:t=i+"  ["+r+"]\u6210\u4e3a\u65b0\u7684\u4f1a\u957f";break;case 5:t=i+"  ["+r+"]\u53d1\u8d77\u5f39\u52be";break;case 6:t=i+"  ["+r+"]\u516c\u4f1a\u526f\u672c\u8fdb\u5ea6\u9996\u901a";break;case 7:t=i+"  ["+r+"]\u6350\u732e\u4e86"+o+(2==a?"\u5143\u5b9d":"\u91d1\u5e01");break;case 8:t=i+"  ["+r+"]\u628a"+s.default.GuildConfig.buildingNames[a-1]+"\u5347\u7ea7\u5230"+o+"\u7ea7";break;case 9:var u=s.default.ItemConfig[a];t=i+"  ["+r+"]\u5728\u516c\u4f1a\u5546\u5e97\u83b7\u5f97\u4e86<font color="+c.default.getQualityColor(u)+">"+u.name+"</font>";break;case 10:t=i+"  <font color='#35e62d'>\u516c\u4f1a\u5f3a\u76d7\u5df2\u7ecf\u5168\u90e8\u51fb\u6740</font>";break;case 11:t=i+"  ["+r+"]\u88ab\u964d\u804c\u4e86"}this.records.unshift(t)}},t.prototype.hasApplys=function(){return this.myOffice>=GuildOffice.GUILD_FUBANGZHU&&this.hasApply},t.prototype.clearGuildInfo=function(){this.guildID=0,this.guildName="",this.guildListInfos=[],this._guildMembers=[],this.applyGuilds=[],this.pageMax=1,this.hasNewMsg=!1},t.prototype.removeMsgWithId=function(e){for(var t=[],i=0;i<this.guildMessageInfoData.length;i++){var n=this.guildMessageInfoData.getItemAt(i);n.roleId!=e&&t.push(n)}this.guildMessageInfoData.source=t,this.guildMessageInfoData.refresh()},t.prototype.initTaskInfos=function(){if(null==this.guildTaskInfos){var e=[],t=s.default.GuildTaskConfig;for(var i in t)if(t.hasOwnProperty(i)){var n=t[i],a=new GuildTaskInfo;a.taskID=n.id,a.param=0,a.state=0,a.stdTask=n,e.push(a)}this.guildTaskInfos.replaceAll(e)}},t.prototype.taskInfosSortFunc=function(e,t){if(e.state==t.state)return e.taskID<t.taskID?-1:e.taskID>t.taskID?1:0;if(2==e.state)return 1;if(2==t.state)return-1;if(2!=e.state&&2!=t.state){if(e.taskID<t.taskID)return-1;if(e.taskID>t.taskID)return 1}return 0},t.prototype.getMemberNum=function(){return this._guildMembers.length},t.prototype.getGuildMembers=function(e){return 0==e||this._memberSortType==e?this._guildMembers:1==e?this._guildMembers.sort(this.memberSortFunc):2==e?this._guildMembers.sort(this.memberSortFunc2):this._guildMembers},t.prototype.getOfficeNum=function(e){for(var t=this._guildMembers.length,i=0,n=0;n<t;n++){this._guildMembers[n].office==e&&i++}return i},t.prototype.canAppointFHZ=function(){return this.getOfficeNum(GuildOffice.GUILD_FUBANGZHU)<s.default.GuildConfig.posCounts[this.guildLv-1][1]},t.prototype.memberSortFunc=function(e,t){return e.office>t.office?-1:e.office<t.office?1:e.office==t.office?e.contribution==t.contribution?0:e.contribution>t.contribution?-1:1:0},t.prototype.memberSortFunc2=function(e,t){return e.curContribution==t.curContribution?0:e.curContribution>t.curContribution?-1:1},t.prototype.checkIsInGuild=function(e){for(var t in this._guildMembers){if(this._guildMembers[t].roleID==e)return!0}return!1},t.prototype.startCheckShow=function(){d.default.ins().getModel().checkinAppoint()?(ViewManager.ins().closeTopLevel(),ViewManager.ins().open(GuildWarUiInfo)):ViewManager.ins().close(GuildWarUiInfo)},t.prototype.isUpGradeBuilding=function(){if(t.ins().myOffice<GuildOffice.GUILD_FUBANGZHU)return!1;for(var e=[GuildBuilding.GUILD_HALL,GuildBuilding.GUILD_LIANGONGFANG],i=0;i<e.length;i++){var n=e[i],a=t.ins().getBuildingLevels(n-1)||0,o=s.default.GuildLevelConfig[n],r=0,u=null,l=null,c=0;for(var d in o)if(o.hasOwnProperty(d)){var f=o[d];r=f.level>r?f.level:r,f.level==a&&(u=f),f.level==a+1&&(l=f)}if((u||l||n==GuildBuilding.GUILD_LIANGONGFANG)&&l&&a<r&&(c=l.upFund),!(n==GuildBuilding.GUILD_HALL&&a>=r||n!=GuildBuilding.GUILD_HALL&&a>=t.ins().guildLv||t.ins().money<c))return!0}return!1},t}(n.default);i.default=g,g.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../../core/utils/StringUtils":"StringUtils","../../base/BaseSystem":"BaseSystem","../../config/ItemConfig":"ItemConfig","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../chat/Chat":"Chat","../chat/model/ChatInfoData":"ChatInfoData","../tips/UserTips":"UserTips","./GuildWar":"GuildWar"}],GuillRoleSkillInfo:[function(e,t,i){"use strict";cc._RF.push(t,"c91d949lS1IOaEB217iZRAe","GuillRoleSkillInfo");cc._RF.pop()},{}],GuoQingIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"18f9avYD/dPXbw8j9O/Rg41","GuoQingIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../server/GameServer"),o=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=new Date(a.default.serverTime),t=e.getFullYear(),i=e.getMonth()+1,n=e.getDate();return 2017==t&&(9==i&&30==n||10==i&&n<9)},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.getEffName=function(e){return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(GuoActivityWin)},t}(n.default);i.default=o,cc._RF.pop()},{"../../server/GameServer":"GameServer","./RuleIconBase":"RuleIconBase"}],GwBoss:[function(e,t,i){"use strict";cc._RF.push(t,"13bc6e6HVRPCqdx74vDHyXL","GwBoss"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../gamescene/GameLogic"),o=e("../../map/GameMap"),r=e("./UserBoss"),s=e("../fb/UserFb"),u=function(e){function t(){var t=e.call(this)||this;return t.isGwBoss=!1,t.isGwTopBoss=!1,t.isBossDie=!1,t.observe(a.default.ins().postEnterMap,function(){o.default.fbType==s.default.FB_TYPE_GOD_WEAPON||o.default.fbType==s.default.FB_TYPE_GOD_WEAPON_TOP?t.postEnterGwBoss():(t.isGwBoss||t.isGwTopBoss)&&t.postEscGwBoss()}),t.observe(a.default.ins().postCreateOtherEntity,t.onCreateEntity),t.observe(r.default.ins().postRemainTime,t.onDie),t.observe(r.default.ins().postWorldBossEndTime,t.onBossDisappear),t}return __extends(t,e),t.prototype.postEnterGwBoss=function(){this.isGwBoss=o.default.fbType==s.default.FB_TYPE_GOD_WEAPON,this.isGwTopBoss=o.default.fbType==s.default.FB_TYPE_GOD_WEAPON_TOP,this.isBossDie=!1,this.showView(!0)},t.prototype.postEscGwBoss=function(){this.isGwBoss=!1,this.isGwTopBoss=!1,this.isBossDie=!1,this.showView(!1),ViewManager.ins().close(BossEndView)},t.prototype.showView=function(e){e?(ViewManager.ins().isShow(BossBelongPanel)||ViewManager.ins().open(BossBelongPanel),ViewManager.ins().isShow(BossBloodPanel)||ViewManager.ins().open(BossBloodPanel),ViewManager.ins().isShow(TargetListPanel)||ViewManager.ins().open(TargetListPanel)):(ViewManager.ins().close(BossBelongPanel),ViewManager.ins().close(BossBloodPanel),ViewManager.ins().close(TargetListPanel))},t.prototype.onCreateEntity=function(e){e&&(this.isGwBoss||this.isGwTopBoss)&&(e.type!=EntityType.Monster||e.team!=Team.Monster||e.masterHandle||(r.default.ins().monsterID=e.configID,r.default.ins().bossHandler=e.handle,this.showView(!0)))},t.prototype.onDie=function(){(this.isGwBoss||this.isGwTopBoss)&&(this.isRoleDie()?ViewManager.ins().open(WorldBossBeKillWin):ViewManager.ins().close(WorldBossBeKillWin))},t.prototype.isRoleDie=function(){var e=!1;if(this.isGwTopBoss){var t=EntityManager.ins().getNoDieRole();(!t||t.infoModel.getAtt(AttributeType.atHp)<=0)&&(e=!0)}return!!(r.default.ins().reliveTime>0||e)},t.prototype.onBossDisappear=function(){(this.isGwBoss||this.isGwTopBoss)&&(this.showView(!1),this.isBossDie=!0,ViewManager.ins().open(BossEndView))},t.prototype.canMove=function(){return!this.isBossDie},t.ins=function(){return e.ins.call(this)},t}(n.default);i.default=u,window.GameSystem.push(u.ins.bind(u)),cc._RF.pop()},{"../../base/BaseSystem":"BaseSystem","../../map/GameMap":"GameMap","../fb/UserFb":"UserFb","../gamescene/GameLogic":"GameLogic","./UserBoss":"UserBoss"}],GwFubenData:[function(e,t,i){"use strict";cc._RF.push(t,"c3542sZ7m9MQ7vj3hSI9DA/","GwFubenData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../manager/GlobalConfig"),a=function(){function e(){}return e.prototype.parse=function(e){this.hadBuyData=[],this.hadChallengeNum=e.readInt(),this.vipBuyNum=e.readInt(),this.hadPass=e.readInt(),this.curPoint=e.readInt();for(var t=e.readInt(),i=0;i<t;i++){var n=[];n.push(e.readInt()),n.push(e.readInt()),this.hadBuyData[i]=n}this.getList()},Object.defineProperty(e.prototype,"hadPass",{get:function(){return this._hadPass},set:function(e){this._hadPass=e},enumerable:!0,configurable:!0}),e.prototype.getList=function(){var e,t,i=this.getMaxGird();e=1==this.curPoint?Math.min(this._hadPass+1,i):this._hadPass,this.listData=[];for(var n=e;n>0;n--)(t=new o).gridNum=n,t.gridNum>this._hadPass?t.curPoint=0:t.gridNum==this._hadPass?t.curPoint=this.curPoint:t.curPoint=1,this.listData.push(t)},e.prototype.getMaxGird=function(){if(!this._maxGird)for(var e in this._maxGird=0,n.default.GodWeaponFubenConfig)this._maxGird++;return this._maxGird},e.prototype.buyTypeData=function(e){for(var t=0;t<this.hadBuyData.length;t++)if(this.hadBuyData[t][0]==e)return this.hadBuyData[t];return[e,0]},Object.defineProperty(e.prototype,"getBuyCount",{get:function(){for(var e=0,t=0;t<this.hadBuyData.length;t++)e+=this.hadBuyData[t][1];return e},enumerable:!0,configurable:!0}),e}();i.default=a;var o=function(){function e(){}return Object.defineProperty(e.prototype,"gridNum",{get:function(){return this._gridNum},set:function(e){this._gridNum=e,this.config=n.default.GodWeaponFubenConfig[e]},enumerable:!0,configurable:!0}),e}();i.GwfubenFloorData=o,cc._RF.pop()},{"../../../manager/GlobalConfig":"GlobalConfig"}],GwRankInfoData:[function(e,t,i){"use strict";cc._RF.push(t,"8166dABoFFPCLSSgez5eBGu","GwRankInfoData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/utils/DateUtils"),a=function(){function e(){}return e.prototype.parse=function(e){this.rank=e.readInt(),this.nameStr=e.readString();var t=e.readInt();this.floorNum=Math.floor(t/1e4),this.timeNum=1e4-t%1e4},e.prototype.getgetTimeStr=function(){return n.default.getFormatBySecond(this.timeNum,n.default.TIME_FORMAT_3)},e}();i.default=a,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils"}],GwTaskData:[function(e,t,i){"use strict";cc._RF.push(t,"1eef0x3YzRHGKemIY+x+dEU","GwTaskData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.parser=function(e){this.weaponIdx=e.readInt(),this.weapon=e.readInt(),this.taskIdx=e.readInt(),this.progress=e.readInt(),this.statue=e.readInt()},e.DOING=0,e.DONE=1,e.FINISH=2,e}();i.default=n,cc._RF.pop()},{}],HBSystem:[function(e,t,i){"use strict";cc._RF.push(t,"a6072cC41pNrJnHYO7zFROq","HBSystem"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("./Activity"),r=e("./model/ActivityType12Data"),s=e("../playfun/PlayFunView"),u=e("../../../core/base/ViewManager"),l=function(e){function t(){var t=e.call(this)||this;return t.observe(o.default.ins().postGetRedEnvelope,t.showHongBaoTips),t.observe(o.default.ins().postRewardResult,t.ActRewardResult),t.observe(o.default.ins().postEnvelopeDataCall,t.showEnvelope),t.observe(o.default.ins().postRedEnvelopeData,t.updateHongBao),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.updateHongBao=function(){var e=u.default.ins().getView(s.default);if(e&&e.hongbao&&!(e.hongbao.numElements>0))for(var t=0;t<o.default.ins().activityTimers.length;t++){var i=o.default.ins().activityTimers[t];if(o.default.ins().activityData[i]&&o.default.ins().activityData[i]instanceof r.default){var n=o.default.ins().activityData[i];if(!n.envelopeData.length)continue;for(var a=n.envelopeData.length-1;a>=0;)if(a=n.envelopeData.length-1,n.envelopeData[a]){var l=n.envelopeData[a].id;if(!n.envelopeData[a].isOverTimer()){var c=new HongBaoShowItem;c.data={actId:i,eId:l},e.hongbao.addChild(c);break}n.popEnvelope(l)}else n.envelopeData.splice(t,1)}}},t.prototype.showHongBaoTips=function(e){var t=e[0],i=e[1],n=e[2],a=(e[3],e[4]),r=o.default.ins().activityData[t];if(r){if(n){var s=new RewardData;s.type=0,s.id=MoneyConst.yuanbao,s.count=n,UserTips.ins().showGoodRewardTips(s)}i&&r.popEnvelope(i),this.HongBaoResultAni(a)}},t.prototype.HongBaoResultAni=function(e){var t=u.default.ins().getView(s.default);if(t&&t.hongbao){var i=t.hongbao.getChildAt(1);i&&i.playAni(e,this.updateHongBao,this)}},t.prototype.ActRewardResult=function(e){-1!=o.default.ins().activityTimers.indexOf(e)&&o.default.ins().activityData[e]&&o.default.ins().activityData[e]instanceof r.default&&(o.default.ins().isSuccee||(o.default.ins().activityData[e].isOpenActivity()?UserTips.ins().showTips("|C:0xff0000&T:\u7ea2\u5305\u5df2\u8fc7\u671f"):UserTips.ins().showTips("|C:0xff0000&T:\u6d3b\u52a8\u5df2\u7ed3\u675f")))},t.prototype.showEnvelope=function(e){var t=u.default.ins().getView(s.default);if(t&&t.hongbao){if(!e)return UserTips.ins().showTips("|C:0xff0000&T:\u7ea2\u5305\u5df2\u8fc7\u671f"),t.hongbao.removeChildren(),void this.updateHongBao();if(o.default.ins().activityData[e.id]&&o.default.ins().activityData[e.id]instanceof r.default){var i=new HongBaoOpenItem;e.desc||(e.desc=GlobalConfig.ActivityType12Config[e.id][e.index].blessWord),i.data={actId:e.id,eId:e.eId,job:e.job,sex:e.sex,name:e.name,text:e.desc,index:e.index},t.hongbao.addChildAt(i,1)}}},t}(a.default);i.default=l,function(e){e.hbsystem=l.ins.bind(l)}(n||(n={})),cc._RF.pop()},{"../../../core/base/ViewManager":"ViewManager","../../base/BaseSystem":"BaseSystem","../playfun/PlayFunView":"PlayFunView","./Activity":"Activity","./model/ActivityType12Data":"ActivityType12Data"}],HappySevenDayIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"8ed9fblx4pIB6UydGbHSxjW","HappySevenDayIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=e("../../activity/model/ActivityDataFactory"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n._activityID=0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!r.default.ins().checkSysOpen(s.SystemType.HAPPYSEVENDAY))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==u.ActivityPageStyle.HAPPYSEVENDAY&&n.isOpenActivity()&&!n.getHide())return this._activityID=+i,!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==u.ActivityPageStyle.HAPPYSEVENDAY&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(HappySevenDayWin,this._activityID),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],HeartMethodBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a9a9doRlaRJkorcJQHKXzkb","HeartMethodBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.serverDay=0,this.zsLv=0,this.starMax=0}}();i.default=n,cc._RF.pop()},{}],HeartMethodConfig:[function(e,t,i){"use strict";cc._RF.push(t,"1720fVkBPxHL5wu2MXal8cG","HeartMethodConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0}}();i.default=n,cc._RF.pop()},{}],HeartMethodLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4bad4LMwFhPObDIFoSa29ej","HeartMethodLevelConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HeartMethodPosConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ce4c6s8au5MqbisjHUuSVpk","HeartMethodPosConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HeartMethodRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"6daf7HStZVOi7IU5PXITzjb","HeartMethodRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../base/BaseSystem"),a=e("../HeartMethod"),o=e("../../bag/UserBag"),r=e("../../zs/UserZs"),s=e("../../gamescene/GameLogic"),u=e("../../../entity/SubRoles"),l=e("../../../manager/GlobalConfig"),c=e("../../../../core/base/MessageCenter"),d=function(e){function t(){var i=e.call(this)||this;return i.roleTabs={},i.roleTabs={},i.redPoint=!1,c.default.compile(t),i.associated(i.postHeartMethodRedPoint,i.postHeartRoleRedPoint),i.associated(i.postHeartRoleRedPoint,a.default.ins().postHeartInfo,a.default.ins().postHeartUpLevel,a.default.ins().postOneKeyDecompose,o.default.ins().postItemCountChange,r.default.ins().postZsLv,s.default.ins().postSubRoleChange),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postHeartMethodRedPoint=function(){var e=this.redPoint;if(!a.default.ins().checkOpen())return this.redPoint=!1,e!=this.redPoint;for(var t=0;t<u.default.ins().subRolesLen;t++)if(this.roleTabs[t])for(var i in this.roleTabs[t])if(this.roleTabs[t][i])return this.redPoint=!0,this.redPoint;return this.redPoint=!1,e!=this.redPoint},t.prototype.postHeartRoleRedPoint=function(){if(a.default.ins().checkOpen())for(var e=0;e<u.default.ins().subRolesLen;e++){this.roleTabs[e]||(this.roleTabs[e]={});var t=a.default.ins().HeartMethodInfo[e];for(var i in t||(t={}),l.default.HeartMethodConfig){var n=t[i];if(n)if(this.roleTabs[e][n.id]||(this.roleTabs[e][n.id]=!1),n.id){if(this.roleTabs[e][n.id]=!1,!a.default.ins().heartOpenCondition(n.id))continue;var r=a.default.ins().calcHeartCost(e,n.id);if(r){var s=o.default.ins().getBagItemById(r.itemid),c=s?s.count:0;if(this.roleTabs[e][n.id]=c>=l.default.HeartMethodStageConfig[n.id][n.stage].normalCostTip,this.roleTabs[e][n.id]){if(a.default.ins().heartUpCondition(e,n.id))continue;this.roleTabs[e][n.id]=!1}}if(n.isUp&&!a.default.ins().isHeartMax(e,n.id)){this.roleTabs[e][n.id]=!0;continue}var d=l.default.HeartMethodConfig[n.id];e:for(var f=0;f<d.posList.length;f++){var p=a.default.ins().getHeartSlotItemId(e,n.id,f+1);if(p)if(a.default.ins().calcHeartSlotCost(p))this.roleTabs[e][n.id]=!0;else for(var h=0;h<n.slots.length;h++){var g=n.slots[h],y=a.default.ins().calcHeartSlotChange(e,n.id,g);if(this.roleTabs[e][n.id]=!!y,y)break e}else{var v=a.default.ins().getHeartSlotItemIdWear(e,n.id,f+1);if(this.roleTabs[e][n.id]=!!v,v)break}}if(this.roleTabs[e][n.id])continue}else this.roleTabs[e][n.id]=!0;else a.default.ins().heartOpenCondition(l.default.HeartMethodConfig[i].id)?this.roleTabs[e][l.default.HeartMethodConfig[i].id]=!0:this.roleTabs[e][l.default.HeartMethodConfig[i].id]=!1}}},t.prototype.checkHeartRedPoint=function(e,t){return this.roleTabs[e]||(this.roleTabs[e]={}),!!this.roleTabs[e][t]},t}(n.default);i.default=d,window.GameSystem.push(d.ins.bind(d)),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../base/BaseSystem":"BaseSystem","../../../entity/SubRoles":"SubRoles","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../gamescene/GameLogic":"GameLogic","../../zs/UserZs":"UserZs","../HeartMethod":"HeartMethod"}],HeartMethodStageConfig:[function(e,t,i){"use strict";cc._RF.push(t,"87244fbF3NDKa9OLDMTxIJn","HeartMethodStageConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HeartMethodStarConfig:[function(e,t,i){"use strict";cc._RF.push(t,"672b8nOHVFKk7A8WqAa6fKu","HeartMethodStarConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HeartMethodSuitConfig:[function(e,t,i){"use strict";cc._RF.push(t,"61cafCJKPBF0YFpyH5AdKFr","HeartMethodSuitConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HeartMethod:[function(e,t,i){"use strict";cc._RF.push(t,"c7d3aMukuVPgoKJzgFGBc0N","HeartMethod"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../manager/GlobalConfig"),r=e("../server/GameServer"),s=e("../zs/UserZs"),u=e("../../../core/base/ErrorLog"),l=e("../../../core/base/AttributeData"),c=e("../../config/ItemConfig"),d=e("../../entity/Actor"),f=e("../bag/UserBag"),p=e("../../consts/ItemType"),h=e("../../../core/base/MessageCenter"),g=function(e){function t(){var i=e.call(this)||this;return i._proShowList=[],i.sysId=a.PackageID.HeartMethod,h.default.compile(t),i.regNetMsg(1,i.postHeartInfo),i.regNetMsg(2,i.postHeartUpLevel),i.regNetMsg(5,i.postOneKeyDecompose),i.HeartMethodInfo=[],i}return __extends(t,e),Object.defineProperty(t.prototype,"proShowList",{get:function(){return this._proShowList.length||(this._proShowList=o.default.HeartMethodBaseConfig.proShowList),this._proShowList},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},t.prototype.heartOpenCondition=function(e){var t=o.default.HeartMethodConfig[e];return!t.openCondition||!(r.default.serverOpenDay+1<t.openCondition.day)&&!(s.default.ins().lv<t.openCondition.zs)},t.prototype.heartUpCondition=function(e,t){var i=o.default.HeartMethodConfig[t];if(!i.upGradeCondition)return!0;var n=this.HeartMethodInfo[e];if(!n)return!1;var a=n[t];if(!a)return!1;for(var r=0,s=0;s<a.slots.length;s++)a.slots[s]&&r++;return!(r<i.upGradeCondition)},t.prototype.checkOpen=function(){return!(r.default.serverOpenDay<o.default.HeartMethodBaseConfig.serverDay-1)&&!(s.default.ins().lv<o.default.HeartMethodBaseConfig.zsLv)},t.prototype.getHeartCfg=function(e,t){void 0===t&&(t=!1);var i=o.default.HeartMethodStarConfig;return u.default.Assert(i,"HeartMethodStarConfig is null")?null:i[t?e.configID+1:e.configID]},t.prototype.calcHeartSlotValue=function(e,t){return[]},t.prototype.getHeartSlotItemIdWear=function(e,t,i){var n=this.HeartMethodInfo[e];if(!n)return 0;if(!n[t])return 0;var a=f.default.ins().getBagGoodsByType(p.ItemType.TYPE_18);for(var r in a.sort(this.changeSort),a){if(o.default.HeartMethodStarConfig[a[r].configID].heartmethodId==t){var u=a[r].itemConfig,l=u.level?u.level:0,c=u.zsLevel?u.zsLevel:0;if(!(d.default.level<l||s.default.ins().lv<c))if(i==this.getSuitPosFromItemId(a[r].configID))return a[r].configID}}return 0},t.prototype.getHeartSlotItemId=function(e,t,i){var n=this.HeartMethodInfo[e];if(!n)return 0;var a=n[t];return a&&a.slots[i-1]?a.slots[i-1]:0},t.prototype.calcHeartSlotChange=function(e,t,i){var n=this.HeartMethodInfo[e];if(!n)return 0;var a=n[t];if(!a)return 0;var r=o.default.HeartMethodStarConfig[i];if(!r)return 0;if(-1==a.slots.indexOf(i))return 0;var u=this.getSuitPosFromItemId(i);if(!u)return 0;var l=f.default.ins().getBagGoodsByType(p.ItemType.TYPE_18);for(var c in l.sort(this.changeSort),l)if(o.default.HeartMethodStarConfig[l[c].configID].posSort==u&&o.default.HeartMethodStarConfig[l[c].configID].heartmethodId==t){var h=o.default.ItemConfig[l[c].configID],g=h.level?h.level:0,y=h.zsLevel?h.zsLevel:0;if(!(d.default.level<g||s.default.ins().lv<y)){var v=o.default.HeartMethodStarConfig[h.id];if(v.quality>r.quality)return h.id;if(v.quality==r.quality&&v.star>r.star)return h.id}}return 0},t.prototype.changeSort=function(e,t){if(c.default.getQuality(e.itemConfig)>c.default.getQuality(t.itemConfig))return-1;var i=o.default.HeartMethodStarConfig[e.configID],n=o.default.HeartMethodStarConfig[t.configID];return i.star>n.star?-1:1},t.prototype.getSuitPosFromItemId=function(e){var t=o.default.HeartMethodStarConfig[e];return t?t.posSort:0},t.prototype.calcHeartSlotCost=function(e){var t=!1,i=o.default.HeartMethodStarConfig[e];if(!i||!i.nextItem)return t;var n=f.default.ins().getBagItemById(i.costItem);return n&&n.count>=i.costNum&&(t=!0),t},t.prototype.calcHeartTotalValue=function(e,t){for(var i=this.proShowList,n=[],a=0;a<i.length;a++)n.push(0);var r=this.HeartMethodInfo[e];if(!r||!r[t])return n;var s=this.calcHeartAttrs(e,t);for(a=0;a<i.length;a++)if(i[a].filter){var u=this.calcHeartSkillLevel(e,t);if(u){var l=o.default.HeartMethodSuitConfig[t][u];l&&i[a].id==l.attr[0].type&&(n[a]+=l.attr[0].value/100)}}else{for(var c=0;c<r[t].slots.length;c++){var d=r[t].slots[c],f=o.default.HeartMethodStarConfig[d];if(f)for(var p=0;p<f.attr.length;p++)i[a].id==f.attr[p].type&&(n[a]+=f.attr[p].value)}for(var h=0;h<s.length;h++)if(i[a].id==s[h].type){n[a]+=s[h].value;break}}return n},t.prototype.getHeartSuitCount=function(e,t,i){var n=this.HeartMethodInfo[e];if(!n||!n[t])return 0;for(var a=0,r=0;r<n[t].slots.length;r++){var s=n[t].slots[r];if(s)o.default.HeartMethodStarConfig[s].quality>=i&&a++}return a},t.prototype.calcHeartSkillLevel=function(e,t){var i,n=0,a=this.HeartMethodInfo[e];if(!a||!a[t])return n;for(var r=0;r<a[t].slots.length;r++){var s=a[t].slots[r];if(!s)return 0;var u=o.default.HeartMethodStarConfig[s];if(u){var l=u.quality;(!i||i>l)&&(i=l)}}return i&&(n=i),n},t.prototype.calcHeartAttrs=function(e,t){var i=this.HeartMethodInfo[e],n=[];if(!i||!i[t]||!i[t].id)return n;var a=i[t],r=o.default.HeartMethodStageConfig[a.id];if(r&&r[a.stage]){var s=r[a.stage].attr;for(var u in s){(d=new l.default).type=s[u].type,d.value=s[u].value,n.push(d)}}var c=o.default.HeartMethodLevelConfig[a.id];if(c&&c[a.lv]){s=c[a.lv].attr;for(var u in s){for(var d,f=!1,p=0;p<n.length;p++)if(n[p].type==s[u].type){n[p].value+=s[u].value,f=!0;break}if(!f)(d=new l.default).type=s[u].type,d.value=s[u].value,n.push(d)}}return n},t.prototype.calcHeartAttrsNext=function(e,t){var i=this.HeartMethodInfo[e],n=[];if(!i||!i[t]||!i[t].id)return n;var a=i[t],r=o.default.HeartMethodStageConfig[a.id],s=o.default.HeartMethodLevelConfig[a.id],u=[],c=[];if(a.isUp?(u=r[a.stage+1]?r[a.stage+1].attr:r[a.stage].attr,c=s[a.lv].attr):(u=r[a.stage].attr,c=s[a.lv+1]?s[a.lv+1].attr:s[a.lv].attr),u&&u.length){var d=u;for(var f in d){(p=new l.default).type=d[f].type,p.value=d[f].value,n.push(p)}}if(c.length){d=c;for(var f in d){for(var p,h=!1,g=0;g<n.length;g++)if(n[g].type==d[f].type){n[g].value+=d[f].value,h=!0;break}if(!h)(p=new l.default).type=d[f].type,p.value=d[f].value,n.push(p)}}return n},t.prototype.calcHeartCost=function(e,t){var i=null,n=this.HeartMethodInfo[e];if(!n||!n[t]||!n[t].id||this.isHeartMax(e,t)||n[t].isUp)return i;var a=o.default.HeartMethodLevelConfig[n[t].id][n[t].lv+1];return a&&(i={itemid:a.costItem,count:a.costNum}),i},t.prototype.isHeartMax=function(e,t){var i=this.HeartMethodInfo[e];return!!(i&&i[t]&&i[t].id)&&!o.default.HeartMethodLevelConfig[i[t].id][i[t].lv+1]},t.prototype.getAttrStrByType=function(e){var t="";for(var i in this.proShowList)if(this.proShowList[i].id==e){t=this.proShowList[i].name;break}return t},t.prototype.sendHeartUpLevel=function(e,t,i){var n=this.getBytes(3);n.writeByte(e),n.writeShort(t),n.writeShort(i),this.sendToServer(n)},t.prototype.sendHeartChange=function(e,t,i,n){var a=this.getBytes(4);a.writeByte(e),a.writeShort(t),a.writeShort(i),a.writeInt(n),this.sendToServer(a)},t.prototype.sendOneKeyDecompose=function(e,t){var i=t.length,n=this.getBytes(5);n.writeShort(e),n.writeInt(i);for(var a=0;a<i;a++)n.writeInt(t[a].configID);this.sendToServer(n)},t.prototype.postHeartInfo=function(e){for(var t=e.readByte(),i=0;i<t;i++){var n=e.readByte();this.HeartMethodInfo[n]||(this.HeartMethodInfo[n]={});for(var a=e.readShort(),o=0;o<a;o++){var r=e.readShort(),s=e.readShort(),u=e.readByte(),l=e.readShort(),c=new y;c.id=r,c.lv=s,c.stage=u;for(var d=0;d<l;d++){var f=e.readInt();c.slots.push(f)}this.HeartMethodInfo[n][r]=c}}},t.prototype.postHeartUpLevel=function(e){var t=e.readUnsignedByte();this.HeartMethodInfo[t]||(this.HeartMethodInfo[t]={});var i,n=e.readShort();this.HeartMethodInfo[t][n]?i=this.HeartMethodInfo[t][n]:(i=new y).id=n;var a=e.readShort();i.lv=a;var o=e.readByte();i.stage=o;var r=e.readShort();i.slots=[];for(var s=0;s<r;s++){var u=e.readInt();i.slots.push(u)}this.HeartMethodInfo[t][n]=i},t.prototype.postOneKeyDecompose=function(e){var t=e.readByte(),i=0,n=0;return t&&(i=e.readShort(),n=e.readShort()),[t,i,n]},t}(n.default);i.default=g;var y=function(){function e(){this.id=0,this.lv=0,this.stage=0,this.slots=[]}return Object.defineProperty(e.prototype,"stage",{get:function(){return this.isUp?Math.floor(this.lv/10):Math.floor(this.lv/10)+1},set:function(e){this.isUp=e},enumerable:!0,configurable:!0}),e}();i.HearMethodData=y;window.GameSystem.push(g.ins.bind(g)),cc._RF.pop()},{"../../../core/base/AttributeData":"AttributeData","../../../core/base/ErrorLog":"ErrorLog","../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../config/ItemConfig":"ItemConfig","../../consts/ItemType":"ItemType","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../server/GameServer":"GameServer","../zs/UserZs":"UserZs"}],HeirloomData:[function(e,t,i){"use strict";cc._RF.push(t,"3ad89UjDElHGL8GRk5yUrrC","HeirloomData"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../../manager/GlobalConfig"),o=e("./HeirloomInfo"),r=function(){function e(){this.heirloomData=[]}return e.prototype.parser=function(e){for(var t=0;t<8;t++){var i=e.readInt();this.heirloomData[t]||(this.heirloomData[t]=new o.default),this.heirloomData[t].setInfo(t+1,i)}},e.prototype.update=function(e,t){if(!(e<=0||e>8)){var i=this.heirloomData[e-1];i&&i.setInfo(e,t)}},e.prototype.getData=function(){return this.heirloomData},e.prototype.getInfoBySolt=function(e){if(e>=0&&e<8){var t=this.heirloomData[e];if(t)return t}return null},e.getInfoBySoltFirst=function(e){return e>=0&&e<8?a.default.HeirloomEquipConfig[e+1][1]:null},e.getEquipName=function(e){var t="";switch(e+1){case n.wq:t="\u6b66\u5668";break;case n.tk:t="\u5934\u76d4";break;case n.yf:t="\u8863\u670d";break;case n.xl:t="\u9879\u94fe";break;case n.hw:t="\u62a4\u8155";break;case n.yd:t="\u8170\u5e26";break;case n.jz:t="\u6212\u6307";break;case n.xz:t="\u978b\u5b50"}return t},e.prototype.getSuitConfig=function(e){for(var t,i=e.heirloom.getData(),n=0,o=!0,r=0;r<i.length;r++){var s=i[r];0==r&&(n=s.lv),!s.lv&&o&&(o=!1),s.lv<=n&&(n=s.lv)}return o&&(t=a.default.HeirloomEquipSetConfig[n]),t},e}();i.default=r,function(e){e[e.wq=1]="wq",e[e.tk=2]="tk",e[e.yf=3]="yf",e[e.xl=4]="xl",e[e.hw=5]="hw",e[e.yd=6]="yd",e[e.jz=7]="jz",e[e.xz=8]="xz"}(n||(n={})),cc._RF.pop()},{"../../../manager/GlobalConfig":"GlobalConfig","./HeirloomInfo":"HeirloomInfo"}],HeirloomEquipConfig:[function(e,t,i){"use strict";cc._RF.push(t,"024be94RT1CIoQtGEXlgY0I","HeirloomEquipConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HeirloomEquipFireConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f8ab3zSvStBnIjtQSHsCJ6O","HeirloomEquipFireConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HeirloomEquipItemConfig:[function(e,t,i){"use strict";cc._RF.push(t,"0918bVJIiRBcoH0+9kFgoaQ","HeirloomEquipItemConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HeirloomEquipSetConfig:[function(e,t,i){"use strict";cc._RF.push(t,"1a412vvmZtBbqj2kqugej3B","HeirloomEquipSetConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HeirloomInfo:[function(e,t,i){"use strict";cc._RF.push(t,"849dczyJixPvbkV1Es9exhH","HeirloomInfo"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../manager/GlobalConfig"),a=function(){function e(){this.slot=0,this.lv=0,this.expend={id:0,count:0},this.attr=[],this.icon=0,this.name="",this.image="",this.model="",this.skillicon="",this.skillname="",this.skilldesc="",this.attr_add=0}return e.prototype.setInfo=function(e,t){if(e>0&&t>0){var i=n.default.HeirloomEquipConfig[e][t];if(!i)return void console.log("HeirloomInfo setInfo error! slot:"+e+",lv:"+t);this.slot=i.slot,this.lv=i.lv,this.expend=i.expend,this.attr=i.attr,this.icon=i.icon,this.name=i.name,this.image=i.image,this.model=i.model,this.skillicon=i.skillicon,this.skillname=i.skillname,this.skilldesc=i.skilldesc,this.attr_add=i.attr_add}},e}();i.default=a,cc._RF.pop()},{"../../../manager/GlobalConfig":"GlobalConfig"}],HeirloomTreasureConfig:[function(e,t,i){"use strict";cc._RF.push(t,"70b12J0TJtLhr0dpeSqV2KM","HeirloomTreasureConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HeirloomTreasureRewardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"46034LcecxFvoWONyiGlIoJ","HeirloomTreasureRewardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],Heirloom:[function(e,t,i){"use strict";cc._RF.push(t,"7b2a5v9znZALpkSlAGXSFEf","Heirloom"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../zs/UserZs"),r=e("../../entity/SubRoles"),s=e("../../manager/GlobalConfig"),u=e("../bag/UserBag"),l=e("../server/GameServer"),c=e("../../../core/base/MessageCenter"),d=function(e){function t(){var i=e.call(this)||this;return i.huntTimes=0,i.huntBoxInfo=[],i.huntHope=0,i.huntFreeTimes=0,i.huntRecords=[],i.upRequest=!1,i.sysId=a.PackageID.Heirloom,c.default.compile(t),i.regNetMsg(1,i.postHeirloomInfo),i.regNetMsg(4,i.doHuntBack),i.regNetMsg(5,i.postHuntRecord),i.regNetMsg(7,i.postHuntBoxInfo),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.checkRedPoint=function(){if(o.default.ins().lv<3)return!1;for(var e=r.default.ins().subRolesLen,t=!1,i=0;i<e;i++){for(var n=r.default.ins().getSubRoleByIndex(i),a=0;a<8;a++){var l=n.heirloom.getInfoBySolt(a),c=void 0;if(c=l.lv?s.default.HeirloomEquipConfig[l.slot][l.lv]:s.default.HeirloomEquipFireConfig[a+1]){var d=c.expend;if(!d)continue;var f=u.default.ins().getBagItemById(d.id);if((f?f.count:0)>=d.count){t=!0;break}}}if(t)break}return t},t.prototype.sendHeirloomAdd=function(e){var t=this.getBytes(1);t.writeByte(e),this.sendToServer(t)},t.prototype.sendHeirloomAct=function(e,t){var i=this.getBytes(2);i.writeByte(e),i.writeByte(t),this.sendToServer(i)},t.prototype.sendHeirloomUpLevel=function(e,t){var i=this.getBytes(3);i.writeByte(e),i.writeByte(t),this.upRequest=!0,this.sendToServer(i)},t.prototype.postHeirloomInfo=function(e){var t=e.readUnsignedByte(),i=e.readUnsignedByte(),n=e.readUnsignedByte(),a=r.default.ins().getSubRoleByIndex(t);a&&a.heirloom.update(i,n)},t.prototype.sendHunt=function(e){var t=this.getBytes(4);t.writeByte(e),this.sendToServer(t)},t.prototype.sendHuntRecord=function(){this.sendBaseProto(5)},t.prototype.sendHuntAward=function(e){var t=this.getBytes(6);t.writeInt(e),this.sendToServer(t)},t.prototype.doHuntBack=function(e){for(var t=e.readUnsignedByte(),i=e.readUnsignedByte(),n=[],a=0;a<i;a++)n[a]=[e.readInt(),e.readUnsignedByte()];ViewManager.ins().isShow(HuntResultWin)?this.postHuntResult(t,n,2):(ViewManager.ins().open(HuntResultWin,t,n,2),this.postHuntResult(t,n,2))},t.prototype.postHuntResult=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.prototype.postHuntRecord=function(e){this.huntRecords=[];for(var t=e.readUnsignedByte(),i=0;i<t;i++)this.huntRecords[i]=[e.readString(),e.readInt()];this.huntRecords.reverse()},t.prototype.postHuntBoxInfo=function(e){var i,n=e.readInt();this.huntTimes=e.readInt(),this.huntHope=e.readInt(),this.huntFreeTimes=e.readShort();var a=0;for(var o in s.default.HeirloomTreasureRewardConfig)i=s.default.HeirloomTreasureRewardConfig[o],this.huntBoxInfo[a]=n>>i.id&1?t.ISNGET:this.huntTimes>=i.needTime?t.CANGET:t.UNGET,a++},t.prototype.getIsGetBox=function(){return-1!=this.huntBoxInfo.indexOf(t.CANGET)||this.huntFreeTimes>0},t.prototype.isHeirloomHuntOpen=function(){return o.default.ins().lv>=s.default.HeirloomTreasureConfig.openZSlevel&&l.default.serverOpenDay>=s.default.HeirloomTreasureConfig.openDay},t.UNGET=0,t.CANGET=1,t.ISNGET=2,t}(n.default);i.default=d,window.GameSystem.push(d.ins.bind(d)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../server/GameServer":"GameServer","../zs/UserZs":"UserZs"}],HejiEquipTipsWin:[function(e,t,i){"use strict";cc._RF.push(t,"54d97psvOZJgZGmDjgNNIfL","HejiEquipTipsWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../../core/base/ViewManager"),r=e("../../tips/UserTips"),s=e("../ItemData"),u=e("../../../config/ItemConfig"),l=e("../../../manager/GlobalConfig"),c=e("../UserBag"),d=e("../../zs/UserZs"),f=e("../../rolewin/UserSkill"),p=e("../../../entity/Actor"),h=e("../../../../core/base/AttributeData"),g=e("../../../entity/SubRoles"),y=e("../../../entity/Role"),v=e("../../../../core/utils/Util"),m=cc._decorator,b=m.ccclass,_=m.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.nameLabel=null,t.type=null,t.lv=null,t.levelKey=null,t.career=null,t.attrLabel=null,t.nextAttr1=null,t.jobNode=null,t._equipPower=0,t._totalPower=0,t.changeBtn=null,t.curRole=0,t.index=0,t.powerPanel=null,t.powerPanel0=null,t.maxLabel=null,t.currentState="default",t.attr0=null,t.wayText=null,t.gainWay=[["\u53c2\u4e0e\u51fb\u6740\u79d8\u5883BOSS","BossWin",2],["\u9650\u65f6\u4efb\u52a1","LimitTaskView"]],t.nextNode=null,t.nextTile=null,t.attr7=null,t.nextAttName=null,t.nextAttValue=null,t.titleAttrTxt=[],t.attrTxt=[],t}var i;return __extends(t,e),i=t,t.prototype.initData=function(){},t.prototype.initUI=function(){this.jobNode.active=!1},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.data=e[0][0][0],e[0][0][1]?this.changeBtn.node.active=!0:this.changeBtn.node.active=!1,this.isBagTips=e[0][0][2],this.setData(this.data)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onTouchList=function(e){},t.prototype.otherClose=function(e){o.default.ins().close(i)},t.prototype.onEquipChange=function(e){this.needCount?this.onBtn():r.default.ins().showTips("|C:0xff0000&T:\u6750\u6599\u4e0d\u8db3")},t.prototype.onBtn=function(){var e;this.data instanceof s.default||this.data.id?e=this.data.configID+10:e=91e4+this.data+1;for(var t=l.default.ItemConfig[e],n=u.default.getSubType(t),a=c.default.ins().getHejiEquipsByType(n),h=0,g=0;g<a.length;g++)if(a[g].configID==t.id&&n==u.default.getSubType(a[g].itemConfig)){h=a[g].handle;break}if(h){var y=t.level?t.level:0,v=t.zsLevel?t.zsLevel:0;v>d.default.ins().lv||y>p.default.level?r.default.ins().showTips("|C:0xff0000&T:\u7b26\u6587\u9700\u8981"+v+"\u8f6c"+y+"\u7ea7"):(o.default.ins().close(i),f.default.ins().sendDressHejiEquip(h,n))}else r.default.ins().showTips("|C:0xff0000&T:\u7b26\u6587\u5f02\u5e38")},t.prototype.setData=function(e){var t;if(e instanceof s.default){t=e;var i=l.default.EquipConfig[t.configID+10];if(i){a=c.default.ins().getBagGoodsByTypeAndId(c.default.BAG_TYPE_EQUIP,i.id);this.currentState=a?"not_max":"not_max_no",this.maxLabel.string="\u5df2\u6fc0\u6d3b"}else this.currentState="max",this.maxLabel.string="\u5df2\u6ee1\u7ea7"}else{if(e.id)(t=new s.default).configID=e.id;else if(e>91e4)(t=new s.default).configID=e;else{var n=91e4+e+1;(t=new s.default).configID=n}var a;(a=c.default.ins().getBagGoodsByTypeAndId(c.default.BAG_TYPE_EQUIP,t.configID))&&a.count?(this.maxLabel.string="\u672a\u6fc0\u6d3b",this.currentState="unactivated_have"):(this.currentState="unactivated_no",this.maxLabel.string="\u672a\u6fc0\u6d3b")}this.isBagTips&&(this.currentState="default",this.maxLabel.string=""),this.wayText.node.active=!1,this.needCount=0,this.setCurAttrs(t),this.setNextAttrs(t),this.unactivated(t)},t.prototype.unactivated=function(e){if("max"!=this.currentState&&"default"!=this.currentState){var t;if(t=this.data instanceof s.default||this.data.id?e.configID+10:e.configID,this.attr0.node.active=!1,"unactivated_no"==this.currentState||"unactivated_have"==this.currentState){this.attr0.node.active=!0;var i=l.default.ItemConfig[t],n=c.default.ins().getBagGoodsByTypeAndId(c.default.BAG_TYPE_EQUIP,i.id),a="(\u62e5\u6709\xd70)",o="#ff0000";n?(a="(\u62e5\u6709\xd7"+n.count+")",o="#00ff00",this.needCount=n.count):o="#ff0000",this.attr0.string="<color=#7E6437>\u6fc0\u6d3b\u9700\u8981:</c><color="+u.default.getQualityColor(i)+">"+i.name+"</c><color=#9F946D>\xd71</c><color="+o+">("+a+")</c>"}this.wayText.node.active=!1,"unactivated_no"==this.currentState||"not_max_no"==this.currentState?(this.setRichTextLink(),this.changeBtn.node.active=!1):"unactivated_have"==this.currentState&&(this.changeBtn.getComponentInChildren(cc.Label).string="\u6fc0  \u6d3b")}},t.prototype.setRichTextLink=function(){this.wayText.node.active=!0,this.wayText.string="\u83b7\u53d6\u9014\u5f84\uff1a";for(var e=0;e<this.gainWay.length;e++)this.wayText.string+="<color = #00ff00 click = 'showEquipPart"+e+"'>"+this.gainWay[e][0]+"\u3001</c>"},t.prototype.setNextAttrs=function(e){if("not_max"==this.currentState||"not_max_no"==this.currentState){this.nextNode.active=!0,this.changeBtn.getComponentInChildren(cc.Label).string="\u5347  \u7ea7";var t=e.configID+10,i=l.default.ItemConfig[t],n=l.default.EquipConfig[t],a=i;this._totalPower=0,this.nextTile.string="\u4e0b\u7ea7("+a.name+")",this.nextTile.node.color=u.default.getColoFromHEXByConfig(a);var o=c.default.ins().getBagGoodsByTypeAndId(c.default.BAG_TYPE_EQUIP,i.id),r="(\u62e5\u6709\xd70)",s="#ff0000";o&&(r="(\u62e5\u6709\xd7"+o.count+")",s="#00ff00",this.needCount=o.count),this.attr7.string="<color=#7E6437>\u5347\u7ea7\u9700\u8981:</c><color="+u.default.getQualityColor(a)+">"+a.name+"</c><color=#9F946D>\xd71</c><color="+s+">("+r+")</c>";var d=1;this.nextAttValue.string="";var f=[],p=n,y=[];if(e.att){for(var m in h.default.translate)if(p[m]&&!(p[m]<=0)){var b=new h.default(h.default.translate[m],p[m]);for(var _ in e.att)if(e.att[_].type==b.type){b.value+=e.att[_].value;break}var C="";C=h.default.getAttStrByType(b,0,"  "),y.push(b),f[d]=C,d++}for(var I=0;I<f.length;I++){var T=v.Util.isEmptyOrNullString(f[I])?"":f[I];v.Util.isEmptyOrNullString(this.nextAttValue.string)||v.Util.isEmptyOrNullString(T)||(T="\n"+T),this.nextAttValue.string+=T}}else{for(var m in h.default.translate)if(p[m]&&!(p[m]<=0)){b=new h.default(h.default.translate[m],p[m]),C="";C=h.default.getAttStrByType(b,0,"  "),y.push(b),f[d]=C,d++}for(I=0;I<f.length;I++){T=v.Util.isEmptyOrNullString(f[I])?"":f[I];v.Util.isEmptyOrNullString(this.nextAttValue.string)||v.Util.isEmptyOrNullString(T)||(T="\n"+T),this.nextAttValue.string+=T}}if(p.baseAttr1){var S=new h.default(p.baseAttr1.type,p.baseAttr1.value);y.push(S)}if(p.baseAttr2){S=new h.default(p.baseAttr2.type,p.baseAttr2.value);y.push(S)}this._equipPower=Math.floor(c.default.getAttrPower(y)),this._totalPower+=this._equipPower+(p.exPower||0),this._totalPower*=g.default.ins().subRolesLen,this.powerPanel0.string="\u6218\u529b\uff1a"+this._totalPower,this.addTips(p,1)}else this.nextNode.active=!1},t.prototype.setCurAttrs=function(e){var t=e.itemConfig;if(this._totalPower=0,this.nameLabel.string=t.name,this.nameLabel.node.color=u.default.getColoFromHEXByConfig(t),(e instanceof s.default||null!=t)&&e&&5==u.default.getType(e.itemConfig)){this.levelKey.string=t.zsLevel>0?"\u8f6c\u751f\uff1a":"\u7b49\u7ea7\uff1a",this.type.string=y.default.getHejiEquipNameByType(u.default.getSubType(t)),this.lv.string=t.zsLevel>0?t.zsLevel+"\u8f6c":t.level+"\u7ea7";var i="";i=t.zsLevel>0?d.default.ins().lv<t.zsLevel?"#f3311e":"#35e62d":p.default.level<(t.level||1)?"#f3311e":"#35e62d",this.lv.node.color=cc.Color.BLACK.fromHEX(i)}var n=1;this.attrLabel.string="";var a=l.default.EquipConfig[e.configID],o=[],r=[];if(e.att){for(var f in h.default.translate)if(a[f]&&!(a[f]<=0)){var m=new h.default(h.default.translate[f],a[f]);for(var b in e.att)if(e.att[b].type==m.type){m.value+=e.att[b].value;break}var _="";_=h.default.getAttStrByType(m,0,"  "),o.push(m),r[n]=_,n++}for(var C=0;C<r.length;C++){var I=v.Util.isEmptyOrNullString(r[C])?"":r[C];v.Util.isEmptyOrNullString(this.attrLabel.string)||v.Util.isEmptyOrNullString(I)||(I="\n"+I),this.attrLabel.string+=I}}else{for(var f in h.default.translate)if(a[f]&&!(a[f]<=0)){m=new h.default(h.default.translate[f],a[f]),_="";_=h.default.getAttStrByType(m,0,"  "),o.push(m),r[n]=_,n++}for(C=0;C<r.length;C++){I=v.Util.isEmptyOrNullString(r[C])?"":r[C];v.Util.isEmptyOrNullString(this.attrLabel.string)||v.Util.isEmptyOrNullString(I)||(I="\n"+I),this.attrLabel.string+=I}}if(a.baseAttr1){var T=new h.default(a.baseAttr1.type,a.baseAttr1.value);o.push(T)}if(a.baseAttr2){T=new h.default(a.baseAttr2.type,a.baseAttr2.value);o.push(T)}this._equipPower=Math.floor(c.default.getAttrPower(o)),this._totalPower+=this._equipPower+(a.exPower||0),this._totalPower*=g.default.ins().subRolesLen,this.powerPanel.string=""+this._totalPower,this.addTips(a,0)},t.prototype.addTips=function(e,t){this.attrTxt[t].string="",this.titleAttrTxt[t].string="\u6ce8\u7075\u5c5e\u6027\uff1a",e.baseAttr1&&(this.attrTxt[t].string+=h.default.getAttStrByType(e.baseAttr1,1,"")),e.baseAttr2&&(this.attrTxt[t].string+=h.default.getAttStrByType(e.baseAttr2,1,"")),e.exAttr1&&(this.attrTxt[t].string+=h.default.getExtAttStrByType(e.exAttr1,1,"")),e.exAttr2&&(this.attrTxt[t].string=h.default.getExtAttStrByType(e.exAttr2,1,""))},__decorate([_({type:cc.Label,displayName:"nameLabel"})],t.prototype,"nameLabel",void 0),__decorate([_({type:cc.Label,displayName:"type"})],t.prototype,"type",void 0),__decorate([_({type:cc.Label,displayName:"lv"})],t.prototype,"lv",void 0),__decorate([_({type:cc.Label,displayName:"levelKey"})],t.prototype,"levelKey",void 0),__decorate([_({type:cc.Label,displayName:"career"})],t.prototype,"career",void 0),__decorate([_({type:cc.Label,displayName:"attrLabel"})],t.prototype,"attrLabel",void 0),__decorate([_({type:cc.Label,displayName:"nextAttr1"})],t.prototype,"nextAttr1",void 0),__decorate([_({type:cc.Node,displayName:"jobNode"})],t.prototype,"jobNode",void 0),__decorate([_({type:cc.Button,displayName:"changeBtn"})],t.prototype,"changeBtn",void 0),__decorate([_({type:cc.Label,displayName:"powerPanel"})],t.prototype,"powerPanel",void 0),__decorate([_({type:cc.Label,displayName:"powerPanel0"})],t.prototype,"powerPanel0",void 0),__decorate([_({type:cc.Label,displayName:"maxLabel"})],t.prototype,"maxLabel",void 0),__decorate([_({type:cc.RichText,displayName:"attr0"})],t.prototype,"attr0",void 0),__decorate([_({type:cc.RichText,displayName:"wayText"})],t.prototype,"wayText",void 0),__decorate([_({type:cc.Node,displayName:"nextNode"})],t.prototype,"nextNode",void 0),__decorate([_({type:cc.Label,displayName:"nextTile"})],t.prototype,"nextTile",void 0),__decorate([_({type:cc.RichText,displayName:"attr7"})],t.prototype,"attr7",void 0),__decorate([_({type:cc.Label,displayName:"nextAttName"})],t.prototype,"nextAttName",void 0),__decorate([_({type:cc.Label,displayName:"nextAttValue"})],t.prototype,"nextAttValue",void 0),__decorate([_({type:cc.Label,displayName:"titleAttrTxt"})],t.prototype,"titleAttrTxt",void 0),__decorate([_({type:cc.Label,displayName:"attrTxt"})],t.prototype,"attrTxt",void 0),t=i=__decorate([b],t)}(n.default);i.default=C,cc._RF.pop()},{"../../../../core/base/AttributeData":"AttributeData","../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/Util":"Util","../../../../core/view/BaseEuiView":"BaseEuiView","../../../config/ItemConfig":"ItemConfig","../../../entity/Actor":"Actor","../../../entity/Role":"Role","../../../entity/SubRoles":"SubRoles","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../rolewin/UserSkill":"UserSkill","../../tips/UserTips":"UserTips","../../zs/UserZs":"UserZs","../ItemData":"ItemData","../UserBag":"UserBag"}],HejiPanel:[function(e,t,i){"use strict";cc._RF.push(t,"092fax+DgRLdY4AIzMwddQp","HejiPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../module/rolewin/UserSkill"),a=e("../entity/SubRoles"),o=e("../entity/Actor"),r=e("../module/fb/UserFb"),s=e("../module/bag/UserBag"),u=e("../../core/view/BaseView"),l=e("./PunchEquipItem"),c=e("../../core/utils/CommonUtils"),d=e("../manager/GlobalConfig"),f=e("../../core/base/AttributeData"),p=e("../config/ItemConfig"),h=e("../../core/utils/TextFlowMaker"),g=e("../entity/Role"),y=e("../module/skill/data/SkillData"),v=e("../../core/utils/StringUtils"),m=e("../../core/base/ViewManager"),b=e("../module/heji/view/PunchEquipAttrWin"),_=e("../module/heji/view/PunchExtShowWin"),C=e("../module/heji/view/PunchResWin"),I=e("../module/heji/view/PunchEquipForge"),T=e("../module/heji/view/PunchExchangeWin"),S=cc._decorator,R=S.ccclass,B=S.property,M=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.hjNameLabel=null,t.hjDesLabel=null,t.desc3=null,t.desc5=null,t.desc8=null,t.currTitleText=null,t.preViewText=null,t.attrLook=null,t.PubchItems=[],t.currText3=null,t.currText5=null,t.currText8=null,t.Punch=null,t.otherWhite="#D1C28F",t.colorWhite="#f8b141",t.colorGray="#444134",t.otherWhiteN="#D1C28F",t.colorWhiteN="#f8b141",t.colorGrayN="#444134",t.fenjieBtn=null,t.zhulingBtn=null,t.duihuanBtn=null,t.Punchpre=null,t.jobId=0,t}return __extends(t,e),t.prototype.onEnable=function(){this.jobId=a.default.ins().getSubRoleByIndex(0).job,this.mcSkillID="skill40"+this.jobId;var e=403+this.jobId;this.targetSkillID="skill"+e},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.preViewText,this.onClick),this.addTouchEvent(this.attrLook,this.onClick),this.addTouchEvent(this.fenjieBtn,this.onClick),this.addTouchEvent(this.zhulingBtn,this.onClick),this.addTouchEvent(this.duihuanBtn,this.onClick),this.observe(n.default.ins().postHejiUpdate,this.setData),this.observe(n.default.ins().postHejiEquipChange,this.setData),this.observe(o.default.ins().postUpdateTogeatter,this.setData),this.observe(o.default.ins().postUpdateTogeatter,this.setRedPoint),this.observe(r.default.ins().postGuanKaIdChange,this.setRedPoint),this.observe(s.default.ins().postItemAdd,this.addItem),this.observe(s.default.ins().postItemDel,this.setRedPoint),this.resetData(),this.setData(),this.setRedPoint()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this.preViewText,this.onClick),this.removeTouchEvent(this.attrLook,this.onClick),this.removeTouchEvent(this.fenjieBtn,this.onClick),this.removeTouchEvent(this.zhulingBtn,this.onClick),this.removeTouchEvent(this.duihuanBtn,this.onClick)},t.prototype.resetData=function(){},t.prototype.addItem=function(){this.refushPanelInfo(),this.setRedPoint()},t.prototype.onClick=function(e){switch(e){case this.attrLook:m.default.ins().open(b.default);break;case this.preViewText:m.default.ins().open(_.default);break;case this.fenjieBtn:m.default.ins().open(C.default);break;case this.zhulingBtn:m.default.ins().open(I.default);break;case this.duihuanBtn:m.default.ins().open(T.default)}},t.prototype.showActive=function(e){},t.prototype.setRedPoint=function(){},t.prototype.playSkillAnmi=function(){},t.prototype.setData=function(){a.default.ins().subRolesLen;if(n.default.ins().hejiLevel<=0)return this.Punchpre.active=!0,void(this.Punch.active=!1);o.default.level>=n.default.HEJI_SHOW_LEVEL?(this.Punch.active=!0,this.Punchpre.active=!1,this.setPunchSkillTips(),this.setPunchView(),this.refushPanelInfo()):this.setPunchpreView()},t.prototype.setPunchpreView=function(){this.Punch.active=!1,this.Punchpre.active=!0},t.prototype.checkShowEff=function(){},t.prototype.setPunch2View=function(){},t.prototype.destructor=function(){},t.prototype.updateRedPoint=function(e){},t.prototype.refushPanelInfo=function(){for(var e=[],t=1;t<9;t++){this.PubchItems[t-1].updatePunchEquipItemInfo(t-1);var i=n.default.ins().equipListData[t-1];e=0==e.length?i.att:f.default.AttrAddition(e,i.att)}},t.prototype.refushOne=function(e){},t.prototype.countAllAttNum=function(){return null},t.prototype.playAllEffect=function(){},t.prototype.removeAllEffect=function(){},t.prototype.setPunchSkillTips=function(){var e=d.default.TogetherHitConfig[n.default.ins().hejiLevel],t=a.default.ins().getSubRoleByIndex(0),i=new y.default(e.skill_id[t.job-1]);this.hjNameLabel.string=i.name,this.hjDesLabel.string=i.desc;var o=n.default.ins().qimingValueDic,r=0;for(var s in o){var u=o[s].value/100,l=void 0;l=r<2?"<color=#9F946D>"+v.default.substitute(n.default.descArr[r],"")+"</c><color=#00ff00>"+3*u+"%</c>":"<color=#9F946D>"+v.default.substitute(n.default.descArr[r],"")+"</c><color=#00ff00>"+u+"%</c>",this["desc"+s].string=l,r++}0==r&&(this.desc3.text="\u65e0")},t.prototype.setPunchView=function(){var e,t=n.default.ins().qimingAttrDic,i=0,a=0,o=0,r=0,s="";this.currText3.string="",this.currText5.string="",this.currText8.string="";var u=0;if(t&&c.default.getObjectLength(t)>0){for(var l in t)for(var f in t[l])i=t[l][f].zslv,a=t[l][f].lv;o=i+1,r=80,e=d.default.TogetherHitEquipQmConfig[i][a],this.paserText("currText",e,t[1e4*i+a])}else this.currTitleText.string="\u65e0",this.currText3.string="",this.currText5.string="",this.currText8.string="",i=0,a=60,o=1,r=80,e=d.default.TogetherHitEquipQmConfig[i][a],this.paserText("currText",e);for(var p=0;p<n.default.ins().equipListData.length;p++){var h=n.default.ins().equipListData[p].itemConfig;if(h){var y=h.zsLevel?h.zsLevel:0,v=h.level?h.level:1;y>=i&&v>=a?(s=this.colorWhite,u++):s=this.colorGray,y>=o&&v>=r?(this.colorWhite,0):this.colorGray}else s=this.colorGray;"<color="+s+">"+g.default.hejiPosName[p]+"  </c>"}this.currTitleText.string=i>0?i+"\u8f6c\u9f50\u9e23\u5957\u88c5 ("+u+"/8)":a+"\u7ea7\u9f50\u9e23\u5957\u88c5 ("+u+"/8)"},t.prototype.paserText=function(e,t,i){void 0===i&&(i=null);var a={},o=n.default.ins().equipListData,r=0,s={};for(var u in o)if(0!=o[u].configID){var l=o[u].itemConfig;a[m=1e4*(l.zsLevel||0)+l.level]||(a[m]=0),a[m]+=1,r++,s[m]=p.default.getQualityColor(l)}var c=0;for(var f in a)c=a[f],a[f]=r,r-=c;var g={},y=d.default.TogetherHitEquipQmConfig;for(var v in y)for(var m in y[v]){for(var b in a)if(Number(b)==1e4*Number(v)+Number(m)){var _=void 0;for(var C in y[v][m]){var I="";if(a[b]>=Number(C))I=Number(v)?"|C:"+s[b]+"&T:"+v+"\u8f6c"+C+"\u4ef6\u5957:|C:"+this.otherWhiteN+"&T:"+y[v][m][C].desc:"|C:"+s[b]+"&T:"+m+"\u7ea7"+C+"\u4ef6\u5957:|C:"+this.otherWhiteN+"&T:"+y[v][m][C].desc,g[C]=I,_=h.default.getHtmlTextByText(I);else if(!g[C]){var T=d.default.TogetherHitEquipQmConfig;for(var S in T){for(var R in T[S]){I="|C:"+s[b]+"&T:"+R+"\u7ea7"+C+"\u4ef6\u5957:|C:"+this.otherWhiteN+"&T:"+y[S][R][C].desc,_=h.default.getHtmlTextByText(I);break}break}}I&&(this[""+e+C].string=_)}break}break}},t.prototype.updateForge=function(){},__decorate([B({type:cc.Label,displayName:"hjNameLabel"})],t.prototype,"hjNameLabel",void 0),__decorate([B({type:cc.Label,displayName:"hjDesLabel"})],t.prototype,"hjDesLabel",void 0),__decorate([B({type:cc.RichText,displayName:"desc3"})],t.prototype,"desc3",void 0),__decorate([B({type:cc.RichText,displayName:"desc5"})],t.prototype,"desc5",void 0),__decorate([B({type:cc.RichText,displayName:"desc8"})],t.prototype,"desc8",void 0),__decorate([B({type:cc.Label,displayName:"currTitleText"})],t.prototype,"currTitleText",void 0),__decorate([B({type:cc.Node,displayName:"preViewText"})],t.prototype,"preViewText",void 0),__decorate([B({type:cc.Node,displayName:"attrLook"})],t.prototype,"attrLook",void 0),__decorate([B({type:l.default,displayName:"PubchItems"})],t.prototype,"PubchItems",void 0),__decorate([B({type:cc.RichText,displayName:"currText3"})],t.prototype,"currText3",void 0),__decorate([B({type:cc.RichText,displayName:"currText5"})],t.prototype,"currText5",void 0),__decorate([B({type:cc.RichText,displayName:"currText8"})],t.prototype,"currText8",void 0),__decorate([B({type:cc.Node,displayName:"Punch"})],t.prototype,"Punch",void 0),__decorate([B({type:cc.Button,displayName:"fenjieBtn"})],t.prototype,"fenjieBtn",void 0),__decorate([B({type:cc.Button,displayName:"zhulingBtn"})],t.prototype,"zhulingBtn",void 0),__decorate([B({type:cc.Button,displayName:"duihuanBtn"})],t.prototype,"duihuanBtn",void 0),__decorate([B({type:cc.Node,displayName:"Punchpre"})],t.prototype,"Punchpre",void 0),t=__decorate([R],t)}(u.default);i.default=M,cc._RF.pop()},{"../../core/base/AttributeData":"AttributeData","../../core/base/ViewManager":"ViewManager","../../core/utils/CommonUtils":"CommonUtils","../../core/utils/StringUtils":"StringUtils","../../core/utils/TextFlowMaker":"TextFlowMaker","../../core/view/BaseView":"BaseView","../config/ItemConfig":"ItemConfig","../entity/Actor":"Actor","../entity/Role":"Role","../entity/SubRoles":"SubRoles","../manager/GlobalConfig":"GlobalConfig","../module/bag/UserBag":"UserBag","../module/fb/UserFb":"UserFb","../module/heji/view/PunchEquipAttrWin":"PunchEquipAttrWin","../module/heji/view/PunchEquipForge":"PunchEquipForge","../module/heji/view/PunchExchangeWin":"PunchExchangeWin","../module/heji/view/PunchExtShowWin":"PunchExtShowWin","../module/heji/view/PunchResWin":"PunchResWin","../module/rolewin/UserSkill":"UserSkill","../module/skill/data/SkillData":"SkillData","./PunchEquipItem":"PunchEquipItem"}],HejiProgressData:[function(e,t,i){"use strict";cc._RF.push(t,"1d0f3j4jyhPxrWIFnnTg3s4","HejiProgressData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.id=0,this.progress=0}return e.prototype.parser=function(e){this.id=e.readByte(),this.progress=e.readUnsignedInt()},e}();i.default=n,cc._RF.pop()},{}],HejiUseMgr:[function(e,t,i){"use strict";cc._RF.push(t,"1e2ealXnXxHAoFor06QvPWX","HejiUseMgr"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../../manager/TimerManager"),o=e("../../skill/data/SkillData"),r=e("../../../manager/GlobalConfig"),s=e("../../../../core/base/AttributeType"),u=e("../../../base/EntityManager"),l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.register=function(e){this.root=e,this.reset(),this.root.getSkillLvl()&&this.start()},t.prototype.unregister=function(e){this.root=null,this.reset(),this.stop()},t.prototype.start=function(){this.stop(),a.default.ins().doTimer(1e3,0,this.updateTime,this)},t.prototype.stop=function(){a.default.ins().remove(this.updateTime,this)},t.prototype.updateTime=function(){this.cool>0&&(this.cool-=1)},t.prototype.getSkillData=function(){if(!this.root.getSkillLvl())return null;var e=r.default.TogetherHitConfig[this.root.getSkillLvl()],t=this.getRoles()[0];if(!t)return null;if(e){var i=r.default.SkillsConfig[e.skill_id[t.job-1]];return new o.default(i.id)}console.log("\u4f7f\u7528\u5408\u51fb\uff0c\u5408\u51fb\u7b49\u7ea7\uff1a"+this.root.getSkillLvl())},t.prototype.getRoles=function(){return this.root.getRoles()||[]},t.prototype.getMaster=function(){for(var e=this.getRoles(),t=0;t<e.length;t++)if(e[t].getAtt(s.AttributeType.atHp)>0)return u.default.ins().getEntityByHandle(e[t].handle);return null},t.prototype.canUse=function(){return this.cool<=0},t.prototype.useSuccess=function(){this.cool=60},t.prototype.reset=function(){this.cool=7},t}(n.default);i.default=l,cc._RF.pop()},{"../../../../core/base/AttributeType":"AttributeType","../../../../core/base/BaseClass":"BaseClass","../../../base/EntityManager":"EntityManager","../../../manager/GlobalConfig":"GlobalConfig","../../../manager/TimerManager":"TimerManager","../../skill/data/SkillData":"SkillData"}],HelpInfoConfig:[function(e,t,i){"use strict";cc._RF.push(t,"74c9f183KVLvb5BgoMqptCp","HelpInfoConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HideBossConfig:[function(e,t,i){"use strict";cc._RF.push(t,"aa596XbeeZMe7us6FAJuKze","HideBossConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],HintConfig:[function(e,t,i){"use strict";cc._RF.push(t,"dd3a7fVUp9JxafRiJGjyqHl","HintConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HintTargetData:[function(e,t,i){"use strict";cc._RF.push(t,"531d75N4RtDcJYEidI6dS/e","HintTargetData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],HonorMarketPanel:[function(e,t,i){"use strict";cc._RF.push(t,"ebbeeWakk5MtYRAray/7UK0","HonorMarketPanel"),cc._RF.pop()},{}],HunGuConf:[function(e,t,i){"use strict";cc._RF.push(t,"f2880t7pxRPjrf/qH7DgUeD","HunGuConf"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.openzhuanshenglv=0,this.openserverday=0,this.showzhuanshenglv=0,this.equipCount=0,this.hunyuCount=0}}();i.default=n,cc._RF.pop()},{}],HunGuEquip:[function(e,t,i){"use strict";cc._RF.push(t,"3f05ftzm1FImKRXxZFxU35W","HunGuEquip"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.stage=0}}();i.default=n,cc._RF.pop()},{}],HunGuSuit:[function(e,t,i){"use strict";cc._RF.push(t,"e52d0LHcwROnrVhIJ2BTQRD","HunGuSuit"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.count=0,this.stage=0,this.expower=0,this.specialAttrs=0}}();i.default=n,cc._RF.pop()},{}],HunYuEquip:[function(e,t,i){"use strict";cc._RF.push(t,"300ce1DkeZI+Zo3/wzSLWWj","HunYuEquip"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.level=0}}();i.default=n,cc._RF.pop()},{}],HunguData:[function(e,t,i){"use strict";cc._RF.push(t,"b6b08yyrO5FjppSNkNX3oah","HunguData");(function(){function e(){}Object.defineProperty(e.prototype,"items",{get:function(){if(!this._items){this._items=[];for(var e=0;e<GlobalConfig.HunGuConf.equipCount;e++){var t=new a;this._items.push(t)}}return this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0})})();var n,a=function(){return function(){this.itemId=0,this.hunyu=[];for(var e=0;e<GlobalConfig.HunGuConf.hunyuCount;e++)this.hunyu.push(0)}}();(function(e){e[e.ITEM0=0]="ITEM0",e[e.ITEM1=1]="ITEM1",e[e.ITEM2=2]="ITEM2",e[e.ITEM3=3]="ITEM3",e[e.ITEM4=4]="ITEM4",e[e.ITEM5=5]="ITEM5",e[e.ITEM6=6]="ITEM6",e[e.ITEM7=7]="ITEM7"})(n||(n={})),cc._RF.pop()},{}],HunguRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"4344dVOiidDkblQg3q3GW27","HunguRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("./Hungu"),o=e("../bag/UserBag"),r=e("../zs/UserZs"),s=e("../gamescene/GameLogic"),u=e("../../entity/SubRoles"),l=e("../../manager/GlobalConfig"),c=e("../../../core/base/MessageCenter"),d=function(e){function t(){var i=e.call(this)||this;return i.itemPoints=[],i.roleTabs=[],i.redPoint=!1,c.default.compile(t),i.associated(i.postRedPoint,i.postRoleRedPoint),i.associated(i.postRoleRedPoint,a.default.ins().postHunguInfo,a.default.ins().postHunguItems,a.default.ins().postHunyu,a.default.ins().postHunguItemUpgrade,o.default.ins().postItemCountChange,r.default.ins().postZsLv,s.default.ins().postSubRoleChange),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postRedPoint=function(){var e=this.redPoint;this.redPoint=!1;for(var t=0;t<this.roleTabs.length;t++)this.roleTabs[t]&&(this.redPoint=!0);return e!=this.redPoint},t.prototype.postRoleRedPoint=function(){a.default.ins();for(var e=0;e<3;e++){var t=u.default.ins().getSubRoleByIndex(e);if(t)for(var i=0;i<l.default.HunGuConf.equipCount&&(this.roleTabs[e]=this.HunguItemRedPoint(t.index,i),!this.roleTabs[e]);i++);else this.roleTabs[e]=!1}return!0},t.prototype.HunguItemRedPoint=function(e,t){var i=a.default.ins(),n=!1;return!i.getHunguItemsList(t).length||i.hunguData[e]&&i.hunguData[e].items[t].itemId?!!(n=i.getHunyuRedPoint(e,t))||(i.hunguData[e]&&i.hunguData[e].items[t].itemId&&(n=i.getUpgradeRedPoint(i.hunguData[e].items[t].itemId)),n):n=!0},t}(n.default);i.default=d,window.GameSystem.push(d.ins.bind(d)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../base/BaseSystem":"BaseSystem","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../gamescene/GameLogic":"GameLogic","../zs/UserZs":"UserZs","./Hungu":"Hungu"}],Hungu:[function(e,t,i){"use strict";cc._RF.push(t,"5d372el3cVLFbhmE9qbbkaL","Hungu"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../server/GameServer"),s=e("../../manager/GlobalConfig"),u=e("../zs/UserZs"),l=e("../../config/ItemConfig"),c=e("../../consts/ItemType"),d=e("../bag/UserBag"),f=e("../../entity/Actor"),p=e("../../entity/SubRoles"),h=e("../../../core/base/AttributeData"),g=e("../../../core/base/AttributeType"),y=e("../activity/model/RewardData"),v=e("../../../core/utils/DateUtils"),m=function(e){function t(){var i=e.call(this)||this;return i.hunShouFBTimes=0,i.hunShouFBPassID=0,i.sysId=a.PackageID.Hungu,o.default.compile(t),i.regNetMsg(1,i.postHunguInfo),i.regNetMsg(2,i.postHunguItems),i.regNetMsg(3,i.postHunyu),i.regNetMsg(4,i.postHunguItemUpgrade),i.regNetMsg(6,i.postSweepHunShouFB),i.regNetMsg(7,i.postHunShouFBInfo),i.regNetMsg(8,i.postHunShouFBEndTime),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},Object.defineProperty(t.prototype,"hunguData",{get:function(){return this._hunguData||(this._hunguData=[]),this._hunguData},enumerable:!0,configurable:!0}),t.prototype.checkOpen=function(){return!(r.default.serverOpenDay<s.default.HunGuConf.openserverday-1)&&!(u.default.ins().lv<s.default.HunGuConf.openzhuanshenglv)},t.prototype.checkShowOpen=function(){return!(r.default.serverOpenDay<s.default.HunGuConf.openserverday-1)&&!(u.default.ins().lv<s.default.HunGuConf.showzhuanshenglv)},t.prototype.getHunguItemsPos=function(e){var t=-1,i=s.default.ItemConfig[e];return i&&(t=l.default.getSubType(i)),t},t.prototype.getHunguItemsList=function(e){for(var t=[],i=d.default.ins().getBagGoodsByType(c.ItemType.TYPE_24),n=0;n<i.length;n++)this.getHunguItemsPos(i[n].itemConfig.id)==e&&t.push(i[n]);return t.sort(function(e,t){var i=s.default.HunGuEquip[e.configID],n=s.default.HunGuEquip[t.configID];return i.stage>n.stage?-1:1}),t},t.prototype.getHunyuRedPoint=function(e,t){if(!this.hunguData[e])return!1;for(var i=0;i<this.hunguData[e].items[t].hunyu.length;i++){if(this.getHunyuKongRedPoint(e,t,i))return!0}return!1},t.prototype.getHunyuKongRedPoint=function(e,t,i){if(!this.hunguData[e])return!1;if(!this.hunguData[e].items[t].itemId||i+1>s.default.HunGuEquip[this.hunguData[e].items[t].itemId].hunyuNum)return!1;var n=s.default.HunGuConf.hunyuType[t][i],a=this.hunguData[e].items[t].hunyu[i],o=s.default.HunYuEquip[n][a+1];if(!o)return!1;if(o.cost){var r=d.default.ins().getBagItemById(o.cost.id);if(r&&r.count>=o.cost.count)return!0}else{var u=s.default.HunGuConf.unlockCost[i+1];if(f.default.yb>=u)return!0}return!1},t.prototype.getHunguPosHyPower=function(e,t){var i=0;if(!this.hunguData[e]||!this.hunguData[e].items[t].itemId)return i;var n=s.default.HunGuEquip[this.hunguData[e].items[t].itemId];if(!n)return i;for(var a=n.hunyuNum,o=0;o<a;o++){var r=s.default.HunGuConf.hunyuType[t][o],u=this.hunguData[e].items[t].hunyu[o],l=s.default.HunYuEquip[r][u];if(l)i+=d.default.getAttrPower(l.attrs,p.default.ins().getSubRoleByIndex(e)),i+=l.expower?l.expower:0}return i},t.prototype.getHunguItemPower=function(e){var t=0,i=s.default.HunGuEquip[e];i&&(t+=d.default.getAttrPower(i.attrs),t+=i.expower?i.expower:0);return t},t.prototype.getHunguPosPower=function(e,t,i,n){var a=0;if(!this.hunguData[e])return a;var o=0;n&&(o+=this.getHunguPosHyPower(e,t));var r=[],u=this.hunguData[e].items[t].itemId,l=s.default.HunGuEquip[u];if(l&&(a+=d.default.getAttrPower(l.attrs,p.default.ins().getSubRoleByIndex(e)),a+=l.expower?l.expower:0,i))for(var c=0;c<l.attrs.length;c++){for(var f=!1,g=0;g<r.length;g++)if(r[g].type==l.attrs[c].type){r[g].value+=l.attrs[c].value,f=!0;break}f||r.push(new h.default(l.attrs[c].type,l.attrs[c].value))}var y=[];if(i){var v=[];for(var m in i)for(var c in i[m])if(i[m][c].count.length>=+c){var b=i[m][c].stage,_=s.default.HunGuSuit[m][c][b];_&&_.specialAttrs&&v.push(_.specialAttrs/1e4)}v.length||v.push(0);for(m=0;m<v.length;m++)for(c=0;c<r.length;c++)y[c]||(y[c]=new h.default(r[c].type,0)),y[c].value+=r[c].value*v[m]}return a+=o+d.default.getAttrPower(y)},t.prototype.getResonancePower=function(e){var t=0;if(!this.hunguData[e])return t;var i=this.getSuitData(e);for(var n in i)for(var a in i[n]){var o=i[n][a].stage;if(o)if(!(i[n][a].count.length<+a)){var r=s.default.HunGuSuit[n][a][o];r.attrs&&(t+=d.default.getAttrPower(r.attrs,p.default.ins().getSubRoleByIndex(e))),t+=r.expower?r.expower:0}}return t},t.prototype.getSuitData=function(e){var t={};if(!this.hunguData[e])return t;var i=[];for(var n in s.default.HunGuConf.suit)if(s.default.HunGuSuit[n]){for(var a in i[+n]=[],s.default.HunGuConf.suit[n]){var o=s.default.HunGuConf.suit[n][a],r=this.hunguData[e].items[o].itemId;r&&i[+n].push(s.default.HunGuEquip[r])}i[+n].sort(function(e,t){return e.stage>t.stage?-1:1})}for(var a in s.default.HunGuSuit)for(var u in t[a]={},s.default.HunGuSuit[a]){t[a][u]={},t[a][u].count=[],t[a][u].stage=0;for(var l=0;l<+u&&i[+a][l];l++)t[a][u].count.push(i[+a][l].id),t[a][u].stage||(t[a][u].stage=i[+a][l].stage),t[a][u].stage>i[+a][l].stage&&(t[a][u].stage=i[+a][l].stage)}return t},t.prototype.getHunguPosName=function(e){return s.default.HunGuConf.hunguName[e]},t.prototype.getHunguItemQualityName=function(e,t){var i="",n=t;switch(n||(n=s.default.HunGuEquip[e]?s.default.HunGuEquip[e].stage:1),n){case 1:i="\u51e1\u54c1";break;case 2:i="\u4e2d\u54c1";break;case 3:i="\u4e0a\u54c1";break;case 4:i="\u6781\u54c1";break;case 5:i="\u795e\u54c1"}return i},t.prototype.calcHunguTotalValue=function(e){var t=[],i=this.hunguData[e];if(!i)return t;for(var n=[],a=0;a<i.items.length;a++){var o=i.items[a].itemId,r=s.default.HunGuEquip[o];if(r){for(var u=0;u<r.attrs.length;u++){for(var l=!1,c=0;c<n.length;c++)if(n[c].type==r.attrs[u].type){n[c].value+=r.attrs[u].value,l=!0;break}l||n.push(new h.default(r.attrs[u].type,r.attrs[u].value))}for(u=0;u<i.items[a].hunyu.length;u++)if(i.items[a].hunyu[u])for(var d=s.default.HunGuConf.hunyuType[a][u],f=i.items[a].hunyu[u],p=s.default.HunYuEquip[d][f],g=0;g<p.attrs.length;g++){for(l=!1,c=0;c<t.length;c++)if(t[c].type==p.attrs[g].type){t[c].value+=p.attrs[g].value,l=!0;break}l||t.push(new h.default(p.attrs[g].type,p.attrs[g].value))}}}var y=this.getSuitData(e),v=[];for(var a in y)for(var u in y[a])if(y[a][u].count.length>=+u){var m=y[a][u].stage,b=s.default.HunGuSuit[a][u][m];if(b&&b.attrs)for(g=0;g<b.attrs.length;g++){for(l=!1,c=0;c<t.length;c++)if(t[c].type==b.attrs[g].type){t[c].value+=b.attrs[g].value,l=!0;break}l||t.push(new h.default(b.attrs[g].type,b.attrs[g].value))}b&&b.specialAttrs&&v.push(b.specialAttrs/1e4)}for(a=0;a<v.length;a++)for(u=0;u<n.length;u++)n[u].value*=1+v[a];for(g=0;g<n.length;g++){for(l=!1,c=0;c<t.length;c++)if(t[c].type==n[g].type){t[c].value+=n[g].value,t[c].value=Math.floor(t[c].value),l=!0;break}l||t.push(new h.default(n[g].type,Math.floor(n[g].value)))}return t},t.prototype.getAttrStrByType=function(e){var t="";switch(e){case g.AttributeType.atMaxHp:t="\u751f       \u547d";break;case g.AttributeType.atAttack:t="\u653b       \u51fb";break;case g.AttributeType.atDef:t="\u7269       \u9632";break;case g.AttributeType.atRes:t="\u9b54       \u9632"}return t},t.prototype.getCurHunguId=function(e,i){var n=t.ins().hunguData[e];if(!n)return 0;var a=n.items[i];return a?a.itemId:0},t.prototype.getNextHunguId=function(e,i){var n=t.ins().hunguData[e];if(!n)return 0;var a=n.items[i];return a?s.default.HunGuEquip[a.itemId].nextId:0},t.prototype.getNextHunyuLvConfig=function(e,t,i){if(!this.hunguData[e])return null;var n=s.default.HunGuConf.hunyuType[t][i],a=this.hunguData[e].items[t].hunyu[i];return s.default.HunYuEquip[n][a+1]},t.prototype.getUpgradeRedPoint=function(e){var t=s.default.HunGuEquip[e];if(!t||!t.addStageCost)return!1;var i=d.default.ins();for(var n in t.addStageCost){var a=i.getBagItemById(t.addStageCost[n].id);if(!a||a.count<t.addStageCost[n].count)return!1}return!0},t.prototype.sendHunguItems=function(e,t,i){var n=this.getBytes(2);n.writeByte(e),n.writeByte(t),n.writeInt(i),this.sendToServer(n)},t.prototype.sendHunyu=function(e,t,i){var n=this.getBytes(3);n.writeByte(e),n.writeByte(t),n.writeByte(i),this.sendToServer(n)},t.prototype.sendHunguItemUpgrade=function(e,t){var i=this.getBytes(4);i.writeByte(e),i.writeByte(t),this.sendToServer(i)},t.prototype.postHunguInfo=function(e){for(var t=e.readByte(),i=0;i<t;i++){var n=e.readByte(),a=e.readByte(),o=void 0;o=this.hunguData[n]?this.hunguData[n]:new HunguData;for(var r=0;r<a;r++){o.items[r].itemId=e.readInt();for(var s=e.readByte(),u=0;u<s;u++)o.items[r].hunyu[u]=e.readInt()}this.hunguData[n]=o}},t.prototype.postHunguItems=function(e){var t=e.readByte(),i=e.readByte(),n=e.readInt();this.hunguData[t]||(this.hunguData[t]=new HunguData);var a=this.hunguData[t],o=a.items[i].itemId;a&&(a.items[i].itemId=n),0==o&&0!=n&&this.postNothing2Wear(1,i),0==n&&0!=o&&this.postWear2Noting(0,i)},t.prototype.postNothing2Wear=function(e,t){return[e,t]},t.prototype.postWear2Noting=function(e,t){return[e,t]},t.prototype.postHunyu=function(e){var t=e.readByte(),i=e.readByte(),n=e.readByte(),a=e.readInt();this.hunguData[t]&&(this.hunguData[t].items[i].hunyu[n-1]=a)},t.prototype.postHunguItemUpgrade=function(e){var t=e.readByte(),i=e.readByte(),n=e.readInt();this.hunguData[t]&&(this.hunguData[t].items[i].itemId=n),this.postNothing2Wear(1,i)},t.prototype.enterHunShouFB=function(){this.sendBaseProto(5)},t.prototype.sweepHunShouFB=function(){this.sendBaseProto(6)},t.prototype.postSweepHunShouFB=function(e){var t=e.readInt();this.hunShouFBTimes=e.readInt();for(var i,n=e.readInt(),a=[],o=0;o<n;o++)(i=new y.default).type=e.readInt(),i.id=e.readInt(),i.count=e.readInt(),a.push(i);ViewManager.ins().open(HunShouSweepWin,t,a)},t.prototype.postHunShouFBInfo=function(e){this.hunShouFBPassID=e.readInt(),this.hunShouFBTimes=s.default.HunGuConf.dayRewardCount-e.readInt()},t.prototype.postHunShouFBEndTime=function(e){this._hunShouFBEndTime=e.readInt()},t.prototype.getHunShouFbLeftTime=function(){return Math.floor((1e3*this._hunShouFBEndTime+1e3*v.default.SECOND_2010-r.default.serverTime)/1e3)},t.prototype.isHunShouFBOpen=function(){return u.default.ins().lv>=s.default.HunGuConf.needZsLv&&r.default.serverOpenDay+1>=s.default.HunGuConf.fbOpenDay},t.prototype.showHunShouFB=function(){return u.default.ins().lv>=s.default.HunGuConf.showZsLv&&r.default.serverOpenDay+1>=s.default.HunGuConf.fbOpenDay},t.prototype.showHunShouRed=function(){return!!this.isHunShouFBOpen()&&this.hunShouFBTimes>0},t}(n.default);i.default=m,window.GameSystem.push(m.ins.bind(m)),cc._RF.pop()},{"../../../core/base/AttributeData":"AttributeData","../../../core/base/AttributeType":"AttributeType","../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../base/BaseSystem":"BaseSystem","../../config/ItemConfig":"ItemConfig","../../consts/ItemType":"ItemType","../../entity/Actor":"Actor","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../activity/model/RewardData":"RewardData","../bag/UserBag":"UserBag","../server/GameServer":"GameServer","../zs/UserZs":"UserZs"}],Hunt:[function(e,t,i){"use strict";cc._RF.push(t,"b21a70JCAtBZqaZjA7W6To5","Hunt"),cc._RF.pop()},{}],IBaseView:[function(e,t,i){"use strict";cc._RF.push(t,"d408bZ/hwlMF6O3sphbGbKm","IBaseView"),cc._RF.pop()},{}],IChar:[function(e,t,i){"use strict";cc._RF.push(t,"1daba7wDUhFCJaBaAm+HZKg","IChar"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],IEventDispatcher:[function(e,t,i){"use strict";cc._RF.push(t,"ae254gRrYJK8qUMAYSsaw+Q","IEventDispatcher"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],IHejiUse:[function(e,t,i){"use strict";cc._RF.push(t,"7665d7XlIlOhYqq8xVbZi9p","IHejiUse"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],IItemRenderer:[function(e,t,i){"use strict";cc._RF.push(t,"eb687N8wnJPXbsDWcrwxUC8","IItemRenderer"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ImbaConf:[function(e,t,i){"use strict";cc._RF.push(t,"ca5782iBipOy5eiTRsMozV0","ImbaConf"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ImbaJigsawConf:[function(e,t,i){"use strict";cc._RF.push(t,"e37d5n8SoZBaoiAmrCcz08K","ImbaJigsawConf"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ImbaSkillReviseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"af0857pme5BqqJyCm5qXl3D","ImbaSkillReviseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.skill=0,this.imba_id=0,this.a=0,this.b=0,this.cd=0,this.d=0,this.crit=0,this.affectCount=0,this.selfEff=[],this.targetEff=[],this.args={}}}();i.default=n,cc._RF.pop()},{}],InstanceBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a0f46ZAtqRKOI8fSGurXReA","InstanceBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],InstanceConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e281aCNPm9BQ4ViE39RbMZW","InstanceConfig");cc._RF.pop()},{}],IntegralStore:[function(e,t,i){"use strict";cc._RF.push(t,"f75aehoVyNGjavGLJ0kSnKY","IntegralStore"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],IntegrationItemRenderer:[function(e,t,i){"use strict";cc._RF.push(t,"bd2a1e3eR9MQLNkjVLQlVnR","IntegrationItemRenderer"),cc._RF.pop()},{}],IntegrationPanel:[function(e,t,i){"use strict";cc._RF.push(t,"6c187Owzq5Kv6kPcnEvAnHi","IntegrationPanel"),cc._RF.pop()},{}],ItemBase:[function(e,t,i){"use strict";cc._RF.push(t,"80a17RzADhMf5xzN6PVV6Bo","ItemBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../config/ItemConfig"),a=e("../module/bag/UserBag"),o=e("../manager/GlobalConfig"),r=e("../module/bag/ItemData"),s=e("../module/activity/model/RewardData"),u=e("../consts/ItemConst"),l=e("../entity/Actor"),c=e("../../core/base/ViewManager"),d=e("../module/forge/model/EquipPos"),f=e("../../core/view/BaseEventView"),p=e("../../core/utils/Util"),h=e("../consts/MoneyConst"),g=e("../module/bag/view/ItemCurrencyWin"),y=e("../module/bag/view/FlowerUseTipsWin"),v=e("../module/bag/view/HejiEquipTipsWin"),m=e("../module/bag/view/ItemUseTipsWin"),b=e("../consts/ItemType"),_=e("../module/dress/Dress"),C=e("../module/bag/view/ItemDetailedWin"),I=e("../module/bag/view/EquipDetailedWin"),T=e("../module/samsara/view/SamsaraEquipTips"),S=e("../../core/utils/ComponentUtil"),R=e("../module/bag/view/RuneTipsWin"),B=cc._decorator,M=B.ccclass,E=B.property,D=function(e){function t(){var t=e.call(this)||this;return t.itemIcon=null,t.count=null,t.nameTxt=null,t.redPoint=null,t.showSpeicalDetail=!0,t.isOpenSelectImg=!1,t.isCurrency=!1,t.showName=!1,t}var i;return __extends(t,e),i=t,t.prototype.onLoad=function(){},t.prototype.onDisable=function(){},t.prototype.setItemBaseCount=function(e){p.Util.isNullOrUndefined(this.count)||(p.Util.isNullOrUndefined(e)?this.count.string="":this.count.string=e+"")},t.prototype.setItemBaseData=function(e){if(this.data=e,p.Util.isNullOrUndefined(this.data))this.setItemBaseCount(null),this.nameTxt.string="",this.itemIcon.active=!1,this.redPoint.active=!1;else{this.node.getComponent(cc.Button).clickEvents[0]=S.ComponentUtil.createEventHandler(this.node,"ItemBase","onClick",""),this.itemConfig=e.itemConfig;var t=n.default.getType(this.itemConfig);t==b.ItemType.TYPE_0||t==b.ItemType.TYPE_4?this.setItemBaseCount(null):this.setItemBaseCount(e.count),this.nameTxt.string=this.itemConfig.name,this.nameTxt.node.color=n.default.getColoFromHEXByConfig(this.itemConfig),this.itemIcon.color=n.default.getColoFromHEXByConfig(this.itemConfig),this.redPoint.active=!1}},t.prototype.setDataByConfig=function(e,t){var i=n.default.getType(e);if(i!=b.ItemType.TYPE_0||248==e.descIndex||this.showName)this.nameTxt.string=t||e.name,this.nameTxt.node.color=n.default.getColoFromHEXByConfig(e);else{var o=isNaN(e.zsLevel)?(e.level||1)+"\u7ea7":e.zsLevel+"\u8f6c";this.nameTxt.string=o,-1!=a.default.fitleEquip.indexOf(e.id)&&(this.nameTxt.string="\u65e0\u7ea7\u522b",this.nameTxt.node.color=n.default.getColoFromHEXByConfig(e))}void 0!=this.num&&this.setCount(this.num+""),i==b.ItemType.TYPE_12&&(this.redPoint.active=this.getGuildGift(e))},t.prototype.dataChanged=function(){this.clear();var e=!1;if(this.redPoint.active=!1,this.data instanceof n.default)this.setDataByConfig(this.itemConfig,this.runeName);else if(this.data instanceof r.default){if(this.itemConfig=this.data.itemConfig,!this.itemConfig)return;this.setDataByConfig(this.itemConfig),this.data.count>1?this.setCount(this.data.count+""):this.setCount(""),e=!0}else if(0==this.data.type){var t=1;switch(this.data.id){case h.MoneyConst.yuanbao:t=5;break;case h.MoneyConst.gold:t=0;break;case h.MoneyConst.soul:case h.MoneyConst.chip:case h.MoneyConst.piece:case h.MoneyConst.godweaponExp:t=2}this.isCurrency=!0,this.nameTxt.string=s.default.getCurrencyName(this.data.id),this.nameTxt.node.color=n.default.getColorFromHEXByValue(i.QUALITY_COLOR[t]),void 0!=(a=this.data.count)&&a>1?this.setCount(a+""):this.setCount("")}else if(1==this.data.type){if(this.itemConfig=o.default.ItemConfig[this.data.id],!this.itemConfig)return;this.setDataByConfig(this.itemConfig),(a=this.data.count)>1?this.setCount(a+""):this.setCount("")}else if(6==this.data.type){var a;this.itemConfig=o.default.ItemConfig[this.data.id],this.setDataByConfig(this.itemConfig),void 0!=(a=this.data.count)&&a>1?this.setCount(a+""):this.setCount("")}if(this.redPoint.active||(this.redPoint.active=this.data.canbeUsed),e&&this.itemConfig)if(n.default.getType(this.itemConfig)==b.ItemType.TYPE_8){var c=!0;this.itemConfig.id==u.ItemConst.EXP_ITEM&&(c=l.default.level>=65),this.redPoint.active=this.data&&this.data.count>0&&c,this.itemConfig.id==u.ItemConst.LEVELUP_ITEM&&(this.redPoint.active=!0)}else if(n.default.getType(this.itemConfig)==b.ItemType.TYPE_17)this.redPoint.active=!0;else if(n.default.getType(this.itemConfig)==b.ItemType.TYPE_20)this.redPoint.active=this.data.canbeUsed;else if(n.default.getType(this.itemConfig)==b.ItemType.TYPE_25)this.redPoint.active=!0;else if(this.itemConfig.id==o.default.TeamFuBenBaseConfig.itemId)this.redPoint.active=!0;else{var d=o.default.ItemComposeConfig[this.itemConfig.id];d&&d.srcCount<=this.data.count&&(this.redPoint.active=!0)}this.dataChangeHandler()},t.prototype.dataChangeHandler=function(){},t.prototype.clear=function(){this.itemConfig=null,this.count.string="",this.nameTxt.string=""},t.prototype.destruct=function(){},t.prototype.isShowJob=function(e){},t.prototype.onClick=function(){console.log("----------------------------onClick itemBase !!!!!",this.data),this.showCurrency(),this.showDetail()},t.prototype.getItemType=function(){return this.itemConfig?n.default.getType(this.itemConfig):-1},t.prototype.showCurrency=function(){if(this.isCurrency)switch(this.data.id){case h.MoneyConst.yuanbao:case h.MoneyConst.feat:case h.MoneyConst.godweaponExp:c.default.ins().open(g.default,this.data.id,this.data.count)}},t.prototype.showDetail=function(){if(this.itemConfig)if(this.itemConfig.id!=o.default.TeamFuBenBaseConfig.itemId)switch(console.log("type == ",n.default.getType(this.itemConfig),this.itemConfig),n.default.getType(this.itemConfig)){case b.ItemType.TYPE_0:case b.ItemType.TYPE_4:this.openEquipsTips();break;case b.ItemType.TYPE_5:c.default.ins().open(v.default,this.data,!1,!0);break;case b.ItemType.TYPE_1:this.data.handle&&o.default.ItemComposeConfig[this.itemConfig.id]?c.default.ins().open(m.default,this.data):this.data.handle&&this.itemConfig.id==o.default.ShenShouConfig.battleCountItem||this.data.handle&&this.itemConfig.id==_.default.ins().getIdZhuangBanId(this.itemConfig.id)||c.default.ins().open(C.default,0,this.itemConfig.id,this.data.count);break;case b.ItemType.TYPE_2:this.data.handle?c.default.ins().open(m.default,this.data):this.data.count?c.default.ins().open(C.default,0,this.itemConfig.id,this.data.count):c.default.ins().open(C.default,0,this.itemConfig.id);break;case b.ItemType.TYPE_6:c.default.ins().open(R.default,0,this.itemConfig.id,this.desc,this.desc2);break;case b.ItemType.TYPE_9:break;case b.ItemType.TYPE_10:this.data.handle?c.default.ins().open(m.default,this.data):c.default.ins().open(C.default,0,this.itemConfig.id);break;case b.ItemType.TYPE_8:case b.ItemType.TYPE_20:1==this.data.type&&c.default.ins().open(C.default,0,this.itemConfig.id,this.data.count);break;case b.ItemType.TYPE_12:this.data.itemConfig&&this.getGuildGift(this.data)?c.default.ins().open(m.default,this.data):c.default.ins().open(m.default,{itemConfig:this.itemConfig,configID:this.itemConfig.id,count:this.data.count},!0);break;case b.ItemType.TYPE_11:break;case b.ItemType.TYPE_13:case b.ItemType.TYPE_14:this.data.type==b.ItemType.TYPE_1?c.default.ins().open(C.default,0,this.itemConfig.id,this.data.count):c.default.ins().open(m.default,{itemConfig:this.itemConfig,configID:this.itemConfig.id,count:this.data.count});break;case b.ItemType.TYPE_15:c.default.ins().open(C.default,0,this.itemConfig.id,this.data?this.data.count:void 0);break;case b.ItemType.TYPE_16:case b.ItemType.TYPE_17:case b.ItemType.TYPE_19:case b.ItemType.TYPE_21:case b.ItemType.TYPE_22:case b.ItemType.TYPE_23:case b.ItemType.TYPE_24:break;case b.ItemType.TYPE_25:c.default.ins().open(m.default,this.data);break;default:c.default.ins().open(C.default,0,this.itemConfig.id)}else c.default.ins().open(y.default)},t.prototype.getGuildGift=function(e){var t=0;if(e instanceof n.default)t=e.level;else if(e instanceof r.default){t=o.default.ItemConfig[e._configID].level}return l.default.level>=t},t.prototype.setCount=function(e){e.length>4&&(e=Math.floor(Number(e)/1e3)/10+"\u4e07");this.count.string=e},t.prototype.openEquipsTips=function(){var e=n.default.getSubType(this.itemConfig);e>=d.EquipPos.HAT&&e<=d.EquipPos.SHIELD?c.default.ins().open(T.default,this.itemConfig.id):c.default.ins().open(I.default,1,this.data.handle,this.itemConfig.id,this.data)},t.prototype.isShowName=function(e){this.nameTxt.node.active=e},t.prototype.getText=function(){return this.nameTxt.string},t.prototype.getTextColor=function(){return this.nameTxt.node.color},t.prototype.HideImgBg=function(){this.itemIcon.active=!1},t.prototype.showNum=function(e){this.count.node.active=e},t.prototype.setImgBg=function(e){this.itemIcon.color=p.Util.getColoFromHEXByQua(e)},t.prototype.setSelect=function(e){this.isOpenSelectImg},t.prototype.hideName=function(){this.nameTxt.node.active=!1},t.prototype.setName=function(e){this.nameTxt.string=e},t.QUALITY_COLOR=["#e2dfd4","#35e62d","#d242fb","#ff750f","#f3311e","#ffd93f"],t.additionRange=15,__decorate([E({type:cc.Node,displayName:"itemIcon"})],t.prototype,"itemIcon",void 0),__decorate([E({type:cc.Label,displayName:"count"})],t.prototype,"count",void 0),__decorate([E({type:cc.Label,displayName:"nameTxt"})],t.prototype,"nameTxt",void 0),__decorate([E({type:cc.Node,displayName:"redPoint"})],t.prototype,"redPoint",void 0),t=i=__decorate([M],t)}(f.default);i.default=D,cc._RF.pop()},{"../../core/base/ViewManager":"ViewManager","../../core/utils/ComponentUtil":"ComponentUtil","../../core/utils/Util":"Util","../../core/view/BaseEventView":"BaseEventView","../config/ItemConfig":"ItemConfig","../consts/ItemConst":"ItemConst","../consts/ItemType":"ItemType","../consts/MoneyConst":"MoneyConst","../entity/Actor":"Actor","../manager/GlobalConfig":"GlobalConfig","../module/activity/model/RewardData":"RewardData","../module/bag/ItemData":"ItemData","../module/bag/UserBag":"UserBag","../module/bag/view/EquipDetailedWin":"EquipDetailedWin","../module/bag/view/FlowerUseTipsWin":"FlowerUseTipsWin","../module/bag/view/HejiEquipTipsWin":"HejiEquipTipsWin","../module/bag/view/ItemCurrencyWin":"ItemCurrencyWin","../module/bag/view/ItemDetailedWin":"ItemDetailedWin","../module/bag/view/ItemUseTipsWin":"ItemUseTipsWin","../module/bag/view/RuneTipsWin":"RuneTipsWin","../module/dress/Dress":"Dress","../module/forge/model/EquipPos":"EquipPos","../module/samsara/view/SamsaraEquipTips":"SamsaraEquipTips"}],ItemComposeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"47c8dchZ6RFEYkyjsbY8oaa","ItemComposeConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ItemConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a6774BQ4p1FpLPZeevFsFNO","ItemConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../manager/GlobalConfig"),a=e("../../core/base/AttributeData"),o=e("../entity/Role"),r=e("../module/bag/UserBag"),s=e("../../core/base/AttributeType"),u=e("../customComponent/ItemBase"),l=e("../consts/ItemType"),c=function(){function e(){this.bagType=0}return e.calculateBagItemScore=function(e){var t={hp:2,atk:4,def:5,res:6},i=n.default.EquipConfig[e.itemConfig.id],a=n.default.AttrPowerConfig,s=0,u=e.att,l=0;if(u){for(var c in t)if(l=0,i[c]){for(var d=0;d<u.length;d++)if(u[d].type==t[c]){l=i[c]+u[d].value;break}s+=(void 0==l?0:l)*a[t[c]].power}}else for(var f in t){if(l=i[f])s+=l*a[o.default.getAttrTypeByName(f)].power}var p=0;return i.baseAttr1&&(p+=r.default.getAttrPower([i.baseAttr1])),i.baseAttr2&&(p+=r.default.getAttrPower([i.baseAttr2])),i.exPower&&(p+=i.exPower),Math.floor(s/100)+Math.floor(p)},e.pointCalNumber=function(e){return 0},e.getBaseAttrData=function(e){var t=n.default.EquipConfig[e.id],i={hp:2,atk:4,def:5,res:6},o=[s.AttributeType.atHolyDamege],r=[];for(var u in i)t[u]&&r.push(new a.default(i[u],t[u]));return t.baseAttr1&&o.indexOf(t.baseAttr1.type)>=0&&r.push(new a.default(t.baseAttr1.type,t.baseAttr1.value)),t.baseAttr2&&o.indexOf(t.baseAttr2.type)>=0&&r.push(new a.default(t.baseAttr2.type,t.baseAttr2.value)),r},e.calculateRelatePower=function(t,i){var n=0;if(!t||!i)return n;for(var a=0,o=t;a<o.length;a++){var r=o[a];n+=e.relatePower(r,i)}return n},e.relatePower=function(e,t){return 0},e.getQuality=function(e){return e&&n.default.ItemDescConfig[e.descIndex]?n.default.ItemDescConfig[e.descIndex].quality:0},e.getQualityColor=function(e){return u.default.QUALITY_COLOR[this.getQuality(e)]},e.getColoFromHEXByConfig=function(e){return cc.Color.BLACK.fromHEX(this.getQualityColor(e))},e.getColorFromHexByQua=function(e){return null},e.getColorFromHEXByValue=function(e){return cc.Color.BLACK.fromHEX(e)},e.getType=function(e){return e&&n.default.ItemDescConfig[e.descIndex]?n.default.ItemDescConfig[e.descIndex].type:0},e.getSubType=function(e){return e&&n.default.ItemDescConfig[e.descIndex]?n.default.ItemDescConfig[e.descIndex].subType:0},e.getJob=function(e){return e&&n.default.ItemDescConfig[e.descIndex]?n.default.ItemDescConfig[e.descIndex].job:0},e.isEquip=function(e){switch(this.getType(e)){case l.ItemType.TYPE_0:case l.ItemType.TYPE_4:case l.ItemType.TYPE_11:return!0}return!1},e.itemPoints={},e}();i.default=c,cc._RF.pop()},{"../../core/base/AttributeData":"AttributeData","../../core/base/AttributeType":"AttributeType","../consts/ItemType":"ItemType","../customComponent/ItemBase":"ItemBase","../entity/Role":"Role","../manager/GlobalConfig":"GlobalConfig","../module/bag/UserBag":"UserBag"}],ItemConst:[function(e,t,i){"use strict";cc._RF.push(t,"53794BP+TxBV5Yh9xGn9cAP","ItemConst"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.RENAME=450001]="RENAME",e[e.EXP_ITEM=200137]="EXP_ITEM",e[e.GUANYIN_ITEM=600005]="GUANYIN_ITEM",e[e.LEVELUP_ITEM=200155]="LEVELUP_ITEM",e[e.GOLD_BRICK=200164]="GOLD_BRICK",e[e.TREASURE_ITEM=200165]="TREASURE_ITEM",e[e.eTREASURE_RUNE=200166]="eTREASURE_RUNE",e[e.PUBLICBOSS=200156]="PUBLICBOSS",e[e.WORLDBOSS=200157]="WORLDBOSS",e[e.FIRE_FB=202e3]="FIRE_FB",e[e.GODWING_ITEM=601e3]="GODWING_ITEM",e[e.THANKS_ITEM=0]="THANKS_ITEM",e[e.SHENYUBOSS=200995]="SHENYUBOSS",e[e.WEIWANG_ITEM=200318]="WEIWANG_ITEM",e[e.GODWEAPON_ITEM=200333]="GODWEAPON_ITEM",e[e.JINGJIN=200332]="JINGJIN"}(i.ItemConst||(i.ItemConst={})),cc._RF.pop()},{}],ItemCurrencyWin:[function(e,t,i){"use strict";cc._RF.push(t,"47440GOoFJJU4y5msJekBzK","ItemCurrencyWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.initUI=function(){throw new Error("Method not implemented.")},t.prototype.initData=function(){throw new Error("Method not implemented.")},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error("Method not implemented.")},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error("Method not implemented.")},t=__decorate([o],t)}(n.default));i.default=r,cc._RF.pop()},{"../../../../core/view/BaseEuiView":"BaseEuiView"}],ItemData:[function(e,t,i){"use strict";cc._RF.push(t,"8904bi0iB5EuLGuBbgEK2Ol","ItemData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/AttributeData"),a=e("../../manager/GlobalConfig"),o=e("../../config/ItemConfig"),r=e("../../../core/utils/Util"),s=function(){function e(){this._point=-1}return e.prototype.parser=function(e){this.handle=e.readDouble(),this.configID=e.readInt(),this.count=e.readInt(),this.att=[];for(var t=0;t<8;t++){var i=new n.default(e.readInt(),e.readInt());this.att.push(i)}this.extAtt=[];for(t=0;t<8;t++){i=new n.default(e.readInt(),e.readInt());this.extAtt.push(i)}},Object.defineProperty(e.prototype,"configID",{get:function(){return this._configID},set:function(e){this.itemConfig=a.default.ItemConfig[e],r.Util.isNullOrUndefined(this.itemConfig)&&console.log(this.itemConfig,"\u65e0\u6cd5\u8bfb\u53d6\u9053\u5177\u914d\u7f6e\uff0cid\uff1a"+e+",\u8bf7\u68c0\u67e5\u914d\u7f6e"),this._point=-1,this._configID=e,this.setCanbeUsed()},enumerable:!0,configurable:!0}),e.getStringByList=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=": ");for(var n="",a=0;a<e.length;a++)if(n+=e[a]+i,a<e.length-1)for(var o=0;o<t;o++)n+="\n";return n},e.getStringByNextList=function(e,t){for(var i="",n=0;n<e.length;n++)i+=e[n],t[n]&&(i+=t[n]),n<e.length-1&&(i+="\n");return i},Object.defineProperty(e.prototype,"point",{get:function(){return-1==this._point&&(this._point=o.default.calculateBagItemScore(this)),this._point},enumerable:!0,configurable:!0}),e.prototype.setCanbeUsed=function(){this.canbeUsed=!1},e.prototype.getCanbeUsed=function(){return this.canbeUsed},e.prototype.copy=function(t){t||(t=new e);t.handle=this.handle,t.configID=this.configID,t.count=this.count,t._point=this._point,t.att=[];for(var i=0;i<8;i++){var a=new n.default(this.att[i].type,this.att[i].value);t.att.push(a)}t.extAtt=[];for(i=0;i<8;i++){a=new n.default(this.extAtt[i].type,this.extAtt[i].value);t.extAtt.push(a)}return t},e.prototype.init=function(){this.handle=0,this.configID=0,this.count=0,this.att=[];for(var e=0;e<8;e++){var t=new n.default(0,0);this.att.push(t)}this.extAtt=[];for(e=0;e<8;e++){t=new n.default(0,0);this.extAtt.push(t)}},e}();i.default=s,cc._RF.pop()},{"../../../core/base/AttributeData":"AttributeData","../../../core/utils/Util":"Util","../../config/ItemConfig":"ItemConfig","../../manager/GlobalConfig":"GlobalConfig"}],ItemDescConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e096a3tFfhDfqFXfMHgKGMq","ItemDescConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ItemDetailedWin:[function(e,t,i){"use strict";cc._RF.push(t,"d5183RSFu5N0qnvmgNuReWB","ItemDetailedWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../../core/base/ViewManager"),r=e("../UserBag"),s=e("../../../manager/GlobalConfig"),u=e("../../../config/ItemConfig"),l=e("../../../config/MiJiSkillConfig"),c=cc._decorator,d=c.ccclass,f=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.nameLabel=null,t.lv=null,t.description=null,t.num=null,t.BG=null,t.power=null,t}return __extends(t,e),t.prototype.initData=function(){},t.prototype.initUI=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log(" ------ ItemDetailedWin ===== param  ",e);var i=e[0][0][0],n=e[0][0][1],a=e[0][0][2];this.setData(i,n,a)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.otherClose=function(e){o.default.ins().close(this)},t.prototype.setData=function(e,t,i){var n="";if(void 0==i){var a=r.default.ins().getBagGoodsByTypeAndId(e,t);n=a?a.count+"":"0"}else n=i+"";var o=s.default.ItemConfig[t];if(this.nameLabel.string=o.name,this.nameLabel.node.color=u.default.getColoFromHEXByConfig(o),this.lv.string=(o.level||1)+"\u7ea7",this.num.string=n,this.description.string=o.desc,2==u.default.getType(o)){var c=l.default.getSkillIDByItem(o.id);this.power.string="\u8bc4\u5206\uff1a"+s.default.MiJiSkillConfig[c].power}else this.power.string=""},__decorate([f({type:cc.Label,displayName:"nameLabel"})],t.prototype,"nameLabel",void 0),__decorate([f({type:cc.Label,displayName:"lvLabel"})],t.prototype,"lv",void 0),__decorate([f({type:cc.RichText,displayName:"description"})],t.prototype,"description",void 0),__decorate([f({type:cc.Label,displayName:"num"})],t.prototype,"num",void 0),__decorate([f({type:cc.Button,displayName:"BG"})],t.prototype,"BG",void 0),__decorate([f({type:cc.Label,displayName:"power"})],t.prototype,"power",void 0),t=__decorate([d],t)}(n.default);i.default=p,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../config/ItemConfig":"ItemConfig","../../../config/MiJiSkillConfig":"MiJiSkillConfig","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../UserBag":"UserBag"}],ItemGiftConfig:[function(e,t,i){"use strict";cc._RF.push(t,"07165VVfX9Gi7UXzGqSdEON","ItemGiftConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ItemIconSimple:[function(e,t,i){"use strict";cc._RF.push(t,"972cb95FrhMoZeNVv5TMqKZ","ItemIconSimple"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../config/ItemConfig"),a=e("../../core/utils/Util"),o=e("../consts/ItemType"),r=cc._decorator,s=r.ccclass,u=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.bg=null,t.nameLabel=null,t.numberLabel=null,t.itemInfo=null,t}return __extends(t,e),Object.defineProperty(t.prototype,"itemIconInfo",{get:function(){return this.itemInfo},enumerable:!0,configurable:!0}),t.prototype.updateDataView=function(e){if(this.itemInfo=e,a.Util.isNullOrUndefined(e))return this.nameLabel.string="",this.nameLabel.node.color=a.Util.getColoFromHEXByQua(0),this.bg.color=a.Util.getColoFromHEXByQua(0),void(a.Util.isNullOrUndefined(this.numberLabel)||(this.numberLabel.string=""));var t=e.itemConfig;if(this.nameLabel.string=t.name,this.nameLabel.node.color=n.default.getColoFromHEXByConfig(t),!a.Util.isNullOrUndefined(this.numberLabel)){var i=n.default.getType(t);this.numberLabel.string=i==o.ItemType.TYPE_0?"":""+e.count}this.bg.color=n.default.getColoFromHEXByConfig(t)},__decorate([u({type:cc.Node,displayName:"bg"})],t.prototype,"bg",void 0),__decorate([u({type:cc.Label,displayName:"nameLabel"})],t.prototype,"nameLabel",void 0),__decorate([u({type:cc.Label,displayName:"numberLabel"})],t.prototype,"numberLabel",void 0),t=__decorate([s],t)}(cc.Component);i.default=l,cc._RF.pop()},{"../../core/utils/Util":"Util","../config/ItemConfig":"ItemConfig","../consts/ItemType":"ItemType"}],ItemShopPanel:[function(e,t,i){"use strict";cc._RF.push(t,"235e47t//5F04RalcyQDhuq","ItemShopPanel"),cc._RF.pop()},{}],ItemStoreConfig:[function(e,t,i){"use strict";cc._RF.push(t,"edc32otxtBLeL84sUjOD0fh","ItemStoreConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../manager/GlobalConfig"),a=function(){function e(){}return e.getStoreByItemID=function(e){var t=n.default.ItemStoreConfig;for(var i in t){var a=t[i];if(a.itemId==e)return a}return null},e}();i.default=a,cc._RF.pop()},{"../manager/GlobalConfig":"GlobalConfig"}],ItemType:[function(e,t,i){"use strict";cc._RF.push(t,"83b2afDBH9LF4tNpROrVyFc","ItemType"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.TYPE_0=0]="TYPE_0",e[e.TYPE_1=1]="TYPE_1",e[e.TYPE_2=2]="TYPE_2",e[e.TYPE_3=3]="TYPE_3",e[e.TYPE_4=4]="TYPE_4",e[e.TYPE_5=5]="TYPE_5",e[e.TYPE_6=6]="TYPE_6",e[e.TYPE_7=7]="TYPE_7",e[e.TYPE_8=8]="TYPE_8",e[e.TYPE_9=9]="TYPE_9",e[e.TYPE_10=10]="TYPE_10",e[e.TYPE_11=11]="TYPE_11",e[e.TYPE_12=12]="TYPE_12",e[e.TYPE_13=13]="TYPE_13",e[e.TYPE_14=14]="TYPE_14",e[e.TYPE_15=15]="TYPE_15",e[e.TYPE_16=16]="TYPE_16",e[e.TYPE_17=17]="TYPE_17",e[e.TYPE_18=18]="TYPE_18",e[e.TYPE_19=19]="TYPE_19",e[e.TYPE_20=20]="TYPE_20",e[e.TYPE_21=21]="TYPE_21",e[e.TYPE_22=22]="TYPE_22",e[e.TYPE_23=23]="TYPE_23",e[e.TYPE_24=24]="TYPE_24",e[e.TYPE_25=25]="TYPE_25"}(i.ItemType||(i.ItemType={})),cc._RF.pop()},{}],ItemUseTipsWin:[function(e,t,i){"use strict";cc._RF.push(t,"c3691gNfchD7YxpGWWXp2uZ","ItemUseTipsWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../../core/base/ViewManager"),r=e("../UserBag"),s=e("../../../config/ItemConfig"),u=e("../../../manager/GlobalConfig"),l=e("../../../consts/ItemType"),c=e("../../../../core/utils/TextFlowMaker"),d=cc._decorator,f=d.ccclass,p=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.BG=null,t.nameLabel=null,t.description=null,t.num=null,t.lv=null,t.sub1Btn=null,t.add1Btn=null,t.maxBtn=null,t.minBtn=null,t.numLabel=null,t.useBtn=null,t.useBtn0=null,t.useLabel=null,t.botNode=null,t.maxNum=0,t.oldNum=0,t.bossBoxIdList=[230001,230002,230003],t.parentRoot=a.LayerManager.UI_Popup,t}var i;return __extends(t,e),i=t,t.prototype.initUI=function(){this.showNoBtn=!1},t.prototype.initData=function(){},t.prototype.onLoad=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._data=e[0][0][0],console.log("ItemUseTipsWin == ",e[0][0]),this.goodsId=this._data.configID,this.addTouchEvent(this.BG,this.otherClose),this.addTouchEvent(this.minBtn,this.onTap),this.addTouchEvent(this.maxBtn,this.onTap),this.addTouchEvent(this.sub1Btn,this.onTap),this.addTouchEvent(this.add1Btn,this.onTap),this.addTouchEvent(this.useBtn,this.onTap),this.addTouchEvent(this.useBtn0,this.onTap),this.observe(r.default.ins().postUseItemSuccess,this.useSuccess),this.observe(r.default.ins().postItemChange,this.itemChange),this.observe(r.default.ins().postItemDel,this.itemChange),this.setData(this._data)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.otherClose=function(e){o.default.ins().close(i)},t.prototype.onTxtChange=function(e){var t=Number(this.numLabel.string);t>this.maxNum?t=this.maxNum:t<=0&&(t=1),this.useNum=t,this.numLabel.string=this.useNum+""},t.prototype.onTap=function(e){switch(e.target){case this.minBtn:this.useNum=1;break;case this.maxBtn:this.useNum=this.maxNum;break;case this.sub1Btn:this.useNum--,this.useNum<=0&&(this.useNum=1);break;case this.add1Btn:this.useNum++,this.useNum>this.maxNum&&(this.useNum=this.maxNum);break;case this.useBtn:Number(this.numLabel.string)<=0&&(this.numLabel.string="1"),this.onUse();break;case this.useBtn0:this.onBack()}this.numLabel.string=this.useNum+""},t.prototype.onUse=function(){},t.prototype.onUseType10=function(){},t.prototype.onUseType13=function(){},t.prototype.onUseType13_300=function(){},t.prototype.onUseType13_302=function(){},t.prototype.onUseType14=function(){},t.prototype.onMerge=function(){},t.prototype.onBack=function(){var e=this._data.itemConfig;s.default.getType(e)==l.ItemType.TYPE_10?r.default.ins().sendUseItem(this.goodsId,this.useNum):r.default.ins().sendUseItem(this.goodsId,this.useNum)&&o.default.ins().close(i)},t.prototype.useSuccess=function(){var e=r.default.ins().getBagItemById(this.goodsId);e?(this.setData(e),this.onTxtChange(null)):o.default.ins().close(i)},t.prototype.itemChange=function(){var e=r.default.ins().getBagItemById(this.goodsId);e?(this.setData(e),this.onTxtChange(null)):o.default.ins().close(this)},t.prototype.updateState=function(){},t.prototype.checkCanMerge=function(){var e=this._data.itemConfig.id;return!!u.default.ItemComposeConfig[e]},t.prototype.updateBaseInfo=function(e){var t=this._data;e.count=e.count?e.count:1;var i=e.count+"",n=t.itemConfig;this.nameLabel.string=n.name,this.nameLabel.node.color=cc.Color.BLACK.fromHEX(s.default.getQualityColor(n)),this.lv.string=(n.level||1)+"\u7ea7",this.num.string=i,this.description.string=c.default.generateTextFlow(n.desc)},t.prototype.updateUse=function(){var e=this._data;this.useNum=this._data.count,this.numLabel.string=this.useNum+"",this.oldNum=e.count,this.maxNum=e.count},t.prototype.updateHandlePos=function(){this._data},t.prototype.setData=function(e){this._data=e;var t=this._data.itemConfig;this.updateState(),this.updateBaseInfo(e);var i=s.default.getType(t);i==l.ItemType.TYPE_2?this.updateType2():i==l.ItemType.TYPE_10&&this.updateType10(),this.updateUse(),this.updateHandlePos(),this.updateGuildGift(t)},t.prototype.updateType2=function(){},t.prototype.updateGuildGift=function(e){},t.prototype.updateType10=function(){},__decorate([p({type:cc.Button,displayName:"bgBtn"})],t.prototype,"BG",void 0),__decorate([p({type:cc.Label,displayName:"nameLabel"})],t.prototype,"nameLabel",void 0),__decorate([p({type:cc.RichText,displayName:"description"})],t.prototype,"description",void 0),__decorate([p({type:cc.Label,displayName:"numLabel"})],t.prototype,"num",void 0),__decorate([p({type:cc.Label,displayName:"lvLabel"})],t.prototype,"lv",void 0),__decorate([p({type:cc.Button,displayName:"sub1Btn"})],t.prototype,"sub1Btn",void 0),__decorate([p({type:cc.Button,displayName:"add1Btn"})],t.prototype,"add1Btn",void 0),__decorate([p({type:cc.Button,displayName:"maxBtn"})],t.prototype,"maxBtn",void 0),__decorate([p({type:cc.Button,displayName:"minBtn"})],t.prototype,"minBtn",void 0),__decorate([p({type:cc.EditBox,displayName:"numLabel"})],t.prototype,"numLabel",void 0),__decorate([p({type:cc.Button,displayName:"useBtn"})],t.prototype,"useBtn",void 0),__decorate([p({type:cc.Button,displayName:"backBtn"})],t.prototype,"useBtn0",void 0),__decorate([p({type:cc.Label,displayName:"\u52a0\u5165\u884c\u4f1a\u63d0\u793a"})],t.prototype,"useLabel",void 0),__decorate([p({type:cc.Node,displayName:"botNode"})],t.prototype,"botNode",void 0),t=i=__decorate([f],t)}(n.default);i.default=h,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/TextFlowMaker":"TextFlowMaker","../../../../core/view/BaseEuiView":"BaseEuiView","../../../config/ItemConfig":"ItemConfig","../../../consts/ItemType":"ItemType","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../UserBag":"UserBag"}],JadeDataNew:[function(e,t,i){"use strict";cc._RF.push(t,"7c060WZiMtKRonpcUVZcs8U","JadeDataNew"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../skill/data/SkillData"),a=e("./JadeNew"),o=function(){function e(){this.lv=0,this.exp=0,this._isUpdate=!0}return e.prototype.parser=function(e){this.lv=e.readShort(),this.exp=e.readShort();var t=e.readShort();this.danDate=new Object;for(var i=0;i<t;i++)this.danDate[e.readInt()]=e.readShort();this._isUpdate=!0},e.prototype.parserOther=function(e){this.lv=e.readShort(),this._isUpdate=!0},e.prototype.getSkillList=function(){if(this._isUpdate){this._isUpdate=!1,this._skillList=[];var e=a.default.ins().getSkillsByLv(this.lv);if(e)for(var t=0,i=e;t<i.length;t++){var o=i[t];this._skillList.push(new n.default(o))}}return this._skillList},e}();i.default=o,cc._RF.pop()},{"../skill/data/SkillData":"SkillData","./JadeNew":"JadeNew"}],JadeNew:[function(e,t,i){"use strict";cc._RF.push(t,"9fa16tPLPJJlqVuJtpPiOmD","JadeNew"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../manager/GlobalConfig"),r=e("../../entity/Actor"),s=e("../server/GameServer"),u=e("../../entity/SubRoles"),l=e("../bag/UserBag"),c=e("./JadeDataNew"),d=e("../../../core/base/MessageCenter"),f=function(e){function t(){var i=e.call(this)||this;return d.default.compile(t),i.jadeData=[],i.sysId=a.PackageID.JadeNew,i.regNetMsg(1,i.postJadeData),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postJadeData=function(e){var t=e.readShort(),i=this.jadeData[t];return i||(i=new c.default,this.jadeData[t]=i),i.parser(e),t},t.prototype.sendUseDan=function(e,t){var i=this.getBytes(2);i.writeShort(e),i.writeInt(t),this.sendToServer(i)},t.prototype.sendUpgrade=function(e,t){var i=this.getBytes(3);i.writeShort(e),i.writeInt(t),this.sendToServer(i)},t.prototype.getJadeDataByID=function(e){return this.jadeData&&this.jadeData.length?this.jadeData[e]:null},t.prototype.isJadeMax=function(e){var t=this.getJadeDataByID(e);return!!t&&t.lv>=Object.keys(o.default.JadePlateLevelConfig).length-1},t.prototype.checkRed=function(){for(var e=0;e<3;e++)if(this.checkRedByRoleID(e))return!0;return!1},t.prototype.checkOpen=function(){return!(r.default.level<o.default.JadePlateBaseConfig.openlv)&&!(s.default.serverOpenDay<o.default.JadePlateBaseConfig.openDay-1)},t.prototype.checkRedByRoleID=function(e){if(!this.checkOpen())return!1;if(!u.default.ins().getSubRoleByIndex(e))return!1;var t=this.getJadeDataByID(e);if(!t)return!1;if(this.isJadeMax(e))return!1;var i,n,a=t.lv,r=0;for(var s in o.default.JadePlateBaseConfig.itemInfo)i=l.default.ins().getBagItemById(+s),r+=+o.default.JadePlateBaseConfig.itemInfo[s]*(i?i.count:0);if(r+t.exp>=o.default.JadePlateLevelConfig[a].exp)return!0;var c=Math.floor(a/o.default.JadePlateBaseConfig.perLevel)+1,d=0;for(var s in o.default.JadePlateBaseConfig.upgradeInfo)if(d=(i=l.default.ins().getBagItemById(+s))?i.count:0,(t.danDate&&t.danDate[s]?+t.danDate[s]:0)<((n=o.default.JadePlateLevelConfig[(c-1)*o.default.JadePlateBaseConfig.perLevel]).upgradeItemInfo&&n.upgradeItemInfo[s]?+n.upgradeItemInfo[s]:0)&&d)return!0;return!1},t.prototype.getSkillsByLv=function(e){var t=Math.floor(e/o.default.JadePlateBaseConfig.perLevel)+1,i=o.default.JadePlateLevelConfig[(t-1)*o.default.JadePlateBaseConfig.perLevel],n=i.skillIdList?i.skillIdList.length:0;if(n<=0)return null;for(var a,r=o.default.JadePlateBaseConfig.skillUnlock.length,s=[],u=0;u<r;u++)for(var l=0;l<n;l++)(a=i.skillIdList[l])==o.default.JadePlateBaseConfig.skillUnlock[u].id&&a>100&&s.push(a);return s.length?s:null},t}(n.default);i.default=f,window.GameSystem.push(f.ins.bind(f)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../server/GameServer":"GameServer","./JadeDataNew":"JadeDataNew"}],JadePlateBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a7a4daL+RhJop3H7OMsO34m","JadePlateBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],JadePlateLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"8e2d8iBDK9CjoVWh6BbL15E","JadePlateLevelConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],JimMaiItem:[function(e,t,i){"use strict";cc._RF.push(t,"68455qCy/tCYbPSjB8UXup+","JimMaiItem"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/view/BaseComponent"),a=cc._decorator,o=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.guang=null,t.bgImg=null,t.item=null,t}return __extends(t,e),t.prototype.setLights=function(e){},__decorate([r({type:cc.Node,displayName:"guang"})],t.prototype,"guang",void 0),__decorate([r({type:cc.Node,displayName:"bgImg"})],t.prototype,"bgImg",void 0),__decorate([r({type:cc.Node,displayName:"item"})],t.prototype,"item",void 0),t=__decorate([o],t)}(n.BaseComponent);i.default=s,cc._RF.pop()},{"../../core/view/BaseComponent":"BaseComponent"}],JingMaiCommonConfig:[function(e,t,i){"use strict";cc._RF.push(t,"78e17zk/JVNxYjgPpu3FwBU","JingMaiCommonConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],JingMaiData:[function(e,t,i){"use strict";cc._RF.push(t,"56c5eB/avxK+5w59BqIVQ2P","JingMaiData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../manager/GlobalConfig"),a=e("../../bag/UserBag"),o=function(){function e(){}return e.prototype.parser=function(e){this.level=e.readInt(),this.stage=e.readInt()},e.prototype.jingMaiCanUp=function(){if(n.default.JingMaiStageConfig[this.stage].stage>=n.default.JingMaiCommonConfig.stageMax)return!1;var e=n.default.JingMaiLevelConfig[this.level];return a.default.ins().getBagGoodsCountById(0,e.itemId)>=e.count},e}();i.default=o,cc._RF.pop()},{"../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag"}],JingMaiLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"c2760DgLx1FfYGN9gbWoFJL","JingMaiLevelConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],JingMaiPanel:[function(e,t,i){"use strict";cc._RF.push(t,"c1a24blroFIFZ8vIsUFeg+P","JingMaiPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/view/BaseView"),a=e("../manager/GlobalConfig"),o=e("../module/rolewin/UserJingMai"),r=e("../module/bag/UserBag"),s=e("../manager/TimerManager"),u=e("../module/sound/SoundUtil"),l=e("../entity/SubRoles"),c=e("../../core/base/AttributeData"),d=e("../../core/utils/TextFlowMaker"),f=e("../module/warn/UserWarn"),p=e("../module/warn/view/WarnWin"),h=e("../../core/base/MessageCenter"),g=cc._decorator,y=g.ccclass,v=g.property,m=function(e){function t(){var t=e.call(this)||this;return t.jinMaiName=null,t.attr=null,t.nextAttr=null,t.countLabel=null,t.boostBtn=null,t.bigUpLevelBtn=null,t.redPoint0=null,t.level=null,t.value=null,t.curRole=0,t.canClick=!0,h.default.compile(i),t}var i;return __extends(t,e),i=t,t.prototype.childrenCreated=function(){this.init()},t.prototype.init=function(){this.danItemID=a.default.JingMaiCommonConfig.levelItemid},t.prototype.open=function(){this.addTouchEvent(this.boostBtn,this.onTap),this.addTouchEvent(this.bigUpLevelBtn,this.onTap),this.observe(o.default.ins().postUpdate,this.setForgeData),this.observe(r.default.ins().postItemAdd,this.setForgeData),this.setForgeData(!1)},t.prototype.close=function(){this.removeTouchEvent(this.boostBtn,this.onTap),this.removeTouchEvent(this.bigUpLevelBtn,this.onTap),this.canClick=!0,this.removeObserve()},t.prototype.onTap=function(e){var t=this;switch(e){case this.boostBtn:var i=a.default.JingMaiLevelConfig[this._data.level];if(!this.canClick)return;this._data.level%10==0&&this._data.level/10>this._data.stage&&0!=this._data.level?(this.canClick=!1,this.showUpgradeEffect(),s.default.ins().doTimer(1e3,1,function(){o.default.ins().sendUpgrade(t.curRole),u.default.ins().playEffect(u.default.SKILL_UP),t.canClick=!0,t.setForgeData()},this)):r.default.ins().getBagGoodsCountById(0,i.itemId)>=i.count?(o.default.ins().sendBoost(this.curRole),u.default.ins().playEffect(u.default.SKILL_UP),this.setForgeData()):f.UserWarn.ins().setBuyGoodsWarn(i.itemId);break;case this.bigUpLevelBtn:var n=a.default.ItemConfig[this.danItemID].name;p.default.show("\u786e\u5b9a\u4f7f\u7528"+n+"\u63d0\u5347\u5f53\u524d\u7ecf\u8109\u5417\uff1f\n\u8bf4\u660e\uff1a\n"+a.default.JingMaiCommonConfig.levelItemidStage+"\u9636\u53ca\u4ee5\u4e0b\u7ecf\u8109\u4f7f\u7528\u53ef\u76f4\u53471\u9636\n\u5176\u4ed6\u7b49\u9636\u4f7f\u7528\u8f6c\u6362\u4e3a"+a.default.JingMaiCommonConfig.levelItemChange+"\u4e2a"+a.default.ItemConfig[a.default.JingMaiCommonConfig.itemid].name,function(){o.default.ins().sendBigUpLevel(t.curRole)},this)}},t.prototype.showLight=function(e,t){},t.prototype.showUpgradeEffect=function(){},t.prototype.setForgeData=function(e){void 0===e&&(e=!0),this._data=l.default.ins().getSubRoleByIndex(this.curRole).jingMaiData;var t=a.default.JingMaiStageConfig[this._data.stage],i=a.default.JingMaiLevelConfig[this._data.level];this.jinMaiName.string=t.name,this.attr.string=c.default.getAttStr(c.default.AttrAddition(t.attr,i.attr),.75),this._totalPower=r.default.getAttrPower(c.default.AttrAddition(t.attr,i.attr));var n=this._data.level/10-t.stage;if(this.level.string="\u7ecf\u8109("+this.transform(t.level)+"\u9636"+this._data.level%10+"\u661f)",this.value.string="\u4ed9\u529b\u503c:"+this._totalPower,t.stage<a.default.JingMaiCommonConfig.stageMax){var o=void 0,s=void 0,u=r.default.ins().getBagGoodsCountById(0,i.itemId);if(this.redPoint0.active=u>=i.count,this._data.level>0&&this._data.level%10==0&&n?(o=a.default.JingMaiStageConfig[this._data.stage+1],s=i):(o=t,s=a.default.JingMaiLevelConfig[this._data.level+1]),0==this.nextAttr.active&&(this.nextAttr.active=!0,this.countLabel.x=2,this.countLabel.y=497),this.nextAttr.getComponent(cc.Label).string=c.default.getAttStr(c.default.AttrAddition(o.attr,s.attr),0,1,"+",!1,!1),this.boostBtn.active=!0,this._data.level>0&&this._data.level%10==0&&n)cc.find("label",this.boostBtn).getComponent(cc.Label).string="\u5347  \u9636",this.countLabel.getComponent(cc.RichText).string="\u7ecf\u8109\u7b49\u7ea7\u5df2\u6ee1,\u53ef\u8fdb\u9636";else{cc.find("label",this.boostBtn).getComponent(cc.Label).string="\u51b2  \u8109";var f="";f=u>=i.count?"|C:0x35e62d&T:":"|C:0xf3311e&T:",this.countLabel.getComponent(cc.RichText).string="<color=#c800d4><u>\u7ecf\u8109\u4e39:</u></color>"+d.default.generateTextFlow(f+u+"|/"+i.count)}this.showLight(this._data.level,n)}else this.nextAttr.active=!1,this.boostBtn.active=!1,this.countLabel.x=this.nextAttr.x-60,this.countLabel.y=this.nextAttr.y,this.redPoint0.active=!1,this.countLabel.getComponent(cc.Label).string="\u7ecf\u8109\u5df2\u6ee1\u9636";var p=r.default.ins().getBagGoodsCountById(0,this.danItemID),h=cc.find("redPoint",this.bigUpLevelBtn),g=cc.find("txt",this.bigUpLevelBtn);h&&(h.active=p>0),g&&(g.getComponent(cc.Label).string=p.toString())},t.prototype.transform=function(e){var t="";try{var i=1,n=new Array("","\u4e07","\u4ebf"),a=new Array("\u5341","\u767e","\u6b20"),o=new Array("\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"),r=e.toString(),s=(r[0],0),u=0,l=0,c=r[0].length;for(i=1;i<=c;i++){var d=r[0].charAt(c-i),f=0;if(c-i-1>=0&&(f=r[0].charAt(c-i-1)),0!=(l+=Number(d))&&(t=o[Number(d)].concat(t),"0"==d&&(l=0)),c-i-1>=0)if(3!=s)0!=f&&(t=a[s].concat(t)),s++;else{s=0;var p=t.charAt(0);"\u4e07"!=p&&"\u4ebf"!=p||(t=t.substr(1,t.length-1)),t=n[u].concat(t),l=0}3==s&&u++}}catch(e){return"error"}return t},__decorate([v({type:cc.Label,displayName:"jinMaiName"})],t.prototype,"jinMaiName",void 0),__decorate([v({type:cc.Label,displayName:"attr"})],t.prototype,"attr",void 0),__decorate([v({type:cc.Node,displayName:"nextAttr"})],t.prototype,"nextAttr",void 0),__decorate([v({type:cc.Node,displayName:"countLabel"})],t.prototype,"countLabel",void 0),__decorate([v({type:cc.Node,displayName:"boostBtn"})],t.prototype,"boostBtn",void 0),__decorate([v({type:cc.Node,displayName:"bigUpLevelBtn"})],t.prototype,"bigUpLevelBtn",void 0),__decorate([v({type:cc.Node,displayName:"redPoint0"})],t.prototype,"redPoint0",void 0),__decorate([v({type:cc.Label,displayName:"level"})],t.prototype,"level",void 0),__decorate([v({type:cc.Label,displayName:"value"})],t.prototype,"value",void 0),t=i=__decorate([y],t)}(n.default);i.default=m,cc._RF.pop()},{"../../core/base/AttributeData":"AttributeData","../../core/base/MessageCenter":"MessageCenter","../../core/utils/TextFlowMaker":"TextFlowMaker","../../core/view/BaseView":"BaseView","../entity/SubRoles":"SubRoles","../manager/GlobalConfig":"GlobalConfig","../manager/TimerManager":"TimerManager","../module/bag/UserBag":"UserBag","../module/rolewin/UserJingMai":"UserJingMai","../module/sound/SoundUtil":"SoundUtil","../module/warn/UserWarn":"UserWarn","../module/warn/view/WarnWin":"WarnWin"}],JingMaiStageConfig:[function(e,t,i){"use strict";cc._RF.push(t,"def9b83viJG35wi49V5LrTy","JingMaiStageConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],JobConst:[function(e,t,i){"use strict";cc._RF.push(t,"1986dgNFO1LrKsgmszL/vfL","JobConst"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.None=0]="None",e[e.ZhanShi=1]="ZhanShi",e[e.FaShi=2]="FaShi",e[e.DaoShi=3]="DaoShi"}(i.JobConst||(i.JobConst={})),cc._RF.pop()},{}],KFArenaRule:[function(e,t,i){"use strict";cc._RF.push(t,"bd0896j2DRL1L++0NWY2Z9H","KFArenaRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../kf/kfArena/KfArenaSys"),o=e("../../zs/UserZs"),r=e("../../kf/kfArena/KfArenaRedPoint"),s=e("../../../../core/utils/DateUtils"),u=e("../../../manager/TimerManager"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._time=0,n.showMessage=[o.default.ins().postZsData,a.default.ins().postMacthState,a.default.ins().postOpenKfArena],n.updateMessage=[r.default.ins().postRedPoint],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return this.setState(),t},t.prototype.setRepeat=function(){this._time--,this._time>0?this._timeTxt.string=s.default.getFormatBySecond(this._time,s.default.TIME_FORMAT_5,4):(a.default.ins().isStartIng=1,1==a.default.ins().macthState?this._timeTxt.string="\u5339\u914d\u4e2d":this._timeTxt.string="\u8fdb\u884c\u4e2d",u.default.ins().removeAll(this))},t.prototype.checkShowIcon=function(){var e=a.default.ins().isOpen();return this.setState(),e},t.prototype.setState=function(){if(a.default.ins().isOpen()&&this.tar)if(1==a.default.ins().macthState)this._timeTxt.string="\u5339\u914d\u4e2d";else if(1==a.default.ins().isStartIng)this._timeTxt.string="\u8fdb\u884c\u4e2d";else{var e=a.default.ins().getOpenLeftTime();e>0&&(this._time=e,this._timeTxt.string=s.default.getFormatBySecond(this._time,s.default.TIME_FORMAT_5,4),u.default.ins().isExists(this.setRepeat,this)||u.default.ins().doTimer(1e3,0,this.setRepeat,this))}},t.prototype.checkShowRedPoint=function(){return r.default.ins().redpoint},t.prototype.getEffName=function(e){return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(KfArenaWin,1)},t}(n.default);i.default=l,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/TimerManager":"TimerManager","../../kf/kfArena/KfArenaRedPoint":"KfArenaRedPoint","../../kf/kfArena/KfArenaSys":"KfArenaSys","../../zs/UserZs":"UserZs","./RuleIconBase":"RuleIconBase"}],KFBattleRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"985feIVGalGY6N+Xn7osLpl","KFBattleRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("./kfBoss/KFBossRedpoint"),o=e("../../../core/base/MessageCenter"),r=e("./wujiBattlefield/WJBattlefieldSys"),s=function(e){function t(){var i=e.call(this)||this;return i.redPoint1=0,i.redPoint2=0,i.redPoint=0,o.default.compile(t),i.associated(i.postRedPoint1,r.default.ins().postInfo),i.associated(i.postRedPoint2,a.default.ins().postRedPoint),i.associated(i.postRedPoint,i.postRedPoint1,i.postRedPoint2),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postRedPoint1=function(){return r.default.ins().overCounts>0&&(this.redPoint1=1,!0)},t.prototype.postRedPoint2=function(){return this.redPoint2=a.default.ins().redpoint,this.redPoint2},t.prototype.postRedPoint=function(){return this.redPoint=this.redPoint1+this.redPoint2,this.redPoint},t}(n.default);i.default=s,window.GameSystem.push(s.ins.bind(s)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../base/BaseSystem":"BaseSystem","./kfBoss/KFBossRedpoint":"KFBossRedpoint","./wujiBattlefield/WJBattlefieldSys":"WJBattlefieldSys"}],KFBossData:[function(e,t,i){"use strict";cc._RF.push(t,"2f364M8hEZFspYuJkZUbxRk","KFBossData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../Utils/EgretUtils"),a=(function(){}(),function(){return function(e){this.dpId=e.readShort(),this.serverId=e.readShort(),this.bossRefTimer=1e3*e.readInt()+n.default.getTimer(),this.flagRefTimer=1e3*e.readInt()+n.default.getTimer(),8==this.dpId&&(this.flagRefTimer=Number.MAX_VALUE+n.default.getTimer())}}());i.default=a,cc._RF.pop()},{"../../../../Utils/EgretUtils":"EgretUtils"}],KFBossRedpoint:[function(e,t,i){"use strict";cc._RF.push(t,"18abcBD9tZD/5nDMys1fYKB","KFBossRedpoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../base/BaseSystem"),a=e("./KFBossSys"),o=e("../../../manager/GlobalConfig"),r=e("../../zs/UserZs"),s=e("../../../Utils/EgretUtils"),u=e("../../../../core/base/MessageCenter"),l=function(e){function t(){var i=e.call(this)||this;return i.redpoints=[],u.default.compile(t),i.associated(i.postRedPoint,a.default.ins().postBossInfo,a.default.ins().postBossRevive,a.default.ins().postInfo),i}return __extends(t,e),t.prototype.postRedPoint=function(){if(this.redpoints=[],this.redpoint=0,!a.default.ins().isOpen())return 0;for(var e=0,t=a.default.ins().fbInfo;e<t.length;e++){var i=t[e];if(i){i.dpId;var n=o.default.CrossBossConfig[i.dpId],u=r.default.ins().lv>=n.levelLimit[0]/1e3&&r.default.ins().lv<=n.levelLimit[1]/1e3;u&&(u=i.flagRefTimer-s.default.getTimer()<0&&a.default.ins().flagTimes>0||i.bossRefTimer-s.default.getTimer()<0&&a.default.ins().bossTimes>0),this.redpoints[i.dpId]=u?1:0}}return this.redpoint=this.redpoints.indexOf(1)>-1?1:0,this.redpoint},t.ins=function(){return e.ins.call(this)},t}(n.default);i.default=l,window.GameSystem.push(l.ins.bind(l)),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../Utils/EgretUtils":"EgretUtils","../../../base/BaseSystem":"BaseSystem","../../../manager/GlobalConfig":"GlobalConfig","../../zs/UserZs":"UserZs","./KFBossSys":"KFBossSys"}],KFBossSys:[function(e,t,i){"use strict";cc._RF.push(t,"58583hcyM1KKJozcsOs2klD","KFBossSys"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../base/BaseSystem"),a=e("../data/KFData"),o=e("../../../../core/net/PackageID"),r=e("../../boss/UserBoss"),s=e("../../gamescene/GameLogic"),u=e("../../../base/EntityManager"),l=e("../../gamescene/help/DropHelp"),c=e("../../../../core/base/ResultManager"),d=e("../../../map/GameMap"),f=e("../../gamescene/const/EntityAction"),p=e("../../activity/model/RewardData"),h=e("../../../manager/GlobalConfig"),g=e("../../server/GameServer"),y=e("../../zs/UserZs"),v=e("../../../Utils/EgretUtils"),m=e("./data/KFBossData"),b=e("../../fb/UserFb"),_=e("../../../../core/base/MessageCenter"),C=function(e){function t(){var i=e.call(this)||this;return i.fbInfo=[],i.isKFBossBattle=!1,i.dropRecordDataList=[],i.dropBestRecordDataList=[],_.default.compile(t),i.sysId=o.PackageID.KFBoss,i.regNetMsg(1,i.postBossInfo),i.regNetMsg(2,i.postAscriptionChange),i.regNetMsg(3,i.postRevive),i.regNetMsg(5,i.postBossRevive),i.regNetMsg(7,i.postRefFlag),i.regNetMsg(8,i.postCollectFlag),i.regNetMsg(9,i.postInfo),i.regNetMsg(10,i.doResult),i.regNetMsg(11,i.postDropList),i.regNetMsg(12,i.postBroadcastResult),i.observe(r.default.ins().postBossAppear,function(){i.isKFBossBattle&&ViewManager.ins().open(BossBelongPanel)}),i.observe(r.default.ins().postBossDisappear,function(){i.isKFBossBattle&&ViewManager.ins().close(BossBelongPanel)}),i.observe(s.default.ins().postEnterMap,function(){d.default.fbType==b.default.FB_TYPE_KF_BOSS?i.postEnterKFBossFb():d.default.lastFbTyp==b.default.FB_TYPE_KF_BOSS&&i.postQuiKFBossFb()}),i}return __extends(t,e),t.prototype.postBossInfo=function(e){var t=e.readShort();this.fbInfo=[];for(var i=0;i<t;i++){var n=new m.default(e);this.fbInfo[n.dpId]=n}},t.prototype.postAscriptionChange=function(e){var t=e.readDouble(),i=e.readDouble(),n="";if(t>0){var a=u.default.ins().getMasterList(t);a&&a[0]&&a[0].infoModel&&(n=a[0].infoModel.name)}r.default.ins().postBelongChange(i,t,n)},t.prototype.postRevive=function(e){var t=e.readInt(),i=e.readDouble();if(t>0)ViewManager.ins().open(KFBossReliveWin,t,i);else if(ViewManager.ins().close(KFBossReliveWin),KFServerSys.ins().isKF){var n=Actor.yb-h.default.CrossBossBase.rebornCost;Actor.ins().postYbChange(n)}},t.prototype.postBossRevive=function(e){var t=e.readShort(),i=e.readShort();this.fbInfo[i]&&(1==t?this.fbInfo[i].flagRefTimer=egret.getTimer():2==t&&(this.fbInfo[i].bossRefTimer=egret.getTimer()))},t.prototype.postRefFlag=function(e){this.flagHandle=e.readDouble(),this.flagCD=1e3*e.readInt()+egret.getTimer(),d.default.fubenID!=h.default.CrossBossConfig[8].fbid?this.flagHandle=100010100101:this.flagHandle=0},t.prototype.postCollectFlag=function(e){var t=e.readDouble(),i=e.readInt();t&&t==Actor.handle&&i?(ViewManager.ins().open(CollectWin,t,i),s.default.ins().currAttackHandle=0):ViewManager.ins().close(CollectWin)},t.prototype.postInfo=function(e){this.flagTimes=e.readShort(),this.bossTimes=e.readShort();var t=e.readShort();this.enterCD=1e3*t+v.default.getTimer()},t.prototype.doResult=function(e){for(var t=e.readShort(),i=[],n=e.readShort(),a=1==t,o=0;o<n;o++){var r=new p.default;r.type=e.readInt(),r.count=e.readInt(),r.id=e.readInt(),i.push(r),0==r.type&&1!=r.id&&2!=r.id&&r.id!=MoneyConst.rune||a||l.default.addDrop([0!=l.default.tempDropPoint.x?l.default.tempDropPoint.x:Math.floor(u.default.ins().getNoDieRole().x/d.default.CELL_SIZE),0!=l.default.tempDropPoint.y?l.default.tempDropPoint.y:Math.floor(u.default.ins().getNoDieRole().y/d.default.CELL_SIZE),r])}if(a)c.default.ins().create(d.default.fbType,i,a);else{l.default.start(),l.default.addCompleteFunc(function(){c.default.ins().create(d.default.fbType,i,a)},this)}},t.prototype.postDropList=function(e){this.dropRecordDataList=[],this.dropBestRecordDataList=[];for(var t=e.readShort(),i=0;i<t;i++)this.dropRecordDataList.push(new a.default(e));t=e.readShort();for(i=0;i<t;i++){var n=new a.default(e);n.isBest=!0,this.dropBestRecordDataList.push(n)}},t.prototype.postBroadcastResult=function(e){var t=e.readInt(),i=e.readString(),n=e.readDouble(),a=u.default.ins().getEntityByHandle(n);if(!a||a.action==f.EntityAction.DIE||a==u.default.ins().getNoDieRole())return"S"+t+i;for(var o=[],r=e.readShort(),s=0;s<r;s++){var c=new p.default;c.type=e.readInt(),c.id=e.readInt(),c.count=e.readInt(),o.push(c),0==c.type&&1!=c.id&&2!=c.id&&c.id!=MoneyConst.rune||l.default.addDrop([0!=l.default.tempDropPoint.x?l.default.tempDropPoint.x:Math.floor(a.x/d.default.CELL_SIZE),0!=l.default.tempDropPoint.y?l.default.tempDropPoint.y:Math.floor(a.y/d.default.CELL_SIZE),c])}return l.default.start(a),l.default.addCompleteFunc(function(){},this),"S"+t+i},t.prototype.postEnterKFBossFb=function(){this.isKFBossBattle=!0,ViewManager.ins().isShow(BossBloodPanel)&&ViewManager.ins().open(BossBloodPanel),ViewManager.ins().close(KFBossShowWin),ViewManager.ins().open(KFBossSceneWin)},t.prototype.postQuiKFBossFb=function(){ViewManager.ins().close(BossBelongPanel),this.isKFBossBattle=!1,this.flagHandle=0,ViewManager.ins().close(KFBossReliveWin),ViewManager.ins().close(KFBossSceneWin)},t.prototype.sendBossInfo=function(){this.sendBaseProto(1)},t.prototype.sendClearReliveCD=function(){this.sendBaseProto(3)},t.prototype.sendCleanBelong=function(){this.sendBaseProto(4)},t.prototype.sendEnter=function(e){var t=this.getBytes(6);t.writeInt(e),this.sendToServer(t)},t.prototype.sendCollectFlag=function(){this.sendBaseProto(8)},t.prototype.sendDropList=function(){this.sendBaseProto(11)},t.ins=function(){return e.ins.call(this)},t.prototype.isOpen=function(){return h.default.CrossBossBase.limitZsLv||(h.default.CrossBossBase.limitZsLv=5),h.default.CrossBossBase.openDay<=g.default.serverOpenDay+1&&y.default.ins().lv>=h.default.CrossBossBase.limitZsLv},t}(n.default);i.default=C,window.GameSystem.push(C.ins.bind(C)),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../../core/base/ResultManager":"ResultManager","../../../../core/net/PackageID":"PackageID","../../../Utils/EgretUtils":"EgretUtils","../../../base/BaseSystem":"BaseSystem","../../../base/EntityManager":"EntityManager","../../../manager/GlobalConfig":"GlobalConfig","../../../map/GameMap":"GameMap","../../activity/model/RewardData":"RewardData","../../boss/UserBoss":"UserBoss","../../fb/UserFb":"UserFb","../../gamescene/GameLogic":"GameLogic","../../gamescene/const/EntityAction":"EntityAction","../../gamescene/help/DropHelp":"DropHelp","../../server/GameServer":"GameServer","../../zs/UserZs":"UserZs","../data/KFData":"KFData","./data/KFBossData":"KFBossData"}],KFData:[function(e,t,i){"use strict";cc._RF.push(t,"0da63fjapRG57VIcaLKuHqc","KFData"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../../../core/utils/DateUtils"),o=(function(){}(),function(){function e(e){this.type=e.readShort(),this.type==n.KF_BOSS?this.kfBossData(e):this.type==n.DEVILDOM&&this.devildomData(e)}return e.prototype.kfBossData=function(e){this.time=e.readInt(),this.roleId=e.readInt(),this.servId=e.readInt(),this.nick=e.readString(),this.sceneName=e.readString(),this.bossName=e.readString(),this.goodsId=e.readInt(),this.time=Math.floor(a.default.formatMiniDateTime(this.time)/a.default.MS_PER_SECOND)},e.prototype.devildomData=function(e){this.time=e.readInt(),this.servId=e.readInt(),this.guildName=e.readString(),this.bossName=e.readString(),this.goodsId=e.readInt(),this.time=Math.floor(a.default.formatMiniDateTime(this.time)/a.default.MS_PER_SECOND)},e}());i.default=o,function(e){e[e.KF_BOSS=1]="KF_BOSS",e[e.DEVILDOM=2]="DEVILDOM"}(n||(n={})),cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils"}],KFIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"73ff6ePzBtI1ruawfR9ixJD","KFIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../zs/UserZs"),o=e("../../kf/kfBoss/KFBossSys"),r=e("../../kf/devildom/DevildomRedPoint"),s=e("../../kf/KFBattleRedPoint"),u=e("../../kf/kfArena/KfArenaRedPoint"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postZsData],n.updateMessage=[s.default.ins().postRedPoint,r.default.ins().postRedPoint,u.default.ins().postRedPoint],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return o.default.ins().isOpen()},t.prototype.checkShowRedPoint=function(){return s.default.ins().redPoint||r.default.ins().redPoint||u.default.ins().redpoint},t.prototype.tapExecute=function(){ViewManager.ins().open(KFBattleWin)},t}(n.default);i.default=l,cc._RF.pop()},{"../../kf/KFBattleRedPoint":"KFBattleRedPoint","../../kf/devildom/DevildomRedPoint":"DevildomRedPoint","../../kf/kfArena/KfArenaRedPoint":"KfArenaRedPoint","../../kf/kfBoss/KFBossSys":"KFBossSys","../../zs/UserZs":"UserZs","./RuleIconBase":"RuleIconBase"}],KFInviteData:[function(e,t,i){"use strict";cc._RF.push(t,"0d702iRjqxFB5StUJ6xolXQ","KFInviteData");var n;(function(){function e(){}e.prototype.parse=function(e){this.roleId=e.readInt(),this.name=e.readString(),this.power=e.readInt(),this.score=e.readInt(),this.winRate=e.readInt()/100}})();(function(e){e[e.Friend=0]="Friend",e[e.Guild=1]="Guild"})(n||(n={})),cc._RF.pop()},{}],KFServerSys:[function(e,t,i){"use strict";cc._RF.push(t,"ea90aeSX8FCl5m3FJXRCjlo","KFServerSys"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("../../../core/net/PackageID"),r=e("../../../core/base/ViewManager"),s=e("../../entity/Actor"),u=e("../../../core/base/GameConfig"),l=e("../../../core/net/GameSocket"),c=e("../tips/UserTips"),d=function(e){function t(){var t=e.call(this)||this;return t.isLinkingKF=!1,t.curServerType=n.bsCommSrv,t.sysId=o.PackageID.Login,t.regNetMsg(9,t.doSwitchServer),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.linkingKFState=function(e){this.isLinkingKF=e,e?r.default.ins().open(ServerSwitchIngWin):r.default.ins().close(ServerSwitchIngWin)},t.prototype.doSwitchServer=function(e){this.kfSrvid=e.readInt(),this.kfIp=e.readString(),this.kfPort=e.readInt(),this.kfLoginKey=e.readString(),this.curServerType=e.readInt(),this.linkingKFState(!0)},t.prototype.sendKFLogin=function(){var e=this.getBytes(9);e.writeInt(s.default.actorID),e.writeString(this.kfLoginKey),e.writeString(u.default.pf),this.sendToServer(e)},Object.defineProperty(t.prototype,"isKF",{get:function(){return this.curServerType>n.bsCommSrv},enumerable:!0,configurable:!0}),t.prototype.connectKFServer=function(){l.default.ins().close(),l.default.ins().newSocket(),l.default.ins().getSocket().connected?this.sendKFLogin():(debug.log("kf connect to "+this.kfIp+" ,port: "+this.kfPort),l.default.ins().connect(this.kfIp,this.kfPort)),WJBattlefieldSys.postSwitchServer()},t.prototype.closeSocket=function(){this.curServerType=n.bsCommSrv,this.kfSrvid=u.default.srvid},t.prototype.checkIsKFBattle=function(e){return this.isKF&&e&&c.default.ins().showTips(e),this.isKF},t}(a.default);i.default=d,function(e){e[e.bsCommSrv=0]="bsCommSrv",e[e.bsBattleSrv=1]="bsBattleSrv",e[e.bsMainBattleSrv=2]="bsMainBattleSrv",e[e.bsLianFuSrv=3]="bsLianFuSrv"}(n||(n={})),cc._RF.pop()},{"../../../core/base/GameConfig":"GameConfig","../../../core/base/ViewManager":"ViewManager","../../../core/net/GameSocket":"GameSocket","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../tips/UserTips":"UserTips"}],KaiMenHongIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"b8d40qjrjtBMZHqqRPCIMwo","KaiMenHongIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../bag/UserBag"),s=e("../../opensystem/OpenSystem"),u=e("../../../consts/SystemConst"),l=e("../../activity/model/ActivityDataFactory"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postYbChange,r.default.ins().postItemAdd,r.default.ins().postItemChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!s.default.ins().checkSysOpen(u.SystemType.KAIMENHONG))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==l.ActivityPageStyle.KAIMENHONG&&n.isOpenActivity()&&!n.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==l.ActivityPageStyle.KAIMENHONG&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(KaiMenWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=c,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../bag/UserBag":"UserBag","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],KfArenaData:[function(e,t,i){"use strict";cc._RF.push(t,"7201avAaglHuaS5Hp6Ymp8T","KfArenaData");(function(){function e(e){e&&this.readData(e)}e.prototype.readData=function(e){this.servId=e.readInt(),this.playerName=e.readString(),this.killNum=e.readShort(),this.aidNum=e.readShort(),this.collectNum=e.readShort(),this.curScore=e.readShort(),this.curGetScore=e.readShort(),this.totalScore=e.readShort(),this.isFirstKiller=e.readBoolean(),this.isFirstCollect=e.readBoolean(),this.isMvp=e.readBoolean(),this.isOnWin=e.readBoolean(),this.isDeserter=e.readBoolean()},e.prototype.readRankData=function(e){this.servId=e.readInt(),this.playerName=e.readString(),this.killNum=e.readShort(),this.aidNum=e.readShort(),this.collectNum=e.readShort(),this.curScore=e.readShort(),this.totalScore=e.readShort()}})();cc._RF.pop()},{}],KfArenaNoticeData:[function(e,t,i){"use strict";cc._RF.push(t,"19e3eqLSUhCirqMVDeMRI7p","KfArenaNoticeData");cc._RF.pop()},{}],KfArenaRankData:[function(e,t,i){"use strict";cc._RF.push(t,"ed037YpOaFDdrUODuuSUn0T","KfArenaRankData");cc._RF.pop()},{}],KfArenaRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"b6648Rav7dMzqhIkjR8em8U","KfArenaRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../../base/BaseSystem"),o=e("./KfArenaSys"),r=e("../../../../core/base/MessageCenter"),s=function(e){function t(){var i=e.call(this)||this;return i.redpoint_1=0,i.redpoint_2=0,i.redpoint_3=0,r.default.compile(t),i.associated(i.postRedPoint,o.default.ins().postJoinRewards,o.default.ins().postPlayerInfo),i}return __extends(t,e),t.prototype.postRedPoint=function(){this.redpoint_1=this.redpoint_2=this.redpoint_3=this.redpoint=0;var e=o.default.ins();return e.isOpen()?(this.redpoint_1=e.times,this.redpoint_2=e.getJoinRedPoint(),this.redpoint_3=e.getDuanRedPoint(),this.redpoint=this.redpoint_1+this.redpoint_2+this.redpoint_3,this.redpoint):0},t.ins=function(){return e.ins.call(this)},t}(a.default);i.default=s,function(e){e.kfArenaRedPoint=s.ins.bind(s)}(n||(n={})),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../base/BaseSystem":"BaseSystem","./KfArenaSys":"KfArenaSys"}],KfArenaRoleVo:[function(e,t,i){"use strict";cc._RF.push(t,"9b110x5qppA77zi8PLVpGFq","KfArenaRoleVo"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../KfArenaSys"),a=function(){function e(){this.curMonth=new o,this.history=new o,this.power=0,this.winRate=0}return e.prototype.parse=function(e){this.roleID=e.readInt(),this.serverId=e.readInt(),this.isonline=0!=e.readInt(),this.duanLevel=e.readInt(),this.score=e.readInt(),this.curMonth.parse(e),this.history.parse(e),this.power=e.readInt(),this.winRate=e.readInt()/100,this.roleName=e.readString(),this.job=e.readByte(),this.sex=e.readByte(),this.cloth=e.readInt(),this.weapon=e.readInt(),this.wingLv=e.readInt(),this.wingState=e.readByte(),this.pos1=e.readInt(),this.pos2=e.readInt(),this.pos3=e.readInt(),this.zs=e.readInt(),this.lv=e.readInt()},e.prototype.isLeader=function(){return n.default.ins().leaderID==this.roleID},e}();i.default=a;var o=function(){function e(){}return e.prototype.parse=function(e){this.win=e.readInt(),this.ping=e.readInt(),this.fail=e.readInt()},e}();i.kfArenaMark=o,cc._RF.pop()},{"../KfArenaSys":"KfArenaSys"}],KfArenaSys:[function(e,t,i){"use strict";cc._RF.push(t,"cc0c6YJJfxGvayHYe73aU2r","KfArenaSys"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../base/BaseSystem"),a=e("../../../../core/net/PackageID"),o=e("../../gamescene/GameLogic"),r=e("../../../../core/base/MessageCenter"),s=e("../../../entity/Actor"),u=e("../../../Utils/EgretUtils"),l=e("../../activity/model/RewardData"),c=e("../../../map/GameMap"),d=e("../../fb/UserFb"),f=e("../../../manager/GlobalConfig"),p=e("../../server/GameServer"),h=e("../../zs/UserZs"),g=e("./data/KfArenaRoleVo"),y=function(e){function t(){var i=e.call(this)||this;return i.isKFArena=!1,i.times=0,i.duanLevel=0,i.score=0,i.leaderID=0,i.inviteDataList=[],i.worldTimeCd=0,i.flagHandle=10011010110,i.flagCD=0,i.duanName=["\u9752\u94dc","\u767d\u94f6","\u9ec4\u91d1","\u767d\u91d1","\u94bb\u77f3","\u738b\u8005"],i.dflCount=0,i._openLeftTime=0,i._openTimer=0,i.isStartIng=0,i.sysId=a.PackageID.KfArena,r.default.compile(t),i.regNetMsg(1,i.postPlayerInfo),i.regNetMsg(2,i.postTeamInfo),i.regNetMsg(5,i.postReceiveInvitation),i.regNetMsg(7,i.postBack),i.regNetMsg(9,i.postRefFlag),i.regNetMsg(10,i.doCollectFlag),i.regNetMsg(11,i.postRelive),i.regNetMsg(13,i.postFbInfo),i.regNetMsg(14,i.doResult),i.regNetMsg(16,i.postMacthState),i.regNetMsg(17,i.postChangeScore),i.regNetMsg(19,i.postDataInfo),i.regNetMsg(20,i.postKfArenaGuilds),i.regNetMsg(21,i.postNotice),i.regNetMsg(23,i.postJoinRewards),i.regNetMsg(26,i.postOpenKfArena),i.regNetMsg(25,i.postRank),i.observe(o.default.ins().postEnterMap,i.changeScene),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendCreateTeam=function(){this.sendBaseProto(1)},t.prototype.postPlayerInfo=function(e){this.times=e.readInt(),this.duanLevel=e.readInt(),this.score=e.readInt(),this.curMouth||(this.curMouth=new g.kfArenaMark),this.curMouth.parse(e),this.history||(this.history=new g.kfArenaMark),this.history.parse(e)},t.prototype.sendPersonalMatch=function(){this.sendBaseProto(2)},t.prototype.postTeamInfo=function(e){this.leaderID=e.readInt(),this.macthState=e.readInt();var t=e.readInt();this.tfMembers=[];for(var i=0;i<t;i++){var n=new KfArenaRoleVo;this.tfMembers[i]=n,n.parse(e)}this.isTFCaptain=s.default.actorID==this.leaderID},t.prototype.sendLeaveTeam=function(){this.sendBaseProto(3)},t.prototype.sendStartMacth=function(){this.sendBaseProto(4)},t.prototype.sendCancelMacth=function(){this.sendBaseProto(16)},t.prototype.sendGuilds=function(e){var t=this.getBytes(20);t.writeInt(e),this.sendToServer(t)},t.prototype.sendInvite=function(e){var t=this.getBytes(5);t.writeInt(e),this.sendToServer(t),this.postKfArenaDelID(e)},t.prototype.postKfArenaDelID=function(e){return e},t.prototype.postReceiveInvitation=function(e){var t=new KFInviteData;t.parse(e),this.checkInviteByID(t.roleId)||this.inviteDataList.push(t),this.inviteDataList.length>0&&ViewManager.ins().open(kfReceiveInviteWin,0)},t.prototype.checkInviteByID=function(e){for(var t=0;t<this.inviteDataList.length;t++)if(this.inviteDataList[t].roleId==e)return!0;return!1},t.prototype.sendWorldInvite=function(){this.sendBaseProto(6)},t.prototype.sendRespondInvite=function(e,t){var i=this.getBytes(7);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.postBack=function(e){switch(e.readInt()){case 1:ViewManager.ins().open(KfArenaWin,1)}},t.prototype.postMacthState=function(e){this.macthState=e.readInt()},t.prototype.postKfArenaGuilds=function(e){var t=e.readInt(),i=e.readInt();if(t==KFInviteType.Guild){this.guildDataList=[];for(var n=0;n<i;n++){(a=new GuildMemberInfo).parse(e),this.guildDataList.push(a)}}else if(t==KFInviteType.Friend){this.friendsDataList=[];for(n=0;n<i;n++){var a;(a=new GuildMemberInfo).parse(e),this.friendsDataList.push(a)}}return t},t.prototype.getDataList=function(e){var t,i=[];if(!(t=e==KFInviteType.Friend?this.friendsDataList:this.guildDataList))return i;for(var n=0;n<t.length;n++)if(t[n].roleID!=s.default.actorID){var a=new GuildMemberInfo;a.copyData(t[n]),i.push(a)}return i},t.prototype.sendJoinTeam=function(e){var t=this.getBytes(18);t.writeInt(e),this.sendToServer(t)},t.prototype.sendOutTeam=function(e){var t=this.getBytes(8);t.writeInt(e),this.sendToServer(t)},t.prototype.postRefFlag=function(e){e.readDouble();this.flagCD=1e3*e.readInt()+u.default.getTimer(),this.flagHandle=10011010110},t.prototype.doCollectFlag=function(e){var t=e.readDouble(),i=e.readInt();t&&t==s.default.handle&&i?(ViewManager.ins().open(CollectWin,t,i),o.default.ins().currAttackHandle=0):ViewManager.ins().close(CollectWin)},t.prototype.sendCollectFlag=function(){this.sendBaseProto(10)},t.prototype.postRelive=function(e){var t=e.readInt(),i=e.readDouble();ViewManager.ins().open(KfArenaReliveWin,t,i)},t.prototype.postFbInfo=function(e){var t=e.readInt();this.myCampId=e.readByte(),this.scoreA=e.readInt(),this.scoreB=e.readInt(),ViewManager.ins().open(KfArenaFightWin,(DateUtils.formatMiniDateTime(t)-p.default.serverTime)/DateUtils.MS_PER_SECOND>>0)},t.prototype.doResult=function(e){for(var t=e.readInt(),i=e.readInt(),n=e.readShort(),a=[],o=0;o<n;o++){var r=new KfArenaData(e);r.rank=o+1,a.push(r)}var s=[];n=e.readShort();for(o=0;o<n;o++){var u=new l.default;u.type=e.readInt(),u.id=e.readInt(),u.count=e.readInt(),s.push(u)}ViewManager.ins().open(KfArenaResultWin,t,i,a,s)},t.prototype.enterBattle=function(){this.sendBaseProto(15)},t.prototype.postChangeScore=function(e){this.scoreA=e.readInt(),this.scoreB=e.readInt()},t.prototype.postDataInfo=function(e){for(var t=e.readShort(),i=[],n=0;n<t;n++){var a=new KfArenaData;a.readRankData(e),i.push(a)}return ViewManager.ins().isShow(KfArenaInfoWin)||ViewManager.ins().open(KfArenaInfoWin,i),i},t.prototype.sendDataInfo=function(){this.sendBaseProto(19)},t.prototype.postNotice=function(e){return new KfArenaNoticeData(e)},t.prototype.postRank=function(e){this.rankDataList=[];for(var t=e.readInt(),i=0;i<t;i++)this.rankDataList.push(new KfArenaRankData(e));this.ownRank=e.readInt()},t.prototype.sendRank=function(){this.sendBaseProto(25)},t.prototype.getIsJoinTeam=function(){return 0!=this.leaderID},t.prototype.changeScene=function(){c.default.fbType==d.default.FB_TYPE_KF_ARENA?this.isKFArena=!0:c.default.lastFbTyp==d.default.FB_TYPE_KF_ARENA&&(this.isKFArena=!1,this.flagHandle=0)},t.prototype.getDuanAwards=function(){var e=f.default.CrossArenaBase.everyDayAward;for(var t in e)if(e[t].metal==this.duanLevel)return e[t].award;return null},t.prototype.getDuanName=function(){return this.duanName[this.duanLevel-1]},t.prototype.isOpen=function(){return!!(f.default.CrossArenaBase.openDay<=p.default.serverOpenDay+1&&h.default.ins().lv>=f.default.CrossArenaBase.zhuanshengLevel&&(1==this.isStartIng||0==this.isStartIng&&this._openLeftTime>0))},t.prototype.sendDailyRewards=function(){this.sendBaseProto(23)},t.prototype.sendJoinRewards=function(e){var t=this.getBytes(24);t.writeInt(e),this.sendToServer(t)},t.prototype.postJoinRewards=function(e){this.yesterdayDuan=e.readInt(),this.dailyState=e.readInt(),this.dflCount=e.readInt(),this.dflState=e.readInt()},t.prototype.postOpenKfArena=function(e){this.isStartIng=e.readInt(),this._openLeftTime=e.readInt(),this._openTimer=u.default.getTimer()},t.prototype.getOpenLeftTime=function(){return this._openLeftTime-(u.default.getTimer()-this._openTimer)/1e3},t.prototype.getDuanRedPoint=function(){return 0==this.dailyState?1:0},t.prototype.getJoinRedPoint=function(){var e=f.default.CrossArenaBase.peakAwards,i=1,n=0;for(var a in e)1!=(this.dflState>>i&1)&&t.ins().dflCount>=e[a].count&&n++,i++;return n},t}(n.default);i.default=y,window.GameSystem.push(y.ins.bind(y)),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../../core/net/PackageID":"PackageID","../../../Utils/EgretUtils":"EgretUtils","../../../base/BaseSystem":"BaseSystem","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../../map/GameMap":"GameMap","../../activity/model/RewardData":"RewardData","../../fb/UserFb":"UserFb","../../gamescene/GameLogic":"GameLogic","../../server/GameServer":"GameServer","../../zs/UserZs":"UserZs","./data/KfArenaRoleVo":"KfArenaRoleVo"}],KnighthoodBasicConfig:[function(e,t,i){"use strict";cc._RF.push(t,"84ddf8hLRRNT4QCaaSu/r2S","KnighthoodBasicConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.perLevel=0,this.actImbaId=0}}();i.default=n,cc._RF.pop()},{}],KnighthoodConfig:[function(e,t,i){"use strict";cc._RF.push(t,"db889VaGm9HYowCQ6dDvmOa","KnighthoodConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.effid=0}}();i.default=n;cc._RF.pop()},{}],KnighthoodStageConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2d35aNPYlBGVLO+SQfVuArp","KnighthoodStageConfig");cc._RF.pop()},{}],KuaFuRank:[function(e,t,i){"use strict";cc._RF.push(t,"ec064rTEblGn69KsOPrs5g1","KuaFuRank"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.actorId=0,this.rmb=0,this.rank=0,this.serverId=0,this.roleName="",this.job=0,this.sex=0}}();i.default=n,cc._RF.pop()},{}],KuangDiTuConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d068ezubRZCi5PQrJ8H6Zvc","KuangDiTuConfig");cc._RF.pop()},{}],KuangYuanConfig:[function(e,t,i){"use strict";cc._RF.push(t,"41026I2rC5IC5+KRYvsFvcN","KuangYuanConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],LabaBossIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"f2982TghpJAO41aAvxWCL2i","LabaBossIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../consts/SystemConst"),o=e("../../opensystem/OpenSystem"),r=e("../../activity/Activity"),s=e("../../../manager/TimerManager"),u=e("../../server/GameServer"),l=e("../../../../core/utils/DateUtils"),c=e("../../tips/UserTips"),d=e("../../../manager/UILoadMgr"),f=function(e){function t(t,i){var n=e.call(this,t,i)||this;if(o.default.ins().checkSysOpen(a.SystemType.LABA)){if(n.activityData=r.default.ins().checkLabaBossData(),!n.activityData)return n;n.actId=n.activityData.id}return n.showMessage=[r.default.ins().postActivityIsGetAwards],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return this.alertText=cc.instantiate(d.default.inst.getPrefab(d.prefabName.common_lab)).getComponent(cc.Label),this.activityData.isOpenActivity()&&!this.activityData.IsEnd()&&(s.default.ins().isExists(this.runTime,this)||s.default.ins().doTimer(1e3,0,this.runTime,this),s.default.ins().isExists(this.updateActivity,this)||s.default.ins().doTimer(3e4,0,this.updateActivity,this)),t},t.prototype.updateActivity=function(){this.activityData&&r.default.ins().sendChangePage(this.activityData.id)},t.prototype.runTime=function(){if(this.actId){if(this.activityData=r.default.ins().getActivityDataById(this.actId),!this.activityData)return s.default.ins().remove(this.runTime,this),void s.default.ins().remove(this.updateActivity,this);if(this.activityData.IsEnd())return this.alertText.string="\u4eca\u5929\u5237\u65b0\u5b8c",s.default.ins().remove(this.runTime,this),void s.default.ins().remove(this.updateActivity,this);var e=Math.floor(u.default.serverTime/l.default.MS_PER_SECOND);if(e>=this.activityData.getEndTimer())this.alertText.string="\u5df2\u7ed3\u675f";else{var t=this.activityData.getStartTimer();if(this.activityData.isGoIn)this.alertText.string="\u5df2\u5237\u65b0";else{var i=t-e;this.alertText.string=i>0?l.default.getFormatBySecond(i,l.default.TIME_FORMAT_12):"\u5237\u65b0\u4e2d"}}}},t.prototype.checkShowIcon=function(){return!!o.default.ins().checkSysOpen(a.SystemType.LABA)&&(!!this.activityData&&(!this.activityData.IsEnd()&&!!this.activityData.go2BossFb()))},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.tapExecute=function(){this.activityData&&(this.activityData.IsEnd()?c.default.ins().showTips("\u5df2\u7ecf\u5168\u90e8\u6d88\u706d\uff0c\u8bf7\u671f\u5f85\u4e0b\u6b21\uff01"):this.activityData.go2BossFb()?r.default.ins().sendReward(this.activityData.id,this.activityData.index):c.default.ins().showTips("\u672a\u5230\u5237\u65b0\u65f6\u95f4"))},t}(n.default);i.default=f,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../consts/SystemConst":"SystemConst","../../../manager/TimerManager":"TimerManager","../../../manager/UILoadMgr":"UILoadMgr","../../activity/Activity":"Activity","../../opensystem/OpenSystem":"OpenSystem","../../server/GameServer":"GameServer","../../tips/UserTips":"UserTips","./RuleIconBase":"RuleIconBase"}],LabaIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"104c3x3KDNJU5Hb951ym71L","LabaIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=e("../../activity/model/ActivityDataFactory"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!r.default.ins().checkSysOpen(s.SystemType.LABA))return!1;var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==u.ActivityPageStyle.LABA&&i.isOpenActivity()&&!i.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==u.ActivityPageStyle.LABA&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){r.default.ins().checkSysOpen(s.SystemType.LABA)&&(ViewManager.ins().open(LabaWin),this.firstTap&&(this.firstTap=!1,this.update()))},t}(n.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],LadderBtnIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"b4844wkD9FC9aE6gbrntz2p","LadderBtnIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../fb/UserFb"),a=e("../../hungu/Hungu"),o=e("./RuleIconBase"),r=e("../../gamescene/GameLogic"),s=e("../../../entity/Actor"),u=e("../../task/UserTask"),l=e("../../encounter/Encounter"),c=e("../../mine/Mine"),d=e("../../kf/KFBattleRedPoint"),f=e("../../ladder/Ladder"),p=e("../../../manager/GlobalConfig"),h=function(e){function t(t,i){var a=e.call(this,t,i)||this;return a.showMessage=[r.default.ins().postEnterMap,s.default.ins().postLevelChange,n.default.ins().postGuanKaIdChange,u.default.ins().postUpdteTaskTrace],a.updateMessage=[f.default.ins().postTadderChange,l.default.ins().postEncounterDataChange,c.default.ins().postRedPoint,d.default.ins().postRedPoint,n.default.ins().postShowRedChange],a}return __extends(t,e),t.prototype.checkShowIcon=function(){return n.default.ins().guanqiaID>=p.default.SkirmishBaseConfig.openLevel&&!l.default.ins().isGuiding&&!n.default.ins().pkGqboss},t.prototype.checkShowRedPoint=function(){var e=l.default.ins().isHasRed();return e||(f.default.ins().checkRedShow()?1:c.default.redpointCheck()?1:n.default.ins().checkTFRed()?1:a.default.ins().showHunShouRed()?1:0)},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){ViewManager.ins().open(LadderWin,0)},t}(o.default);i.default=h,cc._RF.pop()},{"../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../encounter/Encounter":"Encounter","../../fb/UserFb":"UserFb","../../gamescene/GameLogic":"GameLogic","../../hungu/Hungu":"Hungu","../../kf/KFBattleRedPoint":"KFBattleRedPoint","../../ladder/Ladder":"Ladder","../../mine/Mine":"Mine","../../task/UserTask":"UserTask","./RuleIconBase":"RuleIconBase"}],Ladder:[function(e,t,i){"use strict";cc._RF.push(t,"c8b74lmTZBPU7e9ttjNQQ/R","Ladder"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../config/TianTiDanConfig"),o=e("../../../core/base/MessageCenter"),r=e("../../../core/net/PackageID"),s=e("../ranking/Rank"),u=e("../ranking/model/RankDataLadder"),l=e("../../entity/Actor"),c=e("../../Utils/EgretUtils"),d=e("../activity/model/RewardData"),f=e("../../manager/TimerManager"),p=e("../../../core/base/ViewManager"),h=e("../../manager/GlobalConfig"),g=function(e){function t(){var i=e.call(this)||this;return i.isCanReward=!1,i.upLevel=0,i.upId=0,i.upWin=0,i.todayBuyTime=0,i.upWeekRank=0,i.upRankList=[],i._actorInfo=[],i.sysId=r.PackageID.Ladder,o.default.compile(t),i.regNetMsg(1,i.doLadderInfo),i.regNetMsg(2,i.doGetPlayer),i.regNetMsg(3,i.doPlayResule),i.regNetMsg(5,i.postRankInfoList),i.regNetMsg(6,i.doChallageNum),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getActorInfo=function(e){return void 0===e&&(e=-1),-1==e?this._actorInfo:this._actorInfo[e]},t.prototype.sendGetSomeOne=function(){this.sendBaseProto(2)},t.prototype.sendStarPlay=function(e,t){var i=this.getBytes(3);i.writeInt(t),i.writeInt(e),this.sendToServer(i),this._actorInfo=[]},t.prototype.sendGetWeekReward=function(){this.sendBaseProto(4)},t.prototype.sendGetRankInfo=function(){this.sendBaseProto(5)},t.prototype.sendBuyChallgeTime=function(){this.sendBaseProto(6)},t.prototype.doLadderInfo=function(e){this.docodeInfo(e)},t.prototype.postTadderChange=function(){},t.prototype.doGetPlayer=function(e){var t=e.readInt(),i=e.readInt();this._actorInfo.length=0,this._actorInfo.push(t,i),i>0&&(this._actorInfo.push(e.readString()),this._actorInfo.push(e.readByte()),this._actorInfo.push(e.readByte()),this._actorInfo.push(e.readInt()),this._actorInfo.push(e.readInt()))},t.prototype.doPlayResule=function(e){this.doPlayResult(e)},t.prototype.postRankInfoList=function(e){var t=s.default.ins().getRankModel(RankDataType.TYPE_LADDER),i=e.readShort();t.getDataList().length=i;var n=t.getDataList(),a=0;for(a=0;a<i;++a)this.setRankData(n,a,e);var o=this.getMyRankInfo(n);for(t.selfPos=o?o.pos:0,this.upRankList=[],this.upweekLength=0,i=e.readShort(),a=0;a<i;++a)this.setRankData(this.upRankList,a,e,!0);return this.fillingList(),t},t.prototype.setRankData=function(e,t,i,n){void 0===n&&(n=!1),t in e||(e[t]=new u.default),e[t].parser(i,null),e[t].pos=t+1,n&&e[t].id==l.default.actorID&&(this.upWeekRank=e[t].pos)},t.prototype.doChallageNum=function(e){this.todayBuyTime=e.readInt()},t.prototype.docodeInfo=function(e){this.isOpen=e.readBoolean(),this.level=e.readInt(),this.nowId=e.readInt(),this.challgeNum=e.readInt();var i=e.readInt();this.challgeCd=1e3*i+c.default.getTimer(),this.winNum=e.readInt(),this.lianWin=e.readBoolean(),this.playUpTime=e.readBoolean(),this.playUpTime&&(this.isCanReward=e.readBoolean(),this.upLevel=e.readInt(),this.upId=e.readInt(),this.upWin=e.readInt()),t.ins().postTadderChange()},t.prototype.doPlayResult=function(e){for(var t,i=e.readBoolean(),n=e.readShort(),a=[],o=0;o<n;o++)(t=new d.default).parser(e),a.push(t);var r=e.readInt(),s=e.readInt(),u=e.readInt();f.default.ins().doTimer(1e3,1,function(){p.default.ins().open(LadderResultWin,i,a.reverse(),r,s,u)},this)},t.prototype.fillingList=function(){0==this.upweekLength&&(this.upweekLength=this.checkObjListLength());var e=this.upweekLength-this.upRankList.length;if(e>0)for(var t=1;t<e;t++)this.upRankList.push(null);this.configList||(this.configList=this.cloneConfigDataList(h.default.TianTiDanConfig),this.configList.reverse())},t.prototype.getUpRankList=function(){var e=[];for(var t in this.upRankList)this.upRankList[t]&&e.push(this.upRankList[t]);return e},t.prototype.checkObjListLength=function(){for(var e=1;e<200;e++)if(!h.default.TianTiRankAwardConfig[e+""])return e;return 0},t.prototype.getMyRankInfo=function(e){for(var t=0;t<e.length;t++)if(e[t].id==l.default.actorID)return e[t];return null},t.prototype.getLevelDuanWeiLength=function(e){var t=0,i=h.default.TianTiDanConfig;for(var n in i[e+""])i[e+""][n]&&t++;return t},t.prototype.getDuanWeiDesc=function(){var e="",t=this.getLevelConfig();return t&&(e=t.showLevel+this.getZhongwenNumber(t.showDan)+"\u6bb5"),e},t.prototype.getLevelConfig=function(e,t){void 0===e&&(e=-1),void 0===t&&(t=-1),-1==e&&(e=this.level),-1==t&&(t=this.nowId);var i=h.default.TianTiDanConfig;for(var n in i[e+""])if(i[e+""][n].id==t)return i[e+""][n];return null},t.prototype.creatRewardData=function(e){var t;return(t=new d.default).count=e.count,t.type=e.type,t.id=e.id,t},t.prototype.getZhongwenNumber=function(e){var t="";switch(e){case 1:t="\u4e00";break;case 2:t="\u4e8c";break;case 3:t="\u4e09";break;case 4:t="\u56db";break;case 5:t="\u4e94";break;case 6:t="\u516d";break;case 7:t="\u4e03";break;case 8:t="\u516b";break;case 9:t="\u4e5d";break;case 10:t="\u5341"}return t},t.prototype.cloneConfigDataList=function(e){var t,i=[];for(var n in e)for(var o in e[n])(t=new a.default).level=parseInt(n),t.id=e[n][o].id,t.showStar=e[n][o].showStar,t.showDan=e[n][o].showDan,t.showLevel=e[n][o].showLevel,t.winAward=e[n][o].winAward,t.danAward=e[n][o].danAward,this.checkIshaveOne(i,t)&&i.push(t);return i},t.prototype.checkRedShow=function(){return this.challgeNum>0&&this.isOpen?1:0},t.prototype.checkIshaveOne=function(e,t){for(var i=e.length,n=0;n<i;n++)if(e[n].level==t.level)return!1;return!0},t.prototype.getStatuByLevel=function(e){var t;switch(e){case 1:t=3;break;case 2:t=4;break;case 3:t=5;break;case 4:t=0}return t},t}(n.default);i.default=g,window.GameSystem.push(g.ins.bind(g)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/base/ViewManager":"ViewManager","../../../core/net/PackageID":"PackageID","../../Utils/EgretUtils":"EgretUtils","../../base/BaseSystem":"BaseSystem","../../config/TianTiDanConfig":"TianTiDanConfig","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../activity/model/RewardData":"RewardData","../ranking/Rank":"Rank","../ranking/model/RankDataLadder":"RankDataLadder"}],LayerManager:[function(e,t,i){"use strict";cc._RF.push(t,"75afc+XfKBB1pBmxWytuHWc","LayerManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.Game_Bg="Game_Bg",e.Game_Main="Game_Main",e.Main_View="Main_View",e.UI_Main="UI_Main",e.UI_Main2="UI_Main2",e.UI_Popup="UI_Popup",e.UI_Message="UI_Message",e.UI_Tips="UI_Tips",e}();i.LayerManager=n,cc._RF.pop()},{}],LeadFubenBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"bac43wn1DJHCqwhKun3K+W2","LeadFubenBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],LegendComposeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"0a9f6zwcYhBx6y4/GPTV3hT","LegendComposeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],LegendEquipPanel:[function(e,t,i){"use strict";cc._RF.push(t,"b02c5B+ZoRLBLo4O7RLVBXX","LegendEquipPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("../../../../core/view/BaseView").default);i.default=n,cc._RF.pop()},{"../../../../core/view/BaseView":"BaseView"}],LegendLevelupConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4e74dkRzp5MnaXlnfJ7qrij","LegendLevelupConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],LevelImage:[function(e,t,i){"use strict";cc._RF.push(t,"ddb45QDpvRDJoUZ5gXhsmet","LevelImage"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/view/BaseComponent"),a=cc._decorator,o=a.ccclass,r=a.property,s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.num1=null,t.num21=null,t.num22=null,t.num31=null,t.num32=null,t.num33=null,t._value=1,t}return __extends(t,e),t.prototype.getValue=function(){return this._value},t.prototype.setValue=function(e){e<=0&&(e=1),this._value=e;var t=e+"";e<=10?this.loadImage("jieji0"+t+"_png",this.num1):e<=20||e%10==0?"1"==t.charAt(0)?(this.loadImage("jieji010_png",this.num21),this.loadImage("jieji0"+t.charAt(1)+"_png",this.num22)):(this.loadImage("jieji0"+t.charAt(0)+"_png",this.num21),this.loadImage("jieji010_png",this.num22)):e<100&&(this.loadImage("jieji0"+t.charAt(0)+"_png",this.num31),this.loadImage("jieji010_png",this.num32),this.loadImage("jieji0"+t.charAt(1)+"_png",this.num33))},t.prototype.loadImage=function(e,t){cc.loader.loadRes(e,function(e,i){e?console.log("\u9636\u7ea7\u56fe\u7247\u52a0\u8f7d\u5931\u8d25:",e):t.spriteFrame=i})},__decorate([r({type:cc.Sprite,displayName:"num1"})],t.prototype,"num1",void 0),__decorate([r({type:cc.Sprite,displayName:"num21"})],t.prototype,"num21",void 0),__decorate([r({type:cc.Sprite,displayName:"num22"})],t.prototype,"num22",void 0),__decorate([r({type:cc.Sprite,displayName:"num31"})],t.prototype,"num31",void 0),__decorate([r({type:cc.Sprite,displayName:"num32"})],t.prototype,"num32",void 0),__decorate([r({type:cc.Sprite,displayName:"num33"})],t.prototype,"num33",void 0),t=__decorate([o],t)}(n.BaseComponent);i.default=s,cc._RF.pop()},{"../../core/view/BaseComponent":"BaseComponent"}],LevelMailConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7c5acAqI1tELZ8dZHVxYAc+","LevelMailConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],LiLianWin:[function(e,t,i){"use strict";cc._RF.push(t,"fa1cc1glWxFBYlQKi3YH1xM","LiLianWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=cc._decorator,r=o.ccclass,s=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Main,t}return __extends(t,e),t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t=__decorate([r],t)}(n.default));i.default=s,cc._RF.pop()},{"../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager"}],LiLian:[function(e,t,i){"use strict";cc._RF.push(t,"d0ffbEzhnxBgZ72iN72bx1Y","LiLian"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../../entity/SubRoles"),s=e("../../base/EntityManager"),u=e("../tips/UserTips"),l=e("../artifact/Artifact"),c=e("../../manager/GlobalConfig"),d=function(e){function t(){var i=e.call(this)||this;return i.lilianReward=0,i.nobilityIsUpGrade=0,i.nobilityLv=0,i.xunzhangJF=0,i.liLianExpDay=0,i.liLianExpDayReward=0,i.jadeLv=0,i.isShow=!1,i.isXZShow=!1,i.skillCfgList=[],i.sysId=a.PackageID.Train,o.default.compile(t),i.regNetMsg(5,i.postNobilityData),i.regNetMsg(3,i.postTrainsDayAward),i.regNetMsg(10,i.postJadeLv),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendLilianUpgrade=function(){this.sendBaseProto(1)},t.prototype.sendNobilityUpgrade=function(){this.sendBaseProto(6)},t.prototype.sendNobilityStageUpgrade=function(){this.sendBaseProto(7)},t.prototype.sendGetLilianReward=function(){this.sendBaseProto(2)},t.prototype.postLilianData=function(e){var t=e.readInt();this.liLianExp=e.readInt(),this.lilianReward=e.readInt(),this.liLianExpDay=e.readInt(),this.liLianExpDayReward=e.readInt();var i=!1;return(t>this.liLianLv||this.checkShowRedPoint2())&&(i=!0),this.liLianLv=t,UserTask.ins().postUpdataTaskPoint(),i&&this.upDateRole(),this.getTraining?{flag:!1}:{flag:!0}},t.prototype.upDateRole=function(){for(var e=r.default.ins().subRolesLen,t=0;t<e;t++){var i=s.default.ins().getMainRole(t);if(i){var n=r.default.ins().getSubRoleByIndex(t);n.lilianLv=this.liLianLv,i.setCharName(n.guildAndName),i.setLilian(n.lilianUrl)}}},t.prototype.postNobilityData=function(e){this.isXZShow=!1;var t=e.readInt(),i=this.nobilityLv!=t;return this.nobilityLv=t,{refush:i}},t.prototype.postTrainsDayAward=function(e){var t=e.readBoolean();return this.getTraining=!1,t},t.prototype.sendTrainsDayAward=function(e){var t=this.getBytes(3);t.writeInt(e),this.sendToServer(t)},t.prototype.setXunzhangJF=function(e){if(this.xunzhangJF!=e){if(this.xunzhangJF>0){var t=e-this.xunzhangJF,i=parseInt(t.toString());if(i>0){var n="|C:0xffd93f&T:\u83b7\u5f97"+i+"\u6210\u5c31\u79ef\u5206|";u.default.ins().showTips(n)}}this.xunzhangJF=e}},t.prototype.getLiLianStast=function(){return!!this.getLilianShenGongStast()||(this.getNobilityIsUpGrade()&&!this.getNobilityIsMaxLevel?this.getNobilityIsUpGrade():!!l.default.ins().showRedPoint()||(!!UserTask.ins().getIsHaveChengjiuReward()||(!(!this.checkJueWeiOpen()||!this.getNobilityIsUpGrade()||this.getNobilityIsMaxLevel())||(!!this.checkJadeRed()||this.checkShowRedPoint2()))))},t.prototype.checkJueWeiOpen=function(){var e=c.default.TrainBaseConfig.actImbaId;return!!l.default.ins().getNewArtifactBy(l.default.ins().getArtifactIndexById(e))&&l.default.ins().getNewArtifactBy(l.default.ins().getArtifactIndexById(e)).open},t.prototype.checkXunZhangOpen=function(){var e=c.default.KnighthoodBasicConfig.actImbaId;return!!l.default.ins().getNewArtifactBy(l.default.ins().getArtifactIndexById(e))&&l.default.ins().getNewArtifactBy(l.default.ins().getArtifactIndexById(e)).open},t.prototype.checkBookOpen=function(){return OpenSystem.ins().checkSysOpen(SystemType.BOOK)},t.prototype.checkShowRedPoint2=function(){if(this.lilianReward<=0)return!1;var e=c.default.GuanYinAwardConfig[this.lilianReward];return this.liLianLv>=e.level},t.prototype.getLilianActiveState=function(){var e=c.default.TrainBaseConfig.actImbaId;return!!l.default.ins().getNewArtifactBy(l.default.ins().getArtifactIndexById(e))&&l.default.ins().getNewArtifactBy(l.default.ins().getArtifactIndexById(e)).open},t.prototype.getLilianShenGongStast=function(){if(!this.getLilianActiveState())return!1;var e=c.default.TrainLevelConfig[this.liLianLv+1];return!!(e&&this.liLianExp>=e.exp)||this.checkShowRedPoint2()},t.prototype.getLilianBtnState=function(){if(!this.getLilianActiveState())return!1;var e=c.default.TrainLevelConfig[this.liLianLv+1];return!!(e&&this.liLianExp>=e.exp)},t.prototype.getNobilityIsUpGrade=function(){for(var e=c.default.KnighthoodConfig[this.nobilityLv],t=0;t<e.achievementIds.length;t++){var i=e.achievementIds[t].taskId;if(i>0){var n=UserTask.ins().getAchieveByTaskId(i);if(!n)return!1;if(UserTask.ins().getAchieveConfById(n.id).target>n.value)return!1}}return!0},t.prototype.getNobilityIsMaxLevel=function(){return!c.default.KnighthoodConfig[this.nobilityLv+1]},t.prototype.getAllChengjiuData=function(){if(this._achievementTaskAllConfig)return this._achievementTaskAllConfig;this._achievementTaskAllConfig=[];var e=c.default.AchievementTaskConfig;for(var i in c.default.AchievementTaskConfig)e[i].achievementType>0&&this._achievementTaskAllConfig.push(e[i]);return this._achievementTaskAllConfig.sort(t.sort),this._achievementTaskAllConfig},t.sort=function(e,t){return e.achievementType>t.achievementType?1:e.achievementType<t.achievementType?-1:0},t.prototype.getChengjiuData=function(e){for(var t=[],i=0,n=this.getAllChengjiuData();i<n.length;i++){var a=n[i];a.achievementType==e&&t.push(a)}return t},t.prototype.chengjiuMaxData=function(){if(this._chengjiuMaxData)return this._chengjiuMaxData;this._chengjiuMaxData=[];for(var e=-1,t=0,i=this.getAllChengjiuData();t<i.length;t++){var n=i[t];e!=n.achievementType&&(e=n.achievementType,this._chengjiuMaxData.push(e))}return this._chengjiuMaxData},t.prototype.getPower=function(){return c.default.TrainLevelConfig[this.liLianLv].power},t.prototype.getCruLevelSkillCfg=function(e){void 0===e&&(e=!1);var t=c.default.TrainLevelAwardConfig;if(this.skillCfgList.length<=0)for(var i in t)this.skillCfgList.push(t[i]);for(var n=null,a=0,o=this.skillCfgList;a<o.length;a++){if((i=o[a]).level>this.liLianLv){n=i;break}}return e?n:t[n?n.id-1:0]},t.prototype.postGetLilianReward=function(e){return e},t.prototype.getTrainDayAwardConfigs=function(e){var t=Object.keys(c.default.TrainDayAwardConfig);t.sort(this.setSortTrainAwards);for(var i=0;i<t.length;i++)if(e>=Number(t[i]))return c.default.TrainDayAwardConfig[t[i]];return null},t.prototype.jadeUpgrade=function(){this.sendBaseProto(10)},t.prototype.setSortTrainAwards=function(e,t){return Number(e)>Number(t)?-1:1},t.prototype.isGetTrainDayAward=function(e){var t=this.getTrainDayAwardConfigs(GameServer.serverOpenDay+1);if(!t||!t[e])return!1;if(this.liLianExpDayReward>>e&1);else if(this.liLianExpDay>=t[e].score)return!0;return!1},t.prototype.isGetTrainDayAwardAll=function(){if(!this.getLilianActiveState())return!1;var e=this.getTrainDayAwardConfigs(GameServer.serverOpenDay+1);if(!e)return!1;for(var t in e)if(this.liLianExpDayReward>>+t&1);else if(this.liLianExpDay>=e[+t].score)return!0;return!1},t.prototype.postJadeLv=function(e){this.jadeLv=e.readInt()},t.prototype.isJadeMax=function(){return this.jadeLv>=Object.keys(c.default.YuPeiConfig).length-1},t.prototype.checkJadeRed=function(){return!1},t}(n.default);i.default=d,window.GameSystem.push(d.ins.bind(d)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../artifact/Artifact":"Artifact","../tips/UserTips":"UserTips"}],LimitStartTipsView:[function(e,t,i){"use strict";cc._RF.push(t,"79045svlEVI6KJudS2e8QcN","LimitStartTipsView"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../../core/base/ViewManager"),r=e("./LimitTaskView"),s=cc._decorator,u=s.ccclass,l=s.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.btn=null,t}var i;return __extends(t,e),i=t,t.prototype.initUI=function(){},t.prototype.initData=function(){this.name="\u9650\u65f6\u4efb\u52a1\u5f00\u59cb"},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.btn,this.onStart)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onStart=function(){o.default.ins().close(i),o.default.ins().open(r.default)},__decorate([l(cc.Node)],t.prototype,"btn",void 0),t=i=__decorate([u],t)}(n.default);i.default=c,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager","./LimitTaskView":"LimitTaskView"}],LimitTaskData:[function(e,t,i){"use strict";cc._RF.push(t,"5d22dGALqFEoqwvStu20ddT","LimitTaskData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.id=0,this.name="",this.desc="",this.target=0,this.control=0,this.type=0,this.state=0,this.progress=0}return e.prototype.setBaseData=function(e){this.id=e.id,this.name=e.name,this.desc=e.desc,this.target=e.target,this.awardList=e.awardList,this.control=e.control,this.controlTarget=e.controlTarget,this.type=e.type},e.prototype.parser=function(e){this.progress=e.readInt(),this.state=e.readByte()},e}();i.default=n,cc._RF.pop()},{}],LimitTaskIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"5bdabxRuAVKhKm+GCD0O7x5","LimitTaskIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../task/UserTask"),o=e("../../zs/UserZs"),r=e("../../../entity/Actor"),s=e("../../server/GameServer"),u=e("../../../../core/utils/DateUtils"),l=e("../../../manager/TimerManager"),c=e("../../opensystem/OpenSystem"),d=e("../../../consts/SystemConst"),f=e("../../../manager/GlobalConfig"),p=e("../../../manager/UILoadMgr"),h=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[r.default.ins().postLevelChange,o.default.ins().postZsData],n.updateMessage=[a.default.ins().postUpdteLimitTaskData],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return this.alertText=cc.instantiate(p.default.inst.getPrefab(p.prefabName.common_lab)).getComponent(cc.Label),0==a.default.ins().limitTaskState?this.alertText.string="\u70b9\u51fb\u5f00\u653e":(this.runTime(),l.default.ins().doTimer(1e3,0,this.runTime,this)),t},t.prototype.runTime=function(){var e=a.default.ins().limitTaskEndTime-Math.floor(s.default.serverTime/1e3);e>=0?this.alertText.string=u.default.getFormatBySecond(e,u.default.TIME_FORMAT_12):(this.alertText.string="\u6d3b\u52a8\u7ed3\u675f",l.default.ins().remove(this.runTime,this),this.updateShow())},t.prototype.checkShowIcon=function(){if(!c.default.ins().checkSysOpen(d.SystemType.LIMITTASK))return!1;if(!f.default.LimitTimeConfig[a.default.ins().currTaskListsId])return!1;if(a.default.ins().limitTaskEndTime>0)if(a.default.ins().limitTaskEndTime-Math.floor(s.default.serverTime/1e3)<0){if(!f.default.LimitTimeConfig[a.default.ins().currTaskListsId+1])return ViewManager.ins().close(LimitTaskView),!1}else if(!f.default.LimitTimeConfig[a.default.ins().currTaskListsId+1]&&8==a.default.ins().limitTaskCount)return this.updateShow(),l.default.ins().doTimer(1500,1,function(){ViewManager.ins().close(LimitTaskView)},this),!1;return-1!=a.default.ins().limitTaskState&&a.default.ins().limitTaskEndTime,!0},t.prototype.checkShowRedPoint=function(){return a.default.ins().getLimitTaskRed()},t.prototype.tapExecute=function(){ViewManager.ins().open(LimitTaskView)},t.prototype.getEffName=function(e){return this.effX=38,this.effY=38,"actIconCircle"},t}(n.default);i.default=h,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../../manager/TimerManager":"TimerManager","../../../manager/UILoadMgr":"UILoadMgr","../../opensystem/OpenSystem":"OpenSystem","../../server/GameServer":"GameServer","../../task/UserTask":"UserTask","../../zs/UserZs":"UserZs","./RuleIconBase":"RuleIconBase"}],LimitTaskView:[function(e,t,i){"use strict";cc._RF.push(t,"e3167Yd0iVKhpwOD2ES1Vgw","LimitTaskView"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=cc._decorator,r=o.ccclass,s=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Main,t}return __extends(t,e),t.prototype.initUI=function(){throw new Error("Method not implemented.")},t.prototype.initData=function(){throw new Error("Method not implemented.")},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error("Method not implemented.")},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];throw new Error("Method not implemented.")},t=__decorate([r],t)}(n.default));i.default=s,cc._RF.pop()},{"../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager"}],LimitTimeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b0c1fQXRfNBLJMhCBTRjPmN","LimitTimeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.time=0,this.openLevel=0,this.openZhuan=0}}();i.default=n,cc._RF.pop()},{}],LimitTimeTaskConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2b1acwMcCNNG4Qgk4cstefM","LimitTimeTaskConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.name="",this.desc="",this.target=0,this.control=0}}();i.default=n,cc._RF.pop()},{}],ListScrollScript:[function(e,t,i){"use strict";cc._RF.push(t,"4c3a5LbY9dMVYXs5RDUH4lP","ListScrollScript"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./NodeResusePool"),a=e("../../core/utils/ComponentUtil"),o=e("../../core/utils/Util"),r=e("../../core/utils/DictionaryUtil"),s=e("../../core/utils/ArrayUtil"),u=cc._decorator,l=u.ccclass,c=u.property,d=u.menu,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.itemClickEvents=[],t.itemPrefab=null,t.itemNode=null,t.itemScriptName="",t.itemHeight=30,t.spacingY=0,t.top=0,t.buttom=0,t.scrollView=null,t.renderCacheNum=2,t.renderTime=.1,t.itemChildNum=1,t.isHasBtnClick=!1,t.itemButtonName="",t.itemMap={},t.dtTime=0,t}return __extends(t,e),t.prototype.onLoad=function(){this.clearNodePool(),this.nodePool=new n.NodeReusePool("ListItem",this.itemPrefab||this.itemNode);var e=a.ComponentUtil.getComponentScriptName(this),t=a.ComponentUtil.createEventHandler(this.node,e,"onScrollEvent");this.scrollView.scrollEvents.push(t),this.updateView()},t.prototype.onDestroy=function(){this.nodePool.releaseNodes(),this.nodePool=null,this.itemMap=null},t.prototype.update=function(e){this.dtTime+=e,this.dtTime<this.renderTime||(this.dtTime=0,this.updateView())},Object.defineProperty(t.prototype,"content",{get:function(){return this.scrollView.content},enumerable:!0,configurable:!0}),t.prototype.setParam=function(e){this.dataList=e,this.clearAllItem(),this.updateView()},t.prototype.setItemPrefab=function(e){this.clearNodePool(),this.itemPrefab=e,this.nodePool=new n.NodeReusePool("ListItem",this.itemPrefab||this.itemNode)},t.prototype.scrollTo=function(e,t){this.scrollView.scrollTo(cc.v2(e,t))},t.prototype.setItemScriptName=function(e){this.itemScriptName=e},t.prototype.setItemHeight=function(e){this.itemHeight=e},t.prototype.setSpacingY=function(e){this.spacingY=e},t.prototype.getItem=function(e){return this.itemMap[e]},t.prototype.isVertical=function(){return this.scrollView.vertical},t.prototype.isHorizontal=function(){return this.scrollView.horizontal},t.prototype.onScrollEvent=function(e,t){},t.prototype.onScrollIngHandler=function(e){},t.prototype.updateView=function(){if(o.Util.isNullOrUndefined(this.dataList))for(var e=this.content.children,t=0;t<e.length;t++){var i=e[t];i.active&&this.content.removeChild(i)}else if(!o.Util.isNullOrUndefined(this.nodePool))if(o.Util.isEmptyOrNullString(this.itemScriptName))cc.warn("cant find itemScriptName!!!");else{this.resizeContentSize();var n=this.getIndexsByPositon(),a=r.default.toKeyArray(this.itemMap);for(t=0;t<a.length;t++){var u=+a[t];if(!s.ArrayUtil.containsValue(n,u))(l=this.itemMap[u]).off(cc.Node.EventType.TOUCH_END,this.onItemTouch,this),l.removeFromParent(),this.nodePool.usingToUnused(l),delete this.itemMap[u]}for(t=0;t<n.length;t++){u=n[t];if(!s.ArrayUtil.containsValue(a,u+"")){var l=this.nodePool.unusedToUsing(),c=this.getItemPos(u);l.x=c.x,l.y=c.y,l.getComponent(this.itemScriptName).setParam(this.getChangItemInfo(u),u),this.content.addChild(l),this.addClickEventToButton(l,u)}}}},t.prototype.addClickEventToButton=function(e,t){this.isHasBtnClick?this.itemMap[t]=this.itemButtonName?e.getChildByName(this.itemButtonName):e:this.itemMap[t]=e,this.itemClickEvents.length>0&&this.itemMap[t].on(cc.Node.EventType.TOUCH_END,this.onItemTouch,this)},t.prototype.onItemTouch=function(e,t){var i=e.currentTarget,n=r.default.getValueKey(this.itemMap,i);cc.Component.EventHandler.emitEvents(this.itemClickEvents,e,n)},t.prototype.getIndexsByPositon=function(){var e=this.content.parent.getContentSize(),t=this.isVertical()?e.height:e.width,i=this.isVertical()?this.content.y:this.content.x,n=this.changCurrentArray(),a=0==n?0:(n-1)*this.spacingY,o=this.top+n*this.itemHeight+a+this.buttom,r=i-t/2-(this.itemHeight+this.spacingY)*this.renderCacheNum,s=(r=-(r=Math.max(this.top,r)))-t-(this.itemHeight+this.spacingY)*this.renderCacheNum*2;s=Math.max(-o,s);var u=this.changCurrentArray(),l=[];if(this.isHorizontal()){r=-i-t/2-(this.itemHeight+this.spacingY)*this.renderCacheNum,s=(r=Math.max(this.top,r))+t+(this.itemHeight+this.spacingY)*this.renderCacheNum*2,s=Math.min(o,s);for(var c=0;c<u;c++){(d=this.getItemRect(c)).topY>=r&&d.buttomY<=s&&l.push(c)}return l}for(c=0;c<u;c++){var d;(d=this.getItemRect(c)).topY<=r&&d.buttomY>=s&&l.push(c)}return l},t.prototype.resizeContentSize=function(){if(this.isHorizontal()){var e=0==(i=this.changCurrentArray())?0:(i-1)*this.spacingY,t=this.top+i*this.itemHeight+e+this.buttom;this.content.width=t}if(this.isVertical()){e=0==(i=this.changCurrentArray())?0:(i-1)*this.spacingY;var i,n=this.top+i*this.itemHeight+e+this.buttom;this.content.height=n}},t.prototype.getItemRect=function(e){var t=0,i=0;return i=(t=0==e?this.top:this.top+e*(this.itemHeight+this.spacingY))+this.itemHeight,this.isVertical()&&(t=-t,i=-i),{topY:t,buttomY:i}},t.prototype.getItemPos=function(e){var t=this.getItemRect(e),i=(t.topY+t.buttomY)/2,n=new cc.Vec2;return this.isHorizontal()?(n.x=i,n.y=0):(n.x=0,n.y=i),n},t.prototype.clearAllItem=function(e){void 0===e&&(e=!1);for(var t=r.default.toKeyArray(this.itemMap),i=0;i<t.length;i++){var n=+t[i],a=this.itemMap[n];a.off(cc.Node.EventType.TOUCH_END,this.onItemTouch,this),a.removeFromParent(e),e||this.nodePool.usingToUnused(a)}this.itemMap={}},t.prototype.clearNodePool=function(){o.Util.isNullOrUndefined(this.nodePool)||(this.nodePool.releaseNodes(),this.nodePool=null)},t.prototype.changCurrentArray=function(){return Math.ceil(this.dataList.length/this.itemChildNum)},t.prototype.getChangItemInfo=function(e){var t;if(this.itemChildNum<=1)t=this.dataList[e];else{t=[];for(var i=0;i<this.itemChildNum;i++)e*this.itemChildNum+i<this.dataList.length&&t.push(this.dataList[e*this.itemChildNum+i])}return t},__decorate([c([cc.Component.EventHandler])],t.prototype,"itemClickEvents",void 0),__decorate([c({type:cc.Prefab,tooltip:"Item\u6e32\u67d3\u9884\u5236"})],t.prototype,"itemPrefab",void 0),__decorate([c({type:cc.Node,tooltip:"Item\u6e32\u67d3\u6a21\u677f"})],t.prototype,"itemNode",void 0),__decorate([c({tooltip:"\u811a\u672c\u540d\u5b57"})],t.prototype,"itemScriptName",void 0),__decorate([c({tooltip:"Item\u9ad8\u5ea6"})],t.prototype,"itemHeight",void 0),__decorate([c({tooltip:"\u76f8\u90bb\u8282\u70b9Y\u8f74\u95f4\u9694"})],t.prototype,"spacingY",void 0),__decorate([c({tooltip:"\u9876\u90e8\u95f4\u9694"})],t.prototype,"top",void 0),__decorate([c({tooltip:"\u5e95\u90e8\u95f4\u9694"})],t.prototype,"buttom",void 0),__decorate([c({type:cc.ScrollView,tooltip:"scrollView"})],t.prototype,"scrollView",void 0),__decorate([c({tooltip:"\u7f13\u51b2\u6e32\u67d3\u4e2a\u6570"})],t.prototype,"renderCacheNum",void 0),__decorate([c({tooltip:"\u7f13\u51b2\u95f4\u9694\u65f6\u95f4 \u79d2"})],t.prototype,"renderTime",void 0),__decorate([c({tooltip:"item\u5b57\u8282\u70b9\u7684\u4e2a\u6570"})],t.prototype,"itemChildNum",void 0),__decorate([c({tooltip:"isHasBtnClick\u662f\u5426\u662f\u5b50\u8282\u70b9\u6309\u94ae\u9700\u8981\u70b9\u51fb, ture: item\u7684\u5b50\u8282\u70b9\u6309\u94ae\u70b9\u51fb\uff0cfalse\uff1aitem\u70b9\u51fb"})],t.prototype,"isHasBtnClick",void 0),__decorate([c({tooltip:"itemButtonName\u6309\u94ae\u540d\u5b57"})],t.prototype,"itemButtonName",void 0),t=__decorate([l,d("component/ListScrollScript")],t)}(cc.Component);i.default=f,cc._RF.pop()},{"../../core/utils/ArrayUtil":"ArrayUtil","../../core/utils/ComponentUtil":"ComponentUtil","../../core/utils/DictionaryUtil":"DictionaryUtil","../../core/utils/Util":"Util","./NodeResusePool":"NodeResusePool"}],LoginActivateConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5f8f4KlVx1Pt6aqiV/YRtq9","LoginActivateConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],LoginDayMailConfig:[function(e,t,i){"use strict";cc._RF.push(t,"cf22drXtQFI9Yjgqi5II/L7","LoginDayMailConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],LoginRewardsConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3689fScgqFEObpkTV8sZwfc","LoginRewardsConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],LongHunData:[function(e,t,i){"use strict";cc._RF.push(t,"97336fjxhZF5Jv+LojaLluI","LongHunData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../entity/SubRoles"),a=function(){function e(){this.level=0,this.stage=0,this.exp=0,this.state=0}return e.prototype.parser=function(e){this.stage=e.readInt(),this.level=e.readInt(),this.exp=e.readInt(),this.state=e.readByte()},e.getLongHunAllLevel=function(){for(var e=0,t=n.default.ins().subRolesLen,i=0;i<t;i++){e+=n.default.ins().getSubRoleByIndex(i).loongSoulData.level}return e},e}();i.default=a,cc._RF.pop()},{"../../entity/SubRoles":"SubRoles"}],LongHun:[function(e,t,i){"use strict";cc._RF.push(t,"a0c4an1Wg9Ku4d4dW5Skv33","LongHun"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../entity/SubRoles"),r=e("../../manager/GlobalConfig"),s=e("../../entity/Actor"),u=e("../bag/UserBag"),l=e("../heartmethod/model/HeartMethodRedPoint"),c=e("../hungu/HunguRedPoint"),d=e("../../../core/base/MessageCenter"),f=e("../../../core/base/ErrorLog"),p=function(e){function t(){var i=e.call(this)||this;return d.default.compile(t),i.sysId=a.PackageID.LoongSoul,i.regNetMsg(1,i.postDateUpdate),i.regNetMsg(2,i.postStageUpgrade),i.regNetMsg(3,i.postStageActive),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendUpGrade=function(e,t){var i=this.getBytes(1);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.prototype.postDateUpdate=function(e){var i=e.readShort(),n=e.readShort(),a=o.default.ins().getSubRoleByIndex(i),r=e.readInt(),s=e.readInt(),u=0;switch(n+1){case t.TYPE_LONG_HUN:u=a.loongSoulData.level==r?0:1,a.loongSoulData.level=r,a.loongSoulData.exp=s;break;case t.TYPE_HU_DUN:a.shieldData.level=r,a.shieldData.exp=s;break;case t.TYPE_XUE_YU:a.xueyuData.level=r,a.xueyuData.exp=s}return u},t.prototype.sendStageUpgrade=function(e,t){var i=this.getBytes(2);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.prototype.postStageUpgrade=function(e){var i=e.readShort(),n=e.readShort(),a=e.readInt(),r=o.default.ins().getSubRoleByIndex(i);switch(n+1){case t.TYPE_LONG_HUN:r.loongSoulData.stage=a;break;case t.TYPE_HU_DUN:r.shieldData.stage=a;break;case t.TYPE_XUE_YU:r.xueyuData.stage=a}},t.prototype.sendStageActive=function(e,t){var i=this.getBytes(3);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.prototype.postStageActive=function(e){var i=e.readShort(),n=e.readShort(),a=e.readByte(),r=o.default.ins().getSubRoleByIndex(i);switch(n+1){case t.TYPE_LONG_HUN:r.loongSoulData.state=a;break;case t.TYPE_HU_DUN:r.shieldData.state=a;break;case t.TYPE_XUE_YU:r.xueyuData.state=a}Activationtongyong.show(0,"\u9f99\u9b42","jlonghun_01_png")},t.prototype.canShowRedPointByType=function(e,i){var n=o.default.ins().getSubRoleByIndex(e);if(!n)return!1;var a=null,l=null,c=null;switch(i){case t.TYPE_LONG_HUN:if(0==n.loongSoulData.state){var d=r.default.LoongSoulBaseConfig.openlv;return!(s.default.level<d)}a=r.default.LoongSoulConfig[n.loongSoulData.level],l=r.default.LoongSoulConfig[n.loongSoulData.level+1],c=r.default.LoongSoulStageConfig[n.loongSoulData.stage],n.loongSoulData.exp;break;case t.TYPE_HU_DUN:a=r.default.ShieldConfig[n.shieldData.level],l=r.default.ShieldConfig[n.shieldData.level+1],c=r.default.ShieldStageConfig[n.shieldData.stage],n.shieldData.exp}if(!l)return!1;if(f.default.Assert(a&&c,"config or stageConfig is null"))return!1;var p=u.default.ins().getBagGoodsCountById(0,a.itemId);return void 0!=c.normalCostTip&&p>=c.normalCostTip},t.prototype.canShowRedPointInRole=function(e){for(var i=0,n=[t.TYPE_LONG_HUN];i<n.length;i++){var a=n[i];if(this.canShowRedPointByType(e,a))return!0}return!1},t.prototype.canShowRedPointInAll=function(){for(var e=0;e<3;e++)if(this.canShowRedPointInRole(e))return!0;return!!l.default.ins().redPoint||!!c.default.ins().redPoint},t.prototype.canUpgradeByType=function(e,i){var n=o.default.ins().getSubRoleByIndex(e);if(n){var a=null;switch(i){case t.TYPE_LONG_HUN:a=r.default.LoongSoulConfig[n.loongSoulData.level],r.default.LoongSoulStageConfig[n.loongSoulData.stage];break;case t.TYPE_HU_DUN:a=r.default.ShieldConfig[n.shieldData.level],r.default.ShieldStageConfig[n.shieldData.stage]}return u.default.ins().getBagGoodsCountById(0,a.itemId)>0}return!1},t.prototype.canUpgradeinAll=function(){for(var e=[t.TYPE_LONG_HUN,t.TYPE_HU_DUN,t.TYPE_XUE_YU],i=0;i<3;i++)for(var n=0,a=e;n<a.length;n++){var o=a[n];if(1==this.canUpgradeByType(i,o))return!0}return!1},t.prototype.canGradeupLoongSoul=function(e){for(var t=[!1,!1,!1],i=o.default.ins().subRolesLen,n=0;n<i;n++)t[n]=this.canShowRedPointInRole(n);return t},t.TYPE_LONG_HUN=2,t.TYPE_HU_DUN=3,t.TYPE_XUE_YU=4,t}(n.default);i.default=p,window.GameSystem.push(p.ins.bind(p)),cc._RF.pop()},{"../../../core/base/ErrorLog":"ErrorLog","../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../heartmethod/model/HeartMethodRedPoint":"HeartMethodRedPoint","../hungu/HunguRedPoint":"HunguRedPoint"}],LongTaiTouIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"84eecl2pnRAcp9vjmSrFg2t","LongTaiTouIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../bag/UserBag"),s=e("../../../consts/SystemConst"),u=e("../../opensystem/OpenSystem"),l=e("../../activity/model/ActivityDataFactory"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postYbChange,r.default.ins().postItemAdd,r.default.ins().postItemChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!u.default.ins().checkSysOpen(s.SystemType.LONGTAITOU))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==l.ActivityPageStyle.LONGTAITOU&&n.isOpenActivity()&&!n.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==l.ActivityPageStyle.LONGTAITOU&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(LongTaiTouWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=c,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../bag/UserBag":"UserBag","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],LoongSoulBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"29e5fa7eQ9NdKG7qBO8qXL9","LoongSoulBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.openlv=0}}();i.default=n,cc._RF.pop()},{}],LoongSoulConfig:[function(e,t,i){"use strict";cc._RF.push(t,"91f078msLVMGZvl8oj50yM6","LoongSoulConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],LoongSoulStageConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ad4f6+GRaxOob8leGiZ0YIS","LoongSoulStageConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.stage=0,this.icon="",this.normalCost=0,this.attr=[],this.normalCostTip=0}}();i.default=n,cc._RF.pop()},{}],LoopRechargeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4b972Qz4f5KNoeJ6QPGYbTv","LoopRechargeConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],LyMarkEffect:[function(e,t,i){"use strict";cc._RF.push(t,"13a48FQDyhCpYD5TzEk0ZnV","LyMarkEffect"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./LyMark"),a=e("../../../core/base/MessageCenter"),o=e("../../entity/Actor"),r=e("../../manager/TimerManager"),s=e("../../manager/GlobalConfig"),u=function(){function e(e){this._curTimes=0,this._isShowBall=!0,this._infoModel=e,a.default.ins().addListener(n.default.ins().postMarkData,this.dataChange,this),this.usedLyMarkSkill()}return e.prototype.dataChange=function(){this._infoModel&&this._infoModel.masterHandle==o.default.handle&&this.update()},e.prototype.usedLyMarkSkill=function(){this.resetBalls(),r.default.ins().removeAll(this);var e=this.getSkillLvById(1);if(e){var t=s.default.FlameStampEffect[1][e],i=(e=this.getSkillLvById(3))?s.default.FlameStampEffect[3][e].reloadTime:0,n=t.skillId,a=t.stamp;this.getSkillLvById(2)&&(e=this.getSkillLvById(2),n=s.default.FlameStampEffect[2][e].skillId,a=s.default.FlameStampEffect[2][e].stamp);var o=(s.default.SkillsDescConfig[s.default.SkillsConfig[n].desc].cd-i)/a>>0;r.default.ins().doTimer(o,a,this.doTimer,this),this._curTimes=0}},e.prototype.doTimer=function(){this._curTimes++,this.updateBalls(this._curTimes)},e.prototype.update=function(){for(var e,t,i=0,n=0,a=0;a<=6;a++)n=e=this.getSkillLvById(a+1),e||(e=1),t=s.default.FlameStampEffect[a+1][e],a+1!=1&&a+1!=2||!n||(i=t.stamp);this.updateBalls(i)},e.prototype.updateBalls=function(e){},e.prototype.resetBalls=function(){},e.prototype.getSkillLvById=function(e){var t=this._infoModel.masterHandle==o.default.handle?n.default.ins().skills:this._infoModel.lyMarkSkills;return!t||t.length<e?0:t[e-1]},e.prototype.getLyMarkLv=function(){return this._infoModel.masterHandle==o.default.handle?n.default.ins().lyMarkLv:this._infoModel.lyMarkLv},e.prototype.showBall=function(){this._isShowBall||(this._isShowBall=!0,this.updateBalls(this._curTimes))},e.prototype.hideBall=function(){this._isShowBall&&(this._isShowBall=!1,this.resetBalls())},e.prototype.destruct=function(){this.resetBalls(),r.default.ins().removeAll(this),this._infoModel=null,a.default.ins().removeAll(this)},e}();i.default=u,cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","./LyMark":"LyMark"}],LyMark:[function(e,t,i){"use strict";cc._RF.push(t,"6ff0fyUhQROJJz3qoDOHsRW","LyMark"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../manager/GlobalConfig"),r=e("./SpecialRing"),s=e("../bag/UserBag"),u=e("../../../core/base/ErrorLog"),l=e("../../../core/base/MessageCenter"),c=function(e){function t(){var i=e.call(this)||this;return i._lyMarkLv=0,i._lyMarkExp=0,i._isMax=!1,l.default.compile(t),i.sysId=a.PackageID.LyMark,i.regNetMsg(1,i.postMarkData),i.regNetMsg(2,i.postUpgrade),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},Object.defineProperty(t.prototype,"lyMarkLv",{get:function(){return this._lyMarkLv},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lyMarkExp",{get:function(){return this._lyMarkExp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"skills",{get:function(){return this._skills},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isMax",{get:function(){return this._isMax},enumerable:!0,configurable:!0}),t.prototype.getSkillLvById=function(e){return!this._skills||this._skills.length<e?0:this._skills[e-1]},t.prototype.postMarkData=function(e){this._lyMarkLv=e.readShort(),this._lyMarkExp=e.readInt();var t=e.readByte();this._skills=[],this._skills.length=t;for(var i=0;i<t;i++)this._skills[i]=e.readShort();this._isMax=this._lyMarkLv>=Object.keys(o.default.FlameStampLevel).length},t.prototype.postUpgrade=function(e){return[e.readByte()]},t.prototype.sendUpgrade=function(){this.sendBaseProto(2)},t.prototype.sendUpSkill=function(e){var t=this.getBytes(3);t.writeByte(e),this.sendToServer(t)},t.prototype.sendCompound=function(e){var t=this.getBytes(4);t.writeInt(e),this.sendToServer(t)},t.prototype.checkOpen=function(){if(!r.default.ins().isFireRingActivate())return!1;var e=r.default.ins().getSpecialRingDataById(r.default.FIRE_RING_ID);return!(!e||e.level<o.default.FlameStamp.openLevel)},t.prototype.checkRed=function(){if(!this.checkOpen())return!1;if(!t.ins().isMax){var e=o.default.FlameStampLevel[this.lyMarkLv];if(u.default.Assert(e,"LyMark lv:"+this.lyMarkLv+", exp:"+this.lyMarkExp))return!1;var i=(c=s.default.ins().getBagItemById(e.costItem))?c.count:0,n=e.exp-this._lyMarkExp;if(i>=e.costCount&&i*o.default.FlameStampMat[e.costItem].exp>=n)return!0}for(var a,r,l=0;l<=6;l++){if(0!=l)if(!((r=t.ins().getSkillLvById(l+1))>=Object.keys(o.default.FlameStampEffect[l+1]).length)&&(a=o.default.FlameStampEffect[l+1][r<=0?1:r+1]).costItem){var c;o.default.ItemConfig[a.costItem];if((i=(c=s.default.ins().getBagItemById(a.costItem))?c.count:0)>=a.costCount&&t.ins().lyMarkLv>=a.stampLevel)return!0}}return!1},t.prototype.getCurSkillID=function(){for(var e,t,i=0,n=0,a=0;a<=6;a++)n=e=this.getSkillLvById(a+1),e||(e=1),t=o.default.FlameStampEffect[a+1][e],a+1!=1&&a+1!=2||!n||(i=t.skillId);return i},t.prototype.getCurSkillCD=function(){var e=this.getCurSkillID(),t=this.getSkillLvById(3),i=t?o.default.FlameStampEffect[3][t].reloadTime:0;return o.default.SkillsDescConfig[o.default.SkillsConfig[e].desc].cd-i},t}(n.default);i.default=c,c.ins(),cc._RF.pop()},{"../../../core/base/ErrorLog":"ErrorLog","../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","./SpecialRing":"SpecialRing"}],MaBiIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"3f55eAQxFJMFJT14ua/Oyhv","MaBiIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../vip/UserVip"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postUpdateVipAwards],n.updateMessage=[o.default.ins().postUpdataExp],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return r.default.ins().checkSysOpen(s.SystemType.MABI)&&!(o.default.ins().state>>2&1)},t.prototype.checkShowRedPoint=function(){return o.default.ins().lv>=3?1:0},t.prototype.getEffName=function(e){if(this.firstTap)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){this.firstTap=!1,this.update(),ViewManager.ins().open(Vip3MWin,3)},t}(n.default);i.default=u,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../opensystem/OpenSystem":"OpenSystem","../../vip/UserVip":"UserVip","./RuleIconBase":"RuleIconBase"}],MailData:[function(e,t,i){"use strict";cc._RF.push(t,"8df4bsf6TpJtKiMco2iIlHh","MailData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../activity/model/RewardData"),a=function(){function e(){}return e.prototype.parser=function(e){this.disposeData(e),this.item=[],this.text=e.readString();for(var t=e.readInt(),i=0;i<t;i++){var a=new n.default;a.parser(e),this.item.push(a)}},e.prototype.disposeData=function(e){this.handle=e.readInt(),this.title=e.readString(),this.times=e.readInt(),this.type=e.readInt(),this.receive=e.readInt()},e}();i.default=a,cc._RF.pop()},{"../activity/model/RewardData":"RewardData"}],MailIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"1d80bYDRYlKA4f5dWZbdTEn","MailIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../mail/UserMail"),o=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postMailData,a.default.ins().postGetItemFromMail,a.default.ins().postMailDetail],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return!(a.default.ins().getUnreadMail()<=0)},t.prototype.checkShowRedPoint=function(){return a.default.ins().mailData?1:0},t.prototype.tapExecute=function(){ViewManager.ins().open(FriendBgWin,4)},t}(n.default);i.default=o,cc._RF.pop()},{"../../mail/UserMail":"UserMail","./RuleIconBase":"RuleIconBase"}],MailIdConfig:[function(e,t,i){"use strict";cc._RF.push(t,"332fc19WQ9NU72e8hd+Npfn","MailIdConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],MainScene:[function(e,t,i){"use strict";cc._RF.push(t,"2361alOLqhFNLJaw7v9+9JO","MainScene"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./core/base/ViewManager"),a=e("./game/module/gamescene/view/ui/UIView2"),o=e("./game/module/gamescene/view/GameSceneView"),r=cc._decorator,s=r.ccclass,u=r.property,l=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.Game_Bg=null,t.Game_Main=null,t.Main_View=null,t.UI_Main=null,t.UI_Main2=null,t.UI_Popup=null,t.UI_Message=null,t.UI_Tips=null,t}var i;return __extends(t,e),i=t,t.prototype.start=function(){i.inst=this,n.default.ins().open(o.default),n.default.ins().open(a.default)},t.inst=null,__decorate([u({type:cc.Node,displayName:"\u6e38\u620f\u80cc\u666f\u5c42"})],t.prototype,"Game_Bg",void 0),__decorate([u({type:cc.Node,displayName:"\u4e3b\u6e38\u620f\u5c42"})],t.prototype,"Game_Main",void 0),__decorate([u({type:cc.Node,displayName:"\u6e38\u620f\u4e3b\u754c\u9762"})],t.prototype,"Main_View",void 0),__decorate([u({type:cc.Node,displayName:"UI\u4e3b\u754c\u9762\u529f\u80fd\u5f39\u7a97"})],t.prototype,"UI_Main",void 0),__decorate([u({type:cc.Node,displayName:"UI\u4e3b\u754c\u97622"})],t.prototype,"UI_Main2",void 0),__decorate([u({type:cc.Node,displayName:"UI\u5f39\u51fa\u6846\u5c42"})],t.prototype,"UI_Popup",void 0),__decorate([u({type:cc.Node,displayName:"UI\u8b66\u544a\u6d88\u606f\u5c42"})],t.prototype,"UI_Message",void 0),__decorate([u({type:cc.Node,displayName:"UI_Tips"})],t.prototype,"UI_Tips",void 0),t=i=__decorate([s],t)}(cc.Component);i.default=l,cc._RF.pop()},{"./core/base/ViewManager":"ViewManager","./game/module/gamescene/view/GameSceneView":"GameSceneView","./game/module/gamescene/view/ui/UIView2":"UIView2"}],MallIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"b450c/Wz8VD16szf4UAOZDn","MallIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../fb/UserFb"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=e("../../shop/view/ShopRedPoint"),l=function(e){function t(t,i){void 0===i&&(i=null);var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postGuanqiaInfo,o.default.ins().postGuanKaIdChange],n.updateMessage=[u.default.ins().postShopRedPoint],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return r.default.ins().checkSysOpen(s.SystemType.MALL)},t.prototype.checkShowRedPoint=function(){return u.default.ins().shopRedPoint||!u.default.ins().nfirstLogin?1:0},t.prototype.tapExecute=function(){ViewManager.ins().open(ShopWin),u.default.ins().nfirstLogin=!0,this.update()},t}(n.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../fb/UserFb":"UserFb","../../opensystem/OpenSystem":"OpenSystem","../../shop/view/ShopRedPoint":"ShopRedPoint","./RuleIconBase":"RuleIconBase"}],MapGridNode:[function(e,t,i){"use strict";cc._RF.push(t,"cf875/B5ABLYp+Gj9iIN+V6","MapGridNode"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return Object.defineProperty(e.prototype,"hidden",{get:function(){return(2&this.flags)>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"walkable",{get:function(){return(1&this.flags)>0},enumerable:!0,configurable:!0}),e.FLAG_WALKABLE=32768,e.FLAG_HIDDEN=16384,e}();i.default=n,cc._RF.pop()},{}],MapGrid:[function(e,t,i){"use strict";cc._RF.push(t,"eb0c2s0kfJCebiuZKSixcxs","MapGrid"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./MapGridNode"),a=function(e){function t(){var t=e.call(this)||this;return t._poolNodes=[],t}return __extends(t,e),Object.defineProperty(t.prototype,"numCols",{get:function(){return this._numCols},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numRows",{get:function(){return this._numRows},enumerable:!0,configurable:!0}),t.prototype.getNode=function(e,t){return this._nodes[e]?this._nodes[e][t]:void 0},t.prototype.isWalkableTile=function(e,t){return!(e<0||e>=this._numCols||t<0||t>=this._numRows)&&this._nodes[e][t].walkable},t.prototype.destruct=function(){this.clearNodes()},t.prototype.initMapInfo=function(e,t){var i;this._nodes&&this.clearNodes(),this._numRows=e.maxY,this._numCols=e.maxX,this._nodes=[];for(var n=0;n<this._numCols;n++){this._nodes[n]=[];for(var a=0;a<this._numRows;a++)(i=this.getGridNode()).flags=e.grids[n*this._numRows+a],this._nodes[n][a]=i}t&&this._nodes.reverse()},t.prototype.clearNodes=function(){for(var e in this._nodes)this._poolNodes=this._poolNodes.concat(this._nodes[e]),this._nodes[e].length=0;this._nodes.length=0},t.prototype.getGridNode=function(){return this._poolNodes.pop()||new n.default},t.prototype._trace=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];null!=this.debugTrace&&this.debugTrace.apply(null,e)},t}(cc.Sprite);i.default=a,cc._RF.pop()},{"./MapGridNode":"MapGridNode"}],MapInfo:[function(e,t,i){"use strict";cc._RF.push(t,"85b5aNpLzVC5reuxBqGh25b","MapInfo"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],MapType:[function(e,t,i){"use strict";var n;cc._RF.push(t,"102a9drzpFNBq5gRtCYYjKX","MapType"),function(e){e[e.chapterMap=0]="chapterMap",e[e.bigMap=1]="bigMap"}(n||(n={})),cc._RF.pop()},{}],MapView:[function(e,t,i){"use strict";cc._RF.push(t,"a1eb8PtAsxFS5tPVI5Dx+ZW","MapView"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./GameMap"),a=e("../../core/base/MessageCenter"),o=e("../module/gamescene/GameLogic"),r=e("../Utils/EgretUtils"),s=e("../entity/CharRole"),u=e("../module/gamescene/const/EntityAction"),l=e("../../core/utils/DirUtil"),c=e("../base/EntityManager"),d=cc._decorator,f=d.ccclass,p=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.entityLayer=null,t.moveObjDic={},t}var i;return __extends(t,e),i=t,t.prototype.start=function(){r.default.startTick(this.onEnterFrame,this),this._stepIndex={}},t.prototype.onEnterFrame=function(e){for(var t in this.moveObjDic){this.moveObjDic[t].entity.canMove?this.moveObj(this.moveObjDic[t],r.default.getTimer()):delete this.moveObjDic[t]}return!1},t.prototype.moveObj=function(e,t){var i=e.entity;if(t>=e.total)i.x=e.endPoint.x,i.y=e.endPoint.y,this.onChange(e),this.onComplete(e);else{var n=t-e.time,a=e.vec.x*n,o=e.vec.y*n;e.time=t,i.x+=a,i.y+=o,this.onChange(e)}},t.prototype.onChange=function(e){var t=e.entity;n.default.point2Grip(t.x),n.default.point2Grip(t.y);e.isMainRole&&this.lookAt(t.x,t.y)},t.prototype.onComplete=function(e){var t=e.entity.hashCode;this._stepIndex[t]--,this._stepIndex[t]<0&&delete this.moveObjDic[t],this.moveNextStep(e.entity,e.path,e.isGrid)},t.prototype.addEntity=function(e){this.entityLayer.addChild(e)},t.prototype.changeMap=function(){this.entityLayer.width=n.default.MAX_WIDTH,this.entityLayer.height=n.default.MAX_HEIGHT,this.addEvent(),this.lookAt(n.default.mapX,n.default.mapY,!0)},t.prototype.addEvent=function(){var e=this;a.default.ins().removeAll(this),a.default.ins().addListener(o.default.ins().postMoveEntity,this.moveEntity,this),a.default.ins().addListener(o.default.ins().postMoveCamera,function(t){var i=t[0],a=t[1],o=t[2],r=t[3];o==n.default.mapID&&r==n.default.fubenID&&e.lookAt(i,a)},this),a.default.ins().addListener(o.default.ins().postAdjustMapPos,this.adjustMapPos,this)},t.prototype.adjustMapPos=function(){this.node.x=this.node.x>>0,this.node.y=this.node.y>>0},t.prototype.moveEntity=function(e){var t=e[0],i=e[1],n=void 0==e[2]||!!e[2];i&&i.length?(this._stepIndex[t.hashCode]=i.length-1,this.moveNextStep(t,i,n)):t.playAction(u.EntityAction.STAND)},t.prototype.lookAt=function(e,t,i){void 0===i&&(i=!1);var a=this.minValue;this.node.x=a(e*this.node.scaleX,580,n.default.MAX_WIDTH),this.node.y=a(t*this.node.scaleY,930,n.default.MAX_HEIGHT,60),this.node.x=this.node.x-290,this.node.y=465-this.node.y},t.prototype.minValue=function(e,t,i,n){return void 0===n&&(n=0),-Math.min(Math.max(e-n-(t>>1),0),i-t)},t.prototype.moveNextStep=function(e,t,a){if(void 0===a&&(a=!0),e.stopMove(),e.action!=u.EntityAction.DIE){if(this._stepIndex[e.hashCode]<0)return delete this._stepIndex[e.hashCode],e.playAction(u.EntityAction.STAND),void i.moveComplete(e);var o=t[this._stepIndex[e.hashCode]],r={x:0,y:0},c=o.nDir;a?(r.x=n.default.grip2Point(o.nX),r.y=n.default.grip2Point(o.nY)):(r.x=o.nX,r.y=o.nY),c=e instanceof s.default||2!=e.infoModel.dirNum?l.default.get8DirBy2Point(e,r):l.default.get4DirBy2Point(e,r),e.dir=c,e.playAction(u.EntityAction.RUN),this.moveToPoint(e,r,t,a)}},t.prototype.moveToPoint=function(e,t,i,n){var a=r.default.getTimer(),o=this.moveObjDic[e.hashCode],s=0;o&&a>o.total&&(s=o.total-a),e.canMove=!0;var u={x:t.x-e.x,y:t.y-e.y},l=e.moveSpeed/1e3,d=Math.sqrt(u.x*u.x+u.y*u.y),f=e==c.default.ins().getNoDieRole(),p=d/l;u.x=u.x/p,u.y=u.y/p;var h={entity:e,endPoint:t,vec:u,path:i,isGrid:n,time:a+s,total:a+p+s,isMainRole:f};this.moveObjDic[e.hashCode]=h,s<0&&this.moveObj(h,a)},t.moveComplete=function(e){return e},__decorate([p({type:cc.Node,displayName:"\u5b9e\u4f53\u5c42"})],t.prototype,"entityLayer",void 0),__decorate([a.post],t,"moveComplete",null),t=i=__decorate([f],t)}(cc.Component);i.default=h,cc._RF.pop()},{"../../core/base/MessageCenter":"MessageCenter","../../core/utils/DirUtil":"DirUtil","../Utils/EgretUtils":"EgretUtils","../base/EntityManager":"EntityManager","../entity/CharRole":"CharRole","../module/gamescene/GameLogic":"GameLogic","../module/gamescene/const/EntityAction":"EntityAction","./GameMap":"GameMap"}],MathUtils:[function(e,t,i){"use strict";cc._RF.push(t,"8a260W6mIRM3aFUQJH6Yrd0","MathUtils"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.getAngle=function(e){return 180*e/Math.PI},e.getRadian=function(e){return e/180*Math.PI},e.getRadian2=function(e,t,i,n){var a=i-e,o=n-t;return Math.atan2(o,a)},e.getDistance=function(e,t,i,n){var a=i-e,o=n-t,r=a*a+o*o;return Math.sqrt(r)},e.getDistanceByObject=function(e,t){return this.getDistance(e.x,e.y,t.x,t.y)},e.getDistanceX2ByObject=function(e,t){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n},e.getDirMove=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0);var a=this.getRadian(e),o={x:0,y:0};return o.x=Math.cos(a)*t+i,o.y=Math.sin(a)*t+n,o},e.limitFloat=function(e,t){return e+Math.random()*(t-e)},e.limit=function(e,t){e=Math.min(e,t);var i=(t=Math.max(e,t))-e;return e+Math.random()*i},e.limitInteger=function(e,t){return Math.round(this.limit(e,t))},e.randomArray=function(e){return e[Math.floor(Math.random()*e.length)]},e.toInteger=function(e){return e>>0},e}();i.default=n,cc._RF.pop()},{}],MedalShopItemRenderer:[function(e,t,i){"use strict";cc._RF.push(t,"ca8d8Hs+KJNro/kajSdIdbi","MedalShopItemRenderer"),cc._RF.pop()},{}],MedalShopPanel:[function(e,t,i){"use strict";cc._RF.push(t,"a345c+xHvxEc4eBmxhvF08K","MedalShopPanel"),cc._RF.pop()},{}],MergeCC:[function(e,t,i){"use strict";cc._RF.push(t,"5c38cY5HGVIVZyMJMYRxwXH","MergeCC"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../../base/BaseSystem"),o=e("../../samsara/data/SamsaraModel"),r=e("../../zhanling/model/ZhanLingModel"),s=e("../../../manager/GlobalConfig"),u=e("../../rune/Rune"),l=e("../../../entity/Actor"),c=e("../../zs/UserZs"),d=e("../../bag/UserBag"),f=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.isOpen=function(){return o.default.ins().isOpen()||r.default.ins().ZhanLingOpen()||u.default.ins().isOpen()},t.prototype.redPoint=function(){var e=!1;return o.default.ins().isOpen()&&(e=o.default.ins().isCanCompose()),!e&&r.default.ins().ZhanLingOpen()&&(e=this.isZlCanMerge()),!e&&u.default.ins().isOpen()&&(e=u.default.ins().isRuneCanMerge()),e},t.prototype.getMergeMenu=function(){var e=s.default.MergeTotal,t=l.default.level,i=c.default.ins().lv,a=[];for(var u in e)e[u].type==n.SamsareEquip?o.default.ins().isOpen()&&a.push(e[u]):e[u].type==n.ZhanlingEquip?r.default.ins().ZhanLingOpen()&&a.push(e[u]):(e[u].openZs||0)<=i&&(e[u].openLv||0)<=t&&a.push(e[u]);return a.sort(this.sortMenu),a},t.prototype.getMergeSecMenu=function(e){var t=s.default.MergeConfig[e],i=l.default.level,n=c.default.ins().lv,a=[];for(var o in t)(t[o].openZs||0)<=n&&(t[o].openLv||0)<=i&&a.push(t[o]);return a.sort(this.sortMenu),a},t.prototype.sortMenu=function(e,t){return e.sort<t.sort?-1:e.sort>t.sort?1:0},t.prototype.getListData=function(e,t){var i=s.default.MergeTotal[e],a=s.default.MergeConfig[e][t];return i.type==n.SamsareEquip?o.default.ins().composeEquipMap[a.lv][a.openZs]:i.type==n.ZhanlingEquip?this.getZlMergeEquipByLv(a.lv):i.type==n.Rune?u.default.ins().getRuneMergeEquipByLv(a.lv):[]},t.prototype.isCanMergeById=function(e){var t=!1;switch(s.default.MergeTotal[e].type){case n.SamsareEquip:t=o.default.ins().isCanTypeCompose(e);break;case n.ZhanlingEquip:t=this.isZlCanMerge();break;case n.Rune:t=u.default.ins().isRuneCanMerge()}return t},t.prototype.isCanMergeByIndex=function(e,t){var i=!1;switch(s.default.MergeTotal[e].type){case n.SamsareEquip:i=o.default.ins().isCanZsLvCompose(s.default.MergeConfig[e][t].lv,s.default.MergeConfig[e][t].openZs);break;case n.ZhanlingEquip:i=this.isZlCanMergeByIndex(e,t);break;case n.Rune:i=u.default.ins().isRuneCanMergeByType(t)}return i},t.prototype.getCanMergeTargetId=function(e,t){var i=0;switch(s.default.MergeTotal[e].type){case n.SamsareEquip:var a=s.default.MergeConfig[e][t];i=o.default.ins().getComposeEquipId(a.lv,a.openZs);break;case n.ZhanlingEquip:i=this.getZlCanMergeTargetId(e,t)}return i},t.prototype.isCanMergeTargetId=function(e,t){if(e==n.SamsareEquip){var i=s.default.ReincarnateEquipCompose[t];return o.default.ins().isCanEquipCompose(i.material.id)}return e==n.ZhanlingEquip?this.isZlEquipIdCanMerge(t):e==n.Rune&&u.default.ins().isRuneCanMergeByID(t)},t.prototype.getZlMergeEquipByLv=function(e){if(!this._zlMergeEquip){this._zlMergeEquip={};var t=s.default.ZhanLingEquip;for(var i in t)this._zlMergeEquip[t[i].level]||(this._zlMergeEquip[t[i].level]=[]),this._zlMergeEquip[t[i].level].push({type:n.ZhanlingEquip,id:t[i].id})}return this._zlMergeEquip[e+1]},t.prototype.getZlCanMergeTargetId=function(e,t){for(var i=s.default.MergeConfig[e][t].lv,n=0,a=this.getZlMergeEquipByLv(i);n<a.length;n++){var o=a[n];if(this.isZlEquipIdCanMerge(o.id))return o.id}return 0},t.prototype.isZlCanMerge=function(){var e=s.default.ZhanLingEquip;for(var t in e)if(this.isZlEquipIdCanMerge(t))return!0;return!1},t.prototype.isZlCanMergeByIndex=function(e,t){return!!this.getZlCanMergeTargetId(e,t)},t.prototype.isZlEquipIdCanMerge=function(e){var t=s.default.ZhanLingEquip[e].mat;if(t&&d.default.ins().getBagGoodsCountById(d.default.BAG_TYPE_OTHTER,t[0].id)+this.getZlHadEquipCount(t[0].id)>=t[0].count)return!0;return!1},t.prototype.getZlHadEquipCount=function(e){var t=s.default.ZhanLingEquip[e];return r.default.ins().getZhanLingDataByItem(0,t.pos)==e?1:0},t}(a.default);i.MergeCC=f,function(e){e[e.SamsareEquip=1]="SamsareEquip",e[e.ZhanlingEquip=2]="ZhanlingEquip",e[e.Rune=3]="Rune"}(n=i.MergeType||(i.MergeType={})),window.GameSystem.push(f.ins.bind(f)),cc._RF.pop()},{"../../../base/BaseSystem":"BaseSystem","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../rune/Rune":"Rune","../../samsara/data/SamsaraModel":"SamsaraModel","../../zhanling/model/ZhanLingModel":"ZhanLingModel","../../zs/UserZs":"UserZs"}],MergeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ad4f1dw8MtKwK+5L/QcdAfM","MergeConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],MergeTotal:[function(e,t,i){"use strict";cc._RF.push(t,"2fbc8Uv709IwpdFlPtrPD8/","MergeTotal"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],MessageCenter:[function(e,t,i){"use strict";cc._RF.push(t,"45e2b2pnNhBjqlbIeaTxL8B","MessageCenter"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./BaseClass"),a=e("../../game/Utils/EgretUtils"),o=e("../../game/base/ObjectPool"),r=e("../../game/Utils/EgretUtils"),s=function(e){function t(){var t=e.call(this)||this;return t.dict={},t.flag=0,t.dict={},t.eVec=[],r.default.startTick(t.update,t),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.update=function(){this.eVec.length>0&&this.dealMsg(this.eVec.shift())},t.prototype.dealMsg=function(e){var t=this.dict[e.type];if(t&&0!=t.length){this.flag++;for(var i=0,n=t;i<n.length;i++){var a=n[i];a[0].apply(a[1],e.param)}this.flag--,e.dispose(),o.default.push(e)}},t.compile=function(e,i){void 0===i&&(i="post");var n=e.prototype;for(var a in n)t.setFunction(!0,n,a,i)},t.setFunction=function(e,i,n,o){if(0==n.indexOf(o)&&"function"==typeof i[n]){var r=a.default.getQualifiedClassName(i)+"."+n+t.msgIndex;t.msgIndex+=1;var s=i[n],u=function(){for(var i=[],n=0;n<arguments.length;n++)i[n]=arguments[n];var a;i.length;return("boolean"!=typeof(a=e?s.call.apply(s,[this].concat(i)):s.apply(void 0,i))||a)&&t.ins().dispatch(r,a),a};return u.funcallname=r,i[n]=u,!0}return!1},t.prototype.dispatch=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=o.default.shift(u);n.type=e,n.param=t,this.eVec.push(n)},t.prototype.removeAll=function(e){for(var t=0,i=Object.keys(this.dict);t<i.length;t++){var n=i[t],a=this.dict[n];0!=this.flag&&(this.dict[n]=a=a.concat());for(var o=a.length-1;o>=0;o--)a[o][1]==e&&a.splice(o,1);0==a.length&&(this.dict[n]=null,delete this.dict[n])}},t.prototype.removeListener=function(e,t,i){var n=this.dict[e];if(n){0!=this.flag&&(this.dict[e]=n=n.concat());for(var a=n.length,o=0;o<a;o++)if(n[o][0]==t&&n[o][1]==i){n.splice(o,1);break}0==n.length&&(this.dict[e]=null,delete this.dict[e])}},t.prototype.addListener=function(e,t,i){var n=e.funcallname;if(n){var a=this.dict[n];a?0!=this.flag&&(this.dict[n]=a=a.concat()):this.dict[n]=a=[];for(var o=0,r=a;o<r.length;o++){var s=r[o];if(s[0]==t&&s[1]==t)return}a.push([t,i])}else console.error("\u672a\u7f16\u8bd1\u7684\u51fd\u6570",e)},t.msgIndex=0,t}(n.default);i.default=s;var u=function(){function e(){}return e.prototype.dispose=function(){this.type=null,this.param=null},e}();i.callDelay=function(e){return function(t,i,n){var a=n.value,o="$isDelay"+i,r=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this[o]=!1,a.call.apply(a,[this].concat(e))};return n.value=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this[o]||(this[o]=!0,setTimeout.apply(void 0,[r,this,e].concat(t)))},n}},i.post=function(e,t,i){var n=i.value,a=e.constructor.name+"."+t,o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=n.call.apply(n,[this].concat(e));return("boolean"!=typeof i||i)&&s.ins().dispatch(a,i),i};return o.funcallname=a,i.value=o,i},i.callLater=function(e,t,i){var n=i.value,a="$"+t+"CL",o=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];delete this[a],n.call.apply(n,[this].concat(e))};return i.value=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this[a]||(egret.callLater.apply(egret,[o,this].concat(e)),this[a]=!0)},i},cc._RF.pop()},{"../../game/Utils/EgretUtils":"EgretUtils","../../game/base/ObjectPool":"ObjectPool","./BaseClass":"BaseClass"}],MiJiGridConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d878elbWfpEWpGRX+R5tjRk","MiJiGridConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],MiJiSkillConfig:[function(e,t,i){"use strict";cc._RF.push(t,"57ca2HbWB1ONKv4MAGBLu5U","MiJiSkillConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../manager/GlobalConfig"),a=function(){function e(){}return e.getSkillIDByItem=function(e){var t=n.default.MiJiSkillConfig;for(var i in t)if(t[i].item==e)return t[i].id;return-1},e}();i.default=a,cc._RF.pop()},{"../manager/GlobalConfig":"GlobalConfig"}],MiJiTujianWin:[function(e,t,i){"use strict";cc._RF.push(t,"1f243W8IklGk7SJnLSptrj/","MiJiTujianWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../enum/LayerManager"),a=e("../../../../core/base/ViewManager"),o=e("../../../manager/GlobalConfig"),r=e("../../../config/ItemConfig");(function(e){function t(){var t=e.call(this)||this;return t.parentRoot=n.LayerManager.UI_Main,t}__extends(t,e),t.prototype.initUI=function(){this.mijiList.itemRenderer=ItemBaseNoTap,this.isTopLevel=!0},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.closeBtn,this.onTap),this.mijiList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.addTouchEvent(this.mijiOpen,this.onTap),this.updateData()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this.closeBtn,this.onTap),this.mijiList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.removeTouchEvent(this.mijiOpen,this.onTap)},t.prototype.updateData=function(){this.mijiOpen.textFlow=(new egret.HtmlTextParser).parser("<font><u>\u901a\u8fc7\u738b\u8005\u4e89\u9738\u73a9\u6cd5\u83b7\u5f97</u></font>");for(var e=[],t=0,i=o.default.ItemConfig;t<i.length;t++){var n=i[t];2==r.default.getType(n)&&e.push(n.id)}this.mijiList.dataProvider=new eui.ArrayCollection(e),e.length&&(this.setData(e[0]),this.mijiList.selectedIndex=0)},t.prototype.onItemTap=function(e){var t=this.mijiList.dataProvider.getItemAt(e.itemIndex);this.setData(t)},t.prototype.setData=function(e){var t=o.default.ItemConfig[e];this.mijiIcon.setData(t);var i=r.default.getQualityColor(t).toString(16);this.info.textFlow=(new egret.HtmlTextParser).parser("<font color='#"+i+"'>"+t.name+"</font>\n"+t.desc),this.mijiIcon.visible=!0;for(var n=10,a=0,s=o.default.MiJiSkillConfig;a<s.length;a++){var u=s[a];u.item==e&&(n=u.id)}this.power.text="\u8bc4\u5206\uff1a"+o.default.MiJiSkillConfig[n].power},t.prototype.onTap=function(e){switch(e.currentTarget){case this.closeBtn:a.default.ins().close(this);break;case this.mijiOpen:a.default.ins().close(this),UserWarn.ins().setBuyGoodsWarn(200099,1)}}})(e("../../../../core/view/BaseEuiView").default);cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../config/ItemConfig":"ItemConfig","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig"}],MijiBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5eeccFOiL9LdaAa1Z3v4Eqe","MijiBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],MijiData:[function(e,t,i){"use strict";cc._RF.push(t,"6284bJmBPtOy4+J96B6PV3k","MijiData");cc._RF.pop()},{}],MijiLearnItemRenderer:[function(e,t,i){"use strict";cc._RF.push(t,"0a5adB9cAtMtp8CT+ED39Yd","MijiLearnItemRenderer"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){var t=e.call(this)||this;return t.skinName="MijiLearnItemSkin",t}return __extends(t,e),t.prototype.dataChanged=function(){var e=this.data;this.item.data=e.item,e.isLock?(this.label.visible=!0,this.label.text="\u5df2\u9501"):e.islearn?(this.label.visible=!0,this.label.text="\u5df2\u5b66"):this.label.visible=!1},t}(e("../../../../core/view/BaseItemRender").default);i.MijiLearnItemRenderer=n,cc._RF.pop()},{"../../../../core/view/BaseItemRender":"BaseItemRender"}],MijiLearnWin:[function(e,t,i){"use strict";cc._RF.push(t,"28e8bU3qoRBpbwvJXEzVAwp","MijiLearnWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/ViewManager"),a=e("../../../manager/GlobalConfig"),o=e("../UserMiji"),r=e("../../tips/UserTips"),s=e("../../../enum/LayerManager"),u=e("../../../config/MiJiSkillConfig"),l=e("../../../../core/utils/TextFlowMaker"),c=e("../../../config/ItemConfig"),d=e("../../bag/UserBag"),f=e("./MijiLearnItemRenderer");(function(e){function t(){var t=e.call(this)||this;return t.parentRoot=s.LayerManager.UI_Main,t.skinName="MijiLearnSkin",t}__extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.itemList.itemRenderer=f.MijiLearnItemRenderer,this.itemScroller.viewport=this.itemList,this.isTopLevel=!0,this.link.textFlow=(new egret.HtmlTextParser).parser("<u>\u83b7\u5f97\u9014\u5f84</u>")},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.roleIndex=e[0],this.addTouchEvent(this.closeBtn,this.onTap),this.addTouchEvent(this.closeBtn0,this.onTap),this.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.addTouchEvent(this.smeltBtn,this.onTap),this.addTouchEvent(this.link,this.onTap),this.observe(d.default.ins().postItemAdd,this.updateItem),this.observe(d.default.ins().postItemDel,this.updateItem),this.observe(d.default.ins().postItemChange,this.updateItem),this.clearData(),this.updateItem(!0)},t.prototype.sortFun=function(e,t){var i=o.UserMiji.ins(),n=u.default.getSkillIDByItem(e.configID),a=u.default.getSkillIDByItem(t.configID);return 1==i.hasSpecificSkillOfRole(this.roleIndex,n)?1:1==i.hasSpecificSkillOfRole(this.roleIndex,a)?-1:e.configID<t.configID?-1:e.configID>t.configID?1:0},t.prototype.updateItem=function(e){void 0===e&&(e=!1);var t=d.default.ins().getBagGoodsByType(2);t.sort(this.sortFun.bind(this));for(var i=[],n=0;n<t.length;n++){var a=u.default.getSkillIDByItem(t[n].configID),r=new Object;r.islearn=o.UserMiji.ins().hasSpecificSkillOfRole(this.roleIndex,a),r.isLock=o.UserMiji.ins().mijiIsLock(this.roleIndex,a),r.item=t[n],i.push(r)}this.itemList.dataProvider=new eui.ArrayCollection(i),e&&t.length&&(this.setData(t[0]),this.itemList.selectedIndex=0)},t.prototype.setData=function(e){this.mijiLearnIcon.data=u.default.getSkillIDByItem(e.configID);var t=c.default.getQualityColor(e.itemConfig).toString(16);this.mijiName.textFlow=(new egret.HtmlTextParser).parser("<font color='#"+t+"'>"+e.itemConfig.name+"</font>"),this.info.textFlow=l.default.generateTextFlow1(e.itemConfig.desc),this.mijiLearnIcon.visible=!0;var i=u.default.getSkillIDByItem(e.configID),n=o.UserMiji.ins().hasSpecificSkillOfRole(this.roleIndex,i);this.smeltBtn.enabled=!n,o.UserMiji.ins().mijiIsLock(this.roleIndex,i)?(this.smeltBtn.label="\u5df2\u52a0\u9501",this.smeltBtn.enabled=!1):this.smeltBtn.label=n?"\u5df2\u5b66\u4e60":"\u653e \u5165",this.curName=e.itemConfig.name},t.prototype.clearData=function(){this.itemList.selectedIndex=-1,this.mijiLearnIcon.visible=!1,this.mijiLearnIcon.data=null,this.info.text="",this.curName="",this.mijiName.text=""},t.prototype.onItemTap=function(e){var t=this.itemList.dataProvider.getItemAt(e.itemIndex);this.setData(t.item)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.closeBtn:case this.closeBtn0:n.default.ins().close(this);break;case this.smeltBtn:if(this.mijiLearnIcon.data<=0)return void r.default.ins().showTips("\u8bf7\u9009\u62e9\u6280\u80fd\uff01");this.mijiLearnIcon.data;this.mijiLearnIcon.data-1;a.default.ItemConfig[a.default.MiJiSkillConfig[this.mijiLearnIcon.data].item].name;o.UserMiji.ins().postSelectedMiji(this.mijiLearnIcon.data,this.curName),this.clearData(),n.default.ins().close(this);break;case this.link:n.default.ins().close(this),UserWarn.ins().setBuyGoodsWarn(200099,1)}},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this.closeBtn,this.onTap),this.removeTouchEvent(this.closeBtn0,this.onTap),this.itemList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.removeTouchEvent(this.smeltBtn,this.onTap),this.removeTouchEvent(this.link,this.onTap),this.removeObserve()}})(e("../../../../core/view/BaseEuiView").default);cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/TextFlowMaker":"TextFlowMaker","../../../../core/view/BaseEuiView":"BaseEuiView","../../../config/ItemConfig":"ItemConfig","../../../config/MiJiSkillConfig":"MiJiSkillConfig","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../tips/UserTips":"UserTips","../UserMiji":"UserMiji","./MijiLearnItemRenderer":"MijiLearnItemRenderer"}],MijiLockWin:[function(e,t,i){"use strict";cc._RF.push(t,"8bd86PHDFtHVZecePcvZ/Et","MijiLockWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../enum/LayerManager"),a=e("../../../../core/base/ViewManager"),o=e("../../../manager/GlobalConfig"),r=e("../../tips/UserTips"),s=e("../UserMiji"),u=e("../../../../core/base/ErrorLog"),l=e("../../../entity/SubRoles"),c=e("../../bag/UserBag");(function(e){function t(){var t=e.call(this)||this;return t.parentRoot=n.LayerManager.UI_Popup,t.curRole=0,t.selItem=0,t.isFirst=!0,t.skinName="MijiLockSkin",t}__extends(t,e),t.prototype.initUI=function(){this.mijiBtns=[this.mijiBtn0,this.mijiBtn1,this.mijiBtn2,this.mijiBtn3,this.mijiBtn4,this.mijiBtn5,this.mijiBtn6,this.mijiBtn7],this.link.textFlow=(new egret.HtmlTextParser).parser("<u>\u83b7\u5f97\u9053\u5177</u>"),this.roleSelect.hideTop()},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i in this.isFirst=!0,this.addTouchEvent(this.closeBtn,this.onTap),this.addTouchEvent(this.smeltBtn,this.onTap),this.addTouchEvent(this.link,this.onTap),this.addChangeEvent(this.roleSelect,this.onChange),this.addTouchEndEvent(this.otherRect,this.otherClose),this.mijiBtns)this.addTouchEvent(this.mijiBtns[i],this.onTap);this.observe(s.UserMiji.ins().postMijiLockInfo,this.setData),e[0]==s.UserMiji.BAGOPEN?this.bagSelectIndex():(this.roleSelect.setCurRole(isNaN(e[0])?0:e[0]),this.selItem=this.getindex(isNaN(e[0])?0:e[0])),this.setCurRole(this.roleSelect.getCurRole())},t.prototype.otherClose=function(e){a.default.ins().close(this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onChange=function(e){var t=this.roleSelect.getCurRole();this.isFirst||(this.selItem=this.getindex(t)),this.isFirst=!1,this.setCurRole(t)},t.prototype.setCurRole=function(e){this.curRole=e,this.setData()},t.prototype.onTap=function(e){switch(e.currentTarget){case this.closeBtn:a.default.ins().close(this);break;case this.smeltBtn:var t=this.mijiBtns[this.selItem].data;if(t.isLocked)return void s.UserMiji.ins().sendMijiDelLock(this.curRole,t.id);s.UserMiji.ins().sendMijiAddLock(this.curRole,t.id);break;case this.link:UserWarn.ins().setBuyGoodsWarn(o.default.MijiBaseConfig.lockId,1);break;default:var i=this.mijiBtns.indexOf(e.target.parent),n=this.mijiBtns[i].data;if(!this.mijiBtns[i]||!n)return;if(0==n.id)return void r.default.ins().showCenterTips("\u672a\u5b66\u4e60\u79d8\u7c4d\u7684\u5b54\u4f4d\u65e0\u6cd5\u52a0\u9501");this.selItem=i;var u=s.UserMiji.ins();if(!u.grid||this.selItem>=u.grid)return void r.default.ins().showTips("\u672a\u5f00\u542f");this.updateBtnState()}},t.prototype.updateBtnState=function(){for(var e=0;e<this.mijiBtns.length;e++)this.mijiBtns[e].setSelected(!1);this.labCount.text="",this.link.visible=!1;var t=c.default.ins().getBagGoodsCountById(c.default.BAG_TYPE_OTHTER,o.default.MijiBaseConfig.lockId),i=t>0;if(i&&(this.labCount.text="\u5269\u4f59\u9053\u5177\uff1a "+t),this.link.visible=!i,this.selItem<0)return this.smeltBtn.label="\u5b54\u4f4d\u52a0\u9501",void(this.smeltBtn.enabled=!1);this.mijiBtns[this.selItem].setSelected(!0),this.mijiBtns[this.selItem].data.isLocked?(this.smeltBtn.label="\u5b54\u4f4d\u89e3\u9501",this.smeltBtn.enabled=!0):(this.smeltBtn.label="\u5b54\u4f4d\u52a0\u9501",this.smeltBtn.enabled=i)},t.prototype.setData=function(){for(var e=s.UserMiji.ins(),t=!0,i=0;i<8;i++)if(u.default.Assert(e.miji,"MijiPanel   data.miji is null"))this.mijiBtns[i].data=null;else{var n=e.miji[this.curRole];u.default.Assert(n,"MijiPanel   numList is null  roleId = "+this.curRole)?this.mijiBtns[i].data=null:(this.mijiBtns[i].data=n[i]?n[i]:null,n[i]&&0==n[i].id?this.mijiBtns[i].setUnlearn(!0):this.mijiBtns[i].setUnlearn(!1),n[i]||t&&(this.mijiBtns[i].setCountLabel(i),t=!1))}this.updateBtnState()},t.prototype.getindex=function(e){for(var t=s.UserMiji.ins().miji[e],i=0;i<t.length;i++)if(0!=t[i].id)return i;return-1},t.prototype.bagSelectIndex=function(){var e=0,t=!1;this.selItem=0;for(var i=l.default.ins().subRolesLen,n=0;n<i;n++){for(var a=s.UserMiji.ins().miji[n],o=0;o<a.length;o++)if(0!=a[o].id&&0==a[o].isLocked){e=n,this.selItem=o,t=!0;break}if(t)break}this.roleSelect.setCurRole(e)}})(e("../../../../core/view/BaseEuiView").default);cc._RF.pop()},{"../../../../core/base/ErrorLog":"ErrorLog","../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../entity/SubRoles":"SubRoles","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../tips/UserTips":"UserTips","../UserMiji":"UserMiji"}],MijiPanel:[function(e,t,i){"use strict";cc._RF.push(t,"bc8f72KshdIx48FwMDPwyl9","MijiPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/view/BaseView"),a=e("../../core/base/MessageCenter"),o=cc._decorator,r=o.ccclass,s=(o.property,function(e){function t(){var t=e.call(this)||this;return t.isTween=!1,t.curRole=0,a.default.compile(i),t}var i;return __extends(t,e),i=t,t.prototype.childrenCreated=function(){this.init()},t.prototype.init=function(){this.change.textFlow=(new egret.HtmlTextParser).parser("<u>\u79d8\u7c4d\u7f6e\u6362</u>"),this.mijiBtns=[this.mijiBtn0,this.mijiBtn1,this.mijiBtn2,this.mijiBtn3,this.mijiBtn4,this.mijiBtn5,this.mijiBtn6,this.mijiBtn7,this.select],this.eff=new MovieClip,this.eff.playFile(RES_DIR_EFF+"chargeff1"),this.eff.x=278,this.eff.y=500,this.eff.scaleX=.7},t.prototype.destructor=function(){},t.prototype.setCurRole=function(e){if(this.curRole!=e&&(this.curRole=e,this.isTween)){UserMiji.ins().sendMijiwancheng(this.roleID),this.isTween=!1;for(var t=0;t<8;t++)egret.Tween.removeTweens(this["imageSmall_"+(t+1)])}},t.prototype.setData=function(){for(var e=this,t=UserMiji.ins(),i=!0,n=0;n<8;n++){this["imageMax_"+(n+1)].visible=!1;var a=void 0;if(ErrorLog.Assert(t.miji,"MijiPanel   data.miji is null"))this.mijiBtns[n].data=null;else if(a=t.miji[this.curRole],ErrorLog.Assert(a,"MijiPanel   numList is null  roleId = "+this.curRole))this.mijiBtns[n].data=null;else{var o=!!a[n]&&0!=a[n].id;this["imageMax_"+(n+1)].visible=o,this.mijiBtns[n].data=a[n]?a[n]:null,a[n]||i&&(this.mijiBtns[n].setCountLabel(n),i=!1)}}this.learnLabel.visible=!1,this.learnImg.visible=!1,t.miji[this.curRole].forEach(function(t){t.id>0&&(e.learnLabel.visible=!0,e.learnImg.visible=!0)}),this.powerPanel.setPower(t.getPowerByRole(this.curRole))},t.prototype.updateEff=function(){this.select.addImg.visible?DisplayUtils.removeFromParent(this.mc):this.playEff()},t.prototype.playEff=function(){this.mc||(this.mc=new MovieClip),this.mc.parent||(this.btnAct.addChildAt(this.mc,1),this.mc.x=this.getBtn.x+this.getBtn.width/2,this.mc.y=this.getBtn.y+this.getBtn.height/2),this.mc.playFile(RES_DIR_EFF+"chargeff1",-1)},t.prototype.playArrow=function(){this._arrow||(this._arrow=new GuideArrow2),this._arrow.parent||this.arrow.addChild(this._arrow),this._arrow.x=0,this._arrow.setTips("\u70b9\u51fb\u9576\u5d4c\u79d8\u7c4d"),this._arrow.setDirection(0)},t.prototype.stopArrow=function(){this._arrow&&this._arrow.removeTweens(),DisplayUtils.removeFromParent(this._arrow),this._arrow=null},t.prototype.setOpenDesc=function(){GlobalConfig.MiJiGridConfig[UserMiji.ins().grid+1]||(this.curZsLv.visible=!1)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];for(var i in this.setOpenDesc(),this.setData(),this.addTouchEvent(this.getBtn,this.onTap),this.addTouchEvent(this.change,this.onTap),this.addTouchEvent(this.mijitujian,this.onTap),this.addTouchEvent(this.all,this.onTap),this.addTouchEvent(this.btnLock,this.onTap),this.mijiBtns)this.addTouchEvent(this.mijiBtns[i],this.onTap);this.observe(UserMiji.ins().postMijiData,this.updateRedPoint),this.observe(UserMiji.ins().postMijiUpDate,this.learnUpdate),this.observe(UserMiji.ins().postSelectedMiji,this.selectMijiItem),this.observe(UserMiji.ins().postMijiLockInfo,this.setData),this.select.showAdd()},t.prototype.close=function(){for(var e in this.mijiBtns)this.removeTouchEvent(this.mijiBtns[e],this.onTap);this.removeTouchEvent(this.getBtn,this.onTap),this.removeTouchEvent(this.change,this.onTap),this.removeTouchEvent(this.mijitujian,this.onTap),this.removeTouchEvent(this.all,this.onTap),this.removeObserve(),DisplayUtils.removeFromParent(this.mc),this.stopArrow()},t.prototype.selectMijiItem=function(e){this.select.data=e[0],this.curName=e[1],this.updateEff()},t.prototype.onBagUseMiji=function(e){this.playEff(),this.playArrow()},t.prototype.learnUpdate=function(e){var t=this,i=e[0],n=e[1],a=e[2];if(1==e[3])this.learnUpdateEffect(i,!1,function(){t["imageMax_"+(i+1)].visible=!0;var e=ObjectPool.pop("MovieClip");e.scaleX=e.scaleY=1,e.rotation=0,e.x=e.y=36,e.playFile(RES_DIR_EFF+"faileff",1,function(){ObjectPool.push(e)}),t.mijiBtns[i].addChild(e),UserTips.ins().showTips("\u79d8\u7c4d\u9576\u5d4c\u5931\u8d25")});else{var o=function(){t["imageMax_"+(i+1)].visible=!0,TimerManager.ins().doTimer(500,1,function(){var e=ObjectPool.pop("MovieClip");e.scaleX=e.scaleY=1,e.rotation=0,e.x=e.y=36,e.playFile(RES_DIR_EFF+"successeff",1,function(){ObjectPool.push(e)}),t.mijiBtns[i].addChild(e),t.mijiBtns[i].showSelect(),t.setData();var n=a?",["+GlobalConfig.ItemConfig[GlobalConfig.MiJiSkillConfig[a].item].name+"]\u88ab\u66ff\u6362":"";UserTips.ins().showTips("\u79d8\u7c4d\u9576\u5d4c\u5b8c\u6210"+n),Setting.ins().getValue(ClientSet.mijiRedPoint)||Setting.ins().setValue(ClientSet.mijiRedPoint,1)},t)};n-a==1?o():this.learnUpdateEffect(i,!0,o)}this.updateEff()},t.prototype.learnUpdateEffect=function(e,t,i){var n=this;this.isTween=!0;for(var a=24+e+1,o=function(e){var t=e,o=150*e,s=150;e>7&&e<16?(t=e-8,o=150*e):e>15&&e<24?(t=e-16,o=150*e+100*(e-15),s=250):e>23&&(t=e-24,o=150*e+200*(e-23)+650,s=350),egret.Tween.get(r["imageSmall_"+(t+1)]).to({},o).call(function(){var o=egret.Tween.get(n["imageSmall_"+(t+1)]);n["imageSmall_"+(t+1)].visible=!0,e==a-1?o.to({visible:!0},150).call(function(){for(var e=0;e<8;e++)egret.Tween.removeTweens(n["imageSmall_"+(e+1)]),n.isTween=!1;UserMiji.ins().sendMijiwancheng(n.roleID),i()}):o.to({visible:!1},s)})},r=this,s=0;s<a;s++)o(s)},t.prototype.updateRedPoint=function(){this.setOpenDesc(),this.setData()},t.prototype.onTap=function(e){var t=this,i=UserMiji.ins();switch(e.target){case this.getBtn:if(DisplayUtils.removeFromParent(this.mc),this.stopArrow(),!this.select.data)return 8==this.mijiBtns.indexOf(this.select)?i.grid?void ViewManager.ins().open(MijiLearnWin,this.curRole):void UserTips.ins().showTips("1\u8f6c\u540e\u5f00\u542f"):void UserTips.ins().showTips("\u8bf7\u9009\u62e9\u6280\u80fd\uff01");var n,a=this.select.data;a=this.select.data-1,n=UserMiji.ins().hasSpecificSkillOfRole(this.curRole,a);var o="";GlobalConfig.MiJiSkillConfig[a]&&(o=GlobalConfig.ItemConfig[GlobalConfig.MiJiSkillConfig[a].item].name),n?WarnWin.show("\u5df2\u9576\u5d4c\u300a"+o+"\u300b,\u5c06\u76f4\u63a5\u66ff\u4ee3\u300a"+o+"\u300b\u83b7\u5f97\u300a"+this.curName+"\u300b\u6548\u679c",function(){t.roleID=t.curRole,UserMiji.ins().sendMijiLearn(t.curRole,t.select.data),SoundUtil.ins().playEffect(SoundUtil.SKILL_UP),t.select.showAdd()},this):WarnWin.show("\u9576\u5d4c\u540e\u83b7\u5f97\u300a"+this.curName+"\u300b,\u6709\u51e0\u7387\u66ff\u6362\u5df2\u9576\u5d4c\u79d8\u7c4d\uff0c\u662f\u5426\u9576\u5d4c\uff1f"+(n?"\n<font color='#f3311e'>(\u5df2\u9576\u5d4c\u300a"+o+"\u300b,\u540c\u7c7b\u6280\u80fd\u4ec5\u9ad8\u7ea7\u751f\u6548)</font>":"\n<font color='#35e62d'>\uff08\u4f4e\u7ea7\u79d8\u7c4d\u4e0d\u4f1a\u66ff\u6362\u9ad8\u7ea7\u79d8\u7c4d\uff09</font>"),function(){t.roleID=t.curRole,UserMiji.ins().sendMijiLearn(t.curRole,t.select.data),SoundUtil.ins().playEffect(SoundUtil.SKILL_UP),t.select.showAdd()},this);break;case this.change:ViewManager.ins().open(MijiZhWin);break;case this.mijitujian:ViewManager.ins().open(MiJiTujianWin);break;case this.all:ViewManager.ins().open(MijiLookWin);break;case this.btnLock:ViewManager.ins().open(MijiLockWin,this.curRole);break;default:var r=this.mijiBtns.indexOf(e.target.parent);if(8==r)return i.grid?void ViewManager.ins().open(MijiLearnWin,this.curRole):void UserTips.ins().showTips("1\u8f6c\u540e\u5f00\u542f");if(!this.mijiBtns[r]||this.mijiBtns[r].data&&!this.mijiBtns[r].data.id)return;if(!i.grid||r>=i.grid)return void UserTips.ins().showTips("\u672a\u5f00\u542f");ViewManager.ins().open(MijiTipWin,this.mijiBtns[r].data)}},t=i=__decorate([r],t)}(n.default));i.default=s,cc._RF.pop()},{"../../core/base/MessageCenter":"MessageCenter","../../core/view/BaseView":"BaseView"}],MijiTipWin:[function(e,t,i){"use strict";cc._RF.push(t,"9923f/adFBJdYM/fGxEg0na","MijiTipWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../manager/GlobalConfig"),a=e("../../../../core/utils/TextFlowMaker"),o=e("../../../../core/base/ViewManager"),r=e("../../../enum/LayerManager");(function(e){function t(){var t=e.call(this)||this;return t.parentRoot=r.LayerManager.UI_Main,t}__extends(t,e),t.prototype.initUI=function(){this.skinName="MijiTipSkin",this.isTopLevel=!0},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.item.data=e[0].id;var i=n.default.ItemConfig[n.default.MiJiSkillConfig[e[0].id].item];this.info.textFlow=a.default.generateTextFlow1(i.name+"\n\n"+i.desc),this.power.text="\u8bc4\u5206\uff1a"+n.default.MiJiSkillConfig[e[0].id].power,this.addTouchEvent(this,this.onClose)},t.prototype.onClose=function(e){o.default.ins().close(this)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this,this.onClose)}})(e("../../../../core/view/BaseEuiView").default);cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/TextFlowMaker":"TextFlowMaker","../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig"}],MijiZhWin:[function(e,t,i){"use strict";cc._RF.push(t,"04996qEDCJPiIG4XyCYJ5P4","MijiZhWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/ViewManager"),a=e("../../../enum/LayerManager"),o=e("../../../../core/utils/DisplayUtils"),r=e("../../../config/MiJiSkillConfig"),s=e("../../bag/view/ItemDetailedWin"),u=e("../../bag/UserBag"),l=e("../../../manager/GlobalConfig"),c=e("../../tips/UserTips"),d=e("../../../../core/view/BaseEuiView"),f=e("../UserMiji");(function(e){function t(){var t=e.call(this)||this;return t.parentRoot=a.LayerManager.UI_Popup,t}__extends(t,e),t.prototype.initUI=function(){e.prototype.initUI.call(this),this.skinName="MijiZhSkin",this.itemList.itemRenderer=ItemBaseNoTap,this.itemScroller.viewport=this.itemList,this.touchChildren=!0,this.mijiItem0.touchEnabled=!0,this.mijiItem0.touchChildren=!0,this.mijiItem1.touchEnabled=!0,this.mijiItem1.touchChildren=!0,this.mijiItem2.touchEnabled=!0,this.mijiItem2.touchChildren=!0,this.mcEff1=new MovieClip,this.mcEff1.x=63,this.mcEff1.y=99,this.mcEff2=new MovieClip,this.mcEff2.x=153,this.mcEff2.y=99,this.mcEff3=new MovieClip,this.mcEff3.x=243,this.mcEff3.y=99,this.nameArr=[],this.isTopLevel=!0},t.prototype.onItemTap=function(e){if(!(this.mijiItem0.data&&this.mijiItem1.data&&this.mijiItem2.data)){var t=e.item.count,i=r.default.getSkillIDByItem(e.item.configID);this.mijiItem0.data==i&&t--,this.mijiItem1.data==i&&t--,this.mijiItem2.data==i&&t--;t?(this.mijiItem0.data?this.mijiItem1.data?this.mijiItem2.data||(this.mijiItem2.data=i,this.nameArr[2]=e.item.itemConfig.name):(this.mijiItem1.data=i,this.nameArr[1]=e.item.itemConfig.name):(this.mijiItem0.data=i,this.nameArr[0]=e.item.itemConfig.name),this.mijiItem3.data=""):c.default.ins().showTips("\u79d8\u7c4d\u4e0d\u8db3")}},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.closeBtn,this.onTap),this.addTouchEvent(this.closeBtn0,this.onTap),this.addTouchEvent(this.smeltBtn,this.onTap),this.addTouchEvent(this.mijiItem0,this.onTap),this.addTouchEvent(this.mijiItem1,this.onTap),this.addTouchEvent(this.mijiItem2,this.onTap),this.addTouchEvent(this.mijiItem3,this.onTap),this.addTouchEvent(this.bgClose,this.onTap),this.itemList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.observe(u.default.ins().postItemAdd,this.updateItem),this.observe(u.default.ins().postItemDel,this.updateItem),this.observe(u.default.ins().postItemChange,this.updateItem),this.observe(f.UserMiji.ins().postMijiChange,this.showResult),this.clearData(),this.updateItem()},t.prototype.sortFun=function(e,t){return e.configID<t.configID?-1:e.configID>t.configID?1:0},t.prototype.updateItem=function(){var e=u.default.ins().getBagGoodsByType(2);e.sort(this.sortFun),this.itemList.dataProvider=new eui.ArrayCollection(e)},t.prototype.clearData=function(){this.itemList.selectedIndex=-1,this.mijiItem0.data="",this.mijiItem1.data="",this.mijiItem2.data="",this.mijiItem3.data=""},t.prototype.playEffect=function(){this.mcEff1.playFile(RES_DIR_EFF+"forgeSuccess",1),this.anigroup.addChild(this.mcEff1),this.mcEff2.playFile(RES_DIR_EFF+"forgeSuccess",1),this.anigroup.addChild(this.mcEff2),this.mcEff3.playFile(RES_DIR_EFF+"forgeSuccess",1),this.anigroup.addChild(this.mcEff3)},t.prototype.onTap=function(e){var t=this;switch(e.currentTarget){case this.smeltBtn:if(!this.mijiItem0.data||!this.mijiItem1.data||!this.mijiItem2.data)return void c.default.ins().showTips("\u8bf7\u5148\u653e\u51653\u672c\u79d8\u7c4d");WarnWin.show("\u662f\u5426\u6d88\u8017\u300a"+this.nameArr[0]+"\u300b\u3001\u300a"+this.nameArr[1]+"\u300b\u3001\u300a"+this.nameArr[2]+"\u300b\u968f\u673a\u7f6e\u6362\u4e00\u672c\u65b0\u7684\u79d8\u7c4d\uff1f",function(){var e=t.mijiItem0.data,i=t.mijiItem1.data,n=t.mijiItem2.data;f.UserMiji.ins().sendMijiChange(e,i,n),t.clearData(),t.playEffect()},this);break;case this.closeBtn:case this.closeBtn0:case this.bgClose:n.default.ins().close(this);break;case this.mijiItem0:case this.mijiItem1:case this.mijiItem2:e.currentTarget.data="";break;case this.mijiItem3:if(this.mijiItem3&&this.mijiItem3.data){var i=l.default.MiJiSkillConfig[this.mijiItem3.data];if(i){var a=u.default.ins().getBagItemById(i.item);a&&n.default.ins().open(s.default,0,a.itemConfig.id,a.count)}}}},t.prototype.showResult=function(e){this.mijiItem3.data=r.default.getSkillIDByItem(e)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this.closeBtn,this.onTap),this.removeTouchEvent(this.closeBtn0,this.onTap),this.removeTouchEvent(this.smeltBtn,this.onTap),this.itemList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onItemTap,this),this.removeTouchEvent(this.mijiItem0,this.onTap),this.removeTouchEvent(this.mijiItem1,this.onTap),this.removeTouchEvent(this.mijiItem2,this.onTap),this.removeObserve(),o.default.removeFromParent(this.mcEff1),o.default.removeFromParent(this.mcEff2),o.default.removeFromParent(this.mcEff3)}})(d.default);cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/DisplayUtils":"DisplayUtils","../../../../core/view/BaseEuiView":"BaseEuiView","../../../config/MiJiSkillConfig":"MiJiSkillConfig","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../bag/view/ItemDetailedWin":"ItemDetailedWin","../../tips/UserTips":"UserTips","../UserMiji":"UserMiji"}],MillionaireData:[function(e,t,i){"use strict";cc._RF.push(t,"747ae0aHMlIM64ePg0GjBh6","MillionaireData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../../manager/GlobalConfig"),o=function(e){function t(){var t=e.call(this)||this;return t.dice=0,t.gridId=0,t.round=0,t.roundReward=0,t.randomGridById=0,t.randomGridByRewardId=0,t.rewardIdByGrids=[],t.isStrideStart=0,t.dicePoint=0,t.autoTurnDice=0,t.isAutoGo=!1,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.parser=function(e){this.dice=e.readShort(),this.gridId=e.readShort(),this.round=e.readShort(),this.roundReward=e.readInt(),this.randomGridById=e.readShort(),this.randomGridByRewardId=e.readUnsignedByte();for(var t=e.readShort(),i=1;i<=t;i++){var n=e.readShort();this.rewardIdByGrids[i]=n}var o=a.default.RichManGridConfig[this.gridId];o&&o.action},t.prototype.parserTurnDice=function(e){this.isStrideStart=e.readUnsignedByte(),this.gridId=e.readShort(),this.dicePoint=e.readUnsignedByte()},t.prototype.parserRoundReward=function(e){this.roundReward=e.readInt()},t.prototype.parserOverAllReward=function(e){this.randomGridById=e.readShort(),this.randomGridByRewardId=e.readUnsignedByte()},t.prototype.parserMillionaireUpdate=function(e){this.dice=e.readShort(),this.round=e.readShort(),this.roundReward=e.readInt()},t.prototype.getRedPoint=function(){if(!MillionaireWin.isOpen())return!1;if(this.dice>0)return!0;for(var e in a.default.RichManRoundAwardConfig)if(!(this.roundReward>>Number(e)&1)&&this.round>=a.default.RichManRoundAwardConfig[e].round)return!0;return!1},t}(n.default);i.default=o,cc._RF.pop()},{"../../../../core/base/BaseClass":"BaseClass","../../../manager/GlobalConfig":"GlobalConfig"}],Millionaire:[function(e,t,i){"use strict";cc._RF.push(t,"21e53TtwI1NMYNSRxfJXNq/","Millionaire"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../manager/GlobalConfig"),r=e("../../../core/base/MessageCenter"),s=function(e){function t(){var i=e.call(this)||this;return i.sysId=a.PackageID.Millionaire,r.default.compile(t),i.regNetMsg(1,i.postMillionaireInfo),i.regNetMsg(2,i.postTurnDice),i.regNetMsg(3,i.postRoundReward),i.regNetMsg(4,i.postOverAllReward),i.regNetMsg(5,i.postMillionaireUpdate),i.dice=0,i.gridId=0,i.round=0,i.roundReward=0,i.randomGridById=0,i.randomGridByRewardId=0,i.rewardIdByGrids=[],i.isStrideStart=0,i.dicePoint=0,i.autoTurnDice=0,i.isAutoGo=!1,i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postMillionaireInfo=function(e){this.dice=e.readShort(),this.gridId=e.readShort(),this.round=e.readShort(),this.roundReward=e.readInt(),this.randomGridById=e.readShort(),this.randomGridByRewardId=e.readUnsignedByte();for(var t=e.readShort(),i=1;i<=t;i++){var n=e.readShort();this.rewardIdByGrids[i]=n}var a=o.default.RichManGridConfig[this.gridId];a&&a.action},t.prototype.postTurnDice=function(e){this.isStrideStart=e.readUnsignedByte(),this.gridId=e.readShort(),this.dicePoint=e.readUnsignedByte()},t.prototype.postRoundReward=function(e){e.readUnsignedByte();this.roundReward=e.readInt()},t.prototype.postOverAllReward=function(e){this.randomGridById=e.readShort(),this.randomGridByRewardId=e.readUnsignedByte()},t.prototype.postMillionaireUpdate=function(e){this.dice=e.readShort(),this.round=e.readShort(),this.roundReward=e.readInt()},t.prototype.sendMillionaireInfo=function(){this.sendBaseProto(1)},t.prototype.sendTurnDice=function(){this.sendBaseProto(2)},t.prototype.sendRoundReward=function(e){var t=this.getBytes(3);t.writeInt(e),this.sendToServer(t)},t.prototype.getRedPoint=function(){return!1},t}(n.default);i.default=s,s.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../manager/GlobalConfig":"GlobalConfig"}],MineData:[function(e,t,i){"use strict";cc._RF.push(t,"b0754hiDdZA9YdFEVyl3JXE","MineData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/BaseClass"),a=e("../../entity/MineModel"),o=e("../../base/EntityManager"),r=e("../../manager/TimerManager"),s=e("../../manager/GlobalConfig"),u=e("../../entity/Actor"),l=e("../../map/GameMap"),c=e("../gamescene/GameLogic"),d=e("../../base/ObjectPool"),f=e("../../entity/SubRoles"),p=function(e){function t(){var t=e.call(this)||this;return t.isShowTransfer=!0,t.mines=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.parser=function(e){this.index=e.readShort(),this.isExitUp=!!e.readShort(),this.isExitDown=!!e.readShort();var t=e.readShort();this.removeAll();for(var i=0;i<t;i++)this.mines[i]=d.default.shift(a.default),this.mines[i].parser(e),this.checkIsMyMine(this.mines[i]),this.updateMineConfig(this.mines[i]);this.resetRole(),this.createTransfer(),this.createEntity(),this.showAwardWin()},t.prototype.showAwardWin=function(){Mine.ins().finishedData&&ViewManager.ins().open(MineRobWin,Mine.ins().finishedData)},t.prototype.resetRole=function(){o.default.ins().resetRole();for(var e=f.default.ins().subRolesLen,t=1;t<e;t++){var i=f.default.ins().roles[t],n=o.default.ins().getEntityByHandle(i.handle);n&&(n.visible=!1)}},t.prototype.createTransfer=function(){if(this.isShowTransfer){var e;s.default.CaiKuangConfig.transPos;if(this.isExitUp)(e=o.default.ins().getTransferById(0))?(e.infoModel.index=this.index-1,e.updateModel()):this.addTransfer(0,this.index-1);else o.default.ins().removeTransferById(0);if(this.isExitDown)(e=o.default.ins().getTransferById(1))?(e.infoModel.index=this.index+1,e.updateModel()):this.addTransfer(1,this.index+1);else o.default.ins().removeTransferById(1)}},t.prototype.showTransfer=function(e){this.isShowTransfer=e,e?this.createTransfer():(o.default.ins().removeTransferById(0),o.default.ins().removeTransferById(1))},t.prototype.addTransfer=function(e,t){var i=s.default.CaiKuangConfig.transPos,n=new TransferModel;n.configID=e,n.index=t;var a=i[n.configID];n.x=a.x*l.default.CELL_SIZE+(l.default.CELL_SIZE>>1),n.y=a.y*l.default.CELL_SIZE+(l.default.CELL_SIZE>>1),o.default.ins().createEntity(n)},t.prototype.createEntity=function(){for(var e=0,t=this.mines;e<t.length;e++){var i=t[e];c.default.ins().createEntityByModel(i)}r.default.ins().isExists(this.updateTime,this)||r.default.ins().doTimer(1e3,0,this.updateTime,this)},t.prototype.updateTime=function(){for(var e=0,t=this.mines;e<t.length;e++){var i=t[e],n=o.default.ins().getMineByIndex(i.index);n&&n.updateTime()}},t.prototype.getMineByIndex=function(e,t){for(var i=0,n=this.mines;i<n.length;i++){var a=n[i];if(a.index==e)return t&&t!=a.actorID?null:a}},t.prototype.add=function(e){this.remove(e.index),t.ins().mines.push(e),this.checkIsMyMine(e),this.updateMineConfig(e),c.default.ins().createEntityByModel(e)},t.prototype.updateMineConfig=function(e){var t=s.default.CaiKuangConfig.kuangPos[e.index-1];e.x=t.x*l.default.CELL_SIZE+(l.default.CELL_SIZE>>1),e.y=t.y*l.default.CELL_SIZE+(l.default.CELL_SIZE>>1),e.dir=t.d},t.prototype.checkIsMyMine=function(e){return e.actorID==u.default.actorID&&(this.myMine=e.clone(this.myMine),Mine.ins().mineStartTime=this.myMine.startTime,Mine.ins().mineEndTime=this.myMine.endTime,!0)},t.prototype.getIsCanAtk=function(e){return e.actorID!=u.default.actorID&&(!!t.ins().getMineByIndex(e.index,e.actorID)&&(!e.isBeFight&&(!(e.beFightActorID.length>=s.default.CaiKuangConfig.maxBeRobCount)&&(!(e.beFightActorID.indexOf(u.default.actorID)>=0)&&!(Mine.ins().robCount>=s.default.CaiKuangConfig.maxRobCount)))))},t.prototype.remove=function(e){for(var t in this.mines){if(this.mines[t].index==e){this.mines.splice(parseInt(t),1),o.default.ins().removeMineByIndex(e);break}}},t.prototype.removeAll=function(){for(;this.mines.length;){var e=this.mines.pop();o.default.ins().removeMineByIndex(e.index)}r.default.ins().removeAll(this)},t}(n.default);i.default=p,cc._RF.pop()},{"../../../core/base/BaseClass":"BaseClass","../../base/EntityManager":"EntityManager","../../base/ObjectPool":"ObjectPool","../../entity/Actor":"Actor","../../entity/MineModel":"MineModel","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../../map/GameMap":"GameMap","../gamescene/GameLogic":"GameLogic"}],MineEnemyModel:[function(e,t,i){"use strict";cc._RF.push(t,"106e0fVMB1MO7Uh2JlrUjUD","MineEnemyModel");(function(){function e(){this.subRole=[],this.hejiLvl=0,this.weiWang=0}e.prototype.parser=function(e){this.lv=e.readShort(),this.zsLv=e.readShort(),this.name=e.readString();for(var t=e.readShort(),i=0;i<t;i++){var n=this.subRole[i]=new Role;n.parser(e),n.name=this.name}this.fireRing=this.fireRing||new OtherFireRingData,this.fireRing.parser(e),this.hejiLvl=e.readInt(),this.weiWang=e.readInt(),MineFight.ins().createEnemy(this)},e.prototype.getJobRoles=function(){var e=[].concat(this.subRole);return e.sort(function(e,t){return e.job<t.job?-1:1}),e}})();cc._RF.pop()},{}],MineFight:[function(e,t,i){"use strict";cc._RF.push(t,"ef2cdVkjZZL3Lnp9RpGu32y","MineFight"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/BaseClass"),a=e("../../base/EntityManager"),o=e("../../entity/CharRole"),r=e("../../base/EntityType"),s=e("../rolewin/UserSkill"),u=e("../../../core/utils/DirUtil"),l=e("../../map/GameMap"),c=e("../../entity/SubRoles"),d=e("../gamescene/GameLogic"),f=e("../heji/model/HejiUseMgr"),p=e("../../manager/TimerManager"),h=e("../../ai/RoleAI"),g=e("./MineData"),y=e("../../manager/GlobalConfig"),v=e("../encounter/Encounter"),m=e("../../entity/Actor"),b=function(e){function t(){var t=e.call(this)||this;return t.isFighting=0,t.range=4,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.start=function(e){if(!this.isFighting){this.isFighting=1,this.handles=[],this._data=e;var t=a.default.ins().getAllEntity(),i=a.default.ins().getNoDieRole();for(var n in t){var o=t[n].infoModel;o&&(0==e.type&&o.type==r.EntityType.Mine&&o.actorID==e.actorID||t[n]!=i&&(t[n].visible=!1))}this.setShowUI(!1),s.default.ins().setHejiCD(6e3),this.enemyPoints=this.getEnemyPoint(),this.startPos={x:i.x,y:i.y};for(var f=u.default.get8DirBy2Point(this.startPos,{x:l.default.grip2Point(this.enemyPoints[0][0]),y:l.default.grip2Point(this.enemyPoints[0][1])}),p=0;p<c.default.ins().subRolesLen;p++){var g=a.default.ins().getJobMainRole(p);if(!g)break;if(0==p)g.x=this.startPos.x,g.y=this.startPos.y;else{var y=l.default.getPosRangeRandom(this.startPos.x,this.startPos.y,u.default.dirOpposit(f),p);g.x=l.default.grip2Point(y[0]),g.y=l.default.grip2Point(y[1])}g.dir=f,g.visible=!0,g.AI_STATE=h.AI_State.Stand,this.playTransferEffect(g),this.handles.push(g.infoModel.handle),h.default.ins().add(g)}d.default.ins().postMoveCamera()}},t.prototype.stop=function(){if(this.isFighting){this.isFighting=0,this._model=null,f.default.ins().unregister(this),p.default.ins().removeAll(this);var e=a.default.ins().getAllEntity();for(var t in e)e[t].infoModel&&e[t].infoModel.type!=r.EntityType.Monster&&(e[t].visible=!0);for(var i=0;i<this.handles.length;i++){t=this.handles[i];a.default.ins().removeByHandle(t)}this.resetRole(),this.setShowUI(!0),h.default.ins().stop(),h.default.ins().clearAIList(),l.default.sceneInMine()&&Mine.ins().finishedData&&ViewManager.ins().open(MineRobWin,Mine.ins().finishedData),d.default.ins().postMoveCamera()}},t.prototype.resetRole=function(){g.default.ins().resetRole();var e=c.default.ins().getSubRoleByIndex(0),t=a.default.ins().getEntityByHandle(e.handle);t.x=this.startPos.x,t.y=this.startPos.y,t.AI_STATE=h.AI_State.Stand},t.prototype.fightEnd=function(e){e?this.fightWin():this.fightFail()},t.prototype.fightWin=function(){for(var e=this,t=this._data.id,i=y.default.KuangYuanConfig[t],n=this.getAward(i),s=0,u=n=this.getCountAward(n);s<u.length;s++){var l=u[s];0!=l.type&&v.default.ins().postCreateDrop(DropHelp.tempDropPoint.x,DropHelp.tempDropPoint.y,l)}var c=a.default.ins().getAllEntity(),d=function(e){var t=c[e].infoModel;return t?0==f._data.type&&t.type==r.EntityType.Mine&&t.actorID==f._data.actorID?(egret.Tween.get(c[e]).to({alpha:0},1e3).call(function(){c[e].visible=!1,c[e].alpha=1}),"break"):void 0:"continue"},f=this;for(var h in c){if("break"===d(h))break}DropHelp.addCompleteFunc(function(){e.sendToServer(!0),p.default.ins().doTimer(1e3,1,e.stop,e);for(var t=0,i=a.default.ins().getEntityByTeam(Team.My);t<i.length;t++){var n=i[t];n.stopMove(),n instanceof o.default?e.playTransferEffect(n):a.default.ins().removeByHandle(n.infoModel.handle)}SoundUtil.ins().playEffect(SoundUtil.SCENE)},this),DropHelp.start()},t.prototype.fightFail=function(){var e=this;this.sendToServer(!1),v.default.ins().postFightResult(0),p.default.ins().doTimer(2e3,1,function(){e.stop()},this)},t.prototype.sendToServer=function(e){0==this._data.type?Mine.ins().sendRobResult(e,this._data.id,this._data.actorID):Mine.ins().sendFightBackResult(e,this._data.index)},t.prototype.setShowUI=function(e){l.default.sceneInMine()&&(g.default.ins().showTransfer(e),Mine.ins().postMineFightState(e?1:0))},t.prototype.getRoles=function(){return this._model?this._model.subRole:null},t.prototype.getSkillLvl=function(){return this._model?this._model.hejiLvl:0},t.prototype.getIsWeiShe=function(e){if(!this._model)return!1;var t=this._model;return e?m.default.weiWang>t.weiWang:m.default.weiWang<t.weiWang},t.prototype.getWeiSheHurt=function(e){if(!this.getIsWeiShe(e))return 0;var t=Rank.ins().getRankModel(RankDataType.TYPE_WEIWANG),i="";i=e?m.default.myName:this._model&&this._model.subRole[0].name;var n=0;if(t)for(var a=0;a<3;a++){var o=t.getDataList(a);if(o&&o.player==i){n=o.pos;break}}return y.default.PrestigeBase.rankDeterDam[n-1]||y.default.PrestigeBase.normalDeterDam},t.prototype.createEnemy=function(e){this._model=e;var t=e.getJobRoles(),i=a.default.ins().getNoDieRole();f.default.ins().register(this);for(var n=0;n<t.length;n++){var o=t[n];o.masterHandle=10*o.masterHandle,o.type=r.EntityType.Role;var s=this.enemyPoints[n]||l.default.getPosRangeRandom(i.x,i.y,i.dir,this.range+n);s?(o.x=l.default.grip2Point(s[0]),o.y=l.default.grip2Point(s[1])):(o.x=i.x,o.y=i.y),o.dir=u.default.dirOpposit(i.dir);var c=d.default.ins().createEntityByModel(o,Team.WillEntity);c.dir=u.default.dirOpposit(i.dir),c.AI_STATE=h.AI_State.Stand,c.updateNeiGong(),this.playTransferEffect(c),this.handles.push(o.handle),h.default.ins().add(c)}h.default.ins().start()},t.prototype.playTransferEffect=function(e){var t=new MovieClip;t.playFile(RES_DIR_SKILLEFF+"skill208",1),e.addChild(t),e.playAction(EntityAction.ATTACK)},t.prototype.getAward=function(e){for(var t=e.rewards,i=[],n=e.robPrecent,a=0;a<t.length;a++){var o=new RewardData;o.type=t[a].type,o.id=t[a].id,o.count=Math.ceil(t[a].count*n/100),1==this._data.type&&(o.count*=2),i.push(o)}return i},t.prototype.getCountAward=function(e){for(var t=[],i=0,n=e;i<n.length;i++)for(var a=n[i];a.count>0;){var o=new RewardData;o.type=a.type,o.id=a.id,o.count=a.count>10?10:a.count,t.push(o),a.count-=10}return t},t.prototype.getEnemyPoint=function(){for(var e=a.default.ins().getNoDieRole(),t=l.default.point2Grip(e.x),i=l.default.point2Grip(e.y),n=[],o=0,r=0,s=Math.random()>.5,u=0;u<8;u++){for(var c=s?u:7-u,d=this.range;d<this.range+3;d++){var f=l.default.getPosRangeByDir(t,i,c,d);f[2]&&(n[c]=n[c]||[],n[c].push(f))}if(n[c]&&n[c].length>=3)return n[c]}for(u=0;u<n.length;u++)n[u]&&n[u].length>r&&(r=n[u].length,o=u);return n[o]},t}(n.default);i.default=b,cc._RF.pop()},{"../../../core/base/BaseClass":"BaseClass","../../../core/utils/DirUtil":"DirUtil","../../ai/RoleAI":"RoleAI","../../base/EntityManager":"EntityManager","../../base/EntityType":"EntityType","../../entity/Actor":"Actor","../../entity/CharRole":"CharRole","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../../map/GameMap":"GameMap","../encounter/Encounter":"Encounter","../gamescene/GameLogic":"GameLogic","../heji/model/HejiUseMgr":"HejiUseMgr","../rolewin/UserSkill":"UserSkill","./MineData":"MineData"}],MineModel:[function(e,t,i){"use strict";cc._RF.push(t,"c3595px1DBDuZg+b+JzNG4m","MineModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../manager/GlobalConfig"),a=e("../../core/utils/DateUtils"),o=function(){function e(){}return Object.defineProperty(e.prototype,"npcConfig",{get:function(){var e=n.default.KuangYuanConfig[this.configID];return n.default.NpcBaseConfig[e.npcId]},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){this.index=e.readByte(),this.actorID=e.readInt(),this.name=e.readString(),this.power=e.readInt(),this.guildName=e.readString(),this.configID=e.readUnsignedByte(),this.startTime=a.default.formatMiniDateTime(e.readInt()),this.endTime=a.default.formatMiniDateTime(e.readInt()),this.isBeFight=e.readBoolean();var t=e.readByte();this.beFightActorID=[];for(var i=0;i<t;i++)this.beFightActorID[i]=e.readInt()},e}();i.default=o,cc._RF.pop()},{"../../core/utils/DateUtils":"DateUtils","../manager/GlobalConfig":"GlobalConfig"}],MineRecord:[function(e,t,i){"use strict";cc._RF.push(t,"ff1fbRvnARMIoKBMCMFt+YD","MineRecord");(function(){function e(){}e.prototype.parser=function(t){this.index=t.readShort(),this.type=t.readByte(),this.time=DateUtils.formatMiniDateTime(t.readInt()),this.type==e.TYPE_BEROB?(this.configID=t.readByte(),this.fighterActorID=t.readInt(),this.fighterName=t.readString(),this.fighterIsWin=t.readByte(),this.isBeatHim=t.readByte(),this.fighterJob=t.readByte(),this.fighterSex=t.readByte(),this.fighterPower=t.readInt()):(this.configID=t.readByte(),this.robActorID=t.readInt(),this.robMasterName=t.readString(),this.robIsWin=t.readByte())},e.TYPE_BEROB=1,e.TYPE_ROB=2})();cc._RF.pop()},{}],MineSceneInfo:[function(e,t,i){"use strict";var n;cc._RF.push(t,"2d079Kn9z5LXJ87PYsdlkto","MineSceneInfo"),function(e){e[e.fighting=1]="fighting",e[e.finished=2]="finished",e[e.addNew=3]="addNew",e[e.scene=4]="scene",e[e.updateMine=5]="updateMine",e[e.userInfo=6]="userInfo"}(n||(n={}));(function(){function e(){}e.prototype.parser=function(e){this.index=e.readShort(),this.type=e.readShort(),this.type==n.fighting?this.state=e.readByte():this.type==n.addNew?(this.mine=ObjectPool.pop("MineModel"),this.mine.parser(e)):this.type==n.scene?(this.sceneIndex=e.readShort(),this.isExitUp=!!e.readShort(),this.isExitDown=!!e.readShort()):this.type==n.updateMine?this.actorId=e.readInt():this.type==n.userInfo&&(this.mine=MineData.ins().getMineByIndex(this.index),this.mine&&this.mine.parser(e))},e.prototype.handler=function(){if(this.type==n.fighting)(e=MineData.ins().getMineByIndex(this.index))&&(e.isBeFight=1==this.state,(t=EntityManager.ins().getMineByIndex(this.index))&&t.updateTitleState());else if(this.type==n.finished)MineData.ins().remove(this.index);else if(this.type==n.addNew)MineData.ins().add(this.mine);else if(this.type==n.scene)MineData.ins().isExitUp=this.isExitUp,MineData.ins().isExitDown=this.isExitDown,MineData.ins().index=this.sceneIndex,MineData.ins().createTransfer();else if(this.type==n.updateMine){var e;if(e=MineData.ins().getMineByIndex(this.index))e.beFightActorID.push(this.actorId),(t=EntityManager.ins().getMineByIndex(this.index))&&t.updateTitleState()}else if(this.type==n.userInfo){var t;(t=EntityManager.ins().getMineByIndex(this.index))&&t.updateModel()}},e.prototype.destroy=function(){this.mine=null,ObjectPool.push(this)}})();cc._RF.pop()},{}],Mine:[function(e,t,i){"use strict";cc._RF.push(t,"0ec97vuSBRA3pDB4X3yLSdd","Mine"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../gamescene/GameLogic"),r=e("../recharge/Recharge"),s=e("../../map/GameMap"),u=e("../../base/ObjectPool"),l=e("../tips/UserTips"),c=e("./MineData"),d=e("../../manager/GlobalConfig"),f=e("../../../core/utils/DateUtils"),p=e("../server/GameServer"),h=e("../../entity/Actor"),g=e("../../../core/base/MessageCenter"),y=e("./MineFight"),v=function(e){function t(){var i=e.call(this)||this;return i.mineStartTime=0,i.mineEndTime=0,i.hasNewRecord=!1,i.sysId=a.PackageID.Mine,g.default.compile(t),i.regNetMsg(1,i.postMineBaseInfo),i.regNetMsg(2,i.postRefresh),i.regNetMsg(3,i.postStartMine),i.regNetMsg(4,i.postInitScene),i.regNetMsg(6,i.postMineRecord),i.regNetMsg(7,i.doReqResult),i.regNetMsg(8,i.postFightBackResult),i.regNetMsg(9,i.postEnemyAppear),i.regNetMsg(11,i.postSceneUpdate),i.regNetMsg(13,i.postRobResult),i.regNetMsg(15,i.postFinished),i.regNetMsg(16,i.postRecordHasUpdate),i.regNetMsg(17,i.postRoleInfo),i.observe(o.default.ins().postEnterMap,i.onEnterMap),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.onEnterMap=function(){s.default.sceneInMine()&&this.hasNewRecord&&!this.finishedData&&ViewManager.ins().open(MineRecordWin)},t.openCheck=function(e){var t=d.default.CaiKuangConfig.openServerDay;if(t>p.default.serverOpenDay+1)return e&&l.default.ins().showTips("\u5f00\u670d\u7b2c"+t+"\u5929\u5f00\u542f"),!1;var i=d.default.CaiKuangConfig.openLevel,n=h.default.level>=i;return n||(e&&l.default.ins().showTips(i+"\u7ea7\u5f00\u542f"),!1)},t.redpointCheck=function(){var e=this.openCheck();if(!e)return e;var i=r.default.ins().franchise?d.default.PrivilegeData.addKuangCount:0;return!!(t.ins().finishedData||t.ins().mineCount<d.default.CaiKuangConfig.maxOpenKuangCount+i&&t.ins().isOverTime()||t.ins().hasNewRecord)&&e},t.prototype.isOverTime=function(){return!t.ins().mineEndTime||p.default.serverTime>t.ins().mineEndTime},t.prototype.postRedPoint=function(){return t.redpointCheck()?1:0},t.prototype.postMineFightState=function(e){return e},t.prototype.postMineBaseInfo=function(e){this.mineCount=e.readShort(),this.robCount=e.readShort(),this.mineId=e.readInt(),this.mineFreshCount=e.readInt(),this.mineQuaCount=e.readInt(),this.mineEndTime=f.default.formatMiniDateTime(e.readInt()),this.mineId||(this.finishedData=null),t.ins().postRedPoint()},t.prototype.postRefresh=function(e){this.mineId=e.readInt(),this.mineFreshCount=e.readInt();var i=e.readInt();if(i>this.mineQuaCount){var n=d.default.KuangYuanConfig[t.ins().mineId],a=Math.floor(n.maxTimes/n.baseTime);l.default.ins().showTips("\u5347\u7ea7\u5931\u8d25\uff0c\u795d\u798f\u503c+"+a)}this.mineQuaCount=i},t.prototype.postStartMine=function(e){this.mineCount=e.readShort(),t.ins().postRedPoint()},t.prototype.postInitScene=function(e){c.default.ins().parser(e)},t.prototype.postMineRecord=function(e){var i=e.readShort();this.mineRecords=this.mineRecords||[],this.mineRecords.length=i;for(var n=0;n<i;n++)this.mineRecords[n]=this.mineRecords[n]||new MineRecord,this.mineRecords[n].parser(e);this.hasNewRecord=!1,t.ins().postRedPoint()},t.prototype.doReqResult=function(e){e.readBoolean()?y.default.ins().start({type:0,id:this.robData.configID,actorID:this.robData.actorID}):l.default.ins().showTips("\u4e0d\u53ef\u63a0\u593a")},t.prototype.postFightBackResult=function(e){for(var t=e.readBoolean(),i=e.readInt(),n=0,a=this.mineRecords;n<a.length;n++){var o=a[n];if(o.index==i){o.isBeatHim=t?1:0;break}}},t.prototype.postEnemyAppear=function(e){var t=new MineEnemyModel;return t.parser(e),t},t.prototype.postSceneUpdate=function(e){var t=u.default.shift(MineSceneInfo);t.parser(e),t.handler(),t.destroy()},t.prototype.postRobResult=function(e){this.robCount=e.readShort()},t.prototype.postFinished=function(e){this.mineStartTime=0,this.mineEndTime=0,this.finishedData={},this.finishedData.configID=e.readShort(),this.finishedData.beRob=[];for(var i=e.readShort(),n=0;n<i;n++){var a={};a.name=e.readString(),a.win=e.readBoolean(),this.finishedData.beRob.push(a)}this.openRobWin(),t.ins().postRedPoint()},t.prototype.openRobWin=function(){s.default.sceneInMine()&&!y.default.ins().isFighting&&this.finishedData&&ViewManager.ins().open(MineRobWin,this.finishedData)},t.prototype.postRecordHasUpdate=function(e){return this.hasNewRecord=!0,t.ins().postRedPoint(),1},t.prototype.postRoleInfo=function(e){return e.readDouble()},t.prototype.sendIntoMine=function(){this.sendBaseProto(1)},t.prototype.sendRefresh=function(e){if(e){var t=this.getBytes(2);t.writeShort(e),this.sendToServer(t)}else this.sendBaseProto(2)},t.prototype.sendStart=function(){this.sendBaseProto(3)},t.prototype.sendGetAward=function(e){void 0===e&&(e=!1);var t=this.getBytes(5);t.writeShort(e?1:0),this.sendToServer(t)},t.prototype.sendGetRecord=function(){this.sendBaseProto(6)},t.prototype.sendRob=function(e){this.robData=e;var t=e.actorID,i=this.getBytes(7);i.writeInt(t),this.sendToServer(i)},t.prototype.sendFightBack=function(e){var t=this.getBytes(8);t.writeInt(e),this.sendToServer(t)},t.prototype.sendFightBackResult=function(e,t){var i=this.getBytes(10);i.writeInt(e?1:0),i.writeInt(t),this.sendToServer(i)},t.prototype.sendQuickFinish=function(){this.sendBaseProto(12)},t.prototype.sendRobResult=function(e,t,i){var n=this.getBytes(13);n.writeInt(e?1:0),this.sendToServer(n)},t.prototype.sendSceneChange=function(e){var t=this.getBytes(14);t.writeShort(e?1:0),this.sendToServer(t)},t.prototype.sendGetRolePower=function(e){var t=this.getBytes(17);t.writeInt(e),this.sendToServer(t)},t}(n.default);i.default=v,window.GameSystem.push(v.ins.bind(v)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../base/BaseSystem":"BaseSystem","../../base/ObjectPool":"ObjectPool","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../../map/GameMap":"GameMap","../gamescene/GameLogic":"GameLogic","../recharge/Recharge":"Recharge","../server/GameServer":"GameServer","../tips/UserTips":"UserTips","./MineData":"MineData","./MineFight":"MineFight"}],MoneyConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9e2c0uwdKdMc7uXy+funTdd","MoneyConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],MoneyConst:[function(e,t,i){"use strict";cc._RF.push(t,"22db1pzjBxKspUjYFfEYQRK","MoneyConst"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.exp=0]="exp",e[e.gold=1]="gold",e[e.yuanbao=2]="yuanbao",e[e.fame=3]="fame",e[e.soul=4]="soul",e[e.wing=5]="wing",e[e.feat=7]="feat",e[e.rune=9]="rune",e[e.piece=10]="piece",e[e.punch1=11]="punch1",e[e.punch2=12]="punch2",e[e.godweaponExp=13]="godweaponExp",e[e.weiWang=14]="weiWang",e[e.chip=15]="chip",e[e.shoushenExp=16]="shoushenExp"}(i.MoneyConst||(i.MoneyConst={})),cc._RF.pop()},{}],MonsterSpeakConfig:[function(e,t,i){"use strict";cc._RF.push(t,"0275dy+PxpAAIQH8GdmC8vb","MonsterSpeakConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],MonsterSpeak:[function(e,t,i){"use strict";cc._RF.push(t,"f0ec44QDeVFK5sLugAfgM8/","MonsterSpeak"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("../gamescene/GameLogic"),r=e("../../map/GameMap"),s=e("../../entity/CharRole"),u=e("../../manager/GlobalConfig");(function(e){e[e.appear=1]="appear",e[e.hit=2]="hit",e[e.die=3]="die"})(n||(n={})),function(e){function t(){var t=e.call(this)||this;return t.speakDic={},t.observe(o.default.ins().postHpChange,function(e){var i=e[0],a=e[1];40001==r.default.fubenID&&(i instanceof s.default||t.trigger(i.infoModel.configID,a>0?n.hit:n.die))}),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.clear=function(){this.speakDic={}},t.prototype.trigger=function(e,t){if((!this.speakDic[e]||!this.speakDic[e][t])&&u.default.MonsterSpeakConfig){var i=u.default.MonsterSpeakConfig[e];i&&i[t]&&(this.postMonsterSpeak(i[t].speak),this.speakDic[e]=this.speakDic[e]||{},this.speakDic[e][t]=1)}},t.prototype.postMonsterSpeak=function(e){return e},t}(a.default).ins(),cc._RF.pop()},{"../../base/BaseSystem":"BaseSystem","../../entity/CharRole":"CharRole","../../manager/GlobalConfig":"GlobalConfig","../../map/GameMap":"GameMap","../gamescene/GameLogic":"GameLogic"}],MonsterTitleConf:[function(e,t,i){"use strict";cc._RF.push(t,"9f19eyY1ilJLJzQ5lsQWspQ","MonsterTitleConf"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],MonstersConfig:[function(e,t,i){"use strict";cc._RF.push(t,"313d13YjWNF8aLL2nfhi0H9","MonstersConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=function(){return function(){this.attrange=0,this.wanderrange=0,this.dirNum=2}}();i.default=a,function(e){e[e.Monster=0]="Monster",e[e.Boss=1]="Boss",e[e.Summon=3]="Summon",e[e.Ring=4]="Ring"}(n||(n={})),cc._RF.pop()},{}],MonstershpConfig:[function(e,t,i){"use strict";cc._RF.push(t,"acc44GAZJBNcYJEi3vdxl/0","MonstershpConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.hp=0,this.typeface=0}}();i.default=n,cc._RF.pop()},{}],MonthCardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"847b4we+fZBs7FeO3F0btmU","MonthCardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.monthCardMoney=0,this.privilegeMoney=0,this.expFubenPrecent=0,this.neiGongGoldPrecent=0,this.sweepPrecent=0}}();i.default=n,cc._RF.pop()},{}],MonthCardIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"91eaczjokdP/7/xRsp6Pp1f","MonthCardIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../recharge/Recharge"),r=e("../../../consts/SystemConst"),s=e("../../opensystem/OpenSystem"),u=e("../../expgold/UserExpGold"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postLevelChange,u.default.ins().postExpUpdate],n}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=!0;return o.default.ins().monthDay>0&&o.default.ins().franchise>0&&(e=!1),s.default.ins().checkSysOpen(r.SystemType.MONTHCARD)&&e},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.getEffName=function(e){if(this.firstTap)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){var e=2;o.default.ins().monthDay>0&&(e=3),ViewManager.ins().open(FuliWin,e),this.firstTap=!1,this.update()},t}(n.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../expgold/UserExpGold":"UserExpGold","../../opensystem/OpenSystem":"OpenSystem","../../recharge/Recharge":"Recharge","./RuleIconBase":"RuleIconBase"}],MonthSignBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"526acN2KlpEvJriAVLZTADF","MonthSignBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.openLevel=0}}();i.default=n,cc._RF.pop()},{}],MonthSignConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ba097MyeY5Ds6Cv+iMF4ny6","MonthSignConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.month=0,this.day=0,this.rewards=null,this.dayLabel=0,this.vipLabel=0}}();i.default=n,cc._RF.pop()},{}],MonthSignDaysConfig:[function(e,t,i){"use strict";cc._RF.push(t,"0c25e527ItI3ZE837pm4Sko","MonthSignDaysConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.days=0,this.rewards=null}}();i.default=n,cc._RF.pop()},{}],MonthSignVipConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9bc93UrIgFGA77VyJxdCT8H","MonthSignVipConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.vipLevel=0,this.complementTimes=0}}();i.default=n,cc._RF.pop()},{}],MorshipConfig:[function(e,t,i){"use strict";cc._RF.push(t,"11946eDZa5J+Zfhy0a9FOxd","MorshipConfig");cc._RF.pop()},{}],MostEntityCtroller:[function(e,t,i){"use strict";cc._RF.push(t,"7eb4c0Id0lKfa8vtfAcSzR6","MostEntityCtroller"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./core/utils/MathUtils"),a=e("./game/module/gamescene/GameSceneCtr"),o=cc._decorator,r=o.ccclass,s=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.proInterTime=1,t.proStartTime=0,t.atkStartTime=0,t.isMove=!1,t.isAtk=!1,t.selfPos=0,t.blood=200,t.atkharm=1,t}return __extends(t,e),t.prototype.start=function(){this.dightMap=a.default.ins().dightMap,this.selfPos=this.node.selfPos,this.proInterTime=n.default.limitFloat(1.2,4.5),this.startAi()},t.prototype.onHit=function(e){if(cc.director.emit("piao",e,this.node.position),this.blood-=e,this.blood<=0)for(var t=a.default.ins().entityList,i=0;i<t.length;i++){if(t[i]==this.node)a.default.ins().dightMap[this.selfPos].e=0,t.splice(i,1)[0].destroy()}},t.prototype.initData=function(e,t){this.atkharm=e,this.blood=t},t.prototype.startAi=function(){this.isMove=!0},t.prototype.searchSelfPos=function(){var e=[];return this.selfPos-6>=0&&e.push(this.selfPos-6),this.selfPos+6<=35&&e.push(this.selfPos+6),0!=this.selfPos&&this.selfPos%6!=0&&e.push(this.selfPos-1),(this.selfPos+1)%6!=0&&e.push(this.selfPos+1),0!=this.selfPos&&this.selfPos%6!=0&&this.selfPos-6>=0&&e.push(this.selfPos-7),(this.selfPos+1)%6!=0&&this.selfPos-6>=0&&e.push(this.selfPos-5),0!=this.selfPos&&this.selfPos%6!=0&&this.selfPos+6<=35&&e.push(this.selfPos+5),(this.selfPos+1)%6!=0&&this.selfPos+6<=35&&e.push(this.selfPos+7),e},t.prototype.update=function(e){this.isMove&&(this.proStartTime+=e,this.proStartTime>this.proInterTime&&(this.tryAttack()||this.tryMove(),this.proInterTime=n.default.limitFloat(.8,1.5),this.proStartTime=0));this.isAtk&&(this.atkStartTime+=e,this.atkStartTime>1&&(this.atkStartTime=0))},t.prototype.tryAttack=function(){for(var e=this.searchSelfPos(),t=0;t<e.length;t++)if(2==this.dightMap[e[t]].e){this.isMove=!1,this.isAtk=!0;break}return this.isAtk},t.prototype.tryMove=function(){var e=n.default.randomArray([0,1,2,3]);if(0==e){if(this.selfPos-6>=0)if(this.dightMap[this.selfPos-6].e>0);else{this.dightMap[this.selfPos].e=0;var t=this.dightMap[this.selfPos-6].p;this.node.position=t,this.selfPos=this.selfPos-6,this.dightMap[this.selfPos].e=1}}else if(1==e){if(this.selfPos+6<=35)if(this.dightMap[this.selfPos+6].e>0);else{this.dightMap[this.selfPos].e=0;t=this.dightMap[this.selfPos+6].p;this.node.position=t,this.selfPos=this.selfPos+6,this.dightMap[this.selfPos].e=1}}else if(2==e){if(0!=this.selfPos&&this.selfPos%6!=0)if(this.dightMap[this.selfPos-1].e>0);else{this.dightMap[this.selfPos].e=0;t=this.dightMap[this.selfPos-1].p;this.node.position=t,this.selfPos=this.selfPos-1,this.dightMap[this.selfPos].e=1}}else if(3==e&&(this.selfPos+1)%6!=0)if(this.dightMap[this.selfPos+1].e>0);else{this.dightMap[this.selfPos].e=0;t=this.dightMap[this.selfPos+1].p;this.node.position=t,this.selfPos=this.selfPos+1,this.dightMap[this.selfPos].e=1}},t=__decorate([r],t)}(cc.Component));i.default=s,cc._RF.pop()},{"./core/utils/MathUtils":"MathUtils","./game/module/gamescene/GameSceneCtr":"GameSceneCtr"}],MultiDayRechargeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"63530wpo6FAm6qSxAtmtcsT","MultiDayRechargeConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],NeiGongBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"344deSS4dFFyLAvLk3se/JF","NeiGongBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.openLevel=10,this.maxLevel=20,this.maxStage=0,this.levelPerStage=0,this.openGuanqia=10}}();i.default=n,cc._RF.pop()},{}],NeiGongModel:[function(e,t,i){"use strict";cc._RF.push(t,"5e6554smpNCW4Vct+gIAT9M","NeiGongModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../fb/UserFb"),o=e("../../../manager/GlobalConfig"),r=e("../../../entity/SubRoles"),s=e("../../../entity/Actor"),u=cc._decorator,l=u.ccclass,c=(u.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.neiGongList=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.canUp=function(){if(a.default.ins().guanqiaID<o.default.NeiGongBaseConfig.openGuanqia)return!1;for(var e=Math.min(r.default.ins().subRolesLen,this.neiGongList.length),t=0;t<e;t++)if(this.canUpById(t))return!0;return!1},t.prototype.canUpById=function(e){if(this.neiGongList[e]){if(a.default.ins().guanqiaID<=o.default.NeiGongBaseConfig.openGuanqia)return!1;if(this.neiGongList[e].stage>=o.default.NeiGongBaseConfig.maxStage)return!1;if(this.neiGongList[e].canMix||this.neiGongList[e].getCanLevelUp())return!0}return!1},t=__decorate([l],t)}(n.default));i.default=c;var d=function(){function e(){this.roleId=0,this.level=0,this.stage=0,this.exp=0}return e.prototype.parse=function(e){this.level=e.readInt(),this.stage=e.readInt(),this.exp=e.readInt();o.default.NeiGongStageConfig[this.stage][this.level];this.canMix=this.level>0&&this.level%o.default.NeiGongBaseConfig.levelPerStage==0},e.prototype.getCanLevelUp=function(){var e=o.default.NeiGongStageConfig[this.stage][this.level];if(!e)return!1;var t=e.totalExp-this.exp,i=Math.ceil(t/e.addExp);return s.default.gold>=i*e.costMoney&&s.default.gold>=1e6},e}();i.NeiGongData=d,cc._RF.pop()},{"../../../../core/base/BaseClass":"BaseClass","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../../manager/GlobalConfig":"GlobalConfig","../../fb/UserFb":"UserFb"}],NeiGongStageConfig:[function(e,t,i){"use strict";cc._RF.push(t,"342526qsk9KS4FE34UPDX4V","NeiGongStageConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.stage=0,this.level=0,this.totalExp=0,this.costMoney=0,this.addExp=0,this.attribute=[],this.tips=0}}();i.default=n,cc._RF.pop()},{}],NeiGongWin:[function(e,t,i){"use strict";cc._RF.push(t,"af67dpLxXJIKLxQ1IL9zzvs","NeiGongWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseView"),a=e("../../../enum/LayerManager"),o=e("../../../../core/base/AttributeData"),r=e("../NeiGong"),s=e("../../sound/SoundUtil"),u=e("../../../manager/TimerManager"),l=e("../../tips/UserTips"),c=e("../../shop/Shop"),d=e("../model/NeiGongModel"),f=e("../../../manager/GlobalConfig"),p=e("../../../../core/utils/TextFlowMaker"),h=e("../../../entity/Actor"),g=e("../../recharge/Recharge"),y=e("../../bag/UserBag"),v=e("../../fb/UserFb"),m=e("../../../../core/base/MessageCenter"),b=cc._decorator,_=b.ccclass,C=b.property,I=function(e){function t(){var t=e.call(this)||this;return t.parentRoot=a.LayerManager.UI_Main,t.UplevelBtn0=null,t.mixBtn=null,t.upBtn=null,t.oneKeyUp=null,t.costInfo=null,t.redPoint0=null,t.redPoint1=null,t.redPointAct0=null,t.showAct=null,t.Activation=null,t.level=null,t.value=null,t.costlable=null,t.expLabel=null,t.maxDesc=null,t.activeTipsTxt0=null,t.curRole=0,t.canUp=!1,t.isNext=!1,t.isAutoUp=!1,t.signLevel=0,t.toHeight=0,t.mcWidth=160,t.mcHeight=160,t._currHeight=0,m.default.compile(i),t}var i;return __extends(t,e),i=t,t.prototype.childrenCreated=function(){this.init()},t.prototype.init=function(){var e=d.default.ins().neiGongList[this.curRole];console.log("NeiGongModel.ins().neiGongList:",d.default.ins().neiGongList);e&&e.level;for(var t=0;t<10;t++);},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.curRole=e[0],this.lastLevel=-1,this.addTouchEvent(this.upBtn,this.onClick.bind(this,this.upBtn)),this.addTouchEvent(this.mixBtn,this.onClick.bind(this,this.mixBtn)),this.addTouchEvent(this.oneKeyUp,this.onClick.bind(this,this.oneKeyUp)),this.addTouchEvent(this.UplevelBtn0,this.onClick.bind(this,this.UplevelBtn0)),this.observe(r.default.ins().postNeiGongDataChange,this.refushPanelInfo),this.observe(h.default.ins().postLevelChange,this.setBtnStatuBarinfo),this.observe(r.default.ins().postNeiGongAct,this.showActPanel),this.refushPanelInfo(!0),this.showActPanel()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeObserve(),this.removeTouchEvent(this.upBtn,this.onClick.bind(this,this.upBtn)),this.removeTouchEvent(this.mixBtn,this.onClick.bind(this,this.mixBtn)),this.removeTouchEvent(this.oneKeyUp,this.onClick.bind(this,this.oneKeyUp)),this.removeTouchEvent(this.UplevelBtn0,this.onClick.bind(this,this.UplevelBtn0)),this.seteffectPost(),this.stopAutoUp()},t.openCheck=function(){var e=f.default.NeiGongBaseConfig.openLevel;return!(h.default.level<e)||(l.default.ins().showTips(e+"\u7ea7\u5f00\u542f\u5185\u529f"),!1)},t.prototype.showActPanel=function(){this.showAct.active=r.default.ins().ngList[this.curRole]>0,this.showAct.active?this.Activation.active=!1:this.Activation.active=!0,this.Activation.active=!this.showAct.active;var e=f.default.NeiGongBaseConfig.openGuanqia;v.default.ins().guanqiaID<=e&&(this.redPointAct0.active=!1),this.activeTipsTxt0.string="\u95ef\u5173\u8fbe\u5230 \u7b2c"+(e+1)+" \u5373\u53ef\u6fc0\u6d3b\u5185\u529f"},t.prototype.onChange=function(){this.stopAutoUp(),this.refushPanelInfo()},t.prototype.refushPanelInfo=function(e){console.log("NeiGongModel.ins().neiGongList:",d.default.ins().neiGongList),this.data=d.default.ins().neiGongList[this.curRole],this.data&&(this.cruLevelCfg=f.default.NeiGongStageConfig[this.data.stage][this.data.level],this.cruLevelCfg&&(this.lastLevel!=this.data.level&&this.effectShow(e),this.lastLevel=this.data.level,this.setAttrCost(),this.setPowerShow(),this.setBtnStatuBarinfo(),this.seteffectPost()))},t.prototype.setPowerShow=function(){this._totalPower=y.default.getAttrPower(this.cruLevelCfg.attribute),this.level.string="\u4ed9\u529b\u503c:"+this._totalPower},t.prototype.setAttrCost=function(){var e=0,t=f.default.MonthCardConfig.neiGongGoldPrecent/100,i=g.default.ins().getIsForeve()?1-t:1;this.data.canMix||(e=Math.floor(this.cruLevelCfg.costMoney*i));var n="";n=h.default.gold>=e?"|C:0x35e62d&T:":"|C:0xf3311e&T:",this.canUp=h.default.gold>=e,this.costlable.string=p.default.generateTextFlow(n+e);var a=this.cruLevelCfg.attribute;a.sort(o.default.sortAttribute);for(var r=a.length,s=0;s<3;s++)cc.find("attr"+s,this.showAct).getComponent(cc.Label).string=r>s?o.default.getAttStrByType(a[s],1):"";var u=0,l=0;this.data.level==f.default.NeiGongBaseConfig.levelPerStage?(u=this.data.stage+1,l=0):(u=this.data.stage,l=this.data.level+1);var c=f.default.NeiGongStageConfig[u],d=c?c[l]:null;if(d){var y="",v=d.attribute;v.sort(o.default.sortAttribute);for(s=0;s<3;s++){if(r>s){var m=a[s];y=this.getAttrByType(v,m)}cc.find("addAttr"+s,this.showAct).getComponent(cc.Label).string=y,cc.find("arrow"+s,this.showAct).active=""!=y}this.isNext=!0}else{for(s=0;s<3;s++)cc.find("addAttr"+s,this.showAct).getComponent(cc.Label).string="",cc.find("arrow"+s,this.showAct).active=!1;this.isNext=!1}},t.prototype.effectShow=function(e){},t.prototype.setBtnStatuBarinfo=function(){var e=this.data.canMix;this.upBtn.active=!e&&this.isNext,this.mixBtn.active=e,this.redPoint1.active=!1,this.redPoint0.active=!1,this.costInfo.active=!e&&this.isNext,this.maxDesc.node.active=!this.isNext,e?(this.expLabel.string="",this.upDataExpMcBall(this.cruLevelCfg.totalExp,this.cruLevelCfg.totalExp)):this.cruLevelCfg&&(this.upDataExpMcBall(this.data.exp,this.cruLevelCfg.totalExp),this.expLabel.string=this.data.exp+"/"+this.cruLevelCfg.totalExp)},t.prototype.onClick=function(e){var t=this;if(this.isNext)switch(e){case this.upBtn:this.canUp?(r.default.ins().sendNeiGongUpLevel(this.curRole),s.default.ins().playEffect(s.default.SKILL_UP)):c.default.openBuyGoldWin(!1)||l.default.ins().showTips("\u91d1\u5e01\u4e0d\u8db3");break;case this.mixBtn:u.default.ins().doTimer(400,1,function(){r.default.ins().sendNeiGongUpStage(t.curRole),s.default.ins().playEffect(s.default.SKILL_UP)},this);break;case this.oneKeyUp:if(this.isAutoUp)this.stopAutoUp();else{if(!this.canUp)return void l.default.ins().showTips("\u91d1\u5e01\u4e0d\u8db3");this.isAutoUp=!0,this.oneKeyUp.getChildByName("label").getComponent(cc.Label).string="\u505c \u6b62",u.default.ins().doTimer(300,0,this.autoUpStar,this)}break;case this.UplevelBtn0:r.default.ins().sendNeiGongAct(this.curRole)}else l.default.ins().showTips("\u5185\u529f\u5df2\u6ee1\u7ea7")},t.prototype.stopAutoUp=function(){this.isAutoUp=!1,this.oneKeyUp&&(this.oneKeyUp.getChildByName("label").getComponent(cc.Label).string="\u4e00\u952e\u4fee\u70bc"),u.default.ins().remove(this.autoUpStar,this)},t.prototype.autoUpStar=function(){this.canUp&&0==this.data.canMix&&this.isNext?(r.default.ins().sendNeiGongUpLevel(this.curRole),s.default.ins().playEffect(s.default.SKILL_UP)):this.stopAutoUp()},t.prototype.moveEffectIn=function(){},t.prototype.getAttrByType=function(e,t){for(var i=e.length,n=0;n<i;n++)if(e[n].type==t.type&&e[n].value!=t.value)return" "+o.default.getAttStrByType(e[n],1,"",!1,!1);return""},t.prototype.seteffectPost=function(){},t.prototype.upDataExpMcBall=function(e,t){this.toHeight=this.mcHeight*(e/t),this.currHeight=this.toHeight>=this.mcHeight?this.mcHeight:this.toHeight},Object.defineProperty(t.prototype,"currHeight",{get:function(){return this._currHeight},set:function(e){this._currHeight=e;this.mcHeight,Math.floor(this._currHeight)},enumerable:!0,configurable:!0}),t.prototype.destoryView=function(){},__decorate([C({type:cc.Node,displayName:"UplevelBtn0"})],t.prototype,"UplevelBtn0",void 0),__decorate([C({type:cc.Node,displayName:"mixBtn"})],t.prototype,"mixBtn",void 0),__decorate([C({type:cc.Node,displayName:"upBtn"})],t.prototype,"upBtn",void 0),__decorate([C({type:cc.Node,displayName:"oneKeyUp"})],t.prototype,"oneKeyUp",void 0),__decorate([C({type:cc.Node,displayName:"costInfo"})],t.prototype,"costInfo",void 0),__decorate([C({type:cc.Node,displayName:"redPoint0"})],t.prototype,"redPoint0",void 0),__decorate([C({type:cc.Node,displayName:"redPoint1"})],t.prototype,"redPoint1",void 0),__decorate([C({type:cc.Node,displayName:"redPointAct0"})],t.prototype,"redPointAct0",void 0),__decorate([C({type:cc.Node,displayName:"showAct"})],t.prototype,"showAct",void 0),__decorate([C({type:cc.Node,displayName:"Activation"})],t.prototype,"Activation",void 0),__decorate([C({type:cc.Label,displayName:"level"})],t.prototype,"level",void 0),__decorate([C({type:cc.Label,displayName:"value"})],t.prototype,"value",void 0),__decorate([C({type:cc.RichText,displayName:"costlable"})],t.prototype,"costlable",void 0),__decorate([C({type:cc.Label,displayName:"expLabel"})],t.prototype,"expLabel",void 0),__decorate([C({type:cc.Label,displayName:"maxDesc"})],t.prototype,"maxDesc",void 0),__decorate([C({type:cc.Label,displayName:"activeTipsTxt0"})],t.prototype,"activeTipsTxt0",void 0),t=i=__decorate([_],t)}(n.default);i.default=I,cc._RF.pop()},{"../../../../core/base/AttributeData":"AttributeData","../../../../core/base/MessageCenter":"MessageCenter","../../../../core/utils/TextFlowMaker":"TextFlowMaker","../../../../core/view/BaseView":"BaseView","../../../entity/Actor":"Actor","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../../manager/TimerManager":"TimerManager","../../bag/UserBag":"UserBag","../../fb/UserFb":"UserFb","../../recharge/Recharge":"Recharge","../../shop/Shop":"Shop","../../sound/SoundUtil":"SoundUtil","../../tips/UserTips":"UserTips","../NeiGong":"NeiGong","../model/NeiGongModel":"NeiGongModel"}],NeiGong:[function(e,t,i){"use strict";cc._RF.push(t,"edb0bhBCClAfa7Q8H2hPx8D","NeiGong"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("../../../core/net/PackageID"),r=e("./model/NeiGongModel"),s=e("../../../core/base/MessageCenter"),u=cc._decorator,l=u.ccclass,c=(u.property,function(e){function t(){var t=e.call(this)||this;return t.isActList={},t.isShow=!1,t.ngList={},t.sysId=o.PackageID.NeiGong,t.regNetMsg(1,t.postNeiGongDataChange),t.regNetMsg(3,t.postNeiGongAct),s.default.compile(i),t}var i;return __extends(t,e),i=t,t.ins=function(){return e.ins.call(this)},t.prototype.postNeiGongDataChange=function(e){var t=e.readShort();r.default.ins().neiGongList[t]||(r.default.ins().neiGongList[t]=new r.NeiGongData);var i=r.default.ins().neiGongList[t];i.roleId=t,i.parse(e);var n=e.readBoolean();this.isActList[t]||(this.isActList[t]={}),this.isActList[t].act=n?1:0,this.ngList[t]=n?1:0},t.prototype.postNeiGongAct=function(e){var t=e.readShort(),i=e.readInt();this.ngList[t]=i,this.isActList[t].isShow=!1,0==this.isActList[t].act&&1==i&&(this.isActList[t].isShow=!0),this.isActList[t].act=i},t.prototype.sendNeiGongUpLevel=function(e){var t=this.getBytes(1);t.writeShort(e),this.sendToServer(t)},t.prototype.sendNeiGongUpStage=function(e){var t=this.getBytes(2);t.writeShort(e),this.sendToServer(t)},t.prototype.sendNeiGongAct=function(e){var t=this.getBytes(3);t.writeShort(e),this.sendToServer(t)},t=i=__decorate([l],t)}(a.default));i.default=c,function(e){e.neigong=c.ins.bind(c)}(n||(n={})),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","./model/NeiGongModel":"NeiGongModel"}],NetInterface:[function(e,t,i){"use strict";cc._RF.push(t,"d9f8b+CV69FyKwnUdCjOtad","NetInterface"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],NewArtifactData:[function(e,t,i){"use strict";cc._RF.push(t,"c883cPU2xxNZJFOwPxNikS8","NewArtifactData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../manager/GlobalConfig"),a=function(){function e(){this.id=0,this.record=0,this.open=!1,this.exitRecord=0}return e.prototype.isChipExit=function(e){return 1==(this.exitRecord>>e&1)},e.prototype.isChipOpen=function(e){return 1==(this.record>>e&1)},e.prototype.getChipLength=function(){return n.default.ImbaConf[this.id].jigsawId.length},e.prototype.getNextChipId=function(){for(var e=n.default.ImbaConf[this.id],t=0;t<e.jigsawId.length;t++)if(!this.isChipExit(t))return e.jigsawId[t];return null},e.prototype.remindNumToOpen=function(){for(var e=this.getConf(),t=0,i=0;i<e.jigsawId.length;i++)this.isChipExit(i)||t++;return t},e.prototype.getConf=function(){for(var e in n.default.ImbaConf)if(n.default.ImbaConf[e].id==this.id)return n.default.ImbaConf[e]},e}();i.default=a,cc._RF.pop()},{"../../manager/GlobalConfig":"GlobalConfig"}],NewEquip:[function(e,t,i){"use strict";cc._RF.push(t,"c46f0fDulBNyLfGQOggiOYL","NewEquip"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../rolewin/UserEquip"),o=e("../opensystem/OpenSystem"),r=e("../../consts/SystemConst"),s=e("../../config/ItemConfig"),u=e("../../entity/SubRoles"),l=e("../zs/UserZs"),c=e("../../entity/Actor"),d=function(e){function t(){var t=e.call(this)||this;return t.observe(a.default.ins().postEquipChange,t.callBack),t.equipsList=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.check=function(){return!!o.default.ins().checkSysOpen(r.SystemType.NEWEQUIP)},t.prototype.callBack=function(){},t.prototype.addItem=function(e){if(e&&this.check()){var t=s.default.getSubType(e.itemConfig),i=s.default.getJob(e.itemConfig),n=u.default.ins().getSubRoleByIndex(0);if(n.job==i&&l.default.ins().lv>=(e.itemConfig.zsLevel||0)&&c.default.level>=(e.itemConfig.level||1)){for(var a=!1,o=0;o<this.equipsList.length;o++){var r=this.equipsList[o],d=s.default.getSubType(r.itemConfig);if(0==o&&t==d){if(t==d){a=!0,this.compareEquip(r,e)&&this.equipsList.push(e);break}}else if(t==d){a=!0,this.compareEquip(r,e)&&(this.equipsList[o]=e);break}}if(!a){var f=n.equipsData[t];f&&f.item&&f.item.itemConfig?this.compareEquip(f.item,e)&&this.equipsList.push(e):this.equipsList.push(e)}}}},t.prototype.compareEquip=function(e,t){var i=e.point;return t.point>i},t}(n.default);i.default=d,window.GameSystem.push(d.ins.bind(d)),cc._RF.pop()},{"../../base/BaseSystem":"BaseSystem","../../config/ItemConfig":"ItemConfig","../../consts/SystemConst":"SystemConst","../../entity/Actor":"Actor","../../entity/SubRoles":"SubRoles","../opensystem/OpenSystem":"OpenSystem","../rolewin/UserEquip":"UserEquip","../zs/UserZs":"UserZs"}],NewFuncNoticeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f05e7q0n4BIQolfIq/fihKX","NewFuncNoticeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],NewRoleConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2a0ddbG5aJHpJLiktuUP8V8","NewRoleConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],NewWorldBossAttrConfig:[function(e,t,i){"use strict";cc._RF.push(t,"af0d2tEtw5EeLG8nFKecb+/","NewWorldBossAttrConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],NewWorldBossBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a1b93r+eAJEtqnAha1Pha+q","NewWorldBossBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],NewWorldBossData:[function(e,t,i){"use strict";cc._RF.push(t,"857315NyoVD+JAHnvtth8su","NewWorldBossData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./WorldBossRankItemData"),a=function(){return function(){this.addAttrNum=0}}();i.default=a;var o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(n.default);i.NewWorldBossRankData=o,cc._RF.pop()},{"./WorldBossRankItemData":"WorldBossRankItemData"}],NewWorldBossIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"a745eloiK1AZbMCbmRhPCN7","NewWorldBossIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../boss/UserBoss"),o=e("../../../manager/TimerManager"),r=e("../../server/GameServer"),s=e("../../../../core/utils/DateUtils"),u=e("../../../manager/GlobalConfig"),l=e("../../../manager/UILoadMgr"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=n.updateMessage=[a.default.ins().postNewBossOpen],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return this.alertText=cc.instantiate(l.default.inst.getPrefab(l.prefabName.common_lab)).getComponent(cc.Label),a.default.ins().newWorldBossData.startTime?(this.runTime(),o.default.ins().isExists(this.runTime,this)||o.default.ins().doTimer(1e3,0,this.runTime,this)):this.alertText.string="\u6d3b\u52a8\u7ed3\u675f",t},t.prototype.runTime=function(){var e=Math.floor((a.default.ins().newWorldBossData.startTime-r.default.serverTime)/1e3);e>=0?this.alertText.string=s.default.getFormatBySecond(e,s.default.TIME_FORMAT_12):1e3*u.default.NewWorldBossBaseConfig.bossTime+a.default.ins().newWorldBossData.startTime>r.default.serverTime?this.alertText.string="":(this.alertText.string="\u6d3b\u52a8\u7ed3\u675f",o.default.ins().remove(this.runTime,this),this.updateShow())},t.prototype.checkShowIcon=function(){if(!r.default.serverOpenDay)return!1;var e=a.default.ins().newWorldBossData.isOpen;return e&&a.default.ins().newWorldBossData.startTime&&(o.default.ins().isExists(this.runTime,this)||o.default.ins().doTimer(1e3,0,this.runTime,this)),e},t.prototype.checkShowRedPoint=function(){return r.default.serverTime>a.default.ins().newWorldBossData.startTime&&1e3*u.default.NewWorldBossBaseConfig.bossTime+a.default.ins().newWorldBossData.startTime>r.default.serverTime?1:0},t.prototype.getEffName=function(){return this.checkShowRedPoint()?(this.effX=38,this.effY=38,"actIconCircle"):""},t.prototype.tapExecute=function(){ViewManager.ins().open(NewWorldBossWin)},t}(n.default);i.default=c,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../../manager/TimerManager":"TimerManager","../../../manager/UILoadMgr":"UILoadMgr","../../boss/UserBoss":"UserBoss","../../server/GameServer":"GameServer","./RuleIconBase":"RuleIconBase"}],NewWorldBossRankConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f9fe1P4FglIeL5PO58tpFH4","NewWorldBossRankConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],NewYearIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"0f1a6g0cCFMlJrIcliYU8xw","NewYearIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../activity/Activity"),r=e("../../bag/UserBag"),s=e("../../../consts/SystemConst"),u=e("../../opensystem/OpenSystem"),l=e("../../activity/model/ActivityDataFactory"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postActivityIsGetAwards],n.updateMessage=[o.default.ins().postActivityIsGetAwards,a.default.ins().postYbChange,r.default.ins().postItemAdd,r.default.ins().postItemChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!u.default.ins().checkSysOpen(s.SystemType.NEWYEAR))return!1;var e=o.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==l.ActivityPageStyle.NEWYEAR&&n.isOpenActivity()&&!n.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=o.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==l.ActivityPageStyle.NEWYEAR&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(NewYearWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=c,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../bag/UserBag":"UserBag","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],NobleShopItemRender:[function(e,t,i){"use strict";cc._RF.push(t,"5beeb43R0VOh7FvmiJOdaHa","NobleShopItemRender"),cc._RF.pop()},{}],NobleShopPanel:[function(e,t,i){"use strict";cc._RF.push(t,"0530aLg6xVGFaKIULdum9vA","NobleShopPanel"),cc._RF.pop()},{}],NodeObjectPool:[function(e,t,i){"use strict";cc._RF.push(t,"5fe93fBldZL9axZznr/tHGn","NodeObjectPool"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/utils/Util"),a=function(){function e(e,t){void 0===t&&(t=null),this.container=null,this.cacheNodes=[],this.isCreateByFrame=!1,this.prefab=e,this.container=t}return Object.defineProperty(e.prototype,"len",{get:function(){return this.cacheNodes.length},enumerable:!0,configurable:!0}),e.prototype.getNodeAt=function(e){return e<0||e>=this.cacheNodes.length?null:this.cacheNodes[e]},e.prototype.pushNode=function(e){this.cacheNodes.push(e)},e.prototype.unshiftNode=function(e){this.cacheNodes.unshift(e)},e.prototype.popNode=function(){return this.cacheNodes.pop()},e.prototype.shiftNode=function(){return this.cacheNodes.shift()},e.prototype.addNodes=function(e){var t=this;if(e<=0)return null;var i=this,a=[],o=null,r=!n.Util.isNullOrUndefined(i.container);if(this.isCreateByFrame){this.timeKey=setInterval(function(){o=cc.instantiate(i.prefab),t.cacheNodes.push(o),r&&i.container.addChild(o),0},1)}else for(var s=0;s<e;s++)o=cc.instantiate(i.prefab),this.cacheNodes.push(o),a.push(o),r&&i.container.addChild(o);return a},e.prototype.addToSize=function(e){var t=this.cacheNodes.length;return e>t?this.addNodes(e-t):null},e.prototype.removeNodes=function(e){var t=this.cacheNodes.length;if(e<=0||e>t)return null;var i=t-e,a=this.cacheNodes.slice(i,t);if(this.cacheNodes.length=i,!n.Util.isNullOrUndefined(this.container))for(var o=0,r=a;o<r.length;o++){var s=r[o];s.isValid&&(s.stopAllActions(),s.destroy())}return a},e.prototype.removeToSize=function(e){var t=this.cacheNodes.length;return e<t?this.removeNodes(t-e):null},e.prototype.setToSize=function(e){var t=this.cacheNodes.length;return e==t?null:e>t?this.addToSize(e):this.removeToSize(e)},e.prototype.release=function(){this.setToSize(0),this.container=null,this.prefab=null,clearInterval(this.timeKey)},e}();i.NodeObjectPool=a,cc._RF.pop()},{"../../core/utils/Util":"Util"}],NodePool:[function(e,t,i){"use strict";cc._RF.push(t,"7ca3bUA2s9CQIGKk5Y0vvJP","NodePool"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../Utils/EgretUtils"),a=function(){function e(){}return e.shift=function(e){var t=n.default.getQualifiedClassName(e);if(this.pool.get(t))return this.pool.get(t).shift();cc.loader.loadRes("prefab/"+t,cc.Prefab,function(e,t){return cc.instantiate(t)})},e.push=function(e){var t=e.name;if(this.pool.get(t))this.pool.get(t).push(e);else{var i=[e];this.pool.set(t,i)}},e.pool=new Map,e}();i.default=a,cc._RF.pop()},{"../Utils/EgretUtils":"EgretUtils"}],NodeResusePool:[function(e,t,i){"use strict";cc._RF.push(t,"27123gfDHNBspUQzWEd0mrV","NodeResusePool"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/utils/ArrayUtil"),a=function(){function e(e,t){this.usingList=[],this.unusedList=[],this.mNamed=e,this.mObjPrototype=t}return Object.defineProperty(e.prototype,"named",{get:function(){return this.mNamed},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"usingCount",{get:function(){return this.usingList.length},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unusedCount",{get:function(){return this.unusedList.length},enumerable:!0,configurable:!0}),e.prototype.addUnusedSize=function(e){for(var t=0;t<e;t++){var i=cc.instantiate(this.mObjPrototype);this.usingToUnused(i)}},e.prototype.unusedToUsing=function(){var e;return e=0!=this.unusedList.length?this.unusedList.shift():cc.instantiate(this.mObjPrototype),this.usingList.push(e),e.active=!0,e},e.prototype.usingToUnused=function(e){e.isValid&&n.ArrayUtil.removeValue(this.usingList,e)&&(this.unusedList.push(e),e.stopAllActions(),e.active=!1)},e.prototype.releaseUsingNodes=function(){for(var e=0,t=this.usingList;e<t.length;e++){var i=t[e];i.isValid&&i.destroy()}this.usingList.length=0},e.prototype.releaseUnusedNodes=function(){for(var e=0,t=this.unusedList;e<t.length;e++){var i=t[e];i.isValid&&i.destroy()}this.unusedList.length=0},e.prototype.releaseNodes=function(){this.mObjPrototype=null,this.releaseUnusedNodes(),this.releaseUsingNodes()},e}();i.NodeReusePool=a,cc._RF.pop()},{"../../core/utils/ArrayUtil":"ArrayUtil"}],Notice:[function(e,t,i){"use strict";cc._RF.push(t,"cd3d2T+KtxH665+8Bu7q9O0","Notice"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../chat/model/ChatInfoData"),o=e("../../../core/net/PackageID"),r=e("../../manager/TimerManager"),s=e("../../manager/GlobalConfig"),u=e("../zs/UserZs"),l=e("../server/GameServer"),c=e("../../entity/Actor"),d=e("../fuli/UserFuLi"),f=e("../chat/model/ChatSystemData"),p=e("../chat/Chat"),h=e("../../../core/utils/DateUtils"),g=e("../../../core/base/MessageCenter"),y=function(e){function t(){var i=e.call(this)||this;return i.sysId=o.PackageID.Notice,g.default.compile(t),i.regNetMsg(1,i.doNotice),i.regNetMsg(2,i.doNoticeOpen),r.default.ins().doTimer(3e3,1,i.checkUpdata,i),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.checkUpdata=function(){if(s.default.UpdateRemindConfig.appearTime&&s.default.UpdateRemindConfig.disappearTime&&!(1e3*u.default.ins().lv+c.default.level<s.default.UpdateRemindConfig.appearLv||l.default.serverOpenDay+1<s.default.UpdateRemindConfig.serverDayLimit)){var e=l.default.serverTime;h.default.formatStrTimeToMs(s.default.UpdateRemindConfig.appearTime)<=e&&e<h.default.formatStrTimeToMs(s.default.UpdateRemindConfig.disappearTime)&&ViewManager.ins().open(UpdateRemindWin,s.default.UpdateRemindConfig.lotteryNotice)}},t.prototype.doNotice=function(e){var t=e.readShort(),i=e.readString(),n=e.readUnsignedByte();1==t?0==n&&ViewManager.ins().open(NoticeView).showNotice(i):2==t&&(this.data||(this.data=new a.default(null)),this.data.str=i,this.data.type=7),3==t&&ViewManager.ins().open(NoticeView).showNotice(i),p.default.ins().postSysChatMsg(new f.default(t,i))},t.prototype.doNoticeOpen=function(e){d.default.ins().isOpenNotice=e.readBoolean(),t.ins().postGameNotice()},t.prototype.setNoticeOPen=function(){this.sendBaseProto(2)},t.prototype.postGameNotice=function(){},t}(n.default);i.default=y,window.GameSystem.push(y.ins.bind(y)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../chat/Chat":"Chat","../chat/model/ChatInfoData":"ChatInfoData","../chat/model/ChatSystemData":"ChatSystemData","../fuli/UserFuLi":"UserFuLi","../server/GameServer":"GameServer","../zs/UserZs":"UserZs"}],NpcBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"58c3bYykn1EhKHkxgFk89f+","NpcBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],NpcModel:[function(e,t,i){"use strict";cc._RF.push(t,"36f736ROcBMPos0D/K4XX4J","NpcModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./EffectModel"),a=e("../base/EntityType"),o=e("../manager/GlobalConfig"),r=e("../Utils/EgretUtils"),s=e("../base/ObjectPool"),u=function(e){function t(){var t=e.call(this)||this;return t.type=a.EntityType.Npc,t}return __extends(t,e),Object.defineProperty(t.prototype,"avatarString",{get:function(){var e=o.default.NpcBaseConfig[this.configID];return e?e.avatar:null},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"npcConfig",{get:function(){return o.default.NpcBaseConfig[this.configID]},enumerable:!0,configurable:!0}),t.prototype.clone=function(e){var t=r.default.getQualifiedClassName(this);for(var i in e=e||s.default.shift(t),this)"function"!=typeof this[i]&&"__class__"!=i&&"__types__"!=i&&(e[i]=this[i]);return e},t}(n.default);i.default=u,cc._RF.pop()},{"../Utils/EgretUtils":"EgretUtils","../base/EntityType":"EntityType","../base/ObjectPool":"ObjectPool","../manager/GlobalConfig":"GlobalConfig","./EffectModel":"EffectModel"}],ObjectPool:[function(e,t,i){"use strict";cc._RF.push(t,"a2103dfOoxNW4kqoRf4lrhm","ObjectPool"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../Utils/EgretUtils"),a=function(){function e(){}return e.shift=function(e){var t=n.default.getQualifiedClassName(e);if(this.pool.get(t)&&this.pool.get(t).length>0)return this.pool.get(t).shift();var i=new e;return i.ObjectPoolKey=t,i},e.push=function(e){var t=e.ObjectPoolKey;if(t)if(this.pool.get(t))this.pool.get(t).push(e);else{var i=[e];this.pool.set(t,i)}else console.error("\u4e0d\u80fd\u653e\u5165\u5bf9\u8c61\u6c60",e)},e.pool=new Map,e}();i.default=a,cc._RF.pop()},{"../Utils/EgretUtils":"EgretUtils"}],OpenSystemConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ce27dtz8zdOF66GciyiBkVt","OpenSystemConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.openzs=0,this.openlevel=0,this.opencheck=0}}();i.default=n,cc._RF.pop()},{}],OpenSystem:[function(e,t,i){"use strict";cc._RF.push(t,"408490H6C1G8o9gYWCSsyy2","OpenSystem"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../manager/GlobalConfig"),o=e("../zs/UserZs"),r=e("../../entity/Actor"),s=e("../fb/UserFb"),u=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.checkSysOpen=function(e){var t=a.default.OpenSystemConfig[e];return!(!t||!t.judge)&&(t.than?o.default.ins().lv<=t.openzs&&r.default.level<=t.openlevel&&s.default.ins().guanqiaID<=t.opencheck:o.default.ins().lv>=t.openzs&&r.default.level>=t.openlevel&&s.default.ins().guanqiaID>=t.opencheck)},t.prototype.getNoOpenTips=function(e){var t=a.default.OpenSystemConfig[e],i="";return t&&(t.judge?t.than||(o.default.ins().lv<t.openzs&&(i+=t.openzs+"\u8f6c"),r.default.level<t.openlevel&&(i+=t.openlevel+"\u7ea7"),s.default.ins().guanqiaID<t.opencheck&&(i+="\u901a\u8fc7\u7b2c"+t.opencheck+"\u5173"),""!=i&&(i+="\u5f00\u542f"+t.funName)):i=t.funName+"\u672a\u5f00\u542f"),i},t}(n.default);i.default=u,cc._RF.pop()},{"../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../fb/UserFb":"UserFb","../zs/UserZs":"UserZs"}],OptionalGiftConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b431e4voHBB3b4Z+9n3YH2Z","OptionalGiftConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],OrangeEquipPanel:[function(e,t,i){"use strict";cc._RF.push(t,"d8e51TxBP1CeJjq9VkKvHl7","OrangeEquipPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseView"),a=e("../../rolewin/UserEquip"),o=e("../../bag/UserBag"),r=e("../../../entity/Actor"),s=e("../../tips/UserTips"),u=e("../../../entity/SubRoles"),l=e("../../../manager/GlobalConfig"),c=e("../../../config/ItemConfig"),d=e("../../warn/view/WarnWin"),f=e("../../zs/UserZs"),p=e("../../../../core/utils/ColorUtil"),h=e("../../../../core/base/AttributeData"),g=e("../../../customComponent/ItemBase"),y=e("../../../../core/utils/ComponentUtil"),v=e("../../../customComponent/EquipItemIcon"),m=e("../../../../core/utils/Util"),b=cc._decorator,_=b.ccclass,C=b.property,I=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.szEquip=[],t.rxEquip=[],t.showNode1=null,t.showNode2=null,t.showNode1Equips=[],t.showNode1Powers=[],t.showNode1Attrs=[],t.showNode2Equips=null,t.showNode2Power=null,t.showNode2Attr=null,t.executeBtn=null,t.executeLabel=null,t.getTreasureBtn=null,t.costNode=null,t.costName=null,t.need=null,t.cur=null,t._roleId=0,t.curIndex=0,t.labelMax=null,t.showType=0,t.tipCostName=["\u795e\u88c5\u788e\u7247","\u70ed\u8840\u788e\u7247"],t}return __extends(t,e),t.prototype.init=function(){this.curIndex=0;for(var e=0;e<this.szEquip.length;e++)this.szEquip[e].clickEvents[0]=y.ComponentUtil.createEventHandler(this.node,"OrangeEquipPanel","onClickShenZhuangEquipItem",""+e);for(e=0;e<this.rxEquip.length;e++)this.rxEquip[e].clickEvents[0]=y.ComponentUtil.createEventHandler(this.node,"OrangeEquipPanel","onClickReXueEquipItem",""+e);this.executeBtn.clickEvents[0]=y.ComponentUtil.createEventHandler(this.node,"OrangeEquipPanel","executeCB","")},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.init(),this.observe(a.default.ins().postMixEquip,this.mixCB),this.observe(o.default.ins().postItemAdd,this.updateViewToShengzhuang),this.observe(o.default.ins().postItemDel,this.updateViewToShengzhuang),this.observe(o.default.ins().postItemChange,this.updateViewToShengzhuang),this.updateViewToShengzhuang(),this.updateViewToReXue()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onClickShenZhuangEquipItem=function(e,t){this.curIndex=+t},t.prototype.onClickReXueEquipItem=function(e,t){this.curIndex=+t},t.prototype.executeCB=function(e){var t=this;if(parseInt(this.cur.string)<parseInt(this.need.string.substr(1)))s.default.ins().showTips("|C:0xf3311e&T:\u795e\u88c5\u788e\u7247\u4e0d\u8db3|");else if("\u5347 \u7ea7"==this.executeLabel.string)this.grewup();else if("\u5408 \u6210"==this.executeLabel.string){var i=u.default.ins().getSubRoleByIndex(this._roleId).getEquipByIndex(this.curIndex),n=i.item.configID,a=l.default.ItemConfig[n];if(void 0!=a&&5==c.default.getQuality(a)){var o=l.default.ItemConfig[i.item.configID],r=o.zsLevel>0?o.zsLevel+"\u8f6c":o.level+"\u7ea7",f=c.default.getQualityColor(o).toString();d.default.show('\u5f53\u524d\u90e8\u4f4d\u4e0a\u5df2\u7a7f\u7740<font color="#'+f+'">'+r+"\u4f20\u5947\u88c5\u5907</font>\uff0c\u662f\u5426\u7ee7\u7eed\u5408\u6210\u7ea2\u8272\u88c5\u5907\uff1f\n",function(){t.mix()},this)}else this.mix()}},t.prototype.grewup=function(){var e=l.default.ItemConfig[this.curEquipConfigId+1];e.level>r.default.level||e.zsLevel>f.default.ins().lv?s.default.ins().showTips("|C:0xf3311e&T:\u5347\u7ea7\u540e\u8d85\u8fc7\u89d2\u8272\u7b49\u7ea7\uff0c\u65e0\u6cd5\u5347\u7ea7|"):a.default.ins().sendGrewupEquip(this._roleId,this.curIndex)},t.prototype.grewupCB=function(e,t,i){0!=t?(s.default.ins().showTips("\u5347\u7ea7\u6210\u529f"),this.updateViewToShengzhuang()):s.default.ins().showTips("|C:0xf3311e&T:\u5347\u7ea7\u5931\u8d25|")},t.prototype.mix=function(){a.default.ins().sendMixEquip(this._roleId,this.curEquipConfigId,this.curIndex)},t.prototype.mixCB=function(e,t,i){0!=t?(s.default.ins().showTips("\u5408\u6210\u6210\u529f,\u5df2\u81ea\u52a8\u7a7f\u6234\u81f3\u89d2\u8272\u8eab\u4e0a"),this.updateViewToShengzhuang()):s.default.ins().showTips("|C:0xf3311e&T:\u5408\u6210\u5931\u8d25|")},t.prototype.openSmeltView=function(e){},t.prototype.updateViewToShengzhuang=function(){this.updateAllEquipItem(),this.updateDetailPanel()},t.prototype.updateViewToReXue=function(){},t.prototype.updateDetailPanel=function(){var e=u.default.ins().getSubRoleByIndex(this._roleId).getEquipByIndex(this.curIndex);if(null!=e){var t=l.default.ItemConfig[e.item.configID+1],i=0,n=0;this.costNode.active=!0;var a=c.default.getQuality(e.item.itemConfig);if(void 0==t&&0!=e.item.handle&&4==a)this.labelMax.node.active=!0,this.curEquipConfigId=this.updateMixPanel(),this.executeBtn.node.active=!1,this.costNode.active=!1;else{if(void 0!=t&&0!=e.item.handle&&4==a&&1!=e.item.itemConfig.level&&-1==o.default.fitleEquip.indexOf(e.item.configID)){this.curEquipConfigId=this.updateGrewupPanel(),this.executeLabel.string="\u5347 \u7ea7";var r=l.default.LegendLevelupConfig[this.curEquipConfigId];i=r.count,n=r.itemId}else{this.curEquipConfigId=this.updateMixPanel(),this.executeLabel.string="\u5408 \u6210";var s=l.default.LegendComposeConfig[this.curEquipConfigId];i=s.count,n=s.itemId}var d=o.default.ins().getBagGoodsCountById(0,n);this.need.string="/"+i,this.cur.string=d+"",this.costName.string=this.tipCostName[this.showType]+": ",this.cur.node.color=d>=i?cc.Color.BLACK.fromHEX(p.default.GREEN_COLOR_N):cc.Color.BLACK.fromHEX(p.default.RED_COLOR_N),this.executeBtn.node.active=!0,this.labelMax.node.active=!1}}},t.prototype.updateMixPanel=function(){var e;if(r.default.level>=1){var t=this.curIndex,i=u.default.ins().getSubRoleByIndex(this._roleId);e=a.default.ins().getEquipConfigIDByPosAndQualityByGod(i,t,4,u.default.ins().getSubRoleByIndex(this._roleId).job),l.default.ItemConfig[e]}var n=[],o=[],s=[],c=l.default.EquipConfig[e];for(var d in h.default.translate)!c[d]||c[d]<=0||(o.push(c[d]+""),n.push(h.default.getAttrStrByType(h.default.translate[d])),s.push(" +"+Math.floor(g.default.additionRange*c[d]/100)));return e},t.prototype.updateGrewupPanel=function(){var e=u.default.ins().getSubRoleByIndex(this._roleId).getEquipByIndex(this.curIndex),t=e.item.configID;l.default.ItemConfig[t];if(void 0==l.default.ItemConfig[t+1]);else{var i=[],n=[],a=[],o=[],r=[],s=l.default.EquipConfig[t],c=l.default.EquipConfig[t+1],d=e.item;for(var f in h.default.translate)if(s[f]&&!(s[f]<=0)){if(void 0!=d)for(var p=d.att,y=0;y<p.length;y++)if(p[y].type==h.default.translate[f]){a.push(" +"+p[y].value);break}0,n.push(s[f]+""),o.push(c[f]+""),r.push(" +"+Math.floor(g.default.additionRange*c[f]/100)),i.push(h.default.getAttrStrByType(h.default.translate[f]))}}return t},t.prototype.updateAllEquipItem=function(){for(var e=0;e<8;e++)this.updateEquipItem(e);for(e=0;e<2;e++)this.updateReXueEquipItem(e)},t.prototype.updateEquipItem=function(e){if(null!=this.szEquip[e]){var t=u.default.ins().getSubRoleByIndex(this._roleId).getEquipByIndex(e);-1!=o.default.fitleEquip.indexOf(t.item.configID)||0==t.item.handle||c.default.getQuality(t.item.itemConfig)<4||1==t.item.itemConfig.level&&!t.item.itemConfig.zsLevel?this.resetEquipItem(1,e):(this.showNode2.active=!1,this.szEquip[e].getComponent(v.EquipItemIcon).updateDataView(t.item,e,1,this.curIndex==e))}},t.prototype.resetEquipItem=function(e,t){1==e?this.szEquip[t].getComponent(v.EquipItemIcon).updateDataView(null,t,e):this.rxEquip[t].getComponent(v.EquipItemIcon).updateDataView(null,t,e)},t.prototype.updateReXueEquipItem=function(e){var t=this.rxEquip[e];m.Util.isNullOrUndefined(t)},t.prototype.setItemRedPoint=function(){},t.prototype.computerCurIndex=function(){return 0},t.prototype.setRoleId=function(e){this._roleId=e,this.updateViewToShengzhuang()},t.defaultEquipIcon=["xb_10","xb_11","xb_12","xb_13","xb_14","xb_15","xb_16","xb_17"],__decorate([C({type:cc.Button,displayName:"szEquip"})],t.prototype,"szEquip",void 0),__decorate([C({type:cc.Button,displayName:"rxEquip"})],t.prototype,"rxEquip",void 0),__decorate([C({type:cc.Node,displayName:"showNode1"})],t.prototype,"showNode1",void 0),__decorate([C({type:cc.Node,displayName:"showNode2"})],t.prototype,"showNode2",void 0),__decorate([C({type:cc.Node,displayName:"showNode1Equips"})],t.prototype,"showNode1Equips",void 0),__decorate([C({type:cc.Label,displayName:"showNode1Powers"})],t.prototype,"showNode1Powers",void 0),__decorate([C({type:cc.Label,displayName:"showNode1Attrs"})],t.prototype,"showNode1Attrs",void 0),__decorate([C({type:cc.Label,displayName:"showNode2Equips"})],t.prototype,"showNode2Equips",void 0),__decorate([C({type:cc.Label,displayName:"showNode2Power"})],t.prototype,"showNode2Power",void 0),__decorate([C({type:cc.Label,displayName:"showNode2Attr"})],t.prototype,"showNode2Attr",void 0),__decorate([C({type:cc.Button,displayName:"executeBtn"})],t.prototype,"executeBtn",void 0),__decorate([C({type:cc.Label,displayName:"executeLabel"})],t.prototype,"executeLabel",void 0),__decorate([C({type:cc.RichText,displayName:"getTreasureBtn"})],t.prototype,"getTreasureBtn",void 0),__decorate([C({type:cc.Node,displayName:"costNode"})],t.prototype,"costNode",void 0),__decorate([C({type:cc.Label,displayName:"costName"})],t.prototype,"costName",void 0),__decorate([C({type:cc.Label,displayName:"need"})],t.prototype,"need",void 0),__decorate([C({type:cc.Label,displayName:"cur"})],t.prototype,"cur",void 0),__decorate([C({type:cc.Label,displayName:"labelMax"})],t.prototype,"labelMax",void 0),t=__decorate([_],t)}(n.default);i.default=I,cc._RF.pop()},{"../../../../core/base/AttributeData":"AttributeData","../../../../core/utils/ColorUtil":"ColorUtil","../../../../core/utils/ComponentUtil":"ComponentUtil","../../../../core/utils/Util":"Util","../../../../core/view/BaseView":"BaseView","../../../config/ItemConfig":"ItemConfig","../../../customComponent/EquipItemIcon":"EquipItemIcon","../../../customComponent/ItemBase":"ItemBase","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../rolewin/UserEquip":"UserEquip","../../tips/UserTips":"UserTips","../../warn/view/WarnWin":"WarnWin","../../zs/UserZs":"UserZs"}],OtherBoss1Config:[function(e,t,i){"use strict";cc._RF.push(t,"5bbe5cxuDBO6Z2trYcmK/Cn","OtherBoss1Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],OtherBoss2Config:[function(e,t,i){"use strict";cc._RF.push(t,"0de97Ie3iVL3oDPY0KFGLpd","OtherBoss2Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],OtherFireRingData:[function(e,t,i){"use strict";cc._RF.push(t,"894344MfuZIhpFio8rc6P6k","OtherFireRingData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RingSkillInfo"),a=function(){function e(){this.lyMarkLv=0,this.lyMarkSkills=[]}return e.prototype.parser=function(e){if(this.lv=e.readInt(),this.skillBooks=[],this.abilityItems=[],this.lv>0){for(var t=e.readShort(),i=0;i<t;i++){var a=new n.default;a.position=e.readShort(),a.skillId=e.readShort(),a.skillLvl=e.readShort(),this.skillBooks.push(a)}var o=e.readShort();for(i=0;i<o;i++){var r=e.readShort(),s=e.readShort();this.abilityItems[r]=s}this.lyMarkLv=e.readShort(),this.lyMarkSkills=[];var u=e.readByte();this.lyMarkSkills.length=u;for(i=0;i<u;i++)this.lyMarkSkills[i]=e.readShort()}},e}();i.default=a,cc._RF.pop()},{"./RingSkillInfo":"RingSkillInfo"}],PActivity1Config:[function(e,t,i){"use strict";cc._RF.push(t,"4eebeGKlvtBU7I9XDn8sxT0","PActivity1Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("./ActivityType1Config").default);i.default=n,cc._RF.pop()},{"./ActivityType1Config":"ActivityType1Config"}],PActivity2Config:[function(e,t,i){"use strict";cc._RF.push(t,"a16d4+e82dI1ZypSUwal46m","PActivity2Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],PActivity3Config:[function(e,t,i){"use strict";cc._RF.push(t,"ac66d4IxylKRrK3S5GFwTvR","PActivity3Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.day=1}}();i.default=n,cc._RF.pop()},{}],PActivity9Config:[function(e,t,i){"use strict";cc._RF.push(t,"cbc6cOLOXdKtYiDd51Ve9BH","PActivity9Config"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t}(e("./ActivityType9Config").default);i.default=n,cc._RF.pop()},{"./ActivityType9Config":"ActivityType9Config"}],PActivityBtnConfig:[function(e,t,i){"use strict";cc._RF.push(t,"1fe5a2/uEtIx4NVPYa1GgRH","PActivityBtnConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],PActivityConfig:[function(e,t,i){"use strict";cc._RF.push(t,"81fd9+aUFVFLoinOIFVD8XN","PActivityConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],PActivityDataFactory:[function(e,t,i){"use strict";cc._RF.push(t,"b9f5aSDzuVJ/arIylVCeaHg","PActivityDataFactory"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../activity/model/ActivityBaseData"),a=e("./PActivityType2Data"),o=e("./PActivityType3Data"),r=e("./PActivityType9Data"),s=e("../../../../core/base/ErrorLog"),u=e("../../../manager/GlobalConfig"),l=e("../../activity/model/ActivityType1Data"),c=function(){function e(){}return e.create=function(t){var i,c=t.readInt(),d=t.readInt(),f=t.readInt(),p=t.readShort(),h=t.readInt();switch(p){case e.PACTIVITY_TYPE_1:i=new l.default(t);break;case e.PACTIVITY_TYPE_2:i=new a.default(t);break;case e.PACTIVITY_TYPE_3:i=new o.default(t);break;case e.PACTIVITY_TYPE_9:i=new r.default(t);break;default:if(!s.default.Assert(p,"\u9519\u8bef\u4e2a\u4eba\u6d3b\u52a8:"+c+" \u7c7b\u578b:"+p))for(var g=0;g<h;g++)t.readByte();return null}if(!i)return null;i.id=c,i.startTime=d,i.endTime=f,i.type=p,i.activityType=n.ActivityType.Personal;var y=u.default.PActivityConfig[c];return y&&(i.duration=y.duration),i},e.PACTIVITY_TYPE_1=1,e.PACTIVITY_TYPE_2=2,e.PACTIVITY_TYPE_3=3,e.PACTIVITY_TYPE_4=4,e.PACTIVITY_TYPE_5=5,e.PACTIVITY_TYPE_6=6,e.PACTIVITY_TYPE_7=7,e.PACTIVITY_TYPE_8=8,e.PACTIVITY_TYPE_9=9,e.PACTIVITY_TYPE_10=10,e.PACTIVITY_TYPE_11=11,e.PACTIVITY_TYPE_17=17,e}();i.default=c,cc._RF.pop()},{"../../../../core/base/ErrorLog":"ErrorLog","../../../manager/GlobalConfig":"GlobalConfig","../../activity/model/ActivityBaseData":"ActivityBaseData","../../activity/model/ActivityType1Data":"ActivityType1Data","./PActivityType2Data":"PActivityType2Data","./PActivityType3Data":"PActivityType3Data","./PActivityType9Data":"PActivityType9Data"}],PActivityType1Data:[function(e,t,i){"use strict";cc._RF.push(t,"9f6fapqoiVL65cooK8Xlk7H","PActivityType1Data"),cc._RF.pop()},{}],PActivityType2Data:[function(e,t,i){"use strict";cc._RF.push(t,"23695Z3XnRMjZZrYmb0P6O8","PActivityType2Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../activity/model/ActivityBaseData"),a=e("../../../entity/Actor"),o=e("../../../manager/GlobalConfig"),r=e("../../vip/UserVip"),s=e("../../../../core/utils/DateUtils"),u=e("../../server/GameServer"),l=e("../../activity/Activity"),c=function(e){function t(t){var i=e.call(this,t)||this;return i.buyData=[],i.serverBuyData=[],i.initBuyData(t),i}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t);var i=t.readShort(),n=t.readInt();this.buyData[i]=n,this.serverBuyData[i]=t.readInt()},t.prototype.initBuyData=function(e){for(var t=e.readShort(),i=1;i<=t;i++)this.buyData[i]=e.readShort(),this.serverBuyData[i]=e.readShort();this.sumRMB=e.readInt()},t.prototype.canReward=function(){if(a.default.level<t.LimitLevel)return!1;var e;e=l.default.ins().getActivityDataById(this.id);var i=o.default.PActivity2Config[this.id];for(var n in i){var s=i[n];if(!(e.buyData[s.index]>=s.count)&&e.sumRMB>=s.needRecharge&&a.default.yb>=s.price&&r.default.ins().lv>=s.vip)return!0}return!1},t.prototype.isOpenActivity=function(){var e=Math.floor((s.default.formatMiniDateTime(this.startTime)-u.default.serverTime)/1e3),t=Math.floor((s.default.formatMiniDateTime(this.endTime)-u.default.serverTime)/1e3);return e<0&&t>0},t.prototype.getHide=function(){if(this.isHide)return this.isHide;for(var e=o.default.PActivity2Config[this.id],t=1;t<this.buyData.length;t++){var i=e[t];if(this.buyData[t]<i.count)return this.isHide=!1,this.isHide}return this.isHide=!0,this.isHide},t.prototype.getLeftTime=function(){if(this.endTime){var e=s.default.formatMiniDateTime(this.endTime)/1e3,t=Math.floor((e-u.default.serverTime)/1e3);return t<0&&(t=0),t}return 0},t.prototype.getSpecialOpenLeftTime=function(){},t.prototype.getAreaReward=function(e,t){return 0},t.LimitLevel=50,t}(n.default);i.default=c,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../activity/Activity":"Activity","../../activity/model/ActivityBaseData":"ActivityBaseData","../../server/GameServer":"GameServer","../../vip/UserVip":"UserVip"}],PActivityType3Data:[function(e,t,i){"use strict";cc._RF.push(t,"a5d2ca8M55BIISYDRNHre/w","PActivityType3Data"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../activity/model/ActivityBaseData"),o=e("../../../manager/GlobalConfig"),r=e("../../../../core/utils/DateUtils"),s=e("../../server/GameServer"),u=e("../../activity/Activity"),l=function(e){function t(t){var i=e.call(this,t)||this;return i.dabiao=[],i.chongzhiNum=0,i.chongzhiTotal=0,i.btn1=!1,i.btn2=!1,i.image1=!1,i.image2=!1,i.updateData(t),i.recrod=t.readInt(),i}return __extends(t,e),t.prototype.update=function(t){e.prototype.update.call(this,t);t.readShort();this.recrod=t.readInt()},t.prototype.openDay=function(){var e=o.default.PActivity3Config[this.id];return e&&e[0]?e[0].day:7},t.prototype.canReward=function(){var e=o.default.PActivity3Config[this.id],t=this.recrod,i=-1,n=0;for(var a in e){var r=t>>e[a].index&1;if(1==e[a].type){if(this.dabiao[n]>=e[a].day&&0==r)return!0}else if(2==e[a].type&&e[a].val<=this.chongzhiTotal){if(0==r)return!0}else if(3==e[a].type&&e[a].val<=this.chongzhiNum&&(-1==i&&(i=this.getCurIndex(3)),i==e[a].index&&0==r))return!0;n++}return!1},t.prototype.isOpenActivity=function(){var e=Math.floor((r.default.formatMiniDateTime(this.startTime)-s.default.serverTime)/1e3),t=Math.floor((r.default.formatMiniDateTime(this.endTime)-s.default.serverTime)/1e3);return e<0&&t>0},t.prototype.updateData=function(e){var t=e.readShort();this.dabiao=[];for(var i=0;i<t;i++)this.dabiao.push(e.readShort());this.chongzhiNum=e.readInt(),this.chongzhiTotal=e.readInt()},Object.defineProperty(t.prototype,"day7text",{get:function(){var e=o.default.PActivity3Config[this.id];for(var t in e)1==e[t].type&&(this.rewards1=e[t].rewards,this._day7text="\u7d2f\u8ba1<font color='#ffff00'>"+e[t].day+"</font>\u5929\uff0c\u6bcf\u65e5\u5145\u503c<font color='#ffff00'>"+e[t].val+"</font>\u5143\u5b9d\u53ef\u9886\u53d6");return this._day7text},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"totaltext",{get:function(){var e=o.default.PActivity3Config[this.id];for(var t in e)2==e[t].type&&(this.maxTotal=e[t].val,this.rewards2=e[t].rewards,this._totaltext="\u6d3b\u52a8\u671f\u95f4\u7d2f\u8ba1\u5145\u503c<font color='#ffff00'>"+e[t].val+"</font>\u5143\u5b9d\u53ef\u9886\u53d6");return this._totaltext},enumerable:!0,configurable:!0}),t.prototype.canOnlyReward=function(){var e=o.default.PActivity3Config[this.id],t=this.recrod;for(var i in this.btn1=!1,this.btn2=!1,this.image1=!1,this.image2=!1,e){var n=t>>e[i].index&1;1==e[i].type&&this.dabiao&&this.dabiao[0]>=e[i].day&&(0==n&&(this.btn1=!0),1==n&&(this.image1=!0)),2==e[i].type&&e[i].val<=this.chongzhiTotal&&(0==n&&(this.btn2=!0),1==n&&(this.image2=!0))}},t.prototype.getDateTime=function(e){var t=e.split(/[-,.,:]/g);return new Date(+t[0],+t[1]-1,+t[2],+t[3]||0,+t[4]||0).getTime()},t.prototype.curOpenDay=function(){return Math.floor(s.default.serverTime-r.default.formatMiniDateTime(this.startTime)/1e3/3600/24)},t.prototype.getCurIndex=function(e){o.default.PActivityConfig[this.id];var t=o.default.PActivity3Config[this.id],i=0;this.startTime&&(i=this.curOpenDay());var n={};for(var a in t)n[t[a].type]=1;var r=Object.keys(n);1!=r.length&&void 0!=e||(e=+r[0]);var s,u=[];for(s in t)t[s].type==e&&u.push(t[s]);u.sort(function(e,t){return e.day<t.day?-1:1});for(var l=0,c=u;l<c.length;l++){var d=c[l];if(s=d.index,1==e||2==e){if(i<d.day)return+s}else if(3==e&&i<d.day)return+s}return+s},t.prototype.getLeftTime=function(){if(this.endTime){var e=Math.floor((r.default.formatMiniDateTime(this.endTime)-s.default.serverTime)/1e3);return e<0&&(e=0),e}return 0},t.prototype.getRewardStateById=function(e){var t=o.default.PActivity3Config[this.id][e];switch(t.showType){case Show3Type.TYPE6:case Show3Type.TYPE8:if(this.chongzhiTotal<t.val)return u.default.NotReached;break;case Show3Type.TYPE7:if(this.dabiao[e-1]<t.day)return u.default.NotReached}return this.recrod>>t.index&1?u.default.Geted:u.default.CanGet},t}(a.default);i.default=l,function(e){e[e.TYPE1=1]="TYPE1",e[e.TYPE2=2]="TYPE2",e[e.TYPE3=3]="TYPE3",e[e.TYPE4=4]="TYPE4",e[e.TYPE5=5]="TYPE5",e[e.TYPE6=6]="TYPE6",e[e.TYPE7=7]="TYPE7",e[e.TYPE8=8]="TYPE8"}(n||(n={})),cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../manager/GlobalConfig":"GlobalConfig","../../activity/Activity":"Activity","../../activity/model/ActivityBaseData":"ActivityBaseData","../../server/GameServer":"GameServer"}],PActivityType9Data:[function(e,t,i){"use strict";cc._RF.push(t,"09657xp9HBBZogKh+Lgc2rC","PActivityType9Data"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(t){return e.call(this,t)||this}return __extends(t,e),t}(e("../../activity/model/ActivityType9Data").default);i.default=n,cc._RF.pop()},{"../../activity/model/ActivityType9Data":"ActivityType9Data"}],PActivity:[function(e,t,i){"use strict";cc._RF.push(t,"25804nQEBtJ35w+MMvtmFKI","PActivity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../../manager/GlobalConfig"),s=e("../tips/UserTips"),u=e("../../../core/utils/StringUtils"),l=e("../../../core/utils/DateUtils"),c=e("../recharge/Recharge"),d=e("../../entity/Actor"),f=e("../server/GameServer"),p=e("../bag/UserBag"),h=e("../gamescene/GameLogic"),g=e("../../map/GameMap"),y=e("./model/PActivityDataFactory"),v=e("../activity/Activity"),m=e("../activity/model/ActivityType8Data"),b=function(e){function t(){var i=e.call(this)||this;return i.activityData={},i.palyEffList=[],i.rankInfoList=[],i.indexCurrDabiao=0,i.nextDayState=0,i.hfLoginDay=1,i.geLoginDay=1,i.isSuccee=!1,o.default.compile(t),i.sysId=a.PackageID.PActivity,i.regNetMsg(1,i.doActivityData),i.regNetMsg(2,i.postRewardResult),i.regNetMsg(7,i.postChangePage),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initZero=function(){if(this.activityData)for(var e in this.activityData){var t=+e;if(t<1e4)r.default.ActivityConfig[e]&&this.sendChangePage(t)}},t.prototype.getActivityDataById=function(e){return this.activityData[e]},t.prototype.getPalyEffListById=function(e){return this.palyEffList[e]},t.prototype.setPalyEffListById=function(e,t){this.palyEffList[e]=t},t.prototype.getrankInfoListByIndex=function(e){return this.rankInfoList[e]},t.prototype.doActivityData=function(e){this.activityData={};for(var t=e.readShort(),i=0;i<t;i++){var n=y.default.create(e);if(n){var a=n.id;this.activityData[a]=n}}this.postActivityIsGetAwards()},t.prototype.postSpecials=function(){},t.prototype.postActivityIsGetAwards=function(){},t.prototype.postRewardResult=function(e){this.isSuccee=e.readBoolean();var t=e.readInt();return this.getActivityDataById(t).update(e),this.postActivityPanel(t),this.postActivityIsGetAwards(),t},t.prototype.postActivityPanel=function(e){return e},t.prototype.sendReward=function(e,t,i){var n=this.getBytes(2),a=r.default.PActivityConfig[e];a&&a.activityType==y.default.PACTIVITY_TYPE_9?t?(n.writeInt(e),n.writeShort(t)):(n.writeInt(e),n.writeShort(t),n.writeByte(i)):(n.writeInt(e),n.writeShort(t)),this.sendToServer(n)},t.prototype.sendLianxuReward=function(e){var t=this.getBytes(13);t.writeInt(e),this.sendToServer(t)},t.prototype.doRewardStatu=function(e){var t=e.readInt(),i=this.getActivityDataById(t);i&&i.updateData(e),this.postActivityIsGetAwards()},t.prototype.postChangePage=function(e){var t=y.default.create(e);return t&&(this.activityData[t.id]=t),this.postActivityIsGetAwards(),t?t.id:0},t.prototype.sendChangePage=function(e){var t=this.getBytes(7);t.writeInt(e),this.sendToServer(t)},t.prototype.doDaBiaoInfo=function(e){this.dabiaoDecode(e),this.postGetDaBiaoInfo()},t.prototype.postGetDaBiaoInfo=function(){},t.prototype.doNextDayLoginData=function(e){this.nextDayState=e.readShort(),debug.log(this.nextDayState)},t.prototype.doNextDayLoginReward=function(e){e.readShort()&&(this.nextDayState=2,s.default.ins().showTips(u.default.addColor("\u9886\u53d6\u5956\u52b1\u6210\u529f",15937822)))},t.prototype.sendNextDayReward=function(){var e=this.getBytes(20);this.sendToServer(e)},t.prototype.sendDabiaoInfo=function(e){var t=this.getBytes(3);t.writeInt(e),this.sendToServer(t)},t.prototype.sendGetDabiaoReward=function(e){var t=this.getBytes(4);t.writeInt(e),this.sendToServer(t)},t.prototype.postIsGetAwards=function(e){this.isGetAward=e.readBoolean()},t.prototype.sendGetSevenDayAwards=function(e){var t=this.getBytes(12);t.writeShort(e),this.sendToServer(t)},t.prototype.doSevenDayData=function(e){this.dayNum=e.readShort(),this.isAwards=e.readInt(),this.postSevendayIsAwards()},t.prototype.doChangeSevenDayData=function(e){if(e.readBoolean()){e.readShort();this.isAwards=e.readInt(),this.postSevendayAwardCallback()}else s.default.ins().showTips("|C:0xf3311e&T:\u80cc\u5305\u5df2\u6ee1\uff0c\u8bf7\u6e05\u7406\u80cc\u5305|");this.postSevendayIsAwards()},t.prototype.postSevendayAwardCallback=function(){},t.prototype.postSevendayIsAwards=function(){},t.prototype.postNextDayInfo=function(){},t.prototype.getSevenDayStast=function(){var e=l.default.DAYS_PER_WEEK;e=this.dayNum>14?14:this.dayNum;for(var t=1;t<=e;t++){var i=r.default.LoginRewardsConfig[t];if(i&&this.dayNum>=i.day&&0==(this.isAwards>>i.day&1))return!0}return!1},t.prototype.getSevenDayLogIsVisible=function(){return 0==(this.isAwards>>14&1)},t.prototype.getbtnInfo=function(e){var t=r.default.PActivityBtnConfig;return t[e]?t[e]:null},t.prototype.isShowRedPointByBtnInfo=function(e){return this.checkAcCanGet(e.id+"")},t.prototype.checkAcCanGet=function(e){var t=this.activityData;for(var i in t)if(i==e&&t[i].isOpenActivity()&&t[i].canReward()&&t[i].specialState())return!0;return!1},t.prototype.checkOtherCharge2CanGet=function(){var e=c.default.ins().getRechargeData(1),t=r.default.ChongZhi2Config[e.day/7>=1?2:1][e.day%7];for(var i in t)if(0==(e.isAwards>>t[i].index&1)&&e.num>=t[i].pay)return!0;return!1},t.prototype.dabiaoDecode=function(e){this.isDaBiao=e.readBoolean(),this.indexCurrDabiao=Math.max(e.readInt()-1,0);var t=e.readShort();if(t==RankDataType.TYPE_LEVEL)e.readInt(),e.readInt();else if(t==RankDataType.TYPE_BAOSHI)this.myDabiaoInfo=e.readInt();else if(t==RankDataType.TYPE_ZHANLING){var i=e.readInt(),n=e.readInt();this.myDabiaoInfo=[i,n]}else t==RankDataType.TYPE_LONGHUN?this.myDabiaoInfo=e.readInt():t==RankDataType.TYPE_XIAOFEI?this.myDabiaoInfo=e.readInt():t==RankDataType.TYPE_HF_XIAOFEI?(this.myDabiaoInfo=e.readInt(),this.myPaiming=e.readInt()):this.myDabiaoInfo=e.readDouble();var a=e.readShort();this.rankInfoList=[];for(var o=0;o<a;o++)this.rankInfoList[o]||this.rankInfoList.push(new _),this.rankInfoList[o].prase(e,t)},t.prototype.getisCangetDabiao3=function(e){var i=t.ins().getActivityDataById(e);return i.canOnlyReward?(i.canOnlyReward(),i.btn1||i.btn2):this.checkAcCanGet(e+"")},t.prototype.getisCanBuyXianGou=function(e){var t=!1,i=r.default.PActivity2Config[e];if(i)for(var n=0;n<i.length&&!(t=this.getisCanBuyXianGouItem(e,n));n++);return t},t.prototype.getisCanBuyXianGouItem=function(e,i){var n=!1,a=t.ins().activityData[e],o=r.default.PActivity2Config[e];if(a&&o){var s=o[i],u=a.buyData[i]||0;if(s&&u){var l=1==s.currencyType?d.default.gold:d.default.yb,c=1==s.currencyType,f=l>=s.price,p=s.count-u>0;n=c&&f&&p}}return n},t.prototype.IsHefuXunBaoTimer=function(){if(!f.default._serverHeZeroTime)return!1;var e=l.default.formatMiniDateTime(f.default._serverHeZeroTime),t=e+24*r.default.TreasureHuntConfig.hefuDay*60*60*1e3,i=f.default.serverTime;return i>=e&&i<=t},t.prototype.IsBossScoreTitle=function(e,t){return!1},t.prototype.getIsBuy=function(e){if(e){var t=v.default.ins().getActivityDataById(e.Id);return!(e.count&&t.personalRewardsSum[e.index]>=e.count)&&!(e.scount&&t.worldRewardsSum[e.index]>=e.scount)}},t.prototype.getType7RedPoint=function(e){var t,i=r.default.ActivityType7Config[e],n=v.default.ins().getActivityDataById(e);for(var a in i)if(v.default.ins().getIsBuy(i[a]))if(i[a].itemId){if((t=p.default.ins().getBagItemById(i[a].itemId))&&t.count>=i[a].itemCount)return!0}else if(n.bossScore>=i[a].score)return!0;return!1},t.prototype.getCurrentRingAwardIndex=function(e){var t=1;if(e>0)for(;0!=(e>>t&1);)t++;return t},t.prototype.getRingAward=function(e){for(var t in r.default.ActivityType8Config){if(r.default.ActivityType8Config[t][1].showType==m.default.TYPE_RING)for(var i in r.default.ActivityType8Config[t])if(i==e.toString())return r.default.ActivityType8Config[t][i]}return null},t.prototype.getLastRingAward=function(){var e;for(var t in r.default.ActivityType8Config){if(r.default.ActivityType8Config[t][1].showType==m.default.TYPE_RING)for(var i in r.default.ActivityType8Config[t])e=r.default.ActivityType8Config[t][i]}return e},t.prototype.addEvent=function(){o.default.ins().addListener(h.default.ins().postEnterMap,this.openRingActivity,this)},t.prototype.removeEvent=function(){o.default.ins().removeListener(h.default.ins().postEnterMap.funcallname,this.openRingActivity,this)},t.prototype.openRingActivity=function(){0==g.default.fbType&&(o.default.ins().removeListener(h.default.ins().postEnterMap.funcallname,this.openRingActivity,this),ViewManager.ins().open(ActivityWin,201),v.default.ins().sendChangePage(201))},t.prototype.getType8RedPoint=function(e){var t=!1,i=v.default.ins().activityData[e];return i&&0==i.record&&(t=!0),t},t.prototype.getType9RedPoint=function(e){var i=!1;t.ins().activityData[e];if(this.getRollSum(e))i=!0;else{var n=r.default.PActivityType9Config[e];for(var a in n[0].reward)if(this.isGetRollReward(e,+a)){i=!0;break}}return i},t.prototype.getType10RedPoint=function(e){var t=v.default.ins().activityData[e],i=r.default.ActivityType10Config[e][t.getLevel()];return!!i&&(t.yb>=i.recharge&&d.default.yb>=i.yuanBao)},t.prototype.getType17RedPoint=function(e){var t=v.default.ins().activityData[e],i=r.default.ActivityType17_2Config[e];return!!i&&t.score>=i.score},t.prototype.isGetRollReward=function(e,i){var n=t.ins().activityData[e],a=r.default.PActivityType9Config[e];return!(!(a&&a[0]&&a[0].reward[i].times&&n.count>=a[0].reward[i].times)||n.record>>i+1&1)},t.prototype.getRollSum=function(e){var t=r.default.PActivityType9Config[e];if(t&&t[0]&&p.default.ins().getBagItemById(t[0].item))return!0;return!1},t.prototype.getIsRollTen=function(e){var t=r.default.PActivityType9Config[e][0];if(t){var i=0;if(t.item){var n=p.default.ins().getBagItemById(t.item);if(n&&(i+=n.count),i>=10)return!0}if(i=10-i,t.yb&&d.default.yb>=t.yb*i)return!0}return!1},t.NotReached=0,t.CanGet=1,t.Geted=2,t.NOKILL=0,t.KILL=1,t}(n.default);i.default=b;var _=function(){function e(){}return e.prototype.prase=function(e,t){if(t==RankDataType.TYPE_XIAOFEI||t==RankDataType.TYPE_HF_XIAOFEI)return this.rankIndex=e.readShort(),this.id=e.readInt(),this.name=e.readString(),void(this.numType=e.readInt());if(this.rankIndex=e.readShort(),this.id=e.readInt(),this.name=e.readString(),this.level=e.readShort(),this.zsLevel=e.readShort(),this.monthCard=e.readShort(),this.vipLv=e.readShort(),RankDataType.TYPE_LEVEL!=t)if(t==RankDataType.TYPE_BAOSHI||t==RankDataType.TYPE_LONGHUN)this.numType=e.readInt();else if(t==RankDataType.TYPE_ZHANLING){var i=e.readInt(),n=e.readInt();this.numType=[i,n]}else this.numType=e.readDouble()},e}();i.PDabiaoData=_,window.GameSystem.push(b.ins.bind(b)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../../core/utils/StringUtils":"StringUtils","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../../map/GameMap":"GameMap","../activity/Activity":"Activity","../activity/model/ActivityType8Data":"ActivityType8Data","../bag/UserBag":"UserBag","../gamescene/GameLogic":"GameLogic","../recharge/Recharge":"Recharge","../server/GameServer":"GameServer","../tips/UserTips":"UserTips","./model/PActivityDataFactory":"PActivityDataFactory"}],PackageID:[function(e,t,i){"use strict";cc._RF.push(t,"60d36i4NPxElZXHDLdgJ+5s","PackageID"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.Default=0]="Default",e[e.Guanqia=1]="Guanqia",e[e.Skill=2]="Skill",e[e.Bag=3]="Bag",e[e.Equip=4]="Equip",e[e.Encounter=5]="Encounter",e[e.Wing=6]="Wing",e[e.strongthen=7]="strongthen",e[e.Mail=8]="Mail",e[e.Task=9]="Task",e[e.Boss=10]="Boss",e[e.Gem=11]="Gem",e[e.JingMai=12]="JingMai",e[e.Zs=13]="Zs",e[e.Zhuling=14]="Zhuling",e[e.Tupo=15]="Tupo",e[e.Shop=16]="Shop",e[e.Ring=17]="Ring",e[e.Ranking=18]="Ranking",e[e.Vip=19]="Vip",e[e.Notice=20]="Notice",e[e.LoongSoul=21]="LoongSoul",e[e.TreasureHunt=22]="TreasureHunt",e[e.Train=23]="Train",e[e.FbChallenge=24]="FbChallenge",e[e.Activity=25]="Activity",e[e.Artifact=26]="Artifact",e[e.Recharge=27]="Recharge",e[e.ExpGold=28]="ExpGold",e[e.CDKey=29]="CDKey",e[e.Chat=30]="Chat",e[e.ZhuZaiEquip=31]="ZhuZaiEquip",e[e.ZsBoss=32]="ZsBoss",e[e.pfActivity=33]="pfActivity",e[e.Ladder=34]="Ladder",e[e.Miji=35]="Miji",e[e.moneyTree=36]="moneyTree",e[e.Guild=37]="Guild",e[e.Title=38]="Title",e[e.GuildFB=39]="GuildFB",e[e.GuildWar=40]="GuildWar",e[e.GuildRobber=41]="GuildRobber",e[e.GuildStore=42]="GuildStore",e[e.WarSpirit=43]="WarSpirit",e[e.Dress=44]="Dress",e[e.GuildBoss=46]="GuildBoss",e[e.Friends=47]="Friends",e[e.Mine=49]="Mine",e[e.Rune=50]="Rune",e[e.NeiGong=51]="NeiGong",e[e.Box=52]="Box",e[e.Book=53]="Book",e[e.DailyCheckIn=54]="DailyCheckIn",e[e.Heirloom=55]="Heirloom",e[e.Weapons=56]="Weapons",e[e.Millionaire=57]="Millionaire",e[e.City=58]="City",e[e.ThreeHeroes=59]="ThreeHeroes",e[e.GodWeapon=60]="GodWeapon",e[e.Battle=61]="Battle",e[e.PaoDian=62]="PaoDian",e[e.GodWeaponItem=63]="GodWeaponItem",e[e.Samsara=64]="Samsara",e[e.WJBattle=65]="WJBattle",e[e.WeiWang=66]="WeiWang",e[e.PKCompetition=67]="PKCompetition",e[e.PActivity=68]="PActivity",e[e.HeartMethod=69]="HeartMethod",e[e.JadeNew=70]="JadeNew",e[e.LyMark=71]="LyMark",e[e.KFBoss=72]="KFBoss",e[e.Shenshou=73]="Shenshou",e[e.Hungu=74]="Hungu",e[e.Devildom=75]="Devildom",e[e.Auction=76]="Auction",e[e.KfArena=77]="KfArena",e[e.Login=255]="Login"}(i.PackageID||(i.PackageID={})),cc._RF.pop()},{}],PaoDianCC:[function(e,t,i){"use strict";cc._RF.push(t,"30d53O+NL9CLp7N7JZm2qc3","PaoDianCC"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../manager/GlobalConfig"),r=e("../../map/GameMap"),s=e("../../entity/Actor"),u=e("../zs/UserZs"),l=e("../../../core/base/MessageCenter"),c=e("../../Utils/EgretUtils"),d=e("../boss/UserBoss"),f=e("../../../core/utils/DateUtils"),p=e("../fb/UserFb"),h=e("../server/GameServer"),g=function(e){function t(){var i=e.call(this)||this;return i._openLeftTime=0,i._openTimer=0,i._enterCD=0,i._enterCDTimer=0,i._leftTime=0,i._areaId=0,i._shenBingExp=0,i._jadeChips=0,i.sysId=a.PackageID.PaoDian,l.default.compile(t),i.regNetMsg(1,i.postEnterSuccess),i.regNetMsg(2,i.postBelongChange),i.regNetMsg(3,i.doEnterCD),i.regNetMsg(4,i.postOpenInfo),i.regNetMsg(5,i.doRelive),i.regNetMsg(6,i.postMyInfo),i.regNetMsg(7,i.postAreaChange),i.regNetMsg(8,i.doResult),i}return __extends(t,e),Object.defineProperty(t.prototype,"areaId",{get:function(){return this._areaId},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"shenBingExp",{get:function(){return this._shenBingExp},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"jadeChips",{get:function(){return this._jadeChips},enumerable:!0,configurable:!0}),t.prototype.mapChange=function(){r.default.fubenID==o.default.PassionPointConfig.fbId&&this.enterBattle(),this._isPaoDian&&r.default.fubenID!=o.default.PassionPointConfig.fbId&&this.escBattle(),this.gotoNpc&&r.default.fbType==p.default.FB_TYPE_CITY&&(this.gotoNpc=!1,r.default.myMoveTo(o.default.PassionPointConfig.npcPos[0]*r.default.CELL_SIZE,o.default.PassionPointConfig.npcPos[1]*r.default.CELL_SIZE,this.findComplete),r.default.moveTo(o.default.PassionPointConfig.npcPos[0]*r.default.CELL_SIZE,o.default.PassionPointConfig.npcPos[1]*r.default.CELL_SIZE))},t.prototype.findComplete=function(){ViewManager.ins().open(PaoDianNpcTalkWin)},t.prototype.enterBattle=function(){this._isPaoDian=!0,ViewManager.ins().isShow(PaoDianWin)||ViewManager.ins().open(PaoDianWin),ViewManager.ins().close(PaoDianNpcTalkWin)},t.prototype.escBattle=function(){this._isPaoDian=!1,ViewManager.ins().close(PaoDianWin)},t.ins=function(){return e.ins.call(this)},Object.defineProperty(t.prototype,"isPaoDian",{get:function(){return this._isPaoDian},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isOpen",{get:function(){return this._isOpen},enumerable:!0,configurable:!0}),t.prototype.enterPaoDian=function(){this.sendBaseProto(1)},t.prototype.postEnterSuccess=function(e){this._leftTime=f.default.formatMiniDateTime(e.readInt())},t.prototype.getLeftTime=function(){return Math.floor((this._leftTime-h.default.serverTime)/1e3)},t.prototype.postBelongChange=function(e){this._belongs=[];var t=e.readInt();this._belongs.length=t;for(var i=0;i<t;i++)this._belongs[i]={id:e.readShort(),handler:e.readDouble()}},t.prototype.doEnterCD=function(e){this._enterCD=e.readInt(),this._enterCDTimer=c.default.getTimer()},t.prototype.getEnterCD=function(){return Math.ceil(this._enterCD-(c.default.getTimer()-this._enterCDTimer)/1e3)},t.prototype.postOpenInfo=function(e){this._isOpen=e.readBoolean(),this._openLeftTime=e.readInt(),this._openTimer=c.default.getTimer()},t.prototype.getOpenLeftTime=function(){return this._openLeftTime-(c.default.getTimer()-this._openTimer)/1e3},t.prototype.sendReLive=function(){this.sendBaseProto(5)},t.prototype.doRelive=function(e){d.default.ins().reliveTime=e.readInt(),d.default.ins().killerHandler=e.readDouble(),ViewManager.ins().close(TargetPlayerBigBloodPanel),d.default.ins().reliveTime>0?(d.default.ins().clearWorldBossList(),ViewManager.ins().open(WorldBossBeKillWin)):ViewManager.ins().close(WorldBossBeKillWin)},t.prototype.sendCheckMyInfo=function(){this.sendBaseProto(6)},t.prototype.postMyInfo=function(e){this._shenBingExp=e.readInt(),this._jadeChips=e.readInt()},t.prototype.postAreaChange=function(e){this._areaId=e.readShort()},t.prototype.doResult=function(e){var t=e.readInt(),i=[];i.length=t;for(var n=0;n<t;n++)i[n]=new PaoDianRankVo(e);ViewManager.ins().open(PaoDianResultWin,i)},t.prototype.checkRedPoint=function(){return this.isOpen&&s.default.level+1e3*u.default.ins().lv>=o.default.PassionPointConfig.openLv},t.prototype.getBelongById=function(e){if(!this._belongs||0==this._belongs.length)return null;for(var t=this._belongs.length,i=0;i<t;i++)if(this._belongs[i].id==e)return this._belongs[i];return null},t}(n.default);i.default=g,g.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../Utils/EgretUtils":"EgretUtils","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../../map/GameMap":"GameMap","../boss/UserBoss":"UserBoss","../fb/UserFb":"UserFb","../server/GameServer":"GameServer","../zs/UserZs":"UserZs"}],PaoDianIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"283d8LiEjdN7qiWCCDKIvVT","PaoDianIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../paoDian/PaoDianCC"),r=e("../../../../core/utils/DateUtils"),s=e("../../../manager/TimerManager"),u=e("../../opensystem/OpenSystem"),l=e("../../../consts/SystemConst"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n._time=0,n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postOpenInfo],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);if(o.default.ins().isOpen)this._timeTxt.string="\u8fdb\u884c\u4e2d";else{var i=o.default.ins().getOpenLeftTime();i>0&&(this._time=i,this._timeTxt.string=r.default.getFormatBySecond(this._time,r.default.TIME_FORMAT_5,4),s.default.ins().isExists(this.setRepeat,this)||s.default.ins().doTimer(1e3,0,this.setRepeat,this))}return t},t.prototype.checkShowIcon=function(){if(s.default.ins().removeAll(this),!u.default.ins().checkSysOpen(l.SystemType.PAODIAN))return!1;if(o.default.ins().isOpen)return!0;var e=o.default.ins().getOpenLeftTime();return e>0&&(this._time=e,s.default.ins().isExists(this.setRepeat,this)||s.default.ins().doTimer(1e3,0,this.setRepeat,this),!0)},t.prototype.setRepeat=function(){this._time--,this._time>0?this._timeTxt.string=r.default.getFormatBySecond(this._time,r.default.TIME_FORMAT_5,4):(this._timeTxt.string="\u8fdb\u884c\u4e2d",s.default.ins().removeAll(this))},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.getEffName=function(e){return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(FbWin,3),this.update()},t}(n.default);i.default=c,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../manager/TimerManager":"TimerManager","../../opensystem/OpenSystem":"OpenSystem","../../paoDian/PaoDianCC":"PaoDianCC","./RuleIconBase":"RuleIconBase"}],PaoDianRankVo:[function(e,t,i){"use strict";cc._RF.push(t,"1f51e4yq35A0pkXz31MhBIw","PaoDianRankVo");cc._RF.pop()},{}],PassionPointAwardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"8b53b7kXDFMc5kYjfq7G31k","PassionPointAwardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],PassionPointConfig:[function(e,t,i){"use strict";cc._RF.push(t,"bb377XIAiNFR5VFd0aS92pG","PassionPointConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],PayItemsConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ae217kkYs1Av6QdFNxvjcU7","PayItemsConfig");cc._RF.pop()},{}],PeakRaceBase:[function(e,t,i){"use strict";cc._RF.push(t,"07e7b5J4TJGmpJEEzvrr1lV","PeakRaceBase"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],PeakRaceCrossTime:[function(e,t,i){"use strict";cc._RF.push(t,"75b9bKbhOlOtKH7B/ZwLXHh","PeakRaceCrossTime"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],PeakRaceTime:[function(e,t,i){"use strict";cc._RF.push(t,"7c630SA2txBAqKJKBMAVEj8","PeakRaceTime"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],PeakedData:[function(e,t,i){"use strict";cc._RF.push(t,"f2b01BI8HFNVYjHSqDuJQWy","PeakedData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.STATE_TYPE_CN=["","","","16\u8fdb8\u5f3a","8\u8fdb4\u5f3a","\u534a\u51b3\u8d5b","\u51b3\u8d5b",""],e.STATE_TYPE_AWARD_CN=["","","\u53c2\u4e0e\u5956","16\u5f3a","8\u5f3a","4\u5f3a","\u4e9a\u519b","\u51a0\u519b"],e.STATE_ICON_CN=["","\u62a5\u540d","\u6dd8\u6c70\u8d5b","8\u5f3a\u8d5b","4\u5f3a\u8d5b","\u534a\u51b3\u8d5b","\u51b3\u8d5b","\u8de8\u670d\u8d5b"],e.STATE_KF_TYPE_CN=["","","64\u8fdb32\u5f3a","32\u8fdb16\u5f3a","16\u8fdb8\u5f3a","8\u8fdb4\u5f3a","\u534a\u51b3\u8d5b","\u51b3\u8d5b",""],e.STATE_KF_TYPE_AWARD_CN=["","\u53c2\u4e0e\u5956","64\u5f3a","32\u5f3a","16\u5f3a","8\u5f3a","4\u5f3a","\u4e9a\u519b","\u51a0\u519b"],e.STATE_KF_ICON_CN=["\u8de8\u670d\u8d5b","\u6dd8\u6c70\u8d5b","32\u5f3a\u8d5b","16\u5f3a\u8d5b","8\u5f3a\u8d5b","4\u5f3a\u8d5b","\u534a\u51b3\u8d5b","\u51b3\u8d5b"],e.SERV_CN=["\u672c\u670d\u8d5b","\u8de8\u670d\u8d5b"],e}();i.PeakedData=n;var a=function(){function e(e){e&&this.readBaseData(e)}return e.prototype.readBaseData=function(e,t){void 0===t&&(t=!1);var i=e.readByte();this.playerList=[];for(var n=0;n<i;n++){var a=new o;t?a.readKFData(e):a.readData(e),this.playerList.push(a)}this.winId=e.readInt(),i=e.readByte(),this.reportList=[];for(n=0;n<i;n++)this.reportList.push(e.readInt())},e.prototype.readToData=function(e){this.winId=e.readInt();var t=e.readByte();this.reportList=[];for(var i=0;i<t;i++)this.reportList.push(e.readInt())},e}();i.PeakPlayerData=a;var o=function(){function e(e){this.serverId=0,e&&this.readData(e)}return e.prototype.readData=function(e){this.roleId=e.readInt(),this.playerName=e.readString(),this.job=e.readByte(),this.sex=e.readByte(),this.pos=e.readByte()},e.prototype.readKFData=function(e){this.roleId=e.readInt(),this.serverId=e.readInt(),this.playerName=e.readString(),this.job=e.readByte(),this.sex=e.readByte(),this.pos=e.readByte()},e}();i.PeakPlayerInfo=o;var r=function(){function e(e){e&&this.readData(e)}return e.prototype.readData=function(e){this.playerId=e.readInt(),this.playerName=e.readString(),this.servId=e.readInt(),this.likeNum=e.readInt()},e}();i.PeakTopRankData=r;var s=function(){function e(e){e&&this.readData(e)}return e.prototype.readData=function(e){this.status=e.readByte(),this.playerId=e.readInt(),this.batNum=e.readInt()},e}();i.PeakBetData=s;var u=function(){return function(){}}();i.PeakBattleReportData=u;var l=function(){function e(){}return e.prototype.readBFData=function(e){this.id=e.readInt(),this.player=e.readString(),this.result=e.readByte()},e.prototype.readKFData=function(e){this.id=e.readInt(),this.player=e.readString(),this.servId=e.readInt(),this.result=e.readByte()},e}();i.KonckReportData=l,function(e){e[e.None=0]="None",e[e.SignUp=1]="SignUp",e[e.Knockout=2]="Knockout",e[e.Prom16=3]="Prom16",e[e.Prom8=4]="Prom8",e[e.Prom4=5]="Prom4",e[e.Finals=6]="Finals",e[e.Over=7]="Over"}(i.BF_PeakStatus||(i.BF_PeakStatus={})),function(e){e[e.None=0]="None",e[e.Knockout=1]="Knockout",e[e.Prom64=2]="Prom64",e[e.Prom32=3]="Prom32",e[e.Prom16=4]="Prom16",e[e.Prom8=5]="Prom8",e[e.Prom4=6]="Prom4",e[e.Finals=7]="Finals",e[e.Over=8]="Over"}(i.KF_PeakStatus||(i.KF_PeakStatus={})),cc._RF.pop()},{}],PeakedHelp:[function(e,t,i){"use strict";cc._RF.push(t,"2f916Z5CrxPD6+9ZzpTvY/e","PeakedHelp"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../manager/GlobalConfig"),a=e("../PeakedSys"),o=e("../../../../../core/utils/DateUtils"),r=e("../../../../entity/Actor"),s=e("../../../server/GameServer"),u=e("../data/PeakedData"),l=function(){function e(){}return e.calcTimerNode=function(){var e=n.default.PeakRaceBase,t=n.default.PeakRaceTime,i=a.default.ins();this.bfStatusTimer=[],this.kfStatusTimer=[];var r=Math.floor(o.default.formatMiniDateTime(i.curStateTime)/o.default.MS_PER_SECOND);a.default.ins().bfStatus>=u.BF_PeakStatus.Finals&&a.default.ins().bfStatusIsEnd&&(n.default.PeakRaceBase.interval||(n.default.PeakRaceBase.interval=14),r-=n.default.PeakRaceBase.interval*o.default.MS_PER_DAY/o.default.MS_PER_SECOND),this.bfStatusTimer[u.BF_PeakStatus.None]=r,this.bfStatusTimer[u.BF_PeakStatus.Over]=r+e.crossRelTime;for(var s=1;s<=u.BF_PeakStatus.Finals;s++)this.bfStatusTimer[s]=r+t[s].relTime;t=n.default.PeakRaceCrossTime,this.kfStatusTimer[u.KF_PeakStatus.None]=r;for(s=1;s<=u.KF_PeakStatus.Finals;s++)this.kfStatusTimer[s]=r+t[s].relTime},e.getTimerRuleStr=function(){var e=n.default.PeakRaceBase,t="|C:"+ColorUtil.GREEN+"&T:",i="1\u3001\u62a5\u540d\u7b49\u7ea7\uff1a\u8fbe\u5230"+t+e.needZsLv+"|\u8f6c\n",a=o.default.TIME_FORMAT_13,r=o.default.getFormatBySecond(this.bfStatusTimer[u.BF_PeakStatus.SignUp],a);return i+="2\u3001\u62a5\u540d\u65f6\u95f4\uff1a"+t+r+"|\u5230"+t+o.default.getFormatBySecond(this.bfStatusTimer[u.BF_PeakStatus.Knockout],a)+"|\n",i+="3\u3001\u6dd8\u6c70\u8d5b\uff1a"+t+(r=o.default.getFormatBySecond(this.bfStatusTimer[u.BF_PeakStatus.Knockout],a))+"|\u4e3e\u884c\uff0c\u6240\u6709\u62a5\u540d\u73a9\u5bb6\u4e89\u593a16\u5f3a\u5e2d\u4f4d\n",i+="4\u3001\u516b\u5f3a\u8d5b\uff1a"+t+(r=o.default.getFormatBySecond(this.bfStatusTimer[u.BF_PeakStatus.Prom16],a))+"|\u4e3e\u884c\n",i+="5\u3001\u56db\u5f3a\u8d5b\uff1a"+t+(r=o.default.getFormatBySecond(this.bfStatusTimer[u.BF_PeakStatus.Prom8],a))+"|\u4e3e\u884c\n",i+="6\u3001\u534a\u51b3\u8d5b\uff1a"+t+(r=o.default.getFormatBySecond(this.bfStatusTimer[u.BF_PeakStatus.Prom4],a))+"|\u4e3e\u884c\n",i+="7\u3001\u51b3\u8d5b\uff1a"+t+(r=o.default.getFormatBySecond(this.bfStatusTimer[u.BF_PeakStatus.Finals],a))+"|\u4e3e\u884c\n"},e.getKFTimerRuleStr=function(){var e="|C:"+ColorUtil.GREEN+"&T:",t="1\u3001\u62a5\u540d\u6761\u4ef6\uff1a\u5355\u670d16\u5f3a\u81ea\u52a8\u62a5\u540d\n",i=o.default.TIME_FORMAT_13,n=o.default.getFormatBySecond(this.kfStatusTimer[u.KF_PeakStatus.Knockout],i);return t+="2\u3001\u6dd8\u6c70\u8d5b\uff1a"+e+n+"|\u4e3e\u884c\uff0c\u51b3\u51fa64\u5f3a\n",t+="3\u300132\u5f3a\u8d5b\uff1a"+e+(n=o.default.getFormatBySecond(this.kfStatusTimer[u.KF_PeakStatus.Prom64],i))+"|\u4e3e\u884c\n",t+="4\u300116\u5f3a\u8d5b\uff1a"+e+(n=o.default.getFormatBySecond(this.kfStatusTimer[u.KF_PeakStatus.Prom32],i))+"|\u4e3e\u884c\n",t+="4\u3001\u516b\u5f3a\u8d5b\uff1a"+e+(n=o.default.getFormatBySecond(this.kfStatusTimer[u.KF_PeakStatus.Prom16],i))+"|\u4e3e\u884c\n",t+="5\u3001\u56db\u5f3a\u8d5b\uff1a"+e+(n=o.default.getFormatBySecond(this.kfStatusTimer[u.KF_PeakStatus.Prom8],i))+"|\u4e3e\u884c\n",t+="6\u3001\u534a\u51b3\u8d5b\uff1a"+e+(n=o.default.getFormatBySecond(this.kfStatusTimer[u.KF_PeakStatus.Prom4],i))+"|\u4e3e\u884c\n",t+="7\u3001\u51b3\u8d5b\uff1a"+e+(n=o.default.getFormatBySecond(this.kfStatusTimer[u.KF_PeakStatus.Finals],i))+"|\u4e3e\u884c\n"},e.calcEliminateWinNum=function(){var e=0;if(a.default.ins().isKf())for(var t=0,i=a.default.ins().kfKonckReportList;t<i.length;t++){i[t].result&&e++}else for(var n=0,o=a.default.ins().bfKonckReportList;n<o.length;n++){o[n].result&&e++}return e},e.getPlayerData=function(e,t){var i=a.default.ins();return e==this.PK_GROUP_1?i.player16List[t-1]:e==this.PK_GROUP_2?i.player8List[t-1]?i.player8List[t-1]:this.findLastDt(t,i.player16List):e==this.PK_GROUP_3?i.player4List[t-1]?i.player4List[t-1]:this.findLastDt(t,i.player8List):i.player2Data?i.player2Data:this.findLastDt(t,i.player4List)},e.getKFPlayerData=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=!1);var o=a.default.ins();return e==this.PK_GROUP_1?n?o.kfPlayer16List[t-1]?o.kfPlayer16List[t-1]:this.findLastDt(t,o.kfPlayer64List):o.kfPlayer64List.slice(8*i,8*i+8)[t-1]:e==this.PK_GROUP_2?n?o.kfPlayer8List[t-1]?o.kfPlayer8List[t-1]:this.findLastDt(t,o.kfPlayer16List):o.kfPlayer32List.slice(4*i,4*i+4)[t-1]?o.kfPlayer32List.slice(4*i,4*i+4)[t-1]:this.findLastDt(t,o.kfPlayer64List.slice(8*i,8*i+8)):e==this.PK_GROUP_3?n?o.kfPlayer4List[t-1]?o.kfPlayer4List[t-1]:this.findLastDt(t,o.kfPlayer8List):o.kfPlayer16List.slice(2*i,2*i+2)[t-1]?o.kfPlayer16List.slice(2*i,2*i+2)[t-1]:this.findLastDt(t,o.kfPlayer32List.slice(4*i,4*i+4)):o.kfPlayer2Data?o.kfPlayer2Data:this.findLastDt(t,o.kfPlayer4List)},e.findLastDt=function(e,t){if(t&&t[2*(e-1)+1]){var i=t[2*(e-1)>>0].winId,n=t[2*(e-1)+1>>0].winId,a=new u.PeakPlayerData;return a.playerList=[],a.playerList.push(this.findPlayerDtById(i)),a.playerList.push(this.findPlayerDtById(n)),a.reportList=[],a}return null},e.findPlayerDtById=function(e,t){t||(t=a.default.ins().isKf()?a.default.ins().kfPlayer64List:a.default.ins().player16List);for(var i=0,n=t;i<n.length;i++)for(var o=0,r=n[i].playerList;o<r.length;o++){var s=r[o];if(e==s.roleId)return s}},e.checkIsWinById=function(t,i,n){n||(n=(a.default.ins().isKf(),e.getPlayerListByStage(i)));for(var o=0,r=n;o<r.length;o++){if(t==r[o].winId)return!0}return!1},e.getPlayerListByStage=function(e){if(a.default.ins().isKf())switch(e){case u.KF_PeakStatus.Knockout:case u.KF_PeakStatus.Prom64:return a.default.ins().kfPlayer64List;case u.KF_PeakStatus.Prom32:return a.default.ins().kfPlayer32List;case u.KF_PeakStatus.Prom16:return a.default.ins().kfPlayer16List;case u.KF_PeakStatus.Prom8:return a.default.ins().kfPlayer8List;case u.KF_PeakStatus.Prom4:return a.default.ins().kfPlayer4List;case u.KF_PeakStatus.Finals:return[a.default.ins().kfPlayer2Data]}else switch(e){case u.BF_PeakStatus.Prom16:case u.BF_PeakStatus.Knockout:return a.default.ins().player16List;case u.BF_PeakStatus.Prom8:return a.default.ins().player8List;case u.BF_PeakStatus.Prom4:return a.default.ins().player4List;case u.BF_PeakStatus.Finals:return[a.default.ins().player2Data]}},e.countMyRecordData=function(){for(var e=a.default.ins().player16List,t=a.default.ins().player8List,i=a.default.ins().player4List,n=a.default.ins().player2Data,o=function(e,t,i){for(var n=e.playerList.length,o=0;o<n;o++){if(e.playerList[o].roleId==r.default.actorID){var s=n>1?e.playerList[0==o?1:0].playerName:"\u8f6e\u7a7a";if(0==e.reportList.length&&!e.playerList[1]&&i<a.default.ins().bfStatus)(f=new u.PeakBattleReportData).stateType=i,f.playerName=s,f.result=1,f.round=0,t.push(f);else for(var l=0,c=0,d=e.reportList;c<d.length;c++){var f,p=d[c];(f=new u.PeakBattleReportData).stateType=i,f.playerName=s,f.result=p==r.default.actorID?1:0,f.round=++l,t.push(f)}break}}},s=[],l=0,c=e;l<c.length;l++){o(c[l],s,u.BF_PeakStatus.Prom16)}for(var d=0,f=t;d<f.length;d++){o(f[d],s,u.BF_PeakStatus.Prom8)}for(var p=0,h=i;p<h.length;p++){o(h[p],s,u.BF_PeakStatus.Prom4)}return o(n,s,u.BF_PeakStatus.Finals),s},e.countKFMyRecordData=function(){for(var e=a.default.ins().kfPlayer64List,t=a.default.ins().kfPlayer32List,i=a.default.ins().kfPlayer16List,n=a.default.ins().kfPlayer8List,o=a.default.ins().kfPlayer4List,s=a.default.ins().kfPlayer2Data,l=function(e,t,i){for(var n=e.playerList.length,o=0;o<n;o++){if(e.playerList[o].roleId==r.default.actorID){var s=n>1?e.playerList[0==o?1:0].playerName:"\u8f6e\u7a7a";if(0==e.reportList.length&&!e.playerList[1]&&i<a.default.ins().kfStatus)(f=new u.PeakBattleReportData).stateType=i,f.playerName=s,f.result=1,f.round=0,t.push(f);else for(var l=0,c=0,d=e.reportList;c<d.length;c++){var f,p=d[c];(f=new u.PeakBattleReportData).stateType=i,f.playerName=s,f.result=p==r.default.actorID?1:0,f.round=++l,t.push(f)}break}}},c=[],d=0,f=e;d<f.length;d++){l(f[d],c,u.KF_PeakStatus.Prom64)}for(var p=0,h=t;p<h.length;p++){l(h[p],c,u.KF_PeakStatus.Prom32)}for(var g=0,y=i;g<y.length;g++){l(y[g],c,u.KF_PeakStatus.Prom16)}for(var v=0,m=n;v<m.length;v++){l(m[v],c,u.KF_PeakStatus.Prom8)}for(var b=0,_=o;b<_.length;b++){l(_[b],c,u.KF_PeakStatus.Prom4)}return l(s,c,u.KF_PeakStatus.Finals),c},e.findBetInfoById=function(e,t,i){i||(i=a.default.ins().isKf()?a.default.ins().kfBetInfo:a.default.ins().betInfo);if(!i)return null;for(var n=0,o=i;n<o.length;n++){var r=o[n];if(r.playerId==e&&r.status==t)return r}return null},e.getStatusByGroup=function(e){if(a.default.ins().isKf())if(a.default.ins().isKFSixteen())switch(e){case this.PK_GROUP_1:return u.KF_PeakStatus.Prom16;case this.PK_GROUP_2:return u.KF_PeakStatus.Prom8;case this.PK_GROUP_3:return u.KF_PeakStatus.Prom4;case this.PK_GROUP_4:return u.KF_PeakStatus.Finals}else switch(e){case this.PK_GROUP_1:return u.KF_PeakStatus.Prom64;case this.PK_GROUP_2:return u.KF_PeakStatus.Prom32}else switch(e){case this.PK_GROUP_1:return u.BF_PeakStatus.Prom16;case this.PK_GROUP_2:return u.BF_PeakStatus.Prom8;case this.PK_GROUP_3:return u.BF_PeakStatus.Prom4;case this.PK_GROUP_4:return u.BF_PeakStatus.Finals}},e.checkIsBet=function(e,t){for(var i=parseInt(t),n=a.default.ins().isKf(),o=0,r=e;o<r.length;o++){var s=r[o];if(s){var l=this.findBetInfoById(s.roleId,this.getStatusByGroup(parseInt(t)));if(l)if(n)if(a.default.ins().isKFSixteen()){if(i==this.PK_GROUP_1&&l.status==u.KF_PeakStatus.Prom16)return!0;if(i==this.PK_GROUP_2&&l.status==u.KF_PeakStatus.Prom8)return!0;if(i==this.PK_GROUP_3&&l.status==u.KF_PeakStatus.Prom4)return!0;if(i==this.PK_GROUP_4&&l.status==u.KF_PeakStatus.Finals)return!0}else{if(i==this.PK_GROUP_1&&l.status==u.KF_PeakStatus.Prom64)return!0;if(i==this.PK_GROUP_2&&l.status==u.KF_PeakStatus.Prom32)return!0}else{if(i==this.PK_GROUP_1&&l.status==u.BF_PeakStatus.Prom16)return!0;if(i==this.PK_GROUP_2&&l.status==u.BF_PeakStatus.Prom8)return!0;if(i==this.PK_GROUP_3&&l.status==u.BF_PeakStatus.Prom4)return!0;if(i==this.PK_GROUP_4&&l.status==u.BF_PeakStatus.Finals)return!0}}}return!1},e.findPlayerIndexById=function(e,t){for(var i=0;i<t.length;i++)if(t[i].roleId==e)return i;return-1},e.setImgGroupSource=function(e,t){for(var i=0;i<e.numChildren;i++){var n=e.getChildAt(i);n&&(n.source=t)}},e.statusIsOver=function(e,t){return t?a.default.ins().kfStatus>e||a.default.ins().kfStatus==e&&0!=a.default.ins().kfStatusIsEnd:a.default.ins().bfStatus>e||a.default.ins().bfStatus==e&&0!=a.default.ins().bfStatusIsEnd},e.statusIsOverByGroup=function(t){var i=!1;return a.default.ins().isKf()?a.default.ins().isKFSixteen()?i=t==this.PK_GROUP_1?e.statusIsOver(u.KF_PeakStatus.Prom16,!1):t==this.PK_GROUP_2?e.statusIsOver(u.KF_PeakStatus.Prom8,!1):t==this.PK_GROUP_3?e.statusIsOver(u.KF_PeakStatus.Prom4,!1):e.statusIsOver(u.KF_PeakStatus.Finals,!1):t==this.PK_GROUP_1?i=e.statusIsOver(u.KF_PeakStatus.Prom64,!1):t==this.PK_GROUP_2&&(i=e.statusIsOver(u.KF_PeakStatus.Prom32,!1)):i=t==this.PK_GROUP_1?e.statusIsOver(u.BF_PeakStatus.Prom16,!1):t==this.PK_GROUP_2?e.statusIsOver(u.BF_PeakStatus.Prom8,!1):t==this.PK_GROUP_3?e.statusIsOver(u.BF_PeakStatus.Prom4,!1):e.statusIsOver(u.BF_PeakStatus.Finals,!1),i},e.pushPlayerList=function(t,i,n,a){var o;t[2*a]&&((o=e.findPlayerDtById(t[2*a].winId,i))&&n.push(o));t[2*a+1]&&((o=e.findPlayerDtById(t[2*a+1].winId,i))&&n.push(o))},e.isSixteenById=function(e){for(var t=0,i=a.default.ins().player16List;t<i.length;t++){var n=i[t];if(n)for(var o=0,r=n.playerList;o<r.length;o++){if(r[o].roleId==e)return!0}}return!1},e.sortBetFun=function(e,t){return e.status>t.status?1:e.status<t.status?-1:0},e.findKFGroupById=function(e){for(var t=0,i=0,n=a.default.ins().kfPlayer64List;i<n.length;i++)for(var o=0,r=n[i].playerList;o<r.length;o++){if(r[o].roleId==e)return t/16>>0;t++}return-1},e.findBetKFGroup=function(){for(var e=a.default.ins().kfStatus,t=0,i=a.default.ins().kfBetInfo;t<i.length;t++){var n=i[t];if(n.status==u.KF_PeakStatus.Prom64&&e==u.KF_PeakStatus.Knockout||n.status==u.KF_PeakStatus.Prom32&&e==u.KF_PeakStatus.Prom64)return this.findKFGroupById(n.playerId)}return-1},e.canSupport=function(){var e=this.kfStatusTimer[u.KF_PeakStatus.None]+o.default.DAYS_PER_WEEK*o.default.SECOND_PER_DAY;return!(s.default.serverTime/o.default.MS_PER_SECOND>e&&a.default.ins().kfStatus>=u.KF_PeakStatus.Finals&&a.default.ins().kfStatusIsEnd)},e.PK_GROUP_1=1,e.PK_GROUP_2=2,e.PK_GROUP_3=3,e.PK_GROUP_4=4,e}();i.default=l,cc._RF.pop()},{"../../../../../core/utils/DateUtils":"DateUtils","../../../../entity/Actor":"Actor","../../../../manager/GlobalConfig":"GlobalConfig","../../../server/GameServer":"GameServer","../PeakedSys":"PeakedSys","../data/PeakedData":"PeakedData"}],PeakedIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"333baC10ZZBdqACTzsSqpcP","PeakedIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../fb/UserFb"),r=e("../../specialring/SpecialRing"),s=e("../../zs/UserZs"),u=e("../../kf/peaked/PeakedSys"),l=e("../../kf/peaked/PeakedRedpoint"),c=e("../../kf/peaked/data/PeakedData"),d=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postGuanqiaInfo,o.default.ins().postGuanKaIdChange,r.default.ins().postActiveRing,s.default.ins().postZsLv],n.updateMessage=[l.default.ins().postRedPoint],n}return __extends(t,e),t.prototype.update=function(){e.prototype.update.call(this),this.tar.txt&&(u.default.ins().isKf()?u.default.ins().kfStatusIsEnd&&u.default.ins().kfStatus<c.KF_PeakStatus.Finals?this.tar.txt.text=c.PeakedData.STATE_KF_ICON_CN[u.default.ins().kfStatus+1]:this.tar.txt.text=c.PeakedData.STATE_KF_ICON_CN[u.default.ins().kfStatus]:u.default.ins().bfStatusIsEnd&&u.default.ins().bfStatus<c.BF_PeakStatus.Finals?this.tar.txt.text=c.PeakedData.STATE_ICON_CN[u.default.ins().bfStatus+1]:this.tar.txt.text=c.PeakedData.STATE_ICON_CN[u.default.ins().bfStatus])},t.prototype.checkShowIcon=function(){return u.default.ins().isOpen()},t.prototype.checkShowRedPoint=function(){return l.default.ins().redpoint},t.prototype.tapExecute=function(){ViewManager.ins().open(PeakedMainWin)},t}(n.default);i.default=d,cc._RF.pop()},{"../../../entity/Actor":"Actor","../../fb/UserFb":"UserFb","../../kf/peaked/PeakedRedpoint":"PeakedRedpoint","../../kf/peaked/PeakedSys":"PeakedSys","../../kf/peaked/data/PeakedData":"PeakedData","../../specialring/SpecialRing":"SpecialRing","../../zs/UserZs":"UserZs","./RuleIconBase":"RuleIconBase"}],PeakedRedpoint:[function(e,t,i){"use strict";cc._RF.push(t,"6d0fa/chr1AZL9Rg83UQoWf","PeakedRedpoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/MessageCenter"),a=e("../../../base/BaseSystem"),o=e("./PeakedSys"),r=e("../../zs/UserZs"),s=e("../../../manager/GlobalConfig"),u=function(e){function t(){var i=e.call(this)||this;return i.redpoint1=0,i.redpoint2=0,i.redpoint3=0,i.redpoint=0,n.default.compile(t),i.associated(i.postRedPoint,o.default.ins().postSignUp,o.default.ins().postState,o.default.ins().postWorship,o.default.ins().postKFInfoList,r.default.ins().postZsLv),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postRedPoint=function(){return this.redpoint1=0,this.redpoint2=0,this.redpoint3=0,this.redpoint=0,o.default.ins().isOpen()?r.default.ins().lv<s.default.PeakRaceBase.needZsLv?this.redpoint:(o.default.ins().bfStatus==BF_PeakStatus.SignUp&&0==o.default.ins().isSignUp&&o.default.ins().canSignUp()&&(this.redpoint1=1),o.default.ins().isKf()&&PeakedHelp.canSupport()?(o.default.ins().kfStatus>KF_PeakStatus.Knockout||o.default.ins().kfStatus==KF_PeakStatus.Knockout&&o.default.ins().kfStatusIsEnd)&&(this.redpoint2=s.default.PeakRaceBase.likeCount-o.default.ins().kideNum):(o.default.ins().bfStatus>BF_PeakStatus.Knockout||o.default.ins().bfStatus==BF_PeakStatus.Knockout&&o.default.ins().bfStatusIsEnd)&&o.default.ins().bfStatus<BF_PeakStatus.Over&&PeakedHelp.canSupport()&&(this.redpoint2=s.default.PeakRaceBase.likeCount-o.default.ins().kideNum),this.redpoint3=o.default.ins().worshipNum<s.default.PeakRaceBase.mobaiNum&&o.default.ins().kfPlayer2Data&&o.default.ins().kfPlayer2Data.winId&&o.default.ins().kfStatus>=KF_PeakStatus.Knockout&&o.default.ins().kfStatusIsEnd?1:0,this.redpoint=this.redpoint1+this.redpoint2+this.redpoint3,this.redpoint):this.redpoint},t}(a.default);i.default=u,window.GameSystem.push(u.ins.bind(u)),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../base/BaseSystem":"BaseSystem","../../../manager/GlobalConfig":"GlobalConfig","../../zs/UserZs":"UserZs","./PeakedSys":"PeakedSys"}],PeakedSys:[function(e,t,i){"use strict";cc._RF.push(t,"88426PWTpxBk6PegxcnQiGF","PeakedSys"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../base/BaseSystem"),a=e("../../../../core/net/PackageID"),o=e("../../../../core/base/MessageCenter"),r=e("../../gamescene/GameLogic"),s=e("../../server/GameServer"),u=e("../../../manager/TimerManager"),l=e("../../../entity/Actor"),c=e("../../tips/UserTips"),d=e("../../../manager/GlobalConfig"),f=e("../../../consts/SystemConst"),p=e("../../opensystem/OpenSystem"),h=e("../../specialring/SpecialRing"),g=e("../../../../core/utils/DateUtils"),y=e("./help/PeakedHelp"),v=e("./data/PeakedData"),m=function(e){function t(){var i=e.call(this)||this;return i.player16List=[],i.player8List=[],i.player4List=[],i.topRankInfoList=[],i.betInfo=[],i.myBattleReportList=[],i.bfStatusIsEnd=0,i.kfStatusIsEnd=0,i.bfKonckReportList=[],i.kfPlayer64List=[],i.kfPlayer32List=[],i.kfPlayer16List=[],i.kfPlayer8List=[],i.kfPlayer4List=[],i.kfKonckReportList=[],i.kfTopRankInfoList=[],i.kfBetInfo=[],i.myKFBattleReportList=[],i.crossScene=1e4,o.default.compile(t),i.sysId=a.PackageID.PKCompetition,i.regNetMsg(0,i.postState),i.regNetMsg(1,i.postSignUp),i.regNetMsg(2,i.doPKResult),i.regNetMsg(3,i.postEliminateReportData),i.regNetMsg(4,i.postBFInfoList),i.regNetMsg(5,i.postTopRank),i.regNetMsg(7,i.postBetInfo),i.regNetMsg(8,i.postKFEliminateReportData),i.regNetMsg(9,i.postKFInfoList),i.regNetMsg(10,i.postKFTopRank),i.regNetMsg(12,i.postKFBetInfo),i.regNetMsg(13,i.doFbCountDown),i.regNetMsg(14,i.postWorship),i.observe(r.default.ins().postEnterMap,function(){i.isCrossScene()}),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postState=function(e){var i=this;if(e&&(this.bfStatus=e.readByte(),this.bfStatusIsEnd=e.readByte(),this.kfStatus=e.readByte(),this.kfStatusIsEnd=e.readByte(),0==this.bfStatus&&(this.isSignUp=0)),this.bfStatus==v.BF_PeakStatus.Finals&&this.bfStatusIsEnd){var n=1e3*y.default.bfStatusTimer[v.BF_PeakStatus.Over]-s.default.serverTime;this.kfStatus>v.KF_PeakStatus.None&&(n=0),n<=0?this.bfStatus=v.BF_PeakStatus.Over:u.default.ins().doTimer(n,1,function(){i.bfStatus=v.BF_PeakStatus.Over,y.default.calcTimerNode(),i.postState(null)},this)}y.default.calcTimerNode(),t.ins().isKf()&&t.ins().sendKFBetInfo()},t.prototype.postSignUp=function(e){return this.isSignUp=e.readByte(),this.kideNum=e.readInt(),l.default.ins().postChip(e.readNumber()),this.curStateTime=e.readInt(),this.worshipNum=e.readByte(),y.default.calcTimerNode(),this.isSignUp},t.prototype.doPKResult=function(e){var t=e.readByte(),i=e.readString();ViewManager.ins().open(PeakedFBResult,t,i)},t.prototype.postEliminateReportData=function(e){this.bfKonckRound=e.readShort(),this.bfKonckNextTimer=e.readInt(),this.bfKonckSurplusNum=e.readShort(),this.bfKonckReportList=[];for(var t=e.readShort(),i=0;i<t;i++){var n=new v.KonckReportData;n.readBFData(e),n.round=i+1,this.bfKonckReportList.push(n)}},t.prototype.postBFInfoList=function(e){var t;this.player16List=[];for(var i=e.readByte(),n=0;n<i;n++)(t=new v.PeakPlayerData).readBaseData(e),this.player16List.push(t);this.player8List=[],i=e.readByte();for(n=0;n<i;n++)(t=new v.PeakPlayerData).playerList=[],y.default.pushPlayerList(this.player16List,this.player16List,t.playerList,n),t.readToData(e),this.player8List.push(t);this.player4List=[],i=e.readByte();for(n=0;n<i;n++)(t=new v.PeakPlayerData).playerList=[],y.default.pushPlayerList(this.player8List,this.player16List,t.playerList,n),t.readToData(e),this.player4List.push(t);this.player2Data=new v.PeakPlayerData,this.player2Data.playerList=[],y.default.pushPlayerList(this.player4List,this.player16List,this.player2Data.playerList,0),this.player2Data.readToData(e),this.myBattleReportList=y.default.countMyRecordData()},t.prototype.postTopRank=function(e){var t=e.readShort();this.topRankInfoList=[];for(var i=0;i<t;i++){var n=new v.PeakTopRankData(e);n.rank=i+1,this.topRankInfoList.push(n)}},t.prototype.postBetInfo=function(e){var t=e.readByte();this.betInfo=[];for(var i=0;i<t;i++){var n=new v.PeakBetData(e);this.betInfo.push(n)}ViewManager.ins().isShow(PeakBetWin)&&c.default.ins().showTips("\u606d\u559c\u60a8\uff0c\u4e0b\u6ce8\u6210\u529f"),ViewManager.ins().close(PeakBetWin)},t.prototype.postKFEliminateReportData=function(e){this.kfKonckRound=e.readShort(),this.kfKonckNextTimer=e.readInt(),this.kfKonckSurplusNum=e.readShort(),this.kfKonckReportList=[];for(var t=e.readShort(),i=0;i<t;i++){var n=new v.KonckReportData;n.readKFData(e),n.round=i+1,this.kfKonckReportList.push(n)}},t.prototype.postKFInfoList=function(e){var t;this.kfPlayer64List=[];for(var i=e.readByte(),n=0;n<i;n++)(t=new v.PeakPlayerData).readBaseData(e,!0),this.kfPlayer64List.push(t);this.kfPlayer32List=[],i=e.readByte();for(n=0;n<i;n++)(t=new v.PeakPlayerData).playerList=[],y.default.pushPlayerList(this.kfPlayer64List,this.kfPlayer64List,t.playerList,n),t.readToData(e),this.kfPlayer32List.push(t);this.kfPlayer16List=[],i=e.readByte();for(n=0;n<i;n++)(t=new v.PeakPlayerData).playerList=[],y.default.pushPlayerList(this.kfPlayer32List,this.kfPlayer64List,t.playerList,n),t.readToData(e),this.kfPlayer16List.push(t);this.kfPlayer8List=[],i=e.readByte();for(n=0;n<i;n++)(t=new v.PeakPlayerData).playerList=[],y.default.pushPlayerList(this.kfPlayer16List,this.kfPlayer64List,t.playerList,n),t.readToData(e),this.kfPlayer8List.push(t);this.kfPlayer4List=[],i=e.readByte();for(n=0;n<i;n++)(t=new v.PeakPlayerData).playerList=[],y.default.pushPlayerList(this.kfPlayer8List,this.kfPlayer64List,t.playerList,n),t.readToData(e),this.kfPlayer4List.push(t);this.kfPlayer2Data=new v.PeakPlayerData,this.kfPlayer2Data.playerList=[],y.default.pushPlayerList(this.kfPlayer4List,this.kfPlayer64List,this.kfPlayer2Data.playerList,0),this.kfPlayer2Data.readToData(e),this.myKFBattleReportList=y.default.countKFMyRecordData()},t.prototype.postKFTopRank=function(e){var t=e.readShort();this.kfTopRankInfoList=[];for(var i=0;i<t;i++){var n=new v.PeakTopRankData(e);n.rank=i+1,this.kfTopRankInfoList.push(n)}},t.prototype.postKFBetInfo=function(e){var t=e.readByte();this.kfBetInfo=[];for(var i=0;i<t;i++){var n=new v.PeakBetData(e);this.kfBetInfo.push(n)}ViewManager.ins().isShow(PeakBetWin)&&c.default.ins().showTips("\u606d\u559c\u60a8\uff0c\u4e0b\u6ce8\u6210\u529f"),ViewManager.ins().close(PeakBetWin)},t.prototype.doFbCountDown=function(e){var t=e.readInt(),i=Math.floor((g.default.formatMiniDateTime(t)-s.default.serverTime)/1e3);i>0&&ViewManager.ins().open(FBCountDown,i)},t.prototype.postWorship=function(e){this.worshipNum=e.readByte(),d.default.PeakRaceBase.mobaiChips||(d.default.PeakRaceBase.mobaiChips=1e3),c.default.ins().showCenterTips("\u819c\u62dc\u6210\u529f\uff0c\u7b79\u7801+"+d.default.PeakRaceBase.mobaiChips)},t.prototype.sendSignUp=function(){this.sendBaseProto(1)},t.prototype.sendEliminateReport=function(){this.sendBaseProto(3)},t.prototype.sendBFInfoList=function(){this.sendBaseProto(4)},t.prototype.sendTopRank=function(){this.sendBaseProto(5)},t.prototype.sendToLikes=function(e){var t=this.getBytes(6);t.writeInt(e),this.sendToServer(t)},t.prototype.sendBet=function(e,t){var i=this.getBytes(7);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.sendKFEliminateReport=function(){this.sendBaseProto(8)},t.prototype.sendKFInfoList=function(){this.sendBaseProto(9)},t.prototype.sendKFTopRank=function(){this.sendBaseProto(10)},t.prototype.sendKFToLikes=function(e){var t=this.getBytes(11);t.writeInt(e),this.sendToServer(t)},t.prototype.sendKFBet=function(e,t){var i=this.getBytes(12);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.sendKFBetInfo=function(){this.sendBaseProto(13)},t.prototype.sendWorship=function(){this.sendBaseProto(14)},t.prototype.isOpen=function(){var e=p.default.ins().checkSysOpen(f.SystemType.RING),t=Object.keys(d.default.ActorExRingConfig).length,i=h.default.ins().ringActiNum<t;return!(!(s.default.serverOpenDay>=d.default.PeakRaceBase.openDay&&e)||i)},t.prototype.isKf=function(){return this.bfStatus==v.BF_PeakStatus.Over&&0!=this.bfStatusIsEnd},t.prototype.canSignUp=function(){y.default.bfStatusTimer[v.BF_PeakStatus.Knockout],s.default.serverTime;return!0},t.prototype.isKFSixteen=function(){return this.kfStatus>v.KF_PeakStatus.Prom32||this.kfStatus==v.KF_PeakStatus.Prom32&&0!=this.kfStatusIsEnd},t.prototype.isCrossScene=function(){2==this.crossScene&&ViewManager.ins().open(PeakedMainWin),this.crossScene++},t}(n.default);i.default=m,window.GameSystem.push(m.ins.bind(m)),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../../core/net/PackageID":"PackageID","../../../../core/utils/DateUtils":"DateUtils","../../../base/BaseSystem":"BaseSystem","../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../../manager/TimerManager":"TimerManager","../../gamescene/GameLogic":"GameLogic","../../opensystem/OpenSystem":"OpenSystem","../../server/GameServer":"GameServer","../../specialring/SpecialRing":"SpecialRing","../../tips/UserTips":"UserTips","./data/PeakedData":"PeakedData","./help/PeakedHelp":"PeakedHelp"}],PfActivity:[function(e,t,i){"use strict";cc._RF.push(t,"e2e660dE55MRrSZM3juYOIx","PfActivity"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../setting/SysSetting"),r=e("../../../core/base/MessageCenter"),s=function(e){function t(){var i=e.call(this)||this;return i.wxInviteCount=0,i.focusState=-1,i.shareState=-1,i.isShowGameDesktop=0,i.sysId=a.PackageID.pfActivity,r.default.compile(t),i.regNetMsg(1,i.doWanBaGift),i.regNetMsg(3,i.doZhiShangData),i.regNetMsg(4,i.doWeiXinInviteGift),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initLogin=function(){var e=this;this.sendWanBaGift(),window.isFocus(),window.isShare(),window.isShowGameDesktop(function(t){o.default.ins().getValue("isSaveGameDesktop")&&(t=0),e.postGameDesktop(t)})},t.prototype.postGuanZhu=function(e){this.focusState=e,1==this.focusState&&this.sendGuanZhuGift()},t.prototype.postShare=function(e){this.shareState=e},t.prototype.postGameDesktop=function(e){return this.isShowGameDesktop=e,e},t.prototype.saveGameDesktop=function(){var e=this;window.saveGameDesktop(function(){o.default.ins().setValue("isSaveGameDesktop",1),e.postGameDesktop(0)})},t.prototype.doWanBaGift=function(e){ViewManager.ins().open(WanBaGiftWin,e.readByte(),e.readBoolean())},t.prototype.sendWanBaGift=function(){LocationProperty.gifi&&this.sendBaseProto(1)},t.prototype.sendGuanZhuGift=function(){this.sendBaseProto(2)},t.prototype.doZhiShangData=function(e){LocationProperty.appid==PlatFormID.ZHI_SHANG&&ReportData.getIns().reportUrl(LocationProperty.callUrl)},t.prototype.sendWeiXinInviteGift=function(){this.sendBaseProto(4)},t.prototype.doWeiXinInviteGift=function(e){t.ins().wxInviteCount=e.readInt(),t.ins().inviteTime=e.readInt(),this.postInviteInfoUpdate()},t.prototype.postInviteInfoUpdate=function(){},t.prototype.copyMsgToBoard=function(e){if(document&&document.createElement){var t=document.createElement("input");return t.value=e,document.body.appendChild(t),t.select(),t.setSelectionRange(0,t.value.length),document.execCommand("Copy"),document.body.removeChild(t),!0}return!1},t}(n.default);i.default=s,window.GameSystem.push(s.ins.bind(s)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../setting/SysSetting":"SysSetting"}],PlayFunConfig:[function(e,t,i){"use strict";cc._RF.push(t,"8b9e1ncASJFLJWTob4qXWmt","PlayFunConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.pos=1,this.iconCls="eui.Button",this.iconSkin="MainButtonSkin"}}();i.default=n,cc._RF.pop()},{}],PlayFunView:[function(e,t,i){"use strict";cc._RF.push(t,"2a2bcErBtRJ7YlDHvUZHsxb","PlayFunView"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/view/BaseEuiView"),a=e("../../entity/Actor"),o=e("../../../core/utils/CommonUtils"),r=e("../../../core/base/ViewManager"),s=e("../offlinereward/EffectivenessTip"),u=e("../zs/UserZs"),l=e("../fb/UserFb"),c=e("../../enum/LayerManager"),d=e("../task/UserTask"),f=e("../GameGuider"),p=e("../bag/UserBag"),h=e("../tips/UserTips"),g=e("../hint/hint"),y=e("../../../core/utils/TextFlowMaker"),v=e("../vip/UserVip"),m=e("../gamescene/GameLogic"),b=e("../../map/GameMap"),_=e("../dieGuide/DieGuide"),C=e("./PlayFun"),I=e("./rule/RuleIconBase"),T=e("../../manager/TimerManager"),S=e("../../manager/GlobalConfig"),R=e("../../Utils/EgretUtils"),B=e("./rule/TaskTraceIconRule"),M=e("../recharge/Recharge"),E=e("../shop/Shop"),D=e("../encounter/Encounter"),A=e("../kf/KFServerSys"),P=e("../../../core/utils/DisplayUtils"),w=e("../../../core/utils/StringUtils"),L=e("../boss/UserBoss"),k=e("../warn/view/BagFullTipsWin"),F=cc._decorator,G=F.ccclass,x=F.property,N=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.goldTxt=null,t.ybTxt=null,t.nameTxt=null,t.mapName0=null,t.lvTxt=null,t.expTxt=null,t.powerTxt=null,t.vipNum=null,t.recharge1=null,t.recharge2=null,t.guanqiaBtn=null,t.taskTraceBtn=null,t.taskTraceName=null,t.taskTraceAwards=null,t.ruleCricleRoot=null,t.ruleSquareRoot=null,t.redPointVip0=null,t.parentRoot=c.LayerManager.Main_View,t.ruleList={},t.ruleIdList={},t.ruleParent={},t.lastEnergy=-1,t}return __extends(t,e),t.prototype.initData=function(){o.default.labelIsOverLenght(this.goldTxt,a.default.gold),o.default.labelIsOverLenght(this.ybTxt,a.default.yb),this.nameTxt.string=a.default.myName,this.expChange(),this.powerTxt.string=a.default.power+"",this.vipNum.string="VIP "+v.default.ins().lv},t.prototype.initUI=function(){I.default.update=this.updateRule.bind(this),I.default.updateShow=this.updateRuleAndSort.bind(this),this.initRuleList()},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];C.default.ins().closeAuto(),this.addTouchEvent(this.taskTraceBtn,this.onTaskTrace),this.addTouchEvent(this.guanqiaBtn,this.onTaskTrace),this.addTouchEvent(this.guanqiaBtn,this.guanqiaBtnClick),this.addTouchEvent(this.vipNum,this.onTap),this.addTouchEvent(this.expTxt,this.onTap),this.addTouchEvent(this.mapName0,this.onTap),this.addTouchEvent(this.recharge1,this.onTap),this.addTouchEvent(this.recharge2,this.onTap),this.observe(m.default.ins().postEnterMap,this.upDataGuanqia),this.observe(l.default.ins().postGuanqiaInfo,this.upDataGuanQiaInfo),this.observe(d.default.ins().postUpdteTaskTrace,this.changeTaskTrace),this.observe(d.default.ins().postUpdteTaskTrace,this.updateTaskState),this.observe(l.default.ins().postGuanKaIdChange,this.guanqiaChange),this.observe(m.default.ins().postSubRoleChange,this.initData),this.observe(a.default.ins().postGoldChange,this.initData),this.observe(a.default.ins().postYbChange,this.initData),this.observe(a.default.ins().postNameChange,this.initData),this.observe(a.default.ins().postPowerChange,this.initData),this.observe(v.default.ins().postUpdateVipData,this.initData),this.observe(m.default.ins().postExpMc,this.addExpFlyMc),this.observe(l.default.ins().postAddEnergy,this.upDataGuanqia),this.observe(l.default.ins().postPlayWarm,this.warmWord),this.observe(v.default.ins().postUpdataExp,this.upDataVipBtnRedPoint),this.observe(v.default.ins().postUpdateVipAwards,this.upDataVipBtnRedPoint),this.observe(v.default.ins().postUpdateWeekAwards,this.upDataVipBtnRedPoint),this.observe(a.default.ins().postLevelChange,this.updateHeadRedPoint),this.observe(m.default.ins().postLevelBarChange,this.updateLevelBar),this.observe(a.default.ins().postExp,this.checkGuide),this.observe(l.default.ins().postTeamFbFlowarRecords,this.updateFlower),this.observe(l.default.ins().postAutoPk,this.GuanQiaEffLogic),this.observe(l.default.ins().postAutoPk2,this.GuanQiaEffLogic),this.initData(),this.upDataGuanQiaInfo(),this.changeTaskTrace(),this.addRuleEvent(),this.updateRules(),this.upDataWillBoss(D.default.ins().willBossID)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.updateRules=function(){T.default.ins().isExists(this.startUpdateRule,this)||T.default.ins().doTimer(60,1,this.startUpdateRule,this)},t.prototype.startUpdateRule=function(){var e=!1;for(var t in this.ruleList){var i=this.ruleList[t],n=this.updateShow(i);n&&(e=!0),!n&&i.isShow&&this.updateRule(i)}e&&this.sortBtnList(),this.checkGuide()},t.prototype.sortBtnList=function(e){void 0===e&&(e=null),console.log("\u6309\u94ae\u6392\u5e8f")},t.prototype.addRuleEvent=function(){for(var e in this.ruleList){var t=this.ruleList[e];t.addShowEvents(),t.isShow&&t.addRedEvents()}},t.prototype.upDataWillBoss=function(e){e&&console.log("\u91ce\u5916boss\u63d0\u793a")},t.prototype.onTap=function(e){switch(e){case this.recharge1:var t=M.default.ins().getRechargeData(0);t&&2==t.num?r.default.ins().open(ChargeFirstWin):r.default.ins().open(Recharge1Win);break;case this.recharge2:E.default.openBuyGoldWin();break;case this.vipNum:r.default.ins().open(VipWin);break;case this.expTxt:case this.mapName0:r.default.ins().open(s.default,1)}},t.prototype.initRuleList=function(){var e=S.default.PlayFunConfig;for(var t in e){var i=e[t],n=R.default.getDefinitionByName(i.cls);n?this.addRuleList(new n(i.id)):console.error("\u529f\u80fd\u5165\u53e3\u914d\u7f6e\u9519\u8bef\uff0cid:"+t+" cls:"+i.cls)}this.addRuleList(new B.default(0,this.taskTraceBtn))},t.prototype.addRuleList=function(e){this.ruleList[e.hashCode]=e,e.id&&(this.ruleIdList[e.id]=e),e.tar&&e.tar.parent&&(this.ruleParent[e.hashCode]=e.tar.parent,e.tar.parent.removeChild(e.tar))},t.prototype.guanqiaBtnClick=function(){l.default.ins().guanqiaID>=S.default.InstanceBaseConfig.maxCheckPoint?h.default.ins().showCenterTips("\u5f53\u524d\u5df2\u8fbe\u6700\u5927\u5173\u5361"):p.default.ins().getSurplusCount()<p.default.BAG_ENOUGH?r.default.ins().open(k.default):l.default.ins().currentEnergy>=l.default.ins().energy&&(this.GuanQiacleanEff(),l.default.ins().autoPk(),l.default.ins().firstAutoGuilder=l.default.ins().guanqiaID==l.default.AUTO_GUANQIA-1)},t.prototype.updateTaskState=function(){d.default.ins().taskTrace;console.log("\u66f4\u65b0\u4efb\u52a1\u72b6\u6001")},t.prototype.guanqiaChange=function(){console.log("\u5173\u5361\u6539\u53d8")},t.prototype.updateHeadRedPoint=function(){console.log("\u89d2\u8272\u7b49\u7ea7\u6539\u53d8")},t.prototype.upDataVipBtnRedPoint=function(){console.log("VIP\u7ea2\u70b9\u72b6\u6001"),this.redPointVip0.active=v.default.ins().getVipState()},t.prototype.updateFlower=function(){},t.prototype.removeFlowerItem=function(){},t.prototype.GuanQiacleanEff=function(){l.default.ins().showAutoPk=-1,l.default.ins().showAutoPk2=-1},t.prototype.GuanQiaEffLogic=function(){this.guanqiaBtn&&0==l.default.ins().showAutoPk?l.default.ins().showAutoPk=-1:0==l.default.ins().showAutoPk2&&(l.default.ins().showAutoPk2=-1)},t.prototype.addExpFlyMc=function(e){b.default.fbType!=l.default.FB_TYPE_EXP&&(l.default.ins().checkGuanqiaIconShow(),l.default.ins().postAddEnergy())},t.prototype.updateRuleAndSort=function(e){var t=this;T.default.ins().doTimer(100,1,function(){t.updateShow(e)&&t.sortBtnList(e)},this)},t.prototype.setGuanQiaBar=function(e,t){var i=e,n=t;i>=n&&(i=n),console.log("\u5173\u5361\u8fdb\u5ea6\u6761",i,n)},t.prototype.setDieGuide=function(e){switch(e){case _.default.RECHARGE:case _.default.VIP:}},t.prototype.updateRule=function(e){var t=e.getTar().getChildByName("pic_pot");if(t){var i=!1;e.checkShowRedPoint()&&(i=!0),t.active=i}},t.prototype.updateShow=function(e){var t,i=e.checkShowIcon();if(A.default.ins().isLinkingKF&&(i=!1),e.isShow==i)return!1;if(e.isShow=i,i){e.addRedEvents(),(t=e.getTar()).on("touchend",e.tapExecute,e),"ruleCircle"==e.tar.ruleType?this.ruleParent[e.hashCode]=this.ruleCricleRoot:"ruleSquare"==e.tar.ruleType&&(this.ruleParent[e.hashCode]=this.ruleSquareRoot);var n=this.ruleParent[e.hashCode];t.zIndex=e.id,n.addChild(t),this.updateRule(e)}else e.removeRedEvents(),(t=e.tar)&&(t.off("touchend",e.tapExecute,e),P.default.removeFromParent(t));return!0},t.prototype.expChange=function(e){var t=e||a.default.level,i=u.default.ins()?u.default.ins().lv:0,n="|C:0xF1D715&T:"+(i?i+"\u8f6c":"")+"|";n=n+t+"\u7ea7",this.lvTxt.string=i+"\u8f6c"+t+"\u7ea7"},t.prototype.updateLevelBar=function(e){this.expChange(e)},t.prototype.checkGuide=function(){_.default.ins().checkFirstChargeOrVIPWin()},t.prototype.warmWord=function(e){e&&b.default.sceneInMain()&&this.removeGuanQiaEnergy()},t.prototype.removeGuanQiaEnergy=function(){l.default.ins().currentEnergy=0},t.prototype.upDataGuanQiaInfo=function(){this.expTxt.string="EXP:"+l.default.ins().expEff+"/\u5c0f\u65f6",this.mapName0.string="\u7b2c"+l.default.ins().guanqiaID+"\u5173",this.upDataGuanqia()},t.prototype.upDataGuanqia=function(){l.default.ins().guanqiaID>=0&&b.default.sceneInMain()?(this.upDataExpMcBall(l.default.ins().currentEnergy,l.default.ins().energy),l.default.ins().energy&&(l.default.ins().currentEnergy,l.default.ins().energy),this.lastEnergy=l.default.ins().currentEnergy):this.lastEnergy=-1},t.prototype.upDataExpMcBall=function(e,t){this.setGuanQiaBar(e,t)},t.prototype.onTaskTrace=function(){var e=d.default.ins().taskTrace;if(e&&0==e.state){var t=d.default.ins().getAchieveConfById(e.id);switch(t.control){case f.GuideType.ChallengeBoss:case f.GuideType.AutoPk:if(p.default.ins().getSurplusCount()<p.default.BAG_ENOUGH)return;l.default.ins().currentEnergy<l.default.ins().energy&&h.default.ins().showTaskTips("\u80fd\u91cf\u672a\u6ee1\u65e0\u6cd5\u6311\u6218\uff0c\u8bf7\u7ee7\u7eed\u6e05\u602a\u3002"),t.control==f.GuideType.AutoPk&&g.default.ins().postKillBoss(t);break;case f.GuideType.KillDeer:var i="\u6b63\u5728\u5b8c\u6210\u6e05\u602a\u4efb\u52a1\uff0c\u8fd8\u5dee|C:0xf8b141&T:"+(t.target-e.value)+"|\u4e2a\u3002";h.default.ins().showTaskTips(i)}}},t.prototype.publicBossRelive=function(e,t){if(void 0===t&&(t=""),e||!t){var i=L.default.ins().checkBossIconShow(),n=e&&i&&b.default.sceneInMain();C.default.ins().newBossRelive=n,h.default.ins().showTips(w.default.addColor(""+t,"#35e62d")+"\u5237\u65b0\u4e86\uff01")}},t.prototype.showTaskTips=function(e){h.default.ins().showTaskTips(e)},t.prototype.changeTaskTrace=function(){var e=d.default.ins().taskTrace;if(e){var t=d.default.ins().getAchieveConfById(e.id);if(!t)return void console.log("\u4efb\u52a1\u914d\u7f6e"+e.id+"\u4e0d\u5b58\u5728\uff01");switch(79==t.type?this.taskTraceAwards.string=y.default.generateTextFlow("|C:0x40df38&T:"+t.desc+"|"):this.taskTraceAwards.string=""+t.desc,e.state){case 0:var i=t.target,n=e.value;79==t.type&&(n=0,i=1),36==t.type&&(n-=1,i-=1),this.taskTraceName.string=y.default.generateTextFlow(t.name+"|C:0xf3311e&T: ("+n+"/"+i+")|"),0==e.value&&f.default.stopTaskEffect(),f.default.startTaskEffect();break;case 1:this.taskTraceName.string=y.default.generateTextFlow(t.name+"|C:0x35e62d&T: (\u5df2\u5b8c\u6210)|"),f.default.stopTaskEffect(),f.default.startTaskEffect()}}else f.default.stopTaskEffect()},__decorate([x({type:cc.Label,displayName:"\u91d1\u94b1"})],t.prototype,"goldTxt",void 0),__decorate([x({type:cc.Label,displayName:"\u5143\u5b9d"})],t.prototype,"ybTxt",void 0),__decorate([x({type:cc.Label,displayName:"\u540d\u5b57"})],t.prototype,"nameTxt",void 0),__decorate([x({type:cc.RichText,displayName:"\u5173\u5361\u6570"})],t.prototype,"mapName0",void 0),__decorate([x({type:cc.RichText,displayName:"\u7b49\u7ea7"})],t.prototype,"lvTxt",void 0),__decorate([x({type:cc.RichText,displayName:"\u7ecf\u9a8c"})],t.prototype,"expTxt",void 0),__decorate([x({type:cc.RichText,displayName:"\u6218\u6597\u529b"})],t.prototype,"powerTxt",void 0),__decorate([x({type:cc.Label,displayName:"VIP\u7b49\u7ea7"})],t.prototype,"vipNum",void 0),__decorate([x({type:cc.Node,displayName:"\u5143\u5b9d\u56fe\u6807"})],t.prototype,"recharge1",void 0),__decorate([x({type:cc.Node,displayName:"\u91d1\u94b1\u56fe\u6807"})],t.prototype,"recharge2",void 0),__decorate([x({type:cc.Node,displayName:"\u6311\u6218\u6309\u94ae"})],t.prototype,"guanqiaBtn",void 0),__decorate([x({type:cc.Node,displayName:"\u4efb\u52a1\u6309\u94ae"})],t.prototype,"taskTraceBtn",void 0),__decorate([x({type:cc.RichText,displayName:"\u4efb\u52a1\u540d"})],t.prototype,"taskTraceName",void 0),__decorate([x({type:cc.RichText,displayName:"\u4efb\u52a1\u5956\u52b1"})],t.prototype,"taskTraceAwards",void 0),__decorate([x({type:cc.Node,displayName:"\u5706\u5f62\u7236\u8282\u70b9"})],t.prototype,"ruleCricleRoot",void 0),__decorate([x({type:cc.Node,displayName:"\u65b9\u5f62\u7236\u8282\u70b9"})],t.prototype,"ruleSquareRoot",void 0),__decorate([x({type:cc.Node,displayName:"VIP\u7ea2\u70b9"})],t.prototype,"redPointVip0",void 0),t=__decorate([G],t)}(n.default);i.default=N,cc._RF.pop()},{"../../../core/base/ViewManager":"ViewManager","../../../core/utils/CommonUtils":"CommonUtils","../../../core/utils/DisplayUtils":"DisplayUtils","../../../core/utils/StringUtils":"StringUtils","../../../core/utils/TextFlowMaker":"TextFlowMaker","../../../core/view/BaseEuiView":"BaseEuiView","../../Utils/EgretUtils":"EgretUtils","../../entity/Actor":"Actor","../../enum/LayerManager":"LayerManager","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../../map/GameMap":"GameMap","../GameGuider":"GameGuider","../bag/UserBag":"UserBag","../boss/UserBoss":"UserBoss","../dieGuide/DieGuide":"DieGuide","../encounter/Encounter":"Encounter","../fb/UserFb":"UserFb","../gamescene/GameLogic":"GameLogic","../hint/hint":"hint","../kf/KFServerSys":"KFServerSys","../offlinereward/EffectivenessTip":"EffectivenessTip","../recharge/Recharge":"Recharge","../shop/Shop":"Shop","../task/UserTask":"UserTask","../tips/UserTips":"UserTips","../vip/UserVip":"UserVip","../warn/view/BagFullTipsWin":"BagFullTipsWin","../zs/UserZs":"UserZs","./PlayFun":"PlayFun","./rule/RuleIconBase":"RuleIconBase","./rule/TaskTraceIconRule":"TaskTraceIconRule"}],PlayFun:[function(e,t,i){"use strict";cc._RF.push(t,"3fb0aE0WC9P0adQTK82ci1N","PlayFun"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../gamescene/GameLogic"),o=e("../../../core/base/ViewManager"),r=e("./PlayFunView"),s=e("../boss/UserBoss"),u=e("../fb/UserFb"),l=e("../bag/UserBag"),c=e("../tips/UserTips"),d=e("../../manager/GlobalConfig"),f=e("../../../core/base/MessageCenter"),p=function(e){function t(){var i=e.call(this)||this;return f.default.compile(t),i.observe(s.default.ins().postBossData,i.publicBossRelive),i.observe(u.default.ins().postAddEnergy,i.updateAutoPk),i.observe(a.default.ins().postEnterMap,i.openPalyFunView),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.openPalyFunView=function(){o.default.ins().isShow(r.default)||o.default.ins().open(r.default)},t.prototype.closeAuto=function(){this.updateAutoPk()},t.prototype.openAuto=function(){this.updateAutoPk()},t.prototype.publicBossRelive=function(e){var t=e[0],i=e[1],n=o.default.ins().getView(r.default);n&&n.publicBossRelive(t,i)},t.prototype.upDataWillBoss=function(e){var t=o.default.ins().getView(r.default);t&&t.upDataWillBoss(e)},t.prototype.updateAutoPk=function(){if(!u.default.ins().bossIsChallenged){var e=u.default.ins().energy,t=u.default.ins().currentEnergy;o.default.ins().getView(r.default)&&t>=e?l.default.ins().getSurplusCount()<l.default.BAG_ENOUGH?(c.default.ins().showTips("\u80cc\u5305\u5269\u4f59\u7a7a\u4f4d\u4e0d\u8db3\uff0c\u8bf7\u5148\u6e05\u7406"),this.removePkArrowTips()):u.default.ins().guanqiaID<d.default.InstanceBaseConfig.maxCheckPoint?this.addPkArrowTips():(c.default.ins().showCenterTips("\u5f53\u524d\u5df2\u8fbe\u6700\u5927\u5173\u5361"),this.removePkArrowTips()):this.removePkArrowTips()}},t.prototype.postShowViews=function(e,t){return void 0===t&&(t=!1),[e,t]},t.prototype.addPkArrowTips=function(){var e=o.default.ins().getView(r.default);e&&e.showTaskTips("\u80fd\u91cf\u5df2\u6ee1\uff0c\u5373\u5c06\u81ea\u52a8\u6311\u6218\u5173\u5361BOSS")},t.prototype.removePkArrowTips=function(){},t}(n.default);i.default=p,window.GameSystem.push(p.ins.bind(p)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/base/ViewManager":"ViewManager","../../base/BaseSystem":"BaseSystem","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../boss/UserBoss":"UserBoss","../fb/UserFb":"UserFb","../gamescene/GameLogic":"GameLogic","../tips/UserTips":"UserTips","./PlayFunView":"PlayFunView"}],PowerPanel:[function(e,t,i){"use strict";cc._RF.push(t,"616bfS2D8FE4rbJeRn+O6iO","PowerPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.init()},t.prototype.init=function(){},t.prototype.setPower=function(e){},t.prototype.initPos=function(){},t.prototype.setBgVis=function(e){},t.prototype.setMcVisible=function(e){},t.prototype.playFlameMC=function(){},t.prototype.destructor=function(){},t}(e("../../core/view/BaseView").default);i.default=n,cc._RF.pop()},{"../../core/view/BaseView":"BaseView"}],PraiseData:[function(e,t,i){"use strict";cc._RF.push(t,"ef54bemSmxOebK7xfwVpRof","PraiseData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.pos1=0,this.pos2=0,this.pos3=0}return e.prototype.parser=function(e){this.job=e.readByte(),this.sex=e.readByte(),this.clothID=e.readInt(),this.swordID=e.readInt(),this.wingLevel=e.readInt(),0==e.readInt()&&(this.wingLevel=-1),this.pos1=e.readInt(),this.pos2=e.readInt(),this.pos3=e.readInt()},e}();(function(){function e(){this.subRole=[]}e.prototype.getLastMobaiNum=function(){var e=UserZs.ins().lv>0?1e3*UserZs.ins().lv:Actor.level;return GlobalConfig.MorshipConfig[e].count-this.praiseTime},e.prototype.parser=function(e){if(this.id=e.readInt(),this.id>0){this.name=e.readString(),this.ce=e.readDouble(),this.level=e.readShort(),this.zhuan=e.readShort(),this.vipLevel=e.readShort();for(var t=e.readShort(),i=0;i<t;i++)this.subRole[i]=new n,this.subRole[i].parser(e)}},e.prototype.getRoleByJob=function(e){if(e>0)for(var t in this.subRole)if(this.subRole[t].job==e)return this.subRole[t];return this.subRole[0]}})();cc._RF.pop()},{}],PrestigeBase:[function(e,t,i){"use strict";cc._RF.push(t,"66276p2vEpFrbn1gbqcThu7","PrestigeBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],PrestigeLevel:[function(e,t,i){"use strict";cc._RF.push(t,"46e1fLafYNBKrV4EqCRy/Xy","PrestigeLevel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],PrivilegeData:[function(e,t,i){"use strict";cc._RF.push(t,"9e95eeY/yxCNYbSldZq88av","PrivilegeData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.priviMoney=0,this.priviCardDays=0}}();i.default=n,cc._RF.pop()},{}],PublicBossBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6825bxE561FgoJ1iZgX1HgH","PublicBossBaseConfig");cc._RF.pop()},{}],PublicBossConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b5f62rCC5lCUYgKUBmoiHeN","PublicBossConfig");cc._RF.pop()},{}],PublicBossInfo:[function(e,t,i){"use strict";cc._RF.push(t,"0dd46snF/RFuq/w6h4W0TiZ","PublicBossInfo");(function(){function e(){}e.prototype.parser=function(e){this.id=e.readInt(),this.hp=e.readShort(),this.people=e.readShort(),this.reliveTime=1e3*e.readInt()+egret.getTimer(),this.challengeing=e.readBoolean()},Object.defineProperty(e.prototype,"isDie",{get:function(){return(this.reliveTime-egret.getTimer())/1e3>0},enumerable:!0,configurable:!0})})();cc._RF.pop()},{}],PunchEquipAttrWin:[function(e,t,i){"use strict";cc._RF.push(t,"f9309DXXphDrq1uZJvlV3cM","PunchEquipAttrWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../../core/base/ViewManager"),o=e("../../../enum/LayerManager"),r=e("../../rolewin/UserSkill"),s=e("../../../manager/GlobalConfig"),u=e("../../../../core/base/AttributeData"),l=e("../../../entity/Role"),c=e("../../../../core/base/AttributeType"),d=cc._decorator,f=d.ccclass,p=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=o.LayerManager.UI_Popup,t.baseAttr=null,t.extAttr=null,t.bgClose=null,t}return __extends(t,e),t.prototype.initData=function(){},t.prototype.initUI=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.bgClose,this.onTap),this.setView()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.setView=function(){for(var e=[],t=[],i=0;i<8;i++){var n=r.default.ins().equipListData[i];for(var a in n.att)if(0!=n.att[a].type&&0!=n.att[a].value){var o=n.att[a];e[o.type]?e[o.type]+=o.value:e[o.type]=o.value}if(n.configID){var d=s.default.EquipConfig[n.configID];for(var f in u.default.translate)if(d[f]&&!(d[f]<=0)){var p=l.default.getAttrTypeByName(f);e[p]?e[p]+=d[f]:e[p]=d[f]}d.baseAttr1&&(e[d.baseAttr1.type]?e[d.baseAttr1.type]+=d.baseAttr1.value:e[d.baseAttr1.type]=d.baseAttr1.value),d.baseAttr2&&(e[d.baseAttr2.type]?e[d.baseAttr2.type]+=d.baseAttr2.value:e[d.baseAttr2.type]=d.baseAttr2.value),d.exAttr1&&(t[d.exAttr1.type]?t[d.exAttr1.type]+=d.exAttr1.value:t[d.exAttr1.type]=d.exAttr1.value),d.exAttr2&&(t[d.exAttr2.type]?t[d.exAttr2.type]+=d.exAttr2.value:t[d.exAttr2.type]=d.exAttr2.value)}}var h="",g="",y=0,v=0;for(var m in e){if(v=Number(m),y=e[m],(g=u.default.getAttrStrByType(v)).length<3&&(g=u.default.inserteBlank(g,4)),v>1&&v<9)h+=7==v||8==v?g+"\uff1a"+y/100+"%":g+"\uff1a"+y;else{if(!(v>12&&v<15||v>15))continue;v==c.AttributeType.atCritEnhance?h+=g+"\uff1a"+(y/100+150)+"%":h+=g+"\uff1a"+y/100+"%"}h+="\n"}for(var m in t)v=Number(m),y=t[m],h+=(g=u.default.getExtAttrStrByType(v))+"\uff1a"+y/100+"%",h+="\n";""==h&&(h="\u65e0"),this.baseAttr.string=h},t.prototype.onTap=function(e){switch(e){case this.bgClose:a.default.ins().close(this)}},__decorate([p({type:cc.Label,displayName:"baseAttr"})],t.prototype,"baseAttr",void 0),__decorate([p({type:cc.Label,displayName:"baseAttr"})],t.prototype,"extAttr",void 0),__decorate([p({type:cc.Node,displayName:"bgClose"})],t.prototype,"bgClose",void 0),t=__decorate([f],t)}(n.default);i.default=h,cc._RF.pop()},{"../../../../core/base/AttributeData":"AttributeData","../../../../core/base/AttributeType":"AttributeType","../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../entity/Role":"Role","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../rolewin/UserSkill":"UserSkill"}],PunchEquipConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3e71aqCY/tBw6LXpxfJpsg2","PunchEquipConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],PunchEquipForgeData:[function(e,t,i){"use strict";cc._RF.push(t,"c455dF39khL8LTbS9ha4mEB","PunchEquipForgeData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../manager/GlobalConfig"),a=e("../UserSkill"),o=e("../../../consts/MoneyConst"),r=e("../../../entity/Actor"),s=e("../../../../core/base/AttributeData"),u=function(){function e(){this.data=[]}return e.prototype.parser=function(e){for(var t=e.readShort(),i=0;i<t;i++){var n=e.readShort(),a=e.readInt();if(this.data[n])this.data[n].id=n,this.data[n].level=a;else{var o=new l;o.id=n,o.level=a,this.data[n]=o}}},Object.defineProperty(e.prototype,"level",{get:function(){for(var e=0,t=0;t<this.data.length;t++){e+=this.data[t].level}return e},enumerable:!0,configurable:!0}),e.prototype.getSuitlevel=function(){var e=0;for(var t in n.default.PunchEquipMasterConfig){var i=n.default.PunchEquipMasterConfig[t];Math.floor(this.level/8)>=i.level&&(e=i.level)}return e},e.prototype.getNextSuitlevel=function(){var e=0;for(var t in n.default.PunchEquipMasterConfig){var i=n.default.PunchEquipMasterConfig[t];if(i.level>Math.floor(this.level/8)){e=i.level;break}}return e},e.prototype.getPunchLevel=function(e){return this.data[e].level},e.prototype.getCurCost=function(){for(var e,t,i=!0,a=0;a<8;a++){var o=this.data[a];a?t<o.level&&(i=!1,e=a,t=o.level):(e=a,t=o.level)}return i&&(e=0,t++),n.default.PunchEquipConfig[e][t]},e.prototype.getNextConfig=function(e){var t=e+1,i=this.getPunchLevel(e);return t>7&&(t=0,i=this.getPunchLevel(t)+1),n.default.PunchEquipConfig[t][i]},e.prototype.getPosNextLevelConfig=function(e){var t=this.getPunchLevel(e);return t++,n.default.PunchEquipConfig[e][t]},e.prototype.isShowPunchEquipForge=function(){for(var e=a.default.ins().equipListData,t=0;t<e.length;t++){var i=e[t];if(!i.itemConfig||!i.itemConfig.zsLevel||i.itemConfig.zsLevel<4)return!1}return!0},e.prototype.isUpgradePunchForge=function(t){var i=1;if(this.data[t]&&(i=this.data[t].level),!n.default.PunchEquipConfig[t][i+1])return e.TYPE_MAX;i||(i=1);var a=n.default.PunchEquipConfig[t][i+1],s=0;return a.cost.id==o.MoneyConst.punch1?s=r.default.togeatter1:a.cost.id==o.MoneyConst.punch2&&(s=r.default.togeatter2),s>=a.cost.count?e.TYPE_OK:e.TYPE_NO},e.prototype.calcSelectPos=function(){for(var e,t,i=!0,n=0;n<8;n++)if(this.data[n]){var a=this.data[n];n?t>a.level&&(i=!1,e=n,t=a.level):(e=n,t=a.level)}return i&&(e=0,t++),e},e.prototype.getRedPoint=function(){if(!this.isShowPunchEquipForge())return!1;for(var t=0,i=0;i<8;i++){var n=this.isUpgradePunchForge(i);if(n==e.TYPE_NO)return!1;n==e.TYPE_MAX&&t++}return 8!=t},e.prototype.getAttributeData=function(){for(var e=[],t=0;t<this.data.length;t++){var i=this.data[t].id,a=this.data[t].level,o=n.default.PunchEquipConfig[i][a];if(o)for(var r=0;r<o.attr.length;r++)if(e.length){for(var u=!1,l=0;l<e.length;l++)e[l].type==o.attr[r].type&&(u=!0,e[l].value+=o.attr[r].value);if(!u)(c=new s.default).type=o.attr[r].type,c.value=o.attr[r].value,e.push(c)}else{var c;(c=new s.default).type=o.attr[r].type,c.value=o.attr[r].value,e.push(c)}}return e},e.TYPE_NO=0,e.TYPE_OK=1,e.TYPE_MAX=2,e}();i.default=u;var l=function(){return function(){}}();cc._RF.pop()},{"../../../../core/base/AttributeData":"AttributeData","../../../consts/MoneyConst":"MoneyConst","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../UserSkill":"UserSkill"}],PunchEquipForge:[function(e,t,i){"use strict";cc._RF.push(t,"b043bOlTi1JH6VgGg5tSuox","PunchEquipForge"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../rolewin/UserSkill"),r=e("../../rolewin/UserEquip"),s=e("../../rolewin/model/PunchEquipForgeData"),u=e("../../tips/UserTips"),l=e("../../../manager/GlobalConfig"),c=e("../../../../core/base/AttributeData"),d=e("../../../../core/utils/ColorUtil"),f=e("../../../consts/MoneyConst"),p=e("../../../entity/Actor"),h=e("../../bag/UserBag"),g=e("../../../entity/SubRoles"),y=e("../../../../core/base/ViewManager"),v=e("../../activity/model/RewardData"),m=cc._decorator,b=m.ccclass,_=m.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.forgeItems=[],t.attr=[],t.arrow=[],t.addAttr=[],t.exattr0=null,t.arrow4=null,t.exattr1=null,t.exattr2=null,t.costGroup=null,t.costName=null,t.costhas=null,t.costneed=null,t.btn=null,t.getItemTxt=null,t.powerLabel=null,t.redPoint=null,t.currPos=0,t.currentState="",t}return __extends(t,e),t.prototype.initUI=function(){},t.prototype.initData=function(){this.maxPos=8,this.currPos=0},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.getItemTxt,this.onClick),this.addTouchEvent(this.btn,this.onClick),this.observe(o.default.ins().postUpgradeForge,this.UpgradeForgeCallback),this.observe(r.default.ins().postSmeltEquipComplete,this.callback),this.updateDate()},t.prototype.callback=function(){this.updateDate()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this.getItemTxt,this.onClick),this.removeTouchEvent(this.btn,this.onClick)},t.prototype.onClick=function(e){switch(e){case this.getItemTxt:break;case this.btn:var t=o.default.ins().getPunchForge().calcSelectPos(),i=o.default.ins().getPunchForge().isUpgradePunchForge(t);if(i==s.default.TYPE_NO)return void u.default.ins().showTips("|C:0xff0000&T:\u788e\u7247\u4e0d\u8db3");if(i==s.default.TYPE_MAX)return void u.default.ins().showTips("|C:0x00ff00&T:\u5df2\u6ee1\u7ea7");o.default.ins().sendUpgradeForge(t)}},t.prototype.UpgradeForgeCallback=function(){this.updateDate(!0)},t.prototype.updateDate=function(e){for(var t=o.default.ins().getPunchForge().calcSelectPos(),i=0,n=s.default.TYPE_MAX,a=0;a<this.maxPos;a++){if(o.default.ins().getPunchForge().isUpgradePunchForge(t)!=s.default.TYPE_MAX){n=0;break}}n==s.default.TYPE_MAX?this.currentState="full":(this.currentState="normal",i=o.default.ins().getPunchForge().getPunchLevel(t)),this.setSelect(t),this.updateAttrDesc(t,i),this.updateCost(t,i),this.setPower()},t.prototype.setSelect=function(e){for(var t=0;t<this.maxPos;t++)this.forgeItems[t].getChildByName("select").active=t==this.currPos,this.forgeItems[t].getChildByName("zhulinLabel").getComponent(cc.Label).string="+"+o.default.ins().getPunchForge().getPunchLevel(t)},t.prototype.updateAttrDesc=function(e,t){if("full"==this.currentState){for(var i=o.default.ins().getPunchForge().getSuitlevel(),n=l.default.PunchEquipMasterConfig[i],a=o.default.ins().getPunchForge().getAttributeData(),r=0;r<a.length;r++)if(this.attr[r]){for(var s="",u=0,d=0;d<a.length;d++)if(a[d].type==a[r].type){u=a[d].value;break}u+=n.attr&&n.attr[r]?n.attr[r].value:0,s=c.default.getAttrStrByType(a[r].type),s+="+",s+=u,this.attr[r].string=s}var f="";return f="\u5408\u51fb\u4f24\u5bb3\u51cf\u514d",f+=n.exattr[0].value/100,void(this.exattr0.string=f+"%")}var p=l.default.PunchEquipConfig[e][t];if(p){i=o.default.ins().getPunchForge().getSuitlevel();var h=!0;if(!(n=l.default.PunchEquipMasterConfig[i]))for(var g in h=!1,l.default.PunchEquipMasterConfig){n=l.default.PunchEquipMasterConfig[g];break}var y=o.default.ins().getPunchForge().getPosNextLevelConfig(e);for(a=o.default.ins().getPunchForge().getAttributeData(),r=0;r<p.attr.length;r++)if(this.attr[r]){for(s="",u=0,d=0;d<a.length;d++)if(a[d].type==p.attr[r].type){u=a[d].value;break}if(u+=n.attr&&n.attr[r]?n.attr[r].value:0,s=c.default.getAttrStrByType(p.attr[r].type),s+="+",s+=u,this.attr[r].string=s,y&&this.arrow[r]&&this.addAttr[r]&&y.attr[r].value){this.addAttr[r].node.active=this.arrow[r].active=!0;var v="";v+=u+(y.attr[r].value-p.attr[r].value),this.addAttr[r].string=v}else this.addAttr[r].node.active=this.arrow[r].active=!1}var m=void 0,b=void 0;f="";if(f="\u5408\u51fb\u4f24\u5bb3\u51cf\u514d",h?(f+=n.exattr[0].value/100,m=o.default.ins().getPunchForge().getNextSuitlevel(),b=l.default.PunchEquipMasterConfig[m]):(f+=0,b=n,m=i),this.exattr0.string=f+"%",b){this.exattr1.string=b.exattr[0].value/100+"%";var _=Math.floor(o.default.ins().getPunchForge().level/this.maxPos);this.exattr2.string="(\u6ce8\u7075\u7b49\u7ea7\u8fbe\u5230 "+_+"/"+m+")"}}else{a=o.default.ins().getPunchForge().getAttributeData();p=l.default.PunchEquipConfig[e][1];for(r=0;r<p.attr.length;r++)if(this.attr[r]){for(s="",u=0,d=0;d<a.length;d++)if(a[d].type==p.attr[r].type){u=a[d].value;break}if(s=c.default.getAttrStrByType(p.attr[r].type),s+="+",s+=u,this.attr[r].string=s,this.arrow[r]&&this.addAttr[r]&&p.attr[r].value){this.addAttr[r].node.active=this.arrow[r].active=!0;v="";v+=p.attr[r].value,this.addAttr[r].string=v}else this.addAttr[r].node.active=this.arrow[r].active=!1}n=void 0;for(var g in l.default.PunchEquipMasterConfig){n=l.default.PunchEquipMasterConfig[g];break}f="";f="\u5408\u51fb\u4f24\u5bb3\u51cf\u514d",f+=0,this.exattr0.string=f+"%",n&&(this.exattr1.string=n.exattr[0].value/100+"%",this.exattr2.string="(\u6ce8\u7075\u7b49\u7ea7\u8fbe\u5230 0/"+n.level+")")}},t.prototype.updateCost=function(e,t){var i;(i=e||t?o.default.ins().getPunchForge().getPosNextLevelConfig(e):l.default.PunchEquipConfig[0][1])||(i=l.default.PunchEquipConfig[e][1]);o.default.ins().getPunchForge().isUpgradePunchForge(e)==s.default.TYPE_OK?(d.default.GREEN_COLOR,this.redPoint.active=!0):(this.redPoint.active=!1,d.default.RED_COLOR);var n=0;i.cost.id==f.MoneyConst.punch1?n=p.default.togeatter1:i.cost.id==f.MoneyConst.punch2&&(n=p.default.togeatter2),this.costName.string=v.default.getCurrencyName(i.cost.id)+": ",this.costhas.string=n.toString(),this.costneed.string="/"+i.cost.count},t.prototype.setPower=function(){var e=o.default.ins().getPunchForge().getAttributeData(),t=h.default.getAttrPower(e),i=o.default.ins().getPunchForge().getSuitlevel(),n=l.default.PunchEquipMasterConfig[i];n&&n.attr&&(t+=h.default.getAttrPower(n.attr),t+=n.exPower),t*=g.default.ins().subRolesLen,this.powerLabel.string=t.toString()},t.prototype.onClickCloseBtn=function(){y.default.ins().close(this)},__decorate([_({type:cc.Node,displayName:"forgeItems"})],t.prototype,"forgeItems",void 0),__decorate([_({type:cc.Label,displayName:"attr"})],t.prototype,"attr",void 0),__decorate([_({type:cc.Node,displayName:"arrow"})],t.prototype,"arrow",void 0),__decorate([_({type:cc.Label,displayName:"addAttr"})],t.prototype,"addAttr",void 0),__decorate([_({type:cc.Label,displayName:"exattr0"})],t.prototype,"exattr0",void 0),__decorate([_({type:cc.Label,displayName:"arrow4"})],t.prototype,"arrow4",void 0),__decorate([_({type:cc.Label,displayName:"exattr1"})],t.prototype,"exattr1",void 0),__decorate([_({type:cc.Label,displayName:"exattr2"})],t.prototype,"exattr2",void 0),__decorate([_({type:cc.Node,displayName:"costGroup"})],t.prototype,"costGroup",void 0),__decorate([_({type:cc.Node,displayName:"costName"})],t.prototype,"costName",void 0),__decorate([_({type:cc.Label,displayName:"costhas"})],t.prototype,"costhas",void 0),__decorate([_({type:cc.Label,displayName:"costneed"})],t.prototype,"costneed",void 0),__decorate([_({type:cc.Button,displayName:"btn"})],t.prototype,"btn",void 0),__decorate([_({type:cc.RichText,displayName:"getItemTxt"})],t.prototype,"getItemTxt",void 0),__decorate([_({type:cc.Label,displayName:"powerLabel"})],t.prototype,"powerLabel",void 0),__decorate([_({type:cc.Node,displayName:"redPoint"})],t.prototype,"redPoint",void 0),t=__decorate([b],t)}(n.default);i.default=C,cc._RF.pop()},{"../../../../core/base/AttributeData":"AttributeData","../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/ColorUtil":"ColorUtil","../../../../core/view/BaseEuiView":"BaseEuiView","../../../consts/MoneyConst":"MoneyConst","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../activity/model/RewardData":"RewardData","../../bag/UserBag":"UserBag","../../rolewin/UserEquip":"UserEquip","../../rolewin/UserSkill":"UserSkill","../../rolewin/model/PunchEquipForgeData":"PunchEquipForgeData","../../tips/UserTips":"UserTips"}],PunchEquipItem:[function(e,t,i){"use strict";cc._RF.push(t,"b08f4h3hEpNaYGWrFganJDA","PunchEquipItem"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../module/rolewin/UserSkill"),a=e("../config/ItemConfig"),o=e("../../core/utils/CommonUtils"),r=e("../../core/base/ViewManager"),s=e("../module/bag/view/HejiEquipTipsWin"),u=e("../../core/utils/ComponentUtil"),l=cc._decorator,c=l.ccclass,d=l.property,f=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.quaNode=null,t.nameLabel=null,t.levelLabel=null,t.zlLabel=null,t.redPoint=null,t.itemButton=null,t.wearData=null,t.data=0,t}return __extends(t,e),Object.defineProperty(t.prototype,"ItemButton",{get:function(){return this.itemButton},enumerable:!0,configurable:!0}),t.prototype.setData=function(e){this.data=e},t.prototype.onEnable=function(){this.itemButton.clickEvents[0]=u.ComponentUtil.createEventHandler(this.node,"PunchEquipItem","onTap","")},t.prototype.updatePunchEquipItemInfo=function(e){var t=n.default.ins().equipListData[e];if(this.data=e,this.wearData=n.default.ins().getWearEquipsData(this.data),t&&t.itemConfig){var i=a.default.getSubType(t.itemConfig);this.quaNode.color=a.default.getColoFromHEXByConfig(t.itemConfig),this.nameLabel.node.color=a.default.getColoFromHEXByConfig(t.itemConfig),this.redPoint.active=n.default.ins().checkIsHaveBestEquip(i);var r=n.default.ins().qimingAttrDic,s=0,u=0;if(r&&o.default.getObjectLength(r)>0)for(var l in r)for(var c in r[l])s=r[l][c].zslv,u=r[l][c].lv;else s=0,u=60;this.levelLabel.string=s>0?s+"\u8f6c":u+"\u7ea7",this.levelLabel.node.color=a.default.getColoFromHEXByConfig(t.itemConfig),this.zlLabel.string="+"+n.default.ins().getPunchForge().getPunchLevel(e)}else this.resetItem(),this.redPoint.active=n.default.ins().checkIsHaveBestEquip(e)},t.prototype.resetItem=function(){this.quaNode.color=cc.Color.BLACK.fromHEX("#666666"),this.nameLabel.node.color=cc.Color.BLACK.fromHEX("#666666"),this.levelLabel.string="",this.zlLabel.string="",this.redPoint.active=!1},t.prototype.onTap=function(){console.log(this.data),this.wearData&&0!=this.wearData.configID?r.default.ins().open(s.default,this.wearData,!0):r.default.ins().open(s.default,this.data,!0)},__decorate([d({type:cc.Node,displayName:"quaNode"})],t.prototype,"quaNode",void 0),__decorate([d({type:cc.Label,displayName:"nameLabel"})],t.prototype,"nameLabel",void 0),__decorate([d({type:cc.Label,displayName:"levelLabel"})],t.prototype,"levelLabel",void 0),__decorate([d({type:cc.Label,displayName:"zlLabel"})],t.prototype,"zlLabel",void 0),__decorate([d({type:cc.Node,displayName:"redPoint"})],t.prototype,"redPoint",void 0),__decorate([d({type:cc.Button,displayName:"itemButton"})],t.prototype,"itemButton",void 0),t=__decorate([c],t)}(cc.Component);i.default=f,cc._RF.pop()},{"../../core/base/ViewManager":"ViewManager","../../core/utils/CommonUtils":"CommonUtils","../../core/utils/ComponentUtil":"ComponentUtil","../config/ItemConfig":"ItemConfig","../module/bag/view/HejiEquipTipsWin":"HejiEquipTipsWin","../module/rolewin/UserSkill":"UserSkill"}],PunchEquipMasterConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d38e49AGiBFtqch4aRxO65C","PunchEquipMasterConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],PunchExchangeItem:[function(e,t,i){"use strict";cc._RF.push(t,"ebd276kq3tI+6YDwW3K4T/C","PunchExchangeItem"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseView"),a=e("../../../../core/base/ViewManager"),o=e("../../bag/view/HejiEquipTipsWin"),r=e("../../../config/ItemConfig"),s=e("../../tips/UserTips"),u=e("../../bag/UserBag"),l=e("../../rolewin/UserSkill"),c=e("../../../manager/GlobalConfig"),d=e("../../activity/model/RewardData"),f=e("../../../consts/MoneyConst"),p=e("../../../entity/Actor"),h=e("../../zs/UserZs"),g=cc._decorator,y=g.ccclass,v=g.property,m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameText=null,t.costLabel=null,t.changeBtn=null,t.redPoint=null,t.count=0,t.exchangeNum=0,t}return __extends(t,e),t.prototype.setParam=function(e){this.data=e,this.updatePunchExchangeItem()},t.prototype.getParam=function(){},t.prototype.updatePunchExchangeItem=function(){var e=c.default.ItemConfig[this.data.getItem.id],t=this.data.exchangeMaterial[0];this.exchangeNum=t.count,t.id==f.MoneyConst.punch1?this.count=p.default.togeatter1:this.count=p.default.togeatter2,this.redPoint.active=l.default.ins().getPunchExchangeItemRedPoint(this.data.id),this.nameText.string="<color = "+r.default.getQualityColor(e)+"><u>"+e.name+"</u></c>",this.itemConfig=e,this.costLabel.string=d.default.getCurrencyName(t.id)+": "+this.exchangeNum,this.data.zsLevel>0?this.changeBtn.node.active=h.default.ins().lv>=this.data.zsLevel:this.changeBtn.node.active=p.default.level>=this.data.level},t.prototype.onClickButton=function(e,t){switch(t){case"0":if(this.count<this.exchangeNum)return void s.default.ins().showTips("|C:0x35e62d&T:\u6750\u6599\u6570\u91cf\u4e0d\u8db3|");if(u.default.ins().getSurplusCount()<1)return void s.default.ins().showTips("\u80cc\u5305\u5df2\u6ee1");l.default.ins().sendExchangeHejiEquip(this.data.id);break;case"1":if(!this.itemConfig)return;5==r.default.getType(this.itemConfig)?a.default.ins().open(o.default,{id:this.itemConfig.id},!1,!0):s.default.ins().showTips("\u6ca1\u6709\u627e\u5230\u9053\u5177\u7c7b\u578b\u63d0\u793a\u9875")}},__decorate([v({type:cc.RichText,displayName:"nameText"})],t.prototype,"nameText",void 0),__decorate([v({type:cc.Label,displayName:"costLabel"})],t.prototype,"costLabel",void 0),__decorate([v({type:cc.Button,displayName:"changeBtn"})],t.prototype,"changeBtn",void 0),__decorate([v({type:cc.Node,displayName:"redPoint"})],t.prototype,"redPoint",void 0),t=__decorate([y],t)}(n.default);i.default=m,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseView":"BaseView","../../../config/ItemConfig":"ItemConfig","../../../consts/MoneyConst":"MoneyConst","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../activity/model/RewardData":"RewardData","../../bag/UserBag":"UserBag","../../bag/view/HejiEquipTipsWin":"HejiEquipTipsWin","../../rolewin/UserSkill":"UserSkill","../../tips/UserTips":"UserTips","../../zs/UserZs":"UserZs"}],PunchExchangeWin:[function(e,t,i){"use strict";cc._RF.push(t,"c6f07WRZDFAQaZm7j6C/QIY","PunchExchangeWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../base/ListScrollScript"),r=e("../../../manager/GlobalConfig"),s=e("../../rolewin/UserSkill"),u=e("../../../entity/Actor"),l=(e("../../tips/UserTips"),e("../../../base/NodeObjectPool")),c=e("../../../../core/utils/ComponentUtil"),d=e("../../../../core/base/ViewManager"),f=e("./PunchTransformWin"),p=cc._decorator,h=p.ccclass,g=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.extChangeList=null,t.equiplist=null,t.suipian=null,t.suipian1=null,t.goturn=null,t.tabItem=null,t.tabNodePool=null,t.currentSelect=0,t.menuNodes=[],t}return __extends(t,e),t.prototype.initData=function(){},t.prototype.initUI=function(){this.tabNodePool=new l.NodeObjectPool(this.tabItem,this.equiplist),this.tabNodePool.setToSize(6),this.initMenu()},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.data=e[0],this.observe(u.default.ins().postUpdateTogeatter,this.onListChange),this.addTouchEvent(this.goturn,this.onTap),this.refushInfo()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this.goturn,this.onTap),this.removeObserve()},t.prototype.onListChange=function(e){this.refushInfo()},t.prototype.initMenu=function(){this.menuArr=[],this.exchangeArr=[];var e=r.default.TogetherHitEquipPageConfig,t=0,i=s.default.ins().getMaxzLv();for(var n in e){var a=e[n].id[0],o=r.default.TogetherHitEquipExchangeConfig[a];if(o.zsLevel>i[0]||o.level>i[1])break;for(var u in this.menuArr.push({config:e[n],index:+n}),this.exchangeArr[t]=[],e[n].id){var l=r.default.TogetherHitEquipExchangeConfig[e[n].id[u]];this.exchangeArr[t].push(l)}t++}var d=this.menuArr.length;for(u=0;u<d;u++){var f=this.tabNodePool.shiftNode();f.getComponent(cc.Button).clickEvents[0]=c.ComponentUtil.createEventHandler(this.node,"PunchExchangeWin","onClickTabInfo",""+u),this.menuNodes.push(f),f.active=!0}},t.prototype.refushInfo=function(){this.suipian.string="\u9ad8\u7ea7\u7b26\u6587\u788e\u7247\uff1a"+u.default.togeatter1,this.suipian1.string="\u4f4e\u7ea7\u7b26\u6587\u788e\u7247\uff1a"+u.default.togeatter2;var e=this.exchangeArr[this.currentSelect];this.refreshTabList(),this.extChangeList.setParam(e)},t.prototype.refreshTabList=function(e){for(var t=0;t<this.menuNodes.length;t++)this.menuNodes[t].getChildByName("on").active=t==this.currentSelect},t.prototype.onTap=function(e){e==this.goturn&&d.default.ins().open(f.default)},t.prototype.onClickTabInfo=function(e,t){if(this.currentSelect!=+t){this.currentSelect=+t;var i=this.exchangeArr[this.currentSelect];this.refreshTabList(),this.extChangeList.setParam(i)}},t.prototype.onClickClosePanel=function(){d.default.ins().close(this)},t.prototype.checkIsOpen=function(e){var t=e.target,i=this.exchangeArr[t.selectedIndex][0];i.zsLevel,i.level},__decorate([g({type:o.default,displayName:"extChangeList"})],t.prototype,"extChangeList",void 0),__decorate([g({type:cc.Node,displayName:"equiplist"})],t.prototype,"equiplist",void 0),__decorate([g({type:cc.Label,displayName:"suipian"})],t.prototype,"suipian",void 0),__decorate([g({type:cc.Label,displayName:"suipian1"})],t.prototype,"suipian1",void 0),__decorate([g({type:cc.RichText,displayName:"goturn"})],t.prototype,"goturn",void 0),__decorate([g({type:cc.Node,displayName:"tabItem"})],t.prototype,"tabItem",void 0),t=__decorate([h],t)}(n.default);i.default=y,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/ComponentUtil":"ComponentUtil","../../../../core/view/BaseEuiView":"BaseEuiView","../../../base/ListScrollScript":"ListScrollScript","../../../base/NodeObjectPool":"NodeObjectPool","../../../entity/Actor":"Actor","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../rolewin/UserSkill":"UserSkill","../../tips/UserTips":"UserTips","./PunchTransformWin":"PunchTransformWin"}],PunchExtShowWin:[function(e,t,i){"use strict";cc._RF.push(t,"d4814eaY6hAf4Gj6U2f1SMD","PunchExtShowWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../manager/GlobalConfig"),r=e("../../rolewin/UserSkill"),s=e("../../../../core/utils/CommonUtils"),u=e("../../../../core/utils/TextFlowMaker"),l=e("../../../../core/base/ViewManager"),c=cc._decorator,d=c.ccclass,f=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.baseAttr=null,t.colorWhite="#f8b141",t.colorGray="#444134",t}return __extends(t,e),t.prototype.initData=function(){},t.prototype.initUI=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.setView()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.setView=function(){var e="",t=o.default.TogetherHitEquipQmConfig,i=r.default.ins().qimingAttrDic,n=new Object,a=0;for(var u in i)n=i[u],a=Number(u);var l=n?s.default.getObjectLength(n):0,c=this.colorWhite,d=!1;for(var f in t)for(var p in t[f]){var h=t[f][p];0!=Number(f)?e+="<color="+this.colorWhite+">"+f+"\u8f6c\u5957\u88c5\u5c5e\u6027(\u4e09\u89d2\u8272\u65f6):</c><br/>":e+="<color="+this.colorWhite+">"+p+"\u7ea7\u5957\u88c5\u5c5e\u6027(\u4e09\u89d2\u8272\u65f6):</c><br/>";u=0;var g=1e4*Number(f)+Number(p);for(var y in h){h[y].exAttr;g>a?(c=this.colorGray,d=!0):g==a&&u+1>l&&(c=this.colorGray,d=!0),e+="<color="+c+">"+h[y].num+"\u4ef6\u5957\uff1a"+this.getDescTextFlow(h[y].desc,!d)+"</c><br/>",3==++u&&(e+="<br/>")}}this.baseAttr.string=e},t.prototype.getDescTextFlow=function(e,t){for(var i="",n=0,a=u.default.generateTextFlow1(e);n<a.length;n++){var o=a[n];t&&o.style&&void 0!=o.style.textColor?i+="<color="+o.style.textColor+">"+o.text+"</c>":i+=o.text}return i},t.prototype.onTap=function(e){l.default.ins().close(this)},__decorate([f({type:cc.RichText,displayName:"baseAttr"})],t.prototype,"baseAttr",void 0),t=__decorate([d],t)}(n.default);i.default=p,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/CommonUtils":"CommonUtils","../../../../core/utils/TextFlowMaker":"TextFlowMaker","../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../rolewin/UserSkill":"UserSkill"}],PunchResWin:[function(e,t,i){"use strict";cc._RF.push(t,"e6f369NOnJHNoVTmMUMS6Jh","PunchResWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../rolewin/UserEquip"),r=e("../../bag/UserBag"),s=e("../../../customComponent/ItemIconSimple"),u=e("../../../../core/utils/ComponentUtil"),l=e("../../../../core/base/ViewManager"),c=cc._decorator,d=c.ccclass,f=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.closeBtn=null,t.smeltBtn=null,t.itemGroup=[],t.viewIndex=0,t.smeltEquips=[],t.selSmeltEquips=[],t}var i;return __extends(t,e),i=t,t.prototype.initData=function(){},t.prototype.initUI=function(){this.smeltEquips=[],this.smeltEquips.length=9},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.smeltBtn,this.onTap),this.addTouchEvent(this.closeBtn,this.onTap),this.observe(o.default.ins().postSmeltEquipComplete,this.setItemData),this.observe(o.default.ins().postEquipCheckList,this.setItemList),this.setItemData()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this.smeltBtn,this.onTap),this.removeTouchEvent(this.closeBtn,this.onTap),this.removeObserve()},t.prototype.setItemData=function(){this.smeltEquips=r.default.ins().getHejiOutEquips(),this.replaceAllEquipcell(this.smeltEquips)},t.prototype.setItemList=function(e){this.replaceAllEquipcell(e)},t.prototype.replaceAllEquipcell=function(e){for(var t=0;t<9;t++){this.itemGroup[t].updateDataView(e[t]);var i=this.itemGroup[t].node.getComponent(cc.Button);i.clickEvents[0]=u.ComponentUtil.createEventHandler(this.node,"PunchResWin","onClickSmeltEquipCell",""),i.clickEvents[0].customEventData=""+t}},t.prototype.onClickSmeltEquipCell=function(e,t){null!=this.itemGroup[+t].itemIconInfo&&(this.selSmeltEquips.push(+t),this.itemGroup[+t].updateDataView(null))},t.prototype.onTap=function(e){switch(e){case this.smeltBtn:o.default.ins().sendSmeltEquip(0,this.smeltEquips);break;case this.closeBtn:l.default.ins().close(i)}},__decorate([f({type:cc.Button,displayName:"closeBtn"})],t.prototype,"closeBtn",void 0),__decorate([f({type:cc.Button,displayName:"smeltBtn"})],t.prototype,"smeltBtn",void 0),__decorate([f({type:s.default,displayName:"itemGroup"})],t.prototype,"itemGroup",void 0),t=i=__decorate([d],t)}(n.default);i.default=p,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/ComponentUtil":"ComponentUtil","../../../../core/view/BaseEuiView":"BaseEuiView","../../../customComponent/ItemIconSimple":"ItemIconSimple","../../../enum/LayerManager":"LayerManager","../../bag/UserBag":"UserBag","../../rolewin/UserEquip":"UserEquip"}],PunchTransformWin:[function(e,t,i){"use strict";cc._RF.push(t,"17bda6i0ctCI52oXA2zTZGf","PunchTransformWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../entity/Actor"),o=e("../../../../core/base/ViewManager"),r=e("../../rolewin/UserSkill"),s=e("../../../manager/GlobalConfig"),u=e("../../tips/UserTips"),l=e("../../../enum/LayerManager"),c=cc._decorator,d=c.ccclass,f=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=l.LayerManager.UI_Popup,t.bgClose=null,t.transformBtn=null,t.quicklytransformBtn=null,t.count0=null,t.count1=null,t.minus=null,t.add=null,t.inputNum=null,t.hasLabel=null,t.changeValue=0,t}return __extends(t,e),t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.bgClose,this.onTouch),this.addTouchEvent(this.add,this.onTouch),this.addTouchEvent(this.minus,this.onTouch),this.addTouchEvent(this.quicklytransformBtn,this.onTouch),this.addTouchEvent(this.transformBtn,this.onTouch),this.observe(a.default.ins().postUpdateTogeatter,this.checkChange),this.updatePunchTransForm()},t.prototype.close=function(){this.removeTouchEvent(this.bgClose,this.onTouch),this.removeTouchEvent(this.add,this.onTouch),this.removeTouchEvent(this.minus,this.onTouch),this.removeTouchEvent(this.quicklytransformBtn,this.onTouch),this.removeTouchEvent(this.transformBtn,this.onTouch),this.removeObserve()},t.prototype.checkChange=function(e){e&&2==e.type&&this.updatePunchTransForm()},t.prototype.updatePunchTransForm=function(){this.count0.string="x0",this.count1.string="x0",this.hasLabel.string="\u62e5\u6709\uff1a"+a.default.togeatter2,this.changeValue=0,this.inputNum.string="0",this.transformBtn.enabled=a.default.togeatter2>0,this.quicklytransformBtn.enabled=!1},t.prototype.onTouch=function(e){switch(e){case this.bgClose:o.default.ins().close(this);break;case this.transformBtn:r.default.ins().sendChangeTogeatterHigh(a.default.togeatter2);break;case this.quicklytransformBtn:r.default.ins().sendChangeTogeatterHigh(this.changeValue);break;case this.add:this.changeValue=+this.inputNum.string,this.changeValue<a.default.togeatter2?(this.changeValue++,this.updateCountLabel(),this.quicklytransformBtn.enabled=!0,this.inputNum.string=this.changeValue.toString()):0==a.default.togeatter2?u.default.ins().showTips("\u9ad8\u7ea7\u7b26\u6587\u788e\u7247\u4e0d\u8db3"):u.default.ins().showTips("\u5df2\u8fbe\u5230\u6700\u5927\u8f6c\u6362\u6570\u91cf");break;case this.minus:this.changeValue=+this.inputNum.string,this.changeValue>0&&(this.changeValue--,this.updateCountLabel(),this.inputNum.string=this.changeValue.toString()),this.changeValue<=0&&(this.quicklytransformBtn.enabled=!1)}},t.prototype.updateCountLabel=function(){this.count0.string="x"+this.changeValue,this.count1.string="x"+this.changeValue*s.default.TogerherHitBaseConfig.TogExgRate},t.prototype.onClickEditBox=function(){this.changeValue=+this.inputNum.string?+this.inputNum.string:0,a.default.togeatter2<this.changeValue?(this.changeValue=a.default.togeatter2,this.inputNum.string=this.changeValue.toString(),this.updateCountLabel()):(this.changeValue=+this.inputNum.string,this.updateCountLabel())},__decorate([f({type:cc.Button,displayName:"bgClose"})],t.prototype,"bgClose",void 0),__decorate([f({type:cc.Button,displayName:"transformBtn"})],t.prototype,"transformBtn",void 0),__decorate([f({type:cc.Button,displayName:"quicklytransformBtn"})],t.prototype,"quicklytransformBtn",void 0),__decorate([f({type:cc.Label,displayName:"count0"})],t.prototype,"count0",void 0),__decorate([f({type:cc.Label,displayName:"count1"})],t.prototype,"count1",void 0),__decorate([f({type:cc.Button,displayName:"minus"})],t.prototype,"minus",void 0),__decorate([f({type:cc.Button,displayName:"add"})],t.prototype,"add",void 0),__decorate([f({type:cc.EditBox,displayName:"inputNum"})],t.prototype,"inputNum",void 0),__decorate([f({type:cc.Label,displayName:"hasLabel"})],t.prototype,"hasLabel",void 0),t=__decorate([d],t)}(n.default);i.default=p,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../entity/Actor":"Actor","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../rolewin/UserSkill":"UserSkill","../../tips/UserTips":"UserTips"}],RankDataBase:[function(e,t,i){"use strict";cc._RF.push(t,"f229e1LRMpF1rPUEAq2ba9o","RankDataBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.parser=function(e,t){var i=this;t.forEach(function(t){i[t]=e[RankDataType.readFunc[t]]()})},e}();i.default=n,cc._RF.pop()},{}],RankDataBook:[function(e,t,i){"use strict";cc._RF.push(t,"abfa6RfFuFAKZx7HgPNtdX9","RankDataBook"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parser=function(e,t){this.pos=e.readShort(),this.id=e.readInt(),this.player=e.readString(),this.level=e.readShort(),this.zslevel=e.readShort(),this.viplevel=e.readShort(),this.monthCard=e.readShort(),this.value=e.readDouble()},t}(e("./RankDataBase").default);i.default=n,cc._RF.pop()},{"./RankDataBase":"RankDataBase"}],RankDataLadder:[function(e,t,i){"use strict";cc._RF.push(t,"06d70Z3B6xInaiyWVhTHQNd","RankDataLadder"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parser=function(e,t){this.id=e.readInt(),this.player=e.readString(),this.challgeLevel=e.readInt(),this.challgeId=e.readInt(),this.winNum=e.readInt(),this.job=e.readByte(),this.sex=e.readByte()},t}(e("./RankDataBase").default);i.default=n,cc._RF.pop()},{"./RankDataBase":"RankDataBase"}],RankDataLongHun:[function(e,t,i){"use strict";cc._RF.push(t,"27a82fLAHROG4/QVOHW8znc","RankDataLongHun"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parser=function(e,t){this.pos=e.readShort(),this.id=e.readInt(),this.player=e.readString(),this.level=e.readShort(),this.zslevel=e.readShort(),this.viplevel=e.readShort(),this.monthCard=e.readShort(),this.value=e.readInt()},t}(e("./RankDataBase").default);i.default=n,cc._RF.pop()},{"./RankDataBase":"RankDataBase"}],RankDataScore:[function(e,t,i){"use strict";cc._RF.push(t,"f8fdeSsq+tJYJuyOX9IRttb","RankDataScore"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parser=function(e,t){this.pos=e.readShort(),this.id=e.readInt(),this.player=e.readString(),this.level=e.readShort(),this.zslevel=e.readShort(),this.viplevel=e.readShort(),this.monthCard=e.readShort(),this.value=e.readDouble()},t}(e("./RankDataBase").default);i.default=n,cc._RF.pop()},{"./RankDataBase":"RankDataBase"}],RankDataSkirmish:[function(e,t,i){"use strict";cc._RF.push(t,"9d475ZPDa1GmbahQJ5i/QZ4","RankDataSkirmish"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RankDataBase"),a=e("../../../manager/GlobalConfig"),o=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parser=function(t,i){for(var n in e.prototype.parser.call(this,t,i),a.default.SkirmishRankConfig){var o=a.default.SkirmishRankConfig[n];if(o.minRank<=this.pos&&this.pos<=o.maxRank)return this.reward=o.rewards[0].count,void(this.money=o.rewards[1].count)}this.money=this.reward=0},t}(n.default);i.default=o,cc._RF.pop()},{"../../../manager/GlobalConfig":"GlobalConfig","./RankDataBase":"RankDataBase"}],RankDataType:[function(e,t,i){"use strict";var n;cc._RF.push(t,"1fa34sGOEhC24X3BxSGrJ5K","RankDataType"),function(e){e.TYPE_POWER=0,e.TYPE_ARENA=1,e.TYPE_SKIRMISH=2,e.TYPE_PASS=3,e.TYPE_COPY=4,e.TYPE_LEVEL=5,e.TYPE_WING=16,e.TYPE_JOB_ZS=7,e.TYPE_JOB_FS=8,e.TYPE_JOB_DS=9,e.TYPE_LILIAN=10,e.TYPE_LADDER=11,e.TYPE_BAOSHI=12,e.TYPE_ZHANLING=13,e.TYPE_LONGHUN=14,e.TYPE_XUNZHANG=15,e.TYPE_XIAOFEI=-1,e.TYPE_BOOK=17,e.TYPE_ZS=18,e.TYPE_SCORE=19,e.TYPE_HF_XIAOFEI=21,e.TYPE_WEIWANG=22,e.TYPE_XIAYI=23,e.DATA_POS="pos",e.DATA_ID="id",e.DATA_PLAYER="player",e.DATA_LEVEL="level",e.DATA_ZHUAN="zhuan",e.DATA_VIP="vip",e.DATA_MONTH="month",e.DATA_POWER="power",e.DATA_COUNT="count",e.DATA_EXP="exp",e.DATA_JOB="job",e.DATA_SEX="sex",e.DATA_WEIWANG="weiWang",e.ITEMS=[],e.ITEMS[e.TYPE_POWER]=e.ITEMS[e.TYPE_WING]=e.ITEMS[e.TYPE_JOB_ZS]=e.ITEMS[e.TYPE_JOB_FS]=e.ITEMS[e.TYPE_JOB_DS]=[e.DATA_POS,e.DATA_ID,e.DATA_PLAYER,e.DATA_LEVEL,e.DATA_ZHUAN,e.DATA_VIP,e.DATA_MONTH,e.DATA_POWER],e.ITEMS[e.TYPE_SKIRMISH]=[e.DATA_POS,e.DATA_ID,e.DATA_PLAYER,e.DATA_JOB,e.DATA_SEX,e.DATA_LEVEL,e.DATA_ZHUAN,e.DATA_VIP,e.DATA_COUNT,e.DATA_MONTH],e.ITEMS[e.TYPE_LEVEL]=[e.DATA_POS,e.DATA_ID,e.DATA_PLAYER,e.DATA_LEVEL,e.DATA_ZHUAN,e.DATA_VIP,e.DATA_MONTH],e.ITEMS[e.TYPE_PASS]=e.ITEMS[e.TYPE_COPY]=[e.DATA_POS,e.DATA_ID,e.DATA_PLAYER,e.DATA_POWER,e.DATA_VIP,e.DATA_COUNT,e.DATA_MONTH],e.ITEMS[e.TYPE_LILIAN]=[e.DATA_POS,e.DATA_ID,e.DATA_PLAYER,e.DATA_LEVEL,e.DATA_ZHUAN,e.DATA_VIP,e.DATA_MONTH,e.DATA_COUNT,e.DATA_EXP],e.ITEMS[e.TYPE_XUNZHANG]=[e.DATA_POS,e.DATA_ID,e.DATA_PLAYER,e.DATA_LEVEL,e.DATA_ZHUAN,e.DATA_VIP,e.DATA_MONTH,e.DATA_COUNT],e.ITEMS[e.TYPE_XIAYI]=[e.DATA_POS,e.DATA_ID,e.DATA_PLAYER,e.DATA_VIP,e.DATA_COUNT],e.readFunc={},e.readFunc[e.DATA_JOB]=e.readFunc[e.DATA_SEX]="readByte",e.readFunc[e.DATA_POS]=e.readFunc[e.DATA_LEVEL]=e.readFunc[e.DATA_ZHUAN]=e.readFunc[e.DATA_VIP]=e.readFunc[e.DATA_MONTH]="readShort",e.readFunc[e.DATA_ID]=e.readFunc[e.DATA_POWER]=e.readFunc[e.DATA_COUNT]=e.readFunc[e.DATA_EXP]="readInt",e.readFunc[e.DATA_POWER]="readDouble",e.readFunc[e.DATA_PLAYER]="readString"}(n||(n={})),cc._RF.pop()},{}],RankDataWeiWang:[function(e,t,i){"use strict";cc._RF.push(t,"3ad0bXzY+VBxJkqnwg4wcXY","RankDataWeiWang"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parser=function(e,t){this.pos=e.readShort(),this.id=e.readInt(),this.player=e.readString(),this.level=e.readShort(),this.zslevel=e.readShort(),this.viplevel=e.readShort(),this.monthCard=e.readShort(),this.weiWang=e.readInt()},t}(e("./RankDataBase").default);i.default=n,cc._RF.pop()},{"./RankDataBase":"RankDataBase"}],RankDataWing:[function(e,t,i){"use strict";cc._RF.push(t,"d780bXPzE1PMI089Q5Bm4v5","RankDataWing"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parser=function(e,t){this.pos=e.readShort(),this.id=e.readInt(),this.player=e.readString(),this.level=e.readShort(),this.zslevel=e.readShort(),this.viplevel=e.readShort(),this.monthCard=e.readShort(),this.value=e.readInt()},t}(e("./RankDataBase").default);i.default=n,cc._RF.pop()},{"./RankDataBase":"RankDataBase"}],RankDataZhuZao:[function(e,t,i){"use strict";cc._RF.push(t,"e94726D+LRHXbhkoUFenW3F","RankDataZhuZao"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parser=function(e,t){this.pos=e.readShort(),this.id=e.readInt(),this.player=e.readString(),this.level=e.readShort(),this.zslevel=e.readShort(),this.viplevel=e.readShort(),this.monthCard=e.readShort(),this.value=e.readInt()},t}(e("./RankDataBase").default);i.default=n,cc._RF.pop()},{"./RankDataBase":"RankDataBase"}],RankDataZhuan:[function(e,t,i){"use strict";cc._RF.push(t,"6774fgat2xD17YQmUoBAiBg","RankDataZhuan"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.parser=function(e,t){this.pos=e.readShort(),this.id=e.readInt(),this.player=e.readString(),this.level=e.readShort(),this.zslevel=e.readShort(),this.viplevel=e.readShort(),this.monthCard=e.readShort(),this.value=e.readInt()},t}(e("./RankDataBase").default);i.default=n,cc._RF.pop()},{"./RankDataBase":"RankDataBase"}],RankIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"f6271wEwHlJ0KE1BThlMF1R","RankIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../fb/UserFb"),r=e("../../../consts/SystemConst"),s=e("../../opensystem/OpenSystem"),u=e("../../ranking/Rank"),l=function(e){function t(t,i){void 0===i&&(i=null);var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postGuanqiaInfo,o.default.ins().postGuanKaIdChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return s.default.ins().checkSysOpen(r.SystemType.RANK)},t.prototype.checkShowRedPoint=function(){return s.default.ins().checkSysOpen(r.SystemType.RANK)?0:u.default.ins().canPraiseInAll()?1:0},t.prototype.tapExecute=function(){ViewManager.ins().open(RankingWin)},t}(n.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../fb/UserFb":"UserFb","../../opensystem/OpenSystem":"OpenSystem","../../ranking/Rank":"Rank","./RuleIconBase":"RuleIconBase"}],Rank:[function(e,t,i){"use strict";cc._RF.push(t,"96e59+0vaNEibkAjQiFd8Wk","Rank"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("./model/RankDataSkirmish"),s=e("./model/RankDataLadder"),u=e("./model/RankDataZhuZao"),l=e("./model/RankDataLongHun"),c=e("./model/RankDataWing"),d=e("./model/RankDataBook"),f=e("./model/RankDataZhuan"),p=e("./model/RankDataScore"),h=e("./model/RankDataWeiWang"),g=e("./model/RankDataBase"),y=function(e){function t(){var i=e.call(this)||this;return i.rankModel=[],i.rankTypeList=[],o.default.compile(t),i.sysId=a.PackageID.Ranking,i.regNetMsg(1,i.postRankingData),i.regNetMsg(2,i.postPraiseData),i.regNetMsg(3,i.postPraiseResult),i.regNetMsg(4,i.postAllPraiseData),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initLogin=function(){this.sendGetAllPraiseData()},t.prototype.sendGetRankingData=function(e){void 0===e&&(e=0);var t=this.getBytes(1);t.writeShort(e),this.sendToServer(t)},t.prototype.postRankingData=function(e){var t=this.getRankModel(e.readShort());return t.parser(e),t},t.prototype.sendGetPraiseData=function(e){void 0===e&&(e=0);var t=this.getBytes(2);t.writeShort(e),this.sendToServer(t)},t.prototype.postPraiseData=function(e){var i=t.ins().getRankModel(e.readShort());return i.praise.praiseTime=e.readShort(),i.praise.parser(e),i.type},t.prototype.sendGetAllPraiseData=function(){this.sendBaseProto(4)},t.prototype.postAllPraiseData=function(e){for(var i=e.readShort(),n=0;n<i;n++){t.ins().getRankModel(e.readShort()).praise.praiseTime=e.readShort()}},t.prototype.sendPraise=function(e){var t=this.getBytes(3);t.writeShort(e),this.sendToServer(t)},t.prototype.postPraiseResult=function(e){var i=t.ins().getRankModel(e.readShort());return i.praise.praiseTime=e.readShort(),[i.type,i.praise.getLastMobaiNum()]},t.prototype.getRankModel=function(e){if(!(e in this.rankModel)){var t=void 0;t=e==RankDataType.TYPE_SKIRMISH?r.default:e==RankDataType.TYPE_LADDER?s.default:e==RankDataType.TYPE_BAOSHI?u.default:e==RankDataType.TYPE_LONGHUN?l.default:e==RankDataType.TYPE_WING?c.default:e==RankDataType.TYPE_BOOK?d.default:e==RankDataType.TYPE_ZS?f.default:e==RankDataType.TYPE_SCORE?p.default:e==RankDataType.TYPE_WEIWANG?h.default:g.default,this.rankModel[e]=new v(e,t)}return this.rankModel[e]},t.prototype.canPraiseByType=function(e){return!1},t.prototype.canPraiseInAll=function(){this.rankTypeList.length<=0&&(this.rankTypeList=[RankDataType.TYPE_POWER,RankDataType.TYPE_SKIRMISH,RankDataType.TYPE_LEVEL,RankDataType.TYPE_LILIAN,RankDataType.TYPE_XUNZHANG]);for(var e=0,t=this.rankModel;e<t.length;e++){var i=t[e];if(i&&this.rankTypeList.lastIndexOf(i.type)>-1&&i.praise&&i.praise.praiseTime<1)return!0}return!1},t}(n.default);i.default=y;var v=function(){function e(e,t){this.type=e,this._dataClass=t,this._dataList=[],this.praise=new PraiseData}return e.prototype.getDataList=function(e){return void 0===e&&(e=-1),-1==e?this._dataList:this._dataList[e]},e.prototype.parser=function(e){var t=RankDataType.ITEMS[this.type],i=e.readShort();this._dataList.length=i;for(var n=0;n<i;++n)n in this._dataList||(this._dataList[n]=new this._dataClass),this._dataList[n].parser(e,t);this.selfPos=e.readShort()},e}();i.RankModel=v,window.GameSystem.push(y.ins.bind(y)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","./model/RankDataBase":"RankDataBase","./model/RankDataBook":"RankDataBook","./model/RankDataLadder":"RankDataLadder","./model/RankDataLongHun":"RankDataLongHun","./model/RankDataScore":"RankDataScore","./model/RankDataSkirmish":"RankDataSkirmish","./model/RankDataWeiWang":"RankDataWeiWang","./model/RankDataWing":"RankDataWing","./model/RankDataZhuZao":"RankDataZhuZao","./model/RankDataZhuan":"RankDataZhuan"}],RechargeData:[function(e,t,i){"use strict";cc._RF.push(t,"f5da1cF4uhFk4k/lZEDQvkW","RechargeData");cc._RF.pop()},{}],RechargeDaysAwardsConfig:[function(e,t,i){"use strict";cc._RF.push(t,"9ebd1wX+oFIU74e6apbB1xk","RechargeDaysAwardsConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],RechargeItemsConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f14720JBFxLg6FvakztGE5A","RechargeItemsConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],Recharge:[function(e,t,i){"use strict";cc._RF.push(t,"4ae519XzQhJGKJbi/r4AQCu","Recharge"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../manager/GlobalConfig"),r=e("../../../core/utils/CommonUtils"),s=e("../setting/Setting"),u=e("../../manager/TimerManager"),l=e("../../../core/base/MessageCenter"),c=function(e){function t(){var i=e.call(this)||this;return i._rechargeData=[],i.flag=0,i.forevetCard=0,i.recharge_type=0,i.franchiseflag=0,i.franchiseget=0,i.firstBuy=0,i.sysId=a.PackageID.Recharge,l.default.compile(t),i.sysId=a.PackageID.Recharge,i.regNetMsg(1,i.postRecharge1Data),i.regNetMsg(2,i.changeRecharge1Data),i.regNetMsg(6,i.getRecharge2Data),i.regNetMsg(7,i.changeRecharge2Data),i.regNetMsg(8,i.postUpDataItem),i.regNetMsg(9,i.postRechargeTotalDay),i.regNetMsg(20,i.postGetMonthDay),i.regNetMsg(11,i.postFranchiseInfo),i.regNetMsg(12,i.postMuchDayRecReward),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getRechargeData=function(e){return void 0===e&&(e=-1),-1==e?this._rechargeData:this._rechargeData[e]||new d},t.prototype.getCurRechargeConfig=function(){var e=this.getRechargeData(0),t=r.default.getObjectLength(o.default.DailyRechargeConfig);if(e.day<=t)return o.default.DailyRechargeConfig[e.day];var i=e.day-t;return i=i%(t=r.default.getObjectLength(o.default.LoopRechargeConfig))||t,o.default.LoopRechargeConfig[i]},t.prototype.getCurDailyRechargeIsAllGet=function(){for(var e=t.ins().getRechargeData(0),i=t.ins().getCurRechargeConfig(),n=r.default.getObjectLength(i),a=0;a<n;a++){if(!!!(e.isAwards>>a&1))return!1}return!0},t.prototype.sendGetAwards=function(e,t){var i=this.getBytes(0==e?2:7);i.writeShort(t),this.sendToServer(i)},t.prototype.postRecharge1Data=function(e){this.recharge(e,0)},t.prototype.changeRecharge1Data=function(){var e=this.getBytes(2);this.sendToServer(e)},t.prototype.postUpdateRechargeEx=function(e){return{type:e}},t.prototype.postUpdateRecharge=function(e){return e},t.prototype.getDayReward=function(e){var t=this.getBytes(3);t.writeShort(e),this.sendToServer(t)},t.prototype.getRecharge2Data=function(e){},t.prototype.changeRecharge2Data=function(e){var i=this.getRechargeData(1);i&&(i.change(e),t.ins().postUpdateRecharge(1))},t.prototype.getRechargeTotalAward=function(e){var t=this.getBytes(8);t.writeShort(e),this.sendToServer(t)},t.prototype.recharge=function(e,i){(this._rechargeData[i]||(this._rechargeData[i]=new d),this._rechargeData[i].parser(e,i),0==i)&&(t.ins().getCurDailyRechargeIsAllGet()&&ViewManager.ins().close(Recharge2Win));t.ins().postUpdateRechargeEx(i),this.recharge_type=i},t.prototype.postUpDataItem=function(e){this.costList=e.readInt()},t.prototype.postRechargeTotalDay=function(e){this.rechargeTotal={},this.rechargeTotal.hasGetDays=[];for(var t=e.readShort(),i=0;i<t;i++)this.rechargeTotal.hasGetDays.push(e.readShort());this.rechargeTotal.totalDay=e.readShort()},t.prototype.postGetMonthDay=function(e){var t=e.readUnsignedInt();this.monthDay=t>0?t:0,t>0&&(this.flag=2),this.forevetCard=e.readInt(),!s.default.ins().getValue(s.ClientSet.firstMonthCard)&&(this.monthDay>0||this.getIsForeve())&&s.default.ins().setValue(s.ClientSet.firstMonthCard,1)},t.prototype.getOrderByIndex=function(e){return void 0===e&&(e=0),this.costList>>e&1},Object.defineProperty(t.prototype,"monthDay",{get:function(){return this._monthDay},set:function(e){this._monthDay!=e&&(this._monthDay=e,u.default.ins().remove(this.downTime,this),this._monthDay>0&&u.default.ins().doTimer(1e3,this._monthDay,this.downTime,this))},enumerable:!0,configurable:!0}),t.prototype.downTime=function(){this._monthDay-=1},t.prototype.getAddBagGrid=function(){return this.monthDay>0?100:0},t.prototype.getAddBagFranchiseGrid=function(){return this.franchise>0?100:0},t.prototype.showReCharge=function(e){OpenSystem.ins().checkSysOpen(SystemType.FIRSTCHARGE)?(WarnWin.show("\u6b63\u5728\u62c9\u8d77\u652f\u4ed8...\n\u5982\u679c\u957f\u65f6\u95f4\u65e0\u54cd\u5e94\uff0c\u8bf7\u5c1d\u8bd5\u5237\u65b0\u7f51\u9875\u91cd\u65b0\u8d2d\u4e70",function(){},this),window.showRecharge?window.showRecharge(e,Actor.actorID,{actorName:Actor.myName,actorLevel:Actor.level}):(alert("\u672a\u63a5\u5165\u652f\u4ed8\u63a5\u53e3"),ViewManager.ins().close(WarnWin))):UserTips.ins().showTips("\u5145\u503c\u5df2\u5c4f\u853d")},t.prototype.getIsForeve=function(){return 2==t.ins().forevetCard},t.prototype.sendGetFranchise=function(){this.sendBaseProto(10)},t.prototype.postFranchiseInfo=function(e){var t=e.readUnsignedInt();this.franchise=t>0?t:0,this.franchiseget=e.readByte(),this.firstBuy=e.readByte()},Object.defineProperty(t.prototype,"franchise",{get:function(){return this._franchise},set:function(e){this._franchise!=e&&(this._franchise=e,u.default.ins().remove(this.franchiseTime,this),this._franchise>0&&u.default.ins().doTimer(1e3,this._franchise,this.franchiseTime,this))},enumerable:!0,configurable:!0}),t.prototype.franchiseTime=function(){this._franchise-=1},t.prototype.getRechargeList=function(){var e=o.default.RechargeDaysAwardsConfig,i=[],n={},a={};for(var s in e)n[e[s].sum]||(n[e[s].sum]=[]),a[e[s].sum]||(a[e[s].sum]=0),t.ins().rechargeTotal.hasGetDays.indexOf(e[s].id)>=0&&a[e[s].sum]++,n[e[s].sum].push(e[s]);for(var s in a){if(i.length)break;if(!(a[s]>=r.default.getObjectLength(n[s])))for(var u in n[s])i.push(n[s][u])}return i},t.prototype.sendMuchDayRecReward=function(){this.sendBaseProto(11)},t.prototype.postMuchDayRecReward=function(e){this.mRecNum=e.readInt(),this.mReward=e.readByte(),this.mDayNum=e.readShort()},t}(n.default);i.default=c;var d=function(){function e(){}return e.prototype.parser=function(e,t){this.day=e.readShort()+1,this.curDayPay=e.readInt(),this.num=e.readInt(),this.isAwards=e.readInt()},e.prototype.change=function(e){this.num=e.readInt(),this.isAwards=e.readInt()},e.checkOpenWin=function(){var e=c.ins().getRechargeData(0);e&&e.num?ViewManager.ins().open(ChargeFirstWin):ViewManager.ins().open(Recharge1Win)},e}();i.RechargeData=d,window.GameSystem.push(c.ins.bind(c)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/CommonUtils":"CommonUtils","../../base/BaseSystem":"BaseSystem","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../setting/Setting":"Setting"}],RedPointBase:[function(e,t,i){"use strict";cc._RF.push(t,"f53e8gO0HBMd4/TvVCDrWgV","RedPointBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../game/base/BaseSystem"),a=e("./MessageCenter"),o=function(e){function t(){var i=e.call(this)||this;return a.default.compile(t),i.initTabs(),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initTabs=function(){this.isOpen=!1,this.redpoint=!1,this.tabs={},this.toTabs={},this.sumTabs={},this.observe(this.postRedPoint,this.postOpen)},t.prototype.registerTab=function(e){for(var t=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];this.tabs[e]=!1,this.associated.apply(this,[function(){return t.updateTabRedPoint(e)}].concat(i))},t.prototype.registerSum=function(e,t){this.sumTabs[e]=t;for(var i=0,n=t;i<n.length;i++){var a=n[i];this.toTabs[a]?this.toTabs[a].push(e):this.toTabs[a]=[e]}},t.prototype.registerOpen=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.associated.apply(this,[this.postOpen].concat(e))},t.prototype.postOpen=function(){var e=this.isOpen;if(this.isOpen=this.getIsOpen(),this.isOpen&&e!=this.isOpen)for(var t=Object.keys(this.tabs),i=0;i<t.length;i++){var n=+t[i];this.updateTabRedPoint(n)}return this.isOpen!=e},t.prototype.postRedPoint=function(){if(!this.isOpen)return!!this.redpoint&&(this.redpoint=!1,!0);var e=this.redpoint;return this.redpoint=this.and(),this.redpoint!=e},t.prototype.postTabs=function(e){return e},t.prototype.getRedPoint=function(e){return this.tabs[e]},t.prototype.updateTabRedPoint=function(e){if(this.isOpen){var t=this.tabs[e];this.tabs[e]=this.getTabRedPoint(e),this.tabs[e]!=t&&this.sendTabs(e)}},t.prototype.sendTabs=function(e){this.postTabs(e);var t=this.toTabs[e];if(t)for(var i=0,n=t;i<n.length;i++){var a=n[i],o=this.tabs[a];this.tabs[a]=this.andTabs(this.sumTabs[a]),this.tabs[a]!=o&&this.postTabs(a)}this.postRedPoint()},t.prototype.and=function(){for(var e in this.tabs)if(this.tabs[e])return!0;return!1},t.prototype.andTabs=function(e){for(var t in e)if(this.getRedPoint(e[t]))return!0;return!1},t.prototype.andList=function(e){for(var t in e)if(e[t])return!0;return!1},t.prototype.getTabRedPoint=function(e){return!1},t.prototype.getIsOpen=function(){return!0},t}(n.default);i.default=o,window.GameSystem.push(o.ins.bind(o)),cc._RF.pop()},{"../../game/base/BaseSystem":"BaseSystem","./MessageCenter":"MessageCenter"}],RefinesystemExpConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d0652pN8XdIfYLANj0A/gus","RefinesystemExpConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],RegExpUtil:[function(e,t,i){"use strict";cc._RF.push(t,"aa9f1u8XIFFVJrkuCfoLwQs","RegExpUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.LINE_BREAK=/\r+/g,e.BLANK_REG=/[\s\\]/g,e.ARGB_COLOR=/[a-fA-F0-9]{8}/,e.HTML=/<[^>]+>/g,e.DELETE_SPACE=/\s/g,e.REPLACE_STRING=/%s/g,e.NumericExp=/^\d+$/,e.NonNumericExp=/\D/,e.ActorNameExp=/^([\u4e00-\u9fa5]?\w?[^>|!@#$%&*\^\?]){1,48}$/,e}();i.default=n,cc._RF.pop()},{}],ReincarnateEquipCompose:[function(e,t,i){"use strict";cc._RF.push(t,"c4838q3tINN+JAZmkhPfBGe","ReincarnateEquipCompose"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ReincarnateEquip:[function(e,t,i){"use strict";cc._RF.push(t,"a21ebivQotJDJRW/run1rZ5","ReincarnateEquip"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ReincarnateSpirit:[function(e,t,i){"use strict";cc._RF.push(t,"e664aYBiDRN05pAY2gMGfPz","ReincarnateSpirit"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ReincarnateSuit:[function(e,t,i){"use strict";cc._RF.push(t,"b6684+Wi0hAAZMv6eH4sX3w","ReincarnateSuit"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ReincarnationBase:[function(e,t,i){"use strict";cc._RF.push(t,"0a3bfES/thHtKLgOuiREj16","ReincarnationBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ReincarnationDemonLevel:[function(e,t,i){"use strict";cc._RF.push(t,"9340aL0tL9GO71CSalvoyMq","ReincarnationDemonLevel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ReincarnationExchange:[function(e,t,i){"use strict";cc._RF.push(t,"7e98f54hXRByYaRof7mjmIm","ReincarnationExchange"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ReincarnationLevel:[function(e,t,i){"use strict";cc._RF.push(t,"e118ffxrelLjqv84U7aEUI4","ReincarnationLevel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ReincarnationLinkLevel:[function(e,t,i){"use strict";cc._RF.push(t,"73243JnweNLfrfgBA/qWdza","ReincarnationLinkLevel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ReincarnationSoulLevel:[function(e,t,i){"use strict";cc._RF.push(t,"53055VnPOpK2JQBOUy3cKqs","ReincarnationSoulLevel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ReportData:[function(e,t,i){"use strict";cc._RF.push(t,"1afc3yaSUZE8qPVt8uxr+tj","ReportData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.isComplete=!1,this.httpRequest=new XMLHttpRequest,this.httpRequestUrl=[]}return e.getIns=function(){return this._ins=this._ins||new e,this._ins},e.prototype.report=function(e,t){},e.prototype.reportChat=function(e,t){},e.prototype.advice=function(e,t,i){},e.prototype.roleUp=function(){},e.prototype.enterGame=function(){},e.prototype.createRole=function(e){},e.prototype.advice1=function(e,t,i){},e.prototype.reportUrl=function(e,t){var i=new a;i.url=e,i.method=t,this.httpRequestUrl.push(i),this.sendReportUrl()},e.LOAD="load",e.GM="gm",e.ERROR="error",e}();i.default=n;var a=function(){return function(){}}();cc._RF.pop()},{}],ResultManager:[function(e,t,i){"use strict";cc._RF.push(t,"f3c52yJfC5L4LkNbdA8CqlP","ResultManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./BaseClass"),a=e("../../game/map/GameMap"),o=e("../../game/module/fb/UserFb"),r=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.create=function(e){for(var t,i,n,r,s=[],u=1;u<arguments.length;u++)s[u-1]=arguments[u];var l=e||a.default.fbType;switch(l){case o.default.FB_TYPE_PERSONAL:case o.default.FB_TYPE_GUARD_WEAPON:(t=ViewManager.ins()).open.apply(t,[PersonalResultWin].concat(s));break;case o.default.FB_TYPE_TIAOZHAN:(i=ViewManager.ins()).open.apply(i,[TongResultWin].concat(s));break;case o.default.FB_TYPE_FIRE_RING:case o.default.FB_TYPE_MATERIAL:l==o.default.FB_TYPE_FIRE_RING&&void 0!=s&&void 0!=s[0]&&0==s[0]&&Activity.ins().removeEvent(),(n=ViewManager.ins()).open.apply(n,[MaterialResultWin].concat(s));break;case o.default.FB_TYPE_NEW_WORLD_BOSS:ViewManager.ins().open(NewWorldBossResultPanel);break;case o.default.FB_TYPE_CITY:ViewManager.ins().open(CityResultWin,s[1],s[4]);break;case o.default.FB_TYPE_ALLHUMENBOSS:case o.default.FB_TYPE_ZHUANSHENGBOSS:case o.default.FB_TYPE_HOMEBOSS:case o.default.FB_TYPE_LABA:case o.default.FB_TYPE_DARK_BOSS:case o.default.FB_TYPE_HIDE_BOSS:ViewManager.ins().open(BossResultWin,s[1],s[4]);break;case o.default.FB_TYPE_GOD_WEAPON:case o.default.FB_TYPE_GOD_WEAPON_TOP:break;case o.default.FB_TYPE_KF_BOSS:ViewManager.ins().open(KFBossResultWin,s[0],s[1]);break;default:(r=ViewManager.ins()).open.apply(r,[ResultWin].concat(s))}},t}(n.default);i.default=r,cc._RF.pop()},{"../../game/map/GameMap":"GameMap","../../game/module/fb/UserFb":"UserFb","./BaseClass":"BaseClass"}],RewardData:[function(e,t,i){"use strict";cc._RF.push(t,"f0c07HS0Y5NG7ILom1Cqpzi","RewardData"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=function(){function e(){}return e.prototype.parser=function(e){this.type=e.readInt(),this.id=e.readInt(),this.count=e.readInt()},e.getCurrencyName=function(t){return e.CURRENCY_NAME[t]},e.getCurrencyRes=function(t){return e.CURRENCY_RES[t]},e.CURRENCY_NAME={0:"\u7ecf\u9a8c",1:"\u91d1\u5e01",2:"\u5143\u5b9d",3:"\u58f0\u671b",4:"\u7cbe\u70bc\u77f3",5:"\u516c\u4f1a\u8d21\u732e",6:"\u516c\u4f1a\u8d44\u91d1",7:"\u529f\u52cb",8:"\u6210\u5c31",9:"\u6218\u7eb9\u7cbe\u534e",10:"\u6218\u7eb9\u788e\u7247",11:"\u4f4e\u7ea7\u7b26\u6587\u788e\u7247",12:"\u9ad8\u7ea7\u7b26\u6587\u788e\u7247",13:"\u795e\u5175\u7ecf\u9a8c",14:"\u5a01\u671b",15:"\u7b79\u7801",16:"\u517d\u795e\u7cbe\u9b44",99:"\u5143\u5b9d"},e.CURRENCY_RES={1:"ZSgold",2:"ZScoin",3:"ZSshengwang",4:"ZSlingpo",0:"result_json.ZSexp",5:"ZSguildgx",6:"ZSguildfund",8:"ZSchengjiu",99:"ZScoin",7:"ZShonor",9:"500007_png",10:"500008_png",11:"hejisuipian",12:"hejisuipian1",13:"ZSexp",14:"ZSprestige",15:"ZSchip",16:"SSExp"},e}();i.default=a,function(e){e[e.Exp=0]="Exp",e[e.Glod=1]="Glod",e[e.Yb=2]="Yb",e[e.Shengwang=3]="Shengwang",e[e.Lingpo=4]="Lingpo",e[e.GuildContribute=5]="GuildContribute",e[e.GuildGold=6]="GuildGold",e[e.Feats=7]="Feats",e[e.Recharge=99]="Recharge"}(n||(n={})),cc._RF.pop()},{}],RichManBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"653399YvVxFFIZnAzOIGqVM","RichManBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],RichManGridConfig:[function(e,t,i){"use strict";cc._RF.push(t,"60fddVozlxFEoEiyA+cq5od","RichManGridConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],RichManRoundAwardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"89fa6oilR9JxbUYUdrKroxH","RichManRoundAwardConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],RingIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"e6535EneoJH2oXxlS/JWCWD","RingIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../fb/UserFb"),r=e("../../specialring/SpecialRing"),s=e("../../bag/UserBag"),u=e("../../../consts/SystemConst"),l=e("../../opensystem/OpenSystem"),c=e("../../../manager/GlobalConfig"),d=e("../../tips/UserTips"),f=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postGuanqiaInfo,o.default.ins().postGuanKaIdChange,r.default.ins().postActiveRing],n.updateMessage=[r.default.ins().postActiveRing,s.default.ins().postItemDel,s.default.ins().postItemAdd],n}return __extends(t,e),t.prototype.checkShowIcon=function(){var e=l.default.ins().checkSysOpen(u.SystemType.RING);if(e){var t=Object.keys(c.default.ActorExRingConfig).length;e=r.default.ins().ringActiNum<t}return e},t.prototype.checkShowRedPoint=function(){return r.default.ins().checkHaveUpRing()?1:0},t.prototype.getEffName=function(){},t.prototype.tapExecute=function(){r.default.ins().checkRingOpen()?ViewManager.ins().open(RingInfoView):d.default.ins().showTips("\u6fc0\u6d3b\u795e\u5668 \u795e\u9f99\u4e4b\u6212 \u540e\u5f00\u542f")},t}(n.default);i.default=f,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../fb/UserFb":"UserFb","../../opensystem/OpenSystem":"OpenSystem","../../specialring/SpecialRing":"SpecialRing","../../tips/UserTips":"UserTips","./RuleIconBase":"RuleIconBase"}],RingSkillInfo:[function(e,t,i){"use strict";cc._RF.push(t,"dba30g4Iw1NaZztuh4sfQLt","RingSkillInfo"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.position=0,this.skillId=0,this.skillLvl=0,this.isOpen=!1}}();i.default=n,cc._RF.pop()},{}],RobberStartInfo:[function(e,t,i){"use strict";cc._RF.push(t,"0564dOElX1GtoL8jHXa7tX3","RobberStartInfo");cc._RF.pop()},{}],RobberfbConfig:[function(e,t,i){"use strict";cc._RF.push(t,"40313dMriVA45RmNIAskL/G","RobberfbConfig");cc._RF.pop()},{}],RoleAI:[function(e,t,i){"use strict";cc._RF.push(t,"bdf68MbhuxLlqlTKIc+BlNQ","RoleAI"),Object.defineProperty(i,"__esModule",{value:!0});var n,a,o,r=e("../../core/base/BaseClass"),s=e("../module/gamescene/GameLogic"),u=e("../manager/TimerManager"),l=e("../Utils/EgretUtils"),c=e("../base/EntityManager"),d=e("../entity/CharMonster"),f=e("../entity/CharRole"),p=e("../entity/Role"),h=e("../manager/GlobalConfig"),g=e("../module/gamescene/const/SkillEffType"),y=e("../entity/EntityBuff"),v=e("../../core/base/AttributeType"),m=e("../consts/DamageTypes"),b=e("../module/rolewin/UserSkill"),_=e("../module/skill/data/SkillData"),C=e("../consts/skillConst"),I=e("../module/artifact/Artifact"),T=e("../module/godweapon/GodWeaponCC"),S=e("../consts/JobConst"),R=e("../module/gamescene/const/ExAttributeType"),B=e("../entity/SubRoles"),M=e("../base/ObjectPool"),E=e("./ExSkillAiLogic"),D=e("../module/heji/model/HejiUseMgr"),A=e("../../core/utils/DirUtil"),P=e("../map/GameMap"),w=e("../../core/utils/MathUtils"),L=e("../module/loongsoul/JadeNew"),k=e("../module/extremeEquip/ExtremeEquipModel"),F=e("../base/EntityType"),G=e("../module/encounter/Encounter"),x=e("../module/encounter/EncounterFight"),N=e("../module/mine/MineFight"),U=e("../module/gamescene/const/EntityAction"),O=e("../module/fb/UserFb"),H=e("../module/zhanling/model/ZhanLingModel"),j=e("../../core/astar/BresenhamLine"),W=e("../module/task/UserTask"),V=e("../module/sound/SoundUtil"),q=e("../../core/base/ErrorLog"),Z=e("../module/specialring/SpecialRing"),Y=e("../module/specialring/LyMark"),K=e("../module/encounter/EncounterModel"),J=e("../../core/utils/DisplayUtils"),z=e("../module/gamescene/help/DropHelp"),X=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.aiList={},t.zhanlingTime=0,t.zhanlingdelayTime=0,t.isFindDrop=!1,t.isLog=!0,t}return __extends(t,e),t.ins=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return e.ins.call(this,t)},t.prototype.init=function(){this.stop(),this.skillCD={},this.attrCD={},this.attrValue={},this.inited=!0},t.prototype.start=function(){this.isStartAtk=!1,s.default.ins().postHookStateChange(s.default.HOOK_STATE_FIND_ENMENY),this.teamAction={},this.starting||(this.inited||this.init(),this.addAITimer())},t.prototype.togglePause=function(){},t.prototype.stop=function(){for(var e in this.inited&&this.stopAITimer(),this.skillCD={},this.curSkill)this.curSkill[e]&&M.default.push(this.curSkill[e]);this.curSkill={},this.curTarget={},this.lastTarget={},this.skillCastType={},this.skillTargetType={},this.hashHpObj={},this.attrCD={},this.attrValue={}},t.prototype.clearTarget=function(e){if(e&&e.infoModel){var t=e.infoModel.handle;delete this.skillCD[t];var i=this.curSkill[t];for(var n in i&&M.default.push(i),delete this.curSkill[t],delete this.curTarget[t],delete this.lastTarget[t],delete this.skillCastType[t],delete this.skillTargetType[t],this.curTarget)this.curTarget[n]==e&&delete this.curTarget[n];for(var n in this.lastTarget)n+""==t+""&&delete this.lastTarget[n]}},t.prototype.clearAIList=function(){this.aiList={}},t.prototype.clear=function(){this.stop(),this.clearAIList(),this.isFindDrop=!1,u.default.ins().removeAll(this)},t.prototype.destruct=function(){this.skillCD={},this.stop()},Object.defineProperty(t.prototype,"starting",{get:function(){return u.default.ins().isExists(this.startAI,this)},enumerable:!0,configurable:!0}),t.prototype.canAddToAi=function(){return!!P.default.sceneInMain()},t.prototype.add=function(e){this.aiList[e.infoModel.handle]=e},t.prototype.remove=function(e){delete this.aiList[e.infoModel.handle]},t.prototype.getAIList=function(){return this.aiList},t.prototype.startAI=function(){var e=this.aiList,i=["0","\u6218\u58eb","\u6cd5\u5e08","\u9053\u58eb"],r=c.default.ins().getNoDieRole(),u=0;for(var d in e){var v=e[d],_=void 0,C=v instanceof f.default,I=v.infoModel.handle,T=(C&&v.infoModel.job,v.buffList),S=!1;for(var R in T){if(v.AI_STATE==o.Die)break;if(((V=T[R]).effConfig.type==g.SkillEffType.AddBlood||V.effConfig.type==g.SkillEffType.AdditionalDamage)&&V.isExecute()){V.step++;var L=this.hramedDie(v,V.value);L&&(v.AI_STATE=o.Die),this.showHram(L,m.DamageTypes.HIT,v,V.source,V.value,"buff\u4f24\u5bb3"+V.effConfig.id),V.step>=V.count&&v.removeBuff(V)}V.canRemove()?v.removeBuff(V):V.isCanotHit()&&(S=!0)}if(!S&&(v.AI_STATE!=o.Die&&!v.isHardStraight)){if(v.infoModel.team==n.My&&b.default.ins().hejiLevel>0&&b.default.ins().hejiEnable&&v.infoModel instanceof p.default){if(r&&v.infoModel.handle==r.infoModel.handle){_=this.curTarget[I];var k=b.default.ins().getHejiSkillId();if(b.default.ins().fieldUse&&0!=k.id&&_&&_.team!=n.My&&_.AI_STATE!=o.Die)if(c.default.ins().screeningTargetByPos(v,!1,k.affectCount,k.castRange,this.aiList).length){if(this.useSkill(v,_,k),E.default.ins().checkHJTrigger(v,[_]),b.default.ins().fieldUse=!1,ne=h.default.EffectsConfig[k.selfEff[0]]?h.default.EffectsConfig[k.selfEff[0]]:null)for(var F=B.default.ins().subRolesLen,x=0;x<F;x++){if(W=c.default.ins().getMainRole(x))(V=M.default.shift(y.default)).effConfig=ne,V.addTime=l.default.getTimer(),V.endTime=V.addTime+ne.duration,V.count=ne.duration/ne.interval>>0,V.step=0,V.source=W,W.addBuff(V),W.stopMove(),W!=r&&W.playAction(U.EntityAction.STAND),W.AI_STATE=o.Stand}continue}}}else if(v.infoModel.team==n.WillEntity&&D.default.ins().canUse()){_=this.curTarget[I];var N=D.default.ins().getMaster();if(_&&_.team==n.My&&N==v)if((k=D.default.ins().getSkillData())&&_.AI_STATE!=o.Die)if(c.default.ins().screeningTargetByPos(v,!1,k.affectCount,k.castRange,this.aiList).length){if(this.useSkill(v,_,k),D.default.ins().useSuccess(),ne=h.default.EffectsConfig[k.selfEff[0]]?h.default.EffectsConfig[k.selfEff[0]]:null)for(var H=D.default.ins().getRoles(),j=(F=H.length,0);j<F;j++){var W,V;if(W=c.default.ins().getEntityByHandle(H[j].handle))(V=M.default.shift(y.default)).effConfig=ne,V.addTime=l.default.getTimer(),V.endTime=V.addTime+ne.duration,V.count=ne.duration/ne.interval>>0,V.step=0,V.source=W,W.addBuff(V),W.stopMove(),W!=N&&W.playAction(U.EntityAction.STAND),W.AI_STATE=o.Stand}continue}}if(e[I]){if(C){if(v.publicCD&&l.default.getTimer()-v.publicCD<=800)continue}else if(v.publicCD&&l.default.getTimer()-v.publicCD<=800)continue;if(!t.ins().isFindDrop||v.team!=n.My||!r||v.infoModel.handle!=r.infoModel.handle)switch(v.AI_STATE){case o.Stand:this.screeningSkill(I);var q=!1,Z=!1;if(this.curSkill[I]||(q=!0),!q&&this.checkCanScreeningTarget(v,this.curSkill[I],this.curTarget[I])&&(v.team==n.WillEntity?this.screeningTarget(v,9):this.screeningTarget(v)),v.team==n.My&&v!=r&&r&&w.default.getDistance(v.x,v.y,r.x,r.y)>250){var Y=this.curTarget[r.infoModel.handle];Y&&Y.AI_STATE!=o.Die&&this.curSkill[I]&&this.curSkill[I].targetType==a.Enemy&&Y.team!=n.My?this.curTarget[I]=Y:Z=!0}if(q||Z){if(v.team==n.My&&v!=r&&r){var J=r;if(v.infoModel.masterHandle){var z=c.default.ins().getEntityByHandle(v.infoModel.masterHandle);z&&(J=z)}var X=[1,-1];2==c.default.ins().getTeamCount(n.My)&&(X=[0]);var Q=A.default.getGridByDir(J.dir+X[u]!=null?X[u]:0);u+=1,P.default.moveEntity(v,J.x+Q.x,J.y+Q.y)}continue}if(!this.curTarget[I])continue;this.tryUseSkill(v)?v.AI_STATE=o.Atk:(v.team==n.My||v.team==n.WillEntity||v.team==n.Faker||this.teamAction[v.team])&&(P.default.moveEntity(v,this.curTarget[I].x,this.curTarget[I].y),v.AI_STATE=o.Run);break;case o.Run:if(_=this.curTarget[I],v.team==n.My&&(O.default.ins().canChallengGuanQia=!0),!_||_.AI_STATE==o.Die){v.stopMove(),v.playAction(U.EntityAction.STAND),v.AI_STATE=o.Stand,delete this.curTarget[I];continue}if(v.team==n.Faker){var $=G.default.ins().wildPersonList[v.infoModel.masterHandle];if(!$)continue;var ee=K.default.countKillNumByMarster(v.infoModel.masterHandle),te=w.default.getDistance(v.x,v.y,$.backX,$.backY);if($&&1==$.actionType&&ee>=$.killNum){te<10?(c.default.ins().removeByHandle(v.infoModel.masterHandle),G.default.ins().RunAwary(v.infoModel.masterHandle),G.default.ins().sendCleanWildPeople($.index)):P.default.moveEntity(v,$.backX,$.backY);continue}}this.tryUseSkill(v)&&(v.stopMove(),v.AI_STATE=o.Atk),v.action==U.EntityAction.STAND&&(v.AI_STATE=o.Stand);break;case o.Atk:if(this.isStartAtk||s.default.ins().postHookStateChange(s.default.HOOK_STATE_HOOK),this.isStartAtk=!0,!(_=this.curTarget[I])||_.AI_STATE==o.Die){v.AI_STATE=o.Stand,delete this.curTarget[I];continue}if(this.teamAction[_.team]=!0,v.atking)continue;if(!(k=this.curSkill[I]))continue;this.skillCD[I][k.id]=l.default.getTimer(),this.skillCastType[I]=k.castType,this.skillTargetType[I]=k.targetType,v.atking=!0,v.team==n.My&&(O.default.ins().canChallengGuanQia=!1),v.publicCD=l.default.getTimer(),s.default.skyBallCheck(v),k.effectId,this.useSkill(v,_,k),delete this.curSkill[I];break;case o.Patrol:var ie=v.infoModel.configID,ne=O.default.ins().guanqiaMonster[ie];v.infoModel.isWander&&ne.attrange&&(this.screeningTarget(v,ne.attrange),this.curTarget[v.infoModel.handle]?v.AI_STATE=o.Stand:v.startPatrol())}}}}},t.prototype.checkShowZhanling=function(){if(this.zhanlingTime=l.default.getTimer(),P.default.sceneInMain()){var e=H.default.ins().ZhanLingSkinId;if(H.default.ins().getZhanLingDataById(0)){var t=c.default.ins().getNoDieRole();if(t){var i=H.default.ins().getZhanLingDataById(0).level;t.showZhanling(e,i),E.default.ins().checkWarSpiritBubbleTrigger()}}}},t.prototype.checkCanScreeningTarget=function(e,t,i){if(!i||!i.parent||i.AI_STATE==o.Die)return!0;var n=e.infoModel.handle;return void 0==this.skillCastType[n]&&void 0==this.skillTargetType[n]||(this.skillCastType[n]!=t.castType||this.skillTargetType[n]!=t.targetType)},t.prototype.getTargetMonsterPoint=function(e,t){if(e.x==t.x)return t;var i=(t.y-e.y)/(t.x-e.x),n=t.x,a=t.y;return Math.abs(i)<=1?(i<0?a+=Math.floor(60*Math.random()):a-=Math.floor(60*Math.random()),n+=Math.floor(20*Math.random())):(i<0?n+=Math.floor(60*Math.random()):n-=Math.floor(60*Math.random()),a+=Math.floor(20*Math.random())),{x:n,y:a}},t.prototype.useUnitionSkill=function(){},t.prototype.useSkill=function(e,t,i){var r,u,d,p,g=this,S=(i.tarEff&&h.default.EffectsConfig[i.tarEff[0]],i.selfEff?h.default.EffectsConfig[i.selfEff[0]]:null),B=i.castType==C.castType.Self?e:t,D=0,A=!1,L=e.infoModel;e.team==n.My&&((u=I.default.ins().getReviseBySkill(i.id))&&(D=u.crit),(p=T.default.ins().getReviseBySkill(i.id))&&(d=p[0]),d&&(D=d.crit));var k=i.affectCount;if(u&&u.affectCount&&(k+=u.affectCount),d&&d.affectCount&&(k+=d.affectCount),i.castType==C.castType.SelfHpLess){r=c.default.ins().screeningTargetByPos(e,!0,0,Number.MAX_VALUE,this.aiList);for(var O=0;O<r.length;O++)if(r[O].isCanAddBlood){r[0]=r[O];break}}else 0==(r=i.castType!=C.castType.Other&&i.targetType==a.Enemy?c.default.ins().screeningTargetByPos(B,!1,k,i.affectRange,this.aiList):k>1?c.default.ins().screeningTargetByPos(B,B.team==t.team,k,i.affectRange,this.aiList):[t]).length&&(r=[t]);i.preId&&h.default.FlameStamp.skillId.indexOf(i.preId)>=0&&(A=!0);for(var H=!1,j=r.length=Math.min(r.length,k),W=[],V=0;V<j;V++){var q=r[V],Z=q.infoModel,Y=!1,K=0==V;if(q.team!=e.team){var J=void 0;(s.default.triggerAttr(e,v.AttributeType.atStunPower)||90005==i.id)&&((J=M.default.shift(y.default)).effConfig=h.default.EffectsConfig[51001],J.value=L.getAtt(v.AttributeType.atStunTime),J.addTime=l.default.getTimer(),J.endTime=J.addTime+J.value,q.addBuff(J),q.stopMove(),q.AI_STATE=o.Stand),s.default.triggerExAttr(e,R.ExAttributeType.eatDeathCurseProbability)&&((J=M.default.shift(y.default)).effConfig=h.default.EffectsConfig[52001],J.addTime=l.default.getTimer(),J.endTime=J.effConfig.args.d?L.attributeExData[R.ExAttributeType.eatDeathCurseTime]:J.effConfig.duration,q.addBuff(J),e.addPaoPao(3),Y=!0),s.default.triggerExAttr(e,R.ExAttributeType.eatAttackAddHpProbability)}var z=b.default.ins().isHejiSkill(i.configID),X=!1,Q=!1,$=!1,ee=!1,te=!1,ie=0;if(3!=i.calcType&&(Q=s.default.triggerMiss(e,q)),Q)ie=0;else{if(ie=this.damageBaseCalculation(e,q,i),3!=i.calcType){s.default.triggerExAttr(e,R.ExAttributeType.eatMultipleCrit)&&(ie*=L.getExAtt(R.ExAttributeType.eatMultipleCritCoeff)/1e4,ie+=L.getExAtt(R.ExAttributeType.atMultipleCritHurt),e.addPaoPao(21)),X=s.default.triggerCrit(e,q,D),e.hasBuff(b.SkillConst.EFF_SKY_BALL)&&(e.addPaoPao(6),X=!0);var ne=0,ae=1;if(X){H=!0;var oe=L.getAtt(v.AttributeType.atCritEnhance);d&&d.critDamage&&(oe+=d.critDamage);var re=L.getExAtt(R.ExAttributeType.eatCritHpLt);Z.getAtt(v.AttributeType.atHp)/Z.getAtt(v.AttributeType.atMaxHp)<=re/1e4&&(oe+=L.getExAtt(R.ExAttributeType.eatCritHpLtAddDamage)),ae+=oe/1e4,ne+=L.getAtt(v.AttributeType.atCritHurt)}var se={};se[v.AttributeType.atDeadLyPro]=s.default.calculateRealAttribute(e,v.AttributeType.atDeadLyPro,e),(te=s.default.triggerAttr(e,v.AttributeType.atDeadLyPro,se))&&(ae+=.5+(L.getAtt(v.AttributeType.atDeadLyMaster)-Z.getAtt(v.AttributeType.atDeadLyResist))/1e4),(se={})[v.AttributeType.atHunGuPro]=s.default.calculateRealAttribute(e,v.AttributeType.atHunGuPro,e),this.tryTriggerHungu(e)&&(ae+=L.getAtt(v.AttributeType.atHunGuHurt)/1e4),this.tryTriggerHeart(e)&&(ae+=L.getAtt(v.AttributeType.atHearthHurt)/1e4,ne+=L.getAtt(v.AttributeType.atHearthDamege)),ie=ie*ae+ne,Y&&(ie*=1+L.attributeExData[R.ExAttributeType.eatDeathCurseDamageIncrease]/1e4),K||i.targetType!=a.Enemy||(Z.type==F.EntityType.Role?ie*=i.herdPlayerRate/100:ie*=i.herdMonRate/100),e.isMy&&L.type==F.EntityType.Role&&t.infoModel.type==F.EntityType.Role&&(G.default.ins().isEncounter()?x.default.ins().getIsWeiShe(e.isMy)&&($=!0):N.default.ins().isFighting&&N.default.ins().getIsWeiShe(e.isMy)&&($=!0)),ie=this.damageBuff(e,q,ie),ie+=L.getAtt(v.AttributeType.atHolyDamege)*(1+L.getAtt(v.AttributeType.atHolyMaster)/1e4-Z.getAtt(v.AttributeType.atHolyResist)/1e4),(ee=s.default.triggerAttr(e,v.AttributeType.atZhuiMingPro))&&(ie+=L.getAtt(v.AttributeType.atZhuiMingVal)),ie*=1-L.getAtt(v.AttributeType.neigongAbsorbHurt)/1e4}ie>>=0,e.team==q.team&&ie>0&&(ie=0)}q instanceof f.default||q.AI_STATE==o.Patrol&&(q.stopMove(),q.playAction(U.EntityAction.STAND),q.AI_STATE=o.Stand);var ue=this.hramedDie(q,ie);ue&&(q.AI_STATE=o.Die,E.default.ins().checkDieTrigger(e,[q]));var le=0;if(e.team==n.My&&(z?le=m.DamageTypes.Heji:Q?le=m.DamageTypes.Dodge:X&&(le|=m.DamageTypes.CRIT),$&&(le|=m.DamageTypes.Deter),ee&&(le|=m.DamageTypes.ZhuiMing),te&&(le|=m.DamageTypes.ZhiMing)),e.team!=q.team&&5==i.calcType){for(var ce=ie/5>>0,de=ce*w.default.limit(0,.05)>>0,fe=ce*w.default.limit(0,.05)>>0,pe=[ce-de,ce+de,ce-fe,ce+fe,ie-4*ce],he=[],ge=0;ge<pe.length;ge++)he.push({isDie:ue,damageType:m.DamageTypes.Fujia,ttarget:q,hramValue:pe[ge]});W.push(he)}else{if(W.push([{isDie:ue,damageType:le,ttarget:q,hramValue:ie}]),e.team!=q.team&&s.default.triggerAttr(e,v.AttributeType.atAttPerDamPan))ue=this.hramedDie(q,ie>>1),e.addPaoPao(20),W[W.length-1].push({isDie:ue,damageType:m.DamageTypes.Fujia,ttarget:q,hramValue:ie>>1})}q.myKill=q.myKill||e.isMy,(e.isMy||e.team==n.WillEntity)&&(q.showBlood(!0),q.showName(!0)),q.isMy&&(e.showBlood(!0),e.showName(!0))}var ye=P.default.fbType,ve=P.default.fubenID,me=0;s.default.ins().playSkillEff(i,e,r,function(a){if(P.default.fbType==ye&&ve==P.default.fubenID){var o=0;for(var s in r){var l=r[s],h=(l.infoModel,W[s][W[s].length-1].isDie);B==l&&(o=W[s][0].damageType);for(var v=0,m=0;m<W[s].length;m++){var b=W[s][m];v+=b.hramValue,g.showHram(b.isDie,b.damageType,l,e,b.hramValue,i.name)}if(e.team==n.My&&l.team==n.WillEntity&&x.default.ins().willEntityFightTeam!=n.My){x.default.ins().willEntityFightTeam=n.My;for(var C=0,I=c.default.ins().getEntityByTeam(n.WillEntity);C<I.length;C++){var T=I[C];g.curTarget[T.infoModel.handle]=null,g.lastTarget[T.infoModel.handle]=null}}if(l.shakeIt(),!h){var R=i.tarEff;B!=l&&l.infoModel.type==F.EntityType.Role&&(R=i.otarEff||R);for(var M=0;R&&M<R.length;M++){var E=g.getArgs(R[M],u,d),D=y.default.createBuff(R[M],e,E);l.addBuff(D)}u&&g.addTargetReviseSkillEffect(l,e,u),d&&g.addTargetReviseSkillEffect(l,e,d),p&&p[1]&&g.addTargetReviseSkillEffect(l,e,p[1]),l instanceof f.default&&g.tryUseWingSkill(l,i,!0),g.tryUsePassiveSkill(e,l,!0,W[s][0].damageType),g.tryUseWeaponSkill(l,i,!0),g.tryTriggerMijiBuqu(l)}g.showBuffHarm(e,l,i,v)}if(S)for(M=0;i.selfEff&&M<i.selfEff.length;M++){E=g.getArgs(i.selfEff[M],u,d),D=y.default.createBuff(i.selfEff[M],e,E);e.addBuff(D)}if(u&&g.addSelfReviseSkillEffect(e,u),d&&g.addSelfReviseSkillEffect(e,d),p&&p[1]&&g.addSelfReviseSkillEffect(e,p[1]),e instanceof f.default&&g.tryUseWingSkill(e,i,!1),g.tryUsePassiveSkill(e,B,!1,o),g.tryTriggerHeirloomSkill(e,r,W),A&&g.tryUseYlPassiveSkill(e,B,i),80002==i.configID&&g.petTryUsePassiveSkill(e,!1),i.otherSkills){var w=i.otherSkills.concat(),L=new _.default(w[me]);return L.preId=i.configID,g.useSkill(e,t,L),void(me+=1)}}}),e.AI_STATE=o.Stand,e.atking=!1,H&&L.getExAtt(R.ExAttributeType.eatMiJiZHDamPer)&&this.checkTriggerAttr(e,1,R.ExAttributeType.eatMiJiZHTime,1),this.repel(e,t,i)},t.prototype.repel=function(e,t,i){if(i&&i.repelDistance){t.stopMove(),t.playAction(U.EntityAction.STAND);var n=t.infoModel.handle;delete this.curTarget[n];var a=w.default.getAngle(w.default.getRadian2(e.x,e.y,t.x,t.y)),o=w.default.getDirMove(a,i.repelDistance);o.x=t.x+o.x,o.y=t.y+o.y;var r=j.default.isAbleToThrough(P.default.point2Grip(t.x),P.default.point2Grip(t.y),P.default.point2Grip(o.x),P.default.point2Grip(o.y));0==r[0]&&(r[1]>3&&debug.error("\u901a\u8fc7\u683c\u5b50\u8d85\u8fc73\u4e2a\uff0c\u68c0\u67e5\u662f\u5426\u6709\u5f02\u5e38"+r[2]+","+r[3],o),P.default.point2Grip(t.x)==r[2]&&P.default.point2Grip(t.y)==r[3]?(o.x=t.x,o.y=t.y):(o.x=P.default.grip2Point(r[2]),o.y=P.default.grip2Point(r[3]))),o.x=Math.max(Math.min(o.x,P.default.MAX_WIDTH),0),o.y=Math.max(Math.min(o.y,P.default.MAX_HEIGHT),0);var s=o.x-t.x,u=o.y-t.y,l=(Math.sqrt(s*s+u*u),e.moveSpeed,h.default.EffectsConfig[i.tarEff[0]].duration);t.addHardStraight(l),1==i.teleport&&(i&&""!=i.actionType&&e.playAction(i.actionType),e.stopMove())}},t.prototype.checkTriggerAttr=function(e,t,i,n,a){if(void 0===n&&(n=1),void 0===a&&(a=0),Math.random()<n){var o=e.infoModel,r=o.handle,s=this.attrCD[r]=this.attrCD[r]||{},u=t+"_"+i,c=a||(0==t?o.getAtt(i):o.getExAtt(i)),d=s[u]||0,f=l.default.getTimer();if(d&&f-d<c)return;s[u]=f,(this.attrValue[r]=this.attrValue[r]||{})[u]=1}},t.prototype.getIsTriggerAttr=function(e,t,i,n){void 0===n&&(n=0);var a=e.infoModel,o=this.attrValue[a.handle];if(o){var r=t+"_"+i,s=o[r];return o[r]=n,s}return 0},t.prototype.addSelfReviseSkillEffect=function(e,t){if(t.selfEff)for(var i in t.selfEff){if(h.default.EffectsConfig[t.selfEff[i]]?h.default.EffectsConfig[t.selfEff[i]]:null){var n=this.getArgs(t.selfEff[i],t,null),a=y.default.createBuff(t.selfEff[i],e,n);e.addBuff(a)}}},t.prototype.addTargetReviseSkillEffect=function(e,t,i){if(i.targetEff)for(var n in i.targetEff){if(h.default.EffectsConfig[i.targetEff[n]]?h.default.EffectsConfig[i.targetEff[n]]:null){var a=this.getArgs(i.targetEff[n],i,null),o=y.default.createBuff(i.targetEff[n],t,a);e.addBuff(o)}}},t.prototype.tryUsePassiveSkill=function(e,t,i,n){void 0===i&&(i=!1),void 0===n&&(n=0);var o=i?t:e,r=i?e:t;if(o instanceof f.default){var u=this.getCanUseSkillList(o,!1);if(!u||0==u.length)return;for(var d=[],p=0,h=u;p<h.length;p++){var g=h[p],y=g.config.passive;if(!(y.p1&&o.infoModel.getAtt(v.AttributeType.atHp)/o.infoModel.getAtt(v.AttributeType.atMaxHp)>y.p1/1e4))switch(y.cond){case 0:i||s.default.triggerValue(y.rate)&&d.push(g);break;case 1:i&&s.default.triggerValue(y.rate)&&d.push(g);break;case 2:i||(n&m.DamageTypes.CRIT)!=m.DamageTypes.CRIT||s.default.triggerValue(y.rate)&&d.push(g);break;case 3:i&&(n&m.DamageTypes.CRIT)==m.DamageTypes.CRIT&&s.default.triggerValue(y.rate)&&d.push(g)}}if(!d.length)return;for(var b=0,_=d;b<_.length;b++){var C=_[b],I=void 0;if(C.targetType!=a.Enemy)I=o;else if(r&&r.infoModel.getAtt(v.AttributeType.atHp)>0)I=r;else{var T=c.default.ins().screeningTargetByPos(o,!1,0,C.affectRange,this.aiList);I=T&&T[0]}if(I){var S=o.infoModel.handle;this.skillCD[S]=this.skillCD[S]||{},this.skillCD[S][C.id]=l.default.getTimer(),this.useSkill(o,I,C)}}}},t.prototype.tryUseWarSpiritSkill=function(e,t,i){var n,o=M.default.shift(_.default);(o.configID=t,o.targetType!=a.Enemy)?n=e:n=c.default.ins().screeningTargetByPos(e,!1,0,o.affectRange,this.aiList)[0];if(n){var r=e.infoModel.handle;this.skillCD[r]=this.skillCD[r]||{},this.skillCD[r][o.id]=l.default.getTimer(),this.useSkill(e,n,o)}},t.prototype.tryUseWingSkill=function(e,t,i){var n=this.checkWingEffect(e,t,i);if(n.length)for(var o=0,r=n;o<r.length;o++){var s=r[o],u=M.default.shift(_.default);u.configID=s;var d=void 0;if(u.targetType!=a.Enemy)d=e;else d=c.default.ins().screeningTargetByPos(e,!1,0,u.affectRange,this.aiList)[0];if(d){var f=e.infoModel.handle;this.skillCD[f]=this.skillCD[f]||{},this.skillCD[f][u.id]=l.default.getTimer(),this.useSkill(e,d,u)}}},t.prototype.checkWingEffect=function(e,t,i){void 0===i&&(i=!1);var n=e.infoModel.wingSkillData,a=[];if(t.isPassive)return a;for(var o=this.skillCD[e.infoModel.handle],r=0,u=n;r<u.length;r++){var c=u[r],d=M.default.shift(_.default);d.configID=c,o&&o[d.id]&&l.default.getTimer()-o[d.id]<d.cd||(0!=d.config.passive.cond||i?1==d.config.passive.cond&&i&&s.default.triggerValue(d.config.passive.rate)&&a.push(c):s.default.triggerValue(d.config.passive.rate)&&a.push(c))}return a},t.prototype.tryUseYlPassiveSkill=function(e,t,i){var n=e.infoModel;if(n.lyMarkLv&&n.lyMarkSkills)for(var a=0;a<n.lyMarkSkills.length;a++){var o=n.lyMarkSkills[a]||0;if(o){var r,u=h.default.FlameStampEffect[a+1][o];if(u.effId)if((r=h.default.EffectsConfig[u.effId]).probabilityBuff&&s.default.triggerValue(r.probabilityBuff)){var l=y.default.createBuff(u.effId,e);t.addBuff(l)}if(u.selfEffId)if((r=h.default.EffectsConfig[u.selfEffId]).probabilityBuff&&s.default.triggerValue(r.probabilityBuff)){l=y.default.createBuff(u.selfEffId,e);e.addBuff(l)}}}},t.prototype.tryTriggerHeirloomSkill=function(e,t,i){var n=null,a=-1,o=0,r=e.infoModel.handle;for(var u in t){var c=t[u],d=c.infoModel.handle;if(e.team!=c.team&&(-1==a&&(a=0,(!this.skillCD[r]||!this.skillCD[r][6666601]||l.default.getTimer()-this.skillCD[r][6666601]>=5e3)&&s.default.triggerAttr(e,v.AttributeType.atVamirePro)&&(a=1,this.skillCD[r]=this.skillCD[r]||{},this.skillCD[r][6666601]=l.default.getTimer())),c instanceof f.default&&!e.hasBuff(80004)&&!n&&(!this.skillCD[d]||!this.skillCD[d][80004]||l.default.getTimer()-this.skillCD[d][80004]>=5e3)&&s.default.triggerAttr(c,v.AttributeType.atCursePro))){var p=[80004,80005,80006,80007][c.infoModel.heirloom.getInfoBySolt(2).lv-1];(n=M.default.shift(y.default)).effConfig=h.default.EffectsConfig[p],n.value=n.effConfig.args.a,n.addTime=l.default.getTimer(),n.endTime=n.addTime+n.effConfig.duration,e.addBuff(n),c.addPaoPao(13),this.skillCD[d]=this.skillCD[d]||{},this.skillCD[d][80004]=l.default.getTimer()}}if(1==a){e.addPaoPao(14);for(var g=0,m=i;g<m.length;g++){var b=m[g];0==o&&(o=Math.floor(e.infoModel.getAtt(v.AttributeType.atVamirePen)/1e4*b[0].hramValue))}this.hramedDie(e,-o),this.showHram(!1,1,e,e,-o)}},t.prototype.tryUseWeaponSkill=function(e,t,i){if(e.AI_STATE!=o.Die&&!(e.getRealHp()<=0)&&i){if(s.default.triggerAttr(e,v.AttributeType.atBeAttAddHpPro)){e.addPaoPao(16);var n=e.infoModel.getAtt(v.AttributeType.atBeAttAddHpVal);this.hramedDie(e,-n),this.showHram(!1,1,e,e,-n)}if(e.infoModel.getAtt(v.AttributeType.atHpLtAddBuff)&&e.infoModel.getAtt(v.AttributeType.atHp)/e.infoModel.getAtt(v.AttributeType.atMaxHp)<e.infoModel.getAtt(v.AttributeType.atHpLtAddBuff)/1e4){var a=this.skillCD[e.infoModel.handle],r=h.default.EffectsConfig[e.infoModel.getExAtt(R.ExAttributeType.eatHpLtAddBuffId)];if(a&&a[R.ExAttributeType.eatHpLtAddBuffId]&&l.default.getTimer()-a[R.ExAttributeType.eatHpLtAddBuffId]<e.infoModel.getExAtt(R.ExAttributeType.eatHpLtAddBuffCd))return;e.addPaoPao(18);var u=M.default.shift(y.default);u.effConfig=r,u.value=u.effConfig.args.a,u.addTime=l.default.getTimer(),u.endTime=u.addTime+u.effConfig.duration,e.addBuff(u),this.skillCD[e.infoModel.handle]=this.skillCD[e.infoModel.handle]||{},this.skillCD[e.infoModel.handle][R.ExAttributeType.eatHpLtAddBuffId]=l.default.getTimer()}}},t.prototype.tryTriggerMijiBuqu=function(e){var t=e.infoModel;if(t.getExAtt(R.ExAttributeType.eatMiJiBQBuffId)&&(t.getAtt(v.AttributeType.atHp)/t.getAtt(v.AttributeType.atMaxHp)*1e4<t.getExAtt(R.ExAttributeType.eatMiJiBQHpPer)&&(this.checkTriggerAttr(e,1,R.ExAttributeType.eatMiJiBQHpTime,1),this.getIsTriggerAttr(e,1,R.ExAttributeType.eatMiJiBQHpTime)))){var i=y.default.createBuff(t.getExAtt(R.ExAttributeType.eatMiJiBQBuffId),e);e.addBuff(i),e.addPaoPao(23)}},t.prototype.tryTriggerHungu=function(e){var t=e.infoModel.getAtt(v.AttributeType.atHunGuPro);if(t){this.checkTriggerAttr(e,0,v.AttributeType.atHunGuCd,t/1e4);var i=this.getIsTriggerAttr(e,0,v.AttributeType.atHunGuCd);return i&&BubbleFactory.ins().playBubbleEffect(24),i}},t.prototype.tryTriggerHeart=function(e){if(e.infoModel.getAtt(v.AttributeType.atHearthCount)){this.checkTriggerAttr(e,0,v.AttributeType.atHearthCount,1,8e3);var t=this.getIsTriggerAttr(e,0,v.AttributeType.atHearthCount);return t&&BubbleFactory.ins().playBubbleEffect(25),t}},t.prototype.petTryUsePassiveSkill=function(e,t){void 0===t&&(t=!0);var i=e.infoModel.masterHandle,n=c.default.ins().getEntityByHandle(i);if(n&&n.infoModel&&n.infoModel.getExAtt(R.ExAttributeType.eatPetSkillLevel)){for(var o=36e3+n.infoModel.getExAtt(R.ExAttributeType.eatPetSkillLevel),r=[],u=0,d=[new _.default(o)];u<d.length;u++){var f=d[u];0!=f.config.passive.cond||t?1==f.config.passive.cond&&t&&s.default.triggerValue(f.config.passive.rate)&&r.push(f):s.default.triggerValue(f.config.passive.rate)&&r.push(f)}if(!r.length)return;for(var p=0,h=r;p<h.length;p++){var g=h[p],y=void 0;if(g.targetType!=a.Enemy)y=e;else y=c.default.ins().screeningTargetByPos(e,!1,0,g.affectRange,this.aiList)[0];if(y){var v=e.infoModel.handle;this.skillCD[v]=this.skillCD[v]||{},this.skillCD[v][g.id]=l.default.getTimer(),this.useSkill(e,y,g)}}}},t.prototype.showBuffHarm=function(e,t,i,n){var a=s.default.calculateRealAttribute(t,v.AttributeType.atAddEnemyHp,e);a>0&&(a=-a,this.hramedDie(e,a),e instanceof f.default&&this.showHram(!1,m.DamageTypes.BLANK,e,e,a));var o=s.default.calculateRealAttribute(e,v.AttributeType.atHurtMyself,t);if(o){var r=Math.floor(n*o/1e4),u=this.hramedDie(e,r);this.showHram(u,m.DamageTypes.BLANK,e,t,r)}},t.prototype.hramedDie=function(e,t){var i=e.infoModel.getAtt(v.AttributeType.atHp)-t;if(t<0){var a=e.infoModel.getAtt(v.AttributeType.atMaxHp);i=i>a?a:i}return e.team==n.My&&f.default,e.infoModel.setAtt(v.AttributeType.atHp,i),e.infoModel.getAtt(v.AttributeType.atHp)<=0},t.prototype.showHram=function(e,i,a,r,l,p){var h=this;if(void 0===p&&(p=""),a&&a.infoModel)if(a.hram(l),s.default.ins().postEntityHpChange(a,r,i,l),e){if(a.removeAllFilters(),a.stopMove(),a.playAction(U.EntityAction.HIT),a.myKill&&!(a instanceof f.default)){var g=W.default.ins().taskTrace;if(g){var y=W.default.ins().getAchieveConfById(g.id);y&&y.type==t.SEND_TASK_TYPE&&O.default.ins().sendKillMonster(a.infoModel.configID)}}if(!a.hasBuff(52001)&&s.default.triggerExAttr(a,R.ExAttributeType.eatGodBlessProbability)){a.AI_STATE=o.Stand,a.removeAllBuff();var m=a.infoModel.getAtt(v.AttributeType.atMaxHp)*a.infoModel.attributeExData[R.ExAttributeType.eatGodBlessRate]/1e4;a.infoModel.setAtt(v.AttributeType.atHp,m),a.hram(-m),console.info("\u590d\u6d3b\u540e\u5269\u4f59\u8840\u91cf"+a.getHP()),a.addPaoPao(7)}else if(console.info(a.infoModel.handle+" -- \u6b7b\u4ea1\uff0c\u7b49\u5f85\u5220\u9664\u5f62\u8c61"),r&&r.team==n.My&&this.checkPlayDieSound(a),u.default.ins().doTimer(500,1,function(){if((console.info(a.infoModel.handle+" -- \u5220\u9664"),c.default.ins().removeByHandle(a.infoModel.handle,!1,a.myKill&&a.infoModel.type==F.EntityType.Monster),a.infoModel.type==F.EntityType.Role)&&!c.default.ins().getEntityBymasterhHandle(a.infoModel.masterHandle)){var e=c.default.ins().getMasterList(a.infoModel.masterHandle);if(e&&e.length)for(var t=0,i=e;t<i.length;t++){var o=i[t];c.default.ins().removeByHandle(o.infoModel.handle)}}(delete h.hashHpObj[a.hashCode],a.onDead(function(){a.deadDelay(),h.clearTarget(a),a instanceof d.default&&!(a instanceof f.default)?a.destruct():J.default.removeFromParent(a)}),a.team==n.Monster)&&(c.default.ins().getTeamCount(n.Monster)<=O.default.ins().rCount&&s.default.ins().createGuanqiaMonster(!1));h.checkAIend(r,a)},this),a.team==n.Monster){if(c.default.ins().getTeamCount(n.Monster)<=O.default.ins().rCount&&s.default.ins().createGuanqiaMonster(!1),r.team==n.My){var b=c.default.ins().getNoDieRole(),_=a.infoModel.configID==O.default.ins().eliteMonsterId;if(b&&(_||r.infoModel.handle==b.infoModel.handle)&&0==P.default.fubenID){var C=void 0;if(_?C=O.default.ins().eliteRewards.shift():(C=O.default.ins().getRewardsPop(),O.default.ins().rewards=[]),C&&C.length>0){z.default.addCompleteFunc(function(){O.default.ins().sendGetReward(_)},this),z.default.start()}O.default.ins().exp>0&&(!C||0==C.length)&&(O.default.ins().sendGetReward(_),O.default.ins().exp=0)}var I=c.default.ins().screeningTargetByPos(r,!1,0,Number.MAX_VALUE,this.aiList);if(!I||0==I.length)for(var T=0,S=c.default.ins().getEntityByTeam(n.My);T<S.length;T++){(M=S[T]).playAction(U.EntityAction.STAND)}}for(var B in this.curTarget)if(this.curTarget[B]==a){var M;(M=c.default.ins().getEntityByHandle(B))&&M.infoModel&&++M.infoModel.killNum;break}if(r.team==n.Faker){var D=G.default.ins().wildPersonList[r.infoModel.masterHandle],A=K.default.countKillNumByMarster(r.infoModel.masterHandle);D&&1==D.actionType&&A>=D.killNum&&P.default.moveEntity(r,D.backX,D.backY)}}}else a.AI_STATE,o.Die,E.default.ins().checkHPTrigger(a,r)},t.prototype.checkAIend=function(e,t){if(!c.default.ins().getTeamCount(t.team)){switch(e.team){case n.My:switch(t.team){case n.Monster:console.info("\u5f00\u59cb\u6361\u4e1c\u897f");break;case n.WillBoss:G.default.ins().sendResult(!0),console.info("\u906d\u9047boss\u6210\u529f");break;case n.WillEntity:if(console.info("\u906d\u9047\u654c\u4eba\u6210\u529f"),!c.default.ins().getTeamCount(n.My))return;P.default.sceneInMine()?N.default.ins().fightEnd(!0):x.default.ins().sendFightResult(1);break;case n.Faker:var i=G.default.ins().wildPersonList[t.infoModel.masterHandle];i&&G.default.ins().sendWildPeopleResult(i.index,1)}G.default.ins().isGuiding&&(G.default.ins().isGuiding=!1,G.default.ins().postEncounterDataChange()),c.default.ins().resetRole();break;case n.WillBoss:G.default.ins().sendResult(!1),console.info("\u906d\u9047boss\u5931\u8d25");break;case n.WillEntity:if(console.info("\u906d\u9047\u654c\u4eba\u5931\u8d25"),!c.default.ins().getTeamCount(n.WillEntity))return;P.default.sceneInMine()?N.default.ins().fightEnd(!1):x.default.ins().sendFightResult(0);break;case n.Faker:var a=G.default.ins().wildPersonList[e.infoModel.masterHandle];G.default.ins().sendWildPeopleResult(a.index,0);break;case n.Monster:c.default.ins().resetRole()}this.getPickAI()}},t.prototype.checkPlayDieSound=function(e){var t,i=e.infoModel?e.infoModel.configID:0;!V.default.WINDOW_OPEN&&i&&((t=O.default.ins().guanqiaMonster[i])?t.sound&&V.default.ins().playEffect(t.sound):(t=h.default.MonstersConfig[i])&&t.sound&&V.default.ins().playEffect(t.sound))},t.prototype.getPickAI=function(){this.inited&&!G.default.ins().isEncounter()&&this.stopAITimer()},t.prototype.getTeamCount=function(e){var t=0;for(var i in this.aiList){this.aiList[i].team==e&&(t+=1)}return t},t.prototype.stopAITimer=function(){u.default.ins().remove(this.startAI,this),u.default.ins().remove(this.startZhanLing,this)},t.prototype.addAITimer=function(){u.default.ins().isExists(this.startAI,this)||(u.default.ins().doTimer(t.AI_UPDATE_TIME,0,this.startAI,this),this.addZhanLingTimer())},t.prototype.addZhanLingTimer=function(){this.zhanlingTime=l.default.getTimer(),this.zhanlingdelayTime=l.default.getTimer(),u.default.ins().doTimer(1e3,0,this.startZhanLing,this)},t.prototype.getArgs=function(e,t,i){var n=h.default.EffectsConfig[e],a=0,o=0,r=0;if(t&&t.args)for(var s=0,u=t.args;s<u.length;s++){8==(d=u[s]).type&&d.vals[0]==n.group&&(a+=d.vals[2]||0,o+=d.vals[4]||0,r+=d.vals[1]||0),6==d.type&&(a+=d.vals[0]||0)}if(i&&i.args)for(var l=0,c=i.args;l<c.length;l++){var d;8==(d=c[l]).type&&d.vals[0]==n.group&&(a+=d.vals[2]||0,o+=d.vals[4]||0,r+=d.vals[1]||0),6==d.type&&(a+=d.vals[0]||0)}return{a:a,b:0,c:o,time:r}},t.prototype.skillEffValue=function(e,t,i){var n=0,a=0,o=0;if(i&&(a=i.a||0,o=i.c||0),t){if(t.args)switch(t.type){case g.SkillEffType.AdditionalDamage:n=e.infoModel.getAtt(t.args.b)*(t.args.a+a)+(t.args.c||0)+o;break;case g.SkillEffType.AddBlood:n=-(n=e.infoModel.getAtt(t.args.b)*(t.args.a+a)+(t.args.c||0)+o);break;case g.SkillEffType.AdditionalAttributes:case g.SkillEffType.HostAddAttributes:n=e.infoModel.getAtt(t.args.b)*(t.args.a+a)+(t.args.c||0)+o;break;case g.SkillEffType.AdditionalState:if(2==t.args.i)n=e.infoModel.getAtt(t.args.b)*(t.args.a+a)+(t.args.c||0)+o;else{var r=t.args.c?(t.args.c||0)+o:1+o;n=e.infoModel.getAtt(t.args.b)*r}}n>>=0}return n},t.prototype.checkTeamDistan=function(e,t,i){return void 0===i&&(i=5),w.default.getDistance(e.x,e.y,t.x,t.y)<i*P.default.CELL_SIZE},t.prototype.tryUseSkill=function(e){var t=e.infoModel.handle,i=this.curSkill[t],n=this.curTarget[t];return!!i&&w.default.getDistance(e.x,e.y,n.x,n.y)<i.castRange*P.default.CELL_SIZE},t.prototype.screeningSkill=function(e){var t=this.aiList[e];f.default;if(this.skillCD[e]=this.skillCD[e]||{},t.team==n.My){var i=c.default.ins().getNoDieRole();if(i&&i!=t&&!this.checkTeamDistan(t,i,10))return void(this.curSkill[e]=null)}var a=this.curSkill[e];if(a&&l.default.getTimer()-this.skillCD[e][a.id]<a.cd&&(this.curSkill[e]=null),!this.curSkill[e]){var r=this.getCanUseSkillList(t);if(r){var s,u=0,d=r[u];if((s=d&&d.tarEff?h.default.EffectsConfig[d.tarEff[0]]:null)&&s.type==g.SkillEffType.Summon&&t.hasBuff(s.group)&&(d=r[++u]),(s=d&&d.tarEff?h.default.EffectsConfig[d.tarEff[0]]:null)&&s.type==g.SkillEffType.AddBlood&&(c.default.ins().checkCanAddBlood(t.team)||(d=r[++u])),d&&25e3==d.id){var p=this.curTarget[t.infoModel.handle];p&&p.AI_STATE!=o.Die||(p=t),(G.default.ins().isEncounter()||N.default.ins().isFighting||!c.default.ins().checkCount(p,d.affectRange,2,p.team!=t.team))&&(d=r[++u])}d&&13e3==d.id&&(G.default.ins().isEncounter()||N.default.ins().isFighting||!c.default.ins().checkCount(t,d.affectRange,2))&&(d=r[++u]),this.curSkill[e]=d}}},t.prototype.getCanUseSkillList=function(e,t){void 0===t&&(t=!0);var i=[];if(e instanceof f.default&&e.infoModel){if(q.default.Assert(e.infoModel.skillsData,"\u89d2\u8272\u6280\u80fd\u4e3a\u7a7a\uff0cisMy:"+e.isMy+",fbType:"+P.default.fbType+",fubenId:"+P.default.fubenID))return;if(i=e.infoModel.skillsData.concat(),e.team==n.My){(y=T.default.ins().getJobGWNewSkill(e.infoModel.job))&&(i=i.concat(y));var a=e.infoModel.index;(o=L.default.ins().getJadeDataByID(a))&&(i=i.concat(o.getSkillList()))}else{var o;(o=e.infoModel.jadeData)&&(i=i.concat(o.getSkillList()))}i=i.concat(k.default.ins().getZhiZunSkills(e.infoModel))}else{if(e.team==n.My)if(Z.default.ins().isFireRing(e.infoModel.handle)){var r=Z.default.ins().getRingSkill();if(r)(s=M.default.shift(_.default)).configID=r,i.push(s);if(r=Y.default.ins().getCurSkillID())(s=M.default.shift(_.default)).specialCD=Y.default.ins().getCurSkillCD(),s.configID=r,i.push(s)}else{var s;(s=M.default.shift(_.default)).configID=80001,(y=T.default.ins().getReviseBySkill(35e3))&&y.length&&(s.configID=80002),i.push(s)}else(s=M.default.shift(_.default)).configID=50001,i.push(s)}if(i&&0!=i.length){var u=e.infoModel.handle;this.skillCD[u]=this.skillCD[u]||{};var c=i.length;if(0!=c){for(var d=[],p=0;p<c;p++)if(i[p].canUse&&t!=i[p].isPassive){var h=0;if(e.team==n.My){var g=I.default.ins().getReviseBySkill(i[p].id);g&&g.cd&&(h+=g.cd);var y,v=void 0;(y=T.default.ins().getReviseBySkill(i[p].id))&&(v=y[0]),v&&v.cd&&(h+=v.cd)}l.default.getTimer()-this.skillCD[u][i[p].id]<i[p].cd-h||d.push(i[p])}return d.sort(this.sortFunc),d}}},t.prototype.damageBaseCalculation=function(e,t,i){var o,r,u=0,l=S.JobConst.None,c=(S.JobConst.None,!1),d=!1,p=e.infoModel,g=0,y=0,m=0,b=0;if(e.team==n.My){var _=I.default.ins().getReviseBySkill(i.id);if(_&&(g=_.a||0,y=_.b||0,b=_.d||0,_.selfEff))for(var M in _.selfEff)(r=e.buffList[_.selfEff[M]])&&3==r.effConfig.type&&r.value;var E=T.default.ins().getReviseBySkill(i.id),A=void 0;if(E&&(A=E[0]),A&&(g+=A.a||0,y+=A.b||0,b+=A.d||0,A.selfEff))for(var M in A.selfEff)(r=e.buffList[A.selfEff[M]])&&3==r.effConfig.type&&r.value}if(i.preId&&h.default.FlameStamp.skillId.indexOf(i.preId)>=0){var P,w=p.lyMarkLv||0;if(w)(P=h.default.FlameStampLevel[w])&&(g+=P.bulletDamage.a,y+=P.bulletDamage.b);if(w=(p.lyMarkSkills||[])[6]||0)(P=h.default.FlameStampEffect[7][w]).bulletDamage&&(g+=P.bulletDamage.a||0,y+=P.bulletDamage.b||0)}if(c=e instanceof f.default,d=t instanceof f.default,o=(c&&l?l==S.JobConst.ZhanShi?s.default.calculateRealAttribute(t,v.AttributeType.atDef,e):s.default.calculateRealAttribute(t,v.AttributeType.atRes,e):s.default.calculateRealAttribute(t,v.AttributeType.atDef,e))*(1-p.getAtt(v.AttributeType.atPenetrate)/1e4),3==i.calcType){if(i.args){var L=0;if(e.team==n.My)for(var k=B.default.ins().subRolesLen,U=0;U<k;U++){(H=B.default.ins().getSubRoleByIndex(U))&&(L+=H.getAtt(v.AttributeType.atAttack))}else if(e.team==n.WillEntity){var O=D.default.ins().getRoles();for(k=O.length,U=0;U<k;U++){var H;(H=O[U])&&(L+=H.getAtt(v.AttributeType.atAttack))}}L=Math.max(L-o,.05*L);var j=i.args.b?i.args.b+y:0+y;u=L*(i.args.a+g)+j+m,u=Math.max(u,.05*L),u=t instanceof f.default?Math.floor(u*(1+p.getExAtt(R.ExAttributeType.eatTogetherHitRoleDamageInc)/1e4)):Math.floor(u*(1+p.getExAtt(R.ExAttributeType.eatTogetherHitMonDamageInc+b)/1e4)),u=Math.floor(u*(1-p.getExAtt(R.ExAttributeType.eatTogetherHitFree)/1e4));var W=s.default.calculateRealAttribute(e,v.AttributeType.atRoleDamageEnhance,e);W-=s.default.calculateRealAttribute(t,v.AttributeType.atRoleDamageReduction,e),W-=s.default.calculateRealAttribute(t,v.AttributeType.atDamageReduction,e),u=Math.floor(u*(1+W/1e4)),u+=p.getAtt(v.AttributeType.atTogetherHolyDamege)*(1+p.getAtt(v.AttributeType.atTogetherHolyMaster)/1e4-t.infoModel.getAtt(v.AttributeType.atTogetherHolyResist)/1e4)}}else if(i.targetType==a.Enemy&&i.args){var V=0,q=Math.floor(i.id/1e3)%100;for(U=0;U<C.skillConst.baseSkillIndex.length;U++)q==C.skillConst.baseSkillIndex[U]&&(V=p.attributeExData[R.ExAttributeType.eatBaseSkillExArg]);L=p.getAtt(v.AttributeType.atAttack);var Z=s.default.calculateRealAttribute(e,v.AttributeType.atAttack,e);if(80002==i.configID){var Y=this.gePetSkillAdd(e);Z+=Math.floor(L*Y/1e4)}var K=0;s.default.triggerAttr(e,v.AttributeType.atAttAddDamPro)&&(K=p.getAtt(v.AttributeType.atAttAddDamVal),e.addPaoPao(15));var J=0;t.hasBuff(51001)&&p.getAtt(v.AttributeType.atAttMbAddDamPen)&&(J=p.getAtt(v.AttributeType.atAttMbAddDamPen),e.addPaoPao(17));var z=0;p.getAtt(v.AttributeType.atAttHpLtPenAddDam)&&t.infoModel.getAtt(v.AttributeType.atHp)/t.infoModel.getAtt(v.AttributeType.atMaxHp)<p.getAtt(v.AttributeType.atAttHpLtPenAddDam)/1e4&&(z=p.getAtt(v.AttributeType.atAttHpLtAddDamPen),this.hashHpObj[t.hashCode]||(e.addPaoPao(19),this.hashHpObj[t.hashCode]=1));var X=0;p.type==F.EntityType.Role&&t.infoModel.type==F.EntityType.Role&&(G.default.ins().isEncounter()?X=x.default.ins().getWeiSheHurt(e.isMy):N.default.ins().isFighting&&(X=N.default.ins().getWeiSheHurt(e.isMy)));var Q=0;if(p.getExAtt(R.ExAttributeType.eatMiJiKNHpPer)){var $=p.getAtt(v.AttributeType.atHp)/p.getAtt(v.AttributeType.atMaxHp)*1e4;$<p.getExAtt(R.ExAttributeType.eatMiJiKNHpPer)&&(Q=Math.floor((p.getExAtt(R.ExAttributeType.eatMiJiKNHpPer)-$)/p.getExAtt(R.ExAttributeType.eatMiJiKNHpSubPer))*p.getExAtt(R.ExAttributeType.eatMiJiKNDamPer))}p.getExAtt(R.ExAttributeType.eatMiJiZHDamPer)&&this.getIsTriggerAttr(e,1,R.ExAttributeType.eatMiJiZHTime)&&(Q+=p.getExAtt(R.ExAttributeType.eatMiJiZHDamPer));j=i.args.b?i.args.b+y:0+y;d&&i.args.c&&(m+=i.args.c*t.infoModel.getAtt(v.AttributeType.atHp)),u=(Z=Math.max(Z-o,.05*Z))*(i.args.a+V+g)+j+m+K,u=Math.floor(u*(1+(b+J+z+X+Q)/1e4));W=s.default.calculateRealAttribute(e,v.AttributeType.atRoleDamageEnhance,e);W-=s.default.calculateRealAttribute(t,v.AttributeType.atRoleDamageReduction,e),W-=s.default.calculateRealAttribute(t,v.AttributeType.atDamageReduction,e),u=Math.floor(u*(1+W/1e4)),u=Math.max(u,.05*L)}return u*=(105-10*Math.random())/100,Math.floor(u)},t.prototype.gePetSkillAdd=function(e){var t=e.infoModel.masterHandle,i=c.default.ins().getEntityByHandle(t);if(i&&i.infoModel&&i.infoModel.getExAtt(R.ExAttributeType.eatPetAttackInc)){var a=i.infoModel.getExAtt(R.ExAttributeType.eatPetAttackInc),o=0,r=c.default.ins().getTeamCount(e.team);return e.team==n.My?o=B.default.ins().subRolesLen+1-r:e.team==n.WillEntity&&(G.default.ins().isEncounter()?o=x.default.ins().getRoles().length+1-r:N.default.ins().isFighting&&(o=N.default.ins().getRoles().length+1-r)),a*o}return 0},t.prototype.damageBuff=function(e,t,i){e instanceof d.default&&(e.team!=n.Monster&&e.team!=n.WillBoss||"\u795e\u517d"!=e.infoModel.name&&(i=0));var a=t.buffList[19001];if(a){var o=a.effConfig,r=Math.floor(i*o.args.a);a.value-=r,a.value<=0&&t.removeBuff(a),i=i-r+(a.value<0?-a.value:0)}if(a=t.buffList[60002]){o=a.effConfig;i-=r=Math.floor(i*(o.args.c/1e4))}if((a=t.buffList[60004])&&(i=0),t instanceof f.default&&t.infoModel&&t.infoModel.exRingsData&&1==t.infoModel.exRingsData[1]){var s=t.infoModel.getAtt(v.AttributeType.atMp);if(s>0){var u=s-i;t.infoModel.setAtt(v.AttributeType.atMp,u>0?u:0),i=i-s>=0?i-s:0}}return(a=t.buffList[80001])&&i>0&&(i=(i-=a.value)>0?i:0),i},t.prototype.sortFunc=function(e,t){var i=e.job,n=h.default.SkillsSorderConfig[i];if(!n)return 0;var a=n.skillorder,o=a.length,r=a.length;for(var s in a)a[s]==e.id&&(o=+s),a[s]==t.id&&(r=+s);return o>r?1:o<r?-1:0},t.prototype.screeningTarget=function(e,t,i){void 0===t&&(t=Number.MAX_VALUE),void 0===i&&(i=!1);var r=e.infoModel.handle,s=this.curSkill[r],u=0;if((s&&(u=s.targetType),i||(i=u==a.Friendly),!i)&&(this.lastTarget[r]&&(f=c.default.ins().getEntityByHandle(this.lastTarget[r]))&&f.parent&&f.AI_STATE!=o.Die))return void(this.curTarget[r]=f);var l=c.default.ins().screeningTargetByPos(e,i,0,t,this.aiList);switch(e.team){case n.My:var d=this.checkMySubInList(l,!1,n.Faker);this.curTarget[r]=d;break;case n.Faker:var f=this.checkMySubInList(l);this.curTarget[r]=f;break;default:this.curTarget[r]=l?l[0]:null}!i&&this.curTarget[r]&&(this.lastTarget[r]=this.curTarget[r].infoModel.handle)},t.prototype.checkMySubInList=function(e,t,i){void 0===t&&(t=!1),void 0===i&&(i=n.My);for(var a=0;a<e.length;a++)if(t){if(e[a].team==i)return e[a]}else if(e[a].team!=i)return e[a];return null},t.prototype.trace=function(e){this.isLog&&console.info(e)},t.prototype.startZhanLing=function(){this.zhanlingdelayTime&&l.default.getTimer()-this.zhanlingdelayTime>h.default.ZhanLingConfig.delayTime&&(this.zhanlingdelayTime=0,this.checkShowZhanling()),l.default.getTimer()-this.zhanlingTime>1e4&&this.checkShowZhanling()},t.AI_UPDATE_TIME=100,t.SEND_TASK_TYPE=68,t}(r.default);i.default=X,function(e){e[e.My=0]="My",e[e.Monster=1]="Monster",e[e.WillEntity=2]="WillEntity",e[e.WillBoss=3]="WillBoss",e[e.NotAtk=4]="NotAtk",e[e.Faker=5]="Faker"}(n=i.Team||(i.Team={})),function(e){e[e.Friendly=1]="Friendly",e[e.Enemy=2]="Enemy",e[e.My=3]="My"}(a=i.TargetType||(i.TargetType={})),function(e){e[e.Stand=0]="Stand",e[e.Run=1]="Run",e[e.Atk=2]="Atk",e[e.Die=3]="Die",e[e.Patrol=4]="Patrol"}(o=i.AI_State||(i.AI_State={})),cc._RF.pop()},{"../../core/astar/BresenhamLine":"BresenhamLine","../../core/base/AttributeType":"AttributeType","../../core/base/BaseClass":"BaseClass","../../core/base/ErrorLog":"ErrorLog","../../core/utils/DirUtil":"DirUtil","../../core/utils/DisplayUtils":"DisplayUtils","../../core/utils/MathUtils":"MathUtils","../Utils/EgretUtils":"EgretUtils","../base/EntityManager":"EntityManager","../base/EntityType":"EntityType","../base/ObjectPool":"ObjectPool","../consts/DamageTypes":"DamageTypes","../consts/JobConst":"JobConst","../consts/skillConst":"skillConst","../entity/CharMonster":"CharMonster","../entity/CharRole":"CharRole","../entity/EntityBuff":"EntityBuff","../entity/Role":"Role","../entity/SubRoles":"SubRoles","../manager/GlobalConfig":"GlobalConfig","../manager/TimerManager":"TimerManager","../map/GameMap":"GameMap","../module/artifact/Artifact":"Artifact","../module/encounter/Encounter":"Encounter","../module/encounter/EncounterFight":"EncounterFight","../module/encounter/EncounterModel":"EncounterModel","../module/extremeEquip/ExtremeEquipModel":"ExtremeEquipModel","../module/fb/UserFb":"UserFb","../module/gamescene/GameLogic":"GameLogic","../module/gamescene/const/EntityAction":"EntityAction","../module/gamescene/const/ExAttributeType":"ExAttributeType","../module/gamescene/const/SkillEffType":"SkillEffType","../module/gamescene/help/DropHelp":"DropHelp","../module/godweapon/GodWeaponCC":"GodWeaponCC","../module/heji/model/HejiUseMgr":"HejiUseMgr","../module/loongsoul/JadeNew":"JadeNew","../module/mine/MineFight":"MineFight","../module/rolewin/UserSkill":"UserSkill","../module/skill/data/SkillData":"SkillData","../module/sound/SoundUtil":"SoundUtil","../module/specialring/LyMark":"LyMark","../module/specialring/SpecialRing":"SpecialRing","../module/task/UserTask":"UserTask","../module/zhanling/model/ZhanLingModel":"ZhanLingModel","./ExSkillAiLogic":"ExSkillAiLogic"}],RoleAttrWin:[function(e,t,i){"use strict";cc._RF.push(t,"14ef1o/dxtL7Z5ZXqFc10Yw","RoleAttrWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../../core/base/AttributeType"),o=e("../../../../core/base/ViewManager"),r=e("../../../enum/LayerManager"),s=e("../../../entity/SubRoles"),u=e("../../../../core/utils/ComponentUtil"),l=e("../../../../core/utils/Util"),c=cc._decorator,d=c.ccclass,f=c.property,p=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=r.LayerManager.UI_Popup,t.leftBtn=null,t.rightBtn=null,t.closeBtn=null,t.jobLabel=null,t.powerLabel=null,t.attr=null,t._lastX=0,t.proShowList=[1,2,3,4,5,6,7,a.AttributeType.atCritEnhance,8,9,10,11,12,13,14,15,16],t}return __extends(t,e),t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.curRole=e[0][0][0],this.setRoleAttr(this.curRole),this.leftBtn.clickEvents[0]=u.ComponentUtil.createEventHandler(this.node,"RoleAttrWin","onTouch","0"),this.rightBtn.clickEvents[0]=u.ComponentUtil.createEventHandler(this.node,"RoleAttrWin","onTouch","1"),this.closeBtn.clickEvents[0]=u.ComponentUtil.createEventHandler(this.node,"RoleAttrWin","otherClose","0")},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.otherClose=function(e){o.default.ins().close(this)},t.prototype.onTouch=function(e,t){switch(+t){case 0:this.curRole>0&&(this.curRole--,this.setRoleAttr(this.curRole));break;case 1:this.curRole<2&&(this.curRole++,this.setRoleAttr(this.curRole))}},t.prototype.setRoleAttr=function(e){var t=s.default.ins().getSubRoleByIndex(e);this.powerLabel.string="\u4ed9\u529b\u503c: "+t.power,this.jobLabel.string=l.Util.getJobNameSting(t.job);for(var i="",n=0,o=0,r=0;r<this.proShowList.length;r++){if(o=this.proShowList[r],n=t.attributeData[o],o>1&&o<9)i+=7==o||8==o?n/100+"%":n;else{if(!(o>12&&o<15||o>15))continue;o==a.AttributeType.atCritEnhance&&(n+=t.getAtt(a.AttributeType.atHuiXinDamage),n+=1e4),i+=n/100+"%"}r<this.proShowList.length-1&&(i+="\n")}this.attr.string=i,this.setBtn()},t.prototype.setBtn=function(){var e=s.default.ins().subRolesLen;1==e?(this.leftBtn.node.active=!1,this.rightBtn.node.active=!1):e>1&&(0==this.curRole?(this.leftBtn.node.active=!1,this.rightBtn.node.active=!0):1==this.curRole?(this.leftBtn.node.active=!0,this.rightBtn.node.active=!(e<3)):2==this.curRole&&(this.leftBtn.node.active=!0,this.rightBtn.node.active=!1))},__decorate([f({type:cc.Button,displayName:"leftBtn"})],t.prototype,"leftBtn",void 0),__decorate([f({type:cc.Button,displayName:"rightBtn"})],t.prototype,"rightBtn",void 0),__decorate([f({type:cc.Button,displayName:"closeBtn"})],t.prototype,"closeBtn",void 0),__decorate([f({type:cc.Label,displayName:"jobLabel"})],t.prototype,"jobLabel",void 0),__decorate([f({type:cc.Label,displayName:"powerLabel"})],t.prototype,"powerLabel",void 0),__decorate([f({type:cc.Label,displayName:"attr"})],t.prototype,"attr",void 0),t=__decorate([d],t)}(n.default);i.default=p,cc._RF.pop()},{"../../../../core/base/AttributeType":"AttributeType","../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/ComponentUtil":"ComponentUtil","../../../../core/utils/Util":"Util","../../../../core/view/BaseEuiView":"BaseEuiView","../../../entity/SubRoles":"SubRoles","../../../enum/LayerManager":"LayerManager"}],RoleChooseEquipWin:[function(e,t,i){"use strict";cc._RF.push(t,"93dbcELkgVLN5kLg9zQeFiQ","RoleChooseEquipWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../base/ListScrollScript"),r=e("../../bag/ItemData"),s=e("../../../../core/base/ViewManager"),u=e("../../../entity/SubRoles"),l=e("../../../config/ItemConfig"),c=e("../../bag/UserBag"),d=e("../../../entity/Actor"),f=e("../../zs/UserZs"),p=e("../UserEquip"),h=e("../../../manager/TimerManager"),g=e("./RoleEquipChooseItem"),y=cc._decorator,v=y.ccclass,m=y.property,b=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.listscroll=null,t.wearItem=null,t.view=null,t.scrollcontent=null,t.itemList=[],t.roleSelect=0,t.pos=0,t}return __extends(t,e),t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.open=function(){for(var e=this,t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];this.roleSelect=t[0][0][0],this.pos=t[0][0][1],console.log(this.roleSelect,this.pos);var n=u.default.ins().getSubRoleByIndex(this.roleSelect),a=n.getEquipDataByPos(this.pos);this.wearItem.setUpImage(!1),this.wearItem.setData(a.item),this.wearItem.dataChanged(),this.wearItem.setBtnStatu();var o=0;if(a&&0!=a.item.configID){this.wearItem.node.active=!0,this.listscroll.node.y=-80,this.listscroll.node.height=400,this.view.height=400,this.view.y=0,this.scrollcontent.height=0,this.scrollcontent.y=200,o=a.item.point;var r=0==l.default.getJob(a.item.itemConfig)?n.job:l.default.getJob(a.item.itemConfig);c.default.ins().setEquipPowerDic(r,l.default.getSubType(a.item.itemConfig),o)}else this.wearItem.node.active=!1,this.listscroll.node.y=-10,this.listscroll.node.height=530,this.view.height=530,this.view.y=0,this.scrollcontent.height=0,this.scrollcontent.y=265;this.itemList=c.default.ins().getEquipByPos(this.roleSelect,this.pos),h.default.ins().doTimerDelay(200,100,1,function(){e.listscroll.setParam(e.itemList)},this)},t.prototype.itemTap=function(e,t){if(e.target.name="itemButton"){var i=+t,n=this.itemList[i];if(n&&n instanceof r.default){var a=d.default.level,o=f.default.ins().lv;if(n.itemConfig&&!(o>=(n.itemConfig.zsLevel||0)&&a>=(n.itemConfig.level||1)))return 5==l.default.getQuality(n.itemConfig)?void console.log("|C:0xF3311E&T:"+n.itemConfig.name+"\uff09\u8fbe\u5230"+n.itemConfig.zsLevel+"\u8f6c"+(n.itemConfig.level||1)+"\u7ea7\u53ef\u7a7f\u6234|"):void console.log("\u7b49\u7ea7\u4e0d\u8db3\uff0c\u65e0\u6cd5\u7a7f\u6234|");p.default.ins().sendWearEquipment(n.handle,this.pos,this.roleSelect),s.default.ins().close(this)}}},t.prototype.onTap=function(e){s.default.ins().close(this)},t.prototype.sortFun=function(e,t){var i=c.default.ins().getEquipAttrs(e),n=c.default.getAttrPower(i),a=c.default.ins().getEquipAttrs(t),o=c.default.getAttrPower(a);return n<o?1:n>o?-1:0},__decorate([m({type:o.default,displayName:"listscroll"})],t.prototype,"listscroll",void 0),__decorate([m({type:g.RoleEquipChooseItem,displayName:"wearItem"})],t.prototype,"wearItem",void 0),__decorate([m({type:cc.Node,displayName:"view"})],t.prototype,"view",void 0),__decorate([m({type:cc.Node,displayName:"scrollcontent"})],t.prototype,"scrollcontent",void 0),t=__decorate([v],t)}(n.default);i.default=b,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../base/ListScrollScript":"ListScrollScript","../../../config/ItemConfig":"ItemConfig","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../../enum/LayerManager":"LayerManager","../../../manager/TimerManager":"TimerManager","../../bag/ItemData":"ItemData","../../bag/UserBag":"UserBag","../../zs/UserZs":"UserZs","../UserEquip":"UserEquip","./RoleEquipChooseItem":"RoleEquipChooseItem"}],RoleConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6e31alfYZhBJok+HDH9WeE1","RoleConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.level=0,this.job=0,this.hp=0,this.mp=0,this.atk=0,this.def=0,this.res=0,this.crit=0,this.tough=0,this.as=0,this.ms=0,this.acrit=0}}();i.default=n,cc._RF.pop()},{}],RoleEntityCtroller:[function(e,t,i){"use strict";cc._RF.push(t,"bd098v6zyNJMpNMhdULQSM9","RoleEntityCtroller"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./core/utils/MathUtils"),a=e("./MostEntityCtroller"),o=e("./game/module/gamescene/GameSceneCtr"),r=cc._decorator,s=r.ccclass,u=(r.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.proInterTime=1,t.proStartTime=0,t.atkStartTime=1,t.selfPos=0,t.isMove=!1,t.isAtk=!1,t.blood=10200,t.atkharm=300,t.curtTarget=null,t.atkTargetList=[],t}return __extends(t,e),t.prototype.start=function(){this.dightMap=o.default.ins().dightMap,this.selfPos=this.node.selfPos,this.startAi()},t.prototype.startAi=function(){this.isMove=!0},t.prototype.initData=function(e,t){this.atkharm=e,this.blood=t},t.prototype.update=function(e){this.isMove&&(this.proStartTime+=e,this.proStartTime>this.proInterTime&&(this.tryAttack()||this.tryMove(),this.atkStartTime=1,this.proStartTime=0));this.isAtk&&(this.atkStartTime+=e,this.atkStartTime>1&&(this.curtTarget&&cc.isValid(this.curtTarget,!0)?this.curtTarget.getComponent(a.default).onHit(this.atkharm):this.atkTargetList.length>0?(this.curtTarget=this.atkTargetList.shift(),this.curtTarget.getComponent(a.default).onHit(this.atkharm)):(this.proStartTime=1,this.isMove=!0,this.isAtk=!1),this.atkStartTime=0))},t.prototype.tryAttack=function(){for(var e=this.searchSelfPos(),t=0;t<e.length;t++)if(1==this.dightMap[e[t]].e){this.isMove=!1,this.isAtk=!0;for(var i=this.dightMap[e[t]].p,n=o.default.ins().entityList,a=0;a<n.length;a++)i.x==n[a].x&&i.y==n[a].y&&this.atkTargetList.push(n[a])}return this.isAtk},t.prototype.searchSelfPos=function(){var e=[];return this.selfPos-6>=0&&e.push(this.selfPos-6),this.selfPos+6<=35&&e.push(this.selfPos+6),0!=this.selfPos&&this.selfPos%6!=0&&e.push(this.selfPos-1),(this.selfPos+1)%6!=0&&e.push(this.selfPos+1),0!=this.selfPos&&this.selfPos%6!=0&&this.selfPos-6>=0&&e.push(this.selfPos-7),(this.selfPos+1)%6!=0&&this.selfPos-6>=0&&e.push(this.selfPos-5),0!=this.selfPos&&this.selfPos%6!=0&&this.selfPos+6<=35&&e.push(this.selfPos+5),(this.selfPos+1)%6!=0&&this.selfPos+6<=35&&e.push(this.selfPos+7),e},t.prototype.tryMove=function(){var e=n.default.randomArray([0,1,2,3]);if(0==e){if(this.selfPos-6>=0)if(this.dightMap[this.selfPos-6].e>0);else{this.dightMap[this.selfPos].e=0;var t=this.dightMap[this.selfPos-6].p;this.node.position=t,this.selfPos=this.selfPos-6,this.dightMap[this.selfPos].e=2}}else if(1==e){if(this.selfPos+6<=35)if(this.dightMap[this.selfPos+6].e>0);else{this.dightMap[this.selfPos].e=0;t=this.dightMap[this.selfPos+6].p;this.node.position=t,this.selfPos=this.selfPos+6,this.dightMap[this.selfPos].e=2}}else if(2==e){if(0!=this.selfPos&&this.selfPos%6!=0)if(this.dightMap[this.selfPos-1].e>0);else{this.dightMap[this.selfPos].e=0;t=this.dightMap[this.selfPos-1].p;this.node.position=t,this.selfPos=this.selfPos-1,this.dightMap[this.selfPos].e=2}}else if(3==e&&(this.selfPos+1)%6!=0)if(this.dightMap[this.selfPos+1].e>0);else{this.dightMap[this.selfPos].e=0;t=this.dightMap[this.selfPos+1].p;this.node.position=t,this.selfPos=this.selfPos+1,this.dightMap[this.selfPos].e=2}},t=__decorate([s],t)}(cc.Component));i.default=u,cc._RF.pop()},{"./MostEntityCtroller":"MostEntityCtroller","./core/utils/MathUtils":"MathUtils","./game/module/gamescene/GameSceneCtr":"GameSceneCtr"}],RoleEquipChooseItem:[function(e,t,i){"use strict";cc._RF.push(t,"fecf4rQyghJ6JAVihpKi51X","RoleEquipChooseItem"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../bag/UserBag"),a=e("../../../entity/Actor"),o=e("../../zs/UserZs"),r=e("../../forge/model/EquipPos"),s=e("../../../config/ItemConfig"),u=e("../../../entity/SubRoles"),l=e("./RoleChooseEquipWin"),c=e("../../../../core/base/ViewManager"),d=e("../../../../core/base/AttributeData"),f=e("../../../../core/view/BaseView"),p=cc._decorator,h=p.ccclass,g=p.property,y=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.nameTxt=null,t.attr1=null,t.changeBtn=null,t.power=null,t.levelText=null,t.best=null,t.now=null,t.data=null,t.itemIndex=0,t.showUpimage=!0,t}return __extends(t,e),t.prototype.setData=function(e){this.data=e},t.prototype.setParam=function(e,t){this.data=e,this.itemIndex=t||0,this.dataChanged()},t.prototype.getParam=function(){},t.prototype.dataChanged=function(){if(this.data&&this.data.itemConfig){var e=this.data,t=s.default.getQualityColor(this.data.itemConfig);this.nameTxt.string="<color = "+t+">"+e.itemConfig.name+"</c>";var i=n.default.ins().getEquipAttrs(this.data),f=this.data.point+0;this.power.string="\u8bc4\u5206\uff1a"+f;var p=s.default.getSubType(this.data.itemConfig),h=a.default.level>=(this.data.itemConfig.level||1)&&o.default.ins().lv>=(this.data.itemConfig.zsLevel||0),g=h?"#35E62D":"#fe4444";if(p==r.EquipPos.DZI)this.levelText.string="\u7b49\u9636:"+n.default.ins().getGuanyinLevel(e.itemConfig);else{var y=isNaN(this.data.itemConfig.zsLevel)?(this.data.itemConfig.level||1)+"\u7ea7":this.data.itemConfig.zsLevel+"\u8f6c";this.levelText.string="\u7b49\u7ea7:"+y}this.levelText.node.color=cc.Color.BLACK.fromHEX(g);var v=0;if(this.now.node.active=!this.showUpimage,s.default.getJob(this.data.itemConfig))v=s.default.getJob(this.data.itemConfig);else{var m=c.default.ins().getView(l.default).roleSelect;v=u.default.ins().getSubRoleByIndex(m).job}var b=n.default.ins().getEquipPowerDic(v,p);0==this.itemIndex&&this.showUpimage&&h?this.best.node.active=f>b:this.best.node.active=!1;for(var _="",C=0;C<i.length;C++){if(0!=i[C].type&&0!=i[C].value)_+=(y=d.default.getAttrNameByAttrbute(i[C],!0))+"\n"}this.attr1.string=_,o.default.ins().lv<(this.data.itemConfig.zsLevel||0)||a.default.level<(this.data.itemConfig.level||1)?this.changeBtn.node.active=!1:this.changeBtn.node.active=!0}},t.prototype.onRemove=function(){},t.prototype.setUpImage=function(e){this.showUpimage=e},t.prototype.setBtnStatu=function(){this.changeBtn.node.active=!1,this.now.node.active=!0},t.prototype.showEquipPart0=function(){console.log("---------------onCLIckEquipNAME")},__decorate([g({type:cc.RichText,displayName:"nameTxt"})],t.prototype,"nameTxt",void 0),__decorate([g({type:cc.Label,displayName:"attr1"})],t.prototype,"attr1",void 0),__decorate([g({type:cc.Button,displayName:"changeBtn"})],t.prototype,"changeBtn",void 0),__decorate([g({type:cc.Label,displayName:"power"})],t.prototype,"power",void 0),__decorate([g({type:cc.Label,displayName:"levelText"})],t.prototype,"levelText",void 0),__decorate([g({type:cc.Label,displayName:"best"})],t.prototype,"best",void 0),__decorate([g({type:cc.Label,displayName:"now"})],t.prototype,"now",void 0),t=__decorate([h],t)}(f.default);i.RoleEquipChooseItem=y,cc._RF.pop()},{"../../../../core/base/AttributeData":"AttributeData","../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseView":"BaseView","../../../config/ItemConfig":"ItemConfig","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../bag/UserBag":"UserBag","../../forge/model/EquipPos":"EquipPos","../../zs/UserZs":"UserZs","./RoleChooseEquipWin":"RoleChooseEquipWin"}],RoleInfoItem:[function(e,t,i){"use strict";cc._RF.push(t,"e064fFDy9JERoW5R+3N/5nD","RoleInfoItem"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/view/BaseEventView"),a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([o],t)}(n.default));i.default=r,cc._RF.pop()},{"../../core/view/BaseEventView":"BaseEventView"}],RoleInfoPanel:[function(e,t,i){"use strict";cc._RF.push(t,"02837d6F51N6Yn3H/5w0aQ7","RoleInfoPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/utils/ComponentUtil"),a=e("../../core/view/BaseView"),o=e("../entity/SubRoles"),r=e("../../core/utils/Util"),s=e("../module/rolewin/UserEquip"),u=e("../config/ItemConfig"),l=e("../../core/base/ViewManager"),c=e("../module/bag/view/EquipDetailedWin"),d=e("../module/rolewin/view/RoleAttrWin"),f=e("../module/rolewin/view/RoleChooseEquipWin"),p=e("../module/specialring/SpecialRing"),h=e("../module/rolewin/UserRole"),g=e("../module/opensystem/OpenSystem"),y=e("../consts/SystemConst"),v=e("../module/forge/UserForge"),m=e("../module/gamescene/GameLogic"),b=e("../module/rune/Rune"),_=e("../module/bag/UserBag"),C=e("../module/fb/UserFb"),I=e("../entity/Actor"),T=e("../module/loongsoul/JadeNew"),S=e("../module/specialring/LyMark"),R=e("../module/treasurehunt/view/AdvanEquipWin"),B=cc._decorator,M=B.ccclass,E=B.property,D=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.changeEquipBtn=null,t.partName=null,t.equipName=null,t.infoBtn=null,t.otherBtnList=[],t.htmlText="<color = #666666 click = 'showEquipPart14'><u>\u6682\u65e0\u88c5\u5907</u></c>",t.isExitEquips=[0,0,0,0,0,0,0,0,0,0,0,0,0],t.defColor="#666666",t.defName="\u6682\u65e0\u88c5\u5907",t.partNameList=["[\u6b66\u5668]","[\u5934\u76d4]","[\u8863\u670d]","[\u9879\u94fe]","[\u62a4\u8155]","[\u8170\u5e26]","[\u6212\u6307]","[\u978b\u5b50]","[\u5b98\u5370]","[\u9ebb\u75f9]","[\u62a4\u8eab]","[\u6597\u7b20]","[\u9762\u7532]","[\u62ab\u98ce]","[\u76fe\u724c]"],t}return __extends(t,e),t.prototype.onLoad=function(){},t.prototype.onEnable=function(){this.initButtonInfo()},t.prototype.onDisable=function(){},t.prototype.onDestroy=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(s.default.ins().postEquipChange,this.updateEquipInfo),this.observe(s.default.ins().postAddSpirit,this.updateEquipInfo),this.observe(s.default.ins().postAddSoul,this.updateEquipInfo),this.observe(p.default.ins().postRingUpdate,this.updateEquipInfo),this.observe(v.default.ins().postForgeTips,this.delayRedPoint),this.observe(m.default.ins().postRuneExchange,this.delayRedPoint),this.observe(m.default.ins().postRuneShatter,this.delayRedPoint),this.observe(b.default.ins().postInlayResult,this.delayRedPoint),this.observe(_.default.ins().postHuntStore,this.delayRedPoint),this.observe(p.default.ins().postActiveRing,this.delayRedPoint),this.observe(C.default.ins().postFbRingInfo,this.delayRedPoint),this.observe(_.default.ins().postItemAdd,this.delayRedPoint),this.observe(_.default.ins().postItemDel,this.delayRedPoint),this.observe(_.default.ins().postItemChange,this.delayRedPoint),this.observe(_.default.ins().postItemCountChange,this.delayRedPoint),this.observe(C.default.ins().postFbRingInfo,this.delayRedPoint),this.observe(I.default.ins().postLevelChange,this.delayRedPoint),this.observe(T.default.ins().postJadeData,this.delayRedPoint),this.observe(S.default.ins().postMarkData,this.delayRedPoint),this.updateEquipInfo(),this.updateRedPoint()},t.prototype.close=function(){},t.prototype.initButtonInfo=function(){this.changeEquipBtn.clickEvents[0]=n.ComponentUtil.createEventHandler(this.node,"RoleInfoPanel","onClickChangeEquipBtn","0"),this.infoBtn.clickEvents[0]=n.ComponentUtil.createEventHandler(this.node,"RoleInfoPanel","onClickLookAttribute","0")},t.prototype.updateEquipInfo=function(){var e=o.default.ins().getSubRoleByIndex(this.curRole);if(e){var t=e.getEquipLen();console.log(t,e);for(var i=[],n=[],a=0;a<t;a++){var s=e.getEquipByIndex(a),l=s.item.itemConfig;if(0==s.item.configID)a<9?(i[a]=this.setContentString(this.defColor,a,this.defName),n[a]=this.getPartNameString(a),this.isExitEquips[a]=0):this.isExitEquips[a+2]=0;else{var c=u.default.getQualityColor(l);a<9?(i[a]=this.setContentString(c,a,l.name),n[a]=this.getPartNameString(a),this.isExitEquips[a]=1):(i[a+2]=this.setContentString(c,a+2,l.name),n[a+2]=this.getPartNameString(a+2),this.isExitEquips[a+2]=1)}}var d=o.default.ins().getSubRoleByIndex(this.curRole).exRingsData;if(d[0]>0){var f=r.Util.QUALITY_COLOR[4];i[9]=this.setContentString(f,9,"\u9ebb\u75f9\u6212\u6307"),this.isExitEquips[9]=1}else i[9]=this.setContentString(this.defColor,9,this.defName),this.isExitEquips[9]=0;if(d[1]>0){f=r.Util.QUALITY_COLOR[4];i[10]=this.setContentString(f,10,"\u62a4\u8eab\u6212\u6307"),this.isExitEquips[10]=1}else i[10]=this.setContentString(this.defColor,10,this.defName),this.isExitEquips[10]=0;n[9]=this.getPartNameString(9),n[10]=this.getPartNameString(10),this.equipName.string=i.join("<br/>"),this.partName.string=n.join("<br/>"),this.onDelayReflash()}},t.prototype.onDelayReflash=function(){h.default.ins().setCanChange()},t.prototype.updateRedPoint=function(){this.setCanChange()},t.prototype.delayRedPoint=function(){},t.prototype.setContentString=function(e,t,i){return"<color = "+e+"><u>"+i+"</u></c>"},t.prototype.getPartNameString=function(e){return this.partNameList[e]},t.prototype.onClickChangeEquipBtn=function(e){console.log("\u70b9\u51fb\u4e00\u952e\u6362\u88c5"),h.default.ins().checkHaveCan(!0,this.curRole),this.setCanChange()},t.prototype.onClickAttributeBtn=function(e,t){console.log("\u70b9\u51fb\u88c5\u5907\u7684\u4f4d\u7f6eport == ",t);var i=+t;if(this.isExitEquips[i]<1)return console.log("\u6ca1\u6709\u88c5\u5907\u7684\u4f4d\u7f6e\u662f == ",i),void l.default.ins().open(f.default,this.curRole,i);var n=o.default.ins().getSubRoleByIndex(this.curRole);if(i<9){var a=void 0;n.equipsData[i].item.handle;a=n.equipsData[i].item.handle;var r=n.equipsData[i].item._configID,s=n.equipsData[i].item;l.default.ins().open(c.default,1,a,r,s,n,this.curRole,i)}else if(i>=9&&i<=10);else{a=void 0;i-=2;n.equipsData[i].item.handle;a=n.equipsData[i].item.handle;r=n.equipsData[i].item._configID,s=n.equipsData[i].item;l.default.ins().open(c.default,1,a,r,s,n,this.curRole,i)}},t.prototype.onClickLookAttribute=function(){console.log("\u70b9\u51fb\u5c5e\u6027\u8be6\u60c5"),l.default.ins().open(d.default,this.curRole)},t.prototype.onClickOtherBtn=function(e,t){switch(+t){case 0:console.log("0 - \u7279\u6212");break;case 1:console.log("1 - \u795e\u88c5"),l.default.ins().open(R.default);break;case 2:console.log("2 - \u4f20\u4e16");break;case 3:console.log("3 - \u5b9d\u7269");break;case 4:console.log("4 - \u6218\u7eb9");break;case 5:console.log("5 - \u88c5\u626e")}},t.prototype.setCanChange=function(e){for(var t=e?e[this.curRole]?e[this.curRole]:[]:h.default.ins().canChangeEquips[this.curRole],i=!1,n=0;n<13;n++)i||(i=!!t[n]&&t[n]);this.updateOneKey(i)},t.prototype.updateOneKey=function(e){g.default.ins().checkSysOpen(y.SystemType.ONEKEY)?this.changeEquipBtn.node.active=e:this.changeEquipBtn.node.active=!1},__decorate([E({type:cc.Button,displayName:"changeEquipBtn"})],t.prototype,"changeEquipBtn",void 0),__decorate([E({type:cc.RichText,displayName:"partName"})],t.prototype,"partName",void 0),__decorate([E({type:cc.RichText,displayName:"equipName"})],t.prototype,"equipName",void 0),__decorate([E({type:cc.Button,displayName:"infoBtn"})],t.prototype,"infoBtn",void 0),t=__decorate([M],t)}(a.default);i.default=D,cc._RF.pop()},{"../../core/base/ViewManager":"ViewManager","../../core/utils/ComponentUtil":"ComponentUtil","../../core/utils/Util":"Util","../../core/view/BaseView":"BaseView","../config/ItemConfig":"ItemConfig","../consts/SystemConst":"SystemConst","../entity/Actor":"Actor","../entity/SubRoles":"SubRoles","../module/bag/UserBag":"UserBag","../module/bag/view/EquipDetailedWin":"EquipDetailedWin","../module/fb/UserFb":"UserFb","../module/forge/UserForge":"UserForge","../module/gamescene/GameLogic":"GameLogic","../module/loongsoul/JadeNew":"JadeNew","../module/opensystem/OpenSystem":"OpenSystem","../module/rolewin/UserEquip":"UserEquip","../module/rolewin/UserRole":"UserRole","../module/rolewin/view/RoleAttrWin":"RoleAttrWin","../module/rolewin/view/RoleChooseEquipWin":"RoleChooseEquipWin","../module/rune/Rune":"Rune","../module/specialring/LyMark":"LyMark","../module/specialring/SpecialRing":"SpecialRing","../module/treasurehunt/view/AdvanEquipWin":"AdvanEquipWin"}],RoleItem:[function(e,t,i){"use strict";cc._RF.push(t,"f86d6FVeS9NhrjjfsKRBtCH","RoleItem"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./ItemBase"),a=e("../entity/Role"),o=e("../config/ItemConfig"),r=e("../module/forge/model/ForgeConst"),s=e("../module/forge/model/EquipPos"),u=e("../module/bag/UserBag"),l=e("../../core/base/ViewManager"),c=e("../module/samsara/view/SamsaraEquipTips"),d=e("../module/bag/view/EquipDetailedWin"),f=cc._decorator,p=f.ccclass,h=f.property,g=function(e){function t(){var t=e.call(this)||this;return t.boostLv=null,t.zhulingLv=null,t.tupoLv=null,t._curRole=-1,t._index=-1,t._model=null,t.showTip=!0,t}return __extends(t,e),t.prototype.init=function(){},t.prototype.dataChanged=function(){this.playEff(),e.prototype.dataChanged.call(this);var t=this.data.itemConfig;if(t){for(var i=this._wings?this._model.wingsData.equipdata:this._model.equipsData,n=void 0,a=0;a<i.length;a++)if(this.data.handle==i[a].item.handle){n=i[a];break}this._wings||(this.boostLv.string=n.strengthen>0?"+"+n.strengthen:"",this.zhulingLv.string=n.zhuling>0?n.zhuling+"":"",this.tupoLv.string=n.tupo>0?n.tupo+"\u661f":"",o.default.getSubType(t)==r.ForgeConst.EQUIP_POS_TO_SUB[s.EquipPos.DZI]&&(this.nameTxt.string=u.default.ins().getGuanyinLevel(t)))}this._lastData=this.data,this._lastModel=this._model},t.prototype.clear=function(){e.prototype.clear.call(this),this.boostLv.string=this.zhulingLv.string=this.tupoLv.string="",this.playEff()},t.prototype.isShowTips=function(e){this.showTip=e},t.prototype.openEquipsTips=function(){this.showTip&&(this._index>s.EquipPos.DZI?l.default.ins().open(c.default,this._curRole,this._lastModel,this._index):l.default.ins().open(d.default,1,this.data.handle,this.itemConfig.id,this.data,this._model,this._curRole,this._index))},t.prototype.showPower=function(){this.openEquipsTips()},t.prototype.setModel=function(e){this._model=e},t.prototype.getModel=function(){return this._model},t.prototype.setCurRole=function(e){this._curRole=e},t.prototype.getCurRole=function(){return this._curRole},t.prototype.setIndex=function(e){this._index=e},t.prototype.getIndex=function(){return this._index},t.prototype.setWings=function(e){this._wings=e},t.prototype.getWings=function(){return this._wings},t.prototype.playEff=function(){},__decorate([h({type:cc.Label,displayName:"boostLv"})],t.prototype,"boostLv",void 0),__decorate([h({type:cc.Label,displayName:"zhulingLv"})],t.prototype,"zhulingLv",void 0),__decorate([h({type:cc.Label,displayName:"tupoLv"})],t.prototype,"tupoLv",void 0),__decorate([h({type:a.default,displayName:"_model"})],t.prototype,"_model",void 0),t=__decorate([p],t)}(n.default);i.default=g,cc._RF.pop()},{"../../core/base/ViewManager":"ViewManager","../config/ItemConfig":"ItemConfig","../entity/Role":"Role","../module/bag/UserBag":"UserBag","../module/bag/view/EquipDetailedWin":"EquipDetailedWin","../module/forge/model/EquipPos":"EquipPos","../module/forge/model/ForgeConst":"ForgeConst","../module/samsara/view/SamsaraEquipTips":"SamsaraEquipTips","./ItemBase":"ItemBase"}],RoleMgr:[function(e,t,i){"use strict";cc._RF.push(t,"f4ab33VeVNHx5PX7fnmELLl","RoleMgr"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../base/BaseSystem"),a=e("../../core/base/MessageCenter"),o=e("../../core/base/GameConfig"),r=e("../manager/SceneMgr"),s=e("../../CreateScene"),u=e("../../core/net/PackageID"),l=e("./model/SelectRoleData"),c=e("../../core/net/GameSocket"),d=function(e){function t(){var i=e.call(this)||this;return i.enterID=-1,i.isFirstEnter=!0,i.lastRoleID=-1,i.sysId=u.PackageID.Login,a.default.compile(t),i.regNetMsg(1,i.doCheckAccount),i.regNetMsg(4,i.doRoleList),i.regNetMsg(6,i.doRandom),i.regNetMsg(2,i.postCreateRole),i.regNetMsg(5,i.doEnterGame),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.connectServer=function(){c.default.ins().connect()},t.prototype.doCheckAccount=function(e){var i=e.readByte();if(0==i){console.log("\u8bf7\u6c42\u89d2\u8272\u5217\u8868");var n=this.getBytes(4);this.sendToServer(n)}else console.log(t.LONGIN_ERROR_CODE[i])},t.prototype.doRoleList=function(e){var t=this;e.readInt();switch(e.readByte()){case 0:r.default.runScene(r.default.sceneName.CreateScene);break;case 1:for(var i=e.readInt(),n=[],a=0;a<i;a++){var o=new l.default(e);n.push(o)}r.default.runScene(r.default.sceneName.MainScene,function(){1==i?(t.enterID=n[0].id,t.sendEnterGame(n[0].id)):t.isFirstEnter||-1==t.lastRoleID||t.sendEnterGame(t.lastRoleID)})}},t.prototype.sendRandomName=function(e){var t=this.getBytes(6);t.writeByte(e),this.sendToServer(t)},t.prototype.doRandom=function(e){if(0==e.readByte()){e.readByte();var i=e.readUTF();t.nickName=i,s.default.inst.setRoleNickName(i)}},t.prototype.sendCreateRole=function(e,t,i,n){var a=this.getBytes(2);a.writeString(e),a.writeByte(t),a.writeByte(i),a.writeByte(n),a.writeString(o.default.pf),a.writeString(o.default.pfid),a.writeString(o.default.appid),this.sendToServer(a)},t.prototype.postCreateRole=function(e){e.readInt();var t=e.readByte();if(0!=t)return t},t.prototype.sendEnterGame=function(e){var t=this.getBytes(5);t.writeInt(e),t.writeString(o.default.pf),t.writeString(o.default.pfid),t.writeString(o.default.appid),this.sendToServer(t),this.lastRoleID=e},t.prototype.doEnterGame=function(e){var t=e.readByte();switch(t){case 0:break;case 1:console.log("\u8fdb\u5165\u6e38\u620f\u6210\u529f");break;default:alert("\u9519\u8bef\u7801:"+t)}},t.nickName="",t.LONGIN_ERROR_CODE=["","\u5bc6\u7801\u9519\u8bef","\u6ca1\u6709\u8fd9\u4e2a\u8d26\u53f7","\u8d26\u53f7\u5df2\u767b\u5f55\uff0c\u8bf7\u5237\u65b0\u9875\u9762\uff0c\u6700\u957f\u9700\u7b49\u5f853\u5206\u949f\u540e\u91cd\u65b0\u767b\u5f55","\u670d\u52a1\u5668\u5fd9","\u670d\u52a1\u5668\u7ef4\u62a4\u4e2d","Session\u670d\u52a1\u5668\u51fa\u9519\uff0c\u53ef\u80fd\u6570\u636e\u5e93\u6ca1\u8fde\u63a5\u597d","\u4e0d\u5b58\u5728\u8fd9\u4e2a\u670d\u52a1\u5668","\u8d26\u53f7\u5df2\u7eb3\u5165\u9632\u6c89\u8ff7\u7cfb\u7edf\uff0c\u662f\u5426\u9700\u8981\u8fdb\u884c\u8eab\u4efd\u8bc1\u4fe1\u606f\u586b\u5199\uff1f"],t}(n.default);i.default=d,window.GameSystem.push(d.ins.bind(d)),cc._RF.pop()},{"../../CreateScene":"CreateScene","../../core/base/GameConfig":"GameConfig","../../core/base/MessageCenter":"MessageCenter","../../core/net/GameSocket":"GameSocket","../../core/net/PackageID":"PackageID","../base/BaseSystem":"BaseSystem","../manager/SceneMgr":"SceneMgr","./model/SelectRoleData":"SelectRoleData"}],RoleSelectPanel:[function(e,t,i){"use strict";cc._RF.push(t,"3a5efWuTuJOJLJvbaKW3RVx","RoleSelectPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/view/BaseEventView"),a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t=__decorate([o],t)}(n.default));i.default=r,cc._RF.pop()},{"../../core/view/BaseEventView":"BaseEventView"}],RoleWin:[function(e,t,i){"use strict";cc._RF.push(t,"93a59ScXh5Fy6QjK0NDPa70","RoleWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../customComponent/HejiPanel"),r=e("../../../customComponent/ZsPanel"),s=e("../../../customComponent/WingPanel"),u=e("../../samsara/view/SamsaraPanel"),l=e("../../../../core/base/ViewManager"),c=e("../UserRole"),d=e("../../../manager/TimerManager"),f=e("../../zs/UserZs"),p=e("../Wing"),h=e("../../../entity/SubRoles"),g=e("../../../manager/GlobalConfig"),y=e("../../../entity/Actor"),v=e("../UserSkill"),m=e("../../bag/UserBag"),b=e("../../specialring/LyMark"),_=e("../../tips/UserTips"),C=e("../../gamescene/view/ui/UIView2"),I=e("../../samsara/data/SamsaraModel"),T=e("../../opensystem/OpenSystem"),S=e("../../../consts/SystemConst"),R=e("../../specialring/SpecialRing"),B=e("../../loongsoul/LongHun"),M=e("../UserEquip"),E=e("../../../customComponent/RoleInfoPanel"),D=e("../../../../core/utils/ArrayUtil"),A=e("../../../../core/utils/Util"),P=cc._decorator,w=P.ccclass,L=P.property,k=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Main,t.closeBtn=null,t.viewStack=[],t.viewStackIndex=0,t.tab=null,t.tabGroup=[],t.tabIndex=0,t.roleInfoPanel=null,t.hejiPanel=null,t.zsPanel=null,t.wingPanel=null,t.reincarnationPanel=null,t.redPointGroup=[],t.help=null,t.rolesGroup=null,t.roleHeadSelects=[],t.rolesLabel=[],t.roleIndex=0,t.rolesLength=1,t.oldIndex=0,t.roleSelectVis=!0,t}return __extends(t,e),t.prototype.initUI=function(){this.tabGroup=this.tab.getComponentsInChildren(cc.Toggle)},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log(e[0][0]),this.oldIndex=this.tabIndex=this.viewStackIndex=D.ArrayUtil.isArrayEmpty(e[0][0])?0:e[0][0],this.roleIndex=e[0][1]?e[0][1]:0;var i=this.viewStackIndex;this.refreshRoleToggle(this.roleIndex),this.roleInfoPanel.curRole=this.roleIndex,4==i&&(this.rolesGroup.active=!1),this.setOpenIndex(i),this.redPoint(),this.initRoleHead()},t.prototype.onClickRoleToggle=function(e,t){console.log("---------------------onCLickToggle ",t),+t!=this.roleIndex&&(h.default.ins().getSubRoleByIndex(+t)?(this.refreshRoleToggle(+t),this.roleIndex=+t,this.setRoleId(+t),this.roleInfoPanel.updateEquipInfo()):console.log("\u89d2\u8272\u7d22\u5f15\u672a\u5f00\u542f"))},t.prototype.initRoleHead=function(){var e,t=this.rolesLabel.length;this.rolesLength=h.default.ins().subRolesLen-1;for(var i=0;i<t;i++)if(e=h.default.ins().getSubRoleByIndex(i))this.rolesLabel[i].string=A.Util.getJobNameSting(e.job);else{if(!g.default.NewRoleConfig[i]){console.log("\u89d2\u8272\u7d22\u5f15"+i+"\u4e0d\u5b58\u5728\uff0c\u51fa\u9519\u7c7b\uff1aRoleWin");continue}this.rolesLabel[i].string=2==i?"4\u8f6c\n\u89e3\u9501":"80\u7ea7\n\u89e3\u9501"}},t.prototype.refreshRoleToggle=function(e){if(e!=this.roleIndex)for(var t=0;t<this.roleHeadSelects.length;t++)this.roleHeadSelects[t].active=t==e},t.prototype.refreshTabToggle=function(e){if(e!=this.tabIndex)for(var t=0;t<this.tabGroup.length;t++)this.tabGroup[t].isChecked=t==e},t.prototype.refreshViewStack=function(e){e!=this.viewStackIndex&&(this.viewStack.forEach(function(t,i){t.active=i==e}),this.viewStackIndex=e)},t.prototype.openSamsara=function(){},t.prototype.inactiveSamsara=function(){},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.checkIsOpen=function(e){return!0},t.prototype.onTabTouch=function(e,t){if(console.log("--------ontabTouch --- ",t),+t!=this.viewStackIndex){var i=+t;this.refreshViewStack(i),this.setOpenIndex(i)}},t.prototype.onTabTouching=function(e){this.checkIsOpen(this.viewStackIndex)||e.preventDefault()},t.prototype.onChange=function(e){},t.prototype.setRoleId=function(e){this.roleInfoPanel.curRole=e,this.setOpenIndex(this.viewStackIndex)},t.prototype.setTabSelectedIndex=function(e){this.viewStackIndex=e,this.oldIndex=e,this.setOpenIndex(e)},t.prototype.setOpenIndex=function(e){if(console.log("setOpenIndex === bot ",e),this.oldIndex&&3==this.oldIndex&&this.oldIndex!=e&&this.getWingPanelInfo())this.doOpenHintWin(1,this.viewStackIndex);else{switch(1!=e&&this.hejiPanel.close(),this.help.node.active=!1,e){case 0:this.rolesGroup.active=!0,console.log(this.roleInfoPanel.node.active),this.refreshViewStack(e),this.roleInfoPanel.open();break;case 1:this.rolesGroup.active=!1,this.refreshViewStack(e),this.hejiPanel.open();break;case 2:y.default.level>=g.default.ZhuanShengConfig.level?(this.refreshViewStack(e),this.zsPanel.open(),this.zsPanel.setData()):_.default.ins().showTips(g.default.ZhuanShengConfig.level+"\u7ea7\u5f00\u542f\u8f6c\u751f");break;case 3:y.default.level>=g.default.WingCommonConfig.openLevel?this.wingPanel.open():_.default.ins().showTips("\u7fbd\u7ffc"+g.default.WingCommonConfig.openLevel+"\u7ea7\u5f00\u542f");break;case 4:this.reincarnationPanel.open(),this.viewStackIndex=4,this.help.node.active=!0}this.oldIndex,this.redPoint()}},t.prototype.onClick=function(e){switch(e.target){case this.closeBtn:if(l.default.ins().close(this),l.default.ins().getView(C.default))break;case this.help:}},t.prototype.delayRedPoint=function(){d.default.ins().isExists(this.redPoint,this)||d.default.ins().doTimer(60,1,this.redPoint,this)},t.prototype.redPoint=function(){f.default.ins().canOpenZSWin()&&!f.default.ins().isMaxLv()&&(f.default.ins().canGet()>0||f.default.ins().canUpgrade()),this.canWingEquip(),v.default.ins().canHejiEquip()||v.default.ins().canExchange()||v.default.ins().canSolve()||v.default.ins().canAcitve(),this.canEquip(),I.default.ins().isOpen(),T.default.ins().checkSysOpen(S.SystemType.RING)&&(R.default.ins().checkHaveUpRing()||R.default.ins().isCanStudySkill()||R.default.ins().isCanUpgradeSkill()||R.default.ins().fireRingRedPoint()||b.default.ins().checkRed()),h.default.ins().subRolesLen},t.prototype.setSamsaraEquipVisible=function(e){},t.prototype.and=function(e){for(var t in e)if(1==e[t])return!0;return!1},t.prototype.canWingEquip=function(){for(var e=[!1,!1,!1],t=p.default.ins().canGradeupWing(),i=p.default.ins().canItemGradeupWing(),n=p.default.ins().canRoleOpenWing(),a=h.default.ins().subRolesLen,o=0;o<a;o++)g.default.WingCommonConfig.openLevel>y.default.level?e[o]=!1:n[o]?e[o]=!0:((t[o]||i[o])&&(e[o]=!0),p.default.ins().canUseAptitudeByRoleID(o)&&(e[o]=!0),p.default.ins().canUseFlyUpByRoleID(o)&&(e[o]=!0));return e},t.prototype.canEquip=function(){var e=[!1,!1,!1];if(this.canChangeEquips&&this.canChangeEquips[0].length||(this.canChangeEquips=c.default.ins().canChangeEquips),this.canChangeEquips)for(var t=h.default.ins().subRolesLen,i=0;i<t;i++){var n=this.canChangeEquips[i];for(var a in n)if(n[a]){e[i]=!0;break}if(0==e[i])for(var o=0;o<5;o++){var r=[];if((r=o>1?B.default.ins().canGradeupLoongSoul(o):R.default.ins().canGradeupRing(o))[i]){e[i]=r[i];break}}for(var s=h.default.ins().getSubRoleByIndex(i),u=!1,l=0;l<8;l++){if(!(u=M.default.ins().setOrangeEquipItemState(l,s))&&l<2&&(u=M.default.ins().setLegendEquipItemState(l>0?2:0,s)),u){var d=m.default.ins().checkEqRedPoint(i,s);u=null!=d?d:u}if(u)break}u||(u=M.default.ins().checkRedPointEx(4,i)),u||(u=M.default.ins().checkRedPointEx(5,i)),u||(u=Boolean(m.default.ins().getHuntGoods(0).length)),u&&(e[i]=u),e[i]||(e[i]=I.default.ins().checkRoleCanAddSpirit(i))}return e},t.prototype.getWingPanelInfo=function(){if(!this.isShow())return!1;if(3!=this.oldIndex)return!1;for(var e,t=h.default.ins().roles.length,i=0;i<t;i++){var n=h.default.ins().getSubRoleByIndex(i).wingsData;e&&0!=e.clearTime?e.clearTime>n.clearTime&&n.clearTime>0&&(e=n):e=n}return this.wingData=e,e.clearTime>0&&p.default.hint},t.prototype.doOpenHintWin=function(e,t){void 0===t&&(t=0)},t.prototype.playUIEff=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.isShow=function(){return null!=this.node&&this.node.active},__decorate([L({type:cc.Button,displayName:"closeBtn"})],t.prototype,"closeBtn",void 0),__decorate([L({type:cc.Node,displayName:"viewStack"})],t.prototype,"viewStack",void 0),__decorate([L({type:cc.Node,displayName:"tab"})],t.prototype,"tab",void 0),__decorate([L({type:E.default,displayName:"roleInfoPanel"})],t.prototype,"roleInfoPanel",void 0),__decorate([L({type:o.default,displayName:"hejiPanel"})],t.prototype,"hejiPanel",void 0),__decorate([L({type:r.default,displayName:"zsPanel"})],t.prototype,"zsPanel",void 0),__decorate([L({type:s.default,displayName:"wingPanel"})],t.prototype,"wingPanel",void 0),__decorate([L({type:u.default,displayName:"reincarnationPanel"})],t.prototype,"reincarnationPanel",void 0),__decorate([L({type:cc.Node,displayName:"redPointGroup"})],t.prototype,"redPointGroup",void 0),__decorate([L({type:cc.Button,displayName:"helpBtn"})],t.prototype,"help",void 0),__decorate([L({type:cc.Node,displayName:"roleGroup"})],t.prototype,"rolesGroup",void 0),__decorate([L({type:cc.Node,displayName:"roleHeadSelects"})],t.prototype,"roleHeadSelects",void 0),__decorate([L({type:cc.Label,displayName:"rolesLabel"})],t.prototype,"rolesLabel",void 0),t=__decorate([w],t)}(n.default);i.default=k,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/ArrayUtil":"ArrayUtil","../../../../core/utils/Util":"Util","../../../../core/view/BaseEuiView":"BaseEuiView","../../../consts/SystemConst":"SystemConst","../../../customComponent/HejiPanel":"HejiPanel","../../../customComponent/RoleInfoPanel":"RoleInfoPanel","../../../customComponent/WingPanel":"WingPanel","../../../customComponent/ZsPanel":"ZsPanel","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../../manager/TimerManager":"TimerManager","../../bag/UserBag":"UserBag","../../gamescene/view/ui/UIView2":"UIView2","../../loongsoul/LongHun":"LongHun","../../opensystem/OpenSystem":"OpenSystem","../../samsara/data/SamsaraModel":"SamsaraModel","../../samsara/view/SamsaraPanel":"SamsaraPanel","../../specialring/LyMark":"LyMark","../../specialring/SpecialRing":"SpecialRing","../../tips/UserTips":"UserTips","../../zs/UserZs":"UserZs","../UserEquip":"UserEquip","../UserRole":"UserRole","../UserSkill":"UserSkill","../Wing":"Wing"}],Role:[function(e,t,i){"use strict";cc._RF.push(t,"c93822BIYpE6LxzKABl2fXm","Role"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./EntityModel"),a=e("../module/skill/data/SkillData"),o=e("../module/rolewin/model/EquipsData"),r=e("../module/forge/model/EquipPos"),s=e("../module/rolewin/model/WingsData"),u=e("../../core/base/AttributeType"),l=e("../module/bag/ItemData"),c=e("../module/heirloom/model/HeirloomData"),d=e("../manager/GlobalConfig"),f=e("../../core/net/PackageID"),p=e("../module/weapons/model/WeaponsData"),h=e("../module/forge/model/ForgeConst"),g=e("./Actor"),y=e("../module/bag/UserBag"),v=e("../../core/base/AttributeData"),m=e("../module/kf/KFServerSys"),b=e("../base/EntityType"),_=e("./SubRoles"),C=e("../module/rolewin/model/JingMaiData"),I=e("../module/loongsoul/LongHunData"),T=e("../module/loongsoul/JadeDataNew"),S=e("../module/rolewin/UserEquip"),R=e("../config/ItemConfig"),B=e("../module/forge/view/ForgeWin"),M=e("../module/forge/UserForge"),E=function(e){function t(){var t=e.call(this)||this;return t.runeDatas=[],t.wingSkillData=[],t.lilianLv=0,t._mbRing=0,t.hsRing=0,t.type=b.EntityType.Role,t}return __extends(t,e),t.getAttrTypeByName=function(e){return this.translate[e]},t.getJobNameByJob=function(e){return this.jobNumberToName[e]},t.getHejiEquipNameByType=function(e){return this.hejiPosName[e]},t.getEquipNameByType=function(e){return this.typeNumberToName[e]},t.getWingEquipNameByType=function(e){return this.typeEquipWingToName[e]},t.getAllForgeLevelByType=function(e){for(var t=0,i=_.default.ins().subRolesLen,n=0;n<i;n++)for(var a=_.default.ins().getSubRoleByIndex(n).equipsData,o=0;o<S.default.FOEGE_MAX;o++)switch(e){case f.PackageID.strongthen:t+=a[o].strengthen;break;case f.PackageID.Gem:t+=a[o].gem;break;case f.PackageID.Zhuling:t+=a[o].zhuling}return t},t.getAllZSLevel=function(){for(var e=0,t=_.default.ins().subRolesLen,i=0;i<t;i++)for(var n=_.default.ins().getSubRoleByIndex(i).equipsData,a=0;a<S.default.FOEGE_MAX;a++){var o=n[a].item.configID,r=d.default.ItemConfig[o];r&&4==R.default.getQuality(r)&&r.zsLevel&&(e+=r.zsLevel)}return e},t.prototype.parser=function(e){var t,i;for(this.title=e.readInt(),this.index=e.readInt(),this.job=e.readInt(),this.sex=e.readInt(),this.power=e.readDouble(),this.skillsData=[],t=0;t<5;t++){var n=e.readInt();this.skillsData.push(a.default.getSkillByJob(this.job,t+1,n))}for(t=0;t<5;t++)e.readInt();for(this.yuanshengData=[],this.yuanshenLv=e.readInt(),t=0;t<6;t++)this.yuanshengData.push(e.readBoolean());for(this.equipsData=[],t=0;t<r.EquipPos.MAX;t++)(i=new o.default).parser(e),this.equipsData.push(i);for(this.exRingsData=[],t=0;t<4;t++)this.exRingsData.push(e.readInt());this.wingsData=new s.default,this.wingsData.parser(e),this.jingMaiData=new C.default,this.jingMaiData.parser(e),this.loongSoulData=new I.default,this.loongSoulData.parser(e),this.parserRune(e),this.parserhHeirloom(e),this.parserhWeapons(e),this.parserAtt(e),this.parserExAtt(e),this.parseJadeData(e),this.parserZhuangbei(e),this.setWingSkill()},t.prototype.parserhWeapons=function(e){this.weapons||(this.weapons=new p.default),this.weapons.weaponsId=e.readInt()},t.prototype.parserhHeirloom=function(e){this.heirloom||(this.heirloom=new c.default),this.heirloom.parser(e)},t.prototype.setWingSkill=function(){this.wingSkillData=[];for(var e=0;e<this.wingsData.lv+1;e++){var t=d.default.WingLevelConfig[e];t&&t.pasSkillId&&this.wingSkillData.push(t.pasSkillId)}},t.prototype.parserModel=function(e){var t=e.readShort();this.zhuZaiData=[];for(var i=0;i<t;i++){var n=new ZhuZaiData;n.parser(e),this.zhuZaiData[n.id-1]=n}},t.prototype.parseJadeData=function(e){this.jadeData||(this.jadeData=new T.default),this.jadeData.parserOther(e)},t.prototype.parserZhuangbei=function(e){this.zhuangbei=[];for(var t=0;t<3;t++)this.zhuangbei.push(e.readInt())},t.prototype.parserRune=function(e){var t=null;this.runeDatas=[];for(var i=0;i<8;i++)(t=new l.default).parser(e),this.runeDatas.push(t)},t.prototype.parseForgeChange=function(e,t){var i=e.readInt();switch(t){case f.PackageID.strongthen:this.equipsData[i].strengthen=e.readInt();break;case f.PackageID.Gem:this.equipsData[i].gem=e.readInt();break;case f.PackageID.Zhuling:this.equipsData[i].zhuling=e.readInt();break;case f.PackageID.Tupo:this.equipsData[i].tupo=e.readInt();break;case 1100:this.equipsData[i].bless=e.readInt()}return i},t.prototype.parserExAtt=function(e){for(var t=e.readShort(),i=0;i<t;i++)this.attributeExData[i]=e.readInt()},t.prototype.parserOtherRole=function(e,t){this.parserAtt(e),this.parserExAtt(e),this._name=e.readString(),t&&(this._servId=e.readInt()),this.job=e.readByte(),this.sex=e.readByte(),this._lv=e.readInt(),this.equipsData=[],this.equipsData[2]=new o.default,this.equipsData[2].item=new l.default,this.equipsData[2].item.configID=e.readInt(),this.equipsData[0]=new o.default,this.equipsData[0].item=new l.default,this.equipsData[0].item.configID=e.readInt(),this.wingsData=new s.default,this.wingsData.lv=e.readInt(),this.wingsData.openStatus=e.readInt(),this.title=e.readInt(),this.guildID=e.readInt(),this.guildName=e.readString(),this.parserZhuangbei(e),this.lilianLv=e.readInt(),this.weaponsId=e.readShort(),this.parserhHeirloom(e),this.camp=e.readShort()},Object.defineProperty(t.prototype,"mbRing",{get:function(){return this._mbRing},set:function(e){this._mbRing=e},enumerable:!0,configurable:!0}),t.prototype.getMinEquipIndexByType=function(e){for(var t=0,i=Number.MAX_VALUE,n=0,a=h.ForgeConst.CAN_FORGE_EQUIP.length,o=0;o<a;++o){var r=h.ForgeConst.CAN_FORGE_EQUIP[o];switch(e){case B.default.Page_Select_Boost:n=this.equipsData[r].strengthen;break;case B.default.Page_Select_Gem:n=this.equipsData[r].gem;var s=d.default.StoneOpenConfig[r];if(g.default.level<s.openLv)continue;break;case B.default.Page_Select_ZhuLing:n=this.equipsData[r].zhuling;break;case 3:n=this.equipsData[r].tupo}i>n&&(i=n,t=r)}return t},t.prototype.getEquipForgeTotalLv=function(e){for(var t=0,i=h.ForgeConst.CAN_FORGE_EQUIP.length;i--;){var n=h.ForgeConst.CAN_FORGE_EQUIP[i];switch(e){case B.default.Page_Select_Boost:t+=this.getEquipByIndex(n).strengthen;break;case B.default.Page_Select_Gem:t+=this.getEquipByIndex(n).gem;break;case B.default.Page_Select_ZhuLing:t+=this.getEquipByIndex(n).zhuling;break;case 3:t+=this.getEquipByIndex(n).tupo}}return t},t.prototype.getEquipForgeLv=function(e,t){var i=0;switch(t){case B.default.Page_Select_Boost:i+=this.getEquipByIndex(e).strengthen;break;case B.default.Page_Select_Gem:i+=this.getEquipByIndex(e).gem;break;case B.default.Page_Select_ZhuLing:i+=this.getEquipByIndex(e).zhuling;break;case 3:i+=this.getEquipByIndex(e).tupo}return i},t.prototype.getAllHeirloomPower=function(){for(var e=0,t=0;t<8;t++)e+=this.getHeirloomSlotPower(t);return e},t.prototype.getHeirloomSlotPower=function(e){var t=this.heirloom.getInfoBySolt(e),i=y.default.getAttrPower(t.attr)||0,n=t.attr_add,a=0,o=this.getEquipByIndex(e);if(o.item.itemConfig){a+=o.item.point;for(var r=0;r<3;r++){var s=this.getEquipForgeLv(e,r),u=M.default.ins().getForgeConfigByPos(e,s,r);a+=y.default.getAttrPower(u.attr)||0}}return i+Math.floor(a*(n/100))},t.prototype.getCurSkillIDs=function(){for(var e=[],t=0;t<this.skillsData.length;t++)e.push(this.skillsData[t].lv1ConfigID);return e},t.prototype.mergeData=function(e){return this.masterHandle=e.masterHandle,this.handle=e.handle,this.type=e.type,this.x=e.x,this.y=e.y,this.attributeData=e.attributeData,this.attributeExData=e.attributeExData,this.team=e.team,this.lilianLv=e.lilianLv,this.name=e.name,this.guildID=e.guildID,this.guildName=e.guildName,this.isMy=e.isMy,this.title=e.title,e instanceof t&&(this.warLevel=e.warLevel,this.mbRing=e.mbRing,this.hsRing=e.hsRing),this},t.prototype.getEquipDataByPos=function(e){return this.equipsData&&this.equipsData[e]?this.equipsData[e]:null},t.prototype.getForgeTotalPower=function(e){for(var t=0,i=h.ForgeConst.CAN_FORGE_EQUIP.length;i--;){var n=h.ForgeConst.CAN_FORGE_EQUIP[i],a=void 0;switch(e){case B.default.Page_Select_Boost:a=this.equipsData[n].strengthen;break;case B.default.Page_Select_ZhuLing:a=this.equipsData[n].zhuling;break;case B.default.Page_Select_Gem:a=this.equipsData[n].gem;break;case 3:a=this.equipsData[n].tupo}if(a>0){var o=M.default.ins().getForgeConfigByPos(n,a,e);t+=Math.floor(y.default.getAttrPower(o.attr))}}return t},t.prototype.getWeaponTotalPower=function(e){var t=0,i=[];if(e>0)for(var n=d.default.WeaponSoulConfig[e],a=0;a<n.actcond.length;a++){var o=n.actcond[a],r=this.weapons.getSlotByInfo(o);if(r)for(var s=0;s<r.attr.length;s++){(h=new v.default).type=r.attr[s].type,h.value=r.attr[s].value,i.push(h)}}else{var u=this.weapons.getInfoData();for(var l in u){var c=u[l];for(var f in c){var p=c[f];if(p&&p.level)for(s=0;s<p.attr.length;s++){var h=new v.default,g=p.attr[s];h.type=g.type,h.value=g.value,i.push(h)}}}}var m=this.weapons.flexibleCount?this.weapons.flexibleCount-1:0,b=d.default.WeaponSoulItemAttr[m];if(i.length&&b)for(a=0;a<b.attr.length;a++){var _=!1;for(s=0;s<i.length;s++)if(i[s].type==b.attr[a].type){_=!0,i[s].value+=b.attr[a].value;break}if(!_){h=new v.default,g=b.attr[a];h.type=g.type,h.value=g.value,i.push(h)}}return t+=Math.floor(y.default.getAttrPower(i))},Object.defineProperty(t.prototype,"name",{get:function(){return this._name},set:function(e){this._name=e},enumerable:!0,configurable:!0}),t.prototype.getNameWithServer2=function(){return this._servId&&m.default.ins().isKF?this.name+"\nS"+this._servId:this.name},Object.defineProperty(t.prototype,"guildAndName",{get:function(){return this.getNameWithServer()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lilianUrl",{get:function(){return""},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lv",{get:function(){return this._lv},enumerable:!0,configurable:!0}),t.prototype.getZhuZaiDataByIndex=function(e){return this.zhuZaiData[e]},t.prototype.getEquipByIndex=function(e){return this.equipsData[e]},t.prototype.hideWeapons=function(){var e=this.getEquipByIndex(0).item.configID;return d.default.EquipConfig[e]&&d.default.EquipConfig[e].noWSoulEff>=1},t.prototype.getEquipLen=function(){return this.equipsData.length},t.prototype.getExRingsData=function(e){return this.exRingsData[e]},t.prototype.setExRingsData=function(e,t){this.exRingsData[e]=t},t.prototype.setZhuZaiData=function(e,t){this.zhuZaiData[e]=t},t.jobNumberToName={0:"\u901a\u7528",1:"\u6218\u58eb",2:"\u6cd5\u5e08",3:"\u9053\u58eb"},t.translate={hp:u.AttributeType.atMaxHp,atk:u.AttributeType.atAttack,def:u.AttributeType.atDef,res:u.AttributeType.atRes,crit:u.AttributeType.atCrit,tough:u.AttributeType.atTough},t.typeNumberToName=["\u6b66\u5668","\u5934\u76d4","\u8863\u670d","\u9879\u94fe","\u62a4\u8155","\u8170\u5e26","\u6212\u6307","\u978b\u5b50","\u5b98\u5370","\u6597\u7b20","\u9762\u7532","\u62ab\u98ce","\u76fe\u724c"],t.hejiPosName=["\u4e7e","\u5dfd","\u574e","\u826e","\u5764","\u9707","\u79bb","\u5151"],t.typeEquipWingToName=["\u7ffc\u67a2","\u7ffc\u722a","\u7fce\u7fbd","\u5f69\u51e4"],t}(n.default);i.default=E,cc._RF.pop()},{"../../core/base/AttributeData":"AttributeData","../../core/base/AttributeType":"AttributeType","../../core/net/PackageID":"PackageID","../base/EntityType":"EntityType","../config/ItemConfig":"ItemConfig","../manager/GlobalConfig":"GlobalConfig","../module/bag/ItemData":"ItemData","../module/bag/UserBag":"UserBag","../module/forge/UserForge":"UserForge","../module/forge/model/EquipPos":"EquipPos","../module/forge/model/ForgeConst":"ForgeConst","../module/forge/view/ForgeWin":"ForgeWin","../module/heirloom/model/HeirloomData":"HeirloomData","../module/kf/KFServerSys":"KFServerSys","../module/loongsoul/JadeDataNew":"JadeDataNew","../module/loongsoul/LongHunData":"LongHunData","../module/rolewin/UserEquip":"UserEquip","../module/rolewin/model/EquipsData":"EquipsData","../module/rolewin/model/JingMaiData":"JingMaiData","../module/rolewin/model/WingsData":"WingsData","../module/skill/data/SkillData":"SkillData","../module/weapons/model/WeaponsData":"WeaponsData","./Actor":"Actor","./EntityModel":"EntityModel","./SubRoles":"SubRoles"}],RongLuExpConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f861f0Gej5FXKlxtpxcQQbl","RongLuExpConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],RongLuLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"64c3126y11CpojE3jifue6C","RongLuLevelConfig");cc._RF.pop()},{}],RuleIconBase:[function(e,t,i){"use strict";cc._RF.push(t,"5ea10+BCYFE04GxBsePubSn","RuleIconBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../manager/GlobalConfig"),a=e("../../../manager/TimerManager"),o=e("../../../../core/base/MessageCenter"),r=e("../../../../core/utils/Util"),s=e("../../../manager/UILoadMgr"),u=function(){function e(e,t){void 0===t&&(t=null),this.isShow=!1,this.isDelayUpdateShow=!1,this.isDelayUpdate=!1,this.id=e,this.tar=t,this.hashCode=r.Util.gethashcode()}return e.prototype.getTar=function(){return this.tar?this.tar:this.createTar()},e.prototype.createTar=function(){var e=n.default.PlayFunConfig[this.id],t="";switch(e.cls){case"zjmhuodong":t="\u6d3b\u52a8";break;case"VipGiftIconRule":t="VIP\u793c\u5305";break;case"LimitTaskIconRule":t="\u9650\u65f6\u6d3b\u52a8";break;case"KFIconRule":t="\u8de8\u670d\u6218\u573a";break;case"GodWeaponIconRule":t="\u795e\u5175";break;case"RingIconRule":t="\u7279\u6212";break;case"CDkeyIconRule":t="\u798f\u5229";break;case"RankIconRule":t="\u6392\u884c";break;case"GuildIconRule":t="\u884c\u4f1a";break;case"MallIconRule":t="\u5546\u57ce";break;case"TreasureIconRule":t="\u5bfb\u5b9d";break;case"FirstRechargeIconRule":t="\u9996\u51b2";break;case"MaBiIconRule":t="\u9886\u53d6\u9ebb\u75f9";break;case"MonthCardIconRule":t="\u6708\u5361";break;case"BossIconRule":t="BOSS";break;case"FbBtnIconRule":t="\u526f\u672c";break;case"LadderBtnIconRule":t="\u7ade\u6280";break;case"MailIconRule":t="\u90ae\u4ef6";break;case"FriendsIconRule":t="\u793e\u4ea4";break;case"CityIconRule":t="\u56de\u57ce";break;case"ActivityIconRule":t="\u5f00\u670d\u6d3b\u52a8";break;case"CityMonsterIconRule":t="\u602a\u7269\u653b\u57ce";break;default:t=e.cls}var i=null;i="\u602a\u7269\u653b\u57ce"==t||"\u7ade\u6280"==t||"\u793e\u4ea4"==t||"\u90ae\u4ef6"==t||"BOSS"==t||"\u526f\u672c"==t?s.default.inst.getPrefab(s.prefabName.ruleSquare):s.default.inst.getPrefab(s.prefabName.ruleCircle),console.log("[this.id] rulename :",t,this.id);var a=cc.instantiate(i);return a.ruleType=i.name,a.getChildByName("rulename").getComponent(cc.Label).string=t,this.tar=a,a},e.prototype.getConfig=function(){return n.default.PlayFunConfig[this.id]},e.prototype.delayUpdateShow=function(){this.isDelayUpdateShow||(this.isDelayUpdateShow=!0,a.default.ins().doTimer(100,1,this.updateShow,this))},e.prototype.updateShow=function(){this.isDelayUpdateShow=!1,e.updateShow(this)},e.prototype.delayUpdate=function(){this.isDelayUpdate||(this.isDelayUpdate=!0,a.default.ins().doTimer(100,1,this.update,this))},e.prototype.update=function(){this.isDelayUpdate=!1,e.update(this)},e.prototype.checkShowIcon=function(){return!0},e.prototype.checkShowRedPoint=function(){return 0},e.prototype.getEffName=function(e){return null},e.prototype.tapExecute=function(){},e.prototype.addShowEvents=function(){if(this.showMessage)for(var e=0,t=this.showMessage;e<t.length;e++){var i=t[e];o.default.ins().addListener(i,this.delayUpdateShow,this)}},e.prototype.addRedEvents=function(){if(this.updateMessage)for(var e=0,t=this.updateMessage;e<t.length;e++){var i=t[e];o.default.ins().addListener(i,this.delayUpdate,this)}},e.prototype.removeRedEvents=function(){if(this.updateMessage)for(var e=0,t=this.updateMessage;e<t.length;e++){var i=t[e];o.default.ins().removeListener(i.funcallname,this.delayUpdate,this)}},e.prototype.removeEvents=function(){o.default.ins().removeAll(this)},e}();i.default=u,cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../../core/utils/Util":"Util","../../../manager/GlobalConfig":"GlobalConfig","../../../manager/TimerManager":"TimerManager","../../../manager/UILoadMgr":"UILoadMgr"}],RuneAttrTypeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"c3a657+LhJAZIvZ/WLKujGg","RuneAttrTypeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.type=0}}();i.default=n,cc._RF.pop()},{}],RuneBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3b8d2NgXihBS4Az8Hwcssyi","RuneBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.type=0,this.expend=0,this.gain=0,this.chip=0,this.attr=[],this.equipAttr=[],this.exAttr=[],this.specialAttr=[],this.specialDesc=null,this.power=0}}();i.default=n,cc._RF.pop()},{}],RuneComposeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b32762RnQdJPpQA4xIgMF8B","RuneComposeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],RuneConfigMgr:[function(e,t,i){"use strict";cc._RF.push(t,"f8889j9T1pIpb9cZeN4lvYM","RuneConfigMgr"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../../manager/GlobalConfig"),o=e("../../../../core/base/ErrorLog"),r=e("../../../../core/base/AttributeData"),s=function(e){function t(){var t=e.call(this)||this;return t.exchangeList=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getBaseCfg=function(e,t){void 0===t&&(t=!1);var i=a.default.RuneBaseConfig;return o.default.Assert(i,"RuneBaseConfigs is null")?null:i[t?e.configID+1:e.configID]},t.prototype.getBaseCfgByItemConfig=function(e){var t=a.default.RuneBaseConfig;return o.default.Assert(t,"RuneBaseConfigs is null")?null:t[e.id]},t.prototype.getConverCfgByItemConfig=function(e){var t=a.default.RuneConverConfig;return o.default.Assert(t,"RuneConverConfigs is null")?null:t[e.configID]},t.prototype.getLockCfg=function(e){var t=a.default.RuneLockPosConfig;return o.default.Assert(t,"RuneLockPosConfigs is null")?null:t[e]},t.prototype.getNameCfg=function(e){var t=a.default.RuneNameConfig;return o.default.Assert(t,"RuneNameConfigs is null")?null:t[e]},t.prototype.getOtherCfg=function(){var e=a.default.RuneOtherConfig;return o.default.Assert(e,"RuneOtherConfig is null")?null:e},t.prototype.getcfgAttrData=function(e,t){if(void 0===t&&(t=!0),!e)return"";var i="";return i+=this.getAttrNamesByList(e.attr,0,t),i+=this.getAttrNamesByList(e.equipAttr,1,t),i+=this.getAttrNamesByList(e.exAttr,2,t),i+=this.getAttrNamesByList(e.specialAttr,3,t)},t.prototype.getAttrNamesByList=function(e,t,i){var n="";if(!e||e.length<=0)return"";switch(t){case 0:for(var a in e)e[a]&&(n+=i?r.default.getAttrStrByType(e[a].type)+"\n":"+"+e[a].value+"\n");break;case 1:for(var a in e)e[a]&&(n+=i?r.default.getEEquipAttrStrByType(e[a].type)+"\n":"+"+e[a].value+"%\n");break;case 2:for(var a in e)e[a]&&(n+=i?r.default.getExtAttrStrByType(e[a].type)+"\n":"+"+e[a].value+"\n");break;case 3:for(var a in e)e[a]&&(n+=i?(1==e[a].type?"\u91d1\u5e01":"\u7ecf\u9a8c")+"\n":"+"+e[a].value+"%\n")}return n},t.prototype.getcfgAttrDesc=function(e,t){if(void 0===t&&(t=!1),!e)return"";var i="";return i+=this.getAttrDescByList(e.attr,0,t),i+=this.getAttrDescByList(e.equipAttr,1,t),i+=this.getAttrDescByList(e.exAttr,2,t),(i+=this.getAttrDescByList(e.specialAttr,3,t)).lastIndexOf("\n")==i.length-1&&(i=i.substring(0,i.length-1)),i},t.prototype.getAttrDescByList=function(e,t,i){void 0===i&&(i=!1);var n="";if(!e||e.length<=0)return"";switch(t){case 0:for(var a in e)e[a]&&(i?5==e[a].type||(6==e[a].type?n+="\u7269\u9632\u3001\u9b54\u9632 +"+e[a].value+"\n":n+=r.default.getAttrNameByAttrbute(e[a],!0," + ")+"\n"):n+=r.default.getAttrNameByAttrbute(e[a],!0," + ")+"\n");break;case 1:for(var a in e)e[a]&&(n+=r.default.getEEquipAttrStrByType(e[a].type)+"  +"+e[a].value+"%\n");break;case 2:for(var a in e)e[a]&&(n+=r.default.getExAttrNameByAttrbute(e[a],!0," + ")+"\n");break;case 3:for(var a in e)e[a]&&(n+=(1==e[a].type?"\u91d1\u5e01":"\u7ecf\u9a8c")+"  +"+e[a].value+"%\n")}return n},t.prototype.getAttrByList=function(e,t,i){void 0===i&&(i=!1);var n="";if(!e||e.length<=0)return"";switch(t){case 0:for(var a in e)e[a]&&(n+=r.default.getAttrNameByAttrbute(e[a],!0,"\uff1a",!1,16298305)+"\n");break;case 1:for(var a in e)e[a]&&(n+=r.default.getEEquipAttrStrByType(e[a].type)+"\uff1a|C:16298305&T:"+e[a].value+"%\n");break;case 2:for(var a in e)e[a]&&(n+=r.default.getExAttrNameByAttrbute(e[a],!0,"\uff1a",16298305)+"\n");break;case 3:for(var a in e)e[a]&&(n+=(1==e[a].type?"\u91d1\u5e01":"\u7ecf\u9a8c")+"\uff1a|C:16298305&T:"+e[a].value+"%\n")}return n},t.prototype.getExchangeDataList=function(){if(this.exchangeList.length>0)return this.exchangeList;var e=a.default.RuneConverConfig;for(var t in e)this.exchangeList.push(e[t]);return this.exchangeList.sort(this.sortExchange),this.exchangeList},t.prototype.sortExchange=function(e,t){return e.checkpoint<t.checkpoint?-1:e.checkpoint>t.checkpoint?1:e.id-t.id},t}(n.default);i.default=s,cc._RF.pop()},{"../../../../core/base/AttributeData":"AttributeData","../../../../core/base/BaseClass":"BaseClass","../../../../core/base/ErrorLog":"ErrorLog","../../../manager/GlobalConfig":"GlobalConfig"}],RuneConverConfig:[function(e,t,i){"use strict";cc._RF.push(t,"74cecAAPhRAl6hR6u8OYYQe","RuneConverConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.checkpoint=0,this.conversion=0}}();i.default=n,cc._RF.pop()},{}],RuneDataMgr:[function(e,t,i){"use strict";cc._RF.push(t,"65c254uUfJMLLuWmwwsKBZg","RuneDataMgr"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../../entity/SubRoles"),o=e("../../../config/ItemConfig"),r=e("./RuneRedPointMgr"),s=function(e){function t(){var t=e.call(this)||this;return t.posIsWear=null,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getRoleRune=function(e){var t=a.default.ins().getSubRoleByIndex(e);return t?t.runeDatas:null},t.prototype.getRune=function(e,t){var i=this.getRoleRune(e);return i?i[t]:null},t.prototype.replaceRune=function(e,t,i){var n=this.getRoleRune(e);n&&t>=0&&(n[t].configID=i)},t.prototype.getMinRune=function(e,t){void 0===t&&(t=!1);var i=this.getRoleRune(e);if(!i)return null;for(var n=[],a=0;a<i.length;a++)i[a].itemConfig&&n.push(i[a]);if(n.sort(function(e,t){if(e.itemConfig.id%100<t.itemConfig.id%100)return-1;if(e.itemConfig.id%100>t.itemConfig.id%100)return 1;var i=o.default.getQuality(e.itemConfig),n=o.default.getQuality(t.itemConfig);return i>n?-1:i<n?1:0}),t)for(var s=0,u=n;s<u.length;s++){var l=u[s];if(r.default.ins().checkSingleUpgrade(l))return l}return n[0]},t}(n.default);i.default=s,cc._RF.pop()},{"../../../../core/base/BaseClass":"BaseClass","../../../config/ItemConfig":"ItemConfig","../../../entity/SubRoles":"SubRoles","./RuneRedPointMgr":"RuneRedPointMgr"}],RuneLockPosConfig:[function(e,t,i){"use strict";cc._RF.push(t,"4d128Q6YclNB647GVJGXi/l","RuneLockPosConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.pos=0,this.lockLv=0}}();i.default=n,cc._RF.pop()},{}],RuneNameConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7c0ddudHV5DYaJoWo/bmciz","RuneNameConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.type=0,this.runeName=""}}();i.default=n,cc._RF.pop()},{}],RuneOtherConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5cab1StU+hJN5vPGvRBbXCM","RuneOtherConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.zsLevel=0,this.maxEquip=0,this.maxQuality=0,this.maxDecompose=5}}();i.default=n,cc._RF.pop()},{}],RuneRedPointMgr:[function(e,t,i){"use strict";cc._RF.push(t,"3b39corthZNa4PUFEDH+9DX","RuneRedPointMgr"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../../config/ItemConfig"),o=e("./RuneConfigMgr"),r=e("../../../entity/Actor"),s=e("./RuneDataMgr"),u=e("../../../entity/SubRoles"),l=e("../../fb/SkyLevelModel"),c=e("../../bag/UserBag"),d=e("../../../../core/base/ErrorLog"),f=e("../../../Utils/EgretUtils"),p=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.checkSingleUpgrade=function(e){if(!this.checkOpen())return!1;var t=e.itemConfig;if(this.assert(t,"ItemConfig("+e.configID+")"))return!1;if(!o.default.ins().getBaseCfg(e,!0))return!1;var i=o.default.ins().getBaseCfg(e);return!this.assert(i,"RuneBaseConfig")&&r.default.runeShatter>=i.expend},t.prototype.checkRoleUpgrade=function(e){if(!this.checkOpen())return!1;var t=s.default.ins().getRoleRune(e);if(t)for(var i=0,n=t;i<n.length;i++){var a=n[i];if(a&&a.itemConfig&&a.itemConfig.id>0&&this.checkSingleUpgrade(a))return!0}return!1},t.prototype.checkAllUpgrade=function(){if(!this.checkOpen())return!1;for(var e=u.default.ins().subRolesLen,t=0;t<e;t++)if(this.checkRoleUpgrade(t))return!0;return!1},t.prototype.checkSingleReplace=function(e,t){return!1},t.prototype.checkRoleReplace=function(e){if(!this.checkOpen())return!1;var t=s.default.ins().getRoleRune(e);if(t)for(var i=0,n=t;i<n.length;i++){var a=n[i];if(a&&a.itemConfig&&a.itemConfig.id>0&&this.checkSingleReplace(e,a))return!0}return!1},t.prototype.checkAllReplace=function(){if(!this.checkOpen())return!1;for(var e=u.default.ins().subRolesLen,t=0;t<e;t++)if(this.checkRoleReplace(t))return!0;return!1},t.prototype.checkSingleInlay=function(e,t){if(!this.checkOpen())return!1;var i=o.default.ins().getLockCfg(t);if(this.assert(i,"RuneLockPosConfig("+t+")"))return!1;var n=i.lockLv;if(l.default.ins().cruLevel>n){var r=s.default.ins().getRune(e,t);if(r&&r.configID<=0)for(var u=c.default.ins().getBagGoodsBySort(1),d=0,f=s.default.ins().getRoleRune(e),p=!0,h=0,g=u;h<g.length;h++){var y=g[h];if(y&&(d=a.default.getSubType(y.itemConfig))>0&&f){if(p=!0)for(var v=0,m=f;v<m.length;v++){var b=m[v];if(b&&b.itemConfig&&b.itemConfig.id>0&&d==a.default.getSubType(b.itemConfig)){p=!1;break}}if(p)return!0}}}return!1},t.prototype.checkRoleInlay=function(e){if(!this.checkOpen())return!1;for(var t=0;t<o.default.ins().getOtherCfg().maxEquip;t++)if(this.checkSingleInlay(e,t))return!0;return!1},t.prototype.checkAllInlay=function(){if(!this.checkOpen())return!1;for(var e=u.default.ins().subRolesLen,t=0;t<e;t++)if(this.checkRoleInlay(t))return!0;return!1},t.prototype.checkRoleAllSituation=function(e){if(!this.checkOpen())return!1;var t=this.checkRoleInlay(e);return t||(t=this.checkRoleUpgrade(e)),t||(t=this.checkRoleReplace(e)),t},t.prototype.checkAllSituation=function(e){if(void 0===e&&(e=!0),!this.checkOpen())return!1;var t=this.checkAllInlay();return t||(t=this.checkAllUpgrade()),t||(t=this.checkAllReplace()),e&&(t||(t=this.checkCanExchange())),t},t.prototype.checkCanExchange=function(){for(var e=o.default.ins().getExchangeDataList(),t=0;t<e.length;t++){var i=e[t];if(r.default.runeExchange>=i.conversion)return!0}return!1},t.prototype.checkOpen=function(){return r.default.level>=o.default.ins().getOtherCfg().zsLevel},t.prototype.assert=function(e,i){return d.default.Assert(e,"["+f.default.getQualifiedClassName(t)+"] "+i+"is null")},t}(n.default);i.default=p,cc._RF.pop()},{"../../../../core/base/BaseClass":"BaseClass","../../../../core/base/ErrorLog":"ErrorLog","../../../Utils/EgretUtils":"EgretUtils","../../../config/ItemConfig":"ItemConfig","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../bag/UserBag":"UserBag","../../fb/SkyLevelModel":"SkyLevelModel","./RuneConfigMgr":"RuneConfigMgr","./RuneDataMgr":"RuneDataMgr"}],RuneTipsWin:[function(e,t,i){"use strict";cc._RF.push(t,"1fad4LGyAdI0oAuKETLlWm5","RuneTipsWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../../core/base/ViewManager"),r=e("../../rune/Rune"),s=e("./BagWin"),u=e("../../merge/model/MergeCC"),l=e("../../../config/ItemConfig"),c=e("../../../manager/GlobalConfig"),d=cc._decorator,f=d.ccclass,p=d.property,h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.nameLabel=null,t.attrName=null,t.attrValue=null,t.attrDes=null,t.randomAttr=null,t.runeAttr=null,t.userBtn=null,t}return __extends(t,e),t.prototype.initData=function(){},t.prototype.initUI=function(){this.cur_desc=""},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];console.log("----------runeTipsWin ------------ open "),cc.log(e);e[0][0][0];this.item_config_id=e[0][0][1],this.cur_desc=e[0][0][2],this.cur_desc2=e[0][0][3],this.addTouchEvent(this.userBtn,this.onUser),this.setData(this.item_config_id)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.otherClose=function(e){o.default.ins().close(this)},t.prototype.onUser=function(e){var t=r.default.ins().getRuneMergeByID(this.item_config_id);t&&o.default.ins().open(s.default,3,u.MergeType.Rune,t.mixId[1],r.default.ins().getMergeIndexByType(t.mixId[1],t.id))},t.prototype.setData=function(e){var t=c.default.ItemConfig[e];if(t){var i=t.id%100;0==i?this.cur_desc2||" lv."+i:0!=l.default.getSubType(t)&&" lv."+i}},__decorate([p({type:cc.RichText,displayName:"nameLabel"})],t.prototype,"nameLabel",void 0),__decorate([p({type:cc.Label,displayName:"attrName"})],t.prototype,"attrName",void 0),__decorate([p({type:cc.Label,displayName:"attrValue"})],t.prototype,"attrValue",void 0),__decorate([p({type:cc.Label,displayName:"attrDes"})],t.prototype,"attrDes",void 0),__decorate([p({type:cc.Label,displayName:"randomAttr"})],t.prototype,"randomAttr",void 0),__decorate([p({type:cc.Node,displayName:"runeAttr"})],t.prototype,"runeAttr",void 0),__decorate([p({type:cc.Button,displayName:"userBtn"})],t.prototype,"userBtn",void 0),t=__decorate([f],t)}(n.default);i.default=h,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../config/ItemConfig":"ItemConfig","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../merge/model/MergeCC":"MergeCC","../../rune/Rune":"Rune","./BagWin":"BagWin"}],Rune:[function(e,t,i){"use strict";cc._RF.push(t,"9b3e6VWJ2RM7ok7bjah5CGD","Rune"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../manager/GlobalConfig"),r=e("../zs/UserZs"),s=e("../../entity/Actor"),u=e("../merge/model/MergeCC"),l=e("../bag/UserBag"),c=e("../../config/ItemConfig"),d=e("./data/RuneDataMgr"),f=e("./data/RuneConfigMgr"),p=e("../../../core/base/MessageCenter"),h=function(e){function t(){var i=e.call(this)||this;return i.sysId=a.PackageID.Rune,p.default.compile(t),i.regNetMsg(1,i.doInlay),i.regNetMsg(2,i.doUpgrade),i.regNetMsg(3,i.doOneKeyDecompose),i.regNetMsg(5,i.postHuntRuneInfo),i.regNetMsg(6,i.postBestListInfo),i.regNetMsg(8,i.postRuneBoxGift),i.regNetMsg(10,i.postDelRune),i.boxs=[],i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendInlay=function(e,t,i){var n=this.getBytes(1);n.writeShort(e),n.writeShort(t),n.writeDouble(i),this.sendToServer(n)},t.prototype.doInlay=function(e){var t=Boolean(e.readShort()),i=0,n=0,a=0;t&&(i=e.readShort(),n=e.readShort(),a=e.readInt()),this.postInlayResult([t,i,n,a])},t.prototype.postInlayResult=function(e){return e},t.prototype.sendUpgrade=function(e,t){var i=this.getBytes(2);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.prototype.doUpgrade=function(e){Boolean(e.readByte())},t.prototype.postUpgradeResult=function(e){return e},t.prototype.sendOneKeyDecompose=function(e){var t=e.length,i=this.getBytes(3);i.writeInt(t);for(var n=0;n<t;n++)i.writeInt(e[n].configID);this.sendToServer(i)},t.prototype.doOneKeyDecompose=function(e){var t=Boolean(e.readByte()),i=e.readInt();this.postOneKeyDecomposeResult([t,i])},t.prototype.postOneKeyDecomposeResult=function(e){return e},t.prototype.sendExchangeRune=function(e){var t=this.getBytes(4);t.writeUnsignedInt(e),this.sendToServer(t)},t.prototype.sendHuntRune=function(e){var t=this.getBytes(5);t.writeShort(e),this.sendToServer(t)},t.prototype.postHuntRuneInfo=function(e){},t.prototype.postBestListInfo=function(e){for(var t=e.readUnsignedByte(),i=[],n=0;n<t;n++)i[n]=[e.readString(),e.readInt()];return i.reverse(),i},t.prototype.sendRuneBoxGift=function(e){var t=this.getBytes(7);t.writeInt(e),this.sendToServer(t)},t.prototype.postRuneBoxGift=function(e){this.RuneRewards=e.readInt(),this.runeCount=e.readInt(),this.hope=e.readInt();var i=0;for(var n in o.default.FuwenTreasureRewardConfig){var a=o.default.FuwenTreasureRewardConfig[n];this.boxs[i]=this.RuneRewards>>a.id&1?t.ISNGET:this.runeCount>=a.needTime?t.CANGET:t.UNGET,i++}},t.prototype.getIsGetBox=function(){for(var e=0;e<t.BoxSum;e++)switch(t.ins().boxs[e]){case t.UNGET:break;case t.CANGET:return!0;case t.ISNGET:}return!1},t.prototype.sendRuneMerge=function(e){var t=this.getBytes(9);t.writeInt(e),this.sendToServer(t)},t.prototype.postDelRune=function(e){},t.prototype.isOpen=function(){var e=o.default.MergeTotal[4];return(e.openZs||0)<=r.default.ins().lv&&(e.openLv||0)<=s.default.level},t.prototype.getRuneMergeEquipByLv=function(e){var t=[],i=o.default.RuneComposeConfig;for(var n in i)i[n].mixId[1]==e&&t.push({type:u.MergeType.Rune,id:i[n].id});return t},t.prototype.isRuneCanMergeByID=function(e){var t=o.default.RuneComposeConfig[e],i=(t.material,l.default.ins().getBagGoodsCountById(l.default.BAG_TYPE_OTHTER,t.material[0])),n=l.default.ins().getBagGoodsCountById(l.default.BAG_TYPE_OTHTER,t.material[1]),a=l.default.ins().getBagGoodsCountById(l.default.BAG_TYPE_OTHTER,o.default.RuneOtherConfig.goldItemId);return i>0&&n>0&&a>=t.count},t.prototype.isRuneCanMergeByType=function(e){var t=o.default.RuneComposeConfig;for(var i in t)if(t[i].mixId[1]==e&&this.isRuneCanMergeByID(t[i].id))return!0;return!1},t.prototype.isRuneCanMerge=function(){var e=o.default.RuneComposeConfig;for(var t in e)if(this.isRuneCanMergeByID(e[t].id))return!0;return!1},t.prototype.getRuneMergeByID=function(e){var t=o.default.RuneComposeConfig;for(var i in t){var n=t[i];for(var a in n.material)if(n.material[a]==e)return n}return null},t.prototype.getIsMergeByID=function(e){var t=o.default.ItemConfig[e],i=o.default.RuneComposeConfig;for(var n in i){var a=o.default.ItemConfig[n];if(c.default.getSubType(t)==c.default.getSubType(a))return!0}return!1},t.prototype.getMergeIndexByType=function(e,t){var i=o.default.RuneComposeConfig,n=0;for(var a in i)if(i[a].mixId[1]==e){if(t==i[a].id)return n;n++}return n},t.prototype.isEquipMerge=function(e,t,i){var n=this.isMergeId(e),a=o.default.RuneComposeConfig[n];if(!a)return!1;o.default.ItemConfig[e];var r=d.default.ins().getRoleRune(t);if(!r)return!1;for(var s=d.default.ins().getRune(t,i),u=r.length,l=0;l<u;l++){var p=r[l];if(f.default.ins().getBaseCfg(p))for(var h=this.getIsEquipMerge(a.checkMaterial,n),g=0;g<h.length;g++){var y=o.default.ItemConfig[h[g]];if(c.default.getSubType(y)==c.default.getSubType(p.itemConfig)&&s){if(s.configID<=0&&(this.getIsMergeByID(e)||this.getRoleIsHasMerge(h,t)))return!0;if(s.itemConfig)if(this.getCurIsType(h,c.default.getSubType(s.itemConfig))&&(this.getIsMergeByID(e)||this.getRoleIsHasMerge(h,t)))return!0}}}return!1},t.prototype.getRoleIsHasMerge=function(e,t){var i,n=d.default.ins().getRoleRune(t);if(!n)return!1;for(var a=n.length,r=0;r<a;r++){var s=n[r];if((i=f.default.ins().getBaseCfg(s))&&this.getIsMergeByID(i.id))for(var u=0;u<e.length;u++){var l=o.default.ItemConfig[e[u]];if(c.default.getSubType(s.itemConfig)==c.default.getSubType(l))return!0}}return!1},t.prototype.getCurIsType=function(e,t){for(var i=!0,n=0;n<e.length;n++){var a=o.default.ItemConfig[e[n]];if(c.default.getSubType(a)==t){i=!1;break}}return i},t.prototype.getIsEquipMerge=function(e,t){for(var i=[],n=0;n<e.length;n++)i.push(e[n]);return i.push(t),i},t.prototype.isMergeId=function(e){var t=e,i=o.default.ItemConfig[e],n=o.default.RuneComposeConfig;for(var a in n){var r=o.default.ItemConfig[a];if(c.default.getSubType(i)==c.default.getSubType(r))return parseInt(a);for(var s in n[a].material){var u=o.default.ItemConfig[n[a].material[s]];if(c.default.getSubType(i)==c.default.getSubType(u))return parseInt(a)}}return t},t.prototype.isCanEquip=function(e,t,i,n){var a,r=o.default.ItemConfig[e],s=d.default.ins().getRoleRune(t);if(!s)return!0;for(var u=s.length,l=0;l<u;l++){var p=s[l];if((a=f.default.ins().getBaseCfg(p))&&p.itemConfig){var h=o.default.RuneComposeConfig[a.id];if(!h)continue;for(var g=h.checkMaterial,y=0;y<g.length;y++){var v=o.default.ItemConfig[g[y]];if(c.default.getSubType(v)==c.default.getSubType(r)){if(0==i)return!1;var m=o.default.ItemConfig[i];if(c.default.getSubType(m)==c.default.getSubType(r))return!1}}}}return!0},t.prototype.getMergeRune=function(e,t,i){var n=this.isMergeId(e),a=(o.default.ItemConfig[e],o.default.RuneComposeConfig[n]);if(!a)return null;var r,s=d.default.ins().getRoleRune(t);if(!s)return null;for(var u=s.length,l=0;l<u;l++){var p=s[l];if(r=f.default.ins().getBaseCfg(p))for(var h=this.getIsEquipMerge(a.checkMaterial,n),g=0;g<h.length;g++){var y=o.default.ItemConfig[h[g]];if(c.default.getSubType(y)==c.default.getSubType(p.itemConfig)&&i&&i.configID!=r.id&&this.getIsMergeByID(e))return["\u66f4\u6362"+o.default.ItemConfig[a.id].name+"\u5c06\u540c\u65f6\u8131\u4e0b"+o.default.ItemConfig[r.id].name,""+l]}}return null},t.UNGET=0,t.CANGET=1,t.ISNGET=2,t.BoxSum=5,t}(n.default);i.default=h,window.GameSystem.push(h.ins.bind(h)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../config/ItemConfig":"ItemConfig","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../merge/model/MergeCC":"MergeCC","../zs/UserZs":"UserZs","./data/RuneConfigMgr":"RuneConfigMgr","./data/RuneDataMgr":"RuneDataMgr"}],SDKConfig:[function(e,t,i){"use strict";cc._RF.push(t,"2f877P9WfRPzIWMlVNU3iuL","SDKConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],SamsaraCC:[function(e,t,i){"use strict";cc._RF.push(t,"8cb42u4hzpGi6xLFxM793Pm","SamsaraCC"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("../../../core/net/PackageID"),r=e("../../../core/base/MessageCenter"),s=e("./data/SamsaraModel"),u=e("./data/SamsaraVO"),l=e("../tips/UserTips"),c=function(e){function t(){var i=e.call(this)||this;return i.sysId=o.PackageID.Samsara,r.default.compile(t),i.regNetMsg(1,i.postSamsaraInfo),i.regNetMsg(4,i.postCompose),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.exchangeSamsaraExp=function(e){var t=this.getBytes(2);t.writeByte(e),this.sendToServer(t)},t.prototype.upgradeSamsaraLv=function(){var e=this.getBytes(3);this.sendToServer(e)},t.prototype.postSamsaraInfo=function(e){var t=!s.default.ins().samsaraInfo,i=s.default.ins().samsaraInfo?s.default.ins().samsaraInfo.exp:0;if(s.default.ins().samsaraInfo=new u.default(e.readInt(),e.readInt(),e.readShort(),e.readShort(),e.readShort()),!t){var n=s.default.ins().samsaraInfo.exp-i;n&&l.default.ins().showTips("|C:0x00ff00&T:\u83b7\u5f97\u4e1a\u529b"+n+"|")}},t.prototype.requestCompose=function(e,t){var i=this.getBytes(4);i.writeInt(e),i.writeShort(t),this.sendToServer(i)},t.prototype.postCompose=function(e){},t}(a.default);i.default=c,window.GameSystem.push(c.ins.bind(c)),function(e){e[e.level=1]="level",e[e.normal=2]="normal",e[e.advanced=3]="advanced"}(n||(n={})),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../tips/UserTips":"UserTips","./data/SamsaraModel":"SamsaraModel","./data/SamsaraVO":"SamsaraVO"}],SamsaraEquipTips:[function(e,t,i){"use strict";cc._RF.push(t,"4d2b5Ebx8RNwIf4YFJyBsCP","SamsaraEquipTips"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../entity/Role"),r=e("../../../entity/SubRoles"),s=e("../../../../core/base/ViewManager"),u=e("../data/SamsaraModel"),l=e("../../../config/ItemConfig"),c=e("../../../manager/GlobalConfig"),d=e("../../forge/model/EquipPos"),f=e("../../../../core/utils/CommonUtils"),p=e("../../../../core/base/AttributeType"),h=e("../../bag/UserBag"),g=e("../../zs/UserZs"),y=e("../../../../core/utils/ColorUtil"),v=cc._decorator,m=v.ccclass,b=v.property,_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.bgClose=null,t.nameLabel=null,t.score=null,t.type=null,t.lv=null,t.career=null,t.powerLabel=null,t.attr0=null,t.attr1=null,t.attr2=null,t.attr3=null,t.attr4=null,t.attr5=null,t.spiritGroup=null,t.spiritLv=null,t.spiritCost=null,t.attr6=null,t.attr7=null,t.attr8=null,t.attr9=null,t.suitGroup=null,t.suitName=null,t.suitNum=null,t.suitState=null,t.attr12=null,t.attr13=null,t.attr14=null,t.attr15=null,t.attr16=null,t.chainName=null,t.chainDes=null,t.soulName=null,t.soulDes=null,t.spiritBtn=null,t.soulBtn=null,t.redPoint=null,t.redPoint1=null,t.soulAddAttr0=null,t.soulAddAttr1=null,t.soulAddAttr2=null,t.soulAddAttr3=null,t.soulAddAttr4=null,t.soulDescLable=null,t}return __extends(t,e),t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(console.log("onCLIck SamsareEquipTips--------------------------------"),console.log(e),void 0!=e[1]){this.roleIndex=-1,this.roleModel=e[1],this.index=e[2];var i=e[0],n=!1;if(i>=0&&i<=r.default.ins().subRolesLen-1)r.default.ins().getSubRoleByIndex(i).handle==this.roleModel.handle&&(n=!0,this.roleIndex=this.roleModel.index);var a=this.roleModel.getEquipByIndex(this.index);this.setData(a),n?(this.addTouchEvent(this.spiritBtn,this.addSpirit),this.addTouchEvent(this.soulBtn,this.addSoul),this.spiritBtn.node.active=!0,this.soulBtn.node.active=!0):(this.spiritBtn.node.active=!1,this.soulBtn.node.active=!1)}else this.setTips(e[0]);this.addTouchEvent(this.bgClose,this.closeWin)},t.prototype.setTips=function(e){},t.prototype.setData=function(e){this.soulBtn.node.active=!0,this.spiritBtn.node.active=!0,this.redPoint.active=this.roleIndex>=0&&u.default.ins().checkEquipPosCanAddSpirit(this.roleModel,this.index),this.redPoint1.active=this.roleIndex>=0&&u.default.ins().checkUpgradeSoul(this.roleModel,this.index);var t=e.item.itemConfig;this.updateBaseView(t,e.soulLv);var i,n=c.default.EquipConfig[t.id],a=e.spiritLv;if(0==a&&0==e.spiritExp)i=this.index==d.EquipPos.HAT;else{var o=a==f.default.getObjectLength(c.default.ReincarnateSpirit[this.index]);i=this.index==d.EquipPos.HAT,this.setSpirit(e.spiritExp,e.spiritLv,o,i)}this.updateBaseAttr(t.id,i);var r=u.default.ins().lowSuitEquips(this.index,this.roleModel);this.setSuitAttr(t.id,r),this.score.string="\u8bc4\u5206\uff1a"+e.item.point;for(var s=0,l=0;l<r.length;l++)r[l]&&s++;var p=4==s,g=u.default.ins().getReincarnateSuit(t.id),y=e.item.point;if(y=this.setSoulAttr(e.soulLv,t.id,y),y=this.setSoulLink(e.soulLv,u.default.ins().getSoulLinkLv(this.roleModel,this.index,e.soulLv),t.id,y),this.roleModel&&n&&n.baseAttr2){var v=n.baseAttr2.value/100;y+=u.default.ins().getExtraPower(this.roleModel,v,n.baseAttr2.type)}if(p&&(y+=h.default.getAttrPower(g.attrs)),a>0){var m=f.default.getObjectByUnionAttr(c.default.ReincarnateSpirit,this.index,a);y+=h.default.getAttrPower(m.attrs)}y>>=0,this.powerLabel.string=""+y},t.prototype.updateBaseView=function(e,t){void 0===t&&(t=0);l.default.getQuality(e);var i=l.default.getSubType(e),n=l.default.getJob(e);if(this.nameLabel.string=e.name,t>0){var a="\u6ce8\u9b42";switch(t){case 1:a+="\u2160";break;case 2:a+="\u2161";break;case 3:a+="\u2162";break;case 4:a+="\u2163"}this.nameLabel.string=a+"."+e.name}this.nameLabel.node.color=l.default.getColoFromHEXByConfig(e),this.type.string=o.default.getEquipNameByType(i),this.lv.string=e.zsLevel+"\u8f6c",this.lv.node.color=cc.Color.BLACK.fromHEX(g.default.ins().lv<e.zsLevel?"#f3311e":"#35e62d"),this.career.string=o.default.getJobNameByJob(n)},t.prototype.updateBaseAttr=function(e,t){var i=c.default.EquipConfig[e];this.attr0.string=i.atk.toString(),this.attr1.string=i.hp.toString(),this.attr2.string=i.def.toString(),this.attr3.string=i.res.toString(),this.attr4.string=i.baseAttr1.value.toString(),t&&(this.attr5.string=i.baseAttr2.value/100+"%")},t.prototype.setSuitAttr=function(e,t){var i=u.default.ins().getEquipSamsaraLv(e),n=u.default.ins().getSamsaraDesc(i-7),a=u.default.ins().getReincarnateSuit(e);this.suitName.string=n+"\u5957\u88c5",this.attr12.string=this.getValue(a.attrs,p.AttributeType.atAttack),this.attr13.string=this.getValue(a.attrs,p.AttributeType.atMaxHp),this.attr14.string=this.getValue(a.attrs,p.AttributeType.atDef),this.attr15.string=this.getValue(a.attrs,p.AttributeType.atRes),this.attr16.string="\u5408\u51fb\u4f24\u5bb3\u51cf\u514d\uff1a "+a.exAttrs[0].value/100+"%";for(var r=t[0]?y.default.GREEN:"#ff0000",s=t[1]?y.default.GREEN:"#ff0000",l=t[2]?y.default.GREEN:"#ff0000",c=t[3]?y.default.GREEN:"#ff0000",f=0,h=0;h<t.length;h++)t[h]&&f++;this.suitState.string="<color="+r+">"+o.default.getEquipNameByType(d.EquipPos.HAT)+"\u3001</c><color="+s+">"+o.default.getEquipNameByType(d.EquipPos.VIZARD)+"\u3001</c><color="+l+">"+o.default.getEquipNameByType(d.EquipPos.CLOAK)+"\u3001</c><color="+c+">"+o.default.getEquipNameByType(d.EquipPos.SHIELD)+"</c>\t";var g=4==f,v=g?y.default.GREEN_COLOR_N:"#ff0000";this.suitNum.node.color=cc.Color.BLACK.fromHEX(v),this.suitNum.string="("+f+"/4)",this.setSuitAttrTextColor(g)},t.prototype.setSuitAttrTextColor=function(e){var t=e?"#FF00FF":"#666666";this.attr12.node.color=cc.Color.BLACK.fromHEX(t),this.attr13.node.color=cc.Color.BLACK.fromHEX(t),this.attr14.node.color=cc.Color.BLACK.fromHEX(t),this.attr15.node.color=cc.Color.BLACK.fromHEX(t),this.attr16.node.color=cc.Color.BLACK.fromHEX(t)},t.prototype.setSpirit=function(e,t,i,n){var a,o=f.default.getObjectByUnionAttr(c.default.ReincarnateSpirit,this.index,t);a=i?"":"("+e+"/"+o.consume+")",this.spiritLv.string="Lv"+t,this.spiritCost.string=a,0==t?(this.attr6.string="0",this.attr7.string="0",this.attr8.string="0",this.attr9.string="0"):(this.attr6.string=this.getValue(o.attrs,p.AttributeType.atAttack),this.attr7.string=this.getValue(o.attrs,p.AttributeType.atMaxHp),this.attr8.string=this.getValue(o.attrs,p.AttributeType.atDef),this.attr9.string=this.getValue(o.attrs,p.AttributeType.atRes))},t.prototype.getValue=function(e,t){return f.default.getObjectByAttr(e,"type",t).value.toString()},t.prototype.addSpirit=function(){this.closeWin()},t.prototype.addSoul=function(){this.closeWin()},t.prototype.setSoulAttr=function(e,t,i){if(void 0===t&&(t=0),void 0===i&&(i=0),0==e)this.soulDescLable.node.active=!1,this.soulAddAttr0.string="",this.soulAddAttr1.string="",this.soulAddAttr2.string="",this.soulAddAttr3.string="",this.soulAddAttr4.string="";else{this.soulDescLable.node.active=!0;var n=c.default.EquipConfig[t],a=n.atk,o=n.hp,r=n.def,s=n.res,u=n.baseAttr1.value,d=l.default.getSubType(c.default.ItemConfig[t]),f=c.default.ReincarnationDemonLevel[d][e].precent/1e4;this.soulAddAttr0.string=Math.floor(a*f).toString(),this.soulAddAttr1.string=Math.floor(o*f).toString(),this.soulAddAttr2.string=Math.floor(r*f).toString(),this.soulAddAttr3.string=Math.floor(s*f).toString(),this.soulAddAttr4.string=Math.floor(u*f).toString();var p=0;if(n.baseAttr2&&(p=h.default.getAttrPower([n.baseAttr2])),i=(i-p)*(1+f)+p,e>0){var g=c.default.ReincarnationSoulLevel[l.default.getJob(c.default.ItemConfig[t])][d][e];i+=h.default.getAttrPower(g.attrs)}i>>=0}return i},t.prototype.setSoulLink=function(e,t,i,n){void 0===i&&(i=0),void 0===n&&(n=0),0==e&&(this.chainName.string="",this.chainDes.string=""),this.soulName.string="\u7075\u9b42\u9501\u94feLv"+e;var a=t;0==t&&(a=1),this.chainName.string="\u5316\u9b54Lv"+a;var r=[];if(i){var s=l.default.getSubType(c.default.ItemConfig[i]);if(a>0){var d=u.default.ins().getReincarnationLinkLevel(s,a);r[0]="[\u9b54\u9b42"+o.default.getEquipNameByType(d.secondSlot)+"]",r[1]=u.default.ins().getSoulLinkDesc(d.attrs[0].type),r[2]=d.attrs[0].value/100+"%";var f=void 0;if(f=0==t?"#666666":"#FFFF00",this.chainDes.string=r.join(),this.chainDes.node.color=cc.Color.BLACK.fromHEX(f),t>0){var p=this.roleModel;n+=h.default.getAttrPower([d.attrs[0]])+l.default.relatePower(d.attrs[0],p)}}if(e>0){var g,y=c.default.ReincarnationDemonLevel[s][e].precent/100;g=(y+=100)+"%",this.soulDes.string="\u4e3a\u5f53\u524d\u90e8\u4f4d\u6ce8\u5165\u4e0a\u53e4\u9b54\u9b42\uff0c\u63d0\u5347\u57fa\u7840\u5c5e\u6027\u81f3"+g}}return n},t.prototype.closeWin=function(){s.default.ins().close(this)},__decorate([b({type:cc.Button,displayName:"bgClose"})],t.prototype,"bgClose",void 0),__decorate([b({type:cc.Label,displayName:"nameLabel"})],t.prototype,"nameLabel",void 0),__decorate([b({type:cc.Label,displayName:"score"})],t.prototype,"score",void 0),__decorate([b({type:cc.Label,displayName:"type"})],t.prototype,"type",void 0),__decorate([b({type:cc.Label,displayName:"lv"})],t.prototype,"lv",void 0),__decorate([b({type:cc.Label,displayName:"career"})],t.prototype,"career",void 0),__decorate([b({type:cc.Label,displayName:"powerLabel"})],t.prototype,"powerLabel",void 0),__decorate([b({type:cc.Label,displayName:"attr0"})],t.prototype,"attr0",void 0),__decorate([b({type:cc.Label,displayName:"attr1"})],t.prototype,"attr1",void 0),__decorate([b({type:cc.Label,displayName:"attr2"})],t.prototype,"attr2",void 0),__decorate([b({type:cc.Label,displayName:"attr3"})],t.prototype,"attr3",void 0),__decorate([b({type:cc.Label,displayName:"attr4"})],t.prototype,"attr4",void 0),__decorate([b({type:cc.Label,displayName:"attr5"})],t.prototype,"attr5",void 0),__decorate([b({type:cc.Node,displayName:"spiritGroup"})],t.prototype,"spiritGroup",void 0),__decorate([b({type:cc.Label,displayName:"spiritLv"})],t.prototype,"spiritLv",void 0),__decorate([b({type:cc.Label,displayName:"spiritCost"})],t.prototype,"spiritCost",void 0),__decorate([b({type:cc.Label,displayName:"attr6"})],t.prototype,"attr6",void 0),__decorate([b({type:cc.Label,displayName:"attr7"})],t.prototype,"attr7",void 0),__decorate([b({type:cc.Label,displayName:"attr8"})],t.prototype,"attr8",void 0),__decorate([b({type:cc.Label,displayName:"attr9"})],t.prototype,"attr9",void 0),__decorate([b({type:cc.Node,displayName:"suitGroup"})],t.prototype,"suitGroup",void 0),__decorate([b({type:cc.Label,displayName:"suitName"})],t.prototype,"suitName",void 0),__decorate([b({type:cc.Label,displayName:"suitNum"})],t.prototype,"suitNum",void 0),__decorate([b({type:cc.RichText,displayName:"suitState"})],t.prototype,"suitState",void 0),__decorate([b({type:cc.Label,displayName:"attr12"})],t.prototype,"attr12",void 0),__decorate([b({type:cc.Label,displayName:"attr13"})],t.prototype,"attr13",void 0),__decorate([b({type:cc.Label,displayName:"attr14"})],t.prototype,"attr14",void 0),__decorate([b({type:cc.Label,displayName:"attr15"})],t.prototype,"attr15",void 0),__decorate([b({type:cc.Label,displayName:"attr16"})],t.prototype,"attr16",void 0),__decorate([b({type:cc.Label,displayName:"chainName"})],t.prototype,"chainName",void 0),__decorate([b({type:cc.RichText,displayName:"chainDes"})],t.prototype,"chainDes",void 0),__decorate([b({type:cc.Label,displayName:"soulName"})],t.prototype,"soulName",void 0),__decorate([b({type:cc.RichText,displayName:"soulDes"})],t.prototype,"soulDes",void 0),__decorate([b({type:cc.Button,displayName:"spiritBtn"})],t.prototype,"spiritBtn",void 0),__decorate([b({type:cc.Button,displayName:"soulBtn"})],t.prototype,"soulBtn",void 0),__decorate([b({type:cc.Node,displayName:"redPoint"})],t.prototype,"redPoint",void 0),__decorate([b({type:cc.Node,displayName:"redPoint1"})],t.prototype,"redPoint1",void 0),__decorate([b({type:cc.Label,displayName:"soulAddAttr0"})],t.prototype,"soulAddAttr0",void 0),__decorate([b({type:cc.Label,displayName:"soulAddAttr1"})],t.prototype,"soulAddAttr1",void 0),__decorate([b({type:cc.Label,displayName:"soulAddAttr2"})],t.prototype,"soulAddAttr2",void 0),__decorate([b({type:cc.Label,displayName:"soulAddAttr3"})],t.prototype,"soulAddAttr3",void 0),__decorate([b({type:cc.Label,displayName:"soulAddAttr4"})],t.prototype,"soulAddAttr4",void 0),__decorate([b({type:cc.Label,displayName:"soulDescLable"})],t.prototype,"soulDescLable",void 0),t=__decorate([m],t)}(n.default);i.default=_,cc._RF.pop()},{"../../../../core/base/AttributeType":"AttributeType","../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/ColorUtil":"ColorUtil","../../../../core/utils/CommonUtils":"CommonUtils","../../../../core/view/BaseEuiView":"BaseEuiView","../../../config/ItemConfig":"ItemConfig","../../../entity/Role":"Role","../../../entity/SubRoles":"SubRoles","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../forge/model/EquipPos":"EquipPos","../../zs/UserZs":"UserZs","../data/SamsaraModel":"SamsaraModel"}],SamsaraModel:[function(e,t,i){"use strict";cc._RF.push(t,"9c313iWgDdMFrB4GA0Zsk6X","SamsaraModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../../manager/GlobalConfig"),o=e("../../../../core/utils/CommonUtils"),r=e("../../../entity/Actor"),s=e("../../bag/UserBag"),u=e("../../zs/UserZs"),l=e("../../forge/model/EquipPos"),c=e("../../../config/ItemConfig"),d=e("../../../entity/SubRoles"),f=e("../../bag/ItemData"),p=e("../../merge/model/MergeCC"),h=e("../../activity/model/RewardData"),g=function(e){function t(){var t=e.call(this)||this;t.samsaraEquipMap={},t.composeEquipMap={},t.composeEquipTypes=[],t.equipCompose={};var i=a.default.ReincarnationBase;return t.samsaraDescAry=[i.hellsName,i.ghostsName,i.animalsName,i.demigodsName,i.humansName,i.godsName],t.initComposeEquip(),t.composeEquipTypes=t.getComposeMenu(),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.isCanUpgrade=function(){if(!this.samsaraInfo)return!1;var e=this.samsaraInfo.lv+1,t=a.default.ReincarnationLevel[e],i=!1;return e<o.default.getObjectLength(a.default.ReincarnationLevel)&&this.samsaraInfo.exp>=t.consume&&(i=!0),i},t.prototype.getExpExchangeTimes=function(){return this.samsaraInfo?a.default.ReincarnationBase.levelExchangeTimes-this.samsaraInfo.expUpgradeNum:0},t.prototype.getNormalExchangeTimes=function(){return this.samsaraInfo?a.default.ReincarnationBase.normalItem.time-this.samsaraInfo.normalUpgradeNum:0},t.prototype.getAdvancedExchangeTimes=function(){return this.samsaraInfo?a.default.ReincarnationBase.advanceItem.time-this.samsaraInfo.advancedUpgradeNum:0},t.prototype.isCanExpExchange=function(){var e=!1;return r.default.level>=a.default.ReincarnationBase.levelLimit&&this.getExpExchangeTimes()>0&&(e=!0),e},t.prototype.isCanItemExchange=function(){return this.getNormalExchangeTimes()>0&&s.default.ins().getBagGoodsCountById(0,a.default.ReincarnationBase.normalItem.id)>0||this.getAdvancedExchangeTimes()>0&&s.default.ins().getBagGoodsCountById(0,a.default.ReincarnationBase.advanceItem.id)>0},t.prototype.isCanExchange=function(){return!this.isMaxSamsara(r.default.samsaraLv)&&(this.isCanExpExchange()||this.isCanItemExchange())},t.prototype.isOpen=function(){return 1e3*u.default.ins().lv+r.default.level>=a.default.ReincarnationBase.openLevel},t.prototype.isMaxSamsara=function(e){var t=o.default.getObjectLength(a.default.ReincarnationLevel);return e>=a.default.ReincarnationLevel[t-1].level},t.prototype.isSuit=function(e,t){for(var i=this.getEquipSamsaraLvByRole(e,t),n=l.EquipPos.HAT;n<l.EquipPos.MAX;n++){if(n!=e)if(this.getEquipSamsaraLvByRole(n,t)<i)return!1}return!0},t.prototype.lowSuitEquips=function(e,t){for(var i=[],n=this.getEquipSamsaraLvByRole(e,t),a=l.EquipPos.HAT;a<l.EquipPos.MAX;a++){this.getEquipSamsaraLvByRole(a,t)<n?i.push(0):i.push(1)}return i},t.prototype.getEquipSamsaraLvByRole=function(e,t){var i=t.getEquipByIndex(e);return i.item.itemConfig?this.getEquipSamsaraLv(i.item.itemConfig.id):0},t.prototype.getEquipSamsaraLv=function(e){return a.default.ItemConfig[e].zsLevel},t.prototype.getReincarnateSuit=function(e){var t=a.default.ItemConfig[e].zsLevel;return a.default.ReincarnateSuit[t]},t.prototype.getSamsara=function(e){var t=0;return e>=7&&(t=Math.ceil((e-6)/6)),t},t.prototype.getSamsaraDesc=function(e){return this.samsaraDescAry[e]},t.prototype.getSamsaraLv=function(e){return 0==e?-1:Math.ceil((e-1)%6)},t.prototype.getSamsaraLvDesc=function(e){var t=e+1;return a.default.ReincarnationBase.state[t]},t.prototype.getAddSpiritEquips=function(e,t,i){void 0===i&&(i=10);var n=[],o=s.default.ins().itemCount[1],r=e.getEquipByIndex(t);if(o&&!this.checkSpiritLvIsMax(r,t))for(var u in o)if(a.default.ReincarnateEquip[u]){var l=+u;if(this.isEquipCanAddSpirit(e,t,l))for(var c=o[u];c>0;){if(n.unshift(l),n.length>=i)return n;c--}}return n},t.prototype.isEquipCanAddSpirit=function(e,t,i){var n=e.getEquipByIndex(t);return!(a.default.ItemConfig[n.item.itemConfig.id].zsLevel<a.default.ItemConfig[i].zsLevel)&&this.checkEquip(i)},t.prototype.checkEquip=function(e){var t=a.default.ItemConfig[e],i=c.default.getJob(t),n=d.default.ins().getSubRoleByJob(i);if(n){var o=n.getEquipByIndex(c.default.getSubType(t));if(o.item.itemConfig)if(a.default.ItemConfig[o.item.itemConfig.id].zsLevel>=t.zsLevel){var r=this.getTargetShengEquipById(e,t.zsLevel);return this.checkNormalEquip(o,r)}}return!1},t.prototype.checkNormalEquip=function(e,t){var i=e.item.point,n=new f.default;return n.configID=t,i>n.point},t.prototype.getTargetShengEquipById=function(e,t){var i=this.equipCompose[e];return i?this.getTargetShengEquipById(i.id,t):e},t.prototype.isCanAddSpirit=function(){for(var e=d.default.ins().subRolesLen,t=0;t<e;t++)for(var i=d.default.ins().getSubRoleByIndex(t),n=l.EquipPos.HAT;n<l.EquipPos.MAX;n++){if(i.getEquipByIndex(n).item.itemConfig)if(this.getAddSpiritEquips(i,n,1).length>0)return!0}return!1},t.prototype.checkRoleCanAddSpirit=function(e){for(var t=d.default.ins().getSubRoleByIndex(e),i=l.EquipPos.HAT;i<l.EquipPos.MAX;i++){if(t.getEquipByIndex(i).item.itemConfig)if(this.getAddSpiritEquips(t,i,1).length>0)return!0}return!1},t.prototype.checkEquipPosCanAddSpirit=function(e,t){var i=e.getEquipByIndex(t);if(i.item.itemConfig&&!this.checkSpiritLvIsMax(i,t)&&this.getAddSpiritEquips(e,t,1).length>0)return!0;return!1},t.prototype.checkSpiritLvIsMax=function(e,t){var i=e.spiritLv;return!a.default.ReincarnateSpirit[t][i+1]},t.prototype.getExtraPower=function(e,t,i){for(var n=0,o=0,r=l.EquipPos.HAT;r<=l.EquipPos.SHIELD;r++){var s=e.getEquipByIndex(r);if(s.item.itemConfig){var u=s.item.itemConfig.id;if(u&&a.default.EquipConfig[u].baseAttr1)o+=a.default.EquipConfig[u].baseAttr1.value}}i&&(n=o*a.default.AttrPowerConfig[i].relate_power*t);return n},t.prototype.initComposeEquip=function(){for(var e=a.default.ReincarnationBase.headName.length,t=1;t<=e;t++)this.composeEquipMap[t]||(this.composeEquipMap[t]={});for(var i in a.default.ReincarnateEquipCompose){var n=a.default.ReincarnateEquipCompose[i];this.equipCompose[n.material.id]=n;var o=n.distinguishi,r=this.composeEquipMap[o],s=a.default.ItemConfig[n.id].zsLevel,u=r[s];u||(u=[]),u.push({type:p.MergeType.SamsareEquip,id:n.id}),r[s]=u,this.composeEquipMap[o]=r}},t.prototype.getComposeMenu=function(){for(var e=a.default.ReincarnationBase.headName.length,t=[],i=1;i<=e;i++)t.push(i);return t},t.prototype.getComposeZsList=function(e){var t=u.default.ins().lv,i=a.default.ReincarnationBase.equipsList[e-1],n=[];for(var o in i)i[o]<=t&&n.push({type:e,zsLv:i[o]});return n},t.prototype.getComposeDesc=function(e){return a.default.ReincarnationBase.headName[e-1]},t.prototype.isCanCompose=function(){return this.getComposeEquipList().length>0},t.prototype.getComposeEquipId=function(e,t){var i=this.getComposeEquipList();for(var n in i){var o=i[n],r=this.getComposeTarget(o);if(a.default.ItemConfig[r].zsLevel==t&&a.default.ReincarnateEquipCompose[r].distinguishi==e)return o}return 0},t.prototype.getComposeEquipList=function(){var e=[],t=s.default.ins().itemCount[1];for(var i in t)if(this.equipCompose[i]){var n=+i,a=this.composeMaxEquip(n);a&&this.isCanWear(a)&&e.push(n)}return e},t.prototype.isCanWear=function(e){if(!e)return!1;var t=a.default.ItemConfig[e];if(1e3*u.default.ins().lv+r.default.level<1e3*t.zsLevel+t.level)return!1;for(var i=c.default.getJob(t),n=c.default.getSubType(t),o=d.default.ins().subRolesLen,s=0;s<o;s++){var l=d.default.ins().getSubRoleByIndex(s);if(l.job==i){var p=l.getEquipByIndex(n);if(!p.item.itemConfig)return!0;var h=p.item.point,g=new f.default;if(g.configID=e,g.point>h)return!0}}return!1},t.prototype.composeMaxEquip=function(e){if(s.default.ins().getBagGoodsCountById(s.default.BAG_TYPE_EQUIP,e)){var t=new h.default;t.id=e,t.count=0;var i=this.composeEquip(t);if(i&&i.id!=e)return i.id}return 0},t.prototype.composeEquip=function(e){var t,i=e.id,n=e.count+s.default.ins().getBagGoodsCountById(s.default.BAG_TYPE_EQUIP,i)+this.wearCount(i),a=this.equipCompose[i];return a&&n>=a.material.count?((t=new h.default).id=a.id,t.count=Math.floor(n/a.material.count),this.composeEquip(t)):e},t.prototype.wearCount=function(e){for(var t=a.default.ItemConfig[e],i=c.default.getJob(t),n=c.default.getSubType(t),o=d.default.ins().subRolesLen,r=0;r<o;r++){var s=d.default.ins().getSubRoleByIndex(r);if(s.job==i){var u=s.getEquipByIndex(n).item.itemConfig;if(u&&u.id==e)return 1}}return 0},t.prototype.getRoleIndexByEquip=function(e){for(var t=a.default.ItemConfig[e],i=c.default.getJob(t),n=c.default.getSubType(t),o=d.default.ins().subRolesLen,r=0;r<o;r++){var s=d.default.ins().getSubRoleByIndex(r);if(s.job==i){var u=s.getEquipByIndex(n).item.itemConfig;if(u&&u.id==e)return r}}return-1},t.prototype.isCanTypeCompose=function(e){var t=this.getComposeEquipList();for(var i in t){var n=t[i];if(a.default.ReincarnateEquipCompose[this.getComposeTarget(n)].distinguishi==e)return!0}return!1},t.prototype.getComposeTarget=function(e){var t=this.equipCompose[e];return t?t.id:0},t.prototype.isCanZsLvCompose=function(e,t){var i=this.getComposeEquipList();for(var n in i){var o=i[n],r=this.getComposeTarget(o),s=a.default.ReincarnateEquipCompose[r];if(t==a.default.ItemConfig[r].zsLevel&&s.distinguishi==e)return!0}return!1},t.prototype.isCanEquipCompose=function(e){return this.getComposeEquipList().indexOf(e)>=0},t.prototype.getReincarnationLinkLevel=function(e,t){for(var i in a.default.ReincarnationLinkLevel)if(i==e.toString())for(var n in a.default.ReincarnationLinkLevel[i])for(var o in a.default.ReincarnationLinkLevel[i][n])if(o==t.toString())return a.default.ReincarnationLinkLevel[i][n][o];return null},t.prototype.getSoulLinkDesc=function(e){var t;switch(e){case 11:t="\u751f\u547d";break;case 55:t="\u4f24\u5bb3\u52a0\u6210";break;case 19:t="\u66b4\u51fb\u4f24\u5bb3";break;case 56:t="\u66b4\u51fb\u4f24\u5bb3\u51cf\u514d\u7387"}return t},t.prototype.getSoulMaxLevel=function(){return o.default.getObjectLength(a.default.ReincarnationDemonLevel[l.EquipPos.HAT])},t.prototype.getSoulLinkLv=function(e,t,i){var n=this.getLinkEquipPos(t),a=e.getEquipByIndex(t),o=e.getEquipByIndex(n);return a&&o?Math.min(a.soulLv,o.soulLv):0},t.prototype.getLinkEquipPos=function(e){for(var t in a.default.ReincarnationLinkLevel)if(t==e.toString())for(var i in a.default.ReincarnationLinkLevel[t])return+i;return null},t.prototype.isCanUpgradeSoul=function(){for(var e=d.default.ins().subRolesLen,t=0;t<e;t++)for(var i=l.EquipPos.HAT;i<=l.EquipPos.SHIELD;i++){if(this.checkUpgradeSoul(d.default.ins().getSubRoleByIndex(t),i))return!0}return!1},t.prototype.checkUpgradeSoul=function(e,t){var i=e.getEquipByIndex(t),n=i.soulLv;if(n!=this.getSoulMaxLevel()&&i.item.itemConfig){var o=a.default.ReincarnationSoulLevel[e.job][t][n+1];return s.default.ins().getBagGoodsCountById(0,o.materialInfo.id)>=o.materialInfo.count}return!1},t}(n.default);i.default=g,cc._RF.pop()},{"../../../../core/base/BaseClass":"BaseClass","../../../../core/utils/CommonUtils":"CommonUtils","../../../config/ItemConfig":"ItemConfig","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../../manager/GlobalConfig":"GlobalConfig","../../activity/model/RewardData":"RewardData","../../bag/ItemData":"ItemData","../../bag/UserBag":"UserBag","../../forge/model/EquipPos":"EquipPos","../../merge/model/MergeCC":"MergeCC","../../zs/UserZs":"UserZs"}],SamsaraPanel:[function(e,t,i){"use strict";cc._RF.push(t,"292fexgDdJDKIcDa/WbsFUL","SamsaraPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEventView"),a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return __extends(t,e),t.prototype.childrenCreated=function(){this.init()},t.prototype.init=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.upgrade=function(){},t.prototype.getItem=function(){},t.prototype.getValue=function(e,t){},t.prototype.updateView=function(){},t.prototype.setMaxSamsaraState=function(e){},t.prototype.setLvImgState=function(e){},t.prototype.addLabelEffect=function(){},t.prototype.maskImage=function(e){},t.prototype.removeLabelEffect=function(){},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t=__decorate([o],t)}(n.default));i.default=r,cc._RF.pop()},{"../../../../core/view/BaseEventView":"BaseEventView"}],SamsaraVO:[function(e,t,i){"use strict";cc._RF.push(t,"d6e6dWh5AZBap/QSQrMNeFg","SamsaraVO"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(e,t,i,n,a){this.lv=e,this.exp=t,this.expUpgradeNum=i,this.normalUpgradeNum=n,this.advancedUpgradeNum=a}}();i.default=n,cc._RF.pop()},{}],SanbaIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"759a5jv0SxKf7N7OvYNrmyP","SanbaIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../../consts/SystemConst"),s=e("../../opensystem/OpenSystem"),u=e("../../activity/model/ActivityDataFactory"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postYbChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!s.default.ins().checkSysOpen(r.SystemType.SANBA))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==u.ActivityPageStyle.SANBA&&n.isOpenActivity()&&!n.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==u.ActivityPageStyle.SANBA&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(SanbaWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],SceneMgr:[function(e,t,i){"use strict";var n;cc._RF.push(t,"b9aaau9JjNHobhPCVCiDHtt","SceneMgr"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e.CreateScene="CreateScene",e.MainScene="MainScene"}(n||(n={}));var a=function(){function e(){}return e.runScene=function(e,t){cc.director.loadScene(e,t)},e.sceneName=n,e}();i.default=a,cc._RF.pop()},{}],ScenesConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b6873+E1udOp7OhqekNE2WU","ScenesConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.turn=0,this.autoPunch=0}}();i.default=n,cc._RF.pop()},{}],SelectRoleData:[function(e,t,i){"use strict";cc._RF.push(t,"0fc5dZ2N7lKPrDIC90i8i1s","SelectRoleData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(e){this.id=e.readInt(),this.name=e.readString(),this.roleClass=e.readInt(),this.zsLevel=e.readInt(),this.level=e.readInt(),this.power=e.readDouble(),this.vipLevel=e.readInt(),this.sex=e.readInt()}}();i.default=n,cc._RF.pop()},{}],ServerTips:[function(e,t,i){"use strict";cc._RF.push(t,"41f93Qvb89BJojI4cu9FzBh","ServerTips"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],Setting:[function(e,t,i){"use strict";cc._RF.push(t,"495a0pZNgBDHbBXyu5GXXY2","Setting"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("../../../core/net/PackageID"),r=e("../../../core/base/MessageCenter"),s=e("../../../core/module/guide/GuideUtils");(function(e){e[e.guidePart=0]="guidePart",e[e.guideStep=1]="guideStep",e[e.expFirst=2]="expFirst",e[e.headRed=3]="headRed",e[e.diedFirstTime=4]="diedFirstTime",e[e.recharge1=5]="recharge1",e[e.vip=6]="vip",e[e.role=7]="role",e[e.FB=8]="FB",e[e.recharge2=9]="recharge2",e[e.diedFirstTime2=10]="diedFirstTime2",e[e.mijiRedPoint=11]="mijiRedPoint",e[e.firstMonthCard=12]="firstMonthCard",e[e.firstrecharge1=13]="firstrecharge1",e[e.firstClickTreasure=14]="firstClickTreasure",e[e.autoHeji=15]="autoHeji"})(n=i.ClientSet||(i.ClientSet={}));var u=function(e){function t(){var i=e.call(this)||this;return i.map={},i.sysId=o.PackageID.Default,r.default.compile(t),i}return __extends(t,e),Object.defineProperty(t,"currPart",{get:function(){return t.ins().getValue(n.guidePart)},enumerable:!0,configurable:!0}),Object.defineProperty(t,"currStep",{get:function(){return t.ins().getValue(n.guideStep)},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},t.prototype.parser=function(e){for(var t=e.readShort(),i=0;i<t;i++)this.map[e.readInt()]=e.readInt();s.default.ins().init(),this.postInitSetting()},t.prototype.postInitSetting=function(){return!0},t.prototype.sendSave=function(e,t){var i=this.getBytes(19);i.writeInt(e),i.writeInt(t),this.sendToServer(i),this.map[e]=t},t.prototype.setValue=function(e,t){this.sendSave(e,t)},t.prototype.getValue=function(e,t){return void 0===t&&(t=0),void 0==this.map[e]?t:this.map[e]},t}(a.default);i.default=u,u.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/module/guide/GuideUtils":"GuideUtils","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem"}],ShareIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"5c590y7g1hGUreD3LhjJZ0l","ShareIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../pfactivity/PfActivity"),o=e("../../../entity/Actor"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=e("../../../../core/utils/DateUtils"),l=e("../../server/GameServer"),c=e("../../../manager/TimerManager"),d=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postInviteInfoUpdate,a.default.ins().postShare,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postInviteInfoUpdate],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return r.default.ins().checkSysOpen(s.SystemType.SHARE)&&-1!=a.default.ins().shareState&&a.default.ins().wxInviteCount<3},t.prototype.checkShowRedPoint=function(){var e=u.default.formatMiniDateTime(a.default.ins().inviteTime)-l.default.serverTime;c.default.ins().removeAll(this);var t=e<=0?1:0;return t||c.default.ins().doTimer(e,1,this.updateTime,this),t},t.prototype.updateTime=function(){this.update()},t.prototype.tapExecute=function(){ViewManager.ins().open(YqWin)},t}(n.default);i.default=d,cc._RF.pop()},{"../../../../core/utils/DateUtils":"DateUtils","../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../manager/TimerManager":"TimerManager","../../opensystem/OpenSystem":"OpenSystem","../../pfactivity/PfActivity":"PfActivity","../../server/GameServer":"GameServer","./RuleIconBase":"RuleIconBase"}],ShenQiIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"ae66aBZJUlBy4WYtGZT7jlL","ShenQiIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../fb/UserFb"),o=e("../../artifact/Artifact"),r=e("../../task/UserTask"),s=e("../../opensystem/OpenSystem"),u=e("../../../consts/SystemConst"),l=e("../../tips/UserTips"),c=e("../../../../core/utils/TextFlowMaker"),d=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postGuanqiaInfo,a.default.ins().postGuanKaIdChange,r.default.ins().postUpdteTaskTrace,o.default.ins().postNewArtifactInit,o.default.ins().postNewArtifactUpdate,o.default.ins().postGuide],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return this.updateInfo(),s.default.ins().checkSysOpen(u.SystemType.SHENQIGUIDE)&&!a.default.ins().pkGqboss&&a.default.ins().guanqiaID<340},t.prototype.updateInfo=function(){var e,t=a.default.ins().getCurrentReward(),i=a.default.ins().getNextReward();if(t)e=t[0],a.default.ins().getMapReward(),this.pretips&&this.pretips==e.id||(this.pretips=e.id,l.default.ins().showItemTips(e.id));else if(i&&(e=i[0],this.labelChapter)){var n="\u518d\u6218|C:0x40df38&T:"+a.default.ins().getNextNeedChapter()+"|\u5173";this.labelChapter.textFlow=c.default.generateTextFlow1(n)}e&&this.tar&&this.setReward(e)},t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return this.labelInfo=t.labelInfo,this.imgInfo=t.imgInfo,this.imgName=t.imgName,this.imgItem=t.imgItem,this.labelChapter=t.labelChapter,this.groupEff=t.groupEff,this.updateInfo(),t},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.tapExecute=function(){ViewManager.ins().open(TargetWin,TargetWin.SEHNQI),o.default.ins().showGuide=-2e3},t.prototype.setReward=function(e){var t=o.default.ins().getConfByChipId(e.id);t&&(this.labelInfo.string=t.buttonDesc)},t.prototype.getEffName=function(e){},t}(n.default);i.default=d,cc._RF.pop()},{"../../../../core/utils/TextFlowMaker":"TextFlowMaker","../../../consts/SystemConst":"SystemConst","../../artifact/Artifact":"Artifact","../../fb/UserFb":"UserFb","../../opensystem/OpenSystem":"OpenSystem","../../task/UserTask":"UserTask","../../tips/UserTips":"UserTips","./RuleIconBase":"RuleIconBase"}],ShenShouBase:[function(e,t,i){"use strict";cc._RF.push(t,"8ef95Y0Eg9K9aIe9/26QtfL","ShenShouBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ShenShouConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ad20a9/1fxNjphhOyWfLLGd","ShenShouConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ShenShouEquip:[function(e,t,i){"use strict";cc._RF.push(t,"6df97KZwJdKLLdQ2JL9jrOq","ShenShouEquip"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ShenShouSkill:[function(e,t,i){"use strict";cc._RF.push(t,"245e4HJOM5LLZtq8utHkGO0","ShenShouSkill"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ShieldConfig:[function(e,t,i){"use strict";cc._RF.push(t,"976f4vXQMhOeYqwZLnBpskH","ShieldConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ShieldStageConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f5e2c6UYLlKfpt7limje5Cu","ShieldStageConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.stage=0,this.icon="",this.normalCost=0,this.attr=[],this.normalCostTip=0}}();i.default=n,cc._RF.pop()},{}],ShopBestTips:[function(e,t,i){"use strict";cc._RF.push(t,"8a5c1jhZKhDBLgHUW1Bi3ct","ShopBestTips"),cc._RF.pop()},{}],ShopConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5f336YSCylMsJOCapsXlcNz","ShopConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ShopGoodsWarn:[function(e,t,i){"use strict";cc._RF.push(t,"2ac46EmI51H6bivVCDalIXl","ShopGoodsWarn"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../consts/MoneyConst"),r=e("../../activity/model/RewardData"),s=e("../../../config/ItemStoreConfig"),u=e("../../../config/ItemConfig"),l=e("../../../manager/GlobalConfig"),c=e("../../../../core/base/ViewManager"),d=e("../../tips/UserTips"),f=e("../../shop/view/ShopWin"),p=e("../../forge/view/ForgeWin"),h=e("../../GameGuider"),g=e("../../recharge/Recharge"),y=e("../../shop/Shop"),v=e("../../../entity/Actor"),m=cc._decorator,b=m.ccclass,_=(m.property,function(e){function t(){var t=e.call(this)||this;return t.parentRoot=a.LayerManager.UI_Popup,t}var i;return __extends(t,e),i=t,t.prototype.initUI=function(){this.gainList.itemRenderer=GainGoodsItem,this.countTxt.restrict="0-9",this.price.setType(o.MoneyConst.yuanbao),this.totalPrice.setType(o.MoneyConst.yuanbao),this.itemIcon.imgJob.visible=!1},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.decBtn,this.onTap),this.addTouchEvent(this.addBtn,this.onTap),this.addTouchEvent(this.dec10Btn,this.onTap),this.addTouchEvent(this.add10Btn,this.onTap),this.addTouchEvent(this.buyBtn,this.onTap),this.addTouchEvent(this.topUpBtn,this.onTap),this.addTouchEvent(this.bgClose,this.onTap),this.gainList.addEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTouchList,this),this.addChangeEvent(this.countTxt,this.onTxtChange),this.observe(y.default.ins().postBuyResult,this.buyCallBack)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.gainList.removeEventListener(eui.ItemTapEvent.ITEM_TAP,this.onTouchList,this),this.removeTouchEvent(this.decBtn,this.onTap),this.removeTouchEvent(this.addBtn,this.onTap),this.removeTouchEvent(this.dec10Btn,this.onTap),this.removeTouchEvent(this.add10Btn,this.onTap),this.removeTouchEvent(this.buyBtn,this.onTap),this.removeTouchEvent(this.topUpBtn,this.onTap),this.removeTouchEvent(this.bgClose,this.onTap),this.countTxt.removeEventListener(egret.TouchEvent.CHANGE,this.onTxtChange,this)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.decBtn:this.setTotalPrice(this._totalNum-1);break;case this.addBtn:this.setTotalPrice(this._totalNum+1);break;case this.dec10Btn:this.setTotalPrice(this._totalNum-10);break;case this.add10Btn:this.setTotalPrice(this._totalNum+10);break;case this.buyBtn:v.default.yb>=this.totalPrice.getPrice()?y.default.ins().sendBuy(1,[[this._goodsId,this._totalNum]]):(d.default.ins().showTips("|C:0xf3311e&T:\u5143\u5b9d\u4e0d\u8db3|"),c.default.ins().close(this));break;case this.topUpBtn:var t=g.default.ins().getRechargeData(0);t&&2==t.num?c.default.ins().open(ChargeFirstWin):(c.default.ins().close(i),c.default.ins().open(Recharge1Win));break;case this.bgClose:c.default.ins().close(i)}},t.prototype.onTouchList=function(e){var t=e.item;if(null!=e.item&&c.default.ins().viewOpenCheck(t[1],t[2])){var n=!0;if("Recharge2Win"==t[1]){var a=g.default.ins().getRechargeData(0);a&&a.num||(n=!1,c.default.ins().open(Recharge1Win))}n&&""!=t[1]&&h.default.guidance(t[1],t[2],t[3]),c.default.ins().close(i),c.default.ins().close(BookUpWin),c.default.ins().close(WeaponPanel),c.default.ins().close(WeaponSoulBreakWin),"HeirloomCom"!=t[1]&&c.default.ins().close(HeirloomCom),"LadderWin"==t[1]&&c.default.ins().close(p.default),"PlayFunView"==t[1]&&c.default.ins().close(f.default)}},t.prototype.buyCallBack=function(e){e>0?c.default.ins().close(i):(d.default.ins().showTips("|C:0xf3311e&T:\u5143\u5b9d\u4e0d\u8db3|"),c.default.ins().close(this))},t.prototype.onTxtChange=function(e){var t=Number(this.countTxt.text);this.setTotalPrice(t)},t.prototype.setData=function(e,t){var i;if(e>2e4){var n=l.default.ItemConfig[e];this.itemIcon.setData(n),this.nameTxt.string=""+n.name,this.nameTxt.textColor=u.default.getQualityColor(n),i=s.default.getStoreByItemID(e),this.titleTxt.string="\u6750\u6599\u4e0d\u8db3\uff0c\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u5f97"}else{switch(this.itemIcon.setData(null),e){case o.MoneyConst.gold:this.itemIcon.imgIcon.source=r.default.CURRENCY_RES[e],this.nameTxt.string=r.default.CURRENCY_NAME[e],this.titleTxt.string="\u8d27\u5e01\u4e0d\u8db3\uff0c\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u5f97";break;case o.MoneyConst.soul:this.itemIcon.imgIcon.source=r.default.CURRENCY_RES[e],this.nameTxt.string=r.default.CURRENCY_NAME[e],this.titleTxt.string="\u7cbe\u534e\u4e0d\u8db3\uff0c\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u5f97";break;case 7:this.itemIcon.imgIcon.source=r.default.CURRENCY_RES[e],this.nameTxt.string=r.default.CURRENCY_NAME[e],this.titleTxt.string="\u529f\u52cb\u4e0d\u8db3\uff0c\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u5f97";break;case 8:this.itemIcon.imgIcon.source=r.default.CURRENCY_RES[e],this.nameTxt.string=r.default.CURRENCY_NAME[e],this.titleTxt.string="\u6210\u5c31\u79ef\u5206\u4e0d\u8db3\uff0c\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u5f97";break;case o.MoneyConst.weiWang:this.itemIcon.imgIcon.source=r.default.CURRENCY_RES[e],this.nameTxt.string=r.default.CURRENCY_NAME[e],this.titleTxt.string="\u5a01\u671b\u4e0d\u8db3\uff0c\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u83b7\u5f97"}this.nameTxt.textColor=16758826}var a=l.default.GainItemConfig[e],c=0;a?(this.gainList.dataProvider=new eui.ArrayCollection(a.gainWay),c=60*a.gainWay.length):this.gainList.dataProvider=new eui.ArrayCollection([]),i?(this.goodsGroup.active=!0,this.nameTxt.node.x=225,this.nameTxt.node.y=170,this.nameTxt.textAlign="center",this.itemIcon.x=145,this.frame.height=410+c,this.gainListGroup.y=352,this._goodsId=i.id,this.price.setPrice(i.price),this.setTotalPrice(t)):(this.goodsGroup.active=!1,this.nameTxt.node.x=182,this.nameTxt.node.y=200,this.nameTxt.textAlign="center",this.itemIcon.x=172,this.frame.height=340+c,this.gainListGroup.y=280),this.tipGroup.y=this.gainListGroup.height+this.gainListGroup.y+3},t.prototype.setTotalPrice=function(e){this._totalNum=e<=0?1:e>=1e4?9999:e,this.countTxt.text=this._totalNum+"",this.totalPrice.setPrice(this._totalNum*this.price.getPrice())},t=i=__decorate([b],t)}(n.default));i.default=_,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../config/ItemConfig":"ItemConfig","../../../config/ItemStoreConfig":"ItemStoreConfig","../../../consts/MoneyConst":"MoneyConst","../../../entity/Actor":"Actor","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../GameGuider":"GameGuider","../../activity/model/RewardData":"RewardData","../../forge/view/ForgeWin":"ForgeWin","../../recharge/Recharge":"Recharge","../../shop/Shop":"Shop","../../shop/view/ShopWin":"ShopWin","../../tips/UserTips":"UserTips"}],ShopRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"90e96Jw1ZlO3Ykyj6VckYwJ","ShopRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../base/BaseSystem"),a=e("../../../../core/base/MessageCenter"),o=e("../Shop"),r=function(e){function t(){var i=e.call(this)||this;return i.shopRedPoint=!1,i.blackMarketRedPoint=!1,a.default.compile(t),i.associated(i.postShopRedPoint,i.postBlackMarketRedPoint),i.associated(i.postBlackMarketRedPoint,o.default.ins().postUpdateShopData),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postShopRedPoint=function(){var e=this.shopRedPoint;return this.shopRedPoint=this.blackMarketRedPoint,this.shopRedPoint!=e},t.prototype.postBlackMarketRedPoint=function(){var e=this.blackMarketRedPoint;return this.blackMarketRedPoint=o.default.ins().shopData.refushTime<=0,this.blackMarketRedPoint!=e},t}(n.default);i.default=r,window.GameSystem.push(r.ins.bind(r)),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../base/BaseSystem":"BaseSystem","../Shop":"Shop"}],ShopWin:[function(e,t,i){"use strict";cc._RF.push(t,"fcbcdcP0vFCqIHt9l5u/Ixk","ShopWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.scrollBottom=!1,t}return __extends(t,e),t.prototype.initData=function(){throw new Error("Method not implemented.")},t.prototype.initUI=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.updateRedPoint=function(){},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t}(n.default);i.default=o,cc._RF.pop()},{"../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager"}],Shop:[function(e,t,i){"use strict";cc._RF.push(t,"5e514qn9lpIUL88+t+QmN39","Shop"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("./model/FeatsStoreData"),r=e("../../../core/base/MessageCenter"),s=e("../../manager/GlobalConfig"),u=e("../../consts/ItemConst"),l=e("../../../core/base/ViewManager"),c=e("./view/BuyWin"),d=e("../../manager/TimerManager"),f=e("../vip/UserVip"),p=e("../tips/UserTips"),h=e("../bag/ItemData"),g=function(e){function t(){var i=e.call(this)||this;return r.default.compile(t),i.shopData=new y,i.sysId=a.PackageID.Shop,i.regNetMsg(1,i.postUpdateShopData),i.regNetMsg(2,i.postBuyResult),i.regNetMsg(3,i.postBuyCount),i.regNetMsg(4,i.refreshGoodsSuccess),i.regNetMsg(5,i.postRefreshIntegrationSucc),i.regNetMsg(6,i.updateMedalMessage),i.regNetMsg(7,i.postUpdateBuyMedal),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendBuy=function(e,t){var i=this.getBytes(2);i.writeInt(e),i.writeInt(t.length),this.shopBuyArr=[];for(var n=0;n<t.length;n++){i.writeInt(t[n][0]),i.writeInt(t[n][1]);var a=s.default.ItemStoreConfig[t[n][0]];if(a&&a.itemId==u.ItemConst.GOLD_BRICK){var o={id:u.ItemConst.GOLD_BRICK,count:t[n][1]};this.shopBuyArr.push(o)}}this.sendToServer(i)},t.prototype.sendRefreshShop=function(){var e=this.getBytes(3);this.sendToServer(e)},t.prototype.postUpdateShopData=function(e){t.ins().shopData.parser(e)},t.prototype.postBuyResult=function(e){return e.readInt()},t.prototype.postBuyCount=function(e){t.ins().shopData.parserBuyCount(e)},t.prototype.refreshGoodsSuccess=function(e){this.postRefreshGoodsSuccess(!0)},t.prototype.postRefreshGoodsSuccess=function(e){return e},t.prototype.postRefreshIntegrationSucc=function(e){var i=e.readBoolean();e.readInt();return[i,t.ins().shopData.point]},t.prototype.sendIntegrationShop=function(e){var t=this.getBytes(5);t.writeInt(e),this.sendToServer(t)},t.prototype.sendMedalMessage=function(){var e=this.getBytes(6);this.sendToServer(e)},t.prototype.updateMedalMessage=function(e){var i=e.readInt();this.medalData=new o.default(i,e),t.ins().postRefresMedalMessage()},t.prototype.postRefresMedalMessage=function(){},t.prototype.sendBuyMedal=function(e,t){var i=this.getBytes(7);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.postUpdateBuyMedal=function(e){return[e.readInt(),e.readInt()]},t.openBuyGoldWin=function(e){void 0===e&&(e=!0);var i=t.ins().shopData.getGoodsIdByItemId(200164);return!!t.ins().shopData.checkBuyGoodsId(i,e)&&(l.default.ins().open(c.default,i),!0)},t}(n.default);i.default=g;var y=function(){function e(){this.shopEquipData=[],this.hadBuyCount=[]}return Object.defineProperty(e.prototype,"refushTime",{get:function(){return this._refushTime},set:function(e){this._refushTime=e,d.default.ins().removeAll(this),e>0&&d.default.ins().doTimer(1e3,e,this.enterTime,this)},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){this.shopEquipData.length=0,this.refushTime=e.readInt(),this.point=e.readInt(),this.times=e.readInt();for(var t=e.readInt(),i=0;i<t;i++){var n=new v;n.parser(e),this.shopEquipData.push(n)}},e.prototype.parserBuyCount=function(e){var t=e.readShort();this.hadBuyCount.length=0;for(var i=0;i<t;i++){var n=new m;n.parser(e),this.hadBuyCount.push(n)}},e.prototype.enterTime=function(){this._refushTime<=0?this._refushTime=0:this._refushTime--},e.prototype.getHadBuyCountItem=function(e){for(var t=0,i=this.hadBuyCount;t<i.length;t++){var n=i[t];if(n.itemId==e)return n}return null},e.prototype.getHadBuyCount=function(e){var t=this.getHadBuyCountItem(e);return t?t.count:0},e.prototype.getShopEquipDataLength=function(){var e=0;return null!=this.shopEquipData&&(e=this.shopEquipData.length),e},e.prototype.getShopEquipDataByIndex=function(e){var t=null;return null!=this.shopEquipData&&e>=0&&e<this.shopEquipData.length&&(t=this.shopEquipData[e]),t},e.prototype.getShopEquipDataById=function(e){for(var t=0,i=this.shopEquipData;t<i.length;t++){var n=i[t];if(n.id==e)return n}return null},e.prototype.checkBuyGoodsId=function(e,t){void 0===t&&(t=!0);var i=s.default.ItemStoreConfig[e];if(i){if(i.viplv&&f.default.ins().lv<i.viplv)return t&&p.default.ins().showTips("VIP"+i.viplv+"\u53ef\u8d2d\u4e70"),!1;if(i.vipLimit){var n=i.vipLimit[f.default.ins().lv];if(this.getHadBuyCount(i.itemId)>=n)return t&&p.default.ins().showTips("\u4eca\u65e5\u8d2d\u4e70\u6b21\u6570\u5df2\u7528\u5b8c"),!1}}return!0},e.prototype.getGoodsIdByItemId=function(e){for(var t in s.default.ItemStoreConfig)if(s.default.ItemStoreConfig[t].itemId==e)return parseInt(t);return 0},e}();i.ShopData=y;var v=function(){function e(){}return e.prototype.parser=function(e){this.id=e.readInt(),this.costType=e.readInt(),this.costNum=e.readInt(),this.discountType=e.readInt(),this.item=new h.default,this.item.parser(e)},e.discountDic={0:{discount:1,res:""},1:{discount:.8,res:"shangzk8"},2:{discount:.5,res:"shangzk5"}},e}();i.ShopEquipData=v;var m=function(){function e(){}return e.prototype.parser=function(e){this.itemId=e.readInt(),this.count=e.readInt()},e}();i.ShopHadBuyData=m,window.GameSystem.push(g.ins.bind(g)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/base/ViewManager":"ViewManager","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../consts/ItemConst":"ItemConst","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../bag/ItemData":"ItemData","../tips/UserTips":"UserTips","../vip/UserVip":"UserVip","./model/FeatsStoreData":"FeatsStoreData","./view/BuyWin":"BuyWin"}],SkillData:[function(e,t,i){"use strict";cc._RF.push(t,"bd451vSwZBNEpO+a3Lc3KOj","SkillData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../manager/GlobalConfig"),a=function(){function e(e){this._specialCD=0,this.configID=e}return Object.defineProperty(e.prototype,"lv",{get:function(){return this._id%1e3},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"job",{get:function(){return Math.floor(this._id%1e5/1e4)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return 1e3*Math.floor(this._id/1e3)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"icon",{get:function(){return this.id+"_png"},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"configID",{get:function(){return this._id},set:function(e){this._id=e,this.config=n.default.SkillsConfig[e],this._preId=NaN},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"preId",{get:function(){return this._preId},set:function(e){this._preId=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"lv1ConfigID",{get:function(){return this.id+1},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"castType",{get:function(){return isNaN(this.config.castType)?2:this.config.castType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"targetType",{get:function(){return isNaN(this.config.targetType)?2:this.config.targetType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"desc",{get:function(){var e=this.config||n.default.SkillsConfig[this.lv1ConfigID];if(e){var t=n.default.SkillsDescConfig[e.desc],i=t?t.desc:"";if(!i.length||!e.desc_ex)return i;for(var a=e.desc_ex.length,o=0;o<a;o++)i=i.replace("%s%",e.desc_ex[o]+"");return i}console.log("\u6280\u80fdid:"+this.configID+"\u627e\u4e0d\u5230\u914d\u7f6e")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"affectRange",{get:function(){return isNaN(this.config.affectRange)?1:this.config.affectRange},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"affectCount",{get:function(){return isNaN(this.config.affectCount)?1:this.config.affectCount},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"calcType",{get:function(){return isNaN(this.config.calcType)?1:this.config.calcType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"herdMonRate",{get:function(){var e=n.default.SkillsDescConfig[this.descID];return e?isNaN(e.herdMonRate)?100:e.herdMonRate:100},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"herdPlayerRate",{get:function(){var e=n.default.SkillsDescConfig[this.descID];return e?isNaN(e.herdPlayerRate)?10:e.herdPlayerRate:10},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cd",{get:function(){if(this._specialCD)return this._specialCD;var e=n.default.SkillsDescConfig[this.descID];return e?e.cd:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"specialCD",{set:function(e){this._specialCD=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isPassive",{get:function(){return!!this.config.passive},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"rate",{get:function(){return this.config.passive&&this.config.passive.rate||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cond",{get:function(){return this.config.passive&&this.config.passive.cond||0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"castRange",{get:function(){var e=n.default.SkillsDescConfig[this.descID];return e?e.castRange:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"repelDistance",{get:function(){return this.config.repelDistance},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"teleport",{get:function(){return this.config.teleport},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"actionType",{get:function(){var e=n.default.SkillsDescConfig[this.descID];return e?e.actionType:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"tarEff",{get:function(){return this.config.tarEff},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"otarEff",{get:function(){return this.config.otarEff},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"selfEff",{get:function(){return this.config.selfEff},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canUse",{get:function(){return this.config&&!!this.lv},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"name",{get:function(){var e=n.default.SkillsDescConfig[this.descID];return e?e.name:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"args",{get:function(){return this.config.args},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"wordEff",{get:function(){var e=n.default.SkillsDescConfig[this.descID];return e?e.wordEff:""},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effType",{get:function(){return this.config.effType},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"otherSkills",{get:function(){return this.config.otherSkills},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"effectId",{get:function(){var e=n.default.SkillsDescConfig[this.descID];return e?e.effectId:0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"sound",{get:function(){var e=n.default.SkillsDescConfig[this.descID];return e?e.sound:""},enumerable:!0,configurable:!0}),e.getSkillByJob=function(t,i,n){return void 0===i&&(i=1),void 0===n&&(n=1),new e(1e4*t+1e3*i+n)},Object.defineProperty(e.prototype,"descID",{get:function(){var e=n.default.SkillsConfig[this.configID]||n.default.SkillsConfig[this.lv1ConfigID];return e?e.desc:0},enumerable:!0,configurable:!0}),e}();i.default=a,cc._RF.pop()},{"../../../manager/GlobalConfig":"GlobalConfig"}],SkillEffType:[function(e,t,i){"use strict";cc._RF.push(t,"452ecIZFQBKrKhUVi8mDD4p","SkillEffType"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.AdditionalDamage=1]="AdditionalDamage",e[e.AddBlood=2]="AddBlood",e[e.AdditionalAttributes=3]="AdditionalAttributes",e[e.AdditionalState=4]="AdditionalState",e[e.Summon=5]="Summon",e[e.Other=6]="Other",e[e.HostAddAttributes=7]="HostAddAttributes",e[e.SuperArmor=8]="SuperArmor"}(i.SkillEffType||(i.SkillEffType={})),cc._RF.pop()},{}],SkillPanel:[function(e,t,i){"use strict";cc._RF.push(t,"c75a4a/3eFEI5LNIUU7otWo","SkillPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/view/BaseView"),a=e("../entity/Actor"),o=e("../module/tips/UserTips"),r=e("../module/rolewin/UserSkill"),s=e("../manager/GlobalConfig"),u=e("../module/sound/SoundUtil"),l=e("../../core/utils/DisplayUtils"),c=e("../entity/SubRoles"),d=e("../../core/utils/TextFlowMaker"),f=e("../module/zs/UserZs"),p=e("../../core/base/ErrorLog"),h=e("../../core/base/MessageCenter"),g=cc._decorator,y=g.ccclass,v=g.property,m=function(e){function t(){var t=e.call(this)||this;return t.skillItem5=null,t.skillItem4=null,t.skillItem3=null,t.skillItem2=null,t.skillItem1=null,t.all=null,t.curRole=0,t.curIndex=0,h.default.compile(i),t}var i;return __extends(t,e),i=t,t.prototype.init=function(){this.curRole=0},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.node.active=!0,this.addTouchEvent(this.all,this.onAllUpgrade);for(var i=0;i<5;i++){var n=cc.find("skillItem"+(i+1),this.node);this.addTouchEvent(n,this.onSelect.bind(this,i))}this.observe(r.default.ins().postSkillUpgradeAll,this.grewupAllSkillCB),this.updateAllSkillItemAndDesc()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this.all,this.onAllUpgrade);for(var i=0;i<5;i++){var n=cc.find("skillItem"+(i+1),this.node);this.removeTouchEvent(n,this.onSelect.bind(this,i))}this.removeObserve(),l.default.removeFromParent(this.mc),this.mc=null},t.prototype.showHint=function(){var e;e=a.default.level>=80?"|C:0xf3311e&T:\u6280\u80fd\u7b49\u7ea7\u8fbe\u5230\u4e0a\u9650\uff0c\u8bf7\u63d0\u9ad8\u8f6c\u751f|":"|C:0xf3311e&T:\u6280\u80fd\u7b49\u7ea7\u4e0d\u80fd\u8d85\u8fc7\u4eba\u7269\u7b49\u7ea7|",o.default.ins().showTips(e)},t.prototype.onSelect=function(e){var t=r.default.ins().getSkillLimitLevel();switch(console.log("onSelect param:",e),e){case 0:if(t<s.default.SkillsOpenConfig[1].level)return;this.curIndex=0;break;case 1:if(t<s.default.SkillsOpenConfig[2].level)return;this.curIndex=1;break;case 2:if(t<s.default.SkillsOpenConfig[3].level)return;this.curIndex=2;break;case 3:if(t<s.default.SkillsOpenConfig[4].level)return;this.curIndex=3;break;case 4:if(t<s.default.SkillsOpenConfig[5].level)return;this.curIndex=4}this.setSkillItem()},t.prototype.onSingleUpgrade=function(e){this.onSendUpgrade(e),this.curIndex=e,u.default.ins().playEffect(u.default.SKILL_UP),this.setSkillItem()},t.prototype.onAllUpgrade=function(){this.onSendUpgrade(0,!0),u.default.ins().playEffect(u.default.SKILL_UP),this.setSkillItem()},t.prototype.onSendUpgrade=function(e,t){void 0===t&&(t=!1),r.default.ins().sendGrewUpAllSkill(this.curRole,t,e)},t.prototype.updateAllSkillItemAndDesc=function(){l.default.removeFromParent(this.mc),this.mc=null,this.updateAllSkillItem(),this.setSkillItem()},t.prototype.updateAllSkillItem=function(){this.isUpGrade=!1;for(var e=0;e<5;e++){var t=cc.find("skillItem"+(e+1),this.node),i=c.default.ins().getSubRoleByIndex(this.curRole);if(!i)return;var n=i.skillsData[e],a=cc.find("lock",t),o=cc.find("lv",t),u=cc.find("costAll",t),l=cc.find("grewUpAllBtn",t),f=cc.find("skillName",t).getComponent(cc.Label),p=cc.find("skillDesc",t).getComponent(cc.RichText);n.lv<=0?(r.default.ins().getSkillLimitLevel()>=s.default.SkillsOpenConfig[e+1].level?(a.color=(new cc.Color).fromHEX("#0x00FD61"),a.getComponent(cc.Label).string="\u5f00\u542f"):(a.color=(new cc.Color).fromHEX("#0xFD000A"),a.getComponent(cc.Label).string=s.default.SkillsOpenConfig[e+1].level+"\u7ea7\u5f00\u542f"),a.active=!0,o.getComponent(cc.Label).string="",u.active=!1,l.active=!1):(a.active=!1,o.getComponent(cc.Label).string="Lv."+n.lv,u.active=!0,l.active=!0,this.setCost(t,e,n.lv)),f.string=n.name+"";var h=d.default.getHtmlTextByText(n.desc);p.string=h}},t.prototype.setCost=function(e,t,i){var n=s.default.SkillsUpgradeConfig[i].cost,o=a.default.level,u=a.default.gold,l=cc.find("costAll",e),d=cc.find("grewUpAllBtn/labelDisplay",e).getComponent(cc.Label),p=cc.find("grewUpAllBtn",e).getComponent(cc.Button);if(l.active=!0,i>=r.default.ins().getSkillLimitLevel()){if(p.enabled=!1,c.default.ins().getSubRoleByIndex(this.curRole).skillsData[this.curIndex].lv>=r.default.MAX_LEVEL)d.string="\u5df2\u6ee1\u7ea7",l.active=!1;else{var h=f.default.ins();d.string=i>=80?h.lv+1+"\u8f6c\u53ef\u5347":o+1+"\u7ea7\u53ef\u5347"}var g=void 0,y=n;g=n<=u?"#00c33c":"#e31316",l.color=(new cc.Color).fromHEX(g),l.getComponent(cc.Label).string="\u94f6\u4e24:"+y}else{var v=r.default.ins().getSingleSkillGrewUpCostTest(this.curRole,t);d.string="\u4e00\u952e\u5347\u7ea7";g=void 0;v<=u?(this.isUpGrade=!0,g="#00c33c",p.enabled=!0):(g="#e31316",p.enabled=!1),l.color=(new cc.Color).fromHEX(g),l.getComponent(cc.Label).string="\u94f6\u4e24:"+v}},t.prototype.setSkillItem=function(){},t.prototype.setRoleId=function(e){this.curRole=e,this.updateAllSkillItemAndDesc()},t.prototype.grewupAllSkillCB=function(e){var t=e[0];if(e[1]==this.curRole){for(var i=c.default.ins().getSubRoleByIndex(this.curRole),n=0;n<t.length;n++)t[n].lv&&t[n].lv<i.skillsData[n].lv&&this.grewupTip(t[n],i.skillsData[n],n);this.updateAllSkillItemAndDesc(),l.default.removeFromParent(this.mc),this.mc=null}},t.prototype.grewupTip=function(e,t,i){var n=this,a="",o=new cc.Node;o.width=10;var u,l=o.addComponent(cc.Label);if(l.fontSize=20,o.color=(new cc.Color).fromHEX("#0x20cb30"),t.args)e.args?(u=t.args.b-e.args.b,a=t.name+"\u589e\u52a0"+u+"\u70b9\u4f24\u5bb3"):p.default.Assert(!1,"SkillPanel.grewupTip() skillold.args is null!!\u65b0\u6280\u80fd\uff1aid("+t.id+"),lv("+t.lv+") \u65e7\u6280\u80fd\uff1aid("+e.id+"),lv("+e.lv+")");else if(e.tarEff&&t.tarEff){var c=s.default.EffectsConfig[e.tarEff[0]],d=s.default.EffectsConfig[t.tarEff[0]];switch(Math.floor(t.id/1e3)){case r.SHORT_SKILLID.MAGIC:u=Math.ceil(1e3*(d.args.d-c.args.d))/10,a=t.name+"\u4f24\u5bb3\u51cf\u514d\u589e\u52a0"+u+"%";break;case r.SHORT_SKILLID.CURE:u=d.args.c-c.args.c,a=t.name+"\u589e\u52a0"+u+"\u70b9\u6cbb\u7597\u91cf";break;case r.SHORT_SKILLID.POISONING:u=d.args.c-c.args.c,a=t.name+"\u6bcf\u79d2\u5931\u53bb"+u+"\u70b9\u751f\u547d";break;case r.SHORT_SKILLID.ARMOR:u=d.args.c-c.args.c,a=t.name+"\u589e\u52a0"+u+"\u70b9\u7269\u9632\u548c\u9b54\u9632";break;case r.SHORT_SKILLID.SUMMON:a="\u795e\u517d\u7b49\u7ea7\u589e\u52a0"+(u=d.args.a-c.args.a)}u=d.args.d-c.args.d}else t.tarEff&&p.default.Assert(!1,"SkillPanel.grewupTip() skillold.tarEff is null!!\u65b0\u6280\u80fd\uff1aid("+t.id+"),lv("+t.lv+") \u65e7\u6280\u80fd\uff1aid("+e.id+"),lv("+e.lv+")");var f=cc.find("skillItem"+(i+1),this.node);l.string=a;var h=f.x+f.width/2-o.width/2,g=f.y+f.height/4;o.x=h,o.y=g,this.node.addChild(o);cc.tween(o).to(.6,{y:o.y+45}).delay(1).call(function(){n.node.removeChild(o)}.bind(this)).start()},__decorate([v({type:cc.Node,displayName:"skillItem5"})],t.prototype,"skillItem5",void 0),__decorate([v({type:cc.Node,displayName:"skillItem4"})],t.prototype,"skillItem4",void 0),__decorate([v({type:cc.Node,displayName:"skillItem3"})],t.prototype,"skillItem3",void 0),__decorate([v({type:cc.Node,displayName:"skillItem2"})],t.prototype,"skillItem2",void 0),__decorate([v({type:cc.Node,displayName:"skillItem1"})],t.prototype,"skillItem1",void 0),__decorate([v({type:cc.Button,displayName:"all"})],t.prototype,"all",void 0),t=i=__decorate([y],t)}(n.default);i.default=m,cc._RF.pop()},{"../../core/base/ErrorLog":"ErrorLog","../../core/base/MessageCenter":"MessageCenter","../../core/utils/DisplayUtils":"DisplayUtils","../../core/utils/TextFlowMaker":"TextFlowMaker","../../core/view/BaseView":"BaseView","../entity/Actor":"Actor","../entity/SubRoles":"SubRoles","../manager/GlobalConfig":"GlobalConfig","../module/rolewin/UserSkill":"UserSkill","../module/sound/SoundUtil":"SoundUtil","../module/tips/UserTips":"UserTips","../module/zs/UserZs":"UserZs"}],SkillPowerConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6a670aDSJFJ2K/NQcn6q873","SkillPowerConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],SkillWin:[function(e,t,i){"use strict";cc._RF.push(t,"58655nDnYJJRKGIO312Du2g","SkillWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../../core/base/ViewManager"),r=e("../../../manager/GlobalConfig"),s=e("../../../entity/Actor"),u=e("../../../entity/SubRoles"),l=e("../../zhanling/model/ZhanLingModel"),c=e("../../../manager/TimerManager"),d=e("../../gamescene/view/ui/UIView2"),f=e("../../fb/UserFb"),p=e("../../tips/UserTips"),h=e("../../zs/UserZs"),g=e("../../bag/UserBag"),y=e("../../zs/UserMiji"),v=e("../../rolewin/UserSkill"),m=e("../../../customComponent/SkillPanel"),b=e("../../../customComponent/JingMaiPanel"),_=e("../../../customComponent/MijiPanel"),C=e("../../../customComponent/ZhanLingPanel"),I=e("../../zhanling/ZhanLing"),T=e("../../neigong/NeiGong"),S=e("../../rolewin/UserJingMai"),R=e("../../neigong/model/NeiGongModel"),B=e("../../battle/view/CommonHelpWin"),M=e("../../neigong/view/NeiGongWin"),E=e("../../../../core/utils/Util"),D=e("../../../../core/base/MessageCenter"),A=cc._decorator,P=A.ccclass,w=A.property,L=function(e){function t(){var t=e.call(this)||this;return t.parentRoot=a.LayerManager.UI_Main,t.skillPanel=null,t.jingMai=null,t.mijiPanel=null,t.zhanlingPanel=null,t.neiGongPanel=null,t.skillTitle=null,t.closeBtn=null,t.closeBtn0=null,t.redPoint0=null,t.redPoint1=null,t.redPoint2=null,t.redPoint3=null,t.redPoint4=null,t.help=null,t.skillBtn=null,t.neiGongBtn=null,t.jingMaiBtn=null,t.miJiBtn=null,t.viewStack=null,t.roleSelect=null,t.roleHeadSelects=[],t.rolesLabel=[],t.lastIndex=0,t.selectedIndex=0,t.roleIndex=0,t.rolesLength=0,D.default.compile(i),t}var i;return __extends(t,e),i=t,t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.onClickTabBtn=function(e){switch(console.log("param:",e),e){case"skillBtn":this.setOpenIndex(i.Panel_JINENG);break;case"neiGongBtn":this.setOpenIndex(i.Panel_NEIGONG);break;case"jingMaiBtn":this.setOpenIndex(i.Panel_JINGMAI);break;case"miJiBtn":this.setOpenIndex(i.Panel_MIJI)}},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.closeBtn,this.onTap.bind(this,this.closeBtn)),this.addTouchEvent(this.closeBtn0,this.onTap.bind(this,this.closeBtn0)),this.addTouchEvent(this.help,this.onTap.bind(this,this.help)),this.addChangeEvent(this.roleSelect,this.onChange),this.addTouchEvent(this.skillBtn,this.onClickTabBtn.bind(this,"skillBtn")),this.addTouchEvent(this.neiGongBtn,this.onClickTabBtn.bind(this,"neiGongBtn")),this.addTouchEvent(this.jingMaiBtn,this.onClickTabBtn.bind(this,"jingMaiBtn")),this.addTouchEvent(this.miJiBtn,this.onClickTabBtn.bind(this,"miJiBtn")),this.observe(g.default.ins().postItemAdd,this.updateRedPoint),this.observe(g.default.ins().postItemDel,this.updateRedPoint),this.observe(g.default.ins().postItemChange,this.updateRedPoint),this.observe(T.default.ins().postNeiGongDataChange,this.updateRedPoint),this.observe(S.default.ins().postUpdate,this.updateRedPoint),this.observe(s.default.ins().postGoldChange,this.updateRedPoint),this.observe(s.default.ins().postLevelChange,this.updateRedPoint),this.observe(v.default.ins().postSkillUpgradeAll,this.updateRedPoint),this.observe(y.UserMiji.ins().postBagUseMiji,this.onBagUseMiji),this.observe(I.default.ins().postZhanLingComposeItem,this.updateRedPoint),this.observe(I.default.ins().postZhanLingInfo,this.updateRedPoint),this.observe(I.default.ins().postZhanLingUpExp,this.updateRedPoint),this.observe(I.default.ins().postZhanLingDrug,this.updateRedPoint),this.observe(I.default.ins().postZhanLingWear,this.updateRedPoint),this.checkPage(),console.log("param:",e);void 0!=e[0]&&e[0].length>0?e[0]:i.Panel_JINENG,e[1]&&e[1];this.selectedIndex=i.Panel_JINENG,this.initRoleHead(),this.setOpenIndex(this.selectedIndex)},t.prototype.checkPage=function(){},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];c.default.ins().removeAll(this);var i=o.default.ins().getView(d.default);i&&i.closeNav(d.default.NAV_SKILL);for(var n=this.viewStack.childrenCount,a=["SkillPanel","NeiGongWin","JingMaiPanel","MijiPanel"],r=0;r<n;r++)this.viewStack.getChildByName(""+a[r]).getComponent(""+a[r]).close()},t.prototype.setOpenIndex=function(e){var t,n;this.help.active=!1;var a=!1;switch(e){case i.Panel_JINENG:this.skillPanel.open(),!0,"biaoti_jineng",a=!0;break;case i.Panel_NEIGONG:t=r.default.NeiGongBaseConfig.openLevel,n=r.default.NeiGongBaseConfig.openGuanqia,f.default.ins().guanqiaID<=n?(p.default.ins().showTips("\u901a\u5173"+n+"\u5173\u5f00\u542f"),e=this.selectedIndex=this.lastIndex):(this.neiGongPanel.open(this.roleIndex),!0,"biaoti_neigong",a=!0);break;case i.Panel_JINGMAI:t=r.default.JingMaiCommonConfig.openLevel,s.default.level<t?(p.default.ins().showTips(t+"\u7ea7\u5f00\u542f"),e=this.selectedIndex=this.lastIndex):(this.jingMai.open(),!0,"biaoti_jingmai",a=!0);break;case i.Panel_MIJI:var o=y.UserMiji.ZsLv;h.default.ins().lv<o?(p.default.ins().showTips(o+"\u8f6c\u5f00\u542f"),e=this.selectedIndex=this.lastIndex):(this.mijiPanel.open(),!0,"biaoti_miji",a=!0);break;case i.Panel_ZHANLING:l.default.ins().ZhanLingOpen()?(this.help.active=!0,this.roleSelect.active=!1,this.zhanlingPanel.open(),!0,"biaoti_zhanling",a=!0):p.default.ins().showTips("\u5f00\u670d\u7b2c"+r.default.ZhanLingConfig.openserverday+"\u5929\u5e76\u8fbe\u5230"+r.default.ZhanLingConfig.openzhuanshenglv+"\u8f6c\u5f00\u542f")}a&&(this.setPanelState(e),this.setBtnState(e),this.selectedIndex=e),this.lastIndex!=e?this.lastIndex=e:this.selectedIndex=e,this.updateRedPoint()},t.checkIsOpen=function(e){var t,n;switch(e){case i.Panel_JINENG:break;case i.Panel_NEIGONG:if(t=r.default.NeiGongBaseConfig.openLevel,n=r.default.NeiGongBaseConfig.openGuanqia,f.default.ins().guanqiaID<=n)return p.default.ins().showTips("\u901a\u5173"+n+"\u5173\u5f00\u542f"),!1;break;case i.Panel_JINGMAI:if(t=r.default.JingMaiCommonConfig.openLevel,s.default.level<t)return p.default.ins().showTips(t+"\u7ea7\u5f00\u542f"),!1;break;case i.Panel_MIJI:var a=y.UserMiji.ZsLv;if(h.default.ins().lv<a)return p.default.ins().showTips(a+"\u8f6c\u5f00\u542f"),!1;break;case i.Panel_ZHANLING:if(!l.default.ins().ZhanLingOpen())return p.default.ins().showTips("\u5f00\u670d\u7b2c"+r.default.ZhanLingConfig.openserverday+"\u5929\u5e76\u8fbe\u5230"+r.default.ZhanLingConfig.openzhuanshenglv+"\u8f6c\u5f00\u542f"),!1}return!0},t.prototype.updateRedPoint=function(){c.default.ins().isExists(this.updateRed,this)||c.default.ins().doTimer(100,1,this.updateRed,this)},t.prototype.onBagUseMiji=function(e){for(var t=u.default.ins().subRolesLen,i=0;i<t;i++)if(!y.UserMiji.ins().hasEquipMiji(e,i)){this.onClickRoleToggle(null,i+""),this.setRoleId(i);break}this.mijiPanel.onBagUseMiji(e)},t.prototype.updateRed=function(){this.redPoint0&&(this.redPoint0.active=this.and(v.default.ins().canGrewupSkill())),this.redPoint1&&(this.redPoint1.active=R.default.ins().canUp()),this.redPoint2&&(this.redPoint2.active=this.jingMaiCanUp()),this.redPoint3&&(this.redPoint3.active=y.UserMiji.ins().isMjiSum()),this.redPoint4&&(this.redPoint4.active=I.default.ins().checkRedPoint());var e=u.default.ins().subRolesLen;this.clearRedPoint();for(var t=0;t<e;t++){var n=void 0;if(this.selectedIndex==i.Panel_JINENG)n=v.default.ins().canGrewupAllSkills(t);else if(this.selectedIndex==i.Panel_NEIGONG)n=R.default.ins().canUpById(t);else if(this.selectedIndex==i.Panel_JINGMAI){n=u.default.ins().roles[t].jingMaiData.jingMaiCanUp()}else this.selectedIndex==i.Panel_MIJI&&(n=y.UserMiji.ins().isMjiSum());this.showRedPoint(t,n)}},t.prototype.clearRedPoint=function(){if(this.roleSelect)for(var e=0;e<this.roleSelect.childrenCount;e++){this.roleSelect.children[e].getChildByName("pic_pot").active=!1}},t.prototype.showRedPoint=function(e,t){this.roleSelect.children[e].getChildByName("pic_pot").active=t},t.prototype.onChange=function(e){this.setRoleId(this.roleIndex)},t.prototype.setRoleId=function(e){e!=this.skillPanel.curRole&&(this.neiGongPanel.curRole=this.mijiPanel.curRole=this.skillPanel.curRole=this.jingMai.curRole=e,this.setOpenIndex(this.selectedIndex))},t.prototype.and=function(e){for(var t=0,i=e;t<i.length;t++){if(1==i[t])return!0}return!1},t.prototype.onTap=function(e){switch(console.log("param\uff1a",e),e){case this.closeBtn:case this.closeBtn0:o.default.ins().close(this);break;case this.help:this.selectedIndex==i.Panel_ZHANLING&&o.default.ins().open(B.default,r.default.HelpInfoConfig[35].text)}},t.openCheck=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[0]||i.Panel_JINENG;return i.checkIsOpen(n)},t.prototype.jingMaiCanUp=function(){for(var e in u.default.ins().roles)if(u.default.ins().roles[e].jingMaiData.jingMaiCanUp()){var t=r.default.JingMaiCommonConfig.openLevel;if(s.default.level>=t)return!0}return!1},t.prototype.onClickRoleToggle=function(e,t){console.log("---------------------onCLickToggle ",t),+t!=this.roleIndex&&(u.default.ins().getSubRoleByIndex(+t)?(this.refreshRoleToggle(+t),this.roleIndex=+t,this.setRoleId(+t)):console.log("\u89d2\u8272\u7d22\u5f15\u672a\u5f00\u542f"))},t.prototype.initRoleHead=function(){var e,t=this.rolesLabel.length;this.rolesLength=u.default.ins().subRolesLen-1;for(var i=0;i<t;i++)if(e=u.default.ins().getSubRoleByIndex(i))this.rolesLabel[i].string=E.Util.getJobNameSting(e.job);else{if(!r.default.NewRoleConfig[i]){console.log("\u89d2\u8272\u7d22\u5f15"+i+"\u4e0d\u5b58\u5728\uff0c\u51fa\u9519\u7c7b\uff1aRoleWin");continue}this.rolesLabel[i].string=2==i?"4\u8f6c\n\u89e3\u9501":"80\u7ea7\n\u89e3\u9501"}},t.prototype.refreshRoleToggle=function(e){if(e!=this.roleIndex)for(var t=0;t<this.roleHeadSelects.length;t++)this.roleHeadSelects[t].active=t==e},t.prototype.setPanelState=function(e){console.log("curIndex\uff1a",e);for(var t=0;t<4;t++)t!=e&&3!=t&&this.closePanel(t);this.skillPanel.node.active=0==e,this.neiGongPanel.node.active=1==e,this.jingMai.node.active=2==e,this.mijiPanel.node.active=3==e},t.prototype.setBtnState=function(e){this.skillBtn.getChildByName("checkmark").active=0==e,this.neiGongBtn.getChildByName("checkmark").active=1==e,this.jingMaiBtn.getChildByName("checkmark").active=2==e,this.miJiBtn.getChildByName("checkmark").active=3==e},t.prototype.closePanel=function(e){switch(e){case 0:this.skillPanel.close();break;case 1:this.neiGongPanel.close();break;case 2:this.jingMai.close();break;case 3:this.mijiPanel.close()}},t.Panel_JINENG=0,t.Panel_NEIGONG=1,t.Panel_JINGMAI=2,t.Panel_MIJI=3,t.Panel_ZHANLING=4,__decorate([w({type:m.default,displayName:"skillPanel"})],t.prototype,"skillPanel",void 0),__decorate([w({type:b.default,displayName:"jingMai"})],t.prototype,"jingMai",void 0),__decorate([w({type:_.default,displayName:"mijiPanel"})],t.prototype,"mijiPanel",void 0),__decorate([w({type:C.default,displayName:"zhanlingPanel"})],t.prototype,"zhanlingPanel",void 0),__decorate([w({type:M.default,displayName:"neiGongPanel"})],t.prototype,"neiGongPanel",void 0),__decorate([w({type:cc.Sprite,displayName:"skillTitle"})],t.prototype,"skillTitle",void 0),__decorate([w({type:cc.Button,displayName:"closeBtn"})],t.prototype,"closeBtn",void 0),__decorate([w({type:cc.Button,displayName:"closeBtn0"})],t.prototype,"closeBtn0",void 0),__decorate([w({type:cc.Node,displayName:"redPoint0"})],t.prototype,"redPoint0",void 0),__decorate([w({type:cc.Node,displayName:"redPoint1"})],t.prototype,"redPoint1",void 0),__decorate([w({type:cc.Node,displayName:"redPoint2"})],t.prototype,"redPoint2",void 0),__decorate([w({type:cc.Node,displayName:"redPoint3"})],t.prototype,"redPoint3",void 0),__decorate([w({type:cc.Node,displayName:"redPoint4"})],t.prototype,"redPoint4",void 0),__decorate([w({type:cc.Node,displayName:"help"})],t.prototype,"help",void 0),__decorate([w({type:cc.Node,displayName:"skillBtn"})],t.prototype,"skillBtn",void 0),__decorate([w({type:cc.Node,displayName:"neiGongBtn"})],t.prototype,"neiGongBtn",void 0),__decorate([w({type:cc.Node,displayName:"jingMaiBtn"})],t.prototype,"jingMaiBtn",void 0),__decorate([w({type:cc.Node,displayName:"miJiBtn"})],t.prototype,"miJiBtn",void 0),__decorate([w({type:cc.Node,displayName:"viewStack"})],t.prototype,"viewStack",void 0),__decorate([w({type:cc.Node,displayName:"roleSelect"})],t.prototype,"roleSelect",void 0),__decorate([w({type:cc.Node,displayName:"roleHeadSelects"})],t.prototype,"roleHeadSelects",void 0),__decorate([w({type:cc.Label,displayName:"rolesLabel"})],t.prototype,"rolesLabel",void 0),t=i=__decorate([P],t)}(n.default);i.default=L,cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/Util":"Util","../../../../core/view/BaseEuiView":"BaseEuiView","../../../customComponent/JingMaiPanel":"JingMaiPanel","../../../customComponent/MijiPanel":"MijiPanel","../../../customComponent/SkillPanel":"SkillPanel","../../../customComponent/ZhanLingPanel":"ZhanLingPanel","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../../manager/TimerManager":"TimerManager","../../bag/UserBag":"UserBag","../../battle/view/CommonHelpWin":"CommonHelpWin","../../fb/UserFb":"UserFb","../../gamescene/view/ui/UIView2":"UIView2","../../neigong/NeiGong":"NeiGong","../../neigong/model/NeiGongModel":"NeiGongModel","../../neigong/view/NeiGongWin":"NeiGongWin","../../rolewin/UserJingMai":"UserJingMai","../../rolewin/UserSkill":"UserSkill","../../tips/UserTips":"UserTips","../../zhanling/ZhanLing":"ZhanLing","../../zhanling/model/ZhanLingModel":"ZhanLingModel","../../zs/UserMiji":"UserMiji","../../zs/UserZs":"UserZs"}],SkillsConfig:[function(e,t,i){"use strict";cc._RF.push(t,"493f8nHBFZGXLP4MKl8tASk","SkillsConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],SkillsDescConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6ec66f0c5FCiKsnUtjyOhtY","SkillsDescConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],SkillsOpenConfig:[function(e,t,i){"use strict";cc._RF.push(t,"54598tYh+lBtIXoP6BPphpn","SkillsOpenConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],SkillsSorderConfig:[function(e,t,i){"use strict";cc._RF.push(t,"580cbBY5jFAmIWA/85UGqky","SkillsSorderConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],SkillsUpgradeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"71f47oNFllLTr3d/uACafCv","SkillsUpgradeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],SkirmishBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a4b4a4GfDBIErjOEDDnsn0W","SkirmishBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],SkirmishRankConfig:[function(e,t,i){"use strict";cc._RF.push(t,"243a1bGrRhPxpfV/iTN9ddu","SkirmishRankConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],SkirmishRewardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"32effe0+vlE15PMfJBBQppl","SkirmishRewardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],SkyLevelModel:[function(e,t,i){"use strict";cc._RF.push(t,"2c164TK/b5B37mbkRQFSwIk","SkyLevelModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../manager/GlobalConfig"),a=e("../../entity/Actor"),o=e("../../../core/utils/CommonUtils"),r=function(){function e(){this.cruLevel=1,this.lastPass=!1,this.stageLevel=1,this.dayReward=1,this.limitTime=180,this.rewardTimes=0}return e.ins=function(){return this._instance||(this._instance=new e),this._instance},Object.defineProperty(e.prototype,"lotteryRemainTimes",{get:function(){var e;if(0!=this.cruLevel){if(e=n.default.FbChallengeConfig[this.cruLevel-1],this.cruLevel-1<n.default.FbChallengeBaseConfig.LotteryOpenLevel)return 0}else{var t=Object.keys(n.default.FbChallengeConfig).length;e=n.default.FbChallengeConfig[t]}return e?e.lotteryCount-this.lotteryUseTimes:0},enumerable:!0,configurable:!0}),e.prototype.isGetLotteryAward=function(e){return 1==(this.lotteryIndexs>>e&1)},e.prototype.getNextOpenLevel=function(){var e=n.default.FbChallengeConfig;for(var t in e)if(e[t].id>=this.cruLevel&&e[t].showIcon)return e[t];return null},e.prototype.getIsopenNext=function(){var e=n.default.FbChallengeConfig[this.cruLevel];return a.default.level>=e.levelLimit&&a.default.zhuanShengLv>=e.zsLevelLimit},e.prototype.getSkyLevelList=function(){var e=[],t=n.default.FbChallengeConfig[this.cruLevel],i=this.getStageList(),a=o.default.getObjectLength(i);for(var r in i){var s=i[r];if(this.checkIsPushInlist(t.layer,s.layer,a)&&(e.push(s),e.length>=6))break}return e.reverse(),e},e.prototype.setLimtTimeDown=function(e){this.limitTime=e,TimerManager.ins().remove(this.timeDown,this),TimerManager.ins().doTimer(1e3,e,this.timeDown,this)},e.prototype.timeDown=function(){this.limitTime--,this.limitTime<0&&(this.limitTime=0,TimerManager.ins().remove(this.timeDown,this))},e.prototype.checkIsPushInlist=function(e,t,i){if(e<=4)return!0;if(e>4){var n=i-e>=3?3:i-e;return t<=e+n&&t>e-(6-n)}},e.prototype.getStageList=function(){var e=n.default.FbChallengeConfig,t=e[this.cruLevel];this.stageLevel=t.group;var i=[];if(!t)return i;for(var a in e){var o=e[a];o.group==t.group&&i.push(o)}return i},e.prototype.setCruLevelInfo=function(e){e>0?(this.cruLevel=e,this.lastPass=!1):(this.cruLevel=o.default.getObjectLength(n.default.FbChallengeConfig),this.lastPass=!0)},e}();i.default=r,cc._RF.pop()},{"../../../core/utils/CommonUtils":"CommonUtils","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig"}],SmeltEquipTotalWin:[function(e,t,i){"use strict";cc._RF.push(t,"485aa116X9GaKSId4zR8uqz","SmeltEquipTotalWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../../../customComponent/ItemIconSimple"),r=e("../../../../core/base/ViewManager"),s=e("../UserBag"),u=e("../../rolewin/UserEquip"),l=e("../../../manager/GlobalConfig"),c=e("../../../config/ItemConfig"),d=e("../../../../core/utils/ComponentUtil"),f=cc._decorator,p=f.ccclass,h=f.property,g=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Popup,t.closeBtn=null,t.smeltBtn=null,t.itemGroup=[],t.viewIndex=0,t.smeltEquips=[],t.selSmeltEquips=[],t}return __extends(t,e),t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.smeltBtn,this.onTap),this.setItemData(),this.observe(u.default.ins().postSmeltEquipComplete,this.setItemData),this.observe(u.default.ins().postEquipCheckList,this.setItemList),this.observe(u.default.ins().postSmeltEquipComplete,this.smeltShowTips)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.onTap=function(e){(this.delateSelectSmelt(),console.log(this.smeltEquips),this.smeltEquips.length<1)?console.log("\u6ca1\u6709\u7194\u70bc\u6750\u6599"):u.default.ins().sendSmeltEquip(this.viewIndex,this.smeltEquips)&&console.log("\u7194\u70bc\u6210\u529f\uff01\uff01\uff01\uff01")},t.prototype.setItemData=function(){this.selSmeltEquips=[],this.smeltEquips=s.default.ins().getOutEquips(),this.replaceAllEquipcell(this.smeltEquips)},t.prototype.setItemList=function(e){this.replaceAllEquipcell(e)},t.prototype.smeltShowTips=function(e){for(var t=0;t<e.length;t++){var i=e[t],n=l.default.EquipConfig[i.itemId];if(n){var a=l.default.ItemConfig[n.id];if(a){var o="\u83b7\u5f97|C:"+c.default.getQualityColor(a)+"&T:"+a.name+" x "+i.count+"|";console.log(o)}}}},t.prototype.replaceAllEquipcell=function(e){for(var t=0;t<9;t++){this.itemGroup[t].updateDataView(e[t]);var i=this.itemGroup[t].node.getComponent(cc.Button);i.clickEvents[0]=d.ComponentUtil.createEventHandler(this.node,"SmeltEquipTotalWin","onClickSmeltEquipCell",""),i.clickEvents[0].customEventData=""+t}},t.prototype.delateSelectSmelt=function(){this.smeltEquips;this.selSmeltEquips.sort(function(e,t){return t-e});for(var e=0;e<this.selSmeltEquips.length;e++)this.smeltEquips.splice(this.selSmeltEquips[e],1);this.selSmeltEquips=[]},t.prototype.onClickClosePanel=function(e){r.default.ins().close(this)},t.prototype.onClickSmeltEquipCell=function(e,t){null!=this.itemGroup[+t].itemIconInfo&&(this.selSmeltEquips.push(+t),this.itemGroup[+t].updateDataView(null))},__decorate([h({type:cc.Button,displayName:"closeBtn"})],t.prototype,"closeBtn",void 0),__decorate([h({type:cc.Button,displayName:"smeltBtn"})],t.prototype,"smeltBtn",void 0),__decorate([h({type:o.default,displayName:"itemGroup"})],t.prototype,"itemGroup",void 0),t=__decorate([p],t)}(n.default);i.default=g,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/ComponentUtil":"ComponentUtil","../../../../core/view/BaseEuiView":"BaseEuiView","../../../config/ItemConfig":"ItemConfig","../../../customComponent/ItemIconSimple":"ItemIconSimple","../../../enum/LayerManager":"LayerManager","../../../manager/GlobalConfig":"GlobalConfig","../../rolewin/UserEquip":"UserEquip","../UserBag":"UserBag"}],SoundBg:[function(e,t,i){"use strict";cc._RF.push(t,"18bfbeAPMRFG6GFdgkmJTaj","SoundBg"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){var t=e.call(this)||this;return t._currBg="",t}return __extends(t,e),t.prototype.stop=function(){this._currSoundChannel&&this.removeSoundChannel(this._currSoundChannel),this._currSoundChannel=null,this._currSound=null,this._currBg=""},t.prototype.play=function(e){if(this._currBg!=e){this.stop(),this._currBg=e;var t=this.getSound(e);t&&this.playSound(t)}},t.prototype.touchPlay=function(){if(this._currSoundChannel&&this._currSound){var e=this._currSoundChannel.position;this.removeSoundChannel(this._currSoundChannel),this._currSoundChannel=this._currSound.play(e,1),this.addSoundChannel(this._currSoundChannel)}},t.prototype.playSound=function(e){this._currSound=e,this._currSoundChannel=this._currSound.play(0,1),this.addSoundChannel(this._currSoundChannel)},t.prototype.onSoundComplete=function(){this._currSoundChannel&&this.removeSoundChannel(this._currSoundChannel),this.playSound(this._currSound)},t.prototype.addSoundChannel=function(e){e.volume=this._volume,e.addEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this)},t.prototype.removeSoundChannel=function(e){e.removeEventListener(egret.Event.SOUND_COMPLETE,this.onSoundComplete,this),e.stop()},t.prototype.setVolume=function(e){this._volume=e,this._currSoundChannel&&(this._currSoundChannel.volume=this._volume)},t.prototype.loadedPlay=function(e){if(this._currBg==e){var t=RES.getRes(e);if(!t)return;this.playSound(t)}},t.prototype.checkCanClear=function(e){return this._currBg!=e},t}(e("./BaseSound").default);i.default=n,cc._RF.pop()},{"./BaseSound":"BaseSound"}],SoundEffects:[function(e,t,i){"use strict";cc._RF.push(t,"dd339S7R2ZPI5etFkzYds0X","SoundEffects"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.prototype.play=function(e){var t=this.getSound(e);t&&this.playSound(t)},t.prototype.playSound=function(e){e.play(0,1).volume=this._volume},t.prototype.setVolume=function(e){this._volume=e},t.prototype.loadedPlay=function(e){var t=RES.getRes(e);t&&this.playSound(t)},t}(e("./BaseSound").default);i.default=n,cc._RF.pop()},{"./BaseSound":"BaseSound"}],SoundManager:[function(e,t,i){"use strict";cc._RF.push(t,"262e2Jw1XJCB7XSZoegVKRC","SoundManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../base/BaseClass"),a=e("./SoundBg"),o=e("./SoundEffects"),r=function(e){function t(){var t=e.call(this)||this;return t.bgOn=!0,t.effectOn=!0,t.bgVolume=.5,t.effectVolume=.5,t.bg=new a.default,t.bg.setVolume(t.bgVolume),t.effect=new o.default,t.effect.setVolume(t.effectVolume),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.playEffect=function(e){this.effectOn&&this.effect.play(e)},t.prototype.playBg=function(e){this.currBg=e,this.bgOn&&this.bg.play(e)},t.prototype.stopBg=function(){this.bg.stop()},t.prototype.touchBg=function(){},t.prototype.setEffectOn=function(e){this.effectOn=e},t.prototype.setBgOn=function(e){this.bgOn=e,this.bgOn?this.currBg&&this.playBg(this.currBg):this.stopBg()},t.prototype.setBgVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.bgVolume=e,this.bg.setVolume(this.bgVolume)},t.prototype.getBgVolume=function(){return this.bgVolume},t.prototype.setEffectVolume=function(e){e=Math.min(e,1),e=Math.max(e,0),this.effectVolume=e,this.effect.setVolume(this.effectVolume)},t.prototype.getEffectVolume=function(){return this.effectVolume},t.CLEAR_TIME=18e4,t}(n.default);i.default=r,cc._RF.pop()},{"../base/BaseClass":"BaseClass","./SoundBg":"SoundBg","./SoundEffects":"SoundEffects"}],SoundUtil:[function(e,t,i){"use strict";cc._RF.push(t,"e07fbkKbQ9Ilp4o5XevrYxn","SoundUtil"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/BaseClass"),a=e("../../Utils/EgretUtils"),o=e("../../manager/TimerManager"),r=e("../../../core/sound/SoundManager"),s=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._delayTime=0,t._delayStartTime=0,t._runTimeGap=700,t._runTimeStart=0,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.playRunSound=function(){a.default.getTimer()-this._runTimeStart>=this._runTimeGap&&(this._runTimeStart=a.default.getTimer(),r.default.ins().playEffect(t.RUN))},t.prototype.playRun=function(){a.default.getTimer()-this._runTimeStart>this._runTimeGap+100&&this.playRunSound(),o.default.ins().isExists(this.playRunSound,this)||o.default.ins().doTimer(this._runTimeGap,0,this.playRunSound,this)},t.prototype.stopRun=function(){o.default.ins().remove(this.playRunSound,this)},t.prototype.playEffect=function(e){a.default.getTimer()-this._delayStartTime<this._delayTime||r.default.ins().playEffect(e)},t.prototype.delayTime=function(e){this._delayTime=e,this._delayStartTime=a.default.getTimer()},t.RUN="longlin_a_pd_mp3",t.WINDOW="longlin_a_dkjm_mp3",t.TASK="longlin_b_renwu_mp3",t.LEVEL_UP="longlin_b_shengji_mp3",t.SCENE="longlin_a_zyz_mp3",t.EQUIP="longlin_a_chuandai_mp3",t.CREATE_ROLE="longlin_a_chuangjue_mp3",t.FORGE="longlin_a_qianghua_mp3",t.SMELT="longlin_b_ronglian_mp3",t.SKILL_UP="longlin_b_jineng_mp3",t.WINDOW_OPEN=!1,t}(n.default);i.default=s,cc._RF.pop()},{"../../../core/base/BaseClass":"BaseClass","../../../core/sound/SoundManager":"SoundManager","../../Utils/EgretUtils":"EgretUtils","../../manager/TimerManager":"TimerManager"}],SpecialEquipsConfig:[function(e,t,i){"use strict";cc._RF.push(t,"556d1N/dUBEUbKOYJdB9uRd","SpecialEquipsConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,function(e){e[e.fj=1]="fj",e[e.hc=2]="hc"}(i.FitleStyle||(i.FitleStyle={})),cc._RF.pop()},{}],SpecialRingData:[function(e,t,i){"use strict";cc._RF.push(t,"4a826ASOe1IyIi+Ou42GlSP","SpecialRingData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../manager/GlobalConfig"),a=function(){function e(){this.id=0,this.level=0,this.exp=0,this.fight=0,this.order=0,this.isUnLock=0}return e.prototype.parser=function(e){this.id=e.readShort(),this.level=e.readShort(),this.exp=e.readInt(),this.fight=e.readByte(),this.isUnLock=e.readByte(),this.order=n.default.ActorExRingConfig[this.id].order},e}();i.default=a,cc._RF.pop()},{"../../../manager/GlobalConfig":"GlobalConfig"}],SpecialRing:[function(e,t,i){"use strict";cc._RF.push(t,"8bd0dNeXmBPQpOLfrmhJlxC","SpecialRing"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../gamescene/GameLogic"),r=e("../../map/GameMap"),s=e("../../base/EntityManager"),u=e("../../manager/GlobalConfig"),l=e("../bag/UserBag"),c=e("../../entity/SubRoles"),d=e("../../../core/base/AttributeType"),f=e("../../entity/Actor"),p=e("../../Utils/EgretUtils"),h=e("../../ai/RoleAI"),g=e("../artifact/Artifact"),y=e("../vip/UserVip"),v=e("../activity/model/RewardData"),m=e("./model/SpecialRingData"),b=e("./model/RingSkillInfo"),_=e("../../../core/base/MessageCenter"),C=e("./LyMark"),I=e("../fb/UserFb"),T=e("../../../core/utils/CommonUtils"),S=function(e){function t(){var i=e.call(this)||this;return i.mainHandler=[],i.ringList=[],i.loginDayCount=0,i.ringActiNum=0,i.specialRingHandler=[],i.ringsConfig=[],i.moneyOpenGrid=0,i.abilityIds=[],i.skillLvDic={},_.default.compile(t),i.sysId=a.PackageID.Ring,i.regNetMsg(1,i.postRingUpdate),i.regNetMsg(2,i.postActiveRing),i.regNetMsg(3,i.postSpicelRingUpdate),i.regNetMsg(4,i.postGetSpicelRingInfo),i.regNetMsg(5,i.postSRStairUp),i.regNetMsg(6,i.postSRStairUp),i.regNetMsg(7,i.postUnLock),i.regNetMsg(8,i.postSkillInfo),i.regNetMsg(9,i.postRingAbility),i.observe(o.default.ins().postEnterMap,i.createRingAvatar),i}return __extends(t,e),t.prototype.postRingAbility=function(e){for(var i=e.readShort(),n=0;n<i;n++){var a=e.readShort(),o=e.readShort();this.abilityIds[a]=o}if(0==r.default.fbType){var c=this.getSpecialRingDataById(t.FIRE_RING_ID);if(c)this.getRingStair(c.level)>=2&&(this.specialRingHandler[t.FIRE_RING_ID]>0&&s.default.ins().removeByHandle(this.specialRingHandler[t.FIRE_RING_ID]),t.ins().createRingMonster(t.FIRE_RING_ID))}var d=u.default.ActorExRingItemConfig[t.FIRE_RING_ID];for(var a in d)if(d[a][1]){var f=l.default.ins().getBagItemById(d[a][1].itemId);f&&f.setCanbeUsed()}l.default.ins().postHasItemCanUse()},t.prototype.createRingAvatar=function(){if(0==r.default.fbType){var e=this.getSpecialRingDataById(t.FIRE_RING_ID);if(e)this.getRingStair(e.level)>=2&&t.ins().createRingMonster(t.FIRE_RING_ID)}},t.prototype.sendUpGrade=function(e,t){var i=this.getBytes(1);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.prototype.postRingUpdate=function(e){var t=e.readShort(),i=e.readShort(),n=e.readShort();return c.default.ins().getSubRoleByIndex(i).setExRingsData(t,n),!0},t.prototype.sendActiveRing=function(e,t){void 0===t&&(t=0);var i=this.getBytes(2);i.writeShort(e),i.writeByte(t),this.sendToServer(i)},t.prototype.postActiveRing=function(e){var i=e.readShort(),n=e.readShort(),a=e.readInt(),o=e.readByte(),r=this.getSpecialRingDataById(i);return r.level=n,r.exp=a,r.fight=o,this.ringActiNum++,i==t.FIRE_RING_ID&&this.updateGrid(),[i,0]},t.prototype.postSRStairUp=function(e){var t=e.readShort(),i=e.readShort(),n=e.readInt(),a=e.readByte(),o=this.getSpecialRingDataById(t);return o.level=i,o.exp=n,o.fight=a,this.createRingAvatar(),this.updateGrid(),[t,0]},t.prototype.sendSpicelRingUpdate=function(e){var t=this.getBytes(3);t.writeShort(e),this.sendToServer(t)},t.prototype.postSpicelRingUpdate=function(e){var t,i=e.readShort(),n=e.readShort(),a=e.readInt(),o=this.getSpecialRingDataById(i);t=e.readByte();var r=e.readByte();return o.level=n,o.exp=a,o.fight=r,[i,t]},t.prototype.postGetSpicelRingInfo=function(e){this.loginDayCount=e.readInt();var t=e.readShort();this.ringList=[],this.ringActiNum=0;for(var i=0;i<t;i++){var n=new m.default;n.parser(e),this.ringList.push(n),n.level>0&&this.ringActiNum++}return 0==r.default.fbType&&o.default.ins().postHookStateChange(o.default.HOOK_STATE_FIND_ENMENY),this.createRingAvatar(),!0},t.prototype.isFireRing=function(e){return this.specialRingHandler[t.FIRE_RING_ID]==e},t.prototype.createRingMonster=function(e){if(this.ringList&&!(this.ringList.length<=0)){var i=u.default.ActorExRingConfig[e];if(!(this.getSpecialRingDataById(e).level<i.showMonsterLv)){var n=i.monsterId,a=this.getAbilityID();if(a){var r=u.default.ActorExRingItemConfig[t.FIRE_RING_ID][a][this.abilityIds[a]];r&&(n+=r.monId)}if(!s.default.ins().getEntityByHandle(this.specialRingHandler[e])){var l=s.default.ins().getNoDieRole();if(l){var c=I.default.createModel(u.default.MonstersConfig[n]);c.setAtt(d.AttributeType.atMoveSpeed,t.FIRE_RING_MOVING_SPEED),c.x=l.x,c.y=l.y,c.masterHandle=f.default.handle,this.specialRingHandler[e]=c.handle=p.default.getTimer(),c.lyMarkLv=C.default.ins().lyMarkLv,c.lyMarkSkills=C.default.ins().skills,o.default.ins().createEntityByModel(c,h.Team.My).AI_STATE=h.AI_State.Stand}}}}},t.prototype.sendRingLevelUp=function(e){var t=this.getBytes(5);t.writeShort(e),this.sendToServer(t)},t.prototype.sendRingFight=function(e,t){var i=this.getBytes(6);i.writeShort(e),i.writeByte(t),this.sendToServer(i)},t.prototype.checkOperation=function(){var e=this.checkHaveUpRing();return!e&&this.isFireRingFuse()&&(e=this.isCanStudySkill()||this.isCanUpgradeSkill()),e},t.prototype.checkHaveUpRing=function(){if(!t.ins().checkRingOpen())return!1;for(var e=this.ringList.length,i=0;i<e;i++){var n=this.ringList[i],a=this.checkRedPoint(n.id,n.level);if(a)return a}return!1},t.prototype.checkRingOpen=function(){var e=u.default.ActorExRingCommon.actImbaId;return!!g.default.ins().getNewArtifactBy(g.default.ins().getArtifactIndexById(e))&&g.default.ins().getNewArtifactBy(g.default.ins().getArtifactIndexById(e)).open},t.prototype.checkRedPoint=function(e,t){return t>0?this.checkCanUpdate(e,t):this.checkCanActive(e)},t.prototype.checkCanUpdate=function(e,i){var n=!1;if(e==t.FIRE_RING_ID&&this.isFireRingFuse()){u.default.ActorExRingConfig[e];if(this.getRingConfigById(e,i+1))if(i%11==0)n=!0;else{var a=this.getRingConfigById(e,i),o=l.default.ins().getBagGoodsCountById(0,a.costItem);n=a.cost<=o}}return n},t.prototype.checkCanActive=function(e){var i=u.default.ActorExRingConfig[e],n=!1;e==t.FIRE_RING_ID?this.isFireRingActivate()||(n=this.isFireRingCanActivate()):0==this.getSpecialRingDataById(e).level&&(n=t.ins().loginDayCount>=i.openDay&&i.openDay>=0||y.default.ins().lv>=i.openVip&&i.openVip>=0&&f.default.yb>=i.openYb);return n},t.prototype.canGradeupRing=function(e){for(var t=[!1,!1,!1],i=c.default.ins().subRolesLen,n=0,a=0,o=0,r=0;r<i;r++){n=c.default.ins().getSubRoleByIndex(r).getExRingsData(e),(a=u.default["ExRing"+e+"Config"][n].cost)?(o=l.default.ins().getBagGoodsCountById(0,u.default.ExRingConfig[e].costItem),t[r]=o>=a):t[r]=!1}return t},t.prototype.getRingConfigById=function(e,t){return 0==this.ringsConfig.length&&this.initConfig(),this.ringsConfig[e]&&this.ringsConfig[e][t]?this.ringsConfig[e][t]:null},t.prototype.initConfig=function(){this.ringsConfig=[];var e=u.default.ActorExRingConfig;for(var t in e)this.ringsConfig[e[t].id]=u.default["ActorExRing"+t+"Config"]},t.prototype.getRingStair=function(e){return Math.ceil(e/(t.perStar+1))},t.prototype.getRingStar=function(e){return e<1?0:(e-1)%(t.perStar+1)},t.prototype.hasHanlder=function(e){for(var t=0;t<this.mainHandler.length;t++)if(e==this.mainHandler[t])return!0;return this.mainHandler.push(e),!1},t.prototype.delHanlder=function(e){for(var t=0;t<this.mainHandler.length;t++)if(e==this.mainHandler[t])return void this.mainHandler.splice(t,1)},t.prototype.getSpecialRingDataById=function(e){for(var t=0;t<this.ringList.length;t++)if(this.ringList[t].id==e)return this.ringList[t];return null},t.prototype.isFireRingFuse=function(){var e=!1,i=this.getSpecialRingDataById(t.FIRE_RING_ID);return i&&i.level>=1&&(e=!0),e},t.prototype.isFireRingActivate=function(){var e=!1,i=this.getSpecialRingDataById(t.FIRE_RING_ID);return i&&i.isUnLock&&(e=!0),e},t.prototype.isFireRingCanActivate=function(){var e=!1,i=u.default.ActorExRingConfig[t.FIRE_RING_ID];i.openDay;if(t.ins().loginDayCount>=i.openDay)for(var n=0;n<this.ringList.length;n++)if(e=!0,this.ringList[n].id!=t.FIRE_RING_ID&&0==this.ringList[n].level){e=!1;break}return e},t.prototype.requestDeblock=function(e){var t=this.getBytes(7);t.writeShort(e),this.sendToServer(t)},t.prototype.postUnLock=function(e){for(var t=e.readShort(),i=e.readShort(),n=e.readInt(),a=e.readByte(),o=e.readByte(),r=0;r<this.ringList.length;r++)if(this.ringList[r].id==t){this.ringList[r].level=i,this.ringList[r].exp=n,this.ringList[r].fight=a,this.ringList[r].isUnLock=o;break}return 1==o},t.prototype.requestOpenGrid=function(){var e=this.getBytes(8);this.sendToServer(e)},t.prototype.requestLearnSkill=function(e,t){var i=this.getBytes(9);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.prototype.requestUpgradeSkill=function(e){var t=this.getBytes(10);t.writeShort(e),this.sendToServer(t)},t.prototype.postSkillInfo=function(e){this.initSkill(),this.moneyOpenGrid=e.readShort(),this.updateGrid();for(var t=e.readShort(),i=0;i<t;i++){var n=new b.default;n.position=e.readShort(),n.skillId=e.readShort(),n.skillLvl=e.readShort(),this.updateSkillInfo(n)}},t.prototype.updateGrid=function(){var e=this.getSpecialRingDataById(t.FIRE_RING_ID),i=0;e.level>0&&(i=this.moneyOpenGrid+this.getRingConfigById(t.FIRE_RING_ID,e.level).freeSkillGrid),this.updateGridOpen(i)},t.prototype.updateGridOpen=function(e){for(var t=1;t<=e;t++){this.skillInfo[t-1].isOpen=!0}},t.prototype.updateSkillInfo=function(e){for(var t=this.skillInfo.length,i=0;i<t;i++){var n=this.skillInfo[i];n.position==e.position&&(n.skillId=e.skillId,n.skillLvl=e.skillLvl)}},t.prototype.initSkill=function(){if(!this.skillInfo){this.skillInfo=[];for(var e=1;e<9;e++){var t=new b.default;t.position=e,this.skillInfo.push(t)}}},t.prototype.getCanStudyBook=function(){var e=[];if(!this.skillInfo)return e;for(var t=this.skillInfo.length,i=[],n=0;n<t;n++){var a=this.skillInfo[n];a.skillId>0&&i.push(a.skillId)}for(var o=this.getActorExRingBookConfigByLvl(1),r=o.length,s=0;s<r;s++){var u=o[s];if(i.indexOf(u.id)<0){var c=l.default.ins().getBagGoodsCountById(0,u.itemId);if(c>=u.num){var d=new v.default;d.id=u.itemId,d.count=c,d.type=1,e.push(d)}}}return e},t.prototype.isBookCanStudy=function(e){for(var t=this.skillInfo.length,i=[],n=0;n<t;n++){var a=this.skillInfo[n];a.skillId>0&&i.push(a.skillId)}for(var o=this.getActorExRingBookConfigByLvl(1),r=o.length,s=0;s<r;s++){var u=o[s];if(u.itemId==e&&i.indexOf(u.id)<0)if(l.default.ins().getBagGoodsCountById(0,u.itemId)>=u.num)return!0}return!1},t.prototype.getStudyBook=function(){for(var e=[],t=this.getActorExRingBookConfigByLvl(1),i=t.length,n=0;n<i;n++){var a=t[n],o=l.default.ins().getBagGoodsCountById(0,a.itemId),r=new v.default;r.id=a.itemId,r.count=o,r.type=1,e.push(r)}return e},t.prototype.getFirstStudyBookIndex=function(){for(var e=this.getActorExRingBookConfigByLvl(1),t=e.length,i=0;i<t;i++){var n=e[i];if(this.isBookCanStudy(n.itemId))return i}return 0},t.prototype.isCanStudySkill=function(){var e=this.getCanStudyBook(),t=!1;return void 0!=e&&e.length>0&&this.isHaveFreeGrid()&&(t=!0),t},t.prototype.isHaveFreeGrid=function(){for(var e=this.skillInfo.length,t=0;t<e;t++){var i=this.skillInfo[t];if(0==i.skillId&&i.isOpen)return!0}return!1},t.prototype.isCanUpgradeSkill=function(){if(!this.skillInfo)return!1;for(var e=this.skillInfo.length,t=0;t<e;t++){var i=this.skillInfo[t];if(i.skillId>0&&i.skillLvl<this.getSkillMaxLvl(i.skillId)){var n=this.getActorExRingBookConfig(i.skillId,i.skillLvl);if(l.default.ins().getBagGoodsCountById(0,n.itemId)>=n.num)return!0}}return!1},t.prototype.fireRingRedPoint=function(){return I.default.ins().fbRings.challengeTime>0||I.default.ins().fbRings.canTakeAward},t.prototype.getActorExRingBookConfig=function(e,t){var i;for(var n in u.default.ActorExRingBookConfig)for(var a in u.default.ActorExRingBookConfig[n])if(n==e.toString()&&a==t.toString()){i=u.default.ActorExRingBookConfig[n][a];break}return i},t.prototype.getActorExRingBookConfigByLvl=function(e){var t=[],i=[];for(var n in u.default.ActorExRingBookConfig)for(var a in u.default.ActorExRingBookConfig[n])if(a==e.toString()){i.indexOf(u.default.ActorExRingBookConfig[n][a].itemId)<0&&(i.push(u.default.ActorExRingBookConfig[n][a].itemId),t.push(u.default.ActorExRingBookConfig[n][a]));break}return t},t.prototype.getSkillIdByItemId=function(e){for(var t in u.default.ActorExRingBookConfig)for(var i in u.default.ActorExRingBookConfig[t])if(u.default.ActorExRingBookConfig[t][i].itemId==e)return parseInt(t);return 0},t.prototype.getSkillMaxLvl=function(e){var t=0;if(void 0!=this.skillLvDic[e])t=this.skillLvDic[e];else{for(var i in u.default.ActorExRingBookConfig)if(i==e.toString())for(var n in u.default.ActorExRingBookConfig[i])t++;this.skillLvDic[e]=t}return t},t.prototype.getNextStageSkillName=function(e){var t;for(var i in u.default.ActorExRingAbilityConfig){var n=u.default.ActorExRingAbilityConfig[i];if(n&&n.ringLv==e){t=n.abilityName;break}}return t},t.prototype.getUnLockStage=function(e){var t;switch(u.default.ActorExRingAbilityConfig[e].ringLv){case 1:t="\u4e00";break;case 5:t="\u4e94";break;case 10:t="\u5341";break;case 20:t="\u4e8c\u5341";break;case 40:t="\u56db\u5341";break;case 60:t="\u516d\u5341";break;case 80:t="\u516b\u5341"}return t},t.prototype.getRingSkill=function(){if(!this.skillInfo)return 0;for(var e=this.skillInfo.length,t=0,i=0;i<e;i++){var n=this.skillInfo[i];if(7==n.skillId){t=n.skillLvl;break}}var a=this.getSpecialRingDataById(7).level,o=this.getRingConfigById(7,a).summonerSkillId;if(t>0&&o){var r=o%10;(r+=t)>9&&(r=9),o=10*Math.floor(o/10)+r}return o},t.prototype.getCanUpgradeStars=function(e){for(var i=this.getSpecialRingDataById(t.FIRE_RING_ID).level,n=0;;){i++;var a=u.default.ActorExRing7Config[i];if(!a)return n;if(!((e-=a.cost)>=0))return n;n++}},t.prototype.getAbilityID=function(e){void 0===e&&(e=0);var t=0;for(var i in this.abilityIds){if(t==e)return+i;t++}return 0},t.prototype.getAbilityIdByItemId=function(e){var i=u.default.ActorExRingItemConfig[t.FIRE_RING_ID];for(var n in i)if(i[n][1].itemId=e)return+n;return 0},t.prototype.getMaxAbilityLvByItemId=function(e){var i=u.default.ActorExRingItemConfig[t.FIRE_RING_ID];for(var n in i)if(i[n][1].itemId=e)return T.default.getObjectLength(i[n]);return 0},t.prototype.checkCanUseByItem=function(e){var t=this.getAbilityIdByItemId(e),i=this.getMaxAbilityLvByItemId(e);return!(t&&this.abilityIds[t]>=i)},t.ins=function(){return e.ins.call(this)},t.perStar=10,t.FIRE_RING_ID=7,t.FIRE_RING_MOVING_SPEED=3750,t.GRID_OPEN_LEVEL=20,t}(n.default);i.default=S,window.GameSystem.push(S.ins.bind(S)),cc._RF.pop()},{"../../../core/base/AttributeType":"AttributeType","../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/CommonUtils":"CommonUtils","../../Utils/EgretUtils":"EgretUtils","../../ai/RoleAI":"RoleAI","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../entity/Actor":"Actor","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../../map/GameMap":"GameMap","../activity/model/RewardData":"RewardData","../artifact/Artifact":"Artifact","../bag/UserBag":"UserBag","../fb/UserFb":"UserFb","../gamescene/GameLogic":"GameLogic","../vip/UserVip":"UserVip","./LyMark":"LyMark","./model/RingSkillInfo":"RingSkillInfo","./model/SpecialRingData":"SpecialRingData"}],SplashScene:[function(e,t,i){"use strict";cc._RF.push(t,"6f2cfn6lHpGbohDorpR5rH5","SplashScene"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./core/base/GameConfig"),a=e("./game/rolemgr/RoleMgr"),o=e("./game/manager/GlobalConfig"),r=e("./game/manager/UILoadMgr"),s=cc._decorator,u=s.ccclass,l=s.property,c=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.accountPanel=null,t.loadingPanel=null,t.progressItem=null,t.progressDot=null,t.isLoad=!1,t.isComplete=!1,t}return __extends(t,e),t.prototype.start=function(){r.default.inst.initLoadFrefab(),this.loadingPanel.active=!1,this.accountPanel.active=!0,window.GameSystem.forEach(function(e){e()}),this.complete()},t.prototype.onLoginClick=function(){this.accountPanel.active=!1,this.loadingPanel.active=!0,this.doLoading()},t.prototype.doLoading=function(){var e=this;this.isLoad=!0;var t=cc.sequence(cc.moveTo(2,253,-502.359),cc.callFunc(function(){e.isComplete&&a.default.ins().connectServer()}));this.progressDot.runAction(t)},t.prototype.update=function(e){if(this.isLoad){if((this.progressDot.x+253)/506>.9){if(!this.isComplete)return void this.progressDot.pauseAllActions();this.progressDot.resumeAllActions()}this.progressItem.fillRange=(this.progressDot.x+253)/506}},t.prototype.onAccountEdiBoxEnd=function(e){n.default.openID=e.string},t.prototype.complete=function(){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){switch(e.label){case 0:return[4,o.default.initJson()];case 1:return e.sent(),this.isComplete=!0,[2]}})})},__decorate([l({type:cc.Node,displayName:"\u8d26\u53f7\u9762\u677f"})],t.prototype,"accountPanel",void 0),__decorate([l({type:cc.Node,displayName:"\u52a0\u8f7d\u9762\u7248"})],t.prototype,"loadingPanel",void 0),__decorate([l({type:cc.Sprite,displayName:"\u8fdb\u5ea6\u6761"})],t.prototype,"progressItem",void 0),__decorate([l({type:cc.Node,displayName:"\u8fdb\u5ea6\u70b9"})],t.prototype,"progressDot",void 0),t=__decorate([u],t)}(cc.Component);i.default=c,cc._RF.pop()},{"./core/base/GameConfig":"GameConfig","./game/manager/GlobalConfig":"GlobalConfig","./game/manager/UILoadMgr":"UILoadMgr","./game/rolemgr/RoleMgr":"RoleMgr"}],SpringBeginIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"4594fwyyehNCq9sgitNIH+p","SpringBeginIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../consts/SystemConst"),o=e("../../opensystem/OpenSystem"),r=e("../../activity/Activity"),s=e("../../activity/model/ActivityDataFactory"),u=e("../../../entity/Actor"),l=e("../../bag/UserBag"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[r.default.ins().postActivityIsGetAwards,u.default.ins().postLevelChange],n.updateMessage=[r.default.ins().postActivityIsGetAwards,u.default.ins().postYbChange,l.default.ins().postItemAdd,l.default.ins().postItemChange,l.default.ins().postItemDel],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!o.default.ins().checkSysOpen(a.SystemType.SPRINGBEGIN))return!1;var e=r.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==s.ActivityPageStyle.SPRINGBEGIN&&n.isOpenActivity()&&!n.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=r.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==s.ActivityPageStyle.SPRINGBEGIN&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(SpringBeginWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=c,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../bag/UserBag":"UserBag","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],SpringBeginShopVo:[function(e,t,i){"use strict";cc._RF.push(t,"2768873RSBG/IYOixrLgIoN","SpringBeginShopVo"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.discount=0}return e.prototype.parser=function(e){this.id=e.readInt(),this.itemID=e.readInt(),this.itemCount=e.readShort(),this.price=e.readInt(),this.discount=e.readByte(),this.state=e.readByte(),this.buyCount=e.readByte(),this.buyMax=e.readByte(),this.materialNum=e.readShort()},e.prototype.parser2=function(e){this.id=e.readInt(),this.itemID=e.readInt(),this.itemCount=e.readShort(),this.score=e.readInt()},e.prototype.parser3=function(e){this.itemID=e.readInt(),this.buyCount=e.readByte(),this.buyMax=e.readByte()},e}();i.default=n,cc._RF.pop()},{}],SpringEightDayIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"1a076aLSQ9Gv5JN9ELnc/yi","SpringEightDayIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=e("../../activity/model/ActivityDataFactory"),l=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n._activityID=0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!r.default.ins().checkSysOpen(s.SystemType.SPRINGEIGHTDAY))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==u.ActivityPageStyle.SPRINGEIGHTDAY&&n.isOpenActivity()&&!n.getHide())return this._activityID=+i,!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==u.ActivityPageStyle.SPRINGEIGHTDAY&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(SpringEightDayWin,this._activityID),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=l,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],SpringFestivalIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"e9f2b0te9dFVL3mA2Epd4jb","SpringFestivalIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../bag/UserBag"),s=e("../../../consts/SystemConst"),u=e("../../opensystem/OpenSystem"),l=e("../../activity/model/ActivityDataFactory"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postYbChange,r.default.ins().postItemAdd,r.default.ins().postItemChange,r.default.ins().postItemDel],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!u.default.ins().checkSysOpen(s.SystemType.SPRINGFESTIVAL))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==l.ActivityPageStyle.SPRINGFESTIVAL&&n.isOpenActivity()&&!n.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==l.ActivityPageStyle.SPRINGFESTIVAL&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(SpringFestivalWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=c,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../bag/UserBag":"UserBag","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],StoneLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5b527J6+BtElaIVKX/qpplM","StoneLevelConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],StoneLevelCostConfig:[function(e,t,i){"use strict";cc._RF.push(t,"43bdap0CPxDRZs4/cNJ00Hu","StoneLevelCostConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],StoneOpenConfig:[function(e,t,i){"use strict";cc._RF.push(t,"89b7eLoIChO0ItmCDgYNYQN","StoneOpenConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],StringUtils:[function(e,t,i){"use strict";cc._RF.push(t,"7dccdUPVg1LyZsgOq4X3PrA","StringUtils"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RegExpUtil"),a=function(){function e(){}return e.trimSpace=function(e){return e.replace(/^\s*(.*?)[\s\n]*$/g,"$1")},e.getStringLength=function(e){for(var t=e.split(""),i=0,n=0;n<t.length;n++){var a=t[n];this.isChinese(a)?i+=2:i+=1}return i},e.isChinese=function(e){return!/^[\u4E00-\u9FA5]+$/.test(e)},e.strByteLen=function(e){for(var t=0,i=e.length,n=0;n<i;n++)t+=e.charCodeAt(n)>=127?2:1;return t},e.complementByChar=function(t,i,n,a){void 0===n&&(n=" "),void 0===a&&(a=!0);var o=this.strByteLen(a?t.replace(e.HTML,""):t);return t+this.repeatStr(n,i-o)},e.repeatStr=function(e,t){for(var i="",n=0;n<t;n++)i+=e;return i},e.addColor=function(e,t){var i;return"string"==typeof t?i=String(t):"number"==typeof t&&(i=Number(t).toString(10)),'<font color="'+i+'">'+e+"</font>"},e.addColor1=function(e,t){var i=new Object;return i.style=new Object,i.text=e,i.textColor=Number(t).toString(16),i},e.substitute=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var a=n.default.REPLACE_STRING,o=e.match(a);if(o&&o.length)for(var r=o.length,s=0;s<r;s++)e=e.replace(o[s],t[s]);return e},e.replaceStr=function(e,t,i){if(-1==e.indexOf(t))return e;var n=e.split(t);return n[0]+i+n[1]},e.replaceStrColor=function(e,t){for(var i=e.indexOf("0x"),n=i,a="";-1!=n;)a=e.substring(i,i+8),i+=8,i+=n=(e=e.replace(a,t)).substring(i).indexOf("0x");return e},e.replace=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];for(var n=0;n<t.length;n++)e=e.replace("%s",t[n]+"");return e},e.getStrByRegExp=function(e,t){void 0===t&&(t=/\d+/g);var i=[];e.replace(t,function(){return i.push(arguments[0]),"number"==typeof arguments[0]?arguments[0].toString():arguments[0]});return i},e.ChineseToNumber=function(t){for(var i=0,n=0,a=0,o=t.split(""),r=0;r<o.length;r++){var s=e.chnNumCharCN[o[r]];if(void 0!==s)a=s,r===o.length-1&&(n+=a);else{var u=e.chnNameValueCN[o[r]].value;e.chnNameValueCN[o[r]].secUnit?(i+=n=(n+a)*u,n=0):n+=a*u,a=0}}return i+n},e.NumberToChinese=function(t){var i=0,n="",a="",o=!1,r=e.chnNumChar,s=e.chnUnitSection;if(0===t)return r[0];for(;t>0;){var u=t%1e4;o&&(a=r[0]+a),n=e.SectionToChinese(u),a=(n+=0!==u?s[i]:s[0])+a,o=u<1e3&&u>0,t=Math.floor(t/1e4),i++}return a},e.SectionToChinese=function(t){for(var i="",n="",a=0,o=!0,r=e.chnNumChar,s=e.chnUnitChar;t>0;){var u=t%10;0===u?o||(o=!0,n=r[u]+n):(o=!1,i=r[u],n=(i+=s[a])+n),a++,t=Math.floor(t/10)}return n},e.HTML=/<[^>]+>/g,e.chnNumCharCN={"\u96f6":0,"\u4e00":1,"\u4e8c":2,"\u4e09":3,"\u56db":4,"\u4e94":5,"\u516d":6,"\u4e03":7,"\u516b":8,"\u4e5d":9},e.chnNameValueCN={"\u5341":{value:10,secUnit:!1},"\u767e":{value:100,secUnit:!1},"\u5343":{value:1e3,secUnit:!1},"\u4e07":{value:1e4,secUnit:!0},"\u4ebf":{value:1e8,secUnit:!0}},e.chnNumChar=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d"],e.chnUnitSection=["","\u4e07","\u4ebf","\u4e07\u4ebf","\u4ebf\u4ebf"],e.chnUnitChar=["","\u5341","\u767e","\u5343"],e}();i.default=a,cc._RF.pop()},{"./RegExpUtil":"RegExpUtil"}],SubRoles:[function(e,t,i){"use strict";cc._RF.push(t,"1b790AAvU5NNKmXUbiyKxD1","SubRoles"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../base/BaseSystem"),a=e("./Role"),o=e("./Actor"),r=e("../module/tips/UserTips"),s=e("../base/EntityManager"),u=e("../manager/GlobalConfig"),l=e("../module/zs/UserZs"),c=e("../module/vip/UserVip"),d=e("../module/lilian/LiLian"),f=function(e){function t(){var t=e.call(this)||this;return t.roles=[],t.jobDic=[],t.observe(d.default.ins().postLilianData,t.updateName),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.init=function(){this.roles=[],this.jobDic=[]},t.prototype.doSubRole=function(e){this.init();for(var i=e.readShort(),n=t.ins().subRolesLen,o=0;o<i;o++){var s=this.roles[o];s||(s=new a.default),s.parser(e),this.roles[o]||this.roles.push(s),this.jobDic[s.job]||(this.jobDic[s.job]=s)}n&&n<this.roles.length&&r.default.ins().showTips("\u6210\u529f\u5f00\u542f\u65b0\u89d2\u8272")},t.prototype.doSubRoleAtt=function(e){for(var t=e.readInt(),i=0,n=this.roles.length,a=0;a<n;a++){var r=this.getSubRoleByIndex(a);r.index==t&&(r.parserAtt(e,!0),r.power=e.readDouble()),i+=r.power}o.default.ins().postPowerChange(i)},t.prototype.doSubRoleExtAtt=function(e){for(var t=e.readInt(),i=this.roles.length,n=0;n<i;n++){var a=this.getSubRoleByIndex(n);a.index==t&&a.parserExtAtt(e,!0)}},t.prototype.getSubRoleByIndex=function(e){return this.roles[e]},t.prototype.getSubRoleByJob=function(e){for(var t=this.roles.length,i=0;i<t;i++){if(this.getSubRoleByIndex(i).job==e)return this.roles[i]}return null},Object.defineProperty(t.prototype,"subRolesLen",{get:function(){return this.roles.length},enumerable:!0,configurable:!0}),t.prototype.resetRolesModel=function(){this.roles.length=0},t.prototype.updateName=function(){for(var e=this.subRolesLen,t=0;t<e;t++){var i=s.default.ins().getMainRole(t);if(i){var n=this.getSubRoleByIndex(t);i.setCharName(n.guildAndName),i.setLilian(n.lilianUrl)}}},t.prototype.setGuildName=function(e){for(var t=e[0],i=e[1],n=this.subRolesLen,a=0;a<n;a++)this.roles[a].guildName=i,this.roles[a].guildID=t;this.updateName()},t.prototype.getIsMyPlayer=function(e){for(var t in this.roles)if(this.roles[t].handle==e)return!0;return!1},t.prototype.isLockRole=function(){for(var e=0;e<3;e++){if(!t.ins().getSubRoleByIndex(e)){var i=u.default.NewRoleConfig[e];if(!i)continue;if(i.zsLevel){if(l.default.ins().lv>=i.zsLevel)return!0}else if(o.default.level>=i.level)return!0;if(i.vip&&c.default.ins().lv>=i.vip)return!0}}return!1},t.MAX_ROLES=3,t}(n.default);i.default=f,cc._RF.pop()},{"../base/BaseSystem":"BaseSystem","../base/EntityManager":"EntityManager","../manager/GlobalConfig":"GlobalConfig","../module/lilian/LiLian":"LiLian","../module/tips/UserTips":"UserTips","../module/vip/UserVip":"UserVip","../module/zs/UserZs":"UserZs","./Actor":"Actor","./Role":"Role"}],SuitConfig:[function(e,t,i){"use strict";cc._RF.push(t,"de5530giSlG3rhT4rtiuozY","SuitConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],SuperVipConfig:[function(e,t,i){"use strict";cc._RF.push(t,"dc734JG/ZRCKa16w1WUExRe","SuperVipConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],SuperVipIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"a13f1joPFNNeZqvaL090dIz","SuperVipIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../vip/UserVip"),o=e("../../../entity/Actor"),r=e("../../opensystem/OpenSystem"),s=e("../../../consts/SystemConst"),u=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postSuperVipData,o.default.ins().postLevelChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return!(!r.default.ins().checkSysOpen(s.SystemType.SUPERVIP)||!a.default.ins().superVipData)&&a.default.ins().superVipData.enabled},t.prototype.checkShowRedPoint=function(){return 0},t.prototype.tapExecute=function(){ViewManager.ins().open(SuperVipWin)},t}(n.default);i.default=u,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../opensystem/OpenSystem":"OpenSystem","../../vip/UserVip":"UserVip","./RuleIconBase":"RuleIconBase"}],SysSetting:[function(e,t,i){"use strict";cc._RF.push(t,"617c5oTqnNKQqbGBhZZbIiH","SysSetting"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/BaseClass"),a=e("../../manager/TimerManager"),o=e("../millionaire/Millionaire"),r=e("../../../core/sound/SoundManager"),s=e("../../entity/Actor"),u=function(e){function t(){var t=e.call(this)||this;return t._storage={},t._tempStorage={},t.defaultValue={sound_effect:1,shake_win:1,auto_heji:0,dice:0},t.init(),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.setItem=function(e,i){this._storage[e]!=i&&(this._storage[e]=i,e==t.SOUND_EFFECT?r.default.ins().setEffectOn(this.getBool(e)):e==t.SHAKE_WIN||e==t.DICE&&(o.default.ins().autoTurnDice=i),a.default.ins().isExists(this.storage,this)||a.default.ins().doNext(this.storage,this))},t.prototype.getItem=function(e){return this._storage[e]},t.prototype.setBool=function(e,t){this.setItem(e,t?1:0)},t.prototype.getBool=function(e){return!!this.getItem(e)},t.prototype.setValue=function(e,t){this._tempStorage[e]=t},t.prototype.getValue=function(e){return this._tempStorage[e]},t.prototype.init=function(){},t.prototype.initValue=function(){for(var e in this.defaultValue)void 0==this._storage[e]&&(this._storage[e]=this.defaultValue[e]);r.default.ins().setEffectOn(this.getBool(t.SOUND_EFFECT))},t.prototype.storage=function(){try{var e=JSON.stringify(this._storage);egret.localStorage.setItem(this.getStorageKey(),e)}catch(e){}},t.prototype.getStorageKey=function(){return s.default.actorID+""||"game_longlin"},t.SOUND_EFFECT="sound_effect",t.SHAKE_WIN="shake_win",t.AUTO_HEJI="auto_heji",t.DICE="dice",t}(n.default);i.default=u,window.GameSystem.push(u.ins.bind(u)),cc._RF.pop()},{"../../../core/base/BaseClass":"BaseClass","../../../core/sound/SoundManager":"SoundManager","../../entity/Actor":"Actor","../../manager/TimerManager":"TimerManager","../millionaire/Millionaire":"Millionaire"}],SystemConst:[function(e,t,i){"use strict";cc._RF.push(t,"34c99nvU6BIJZ4DuuO7kZ4F","SystemConst"),Object.defineProperty(i,"__esModule",{value:!0}),function(e){e[e.FIRSTCHARGE=1]="FIRSTCHARGE",e[e.ACTIVITY=2]="ACTIVITY",e[e.RANK=3]="RANK",e[e.MALL=4]="MALL",e[e.FULI=5]="FULI",e[e.MONTHCARD=6]="MONTHCARD",e[e.TREASURE=7]="TREASURE",e[e.WORLDMAP=8]="WORLDMAP",e[e.RING=9]="RING",e[e.MIJI=10]="MIJI",e[e.BOSS=11]="BOSS",e[e.FB=12]="FB",e[e.ONEKEY=13]="ONEKEY",e[e.CHALLENGE=14]="CHALLENGE",e[e.SHENQIGUIDE=15]="SHENQIGUIDE",e[e.BOOK=16]="BOOK",e[e.WEAPONS=17]="WEAPONS",e[e.GUILD=18]="GUILD",e[e.VIPGIFT=19]="VIPGIFT",e[e.LIMITTASK=20]="LIMITTASK",e[e.FOCUS=21]="FOCUS",e[e.SHARE=22]="SHARE",e[e.FENGCE=23]="FENGCE",e[e.DAILYGIFT=24]="DAILYGIFT",e[e.QUICKDROP=25]="QUICKDROP",e[e.MABI=26]="MABI",e[e.NEWEQUIP=27]="NEWEQUIP",e[e.CITYMONSTER=28]="CITYMONSTER",e[e.DOUBLEELEVEN=29]="DOUBLEELEVEN",e[e.GODWEAPON=30]="GODWEAPON",e[e.SUPERVIP=31]="SUPERVIP",e[e.CITY=32]="CITY",e[e.THANKS=33]="THANKS",e[e.HFACTIVITY=34]="HFACTIVITY",e[e.DOUBLE_TWELVE=35]="DOUBLE_TWELVE",e[e.DOUBLE_TWELVE_RECHARGE=36]="DOUBLE_TWELVE_RECHARGE",e[e.BATTLE=37]="BATTLE",e[e.PAODIAN=38]="PAODIAN",e[e.CHRISTMAS=39]="CHRISTMAS",e[e.NEWYEAR=40]="NEWYEAR",e[e.HAPPYSEVENDAY=41]="HAPPYSEVENDAY",e[e.CELEBRATION=42]="CELEBRATION",e[e.CHAT=43]="CHAT",e[e.ZHIZUN=44]="ZHIZUN",e[e.LABA=45]="LABA",e[e.SPRINGBEGIN=46]="SPRINGBEGIN",e[e.ZHANLING=47]="ZHANLING",e[e.XIAONIAN=48]="XIAONIAN",e[e.SPRINGFESTIVAL=49]="SPRINGFESTIVAL",e[e.SPRINGEIGHTDAY=50]="SPRINGEIGHTDAY",e[e.KAIMENHONG=51]="KAIMENHONG",e[e.SANBA=52]="SANBA",e[e.LONGTAITOU=53]="LONGTAITOU",e[e.VERSIONCEL=54]="VERSIONCEL"}(i.SystemType||(i.SystemType={})),cc._RF.pop()},{}],TaskData:[function(e,t,i){"use strict";cc._RF.push(t,"c3340/T+kFKe5bUc8ChLgS1","TaskData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TaskTraceIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"e71aeeEc/9PJJ0MXPY9bXbF","TaskTraceIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../task/UserTask"),o=e("../../../entity/Actor"),r=e("../../gamescene/GameLogic"),s=e("../../fb/UserFb"),u=e("../../GameGuider"),l=e("../../../../core/module/guide/GuideUtils"),c=e("../../hint/hint"),d=e("../../tips/UserTips"),f=e("../PlayFunView"),p=e("../../../../core/base/ViewManager"),h=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.currentEff="",n.showMessage=[a.default.ins().postUpdteTaskTrace,o.default.ins().postLevelChange,r.default.ins().postEnterMap],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return a.default.ins().getTaskState()&&!s.default.ins().pkGqboss},t.prototype.getEffName=function(e){},t.prototype.tapExecute=function(){var e=a.default.ins().taskTrace;0==e.state?(u.default.taskGuidance(e.id,1),l.default.ins().updateByClick()):(a.default.ins().sendGetAchieve(e.achievementId),a.default.ins().postParabolicItem(),c.default.ins().postAchievementAft(e),a.default.ins().getAchieveConfById(e.id+1)||d.default.ins().showTips("\u5df2\u5b8c\u6210\u6240\u6709\u4efb\u52a1!"),p.default.ins().getView(f.default).hejiRule.updatekStep(!0));this.update()},t}(n.default);i.default=h,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/module/guide/GuideUtils":"GuideUtils","../../../entity/Actor":"Actor","../../GameGuider":"GameGuider","../../fb/UserFb":"UserFb","../../gamescene/GameLogic":"GameLogic","../../hint/hint":"hint","../../task/UserTask":"UserTask","../../tips/UserTips":"UserTips","../PlayFunView":"PlayFunView","./RuleIconBase":"RuleIconBase"}],TeamFuBenBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"1d860LWoWdF3JjfyFWrPBit","TeamFuBenBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TeamFuBenConfig:[function(e,t,i){"use strict";cc._RF.push(t,"628b1tRNbxNVK2OzxpLZSXF","TeamFuBenConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TeamFuBenGuideConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e712cwg7nJDzbuZK2wikkgw","TeamFuBenGuideConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TeamFuBenRoleVo:[function(e,t,i){"use strict";cc._RF.push(t,"1abb5oZnQJG46fGa2cKP52X","TeamFuBenRoleVo"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.prototype.parse=function(e){this.roleID=e.readInt(),this.position=e.readByte(),this.roleName=e.readString(),this.job=e.readByte(),this.sex=e.readByte(),this.cloth=e.readInt(),this.weapon=e.readInt(),this.wingLv=e.readInt(),this.wingState=e.readByte(),this.pos1=e.readInt(),this.pos2=e.readInt(),this.pos3=e.readInt(),this.zs=e.readInt(),this.lv=e.readInt()},e}();i.default=n,cc._RF.pop()},{}],TerraceDescConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d6a76S6yu5GIJsdE+Zc4FA1","TerraceDescConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],TextFlowMaker:[function(e,t,i){"use strict";cc._RF.push(t,"229f6CJ3nlKv7dLTNu6cgce","TextFlowMaker"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.generateTextFlow=function(e){for(var t=e.split("|"),i="",n=0;n<t.length;n++)if(t[n].indexOf("&T:")>0){var a=t[n].split(":"),o=a[2];i+="<color="+a[1].replace("&T","").replace("0x","#")+">"+o+"</color>"}else i+=t[n];return i},e.generateTextFlow1=function(t){if(!t)return(new egret.HtmlTextParser).parser("");for(var i=t.split("|"),n=[],a=0,o=i.length;a<o;a++){var r=e.getSingleTextFlow(i[a]);r.text&&""!=r.text&&n.push(r)}return n},e.getHtmlTextByText=function(e){for(var t=e.split("|"),i="",n=[],a=[],o=0,r=0;r<t.length;r++)if(t[r].length>0){if(t[r].indexOf("&T")>0){var s=t[r].replace("0x","#").split(/C:(\S*)/)[1].split(/&T:(\S*)/);n[o]=s[0],a[o]=s[1]}else n[o]=null,a[o]=t[r];o++}for(r=0;r<a.length;r++)i+=null!=n[r]?"<color = "+n[r]+">"+a[r]+"</c>":a[r];return i},e.getSingleTextFlow1=function(t){var i=t.split("&T:",2);if(2==i.length){for(var n="<font",a=i[0].split("&"),o=void 0,r=!1,s=0,u=a.length;s<u;s++)switch((o=a[s].split(":"))[0]){case e.STYLE_SIZE:n+=' size="'+Math.floor(+o[1])+'"';break;case e.STYLE_COLOR:n+=' color="'+Math.floor(+o[1])+'"';break;case e.UNDERLINE_TEXT:r=!0}return n+=r?"><u>"+i[1]+"</u></font>":">"+i[1]+"</font>"}return"<font>"+t+"</font>"},e.getSingleTextFlow=function(t){var i=t.split("&T:",2),n={style:{}};if(2==i.length){i[0];for(var a=t.split("&"),o=void 0,r=0,s=a.length;r<s;r++)switch((o=a[r].split(":"))[0]){case e.STYLE_SIZE:n.style.size=+o[1];break;case e.STYLE_COLOR:n.style.textColor=+o[1];break;case e.UNDERLINE_TEXT:n.style.underline=!0;break;case e.EVENT:n.style.href="event:"+o[1]}n.text=i[1]}else n.text=t;return n},e.getCStr=function(t){return e.numberList[t]?e.numberList[t]:""},e.STYLE_COLOR="C",e.STYLE_SIZE="S",e.PROP_TEXT="T",e.UNDERLINE_TEXT="U",e.EVENT="E",e.numberList=["\u96f6","\u4e00","\u4e8c","\u4e09","\u56db","\u4e94","\u516d","\u4e03","\u516b","\u4e5d","\u5341","\u5341\u4e00","\u5341\u4e8c","\u5341\u4e09","\u5341\u56db","\u5341\u4e94","\u5341\u516d","\u5341\u4e03","\u5341\u516b","\u5341\u4e5d","\u4e8c\u5341"],e}();i.default=n,cc._RF.pop()},{}],ThanksIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"aa73dnWsuZDSIDgMtCMxXBH","ThanksIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../fb/UserFb"),r=e("../../activity/Activity"),s=e("../../recharge/Recharge"),u=e("../../opensystem/OpenSystem"),l=e("../../../consts/SystemConst"),c=e("../../activity/model/ActivityDataFactory"),d=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postGuanqiaInfo,o.default.ins().postGuanKaIdChange,r.default.ins().postActivityIsGetAwards],n.updateMessage=[r.default.ins().postActivityIsGetAwards,a.default.ins().postYbChange,s.default.ins().postUpdateRecharge,s.default.ins().postRechargeTotalDay,s.default.ins().postUpdateRechargeEx],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!u.default.ins().checkSysOpen(l.SystemType.THANKS))return!1;var e=r.default.ins().activityData;if(!Object.keys(e).length)return!1;for(var t in e){var i=e[t];if(i.pageStyle==c.ActivityPageStyle.THANKS&&i.isOpenActivity())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=r.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==c.ActivityPageStyle.THANKS&&i.isOpenActivity()&&i.canReward()&&i.specialState())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(ThanksGivingWin),this.firstTap=!1,this.update()},t}(n.default);i.default=d,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../fb/UserFb":"UserFb","../../opensystem/OpenSystem":"OpenSystem","../../recharge/Recharge":"Recharge","./RuleIconBase":"RuleIconBase"}],ThreeHeroes:[function(e,t,i){"use strict";cc._RF.push(t,"1ca755X9GZD1b0vbAXpSTPT","ThreeHeroes"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("../../../core/net/PackageID"),r=e("../../../core/base/MessageCenter"),s=e("./model/ActivityDataFactory"),u=e("./Activity"),l=e("../server/GameServer"),c=e("../../manager/GlobalConfig"),d=e("../vip/UserVip"),f=function(e){function t(){var i=e.call(this)||this;return i.sysId=o.PackageID.ThreeHeroes,r.default.compile(t),i.regNetMsg(1,i.doGotAward),i.regNetMsg(2,i.doAwardInfo),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.doGotAward=function(e){e.readByte()>0&&(this.awardState=t.Geted,this.postInfoChange())},t.prototype.doAwardInfo=function(e){var i=e.readBoolean();this.loginDays=e.readShort(),this.showIcon3DaysLater=e.readBoolean(),s.default.createEx();var n=u.default.ins().activityData[ActivityBtnType.THREE_HEROES];if(n){var a=Math.floor((n.startTime-l.default.serverTime)/1e3),o=Math.floor((n.endTime-l.default.serverTime)/1e3);a<0&&o>0?(d.default.ins().lv>=c.default.LoginActivateConfig.vipLevel?this.awardState=t.Active:this.awardState=t.NotActive,r.default.ins().addListener(d.default.ins().postUpdateVipData,this.updateStateByVip,this),r.default.ins().addListener(d.default.ins().postUpdataExp,this.updateStateByVip,this)):(this.showIcon3DaysLater?this.loginDays>=c.default.LoginActivateConfig.loginDays?this.awardState=t.CanGet:this.awardState=t.Active:this.awardState=i?t.Geted:t.NotActive,r.default.ins().removeAll(this))}u.default.ins().postActivityIsGetAwards(),this.postInfoChange()},t.prototype.updateStateByVip=function(){var e=u.default.ins().activityData[ActivityBtnType.THREE_HEROES];if(e){var i=Math.floor((e.startTime-l.default.serverTime)/1e3),n=Math.floor((e.endTime-l.default.serverTime)/1e3);i<0&&n>0&&(d.default.ins().lv>=c.default.LoginActivateConfig.vipLevel?this.awardState=t.Active:this.awardState=t.NotActive)}this.postInfoChange()},t.prototype.sendReward=function(){var e=this.getBytes(1);this.sendToServer(e)},t.prototype.postInfoChange=function(){},t.NotActive=0,t.Active=1,t.CanGet=2,t.Geted=3,t}(a.default);i.default=f,function(e){e.threeHeros=f.ins.bind(f)}(n||(n={})),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../manager/GlobalConfig":"GlobalConfig","../server/GameServer":"GameServer","../vip/UserVip":"UserVip","./Activity":"Activity","./model/ActivityDataFactory":"ActivityDataFactory"}],TianTiConstConfig:[function(e,t,i){"use strict";cc._RF.push(t,"bb382YctXNGbZWdgIadUMtR","TianTiConstConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TianTiDanConfig:[function(e,t,i){"use strict";cc._RF.push(t,"749f5vNHCFKWq9kXScsDTqG","TianTiDanConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TianTiRankAwardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5f389eVuTxOJIFpXLn0Flbm","TianTiRankAwardConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],TimerManager:[function(e,t,i){"use strict";cc._RF.push(t,"bb6f5U2vHdJra7Dq0C4WTwf","TimerManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../base/ObjectPool"),a=e("../../core/utils/Algorithm"),o=cc._decorator,r=o.ccclass,s=(o.property,function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.currHandler=null,t}var i;return __extends(t,e),i=t,t.getTimer=function(){return Date.now()-i._startTime},t.prototype.start=function(){cc.game.addPersistRootNode(this.node),i.inst=this,this._handlers=[],this.nexthandles=null,this._currTime=i.getTimer(),this._currTime=0,this._currFrame=0},t.ins=function(){return i.inst},t.prototype.getFrameId=function(){return this._currFrame},t.prototype.getCurrTime=function(){return this._currTime},t.DeleteHandle=function(e){e.clear(),n.default.push(e)},t.binFunc=function(e,t){return e.exeTime>t.exeTime?-1:e.exeTime<t.exeTime?1:0},t.prototype.update=function(e){this._currFrame++,this._currTime=i.getTimer();var t=0,n=this.nexthandles;if(this.nexthandles=null,n&&n.length>0){for(var o=0,r=n;o<r.length;o++){var s=r[o];s.method.call(s.methodObj),i.DeleteHandle(s)}n=null}if(this._handlers.length<=0)return!1;for(var u=this._handlers[this._handlers.length-1];u.exeTime<=this._currTime;){this.currHandler=u=this._handlers.pop(),u.method.call(u.methodObj),t=i.getTimer(),u.exeTime=t+u.delay;var l=u.forever;if(l||(u.repeatCount>1?(u.repeatCount--,l=!0):u.onFinish&&u.onFinish.apply(u.finishObj)),l){var c=a.default.binSearch(this._handlers,u,i.binFunc);this._handlers.splice(c,0,u)}else i.DeleteHandle(u);if(t-this._currTime>5)break;if(this._handlers.length<=0)break;u=this._handlers[this._handlers.length-1]}return this.currHandler=null,!1},t.prototype.create=function(e,t,o,r,s,l,c){if(!(t<0||o<0||null==r)){var d=n.default.shift(u);d.forever=0==o,d.repeatCount=o,d.delay=t,d.method=r,d.methodObj=s,d.onFinish=l,d.finishObj=c,d.exeTime=e+this._currTime;var f=a.default.binSearch(this._handlers,d,i.binFunc);this._handlers.splice(f,0,d)}},t.prototype.doTimer=function(e,t,i,n,a,o){void 0===a&&(a=null),void 0===o&&(o=null),this.create(e,e,t,i,n,a,o)},t.prototype.doTimerDelay=function(e,t,i,n,a,o,r){void 0===o&&(o=null),void 0===r&&(r=null),this.create(e,t,i,n,a,o,r)},t.prototype.doNext=function(e,t){var i=n.default.shift(u);i.method=e,i.methodObj=t,this.nexthandles||(this.nexthandles=[]),this.nexthandles.push(i)},t.prototype.remove=function(e,t){var n=this.currHandler;n&&n.method==e&&n.methodObj==t&&(n.forever=!1,n.repeatCount=0);for(var a=this._handlers.length-1;a>=0;a--){var o=this._handlers[a];o.method==e&&o.methodObj==t&&(this._handlers.splice(a,1),i.DeleteHandle(o))}},t.prototype.removeAll=function(e){var t=this.currHandler;t&&t.methodObj==e&&(t.forever=!1,t.repeatCount=0);for(var n=this._handlers.length-1;n>=0;n--){var a=this._handlers[n];a.methodObj==e&&(this._handlers.splice(n,1),i.DeleteHandle(a))}},t.prototype.isExists=function(e,t){for(var i=0,n=this._handlers;i<n.length;i++){var a=n[i];if(a.method==e&&a.methodObj==t)return!0}return!1},t._startTime=Date.now(),t.inst=null,t=i=__decorate([r],t)}(cc.Component));i.default=s;var u=function(){function e(){this.delay=0,this.forever=!1,this.repeatCount=0,this.exeTime=0}return e.prototype.clear=function(){this.method=null,this.methodObj=null,this.onFinish=null,this.finishObj=null,this.forever=!1},e}();cc._RF.pop()},{"../../core/utils/Algorithm":"Algorithm","../base/ObjectPool":"ObjectPool"}],TimerMgr:[function(e,t,i){"use strict";cc._RF.push(t,"a0a17x9byNPX6sFX52HQvdv","TimerMgr"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../Utils/EgretUtils"),a=function(){function e(){}return e.regExecute=function(e,t){var i=n.default.getFuncName(t,e)+"."+n.default.getQualifiedClassName(t);if(!this.timeMap.has(i)){var a=setInterval(function(){e.call(t)});this.timeMap.set(i,a)}},e.stopExecute=function(e,t){this.timeMap.size<=0||clearInterval(this.timeMap.get(n.default.getFuncName(t,e)+"."+n.default.getQualifiedClassName(t)))},e.timeMap=new Map,e}();i.default=a,cc._RF.pop()},{"../Utils/EgretUtils":"EgretUtils"}],TipsView:[function(e,t,i){"use strict";cc._RF.push(t,"1e9dbfJYPRO9oqG3FrMi+RK","TipsView"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.parentRoot=a.LayerManager.UI_Tips,t.labCount=0,t.list=[],t.listCenter=[],t.centerList=[],t.taskTipsList=[],t.sceneList=[],t.attrList=[],t.everList=[],t.hintList=[],t.rewardTipList=[],t.goodEquipList=[],t.skillTipList=[],t.equipItemList=[],t.equipHeartItemList=[],t}return __extends(t,e),t.prototype.initData=function(){},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.initUI=function(){this.touchChildren=!1,this.touchEnabled=!1,this.rewardTip=new TipsGoodReward,this.equipTip1=new TipsGoodEquip,this.skillTip1=new TipsSkillAlertPanel,this.equipTip=new TipsEquipAlertPanel,this.boxTip=new BoxGetHintTips,this.equipHeartTip=new TipsHeartEquipAlertPanel,this.observe(Actor.ins().postExp,this.showExp)},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.showExp=function(e){e&&this.showTips("|C:0x23CA23&T:\u7ecf\u9a8c +"+e+"|")},t.prototype.showHintTips=function(e){var t=ObjectPool.pop("HintTipsItem");t.verticalCenter=200,t.horizontalCenter=0,t.setTips(e),this.addChild(t),this.hintList.unshift(t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeHintTip,this);for(var i=this.hintList.length-1;i>=0;i--){egret.Tween.removeTweens(this.hintList[i]),egret.Tween.get(this.hintList[i]).to({verticalCenter:200+-30*i},300)}},t.prototype.removeHintTip=function(e){var t=this.hintList.indexOf(e.currentTarget);this.hintList.splice(t,1),egret.Tween.removeTweens(e.currentTarget),e.currentTarget.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeHintTip,this),ObjectPool.push(e.currentTarget)},t.prototype.showEverTips=function(e){var t=ObjectPool.pop("EverTipsItem");t.x=e.x,t.y=e.y,t.labelText=e.str,this.addChild(t),this.everList.unshift(t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeEverTip,this);for(var i=this.everList.length-1;i>=0;i--){egret.Tween.removeTweens(this.everList[i]),egret.Tween.get(this.everList[i]).to({y:t.y-30*i},300)}},t.prototype.removeEverTip=function(e){var t=this.everList.indexOf(e.currentTarget);this.everList.splice(t,1),egret.Tween.removeTweens(e.currentTarget),e.currentTarget.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeEverTip,this),ObjectPool.push(e.currentTarget)},t.prototype.showAttrTips=function(e){var t=ObjectPool.pop("AttriteChangeView");t.left=30,t.bottom=190,t.setLabelText(e[0],e[1]),this.addChild(t),this.attrList.unshift(t),t.once(egret.Event.REMOVED_FROM_STAGE,this.removeAttrTip,this);for(var i=this.attrList.length-1;i>=0;i--){egret.Tween.removeTweens(this.attrList[i]),egret.Tween.get(this.attrList[i]).to({bottom:190+40*i},300)}},t.prototype.removeAttrTip=function(e){var t=this.attrList.indexOf(e.currentTarget);this.attrList.splice(t,1),egret.Tween.removeTweens(e.currentTarget),ObjectPool.push(e.currentTarget)},t.prototype.showCenterTips=function(e){var t=ObjectPool.pop("CenterTipsItem");t.verticalCenter=0,t.horizontalCenter=0,t.labelText=e,this.addChild(t),this.centerList.unshift(t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip,this);for(var i=this.centerList.length-1;i>=0;i--){egret.Tween.removeTweens(this.centerList[i]),egret.Tween.get(this.centerList[i]).to({verticalCenter:0+-30*i},500)}},t.prototype.removeCenterTip=function(e){var t=e.currentTarget,i=this.centerList.indexOf(t);this.centerList.splice(i,1),t.horizontalCenter=NaN,t.verticalCenter=NaN,egret.Tween.removeTweens(t),t.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip,this),ObjectPool.push(t)},t.prototype.showCenterTips2=function(e){var t=ObjectPool.pop("CenterTipsItem");t.horizontalCenter=0,t.verticalCenter=-60,this.addChild(t),t.labelText2=e,this.centerList.unshift(t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip2,this);for(var i=this.centerList.length-1;i>=0;i--){egret.Tween.removeTweens(this.centerList[i]),egret.Tween.get(this.centerList[i]).to({verticalCenter:-120-30*i},300)}},t.prototype.removeCenterTip2=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip2,this),t.horizontalCenter=NaN,t.verticalCenter=NaN;var i=this.centerList.indexOf(t);this.centerList.splice(i,1)},t.prototype.showCenterTips3=function(e){var t=ObjectPool.pop("CenterTipsItem");t.verticalCenter=0,t.horizontalCenter=0,t.labelText3=e,this.addChild(t),this.centerList.unshift(t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip3,this);for(var i=this.centerList.length-1;i>=0;i--){egret.Tween.removeTweens(this.centerList[i]),egret.Tween.get(this.centerList[i]).to({verticalCenter:0+-30*i},500)}},t.prototype.removeCenterTip3=function(e){var t=e.currentTarget,i=this.centerList.indexOf(t);this.centerList.splice(i,1),t.horizontalCenter=NaN,t.verticalCenter=NaN,egret.Tween.removeTweens(t),t.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeCenterTip,this),ObjectPool.push(t)},t.prototype.showSceneTips=function(e){var t=ObjectPool.pop("SceneTipsItem");t.verticalCenter=-175,t.horizontalCenter=0,t.labelText=e,this.addChild(t),this.sceneList.unshift(t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeSceneTip,this);for(var i=this.sceneList.length-1;i>=0;i--){egret.Tween.removeTweens(this.sceneList[i]),egret.Tween.get(this.sceneList[i]).to({verticalCenter:-30*i-175},500)}},t.prototype.removeSceneTip=function(e){var t=this.sceneList.indexOf(e.currentTarget);this.sceneList.splice(t,1),egret.Tween.removeTweens(e.currentTarget),e.currentTarget.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeSceneTip,this),ObjectPool.push(e.currentTarget)},t.prototype.showTaskTips=function(e){var t=ObjectPool.pop("CenterTipsItem");t.bottom=232,t.horizontalCenter=0,t.labelText=e,this.addChild(t),this.taskTipsList.unshift(t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTaskTip,this);for(var i=this.taskTipsList.length-1;i>=0;i--){egret.Tween.removeTweens(this.taskTipsList[i]),egret.Tween.get(this.taskTipsList[i]).to({bottom:232+30*i},500)}},t.prototype.removeTaskTip=function(e){var t=this.taskTipsList.indexOf(e.currentTarget);this.taskTipsList.splice(t,1),egret.Tween.removeTweens(e.currentTarget),e.currentTarget.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTaskTip,this),ObjectPool.push(e.currentTarget)},t.prototype.showTips=function(e){var t=ObjectPool.pop("TipsItem");t.left=0,t.bottom=190,this.addChild(t),t.labelText=e,this.list.unshift(t),t.addEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsItem,this);for(var i=this.list.length-1;i>=0;i--){egret.Tween.removeTweens(this.list[i]),egret.Tween.get(this.list[i]).to({bottom:190+30*i},300)}},t.prototype.removeTipsItem=function(e){var t=e.currentTarget;t.removeEventListener(egret.Event.REMOVED_FROM_STAGE,this.removeTipsItem,this),t.left=NaN,t.bottom=NaN;var i=this.list.indexOf(t);this.list.splice(i,1),ObjectPool.push(t)},t.prototype.showGoodRewardTip=function(e){this.rewardTipList.push(e),TimerManager.ins().isExists(this.goodRewardTimer,this)||TimerManager.ins().doTimer(16,0,this.goodRewardTimer,this)},t.prototype.showGoodEquipTip=function(e){this.goodEquipList.push(e),TimerManager.ins().isExists(this.goodEquipTimer,this)||TimerManager.ins().doTimer(16,0,this.goodEquipTimer,this)},t.prototype.showBoxTip=function(e){var t=GlobalConfig.TreasureBoxConfig[e];this.goodEquipList.push(t),TimerManager.ins().isExists(this.goodEquipTimer,this)||TimerManager.ins().doTimer(16,0,this.goodEquipTimer,this)},t.prototype.goodRewardTimer=function(){var e,t=this;0!=this.rewardTipList.length?this.isWait||(this.rewardTip.isUsing||(e=this.rewardTip),e&&(e.x=50,e.y=750,e.alpha=1,e.parent||this.addChild(e),e.isUsing=!0,this.isWait=!0,e.data=this.rewardTipList.pop(),egret.Tween.get(e).to({y:600},300).wait(1e3).to({alpha:0},1e3).call(function(){e.isUsing=!1,t.isWait=!1,t.removeChild(e)}))):TimerManager.ins().remove(this.goodEquipTimer,this)},t.prototype.goodEquipTimer=function(){var e,t=this;0!=this.goodEquipList.length?this.isWait||(this.equipTip1.isUsing||(e=this.equipTip1),e&&(e.x=50,e.y=750,e.alpha=1,e.parent||this.addChild(e),e.isUsing=!0,this.isWait=!0,e.data=this.goodEquipList.pop(),egret.Tween.get(e).to({y:600},300).wait(1e3).to({alpha:0},1e3).call(function(){e.isUsing=!1,t.isWait=!1,t.removeChild(e)}))):TimerManager.ins().remove(this.goodEquipTimer,this)},t.prototype.showRewardBox=function(e){var t=GlobalConfig.TreasureBoxConfig[e];this.goodEquipList.push(t),TimerManager.ins().isExists(this.goodEquipTimer,this)||TimerManager.ins().doTimer(16,0,this.goodEquipTimer,this)},t.prototype.showSkillTip=function(e){this.skillTipList.push(e),TimerManager.ins().isExists(this.skillTipTimer,this)||TimerManager.ins().doTimer(16,0,this.skillTipTimer,this)},t.prototype.skillTipTimer=function(){var e,t=this;0!=this.skillTipList.length?this.isWait||(this.skillTip1.isUsing||(e=this.skillTip1),e&&(e.x=50,e.y=750,e.alpha=1,this.addChild(e),e.isUsing=!0,this.isWait=!0,e.data=this.skillTipList.pop(),egret.Tween.get(e).to({y:600},300).wait(1e3).to({alpha:0},1e3).call(function(){e.isUsing=!1,t.isWait=!1,t.removeChild(e)}))):TimerManager.ins().remove(this.skillTipTimer,this)},t.prototype.showItemTip=function(e){this.equipItemList.push(e),TimerManager.ins().isExists(this.itemTipTimer,this)||TimerManager.ins().doTimer(16,0,this.itemTipTimer,this)},t.prototype.itemTipTimer=function(){var e,t=this;0!=this.equipItemList.length?this.isWait||(this.equipTip.isUsing||(e=this.equipTip),e&&(e.x=50,e.y=750,e.alpha=1,this.addChild(e),e.isUsing=!0,this.isWait=!0,e.data=this.equipItemList.pop(),egret.Tween.get(e).to({y:600},300).wait(1e3).to({alpha:0},1e3).call(function(){e.isUsing=!1,t.isWait=!1,t.removeChild(e)}))):TimerManager.ins().remove(this.itemTipTimer,this)},t.prototype.showHeartItemTip=function(e){this.equipHeartItemList.push(e),TimerManager.ins().isExists(this.itemHeartTipTimer,this)||TimerManager.ins().doTimer(16,0,this.itemHeartTipTimer,this)},t.prototype.itemHeartTipTimer=function(){var e,t=this;0!=this.equipHeartItemList.length?this.isWait||(this.equipHeartTip.isUsing||(e=this.equipHeartTip),e&&(e.x=50,e.y=713,e.alpha=1,this.addChild(e),e.isUsing=!0,this.isWait=!0,e.data=this.equipHeartItemList.pop(),egret.Tween.get(e).to({y:563},300).wait(1e3).to({alpha:0},1e3).call(function(){e.isUsing=!1,t.isWait=!1,t.removeChild(e)}))):TimerManager.ins().remove(this.itemHeartTipTimer,this)},t}(n.default);i.default=o,cc._RF.pop()},{"../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager"}],Tips:[function(e,t,i){"use strict";cc._RF.push(t,"0fe2b6EeLlNS4ixAewV5Dg7","Tips"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.showToast=function(e,t){var i=this;cc.loader.loadRes("prefab/tips",cc.Prefab,function(n,a){if(!n){var o=cc.instantiate(a),r=e.length;o.width=30*r+80;var s=o.getChildByName("txt");s.getComponent(cc.Label).string=e,t&&(s.color=(new cc.Color).fromHEX(t));var u=cc.director.getScene().getChildByName("Canvas");o.parent=u;var l=i.tipsItem.length;l>0&&(o.position=cc.v2(0,i.tipsItem[l-1].y+41)),i.tipsItem.push(o);var c=cc.sequence(cc.spawn(cc.moveBy(2,0,100),cc.fadeOut(2)),cc.callFunc(function(){i.tipsItem.shift().removeFromParent()}));o.runAction(c)}})},e.tipsItem=[],e}();i.default=n,cc._RF.pop()},{}],TitleConf:[function(e,t,i){"use strict";cc._RF.push(t,"a5fe7buIARAkZSUWFqYx0C4","TitleConf"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TogerherHitBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"15c42suueNNy6cMCRJZJzyz","TogerherHitBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TogetherHitConfig:[function(e,t,i){"use strict";cc._RF.push(t,"049eelOs5xGY4gYjNHhJWZ0","TogetherHitConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.level=0}}();i.default=n,cc._RF.pop()},{}],TogetherHitEquipExchangeConfig:[function(e,t,i){"use strict";cc._RF.push(t,"b8319+iR+tEc5Cps1K9Ha56","TogetherHitEquipExchangeConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.exchangeAmount=0,this.level=0,this.zsLevel=0}}();i.default=n,cc._RF.pop()},{}],TogetherHitEquipPageConfig:[function(e,t,i){"use strict";cc._RF.push(t,"8c004F25e5DzKiaWgPxd3Zq","TogetherHitEquipPageConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.name=0,this.icon=""}}();i.default=n,cc._RF.pop()},{}],TogetherHitEquipQmConfig:[function(e,t,i){"use strict";cc._RF.push(t,"82590Xb5A9Io7qZKYTrY2u/","TogetherHitEquipQmConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.num=0,this.lv=0,this.zslv=0,this.desc=""}}();i.default=n,cc._RF.pop()},{}],TotalRechargeIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"9ad1bx9wkxEZowNB6fJ+VYy","TotalRechargeIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../recharge/Recharge"),s=e("../../../manager/TimerManager"),u=e("../../activity/model/ActivityDataFactory"),l=e("../../../../core/utils/DateUtils"),c=e("../PlayFunView"),d=e("../../../../core/base/ViewManager"),f=e("../../opensystem/OpenSystem"),p=e("../../../consts/SystemConst"),h=e("../../../manager/UILoadMgr"),g=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.activityId=0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards,r.default.ins().postUpdateRecharge],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return this.alertText=cc.instantiate(h.default.inst.getPrefab(h.prefabName.common_lab)).getComponent(cc.Label),this.runTime(),this.addTime(),t},t.prototype.addTime=function(){s.default.ins().doTimer(1e3,0,this.runTime,this)},t.prototype.removeTime=function(){s.default.ins().remove(this.runTime,this)},t.prototype.runTime=function(){var e=a.default.ins().activityData;if(!this.activityId)for(var t in e){var i=e[t];if(i.pageStyle==u.ActivityPageStyle.TOTALRECHARGE&&i.isOpenActivity()&&!i.getHide()){this.activityId=+t;break}}if(this.activityId){var n=e[this.activityId];if(n){var o=n.getLeftTime();if(o>0)this.alertText.string=l.default.getFormatBySecond(o,l.default.TIME_FORMAT_12);else d.default.ins().getView(c.default)&&(this.removeTime(),this.update())}else this.alertText.string=""}else this.alertText.string=""},t.prototype.checkShowIcon=function(){if(this.removeTime(),!f.default.ins().checkSysOpen(p.SystemType.DOUBLE_TWELVE_RECHARGE))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==u.ActivityPageStyle.TOTALRECHARGE)if(n.isOpenActivity()&&!n.getHide())if(this.activityId=+i,e[this.activityId].getLeftTime()>0)return this.addTime(),!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==u.ActivityPageStyle.TOTALRECHARGE&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){d.default.ins().open(TotalRechargeWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=g,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/DateUtils":"DateUtils","../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../manager/TimerManager":"TimerManager","../../../manager/UILoadMgr":"UILoadMgr","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../opensystem/OpenSystem":"OpenSystem","../../recharge/Recharge":"Recharge","../PlayFunView":"PlayFunView","./RuleIconBase":"RuleIconBase"}],TrainBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"47620mo0utGV64q96hLc8Uy","TrainBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TrainDayAwardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7f82cX8zQBMtLSzpEjNj9Dr","TrainDayAwardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TrainLevelAwardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"09334yLfodJ+bWXP3QUlJN9","TrainLevelAwardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TrainLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"21561HsO5VNrbPAWurYDexs","TrainLevelConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.trainName="",this.img=""}}();i.default=n,cc._RF.pop()},{}],TreasureBoxBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"26b1dEAQMlIQbkYIPeInAzq","TreasureBoxBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.moneyCoefficient=3,this.getItemguide=0}}();i.default=n,cc._RF.pop()},{}],TreasureBoxConfig:[function(e,t,i){"use strict";cc._RF.push(t,"7363044gkNKjavGwFnRI3bX","TreasureBoxConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TreasureBoxGridConfig:[function(e,t,i){"use strict";cc._RF.push(t,"00d269xuvVEmaF3lDEIB9Ef","TreasureBoxGridConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TreasureBoxRateConfig:[function(e,t,i){"use strict";cc._RF.push(t,"cb5fdyG4dJKr5CD034w06I8","TreasureBoxRateConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],TreasureHuntConfig:[function(e,t,i){"use strict";cc._RF.push(t,"fcfd51oRvtAHYZzfVfmYcdc","TreasureHuntConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TreasureHuntPoolConfig:[function(e,t,i){"use strict";cc._RF.push(t,"1358a6UFlJDNIvwoBNaXvfC","TreasureHuntPoolConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TreasureHuntPoolHefuConfig:[function(e,t,i){"use strict";cc._RF.push(t,"f54e2Szys1EiraQscYIO3PQ","TreasureHuntPoolHefuConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TreasureIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"6b10fe8gAZPc4t7CYNQU7Bf","TreasureIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../zs/UserZs"),o=e("../../../entity/Actor"),r=e("../../fb/UserFb"),s=e("../../server/GameServer"),u=e("../../bag/UserBag"),l=e("../../heirloom/Heirloom"),c=e("../../opensystem/OpenSystem"),d=e("../../../consts/SystemConst"),f=e("../../setting/Setting"),p=e("../../rune/Rune"),h=e("../../rune/data/RuneRedPointMgr"),g=function(e){function t(t,i){void 0===i&&(i=null);var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postZsLv,o.default.ins().postLevelChange,r.default.ins().postGuanqiaInfo,r.default.ins().postGuanKaIdChange,s.default.ins().postServerOpenDay],n.updateMessage=[u.default.ins().postItemAdd,u.default.ins().postHuntStore,l.default.ins().postHuntBoxInfo],n}return __extends(t,e),t.prototype.checkShowIcon=function(){return c.default.ins().checkSysOpen(d.SystemType.TREASURE)},t.prototype.checkShowRedPoint=function(){return f.default.ins().getValue(f.ClientSet.firstClickTreasure)!=new Date(s.default.serverTime).getDate()?1:Boolean(u.default.ins().getHuntGoods(0).length)||Boolean(u.default.ins().getHuntGoods(1).length)||p.default.ins().getIsGetBox()||l.default.ins().isHeirloomHuntOpen()&&(Boolean(u.default.ins().getHuntGoods(2).length)||l.default.ins().getIsGetBox())||h.default.ins().checkCanExchange()?1:0},t.prototype.tapExecute=function(){ViewManager.ins().open(TreasureHuntWin);var e=new Date(s.default.serverTime).getDate();f.default.ins().getValue(f.ClientSet.firstClickTreasure)!=e&&(f.default.ins().setValue(f.ClientSet.firstClickTreasure,e),this.update())},t}(n.default);i.default=g,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../bag/UserBag":"UserBag","../../fb/UserFb":"UserFb","../../heirloom/Heirloom":"Heirloom","../../opensystem/OpenSystem":"OpenSystem","../../rune/Rune":"Rune","../../rune/data/RuneRedPointMgr":"RuneRedPointMgr","../../server/GameServer":"GameServer","../../setting/Setting":"Setting","../../zs/UserZs":"UserZs","./RuleIconBase":"RuleIconBase"}],TreasureOverViewConfig:[function(e,t,i){"use strict";cc._RF.push(t,"dba8aEaSqFIm44DwZgvYiRR","TreasureOverViewConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],TupoAttrConfig:[function(e,t,i){"use strict";cc._RF.push(t,"3af7ceGDdhHeZAeb0N/3MCs","TupoAttrConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],TupoCostConfig:[function(e,t,i){"use strict";cc._RF.push(t,"8c4fbMufgJOKZhMY3mJtJv9","TupoCostConfig");cc._RF.pop()},{}],UILoadMgr:[function(e,t,i){"use strict";cc._RF.push(t,"2032d6yZadBpIsOTMGjeutO","UILoadMgr"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this.nodepool=new Map}return Object.defineProperty(e,"inst",{get:function(){return null==this.instance&&(this.instance=new e),this.instance},enumerable:!0,configurable:!0}),e.prototype.showUIFab=function(e,t,i){cc.loader.loadRes(e,cc.Prefab,function(n,a){if(n)console.error("\u9884\u5236\u4f53_\u8def\u5f84\u9519\u8bef\u300b",e);else{var o=cc.instantiate(a);o.parent=i||cc.director.getScene().getChildByName("Canvas"),t&&t(o)}})},e.prototype.initLoadFrefab=function(){var e=this;["/entity/common_rich","/entity/common_lab","/entity/common_tips","/entity/ruleSquare","/entity/ruleCircle"].forEach(function(t){cc.loader.loadRes("prefab"+t,cc.Prefab,function(i,n){i||e.nodepool.set(t,n)})})},e.prototype.getPrefab=function(e){return this.nodepool.get(e)?this.nodepool.get(e):null},e}();i.default=n,function(e){e.common_rich="/entity/common_rich",e.common_lab="/entity/common_lab",e.common_tips="/entity/common_tips",e.ruleCircle="/entity/ruleCircle",e.ruleSquare="/entity/ruleSquare"}(i.prefabName||(i.prefabName={})),cc._RF.pop()},{}],UIView2:[function(e,t,i){"use strict";cc._RF.push(t,"ced82FA/ItOwLXsqwuW/60t","UIView2"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../../core/view/BaseEuiView"),a=e("../../../../../core/base/ViewManager"),o=e("../../../bag/view/BagWin"),r=e("../../../../enum/LayerManager"),s=e("../../../../entity/Actor"),u=e("../../../../map/GameMap"),l=e("../../../fb/UserFb"),c=e("../../../../manager/GlobalConfig"),d=e("../../GameLogic"),f=e("../../../sound/SoundUtil"),p=e("../../../rolewin/view/RoleWin"),h=e("../../../skill/view/SkillWin"),g=e("../../../lilian/view/LiLianWin"),y=e("../../../forge/view/ForgeWin"),v=e("../../../neigong/NeiGong"),m=cc._decorator,b=m.ccclass,_=m.property,C=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.expPro=null,t.txt_expVal=null,t.expMax=0,t.expMin=0,t.lastLevel=0,t.flyExpLevel=[],t.parentRoot=r.LayerManager.UI_Popup,t.showType=0,t}return __extends(t,e),t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.observe(s.default.ins().postExp,this.expChange),this.observe(s.default.ins().postInit,this.expChange),this.observe(v.default.ins().postNeiGongDataChange,null)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.initUI=function(){},t.prototype.initData=function(){},t.prototype.onOpenWindowClick=function(e,t){switch(a.default.ins().closeLastTopView(),t){case"1":a.default.ins().open(p.default);break;case"2":a.default.ins().open(h.default);break;case"3":a.default.ins().open(g.default);break;case"4":a.default.ins().open(y.default);break;case"5":a.default.ins().open(o.default);break;case"6":a.default.ins().closeLastTopView()}},t.prototype.onClick=function(e){e},t.prototype.expChange=function(e,t){if(void 0===t&&(t=!1),t||u.default.fbType!=l.default.FB_TYPE_GUANQIABOSS&&u.default.fbType!=l.default.FB_TYPE_TIAOZHAN){this.lastLevel||(this.lastLevel=s.default.level);var i=0==this.flyExpLevel.length;this.flyExpLevel.length?(this.flyExpLevel[this.flyExpLevel.length-1][0]=s.default.level,this.flyExpLevel[this.flyExpLevel.length-1][1]=s.default.exp):this.flyExpLevel.push([s.default.level,s.default.exp]);var n=this.flyExpLevel[0][0],a=this.flyExpLevel[0][1];this.expMin=a;var o=c.default.ExpConfig[n].exp;if(this.expMax=o,this.lastLevel<n)i&&(this.lastLevel+=1,d.default.ins().postLevelBarChange(this.lastLevel),f.default.ins().playEffect(f.default.LEVEL_UP),this.expChange());else{var r=c.default.ExpConfig[n].exp;this.expMax=r,this.flyExpLevel.shift()}this.expPro.progress=this.expMin/this.expMax,this.txt_expVal.string=this.expMin+"/"+this.expMax}},__decorate([_({type:cc.ProgressBar,displayName:"\u7ecf\u9a8c\u8fdb\u5ea6\u6761"})],t.prototype,"expPro",void 0),__decorate([_({type:cc.Label,displayName:"\u7ecf\u9a8c\u503c"})],t.prototype,"txt_expVal",void 0),t=__decorate([b],t)}(n.default);i.default=C,cc._RF.pop()},{"../../../../../core/base/ViewManager":"ViewManager","../../../../../core/view/BaseEuiView":"BaseEuiView","../../../../entity/Actor":"Actor","../../../../enum/LayerManager":"LayerManager","../../../../manager/GlobalConfig":"GlobalConfig","../../../../map/GameMap":"GameMap","../../../bag/view/BagWin":"BagWin","../../../fb/UserFb":"UserFb","../../../forge/view/ForgeWin":"ForgeWin","../../../lilian/view/LiLianWin":"LiLianWin","../../../neigong/NeiGong":"NeiGong","../../../rolewin/view/RoleWin":"RoleWin","../../../skill/view/SkillWin":"SkillWin","../../../sound/SoundUtil":"SoundUtil","../../GameLogic":"GameLogic"}],UpdateRemindConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a0afcRwv1lDFpO59Z9z1SfA","UpdateRemindConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],UserBag:[function(e,t,i){"use strict";cc._RF.push(t,"d675fUijU5MQa2iejU5KFoJ","UserBag"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("./ItemData"),o=e("../../../core/net/PackageID"),r=e("../../manager/GlobalConfig"),s=e("../../config/SpecialEquipsConfig"),u=e("../../config/ItemConfig"),l=e("../../entity/Actor"),c=e("../../entity/SubRoles"),d=e("../../entity/Role"),f=e("../rolewin/model/EquipsData"),p=e("../../../core/base/AttributeData"),h=e("../../../core/base/AttributeType"),g=e("../../consts/ItemConst"),y=e("../../../core/base/MessageCenter"),v=e("../../consts/ItemType"),m=e("../fb/UserFb"),b=e("../rolewin/UserEquip"),_=e("../forge/model/ForgeConst"),C=e("../forge/model/EquipPos"),I=e("../zs/UserZs"),T=e("../../../core/utils/Util"),S=e("../vip/UserVip"),R=e("../recharge/Recharge"),B=e("../tips/UserTips"),M=e("../../manager/TimerManager"),E=function(e){function t(){var i=e.call(this)||this;i.bagNum=0,i.bagModel=[],i.isExitUsedItem=0,i.isChange=0,i.OrangeEquipRedPoint=[],i.itemCount={0:{},1:{}},i.promptList=["","\u80cc\u5305\u6ee1\u4e86","","\u4e0d\u80fd\u88ab\u4f7f\u7528","\u7ea7\u522b\u4e0d\u8db3","\u6570\u91cf\u4e0d\u8db3\u591f"],i.equipPowerDic=[],i.wearList=[],y.default.compile(t),i.sysId=o.PackageID.Bag,i.regNetMsg(1,i.doBagData),i.regNetMsg(2,i.doBagValumnAdd),i.regNetMsg(3,i.doDeleteItem),i.regNetMsg(4,i.doAddItem),i.regNetMsg(5,i.doUpDataItem),i.regNetMsg(6,i.doUserItemBack),i.regNetMsg(7,i.postMergeItemBack),i.regNetMsg(8,i.doChoosableGiftResult),i._useItemFunc={},i.registerUseItemFunc(g.ItemConst.RENAME,i.useRenameItem);for(var n=0;n<8;n++)i.OrangeEquipRedPoint[n]=!1;return i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},Object.defineProperty(t,"fitleEquip",{get:function(){if(!t._fitleEquip)for(var e in t._fitleEquip=[],r.default.SpecialEquipsConfig)r.default.SpecialEquipsConfig[e].style==s.FitleStyle.hc&&t._fitleEquip.push(r.default.SpecialEquipsConfig[e].id);return t._fitleEquip},enumerable:!0,configurable:!0}),t.prototype.sendAddBagGrid=function(e){var t=this.getBytes(2);t.writeInt(e),this.sendToServer(t)},t.prototype.sendUseItem=function(e,t){if(null!=this._useItemFunc[e])return this._useItemFunc[e](e,t),!0;var i=this.getBytes(6);return i.writeInt(e),i.writeInt(t),this.sendToServer(i),!1},t.prototype.sendUserGoods=function(e,t){},t.prototype.addItemCount=function(e,t){var i=t.configID;0!=t.count?(this.itemCount[e][i]=this.itemCount[e][i]||0,1==e?this.itemCount[e][i]+=1:this.itemCount[e][i]=t.count):this.delItemCount(e,i)},t.prototype.delItemCount=function(e,t){1==e?this.itemCount[e][t]&&(this.itemCount[e][t]-=1,0==this.itemCount[e][t]&&delete this.itemCount[e][t]):delete this.itemCount[e][t]},t.prototype.getBagItemCount=function(e,t){return this.itemCount[e][t]||0},t.prototype.doBagData=function(e){var i=e.readByte(),n=e.readByte();0==i&&(this.bagModel[n]=[],this.itemCount[n]={});for(var o,r=e.readInt(),s=0;s<r;s++)(o=new a.default).parser(e),this.bagModel[n].push(o),0!=n&&1!=n||this.addItemCount(n,o);t.ins().postItemAdd(),1==n&&this.doBagVolChange(),2==n&&t.ins().postHuntStore(),this.getIsExitUsedItem(),t.ins().postHasItemCanUse()},t.prototype.doBagVolChange=function(){this.postBagVolChange()},t.prototype.postBagVolChange=function(){var e=this.ronglianCheck();this.isChange=e?1:0;var i=e?2:0;t.ins().postItemCountChange(),e||(i=(e=this.getSurplusCount()<.05*this.getMaxBagRoom())?1:0),t.ins().postBagWillFull(i)},t.prototype.ronglianCheck=function(){var e=this.bagNum;r.default&&r.default.VipGridConfig&&r.default.VipGridConfig[S.default.ins().lv]&&(e+=r.default.VipGridConfig[S.default.ins().lv].grid+R.default.ins().getAddBagGrid());var i=t.ins(),n=!1;if(m.default.ins().guanqiaID>50?this.getBagItemNum()/e>=.8:this.getBagItemNum()>=50)for(var a=0,o=i.getOutEquips();a<o.length;a++){var s=o[a];if(s&&s.itemConfig){n=!0;break}}return n},t.prototype.doUserItemBack=function(e){var i=e.readByte();i>0?(B.default.ins().showTips(this.promptList[i]),console.log("-----------------------------showTips----------------------------------"),console.log(this.promptList[i])):0==i&&t.ins().postUseItemSuccess()},t.prototype.doBagValumnAdd=function(e){this.bagNum=e.readInt(),t.ins().postBagVolAdd()},t.prototype.doDeleteItem=function(e){for(var i=e.readByte(),n=e.readDouble(),a=0,o=this.bagModel[i].length-1;o>=0;o--)if(this.bagModel[i][o].handle==n){a=this.bagModel[i][o].configID,t.ins().isExitUsedItem=this.bagModel[i][o].getCanbeUsed()?1:0,this.bagModel[i].splice(o,1);break}0!=i&&1!=i||this.delItemCount(i,a),2==i&&(this.deleteHasType2=!0),this.isDeleteDelay||(this.isDeleteDelay=!0,M.default.ins().doTimer(50,1,this.deleteDelay,this),this.deleteDelay())},t.prototype.doAddItem=function(e){var i=e.readByte(),n=new a.default;if(n.parser(e),this.bagModel[i].push(n),0!=i&&1!=i||this.addItemCount(i,n),t.ins().isExitUsedItem=n.getCanbeUsed()?1:0,e.readByte())if(u.default.getQuality(n.itemConfig)>=4&&1==i)console.log("-------------------------showGoodEquipTips-------------------------"),console.log(n);else if(2!=i)if(u.default.getType(n.itemConfig)==v.ItemType.TYPE_18)console.log("-------------------------showHeartItemTips-------------------------"),console.log(n.itemConfig.id);else{var o="\u83b7\u5f97|C:"+u.default.getQualityColor(n.itemConfig)+"&T:"+n.itemConfig.name+" x "+n.count+"|";console.log(o)}2==i&&(this.addHasType2=!0),this.isAddDelay||(this.isAddDelay=!0,this.addDelay()),1==i&&console.log("-------------------------\u65b0\u624b\u7a7f\u6234\u63d0\u793a-------------------------")},t.prototype.addDelay=function(){this.isAddDelay=!1,t.ins().postItemAdd(),t.ins().postHasItemCanUse(),this.doBagVolChange(),this.addHasType2&&(this.addHasType2=!1,t.ins().postHuntStore())},t.prototype.deleteDelay=function(){this.isDeleteDelay=!1,t.ins().postItemDel(),t.ins().postHasItemCanUse(),this.doBagVolChange(),this.deleteHasType2&&(this.deleteHasType2=!1,t.ins().postHuntStore())},t.prototype.doUpDataItem=function(e){for(var i,n=e.readByte(),a=e.readDouble(),o=0,r=0;r<this.bagModel[n].length;r++)if((i=this.bagModel[n][r]).handle==a){var s=e.readInt();o=s-i.count,i.count=s,0!=n&&1!=n||this.addItemCount(n,i),t.ins().isExitUsedItem=i.getCanbeUsed()?1:0,t.ins().postHasItemCanUse();break}if(e.readByte()&&o>0&&2!=n){if(u.default.getType(i.itemConfig)==v.ItemType.TYPE_18)console.log("-------------------------showHeartItemTips-------------------------",i.itemConfig.id);else{var l="\u83b7\u5f97|C:"+u.default.getQualityColor(i.itemConfig)+"&T:"+i.itemConfig.name+" x "+o+"|";console.log("-------------------------showTips-------------------------"+l)}t.ins().postItemAdd()}this.doBagVolChange(),t.ins().postItemChange()},t.prototype.sendMergeItem=function(e,t){var i=this.getBytes(7);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.postMergeItemBack=function(e){e.readInt(),e.readInt(),e.readInt();return null},t.prototype.sendGetGoodsByStore=function(e){if(e==DepotType.Equip&&this.getSurplusCount()<1)r.default.ServerTips[2].tips;else{var t=this.getBytes(4);t.writeDouble(e),this.sendToServer(t)}},t.prototype.postItemChange=function(){},t.prototype.registerUseItemFunc=function(e,t){this._useItemFunc[e]=t},t.prototype.postItemDel=function(){},t.prototype.postItemAdd=function(){},t.prototype.postItemCountChange=function(){return t.ins().isChange},t.prototype.postBagWillFull=function(e){return e},t.prototype.postHuntStore=function(){},t.prototype.postHasItemCanUse=function(){return t.ins().isExitUsedItem},t.prototype.postUseItemSuccess=function(){},t.prototype.postBagVolAdd=function(){},t.prototype.getBagItemById=function(e,i){void 0===i&&(i=t.BAG_TYPE_OTHTER);var n=this.bagModel[i];if(!n)return null;for(var a=0,o=n;a<o.length;a++){var r=o[a];if(r.itemConfig.id==e)return r}return null},t.prototype.getFilterBagItemById=function(e,i,n){void 0===n&&(n=t.BAG_TYPE_OTHTER);for(var a=0,o=this.bagModel[n];a<o.length;a++){var r=o[a];if(r.itemConfig.id==e&&i.indexOf(r.handle)<0)return r}return null},t.prototype.getBagGoodsByTypeAndId=function(e,t){for(var i=0,n=this.bagModel[e];i<n.length;i++){var a=n[i];if(a.itemConfig.id==t)return a}return null},t.prototype.getBagEquipByType=function(e){var i=this.bagModel[t.BAG_TYPE_EQUIP],n=[];for(var a in i)u.default.getType(i[a].itemConfig)==e&&n.push(i[a]);return n},t.prototype.getBagByType=function(e){return this.bagModel[e]},t.prototype.getBagGoodsCountByType=function(e,i){var n=this.bagModel[t.BAG_TYPE_OTHTER];if(n)for(var a=0;a<n.length;a++){if(8==u.default.getType(n[a].itemConfig)){if(n[a].itemConfig.bagType==DepotType.Rune)continue;if(i&&-1!=i.indexOf(n[a].itemConfig.id))return!0;if(n[a].itemConfig.id==g.ItemConst.EXP_ITEM&&l.default.level<65)continue;if(n[a].itemConfig.id==g.ItemConst.LEVELUP_ITEM){if(this.getRmbItemIsBuy(g.ItemConst.LEVELUP_ITEM))return!0;continue}if(n[a].itemConfig.id==g.ItemConst.WEIWANG_ITEM)continue;return!0}if(12==u.default.getType(n[a].itemConfig)){if(l.default.level>=n[a].itemConfig.level)return!0}else{if(17==u.default.getType(n[a].itemConfig))return!0;var o=r.default.ItemComposeConfig[n[a].configID];if(o&&o.srcCount<=n[a].count)return!0}}return!1},t.prototype.getRuneBagGoodsCountByType=function(e){var i=this.bagModel[t.BAG_TYPE_OTHTER];if(i)for(var n=0;n<i.length;n++)if(8==u.default.getType(i[n].itemConfig)&&i[n].itemConfig.bagType)return!0;return!1},t.prototype.getBagGoodsCountById=function(e,t){if(0==e||1==e)return this.getBagItemCount(e,t);var i=this.bagModel[e];if(i)for(var n=0;n<i.length;n++)if(i[n].itemConfig&&i[n].itemConfig.id==t)return i[n].count;return 0},t.prototype.getBagGoodsByIndex=function(e,t){return this.bagModel[e][t]},t.prototype.getBagItemNum=function(e){void 0===e&&(e=1);var t=this.bagModel[e];return t?t.length:0},t.prototype.getSurplusCount=function(){return this.bagNum-this.getBagItemNum()},t.prototype.getMaxBagRoom=function(){return 960},t.prototype.sort1=function(e,t){var i=e.point,n=t.point;return i>n?-1:i<n?1:0},t.prototype.sort2=function(e,t){var i=e.point,n=t.point;return i<n?-1:i>n?1:0},t.prototype.getHejiEquipsByType=function(e){for(var t=this.bagModel[1],i=[],n=0;n<t.length;n++){var a=t[n],o=u.default.getType(a.itemConfig),r=u.default.getSubType(a.itemConfig);5==o&&(r==e&&i.push(a))}return i.sort(this.sort3),i},t.prototype.sort3=function(e,t){var i=e.point,n=t.point;return i>n?-1:i<n?1:e.configID>t.configID?-1:e.configID<t.configID?1:0},t.prototype.getBagSortEquips=function(e){void 0===e&&(e=0);var i=this.bagModel[t.BAG_TYPE_EQUIP];return e?i.sort(this.sort1):i.sort(this.sort2),i},t.prototype.getBagSortQualityEquips=function(e,i,n,a){void 0===e&&(e=5),void 0===i&&(i=0),void 0===n&&(n=0),void 0===a&&(a=null);var o=this.bagModel[t.BAG_TYPE_EQUIP],r=[];if(!o)return r;for(var s=0;s<o.length;s++){var l=u.default.getQuality(o[s].itemConfig);5!=e&&(l>e||i&&l<e)||(null==a||a(o[s]))&&(r[r.length]=o[s])}return r},t.prototype.getLegendOutEquips=function(){for(var e,i=t.ins().getBagEquipsByQuality(5),n=[],a=[],o=[],r=c.default.ins().subRolesLen,s=0;s<r;s++){var l=c.default.ins().getSubRoleByIndex(s);o[l.job]||(o[l.job]=[]);for(var d=l.getEquipLen(),f=0;f<d;f++){var p=l.getEquipByIndex(f);p.item.itemConfig&&this.addOneEquipToListEx(a,p,l.job)}}for(s=0;s<i.length;s++){var h=i[s],g=u.default.getSubType(h.itemConfig);if(0==g||2==g){for(var y=!1,v=0;v<a.length;v++){if(u.default.getSubType(h.itemConfig)==g){y=!0;break}}y&&(e=this.checkEquipsIsGood(a,this.cloneItemDataInfo(h)))&&5==u.default.getQuality(e.itemConfig)&&n.push(e)}}return n},t.prototype.getLegendHasResolve=function(){for(var e=t.ins().getBagEquipsByQuality(4),i=[],n=c.default.ins().subRolesLen,a=0;a<n;a++)for(var o=c.default.ins().getSubRoleByIndex(a),r=o.getEquipLen(),s=0;s<r;s++){var l=o.getEquipByIndex(s);l.item.itemConfig&&this.addOneEquipToListRed(i,l,a)}for(a=0;a<e.length;a++){var d=e[a];u.default.getJob(d.itemConfig);if(!this.checkEquipsIsGoodRed(i,this.cloneItemDataInfo(d)))return!0}return!1},t.prototype.normalEquipSmeltFilter=function(e){return 0==u.default.getType(e.itemConfig)},t.prototype.getHejiOutEquips=function(){var e=[];return e.length<9&&this.checkHejiEquipsTodestroy(e),this.creatListLength(e),e},t.prototype.getOutEquips=function(){for(var e,t=this.getBagSortQualityEquips(5,0,1,this.normalEquipSmeltFilter),i=[],n=[],a=c.default.ins().subRolesLen,o=0;o<a;o++)for(var r=c.default.ins().getSubRoleByIndex(o),s=r.getEquipLen(),l=0;l<s;l++){var d=r.getEquipByIndex(l);d.item.itemConfig&&this.addOneEquipToList(n,d,r.job)}for(o=0;o<t.length;o++){var f=t[o];if((e=this.checkEquipsIsGood(n,this.cloneItemDataInfo(f)))&&!b.default.ins().checkEquipsIsWear(e)&&u.default.getQuality(e.itemConfig)<4&&u.default.getSubType(e.itemConfig)!=_.ForgeConst.EQUIP_POS_TO_SUB[C.EquipPos.DZI]&&i.push(e),i.length>=9)break}return i.length<9&&this.getGuanyinEquip(i),this.upLevelEquips=[],this.creatListLength(i),i},t.prototype.creatListLength=function(e){if(e.length<9)for(var t=0;t<9;t++)void 0==e[t]&&(e[t]=null)},t.prototype.checkUpLevelEquips=function(e){var t,i=u.default.getJob(e.itemConfig),n=u.default.getSubType(e.itemConfig),a=e.itemConfig.zsLevel,o=e.itemConfig.level;if(5==u.default.getQuality(e.itemConfig))return null;if(this.upLevelEquips||(this.upLevelEquips=[]),this.upLevelEquips[i]||(this.upLevelEquips[i]=[]),this.upLevelEquips[i][n]||(this.upLevelEquips[i][n]=[]),this.upLevelEquips[i][n][a]||(this.upLevelEquips[i][n][a]=[]),t=this.upLevelEquips[i][n][a][o]){var r=this.checkEquipGetBest(t,e);return r==t&&(this.upLevelEquips[i][n][a][o]=e),r}return this.upLevelEquips[i][n][a][o]=e,null},t.prototype.checkUplevelBest=function(e,t){var i,n=u.default.getJob(e.itemConfig),a=u.default.getSubType(e.itemConfig),o=null;return t[n]||(t[n]=[]),t[n][a]||(t[n][a]=null),(i=t[n][a])&&(o=this.checkEquipGetBest(i,e)),o},t.prototype.checkEquipsIsGoodRed=function(e,t){for(var i=l.default.level,n=(u.default.getJob(t.itemConfig),u.default.getSubType(t.itemConfig)),a=c.default.ins().subRolesLen,o=0;o<a;o++){e[o]||(e[o]=[]);var r=t.itemConfig.zsLevel?t.itemConfig.zsLevel:0,s=t.itemConfig.level?t.itemConfig.level:0;if(0>=r&&i>=s){if(!e[o][n])return t;this.checkEquipGetBestEx(e[o][n],t)}}return null},t.prototype.checkEquipsIsGood=function(e,t){var i,n,a=l.default.level,o=I.default.ins().lv,r=u.default.getJob(t.itemConfig),s=u.default.getSubType(t.itemConfig);if(t.itemConfig.level>a||t.itemConfig.zsLevel>o){var c=this.checkUplevelBest(t,e);return c&&!b.default.ins().checkEquipsIsWear(c)?c:this.checkUpLevelEquips(t)}return e[r]&&e[r][s]?((i=e[r][s])==(n=this.checkEquipGetBest(i,t))&&(e[r][s]=t),n):(this.addOneEquipToList(e,t),null)},t.prototype.checkEquipGetBestEx=function(e,t){return e&&t?e.point>=t.point?e:t:null},t.prototype.checkEquipGetBest=function(e,t){return null!=e&&null!=t&&e.point>=t.point?t:e},t.prototype.addOneEquipToListEx=function(e,t,i){var n;void 0===i&&(i=0),n=t instanceof f.default?this.cloneItemDataInfo(t.item):this.cloneItemDataInfo(t);var a=u.default.getJob(n.itemConfig),o=u.default.getSubType(n.itemConfig);a||(a=i),e[a]||(e[a]=[]),e[a][o]=n},t.prototype.addOneEquipToListRed=function(e,t,i){var n;n=t instanceof f.default?this.cloneItemDataInfo(t.item):this.cloneItemDataInfo(t);var a=u.default.getSubType(n.itemConfig);e[i]||(e[i]=[]),e[i][a]=n},t.prototype.addOneEquipToList=function(e,t,i){var n;void 0===i&&(i=0),n=t instanceof f.default?this.cloneItemDataInfo(t.item):this.cloneItemDataInfo(t);var a=u.default.getJob(n.itemConfig);0==a&&(a=i);var o=u.default.getSubType(n.itemConfig);e[a]||(e[a]=[]),e[a][o]=n},t.prototype.cloneItemDataList=function(e){for(var t=[],i=0;i<e.length;i++){var n=new a.default;n.handle=e[i].handle,n.configID=e[i].configID,n.att=e[i].att,n.itemConfig=e[i].itemConfig,n.count=e[i].count,t.push(n)}return t},t.prototype.cloneItemDataInfo=function(e){var t=new a.default;return t.handle=e.handle,t.configID=e.configID,t.att=e.att,t.itemConfig=e.itemConfig,t.count=e.count,t},t.prototype.getBagGoodsBySort=function(e){var i=this.getGoodsListByType(e,t.BAG_TYPE_OTHTER);return i.sort(function(e,t){return e.configID>t.configID?1:e.configID<t.configID?-1:0}),i},t.prototype.getBagGoodsByType=function(e){var i=this.bagModel[t.BAG_TYPE_OTHTER],n=[];for(var a in i)u.default.getType(i[a].itemConfig)==e&&n.push(i[a]);return n},t.prototype.getBagGoodsByDescIndex=function(e,i){void 0===i&&(i=t.BAG_TYPE_OTHTER);var n,a=this.bagModel[i];for(var o in a)if(a[o].itemConfig.descIndex==e){n=a[o];break}return n},t.prototype.getBagEquipsByQuality=function(e,i,n){void 0===i&&(i=0),void 0===n&&(n=t.BAG_TYPE_EQUIP);var a=this.bagModel[n],o=[];for(var r in a){var s=a[r];s&&u.default.getType(s.itemConfig)==i&&u.default.getQuality(s.itemConfig)==e&&o.push(a[r])}return o},t.prototype.getBagGoodsByHandle=function(e,t){for(var i=this.bagModel[e],n=0;n<i.length;n++)if(i[n].handle==t)return i[n];return null},t.prototype.getHuntGoods=function(e){return this.getGoodsListByType(e)},t.prototype.getGoodsListByType=function(e,i){void 0===i&&(i=t.BAG_TYPE_TREASUREHUNT);var n=this.bagModel[i],a=[];if(n)for(var o=0;o<n.length;o++){var r=n[o].itemConfig;(r.bagType==e||T.Util.isNullOrUndefined(r.bagType)&&0==e)&&(r.split?this.splitItemData(a,n[o]):a.push(n[o]))}return a},t.prototype.splitItemData=function(e,t){var i=t.count;if(i>1)for(;i>0;){var n=t.copy();n.count=1,e.push(n),i-=1}else e.push(t)},t.prototype.getHuntGoodsBySort=function(e){var i=[];return this.bagModel[t.BAG_TYPE_TREASUREHUNT]&&(i=this.getGoodsListByType(e)).sort(function(e,t){var i=u.default.getType(e.itemConfig),n=u.default.getType(t.itemConfig);if(i<n)return 1;if(i>n)return-1;if(i){if(e.configID>=t.configID)return 1;if(e.configID<t.configID)return-1}else{if(e.point>=t.point)return-1;if(e.point<t.point)return 1}return 0}),i},t.prototype.getGuanyinEquip=function(e){return e},t.prototype.updateGuanyinEquip=function(e,t){void 0===t&&(t=0);return null},t.prototype.getGuanyinLevel=function(e){return"0\u9636"},t.prototype.getIsExitUsedItem=function(){var e=this.bagModel[t.BAG_TYPE_OTHTER];if(!e)return!1;for(var i=0;i<e.length;i++)if(e[i].getCanbeUsed())return t.ins().isExitUsedItem=1,!0;return t.ins().isExitUsedItem=0,!1},t.prototype.getEquipsScoreByRolesOfBody=function(){c.default.ins().subRolesLen;return 0},t.prototype.calculationScore=function(e){for(var t,i=0,n=c.default.ins().subRolesLen,a=0;a<n;a++){var o=c.default.ins().getSubRoleByIndex(a);if(o.job==u.default.getJob(e.itemConfig))for(var r=o.getEquipLen(),s=0;s<r;s++)(t=o.getEquipByIndex(s).item)&&t.itemConfig&&u.default.getSubType(t.itemConfig)==u.default.getSubType(e.itemConfig)&&(i=0==i?t.point:Math.min(t.point,i))}return e.point-i},t.prototype.useRenameItem=function(e,t){},t.getAttrPower=function(e,t){void 0===t&&(t=null);var i=r.default.AttrPowerConfig,n=0;if(!e)return n;for(var a=0,o=0;o<e.length;o++){var s=e[o].type,l=e[o].value;s!=h.AttributeType.atHpEx&&s!=h.AttributeType.atAtkEx&&s!=h.AttributeType.atDamageReduction&&(i[s]&&l&&(n+=l*i[s].power,s==h.AttributeType.atHuiXinDamage&&t&&(a+=u.default.relatePower(e[o],t))))}return Math.floor(n/100)+Math.floor(a)},t.prototype.setEquipPowerDic=function(e,t,i){void 0===i&&(i=0),this.equipPowerDic[e]||(this.equipPowerDic[e]=[]),this.equipPowerDic[e][t]||(this.equipPowerDic[e][t]=0),this.equipPowerDic[e][t]=i},t.prototype.getEquipPowerDic=function(e,t){return this.equipPowerDic[e]&&this.equipPowerDic[e][t]?this.equipPowerDic[e][t]:0},t.prototype.getLowEquipIndex=function(e,t){for(var i=-1,n=Number.MAX_VALUE,a=e.length,o=0;o<a;o++){var r=e[o];if(0==r.handle)return o;var s=r.point;s<n&&(i=o,n=s)}return i},t.prototype.getHejiEquips=function(){for(var e=this.bagModel[1],t=[],i=0;i<e.length;i++){var n=e[i];5==u.default.getType(n.itemConfig)&&t.push(n)}return t},t.prototype.checkIsWear=function(e){return!!e},t.prototype.makeHejiWearList=function(e){var t=u.default.getSubType(e.itemConfig);this.wearList[t]=e},t.prototype.checkHejiEquipsTodestroy=function(e){},t.prototype.getEquipByPos=function(e,i){var n=this.bagModel[t.BAG_TYPE_EQUIP],a=c.default.ins().getSubRoleByIndex(e),o=a.getEquipByIndex(i),r=0;r=o&&o.item.itemConfig?u.default.getSubType(o.item.itemConfig):i;for(var s=[],d=[],f=l.default.level,p=I.default.ins().lv,h=0;h<n.length;h++){var g=u.default.getJob(n[h].itemConfig),y=u.default.getSubType(n[h].itemConfig);if((g==a.job||0==g)&&y==r){if(91==Math.floor(n[h].itemConfig.id/1e4))continue;if(o&&n[h].handle==o.item.handle)continue;p<n[h].itemConfig.zsLevel||f<n[h].itemConfig.level?d.push(n[h]):s.push(n[h])}}return s=s.sort(this.sortFun),d.sort(this.sortFun),s=s.concat(d)},t.prototype.sortFun=function(e,i){var n=t.ins().getEquipAttrs(e),a=t.getAttrPower(n),o=t.ins().getEquipAttrs(i),r=t.getAttrPower(o);return a<r?1:a>r?-1:0},t.prototype.getEquipAttrs=function(e){var t=r.default.EquipConfig[e.configID],i=[];for(var n in d.default.translate)if(!(t[n]<=0))for(var a=e.att,o=0;o<a.length;o++)if(a[o].type==d.default.getAttrTypeByName(n)){var s=new p.default;s.type=a[o].type,s.value=t[n]+a[o].value,i.push(s);break}return i},t.prototype.checkEqRedPoint=function(e,i,n){var a,o=i.getEquipByIndex(e);a=o.item.itemConfig&&u.default.getQuality(o.item.itemConfig)<4?null:r.default.ItemConfig[o.item.configID+1];return o.item.itemConfig&&4==u.default.getQuality(o.item.itemConfig)&&o.item.itemConfig.zsLevel>=12?null:o.item.itemConfig&&5==u.default.getQuality(o.item.itemConfig)?null:void 0!=a&&0!=o.item.handle&&4==u.default.getQuality(o.item.itemConfig)&&1!=o.item.itemConfig.level&&-1==t.fitleEquip.indexOf(o.item.configID)&&null},t.prototype.doChoosableGiftResult=function(e){0==e.readUnsignedByte()&&this.postGiftResult()},t.prototype.postGiftResult=function(){},t.prototype.sendChoosableGift=function(e,t,i){var n=this.getBytes(8);n.writeInt(e),n.writeInt(t),n.writeInt(i+1),this.sendToServer(n)},t.prototype.getRmbItemIsBuy=function(e){var t=r.default.ItemConfig[e];return!!(t&&t.needyuanbao&&l.default.yb>=t.needyuanbao)},t.BAG_TYPE_OTHTER=0,t.BAG_TYPE_EQUIP=1,t.BAG_TYPE_TREASUREHUNT=2,t.BAG_ENOUGH=20,t.BAG_ENOUGH100=100,t.BAG_ENOUGH200=200,t.BAG_DESC_TYPE_HEIR=11,t}(n.default);i.default=E,window.GameSystem.push(E.ins.bind(E)),cc._RF.pop()},{"../../../core/base/AttributeData":"AttributeData","../../../core/base/AttributeType":"AttributeType","../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/Util":"Util","../../base/BaseSystem":"BaseSystem","../../config/ItemConfig":"ItemConfig","../../config/SpecialEquipsConfig":"SpecialEquipsConfig","../../consts/ItemConst":"ItemConst","../../consts/ItemType":"ItemType","../../entity/Actor":"Actor","../../entity/Role":"Role","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../fb/UserFb":"UserFb","../forge/model/EquipPos":"EquipPos","../forge/model/ForgeConst":"ForgeConst","../recharge/Recharge":"Recharge","../rolewin/UserEquip":"UserEquip","../rolewin/model/EquipsData":"EquipsData","../tips/UserTips":"UserTips","../vip/UserVip":"UserVip","../zs/UserZs":"UserZs","./ItemData":"ItemData"}],UserBoss:[function(e,t,i){"use strict";cc._RF.push(t,"52ddd8Hw9FI2LQAQYeOhbs+","UserBoss"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../recharge/Recharge"),s=e("./model/NewWorldBossData"),u=e("../gamescene/GameLogic"),l=e("../zs/UserZs"),c=e("../../entity/Actor"),d=e("../../map/GameMap"),f=e("../fb/UserFb"),p=e("../../manager/GlobalConfig"),h=e("../../Utils/EgretUtils"),g=e("../tips/UserTips"),y=e("../city/CityCC"),v=e("../battle/BattleCC"),m=e("../paoDian/PaoDianCC"),b=e("./model/WorldBossRankItemData"),_=e("../../base/EntityManager"),C=e("../../entity/CharRole"),I=e("../../../core/utils/StringUtils"),T=e("./GwBoss"),S=e("../vip/UserVip"),R=e("../../../core/utils/DateUtils"),B=e("../activity/model/RewardData"),M=e("../../manager/TimerManager"),E=e("../../../core/base/ViewManager"),D=e("../../ai/RoleAI"),A=e("../../base/EntityType"),P=e("./AutoChallengeBoss"),w=e("../guild/GuildWar"),L=e("../../../core/base/ResultManager"),k=e("../chat/Chat"),F=e("../chat/model/ChatSystemData"),G=e("../opensystem/OpenSystem"),x=e("../../consts/SystemConst"),N=e("../server/GameServer"),U=e("../../base/EntityShowMgr"),O=e("../bag/UserBag"),H=function(e){function t(){var i=e.call(this)||this;return i.worldBossLeftTime=[],i.worldChallengeTime=[],i.worldBossCd=[],i.worldBossLastWinner=[],i.worldBossrestoreTime=[],i.worldBossBelongTime=[],i.curShield=0,i.totalShield=0,i.shieldType=0,i.worldInfoList=[],i.worldBossPlayList=[],i.rankList=[],i.monsterID=0,i.hp=0,i.bossHandler=0,i.lastBossID=-1,i.rank=[],i.changeAttr=[],i.challengeCount=0,i.restoreTime=0,i.toDaySoul=0,i.cdTime=0,i.bossRemind=0,i.bossInfo=[],i.isDoingTimer=!1,i.autoClear=[!1,!1,!1],i.ShowTip=!0,i.currBossSubType=0,i.currBossConfigID=0,i.newWorldBossData=new s.default,i.hideBossData={id:0,endTime:0,lastId:0},i.worldPrize=0,i._reliveTime=0,i.killerHandler=0,i.winner="",i.bossAlertList=[],i.publicBossIdDic=[],i.weixieList=[],i.canPlayList=[],i.belongName="",i.attHandle=0,i.canClick=!0,o.default.compile(t),i.sysId=a.PackageID.Boss,i.regNetMsg(10,i.postWorldBoss),i.regNetMsg(11,i.setShieldPer),i.regNetMsg(14,i.doClearCD),i.regNetMsg(16,i.postLottery),i.regNetMsg(17,i.doLotteryRan),i.regNetMsg(18,i.doLotteryResult),i.regNetMsg(20,i.doBossBlood),i.regNetMsg(21,i.postUpdatePerInfo),i.regNetMsg(7,i.doBelongChange),i.regNetMsg(23,i.postAttackList),i.regNetMsg(24,i.doKillNotice),i.regNetMsg(25,i.postRemainTime),i.regNetMsg(26,i.postWorldBossEndTime),i.regNetMsg(27,i.postWorldNotice),i.regNetMsg(28,i.postChallageRank),i.regNetMsg(29,i.doBossChallengeResult),i.regNetMsg(30,i.doBossSetting),i.regNetMsg(31,i.postNewBossResult),i.regNetMsg(32,i.postNewBossInfo),i.regNetMsg(33,i.postNewBossReliveTime),i.regNetMsg(34,i.postNewBossOpen),i.regNetMsg(35,i.postAddAttrNum),i.regNetMsg(36,i.postNewBossRank),i.regNetMsg(37,i.postBossDieNotice),i.regNetMsg(38,i.postBaseHideBossInfo),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initLogin=function(){this.init()},t.prototype.checkOpenBossBlood=function(e){var t=e[0],i=e[1],n=t.infoModel.configID;n&&n==this.monsterID&&d.default.fbType!=f.default.FB_TYPE_ZHUANSHENGBOSS&&d.default.fbType!=f.default.FB_TYPE_ALLHUMENBOSS&&d.default.fbType!=f.default.FB_TYPE_HOMEBOSS&&d.default.fbType!=f.default.FB_TYPE_LABA&&(this.hp=i)},t.prototype.postListData=function(){},t.prototype.postHpChange=function(){},t.prototype.postBossData=function(e,t){return void 0===t&&(t=""),[e,t]},t.prototype.sendWorldBossInfo=function(e){var t=this.getBytes(10);t.writeInt(e),this.sendToServer(t)},t.prototype.postWorldBoss=function(e){var i=e.readByte(),n=this.worldInfoList[i]=this.worldInfoList[i]||[];this.worldBossPlayList[i]=[],this.worldBossrestoreTime[i]=[],this.worldBossCd[i]=1e3*e.readShort()+h.default.getTimer(),this.worldBossLeftTime[i]=e.readShort();var a=e.readShort();n.length=a;for(var o=0;o<a;o++){var r=n[o]||new WorldBossItemData;r.parser(e),n[o]=r}return this.worldBossrestoreTime[i]=1e3*e.readShort()+h.default.getTimer(),this.worldChallengeTime[i]=e.readShort(),this.worldBossBelongTime[i]=e.readShort(),this.updateBossPlayList(i),i!=t.BOSS_SUBTYPE_QMBOSS&&i!=t.BOSS_SUBTYPE_SHENYU||P.default.ins().refBossTimeFun(),i},t.prototype.updateBossPlayList=function(e){var i=t.ins().worldInfoList[e].slice(),n=this.worldBossPlayList[e];for(var a in i){var o=p.default.WorldBossConfig[i[a].id];if(o)if(e==t.BOSS_SUBTYPE_QMBOSS)l.default.ins().lv>=o.zsLevel&&c.default.level>=o.level&&n.push(i[a]);else if(e==t.BOSS_SUBTYPE_WORLDBOSS)-1!=o.zslook.indexOf(l.default.ins().lv)&&c.default.level>=o.level&&n.push(i[a]);else if(e==t.BOSS_SUBTYPE_HOMEBOSS){var r=void 0;for(var s in p.default.BossHomeConfig)if(-1!=p.default.BossHomeConfig[s].boss.lastIndexOf(i[a].id)){r=p.default.BossHomeConfig[s];break}r&&S.default.ins().lv>=r.vip&&l.default.ins().lv>=o.zsLevel&&c.default.level>=o.level&&n.push(i[a])}else e==t.BOSS_SUBTYPE_SHENYU?l.default.ins().lv>=o.zsLevel&&c.default.level>=o.level&&n.push(i[a]):e==t.BOSS_SUBTYPE_GODWEAPON||e==t.BOSS_SUBTYPE_GODWEAPON_TOP?i[a].canInto&&n.push(i[a]):e==t.BOSS_SUBTYPE_DARKBOSS&&i[a].canInto&&n.push(i[a])}},t.prototype.postUpdateWorldPlayList=function(){for(var e in this.worldInfoList){var t=+e;this.worldBossPlayList[t]=[],this.updateBossPlayList(t)}},t.prototype.setShieldPer=function(e){this.shieldType=e.readByte(),this.curShield=e.readInt(),this.totalShield=e.readInt();var t=e.readByte();if(this.curShield==this.totalShield){var i="";t?(i="BOSS\u5f00\u542f\u62a4\u76fe\uff0c\u51fb\u7834\u62a4\u76fe\u5f00\u542f\u62bd\u5956\u83b7\u5f97\u5e78\u8fd0\u5956\u52b1",g.default.ins().showSceneTips(i)):(i="BOSS\u5f00\u542f\u62a4\u76fe\uff0c\u671f\u95f4BOSS\u4e0d\u4f1a\u51cf\u5c11\u8840\u91cf",g.default.ins().showSceneTips(i))}this.postShieldPer()},t.prototype.postShieldPer=function(){},t.prototype.sendClearCD=function(){d.default.fbType==f.default.FB_TYPE_GUIDEBOSS?f.default.ins().sendGuideFbAlive():d.default.fbType==f.default.FB_TYPE_CITY?y.default.ins().sendRevival():d.default.fubenID==p.default.CampBattleConfig.fbId?v.default.ins().sendReLive():d.default.fubenID==p.default.PassionPointConfig.fbId?m.default.ins().sendReLive():d.default.fbType==f.default.FB_TYPE_NEW_WORLD_BOSS?this.sendNewBossBuyRelive():this.sendToServer(this.getBytes(14))},t.prototype.doClearCD=function(e){g.default.ins().showTips(e.readByte()?"\u6210\u529f\u6e05\u9664\u6311\u6218CD":"CD\u5df2\u7ed3\u675f\uff0c\u76f4\u63a5\u53c2\u4e0e\u6311\u6218")},t.prototype.sendChallengWorldBoss=function(e,t){this.currBossSubType=t,this.currBossConfigID=e;var i=this.getBytes(15);i.writeInt(e),this.sendToServer(i)},t.prototype.postLottery=function(e){this.worldPrize=e.readInt(),E.default.ins().open(WorldBossJiangLiWin)},t.prototype.sendJoinLottery=function(){this.sendBaseProto(17)},t.prototype.doLotteryRan=function(e){var t=e.readShort();this.postLotteryRan(t)},t.prototype.postLotteryRan=function(e){return e},t.prototype.sendChallengRank=function(e){this.currBossSubType=e;var t=this.getBytes(28);t.writeInt(e),this.sendToServer(t)},t.prototype.doLotteryResult=function(e){var t=e.readString(),i=e.readShort();this.postLotteryResult(t,i)},t.prototype.postLotteryResult=function(e,t){return[e,t]},t.prototype.doBossBlood=function(e){this.monsterID=e.readInt(),this.hp=e.readDouble(),this.hp&&this.monsterID!=this.lastBossID&&d.default.fbType!=f.default.FB_TYPE_MATERIAL&&d.default.fbType!=f.default.FB_TYPE_TIAOZHAN&&d.default.fbType!=f.default.FB_TYPE_EXP&&d.default.fbType!=f.default.FB_TYPE_GUIDEBOSS&&this.postBossAppear(),this.lastBossID=this.monsterID,this.hp<=0&&(this.lastBossID=-1),this.bossHandler=e.readDouble();e.readDouble();var t=e.readShort();this.rank.length=t;for(var i=0;i<t;i++)this.rank[i]=this.rank[i]||new b.default,this.rank[i].parser(e),this.rank[i].rank=i+1;this.postHpChange(),d.default.fbType!=f.default.FB_TYPE_ZHUANSHENGBOSS&&d.default.fbType!=f.default.FB_TYPE_ALLHUMENBOSS&&d.default.fbType!=f.default.FB_TYPE_HOMEBOSS&&d.default.fbType!=f.default.FB_TYPE_LABA&&E.default.ins().open(BossBloodPanel),(!this.hp||this.hp<=0&&w.default.ins().getModel().checkinAppoint(1))&&E.default.ins().close(BossBloodPanel)},t.prototype.postBossAppear=function(){return this.monsterID},t.prototype.postBossDisappear=function(e){return this.bossHandler=0,e},t.prototype.postUpdatePerInfo=function(e){return this.worldBossCd[this.currBossSubType]=1e3*e.readShort()+h.default.getTimer(),this.worldBossLeftTime[this.currBossSubType]=e.readShort(),[this.worldBossCd,this.worldBossLeftTime]},t.prototype.doBelongChange=function(e){var t=e.readDouble(),i=e.readDouble(),n=e.readString();this.postBelongChange(t,i,n)},t.prototype.postBelongChange=function(e,i,n){if(void 0===i&&(i=0),void 0===n&&(n=""),t.ins().changecanPlayList(e),this.attHandle=e,U.default.ins().showHideSomeOne(e),e>0){var a=_.default.ins().getMasterList(e),o="";if(!(a&&a[0]&&a[0].infoModel))return;o=a[0].infoModel.name,this.setBelongHPandColor();var r="";if(e>0&&i>0){var s=o,u=s.split("\n");s=u[1]?u[1]:u[0];var l=n;l=(u=l.split("\n"))[1]?u[1]:u[0],l=I.default.replaceStr(l,"0xffffff",ColorUtil.ROLENAME_COLOR_GREEN+""),r="|C:"+ColorUtil.ROLENAME_COLOR_GREEN+"&T:"+s+"|\u51fb\u8d25\u4e86|C:"+ColorUtil.ROLENAME_COLOR_GREEN+"&T:"+l+"|\uff0c\u6210\u4e3a\u4e86\u65b0\u7684\u5f52\u5c5e\u8005\u3002",g.default.ins().showSceneTips(r)}}},t.prototype.postAttackList=function(e){var i=e.readUnsignedInt();this.weixieList=[];for(var n=0;n<i;n++){var a=e.readDouble(),o=_.default.ins().getRootMasterHandle(a);t.ins().changeWeiXieList(o)}this.postHasAttackChange(0)},t.prototype.doKillNotice=function(e){var t=e.readString(),i=e.readShort(),n=e.readShort(),a=p.default.WorldBossKillMsgConfig[n].msg;a=I.default.substitute(a,t,i),g.default.ins().showSceneTips(a)},t.prototype.postRemainTime=function(e){this.reliveTime=e.readShort(),this.killerHandler=e.readDouble(),this.reliveTime>0&&this.clearWorldBossList()},t.prototype.setBelongHPandColor=function(){if(this.attHandle!=c.default.handle){var e=_.default.ins().getMasterList(this.attHandle);for(var t in e)e[t]instanceof C.default&&e[t].setNameTxtColor(ColorUtil.ROLENAME_COLOR_YELLOW)}},t.prototype.postWorldBossEndTime=function(e){this.winner=e.readString();var t=6e4;T.default.ins().isGwBoss&&(t=3e4),this.worldBossEndTime=h.default.getTimer()+t,this.clearWorldBossList()},t.prototype.postWorldNotice=function(e){var i=e.readByte(),n=e.readInt(),a=c.default.level,o=l.default.ins().lv;if(i==t.BOSS_SUBTYPE_QMBOSS){var r=t.ins().worldInfoList[i];for(var s in r){var u=p.default.WorldBossConfig[n];if(r[s].id==n&&this.getBossRemindByIndex(n)&&o>=u.zsLevel&&a>=u.level){var d=p.default.MonstersConfig[u.bossId];r[s].hp=100,r[s].bossState=1;var f=this.worldBossPlayList[i];for(var h in f)if(f[h]&&f[h].id==n){f[h].hp=100,f[h].bossState=1;break}var g="|C:0xfee900&T:BOSS||C:0xfe4444&T:"+d.name+"||C:0xfee900&T:\u51fa\u73b0\u5728||C:0x16b2ff&T:\u91ce\u5916BOSS\uff01|";k.default.ins().postSysChatMsg(new F.default(3,g)),t.ins().worldBossLeftTime[i]&&this.postBossData(!0,d.name);break}}}else if(i==t.BOSS_SUBTYPE_HOMEBOSS){u=p.default.WorldBossConfig[n];if((d=p.default.BossHomeConfig[n])&&o>=u.zsLevel&&a>=u.level&&S.default.ins().lv>=d.vip){r=t.ins().worldInfoList[i],f=this.worldBossPlayList[i];var y=d.boss;for(var s in r)-1!=y.lastIndexOf(r[s].id)&&(r[s].hp=100,r[s].bossState=1);for(var h in f)-1!=y.lastIndexOf(f[h].id)&&(f[h].hp=100,f[h].bossState=1);g="|C:0xfee900&T:BOSS\u4e4b\u5bb6"+n+"\u5c42\u6240\u6709BOSS\u5237\u65b0\u4e86\uff0c\u8fd9\u91cc\u7684BOSS\u592a\u591a\u4e86\uff0c\u7b80\u76f4\u5c31\u662f\u6253\u5b9d\u5929\u5802|";k.default.ins().postSysChatMsg(new F.default(3,g)),t.ins().worldBossLeftTime[i]&&this.postBossData(!0,"BOSS\u4e4b\u5bb6")}}else if(i==t.BOSS_SUBTYPE_SHENYU){r=t.ins().worldInfoList[i];for(var s in r){u=p.default.WorldBossConfig[n];if(r[s].id==n&&this.getBossRemindByIndex(n)&&o>=u.zsLevel&&a>=u.level){d=p.default.MonstersConfig[u.bossId];r[s].hp=100,r[s].bossState=1;f=this.worldBossPlayList[i];for(var h in f)if(f[h]&&f[h].id==n){f[h].hp=100,f[h].bossState=1;break}g="|C:0xfee900&T:BOSS||C:0xfe4444&T:"+d.name+"||C:0xfee900&T:\u51fa\u73b0\u5728||C:0x16b2ff&T:\u795e\u57dfBOSS\uff01|";k.default.ins().postSysChatMsg(new F.default(3,g)),t.ins().worldBossLeftTime[i]&&this.postBossData(!0,d.name);break}}}else if(i==t.BOSS_SUBTYPE_GODWEAPON||i==t.BOSS_SUBTYPE_GODWEAPON_TOP){r=t.ins().worldInfoList[i];for(var s in r){u=p.default.WorldBossConfig[n];if(r[s].id==n){d=p.default.MonstersConfig[u.bossId];r[s].hp=100,r[s].bossState=1;f=this.worldBossPlayList[i];for(var h in f)if(f[h]&&f[h].id==n){f[h].hp=100,f[h].bossState=1;break}break}}}else if(i==t.BOSS_SUBTYPE_DARKBOSS){r=t.ins().worldInfoList[i];for(var s in r){u=p.default.WorldBossConfig[n];if(r[s].id==n){d=p.default.MonstersConfig[u.bossId];r[s].hp=100,r[s].bossState=1;f=this.worldBossPlayList[i];for(var h in f)if(f[h]&&f[h].id==n){f[h].hp=100,f[h].bossState=1;break}if(r[s].canInto){g="|C:0xfee900&T:\u6697\u4e4b\u79d8\u5883BOSS||C:0xfe4444&T:"+d.name+"||C:0xfee900&T:\u51fa\u73b0\u5728||C:0x16b2ff&T:\u79d8\u5883BOSS\uff01|";k.default.ins().postSysChatMsg(new F.default(3,g)),t.ins().worldBossLeftTime[i]&&this.postBossData(!0,d.name)}break}}}},t.prototype.postChallageRank=function(e){for(var t,i=e.readInt(),n=e.readByte(),a=[],o=0;o<n;o++)a[o]=[],t=e.readInt(),a[o][0]=R.default.getFormatBySecond(R.default.formatMiniDateTime(t)/1e3,6),a[o][1]=e.readString(),a[o][2]=e.readDouble().toString(),a[o][3]="1";return a.reverse(),[i,a]},t.prototype.doBossChallengeResult=function(e){for(var t=e.readByte(),i=e.readString(),n=e.readByte()||1,a=e.readByte(),o=e.readShort(),r=[],s=0;s<o;s++)r[s]=new B.default,r[s].parser(e);var u="yuanhead"+n+a;L.default.ins().create(d.default.fbType,!0,r,"",null,[t,i,u])},t.prototype.setBossSetting=function(e){var t=this.bossAlertList.indexOf(e);-1!=t?this.bossAlertList.splice(t,1):this.bossAlertList.push(e)},t.prototype.sendBossSetting=function(){var e=this.bossAlertList?this.bossAlertList.length:0,t=this.getBytes(29);t.writeShort(e);for(var i=0;i<e;i++)t.writeShort(this.bossAlertList[i]);this.sendToServer(t)},t.prototype.doBossSetting=function(e){this.bossAlertList=[];for(var t=e.readShort(),i=0;i<t;i++){var n=e.readShort();this.bossAlertList.push(n)}},t.prototype.checkNewWorldBossOpen=function(){return c.default.level>=p.default.NewWorldBossBaseConfig.openLv},t.prototype.sendIntoNewBoss=function(){this.sendBaseProto(31)},t.prototype.postNewBossResult=function(e){this.newWorldBossData.isKill=!!e.readByte(),this.newWorldBossData.rank=e.readInt(),this.newWorldBossData.lastKillRoleName=e.readString(),this.newWorldBossData.randomRoleName=e.readString(),this.newWorldBossData.totalTime=e.readInt(),this.newWorldBossData.randomAwards=[];for(var t=e.readShort(),i=0;i<t;i++)this.newWorldBossData.randomAwards[i]=new B.default,this.newWorldBossData.randomAwards[i].parser(e);L.default.ins().create(d.default.fbType,1)},t.prototype.sendGetNewBossInfo=function(){this.sendBaseProto(32)},t.prototype.postNewBossInfo=function(e){this.newWorldBossData.bossID=e.readInt(),this.newWorldBossData.curHp=e.readDouble()},t.prototype.sendNewBossBuyRelive=function(){this.sendBaseProto(33)},t.prototype.postNewBossReliveTime=function(e){this.reliveTime=e.readShort()},t.prototype.postNewBossOpen=function(e){this.newWorldBossData.isOpen=!!e.readByte(),this.newWorldBossData.startTime=e.readInt(),this.newWorldBossData.startTime&&(this.newWorldBossData.startTime=R.default.formatMiniDateTime(this.newWorldBossData.startTime))},t.prototype.postAddAttrNum=function(e){this.newWorldBossData.addAttrNum=e.readShort()},t.prototype.postNewBossRank=function(e){var t=e.readShort();null==this.newWorldBossData.rankList&&(this.newWorldBossData.rankList=[]),this.newWorldBossData.rankList.length=t;for(var i=0;i<t;i++)this.newWorldBossData.rankList[i]=this.newWorldBossData.rankList[i]||new NewWorldBossRankData,this.newWorldBossData.rankList[i].parser(e);this.newWorldBossData.rankList.sort(this.sortNewBossRank)},t.prototype.sortNewBossRank=function(e,t){return e.value>t.value?-1:1},t.prototype.postBossDieNotice=function(e){var i=e.readInt(),n=p.default.WorldBossConfig[i];if(n)switch(n.type){case t.BOSS_SUBTYPE_WORLDBOSS:case t.BOSS_SUBTYPE_QMBOSS:case t.BOSS_SUBTYPE_DARKBOSS:case t.BOSS_SUBTYPE_GODWEAPON:case t.BOSS_SUBTYPE_GODWEAPON_TOP:var a=p.default.MonstersConfig[n.bossId];t.ins().postBossData(!1,a.name),this.sendWorldBossInfo(n.type);break;case t.BOSS_SUBTYPE_HOMEBOSS:t.ins().postBossData(!1,"BOSS\u4e4b\u5bb6"),this.sendWorldBossInfo(n.type)}},t.prototype.sendBuyChallengeTimes=function(e){var t=this.getBytes(30);t.writeByte(e),this.sendToServer(t)},t.prototype.sendBuyAddAttrNum=function(){this.sendBaseProto(34)},t.prototype.getBossRemindByIndex=function(e){return-1!=this.bossAlertList.indexOf(e)},t.prototype.sendCleanBelong=function(){this.sendBaseProto(35)},t.prototype.sendChallengeHideBoss=function(){this.sendBaseProto(36)},t.prototype.postBaseHideBossInfo=function(e){var t=e.readInt(),i=e.readInt();this.hideBossData.id=t,this.hideBossData.endTime=i},t.prototype.checkWorldBossMoney=function(){return c.default.yb>=this.checkWorldBossNeed()},t.prototype.checkWorldBossNeed=function(){return d.default.fbType==f.default.FB_TYPE_GUIDEBOSS?p.default.LeadFubenBaseConfig.BuyRebornCost:d.default.fbType==f.default.FB_TYPE_CITY?p.default.CityBaseConfig.BuyRebornCost:d.default.fbType==f.default.FB_TYPE_NEW_WORLD_BOSS?p.default.NewWorldBossBaseConfig.clearCdCost:d.default.fubenID==p.default.CampBattleConfig.fbId?p.default.CampBattleConfig.buyRebornCdCost:d.default.fubenID==p.default.PassionPointConfig.fbId?p.default.PassionPointConfig.buyRebornCdCost:p.default.WorldBossBaseConfig.clearCdCost[this.currBossSubType-1]},t.prototype.checkisAutoRelive=function(){if(this.reliveTime>0){if(this.autoClear[this.currBossSubType]){if(this.checkWorldBossMoney())return this.sendClearCD(),!1;g.default.ins().showTips("\u5143\u5b9d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u7acb\u5373\u590d\u6d3b"),this.autoClear[this.currBossSubType]=!1}return!0}return!1},Object.defineProperty(t.prototype,"reliveTime",{get:function(){return this._reliveTime},set:function(e){this._reliveTime!=e&&(this._reliveTime=e,M.default.ins().remove(this.timeClock,this),M.default.ins().doTimer(1e3,this._reliveTime,this.timeClock,this))},enumerable:!0,configurable:!0}),t.prototype.timeClock=function(){this._reliveTime--,this._reliveTime<=0&&M.default.ins().remove(this.timeClock,this)},t.prototype.parser=function(e){this.challengeCount=e.readShort(),this.restoreTime=1e3*e.readShort()+h.default.getTimer(),this.toDaySoul=e.readInt(),this.cdTime=1e3*e.readShort()+h.default.getTimer(),this.bossRemind=e.readInt(),(!this.hp||this.hp<=0&&w.default.ins().getModel().checkinAppoint(1))&&E.default.ins().close(BossBloodPanel)},t.prototype.parserBossList=function(e){},t.prototype.parserBoss=function(e){},t.prototype.checkShow=function(){var e=d.default.fubenID;isNaN(e)||(d.default.fubenID!=d.default.lastFbId&&(this.lastBossID=-1,d.default.lastFbId=d.default.fubenID),0!=e&&d.default.fbType!=f.default.FB_TYPE_GUANQIABOSS?d.default.fbType==f.default.FB_TYPE_NEW_WORLD_BOSS&&d.default.fubenID==p.default.NewWorldBossBaseConfig.fbId?E.default.ins().open(NewWorldBossUIView):d.default.fbType==f.default.FB_TYPE_ZHUANSHENGBOSS||d.default.fbType==f.default.FB_TYPE_ALLHUMENBOSS||d.default.fbType==f.default.FB_TYPE_HOMEBOSS||d.default.fbType==f.default.FB_TYPE_GUIDEBOSS&&40001!=d.default.fubenID?E.default.ins().open(WorldBossUiInfo):d.default.sceneInMine()?E.default.ins().open(MineScenePanel):d.default.fbType==f.default.FB_TYPE_LABA&&E.default.ins().open(LabaBossUIPanel):(E.default.ins().close(MineScenePanel),E.default.ins().close(WorldBossUiInfo),E.default.ins().close(WorldBossBeKillWin),E.default.ins().close(NewWorldBossUIView),E.default.ins().close(LabaBossUIPanel)))},t.prototype.checkRelive=function(){if(T.default.ins().isRoleDie()){if(this.checkWorldBossMoney())return!0;g.default.ins().showTips("\u5143\u5b9d\u4e0d\u8db3\uff0c\u65e0\u6cd5\u7acb\u5373\u590d\u6d3b"),this.autoClear[this.currBossSubType]=!1}return!1},t.prototype.checkRemoveEntity=function(e){var t=e[0],i=e[1],n=i.infoModel;if(n&&n.team!=D.Team.My&&n.type==A.EntityType.Role&&n.masterHandle){var a=n.masterHandle;_.default.ins().getMasterList(a)||U.default.ins().showNearSomeOne()}n&&t==this.bossHandler&&this.postBossDisappear(i)},t.prototype.getRankList=function(e){return this.rankList[e]},t.prototype.init=function(){this.sendWorldBossInfo(t.BOSS_SUBTYPE_WORLDBOSS),this.sendWorldBossInfo(t.BOSS_SUBTYPE_QMBOSS),this.sendWorldBossInfo(t.BOSS_SUBTYPE_HOMEBOSS),this.sendWorldBossInfo(t.BOSS_SUBTYPE_SHENYU),this.sendWorldBossInfo(t.BOSS_SUBTYPE_GODWEAPON),this.sendWorldBossInfo(t.BOSS_SUBTYPE_GODWEAPON_TOP),this.sendWorldBossInfo(t.BOSS_SUBTYPE_DARKBOSS)},t.prototype.changeWeiXieList=function(e,t,i){if(void 0===t&&(t=!0),void 0===i&&(i=""),c.default.handle!=e){var n=this.checkListElements(e,this.weixieList);t?-1==n&&this.weixieList.push(e):-1!=n&&this.weixieList.splice(n,1)}},t.prototype.changecanPlayList=function(e,t){var i;void 0===t&&(t=!0),c.default.handle!=e?0==e?(this.canPlayList=[],this.belongName=""):(this.weixieList=[],this.canPlayList[0]=e,(i=_.default.ins().getEntityBymasterhHandle(e))&&(this.belongName=i.infoModel.name)):(this.weixieList=[],this.canPlayList=[],this.belongName=c.default.myName),this.postHasAttackChange(0),this.postCanplayChange()},t.prototype.checkListElements=function(e,t){if(t.length<=0)return-1;for(var i=0;i<t.length;i++)if(t[i]==e)return i;return-1},t.prototype.postHasAttackChange=function(e){return e},t.prototype.postCanplayChange=function(){},t.prototype.clearWorldBossList=function(){d.default.fbType==f.default.FB_TYPE_ZHUANSHENGBOSS||d.default.fbType==f.default.FB_TYPE_ALLHUMENBOSS||d.default.fbType==f.default.FB_TYPE_HOMEBOSS||d.default.fbType==f.default.FB_TYPE_GUIDEBOSS||d.default.fbType==f.default.FB_TYPE_GOD_WEAPON||d.default.fbType==f.default.FB_TYPE_GOD_WEAPON_TOP||d.default.fbType==f.default.FB_TYPE_DARK_BOSS?(this.weixieList=[],this.canPlayList=[],u.default.ins().currAttackHandle=0):(t.ins().winner="",f.default.ins().guideBossKill=0)},t.prototype.checkBossIconShow=function(){return G.default.ins().checkSysOpen(x.SystemType.BOSS)&&!f.default.ins().pkGqboss},t.prototype.checkShenyuOpen=function(){return N.default.serverOpenDay>=p.default.WorldBossBaseConfig.shenyuOpenDay-1},t.prototype.checkWorldBossRedPoint=function(e){var i=this.worldBossPlayList[e];if(!i)return!1;if(e==t.BOSS_SUBTYPE_SHENYU&&!this.checkShenyuOpen())return!1;if(e!=t.BOSS_SUBTYPE_HOMEBOSS&&(!this.worldBossLeftTime||this.worldBossLeftTime.length<0||!this.worldBossLeftTime[e]))return!1;if((e==t.BOSS_SUBTYPE_QMBOSS||e==t.BOSS_SUBTYPE_SHENYU||e==t.BOSS_SUBTYPE_DARKBOSS)&&this.bossAlertList&&this.bossAlertList.length){for(var n=!0,a=this.worldInfoList[e].slice(),o=1e3*l.default.ins().lv+c.default.level,r=0;r<a.length;r++){if(!((a[r].relieveTime-h.default.getTimer())/1e3>0||a[r].hp<=0))if(this.getBossRemindByIndex(a[r].id)){var s=p.default.WorldBossConfig[a[r].id];if(s.samsaraLv){if(c.default.samsaraLv>=s.samsaraLv){n=!1;break}}else if(o>=1e3*s.zsLevel+s.level){n=!1;break}}}return!n}if(e==t.BOSS_SUBTYPE_GODWEAPON){for(var u=0,d=i;u<d.length;u++){var f=d[u];if(this.worldBossBelongTime[e]>0&&f.canChallenge&&this.getBossRemindByIndex(f.id))return!0}return!1}if(e==t.BOSS_SUBTYPE_GODWEAPON_TOP){for(var g=0,y=i;g<y.length;g++){if((f=y[g]).canChallenge&&this.getBossRemindByIndex(f.id)){var v=p.default.WorldBossBaseConfig.challengeItemYb[e-1];if(c.default.yb>=v)return!0;var m=p.default.WorldBossBaseConfig.challengeItem[e-1],b=O.default.ins().getBagGoodsByTypeAndId(0,m);if(b&&b.count)return!0}}return!1}var _=i.length;for(r=0;r<_;r++)if(2!=i[r].bossState)return!0;return!1},Object.defineProperty(t.prototype,"clickTime",{set:function(e){this.canClick=!1,this._clickTime=e,M.default.ins().remove(this.endTimeChangeStatu,this),M.default.ins().doTimer(500,this._clickTime,this.endTimeChangeStatu,this)},enumerable:!0,configurable:!0}),t.prototype.endTimeChangeStatu=function(){--this._clickTime,this._clickTime<=0&&(this.canClick=!0,M.default.ins().remove(this.endTimeChangeStatu,this))},t.prototype.getListData=function(){var e=f.default.getPersonalBossFbIds().slice(),t=[],i=[],n=[],a=1e3*l.default.ins().lv+c.default.level;for(var o in e){var s=f.default.ins().getFbDataById(e[o].id);if(s)if(s.getPlayCount()<=0)t.push(e[o]);else{var u=1e3*e[o].zsLevel+e[o].levelLimit;e[o].monthcard?r.default.ins().monthDay>0?i.unshift(e[o]):n.push(e[o]):e[o].specialCard?r.default.ins().franchise?i.unshift(e[o]):n.push(e[o]):e[o].privilege?r.default.ins().getIsForeve()?i.unshift(e[o]):n.push(e[o]):a>=u?i.push(e[o]):n.push(e[o])}}return[i,n,t]},t.prototype.getGwBossList=function(){for(var e=t.ins().worldInfoList[t.BOSS_SUBTYPE_GODWEAPON].concat(),i=t.ins().worldInfoList[t.BOSS_SUBTYPE_GODWEAPON_TOP].concat(),n=0;n<i.length;n++){var a=i[n];p.default.WorldBossConfig[a.id];if(a.canInto){e.push(i[n]);break}}return e},t.isCanChallenge=function(e){var t;e.samsaraLv>0?t=c.default.samsaraLv>=e.samsaraLv:t=1e3*l.default.ins().lv+c.default.level>=1e3*e.zsLevel+e.level;return t},t.WB_BAG_ENOUGH=50,t.BOSS_SUBTYPE_WORLDBOSS=1,t.BOSS_SUBTYPE_QMBOSS=2,t.BOSS_SUBTYPE_HOMEBOSS=3,t.BOSS_SUBTYPE_SHENYU=4,t.BOSS_SUBTYPE_GODWEAPON=5,t.BOSS_SUBTYPE_GODWEAPON_TOP=6,t.BOSS_SUBTYPE_DARKBOSS=7,t}(n.default);i.default=H,window.GameSystem.push(H.ins.bind(H)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/base/ResultManager":"ResultManager","../../../core/base/ViewManager":"ViewManager","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../../core/utils/StringUtils":"StringUtils","../../Utils/EgretUtils":"EgretUtils","../../ai/RoleAI":"RoleAI","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../base/EntityShowMgr":"EntityShowMgr","../../base/EntityType":"EntityType","../../consts/SystemConst":"SystemConst","../../entity/Actor":"Actor","../../entity/CharRole":"CharRole","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../../map/GameMap":"GameMap","../activity/model/RewardData":"RewardData","../bag/UserBag":"UserBag","../battle/BattleCC":"BattleCC","../chat/Chat":"Chat","../chat/model/ChatSystemData":"ChatSystemData","../city/CityCC":"CityCC","../fb/UserFb":"UserFb","../gamescene/GameLogic":"GameLogic","../guild/GuildWar":"GuildWar","../opensystem/OpenSystem":"OpenSystem","../paoDian/PaoDianCC":"PaoDianCC","../recharge/Recharge":"Recharge","../server/GameServer":"GameServer","../tips/UserTips":"UserTips","../vip/UserVip":"UserVip","../zs/UserZs":"UserZs","./AutoChallengeBoss":"AutoChallengeBoss","./GwBoss":"GwBoss","./model/NewWorldBossData":"NewWorldBossData","./model/WorldBossRankItemData":"WorldBossRankItemData"}],UserEquip:[function(e,t,i){"use strict";cc._RF.push(t,"890b7rsbZdCrIK5mJrGFzrD","UserEquip"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/base/MessageCenter"),o=e("../../../core/net/PackageID"),r=e("../bag/UserBag"),s=e("../../entity/Actor"),u=e("../../entity/SubRoles"),l=e("../bag/ItemData"),c=e("../../base/EntityManager"),d=e("../tips/UserTips"),f=e("../zs/UserZs"),p=e("../../manager/GlobalConfig"),h=e("../../config/ItemConfig"),g=e("../../manager/TimerManager"),y=e("../forge/model/EquipPos"),v=function(e){function t(){var i=e.call(this)||this;return i.isFind=!1,a.default.compile(t),i.sysId=o.PackageID.Equip,i.regNetMsg(1,i.doUpDataEquip),i.regNetMsg(2,i.postSmeltEquipComplete),i.regNetMsg(3,i.doGrewupEquipResult),i.regNetMsg(4,i.doGrewupEquipResult),i.regNetMsg(5,i.postAddSpirit),i.regNetMsg(7,i.postAddSoul),i.regNetMsg(8,i.postZhiZunUpgrade),i.observe(r.default.ins().postItemChange,i.delayCheckHaveCan),i.observe(r.default.ins().postItemAdd,i.delayCheckHaveCan),i.observe(r.default.ins().postItemDel,i.delayCheckHaveCan),i.observe(r.default.ins().postHuntStore,i.delayCheckHaveCan),i.observe(s.default.ins().postLevelChange,i.delayCheckHaveCan),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.upgradeZhiZunEquip=function(e,t){var i=this.getBytes(8);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.prototype.postZhiZunUpgrade=function(e){var t=e.readShort(),i=e.readShort(),n=e.readShort();u.default.ins().getSubRoleByIndex(t).getEquipByIndex(i).soulLv=n},t.prototype.sendWearEquipment=function(e,t,i){var n=this.getBytes(1);n.writeDouble(e),n.writeShort(i),n.writeShort(t),this.sendToServer(n)},t.prototype.sendSmeltEquip=function(e,t){var i=this.getBytes(2);i.writeInt(e);var n=i.position;i.position+=4;for(var a=0,o=0;o<t.length;o++)null!=t[o]&&(i.writeDouble(t[o].handle),++a);return 0!=a&&(i.position=n,i.writeInt(a),this.sendToServer(i),!0)},t.prototype.doUpDataEquip=function(e){var t=e.readShort(),i=e.readShort(),n=new l.default;n.parser(e);var a=u.default.ins().getSubRoleByIndex(t);if(a.getEquipByIndex(i).item=n,this.postEquipChange(),0==i||2==i){var o=c.default.ins().getEntityByHandle(a.handle);o&&o.updateModel()}},t.prototype.postEquipChange=function(){},t.prototype.postSmeltEquipComplete=function(e){if(0!=e.readInt()){e.readInt();for(var t=e.readInt(),i=[],n=0;n<t;n++){var a={};a.itemId=e.readInt(),a.count=e.readInt(),i.push(a)}return i}d.default.ins().showTips("|C:0xf3311e&T:\u7194\u70bc\u5931\u8d25\uff01|")},t.contrastEquip=function(e,t){if(!e||0==e.handle)return t;if(!t||0==t.handle)return e;var i=e.point;return t.point>i?t:e},t.prototype.postEquipCheckList=function(e){return e},t.prototype.getEquipsByJobNPos=function(e,t){for(var i=u.default.ins().subRolesLen,n=0;n<i;n++){var a=u.default.ins().getSubRoleByIndex(n);if(a.job==e)return a.getEquipByIndex(t)}return null},t.prototype.getEquipConfigIDByPosAndQuality=function(e,t,i){void 0===i&&(i=1);for(var n=f.default.ins().lv||0,a=s.default.level,o=1e5+1+1e4*e+100*t+1e3*i,r=2;r<99;r++){var u=1e5+r+1e4*e+100*t+1e3*i,l=p.default.ItemConfig[u];if(void 0==l)break;var c=l.zsLevel?l.zsLevel:0,d=l.level?l.level:1;if(!(c<=n&&d<=a))break;o=u}return o},t.prototype.getEquipConfigIDByPosAndQualityByLegend=function(e,t,i,n){void 0===n&&(n=1);for(var a=f.default.ins().lv||0,o=s.default.level,r=1e5+1+1e4*t+100*i+1e3*n,l=u.default.ins().getSubRoleByIndex(e).getEquipByIndex(t),c=1;c<99;c++){var d=1e5+c+1e4*t+100*i+1e3*n,g=p.default.ItemConfig[d];if(void 0==g)break;var y=g.zsLevel?g.zsLevel:0,v=g.level?g.level:1;if(!(y<=a&&v<=o))break;if(l&&l.item.configID){var m=h.default.pointCalNumber(p.default.ItemConfig[d]);if(l.item.point<m){r=d;break}}else r=d}return r},t.prototype.getEquipConfigIDByPosAndQualityByGod=function(e,t,i,n){void 0===n&&(n=1);for(var a=f.default.ins().lv||0,o=s.default.level,r=1e5+1+1e4*t+100*i+1e3*n,u=e.getEquipByIndex(t),l=2;l<99;l++){var c=1e5+l+1e4*t+100*i+1e3*n,d=p.default.ItemConfig[c];if(void 0==d)break;var g=d.zsLevel?d.zsLevel:0,y=d.level?d.level:1;if(!(g<=a&&y<=o))break;if(u&&u.item.configID){var v=h.default.pointCalNumber(p.default.ItemConfig[c]);if(u.item.point<v){r=c;break}}else r=c}return r},t.prototype.checkEquipsIsWear=function(e){for(var t=u.default.ins().subRolesLen,i=0;i<t;i++){var n=u.default.ins().getSubRoleByIndex(i);if(n.job==h.default.getJob(e.itemConfig)||0==h.default.getJob(e.itemConfig))for(var a=n.getEquipLen(),o=0;o<a;o++)if(e.handle==n.getEquipByIndex(o).item.handle)return!0}return!1},t.prototype.doGrewupEquipResult=function(e){var t=e.readShort(),i=e.readInt(),n=e.readInt();4==h.default.getQuality(p.default.ItemConfig[n])?this.postMixEquip(t,i,n):this.postMixGodEquip(t,i,n)},t.prototype.postMixEquip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.prototype.postMixGodEquip=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e},t.prototype.sendGrewupEquip=function(e,t){var i=this.getBytes(3);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.prototype.sendMixEquip=function(e,t,i){var n=this.getBytes(4);n.writeShort(e),n.writeInt(t),n.writeInt(i),this.sendToServer(n)},t.prototype.delayCheckHaveCan=function(){g.default.ins().isExists(this.postCheckHaveCan,this)||g.default.ins().doTimer(60,1,this.postCheckHaveCan,this)},t.prototype.postCheckHaveCan=function(){for(var e=u.default.ins().subRolesLen,t=0;t<e&&(this.isFind=this.checkRedPoint(4,t),!this.isFind);t++);if(!this.isFind)for(var i=0;i<e;i++)for(t=0;t<8;t++)if(this.isFind=this.setOrangeEquipItemState(t,u.default.ins().getSubRoleByIndex(i)),this.isFind)return 1;if(!this.isFind){for(t=0;t<e&&(this.isFind=this.checkRedPoint(5,t),!this.isFind);t++);if(!this.isFind)for(i=0;i<e;i++)for(t=0;t<2;t++)if(this.isFind=this.setLegendEquipItemUpState(t>0?2:0,u.default.ins().getSubRoleByIndex(i)),this.isFind=this.setLegendEquipItemState(t>0?2:0,u.default.ins().getSubRoleByIndex(i))||this.isFind,this.isFind)return 1}return this.isFind||(this.isFind=Boolean(r.default.ins().getHuntGoods(0).length)),this.isFind?1:0},t.prototype.checkRedPointEx=function(e,t){for(var i=r.default.ins().getBagEquipsByQuality(e),n=i.length,a=0;a<n;a++){var o=void 0,s=void 0;if(!isNaN(t)&&(o=h.default.getJob(i[a].itemConfig),(s=u.default.ins().getSubRoleByIndex(t)).job!=o))return!1;if(!s)return!1;var l=this.getEquipConfigIDByPosAndQualityByGod(s,h.default.getSubType(i[a].itemConfig),h.default.getQuality(i[a].itemConfig)),c=p.default.ItemConfig[l];if(c){var d=i[a].itemConfig.zsLevel?i[a].itemConfig.zsLevel:0,f=i[a].itemConfig.level?i[a].itemConfig.level:0;if(1e4*(c.zsLevel?c.zsLevel:0)+(c.level?c.level:0)>1e4*d+f){if(4!=e)return!0;var g=r.default.ins().getBagGoodsCountById(0,l),y=p.default.LegendComposeConfig[l];if(g>=(y?y.count:0))return!0}}}return!1},t.prototype.checkRedPointExOrg=function(e,t){if(r.default.ins().getBagEquipsByQuality(e).length)this.checkRedPoint(e,t);else if(isNaN(t)){if(this.IsEnoughChip(t))return!0}else for(var i=0;i<u.default.ins().subRolesLen;i++)if(this.IsEnoughChip(i))return!0;return!1},t.prototype.IsEnoughChip=function(e){for(var t=[y.EquipPos.WEAPON,y.EquipPos.CLOTHES],i=u.default.ins().getSubRoleByIndex(e),n=0;n<t.length;n++){var a=this.getMixConfig(i.index,t[n]);if(a){var o=a.count,s=a.itemId;if(r.default.ins().getBagGoodsCountById(0,s)>=o)return!0}}return!1},t.prototype.getMixConfig=function(e,t){var i=u.default.ins().getSubRoleByIndex(e),n=this.getEquipConfigIDByPosAndQualityByLegend(i.index,t,5);return p.default.LegendComposeConfig[n]},t.prototype.checkRedPoint=function(e,t){for(var i=r.default.ins().getBagEquipsByQuality(e),n=i.length,a=0;a<n;a++){var o=void 0,s=void 0;if(!isNaN(t)&&(o=h.default.getJob(i[a].itemConfig),(s=u.default.ins().getSubRoleByIndex(t)).job!=o))return!1;if(!s)return!1;var l=this.getEquipConfigIDByPosAndQualityByGod(s,h.default.getSubType(i[a].itemConfig),h.default.getQuality(i[a].itemConfig)),c=p.default.ItemConfig[l];if(c){var d=i[a].itemConfig.zsLevel?i[a].itemConfig.zsLevel:0,f=i[a].itemConfig.level?i[a].itemConfig.level:0;if(1e4*(c.zsLevel?c.zsLevel:0)+(c.level?c.level:0)>1e4*d+f)return!0}}return!1},t.prototype.setOrangeEquipItemState=function(e,i){var n,a=i.getEquipByIndex(e);n=a.item.itemConfig&&h.default.getQuality(a.item.itemConfig)<4?null:p.default.ItemConfig[a.item.configID+1];var o=0,u=0;if(a.item.itemConfig&&4==h.default.getQuality(a.item.itemConfig)&&a.item.itemConfig.zsLevel>=13)return!1;if(a.item.itemConfig&&5==h.default.getQuality(a.item.itemConfig))return!1;if(null!=n&&(n.level>s.default.level||n.zsLevel>f.default.ins().lv))return!1;if(void 0!=n&&0!=a.item.handle&&4==h.default.getQuality(a.item.itemConfig)&&1!=a.item.itemConfig.level&&-1==r.default.fitleEquip.indexOf(a.item.configID)){var l=p.default.LegendLevelupConfig[a.item.configID];l&&(o=l.count,u=l.itemId)}else{var c=t.ins().getEquipConfigIDByPosAndQualityByGod(i,e,4,i.job),d=i.getEquipByIndex(e);if(d&&d.item.configID){var g=h.default.pointCalNumber(p.default.ItemConfig[c]);if(d.item.point>g)return!1}var y=p.default.LegendComposeConfig[c];y&&(o=y.count,u=y.itemId)}return r.default.ins().getBagGoodsCountById(0,u)>=o},t.prototype.setLegendEquipItemState=function(e,t){var i=t.getEquipByIndex(e),n=null,a=h.default.getQuality(i.item.itemConfig);if(i.item.itemConfig&&5==a){if(i.item.itemConfig.zsLevel>=10)return!1;n=p.default.ItemConfig[i.item.configID+1]}else n=null;var o=0,s=0;if(null!=n&&n.zsLevel>f.default.ins().lv)return!1;if(null!=n&&0!=i.item.handle&&5==a){var u=p.default.LegendLevelupConfig[i.item.configID];o=u.count,s=u.itemId}else{var l=this.getEquipConfigIDByPosAndQualityByLegend(t.index,e,5),c=p.default.LegendComposeConfig[l];if(!c)return!1;o=c.count,s=c.itemId}var d=r.default.ins().getBagGoodsCountById(0,s);return f.default.ins().lv>=3&&d>=o},t.prototype.setLegendEquipItemUpState=function(e,t){var i=t.getEquipByIndex(e),n=p.default.ItemConfig[i.item.configID+1],a=h.default.getQuality(i.item.itemConfig);if(void 0==n&&0!=i.item.handle&&5==a)return!1;if(void 0!=n&&0!=i.item.handle&&5==a){var o=t.getEquipByIndex(e).item.configID,u=p.default.ItemConfig[o+1];if(u.level>s.default.level||u.zsLevel>f.default.ins().lv)return!1;var l=p.default.LegendLevelupConfig[o];return r.default.ins().getBagGoodsCountById(0,l.itemId)>=l.count}return!1},t.prototype.getLegendEquipItemUpMax=function(e){for(var t=0;t<8;t++)if(0==t||2==t){var i=u.default.ins().getSubRoleByIndex(e).getEquipByIndex(t);if(!i)return!0;var n=p.default.ItemConfig[i.item.configID+1],a=h.default.getQuality(i.item.itemConfig);if(void 0!=n||0==i.item.handle||5!=a)return!1}return!0},t.prototype.requestAddSpirit=function(e,t,i){var n=this.getBytes(5);n.writeShort(e),n.writeShort(t),n.writeShort(i.length);for(var a=0;a<i.length;a++)n.writeDouble(i[a]);this.sendToServer(n)},t.prototype.postAddSpirit=function(e){var t=e.readShort(),i=e.readShort(),n=e.readShort(),a=e.readInt(),o=u.default.ins().getSubRoleByIndex(t).getEquipByIndex(i);o.spiritLv=n,o.spiritExp=a},t.prototype.requestAddSoul=function(e,t){var i=this.getBytes(7);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.prototype.postAddSoul=function(e){var t=e.readShort(),i=e.readShort(),n=e.readShort();u.default.ins().getSubRoleByIndex(t).getEquipByIndex(i).soulLv=n},t.FOEGE_MAX=8,t}(n.default);i.default=v,window.GameSystem.push(v.ins.bind(v)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../config/ItemConfig":"ItemConfig","../../entity/Actor":"Actor","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../bag/ItemData":"ItemData","../bag/UserBag":"UserBag","../forge/model/EquipPos":"EquipPos","../tips/UserTips":"UserTips","../zs/UserZs":"UserZs"}],UserExpGold:[function(e,t,i){"use strict";cc._RF.push(t,"b095coN92lFybyfMT9wMCiU","UserExpGold"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../../manager/TimerManager"),s=e("../../manager/GlobalConfig"),u=e("../vip/UserVip"),l=e("../../entity/Actor"),c=e("../tips/UserTips"),d=function(e){function t(){var i=e.call(this)||this;return i.sysId=a.PackageID.ExpGold,o.default.compile(t),i.regNetMsg(1,i.doRemainTimeAndIndex),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.doRemainTimeAndIndex=function(e){this.remainTime=e.readUnsignedInt(),this.index=e.readInt(),this.postExpUpdate()},t.prototype.postExpUpdate=function(){},t.prototype.sendBuyExp=function(){this.sendBaseProto(2)},Object.defineProperty(t.prototype,"remainTime",{get:function(){return this._remainTime},set:function(e){this._remainTime!=e&&(this._remainTime=e,r.default.ins().remove(this.downTime,this),r.default.ins().doTimer(1e3,this._remainTime,this.downTime,this))},enumerable:!0,configurable:!0}),t.prototype.downTime=function(){this._remainTime-=1,this._remainTime<=0&&this.postExpUpdate()},t.prototype.getIndexNeedGold=function(){return s.default.RefinesystemExpConfig[this.index].yuanBao},t.prototype.checkIsOver=function(){return!s.default.RefinesystemExpConfig[this.index]},t.prototype.checkIsCanPlay=function(){if(u.default.ins().lv<3)c.default.ins().showTips("|C:0xf3311e&T:vip3\u53ef\u70bc\u5236|");else{var e=s.default.RefinesystemExpConfig[this.index].yuanBao;l.default.yb>=e?t.ins().sendBuyExp():(c.default.ins().showTips("|C:0xf3311e&T:\u5143\u5b9d\u4e0d\u8db3|"),ViewManager.ins().open(ChargeFirstWin))}},t.prototype.isOpenBtn=function(){return l.default.level>=60&&this.remainTime>0&&!this.checkIsOver()},t.prototype.checkUpLevel=function(){var e=l.default.level,t=s.default.RefinesystemExpConfig[this.index].exp,i=s.default.ExpConfig[e].exp-l.default.exp;if(t>=i)for(++e,t-=i;e<150&&!(t-(i=s.default.ExpConfig[e].exp)<0);e++)t-=i;return e},t}(n.default);i.default=d,window.GameSystem.push(d.ins.bind(d)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../tips/UserTips":"UserTips","../vip/UserVip":"UserVip"}],UserFb2:[function(e,t,i){"use strict";cc._RF.push(t,"450f3BTrHZFZrQVjoBdzEsH","UserFb2"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("./SkyLevelModel"),s=function(e){function t(){var i=e.call(this)||this;return i.sysId=a.PackageID.FbChallenge,o.default.compile(t),i.regNetMsg(1,i.postUpDataInfo),i.regNetMsg(2,i.postRewardStatu),i.regNetMsg(3,i.doGetFbTime),i.regNetMsg(4,i.postGetReward),i.regNetMsg(5,i.postLotteryReward),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendChallenge=function(){this.sendBaseProto(1)},t.prototype.sendrequestDayReward=function(){this.sendBaseProto(2)},t.prototype.postUpDataInfo=function(e){r.default.ins().setCruLevelInfo(e.readInt()),r.default.ins().dayReward=e.readShort(),r.default.ins().lotteryIndexs=e.readInt(),r.default.ins().lotteryUseTimes=e.readInt()},t.prototype.postRewardStatu=function(e){var t=e.readShort();r.default.ins().dayRewardList=[];for(var i=0;i<t;i++){var n=e.readInt(),a=e.readInt(),o=e.readInt();r.default.ins().dayRewardList[i]=[n,a,o]}r.default.ins().rewardTimes=Math.ceil((t-12)/12)},t.prototype.doGetFbTime=function(e){r.default.ins().setLimtTimeDown(e.readShort())},t.prototype.sendGetDayReward=function(){this.sendBaseProto(4)},t.prototype.sendBeginLottery=function(){this.sendBaseProto(5)},t.prototype.sendGetReward=function(){this.sendBaseProto(6)},t.prototype.postLotteryReward=function(e){r.default.ins().lotteryUseTimes=e.readInt(),r.default.ins().lotteryAwardIndex=e.readInt()},t.prototype.postGetReward=function(e){},t}(n.default);i.default=s,s.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","./SkyLevelModel":"SkyLevelModel"}],UserFb:[function(e,t,i){"use strict";cc._RF.push(t,"81718f98ChG1p60GX0qQgJq","UserFb"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../gamescene/GameLogic"),r=e("../../../core/base/MessageCenter"),s=e("../../manager/GlobalConfig"),u=e("./WaveDropData"),l=e("../../entity/Actor"),c=e("../../entity/SubRoles"),d=e("../vip/UserVip"),f=e("../../map/GameMap"),p=e("./FbModel"),h=e("../guard/model/GuardWeaponModel"),g=e("../../entity/EntityModel"),y=e("../../../core/base/AttributeType"),v=e("../../base/EntityType"),m=e("../../ai/RoleAI"),b=e("../../base/EntityManager"),_=e("../encounter/Encounter"),C=e("../tips/UserTips"),I=e("../../entity/CharRole"),T=e("../guard/model/GuardCopyInfo"),S=e("../../manager/TimerManager"),R=e("../server/GameServer"),B=e("../../../core/utils/DateUtils"),M=e("../zs/UserZs"),E=e("../recharge/Recharge"),D=e("../city/CityCC"),A=e("../boss/UserBoss"),P=e("../bag/ItemData"),w=e("../../config/ItemConfig"),L=e("../../consts/MoneyConst"),k=e("../activity/model/RewardData"),F=e("../dieGuide/DieGuide"),G=e("../fbTeam/vo/TeamFuBenRoleVo"),x=e("../../../core/base/ResultManager"),N=e("../gamescene/help/DropHelp"),U=e("../../../core/base/ViewManager"),O=e("../offlinereward/EffectivenessTip"),H=(e("./SkyLevelModel"),e("../../consts/SystemConst")),j=e("../opensystem/OpenSystem"),W=e("../playfun/PlayFun"),V=e("../hint/hint"),q=e("../chat/Chat"),Z=e("../chat/model/ChatSystemData"),Y=function(e){function t(){var i=e.call(this)||this;return i.fbModel={},i._groupID=1,i._guanqiaID=-1,i.rewards=[],i.eliteRewards=[],i.maxLen=0,i.guanqiaReward=0,i.worldReward=0,i.worldGuanQias=[],i.worldGuanQiaHasReceive=[],i.currentEnergy=0,i.canChallengGuanQia=!0,i.encounterPos=[],i.expMonterCount=0,i.expMonterCountKill=0,i.isQuite=!0,i.guideBossKill=0,i.showAni=!0,i.showAutoPk=-1,i.showAutoPk2=-1,i.firstAutoGuilder=!1,i.fbExpTotal=0,i.tfRoomID=0,i.tfPassID=0,i._tfInviteTime=0,i.showTfRed=!0,i.fbRings={buyTime:0,challengeTime:0,canTakeAward:!1},i.guanqiaMonster=[],i.fbConfig={},i.mijingFingfen=4,i.mijingUseTime=0,i.pkGqboss=!1,i.exp=0,i.fbDataList=[],i.initPos=!0,i.sysId=a.PackageID.Guanqia,r.default.compile(t),i.regNetMsg(4,i.doRoleAllDie),i.regNetMsg(10,i.postFbInfoInit),i.regNetMsg(11,i.postUpDataInfo),i.regNetMsg(13,i.postFbTime),i.regNetMsg(14,i.doBossBoxNum),i.regNetMsg(16,i.postFbExpInfo),i.regNetMsg(17,i.postFbExpTotal),i.regNetMsg(18,i.doGuideFbAliveTime),i.regNetMsg(21,i.postFbRingInfo),i.regNetMsg(1,i.postGuanqiaInfo),i.regNetMsg(2,i.doWaveData),i.regNetMsg(3,i.doBossResult),i.regNetMsg(5,i.doGuanqiaReward),i.regNetMsg(6,i.doGuanqiaWroldReward),i.regNetMsg(12,i.doOfflineReward),i.regNetMsg(24,i.postGuardLeftTime),i.regNetMsg(25,i.postGuardInfo),i.regNetMsg(27,i.postGuardUseSkill),i.regNetMsg(28,i.postGuardCopyInfo),i.regNetMsg(29,i.postBossDrop),i.regNetMsg(30,i.postCreateTFRoomSuccess),i.regNetMsg(31,i.postEnterTFRoomSuccess),i.regNetMsg(32,i.exitTFRoom),i.regNetMsg(33,i.postFTRoomChange),i.regNetMsg(34,i.postFTRoomPassInfo),i.regNetMsg(35,i.doTeamFuBenEnd),i.regNetMsg(36,i.doTeamFuBenRelive),i.regNetMsg(37,i.postTeamFuBenRank),i.regNetMsg(38,i.postTeamFbFlowarRecords),i.regNetMsg(39,i.teamFbSysInviteInfo),i.regNetMsg(40,i.postGuardWeaponLogs),i.observe(o.default.ins().postEnterMap,i.onChangeScene),i.observe(o.default.ins().postHpChange,i.recordKill),i}return __extends(t,e),Object.defineProperty(t.prototype,"rCount",{get:function(){return this.fbConfig.rCount||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"goldEff",{get:function(){return this.fbConfig.goldEff||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"expEff",{get:function(){return this.fbConfig.expEff||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"zyPos",{get:function(){return this.fbConfig.zyPos},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"energy",{get:function(){return this.fbConfig.energy||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveEnergy",{get:function(){return this.fbConfig.waveEnergy||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveMonsterCount",{get:function(){return this.fbConfig.waveMonsterCount||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"waveMonsterId",{get:function(){return this.fbConfig.waveMonsterId||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"outPos",{get:function(){return this.fbConfig.outPos||{x:0,y:0,a:0}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rPos",{get:function(){return this.fbConfig.rPos||[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"eliteMonsterId",{get:function(){return this.fbConfig.eliteMonsterId||0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"wanderpercent",{get:function(){return void 0==this.fbConfig.wanderpercent?5e3:this.fbConfig.wanderpercent},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},t.prototype.getBossDrop=function(e,t){var i=this.getBytes(29);i.writeByte(e),i.writeDouble(t),this.sendToServer(i)},t.prototype.postBossDrop=function(e){for(var t=this,i=e.readByte(),n=e.readDouble(),a=e.readByte(),o=0;o<a;o++){var r=new k.default;r.type=e.readInt(),r.id=e.readInt(),r.count=e.readInt(),0==r.type&&1!=r.id&&2!=r.id&&r.id!=L.MoneyConst.rune||N.default.addDrop([r])}S.default.ins().doTimerDelay(500,100,1,function(){t.getBossDrop(i,n)},this)},t.prototype.postGuardLeftTime=function(e){h.default.ins().leftTime=e.readUnsignedInt()},t.prototype.challengeGuard=function(){var e=this.getBytes(24);this.sendToServer(e)},t.prototype.callGuardBoss=function(){var e=this.getBytes(26);this.sendToServer(e)},t.prototype.guardUseSkill=function(e){var t=this.getBytes(27);t.writeByte(e),this.sendToServer(t)},t.prototype.postGuardInfo=function(e){var t=e.readByte();h.default.ins().challengeTimes=t,h.default.ins().isShowSweep=1==e.readByte()},t.prototype.postGuardUseSkill=function(e){return e.readByte()},t.prototype.postGuardCopyInfo=function(e){var t=h.default.ins().guardCopyInfo||new T.default;t.parser(e.readByte(),e.readInt(),e.readByte(),e.readInt(),e.readByte(),e.readInt()),h.default.ins().guardCopyInfo=t},t.prototype.recordKill=function(e){var t=e[0],i=e[1];t instanceof I.default||i<=0&&(this.expMonterCountKill+=1)},t.prototype.initLogin=function(){if(s.default.DailyFubenConfig)for(var e in this.fbDataList.length=0,s.default.DailyFubenConfig){var t=s.default.DailyFubenConfig[e];t.bossId||this.fbDataList.push(t.id)}},t.prototype.onChangeScene=function(){this.rewards=[],this.eliteRewards=[],this.expMonterCountKill=0,this.expMonterCount=0},t.prototype.getFbDataById=function(e){return this.fbModel[e]},t.prototype.autoPk=function(){f.default.sceneInMain()&&(_.default.ins().isEncounter()?C.default.ins().showTips("|C:0xf3311e&T:\u6b63\u5728\u6311\u6218\u9644\u8fd1\u7684\u4eba|"):b.default.ins().getNoDieRole()&&(m.default.ins().stop(),m.default.ins().clearAIList(),this.postPlayWarm(1),t.ins().sendPKBoss(),t.ins().pkGqboss=!0))},t.prototype.postAddEnergy=function(){this.currentEnergy+=Math.ceil(this.waveEnergy/this.waveMonsterCount),this.currentEnergy>t.ins().energy&&(this.currentEnergy=t.ins().energy)},t.prototype.postPlayWarm=function(e){return e},t.prototype.hasCount=function(){if(s.default.DailyFubenConfig)for(var e in s.default.DailyFubenConfig){var t=s.default.DailyFubenConfig[e],i=this.fbModel[t.id];if(i&&!t.bossId){if(this.fbModel[i.fbID].getCount()>0)return!0;if(F.default.ins().dieFbRedPoint(this.fbModel[i.fbID].getResetCount(),t.id))return!0}}return!1},t.prototype.doRoleAllDie=function(e){x.default.ins().create(f.default.fbType,0)},t.prototype.postFbInfoInit=function(e){for(var t,i=e.readShort(),n=0;n<i;n++)(t=new p.default).parser(e),this.fbModel[t.fbID]=t},t.prototype.sendCallBossPlay=function(e){var t=this.getBytes(12);t.writeInt(e),this.sendToServer(t)},t.prototype.sendChallenge=function(e){var t=this.getBytes(10);t.writeInt(e),this.sendToServer(t)},t.prototype.postUpDataInfo=function(e){var t=e.readInt();e.position-=4,this.fbModel[t].parser(e)},t.prototype.sendAddCount=function(e,t){void 0===t&&(t=0);var i=this.getBytes(11);i.writeInt(e),i.writeByte(t),this.sendToServer(i)},t.prototype.postFbTime=function(e){return this.curFbID=e.readInt(),this.curFbLeftTime=e.readInt(),[this.curFbID,this.curFbLeftTime]},t.prototype.doBossBoxNum=function(e){this.bossCallNum=e.readShort()},t.prototype.postFbExpInfo=function(e){return this.fbExp=this.fbExp||{},this.fbExp.useTime=e.readByte(),this.fbExp.sdTime=e.readByte(),this.fbExp.cid=e.readByte(),this.fbExp.sid=e.readByte(),this.fbExp},t.prototype.postFbExpTotal=function(e){return this.fbExpTotal=e.readInt(),this.fbExpTotal},t.prototype.fbExpRed=function(){return!!(l.default.level>=s.default.ExpFubenBaseConfig.openLv&&(this.fbExp.useTime<s.default.ExpFubenBaseConfig.freeCount+(s.default.ExpFubenBaseConfig.vipCount[d.default.ins().lv]||0)||this.fbExp.cid||this.fbExp.sid))},t.prototype.sendIntoGuideFb=function(e){var t=this.getBytes(18);t.writeInt(e),this.sendToServer(t)},t.prototype.sendGuideFbAttacker=function(){this.sendBaseProto(19)},t.prototype.sendGuideFbAlive=function(){this.sendBaseProto(20)},t.prototype.doGuideFbAliveTime=function(e){A.default.ins().postRemainTime(e)},t.prototype.postFbRingInfo=function(e){this.fbRings.buyTime=e.readShort(),this.fbRings.challengeTime=e.readShort(),this.fbRings.canTakeAward=e.readBoolean()},t.prototype.sendRingSweep=function(e){var t=this.getBytes(41);t.writeShort(e),this.sendToServer(t)},t.prototype.sendShSweep=function(e){var t=this.getBytes(42);t.writeByte(e),this.sendToServer(t)},t.prototype.parser=function(e){var i=e.readInt();this.guanqiaID=i,this.firstAutoGuilder&&this.guanqiaID==t.AUTO_GUANQIA&&(this.firstAutoGuilder=!1,t.ins().setAutoPk2())},t.prototype.parser1=function(e){this.exp=e.readInt();for(var t=e.readInt(),i=0;i<t;i++){var n=new u.default;n.parser(e),this.rewards.push(n)}},Object.defineProperty(t.prototype,"guanqiaID",{get:function(){return this._guanqiaID},set:function(e){if(this._guanqiaID!=e){for(var t in this._guanqiaID=e,this.bossIsChallenged=!1,s.default.WorldRewardConfig)if(this._guanqiaID<=s.default.WorldRewardConfig[t].needLevel){this._groupID=s.default.WorldRewardConfig[t].groupId;break}this.postGuanKaIdChange()}for(var i in this.encounterPos=[],this.zyPos)this.encounterPos.push(parseInt(i))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"groupID",{get:function(){return this._groupID},enumerable:!0,configurable:!0}),t.prototype.isReceiveBox=function(e){return-1!=this.worldGuanQias.indexOf(e)},t.prototype.isGetReceiveBox=function(e){return-1!=this.worldGuanQiaHasReceive.indexOf(e)},t.prototype.isShowBossPK=function(){return-1!=this.guanqiaID},t.prototype.getRewardsPop=function(){return this.rewards},t.prototype.getMapReward=function(){for(var e=1;s.default.WorldRewardConfig[e];){if(!this.isGetReceiveBox(e)&&s.default.WorldRewardConfig[e].needLevel<t.ins().guanqiaID)return void this.sendGuanqiaWroldReward(e);e++}},t.prototype.getCurrentReward=function(){for(var e=1;s.default.WorldRewardConfig[e];){var i=s.default.WorldRewardConfig[e];this.isGetReceiveBox(e),t.ins().guanqiaID;if(!this.isGetReceiveBox(e)&&t.ins().guanqiaID>i.needLevel)return i.rewards;e++}return null},t.prototype.getNextReward=function(){for(var e=1;s.default.WorldRewardConfig[e];){var i=s.default.WorldRewardConfig[e];if(t.ins().guanqiaID<=i.needLevel)return i.rewards;e++}return null},t.prototype.getNextNeedChapter=function(){for(var e=1;s.default.WorldRewardConfig[e];){var i=s.default.WorldRewardConfig[e];if(t.ins().guanqiaID<=i.needLevel)return i.needLevel-t.ins().guanqiaID+1;e++}return 0},t.prototype.getDiffChapter=function(){for(var e=1;s.default.WorldRewardConfig[e];){var i=s.default.WorldRewardConfig[e];if(t.ins().guanqiaID<=i.needLevel){var n=s.default.WorldRewardConfig[e-1];return i.needLevel-n.needLevel}e++}return 0},t.prototype.getNewChapter=function(){for(var e=1;s.default.WorldRewardConfig[e];){var i=s.default.WorldRewardConfig[e];if(t.ins().guanqiaID<=i.needLevel){var n=e-1;return n=n||1,s.default.WorldRewardConfig[n]}e++}return null},t.prototype.getChipByGuanQia=function(){for(var e in s.default.WorldRewardConfig){var t=s.default.WorldRewardConfig[e];if(this.guanqiaID<=t.needLevel)return t.rewards[0].id}return 0},t.prototype.postGuanqiaInfo=function(e){var t=this.guanqiaID;this.parser(e),this.goldEffLast=e.readInt(),this.expEffLast=e.readInt(),this.fbConfig=JSON.parse(e.readString()),-1!=t&&this.guanqiaID!=t&&(this.currentEnergy=0,U.default.ins().open(O.default)),this.guanqiaMonster=JSON.parse(e.readString()),0==f.default.fubenID&&o.default.ins().createGuanqiaMonster()},t.prototype.postGuanKaIdChange=function(){},t.prototype.sendGetReward=function(e){var t=this.getBytes(1);t.writeByte(e?1:0),this.sendToServer(t)},t.prototype.sendPKBoss=function(){var e=this,t=this.getBytes(2),i=b.default.ins().getNoDieRole();S.default.ins().doTimer(500,1,function(){t.writeInt(Math.floor(i.x)),t.writeInt(Math.floor(i.y)),e.sendToServer(t)},this)},t.prototype.doWaveData=function(e){this.exp=e.readInt();for(var t=e.readInt(),i=[],n=0;n<t;n++){var a=new u.default;a.parser(e),i.push(a)}e.readByte()>0?(this.eliteRewards.push(i),this.eliteRewards.length>5&&this.eliteRewards.shift(),o.default.ins().createGuanqiaMonster(!1,!0)):this.rewards=this.rewards.concat(i)},t.prototype.doBossResult=function(e){for(var i,n=e.readBoolean(),a=e.readShort(),o=e.readShort(),r=[],u=0;u<o;u++)(i=new k.default).parser(e),r.push(i);if(n){for(var l=c.default.ins().subRolesLen,d=void 0,p=0;p<l;p++)(d=b.default.ins().getMainRole(p))&&d.resetStand();for(var h=0;h<r.length;h++)if(0==(i=r[h]).type&&1!=i.id&&2!=i.id&&i.id!=L.MoneyConst.rune||a==t.FB_TYPE_GUARD_WEAPON||N.default.addDrop([i]),1==i.type){var g=s.default.ItemConfig[i.id];if(7==w.default.getType(g))(new P.default).configID=i.id}}else t.ins().pkGqboss=!1,f.default.fbType==t.FB_TYPE_GUANQIABOSS&&W.default.ins().closeAuto(),x.default.ins().create(a,0);f.default.fbType==t.FB_TYPE_GUANQIABOSS&&V.default.ins().postKillBossEx(t.ins().guanqiaID)},t.prototype.tempFunc=function(){var e=b.default.ins().getNoDieRole();if(e){var i=Math.floor(e.x/f.default.CELL_SIZE),n=Math.floor(e.y/f.default.CELL_SIZE),a=this.outPos.x,r=this.outPos.y;i==a&&n==r&&(S.default.ins().remove(this.tempFunc,this),o.default.ins().removeOutEff(),this.initPos=!1,t.ins().pkGqboss=!1,t.ins().sendExitFb(),V.default.ins().postSeceneIn())}else S.default.ins().remove(this.tempFunc,this)},t.prototype.sendGetBossReward=function(){this.sendBaseProto(3)},t.prototype.sendExitFb=function(){this.sendBaseProto(4)},t.prototype.sendGetAward=function(){this.sendBaseProto(5)},t.prototype.doGuanqiaReward=function(e){this.guanqiaReward=e.readShort()+1,this.postZhangJieAwardChange(),this.postGuanKaIdChange(),this.postGuanqiaWroldReward()},t.prototype.postZhangJieAwardChange=function(){},t.prototype.sendGuanqiaWroldReward=function(e){var t=this.getBytes(6);t.writeInt(e),this.sendToServer(t)},t.prototype.doGuanqiaWroldReward=function(e){var t=e.readInt(),i=0,n=0;this.worldGuanQias=[],this.worldGuanQiaHasReceive=[];for(var a=0;a<t;a++)n=a+1,0==(i=e.readInt())?this.worldGuanQias.push(n):1==i&&this.worldGuanQiaHasReceive.push(n),0!=i&&1!=i||(this.worldReward=n);this.postGuanqiaWroldReward()},t.prototype.postGuanqiaWroldReward=function(){},t.prototype.doOfflineReward=function(e){var t=[];t[0]=e.readInt(),t[1]=e.readInt(),t[2]=e.readInt(),t[3]=e.readInt(),t[4]=e.readInt();for(var i=e.readInt(),n=[],a=0;a<i;a++){var o=new Object;o.type=e.readInt(),o.exp=e.readInt(),o.gold=e.readInt(),n.push(o)}t[5]=n,i=e.readByte();var r=[];for(a=0;a<i;a++){var s={};s.id=e.readByte(),s.count=e.readInt(),r.push(s)}},t.prototype.getWorldGuanQia=function(){return this.worldGuanQias.length>0?this.worldGuanQias[this.worldGuanQias.length-1]:0},t.prototype.getWorldGuanQiaBox=function(){var e=this.worldGuanQias.length;if(e>0)for(var i=void 0,n=0;n<e;n++)if(i=this.worldGuanQias[n],t.ins().isReceiveBox(i))return i;return this.worldReward+1},t.prototype.sendKillMonster=function(e){var t=this.getBytes(13);t.writeInt(e),this.sendToServer(t)},t.prototype.sendChallengeExpFb=function(){this.sendBaseProto(14)},t.prototype.sendSaodang=function(){var e=this.getBytes(15);this.sendToServer(e)},t.prototype.sendGetAwardMul=function(e,t){var i=this.getBytes(16);i.writeByte(e),i.writeByte(t),this.sendToServer(i)},t.prototype.sendChallengeFbRing=function(){this.sendBaseProto(22)},t.prototype.sendFbRingTakeAward=function(e){var t=this.getBytes(23);t.writeShort(e),this.sendToServer(t)},t.prototype.checkGuanqiaIconShow=function(){return j.default.ins().checkSysOpen(H.SystemType.CHALLENGE)},t.prototype.postExpFly=function(e,t,i){return void 0===t&&(t=1),void 0===i&&(i=10),[e,t,i]},t.prototype.getExpFbId=function(){var e=s.default.ExpFubenConfig,t=l.default.level,i=0;for(var n in e){if(e[n].slv>t)break;i=+n}return i},t.prototype.checkInFB=function(){return f.default.fbType==t.FB_TYPE_GUANQIABOSS||t.ins().pkGqboss?(C.default.ins().showCenterTips("|C:0xf3311e&T:\u5f53\u524d\u6b63\u5728\u6311\u6218\u5173\u5361\u4e2d|"),!0):0!=f.default.fubenID&&!D.default.ins().isCity&&(C.default.ins().showCenterTips("|C:0xf3311e&T:\u6b63\u5728\u6311\u6218\u526f\u672c\u4e2d\uff0c\u8bf7\u7a0d\u540e\u518d\u8bd5|"),!0)},t.prototype.createMonster=function(e){var i=this.guanqiaMonster[e],n=t.createModel(i);return n.name=i.name,n._avatar=+i.avatar,n._scale=i.scale,n.wanderrange=i.wanderrange,n.wandertime=i.wandertime,n.effect=i.effect,n._dirNum=i.dirNum,n},t.createModel=function(e){var t=new g.default;return t.type=v.EntityType.Monster,t.configID=e.id,t.setAtt(y.AttributeType.atHp,e.hp),t.setAtt(y.AttributeType.atMaxHp,e.hp),t.setAtt(y.AttributeType.atAttack,e.atk),t.setAtt(y.AttributeType.atDef,e.def),t.setAtt(y.AttributeType.atRes,e.res),t.setAtt(y.AttributeType.atCrit,e.crit),t.setAtt(y.AttributeType.atTough,e.tough),t.setAtt(y.AttributeType.atMoveSpeed,e.ms||1e3),t.setAtt(y.AttributeType.atAttackSpeed,e.as||1e3),t.setAtt(y.AttributeType.atPenetrate,e.penetRate||0),t},t.getPersonalBossFbIds=function(){var e=[];for(var t in s.default.DailyFubenConfig){var i=s.default.DailyFubenConfig[t];i&&i.bossId&&e.push(i)}return e},t.isCanChallenge=function(){for(var e,i=this.getPersonalBossFbIds(),n=i.length,a=0;a<n;a++)if(e=i[a],t.ins().getFbDataById(e.id)&&t.ins().getFbDataById(e.id).getCount()>0)if(e.monthcard){if(E.default.ins().monthDay>0)return!0}else if(e.privilege){if(E.default.ins().getIsForeve())return!0}else if(e.specialCard){if(E.default.ins().franchise)return!0}else if(e.zsLevel>0){if(M.default.ins().lv>=e.zsLevel)return!0}else if(l.default.level>=e.levelLimit)return!0;return!1},t.prototype.setAutoPk=function(){-1==this.showAutoPk&&(this.showAutoPk=0,this.postAutoPk())},t.prototype.postAutoPk=function(){},t.prototype.setAutoPk2=function(){-1==this.showAutoPk2&&(this.showAutoPk2=0,this.postAutoPk2())},t.prototype.postAutoPk2=function(){},t.prototype.sendCreateTFRoom=function(){var e=this.getBytes(30);this.sendToServer(e)},t.prototype.postCreateTFRoomSuccess=function(e){this.tfRoomID=e.readInt();e.readInt()},t.prototype.sendEnterTFRoom=function(e){var t=this.getBytes(31);t.writeInt(e),this.sendToServer(t)},t.prototype.postEnterTFRoomSuccess=function(e){switch(e.readByte()){case 0:e.readInt();this.tfRoomID=e.readInt();break;case 1:C.default.ins().showTips("\u6bcf\u5468"+B.default.WEEK_CN[s.default.TeamFuBenBaseConfig.closeTime[0]]+s.default.TeamFuBenBaseConfig.closeTime[1]+"\u540e\u4e0d\u80fd\u6311\u6218");break;case 2:C.default.ins().showTips("\u5728\u526f\u672c\u5185\u4e0d\u80fd\u8fdb\u5165");break;case 3:C.default.ins().showTips("\u5df2\u7ecf\u5728\u522b\u7684\u623f\u95f4");break;case 4:C.default.ins().showTips("\u8981\u8fdb\u5165\u7684\u623f\u95f4\u4e0d\u5b58\u5728");break;case 5:C.default.ins().showTips("\u5f53\u524d\u901a\u5173\u7684\u5c42\u7ea7\u4e0d\u591f");break;case 6:C.default.ins().showTips("\u914d\u7f6e\u9519\u8bef,\u4e0d\u5b58\u5728\u8be5\u623f\u95f4\u914d\u7f6e");break;case 7:C.default.ins().showTips("\u623f\u95f4\u5df2\u7ecf\u6ee1\u4eba")}},t.prototype.sendExitTFRoom=function(){this.sendBaseProto(32)},t.prototype.exitTFRoom=function(e){switch(e.readByte()){case 1:break;case 2:C.default.ins().showTips("\u60a8\u88ab\u961f\u957f\u8e22\u51fa\u623f\u95f4");break;case 3:C.default.ins().showTips("\u961f\u957f\u89e3\u6563\u4e86\u623f\u95f4")}this.tfRoomID=0},t.prototype.sendBeginTF=function(){this.sendBaseProto(33)},t.prototype.postFTRoomChange=function(e){this.tfRoomID=e.readInt();var t,i=e.readByte();this.tfMembers||(this.tfMembers=[]),this.tfMembers.length=i,this.isTFCaptain=!1;for(var n=0;n<i;n++)(t=this.tfMembers[n])||(t=new G.default,this.tfMembers[n]=t),t.parse(e),t.roleID==l.default.actorID&&1==t.position&&(this.isTFCaptain=!0)},t.prototype.sendOutTFRoom=function(e){var t=this.getBytes(34);t.writeInt(e),this.sendToServer(t)},t.prototype.sendExitTFFb=function(e){var t=this.getBytes(35);t.writeByte(e),this.sendToServer(t)},t.prototype.postFTRoomPassInfo=function(e){this.tfPassID=e.readInt(),this._tfInviteTime=e.readInt()},t.prototype.getTfInviteCD=function(){return Math.floor((1e3*this._tfInviteTime+1e3*B.default.SECOND_2010-R.default.serverTime)/1e3)},t.prototype.isTeamFBOpen=function(){return M.default.ins().lv>=s.default.TeamFuBenBaseConfig.needZsLv&&R.default.serverOpenDay+1>=s.default.TeamFuBenBaseConfig.openDay},t.prototype.doTeamFuBenEnd=function(e){e.readInt(),e.readByte();var t,i=e.readByte(),n=[];n.length=i;for(var a=0;a<i;a++)t=new G.default,n[a]=t,t.roleID=e.readInt(),t.position=e.readByte(),t.roleName=e.readString(),t.job=e.readByte(),t.sex=e.readByte()},t.prototype.doTeamFuBenRelive=function(e){A.default.ins().killerHandler=e.readDouble(),A.default.ins().reliveTime=e.readInt()},t.prototype.sendTFRank=function(){this.sendBaseProto(36)},t.prototype.postTeamFuBenRank=function(e){this.tfPassRanks=[];for(var t,i,n=e.readByte(),a=0;a<n;a++){t={configID:e.readInt(),members:[]},i=e.readByte();for(var o=0;o<i;o++)t.members.push({position:e.readByte(),roleName:e.readString()});this.tfPassRanks.push(t)}},t.prototype.sendTfFlower=function(e,t){var i=this.getBytes(37);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.postTeamFbFlowarRecords=function(e){var t=e.readInt();this.tfFlowerRecords||(this.tfFlowerRecords=[]);for(var i=0;i<t;i++)this.tfFlowerRecords.push({roleName:e.readString(),count:e.readInt()});for(;this.tfFlowerRecords.length>10;)this.tfFlowerRecords.shift()},t.prototype.clearTfFlowerRecords=function(){this.tfFlowerRecords=[]},t.prototype.sendTfSysInvite=function(e){var t=this.getBytes(38);t.writeString(e),this.sendToServer(t)},t.prototype.teamFbSysInviteInfo=function(e){q.default.ins().postSysChatMsg(new Z.default(3,e.readString()))},t.prototype.checkTFRed=function(){return!!this.isTeamFBOpen()&&this.showTfRed},t.prototype.postShowRedChange=function(e){this.showTfRed=e},t.prototype.sendGuardWeaponLogs=function(){this.sendBaseProto(40)},t.prototype.postGuardWeaponLogs=function(e){for(var t=e.readByte(),i=[],n=0;n<t;n++){var a=e.readInt(),o=e.readString(),r=e.readString(),s=e.readString();i.push({noticeId:a,roleName:o,monsterName:r,itemName:s})}return i},t.FB_TYPE_GUANQIABOSS=1,t.FB_TYPE_CITY=20,t.FB_TYPE_TIAOZHAN=9,t.FB_TYPE_ZHUANSHENGBOSS=10,t.FB_TYPE_ALLHUMENBOSS=7,t.FB_TYPE_PERSONAL=6,t.FB_TYPE_HOMEBOSS=17,t.FB_TYPE_MATERIAL=2,t.FB_TYPE_EXP=16,t.FB_TYPE_GUILD_BOSS=15,t.FB_TYPE_GUILD_WAR=14,t.FB_TYPE_MIJING=21,t.FB_ID_JINGYAN=3005,t.FB_ID_MINE=99999,t.FB_TYPE_GUIDEBOSS=18,t.FB_TYPE_NEW_WORLD_BOSS=19,t.FB_TYPE_LIEYAN=23,t.FB_TYPE_GOD_WEAPON=26,t.FB_TYPE_GOD_WEAPON_TOP=27,t.FB_TYPE_PEAKED=30,t.FB_TYPE_DARK_BOSS=36,t.FB_TYPE_HIDE_BOSS=37,t.FB_TYPE_HUN_SHOU=38,t.FB_TEAM=35,t.FB_TYPE_FIRE_RING=24,t.FB_TYPE_PEAK=30,t.FB_TYPE_GUARD_WEAPON=29,t.FB_TYPE_LABA=31,t.FB_TYPE_KF_BOSS=32,t.FB_TYPE_DEVILDOM_BOSS=39,t.FB_TYPE_KF_ARENA=40,t.AUTO_GUANQIA=20,t.TEAM_FB_WIN_REFLASH_PANEL="TEAM_FB_WIN_REFLASH_PANEL",t.TF_SIMLPE_HEIGHT=149,t.TF_EXPAND_HEIGHT=298,t}(n.default);i.default=Y,window.GameSystem.push(Y.ins.bind(Y)),cc._RF.pop()},{"../../../core/base/AttributeType":"AttributeType","../../../core/base/MessageCenter":"MessageCenter","../../../core/base/ResultManager":"ResultManager","../../../core/base/ViewManager":"ViewManager","../../../core/net/PackageID":"PackageID","../../../core/utils/DateUtils":"DateUtils","../../ai/RoleAI":"RoleAI","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../base/EntityType":"EntityType","../../config/ItemConfig":"ItemConfig","../../consts/MoneyConst":"MoneyConst","../../consts/SystemConst":"SystemConst","../../entity/Actor":"Actor","../../entity/CharRole":"CharRole","../../entity/EntityModel":"EntityModel","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../../map/GameMap":"GameMap","../activity/model/RewardData":"RewardData","../bag/ItemData":"ItemData","../boss/UserBoss":"UserBoss","../chat/Chat":"Chat","../chat/model/ChatSystemData":"ChatSystemData","../city/CityCC":"CityCC","../dieGuide/DieGuide":"DieGuide","../encounter/Encounter":"Encounter","../fbTeam/vo/TeamFuBenRoleVo":"TeamFuBenRoleVo","../gamescene/GameLogic":"GameLogic","../gamescene/help/DropHelp":"DropHelp","../guard/model/GuardCopyInfo":"GuardCopyInfo","../guard/model/GuardWeaponModel":"GuardWeaponModel","../hint/hint":"hint","../offlinereward/EffectivenessTip":"EffectivenessTip","../opensystem/OpenSystem":"OpenSystem","../playfun/PlayFun":"PlayFun","../recharge/Recharge":"Recharge","../server/GameServer":"GameServer","../tips/UserTips":"UserTips","../vip/UserVip":"UserVip","../zs/UserZs":"UserZs","./FbModel":"FbModel","./SkyLevelModel":"SkyLevelModel","./WaveDropData":"WaveDropData"}],UserForge:[function(e,t,i){"use strict";cc._RF.push(t,"5304bliZUBDSYHMck+LS/Rk","UserForge"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../bag/UserBag"),r=e("../../entity/Actor"),s=e("../../manager/GlobalConfig"),u=e("../../entity/SubRoles"),l=e("../../manager/TimerManager"),c=e("../../../core/base/AttributeData"),d=e("../../../core/base/MessageCenter"),f=e("./view/ForgeWin"),p=e("../weapons/Weapons"),h=e("../rolewin/UserEquip"),g=function(e){function t(){var i=e.call(this)||this;return d.default.compile(t),i.sysId=a.PackageID.strongthen,i.regNetMsg(2,i.doForgeUpdata),i.regNetMsg(5,i.postMeltItem),i}return __extends(t,e),Object.defineProperty(t,"CONDITION_ZHUZAO",{get:function(){return s.default.StoneOpenConfig[0].openLv},enumerable:!0,configurable:!0}),t.ins=function(){return e.ins.call(this)},t.prototype.doForgeUpdata=function(e){var t=e.readShort(),i=u.default.ins().getSubRoleByIndex(t).parseForgeChange(e,this.sysId);this.postForgeUpdate(this.sysId,i)},t.prototype.postForgeUpdate=function(e,t){return void 0===t&&(t=0),[e,t]},t.prototype.postForgeTips=function(e){return e?1:0},t.prototype.sendUpGrade=function(e,t){var i=this.getBytes(2);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.prototype.delaySeekItem=function(){l.default.ins().isExists(this.seekForgeItem,this)||l.default.ins().doTimer(60,1,this.seekForgeItem,this)},t.prototype.seekForgeItem=function(){for(var e=!1,t=o.default.ins().getBagItemNum(0),i=0;i<t;i++){var n=o.default.ins().getBagGoodsByIndex(0,i);switch(n.itemConfig.id){case 200002:e=this.forgeHint(0,n.count);break;case 200003:e=this.forgeHint(f.default.Page_Select_ZhuLing,n.count)}if(e)break}if(e||(e=this.forgeHint(f.default.Page_Select_Gem,r.default.soul)),!e)for(var a=0;a<u.default.ins().subRolesLen&&!(e=p.default.ins().checkRedPoint(a));a++);this.postForgeTips(e)},t.prototype.getForgeConfigByPos=function(e,t,i){var n=this.getForgeConfig(i);return n[e]&&n[e][t]},t.prototype.getForgeConfig=function(e){if(this.forgeConfigDic=this.forgeConfigDic||{},!this.forgeConfigDic[e]){var t=void 0;switch(e){case f.default.Page_Select_Boost:t=s.default.EnhanceAttrConfig;break;case f.default.Page_Select_ZhuLing:t=s.default.ZhulingAttrConfig;break;case f.default.Page_Select_Gem:t=s.default.StoneLevelConfig}var i=this.forgeConfigDic[e]={};for(var n in t){var a=t[n];i[a.posId]||(i[a.posId]={}),i[a.posId][a.level]=t[n]}}return this.forgeConfigDic[e]},t.prototype.getEnhanceCostConfigByLv=function(e){return s.default.EnhanceCostConfig[e]},t.prototype.getStoneLevelCostConfigByLv=function(e){var t,i=s.default.StoneLevelCostConfig;for(t in i){var n=i[t];if(n.level==e)return n}return null},t.prototype.getZhulingCostConfigByLv=function(e){var t,i=s.default.ZhulingCostConfig;for(t in i){var n=i[t];if(n.level==e)return n}return null},t.prototype.jingLianCanUp=function(){for(var e=u.default.ins().subRolesLen,i=!1,n=0;n<e;n++){var a=u.default.ins().getSubRoleByIndex(n),r=a.getMinEquipIndexByType(1),s=a.getEquipByIndex(r).zhuling,l=t.ins().getZhulingCostConfigByLv(s+1).count;if(l){var c=t.ins().getZhulingCostConfigByLv(s+1).itemId;if(o.default.ins().getBagGoodsCountById(0,c)>=l){i=!0;break}}}return i},t.prototype.getTupoCostConfigByLv=function(e){return null},t.prototype.forgeHint=function(e,i){for(var n=u.default.ins().subRolesLen,a=0;a<n;a++){var o=u.default.ins().getSubRoleByIndex(a),s=o.getMinEquipIndexByType(e),l=this.getForgeLv(e,o,s),c=this.getForgeCount(e,l);if(c&&i>=c){if(e!=f.default.Page_Select_Gem)return t.ins().postForgeTips(!0),!0;if(r.default.level>=t.CONDITION_ZHUZAO)return t.ins().postForgeTips(!0),!0}}return t.ins().postForgeTips(!1),!1},t.prototype.getForgeLv=function(e,t,i){switch(e){case f.default.Page_Select_Boost:return t.getEquipByIndex(i).strengthen;case f.default.Page_Select_ZhuLing:return t.getEquipByIndex(i).zhuling;case f.default.Page_Select_Gem:return t.getEquipByIndex(i).gem;case 3:return t.getEquipByIndex(i).tupo}},t.prototype.getForgeCount=function(e,t){switch(e){case f.default.Page_Select_Boost:var i=this.getEnhanceCostConfigByLv(t+1);if(i)return i.stoneNum;break;case f.default.Page_Select_ZhuLing:var n=this.getZhulingCostConfigByLv(t+1);if(n)return n.count;break;case f.default.Page_Select_Gem:var a=this.getStoneLevelCostConfigByLv(t+1);if(a)return a.soulNum;break;case 3:var o=this.getTupoCostConfigByLv(t+1);if(o)return o.count}return 0},t.prototype.countAllBoostAttr=function(e,i,n,a){void 0===n&&(n=0),void 0===a&&(a=!1);for(var o=[],r=u.default.ins().getSubRoleByIndex(e),s=0;s<h.default.FOEGE_MAX;s++){var l,c=this.getForgeLv(i,r,s);a&&n==s&&(c+=1),(l=t.ins().getForgeConfigByPos(s,c,i))&&l.attr&&(o=t.AttrAddition(l.attr,o))}return o},t.prototype.isMaxForge=function(e,i){for(var n=0;n<8;n++){var a=this.getForgeLv(i,e,i);if(!t.ins().getForgeConfigByPos(i,a+1,i))return!1}return!0},t.AttrAddition=function(e,t){for(var i,n=e.length,a=t.length,o=[],r=0;r<n;r++)i=c.default.copyAttrbute(e[r]),o.push(i);for(var s=0;s<a;s++){var u=!1;for(r=0;r<o.length;r++)t[s].type==o[r].type&&(o[r].value=o[r].value+t[s].value,u=!0);u||(i=c.default.copyAttrbute(t[s]),o.push(i))}return o},t.prototype.sendMeltItem=function(e){var t=this.getBytes(5);for(var i in t.writeShort(e.length),e)t.writeInt(e[i].configID),t.writeInt(e[i].count);this.sendToServer(t)},t.prototype.postMeltItem=function(){},t}(n.default);i.default=g,g.ins(),cc._RF.pop()},{"../../../core/base/AttributeData":"AttributeData","../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../bag/UserBag":"UserBag","../rolewin/UserEquip":"UserEquip","../weapons/Weapons":"Weapons","./view/ForgeWin":"ForgeWin"}],UserFuLi:[function(e,t,i){"use strict";cc._RF.push(t,"45de8kck35Ghr4Eco0gtgWk","UserFuLi"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../manager/GlobalConfig"),r=e("../vip/UserVip"),s=e("../../../core/base/MessageCenter"),u=function(e){function t(){var i=e.call(this)||this;return i.playNum=0,i.boxOn=0,i.addCoefficient=1,i.exp=0,i.boxInfo=0,i.baoji=0,i.isOpen=[],s.default.compile(t),i.sysId=a.PackageID.moneyTree,i.regNetMsg(1,i.doMoneyTreeInfo),i.regNetMsg(2,i.doPalyBack),i.regNetMsg(3,i.doGetRewardBack),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendPlayYaoYao=function(){this.sendBaseProto(2)},t.prototype.sendGetCaseReward=function(e){var t=this.getBytes(3);t.writeInt(e),this.sendToServer(t)},t.prototype.doMoneyTreeInfo=function(e){this.playNum=e.readUnsignedShort(),this.boxOn=e.readUnsignedShort(),this.addCoefficient=e.readUnsignedShort(),this.exp=e.readUnsignedShort(),this.boxInfo=e.readInt(),this.postMoneyInfoChange()},t.prototype.postMoneyInfoChange=function(e){return void 0===e&&(e=null),e},t.prototype.doPalyBack=function(e){this.playNum=e.readUnsignedShort(),this.boxOn=e.readUnsignedShort(),this.addCoefficient=e.readUnsignedShort(),this.exp=e.readUnsignedShort(),this.baoji=e.readUnsignedShort(),this.postMoneyInfoChange([!1,this.baoji])},t.prototype.doGetRewardBack=function(e){this.boxInfo=e.readInt(),this.postMoneyInfoChange()},t.prototype.getOrderByIndex=function(e){return void 0===e&&(e=0),this.boxInfo>>e&1},t.prototype.getNowCoefficientinfo=function(e){void 0===e&&(e=0);var t=o.default.CashCowAmplitudeConfig;for(var i in t)if(t[i].level==this.addCoefficient+e)return t[i];return null},Object.defineProperty(t.prototype,"maxNum",{get:function(){return this.checkCashCowBasicLenght(10)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cruMaxNum",{get:function(){return this.checkCashCowBasicLenght()},enumerable:!0,configurable:!0}),t.prototype.getIndexCost=function(){var e=o.default.CashCowBasicConfig;for(var t in e)if(e[t].time==this.boxOn+1)return e[t];return null},t.prototype.getBoxInfoByIndex=function(e){var t=o.default.CashCowBoxConfig;for(var i in t)if(t[i].index==e)return t[i];return null},t.prototype.checkCashCowBasicLenght=function(e){void 0===e&&(e=0),0==e&&(e=r.default.ins().lv);var t=o.default.CashCowLimitConfig;for(var i in t)if(t[i].vip==e)return t[i].maxTime;return 0},t.prototype.checkBoxIsCanget=function(e){return this.getBoxInfoByIndex(e).time<=this.playNum&&this.getOrderByIndex(e-1)<=0},t}(n.default);i.default=u,window.GameSystem.push(u.ins.bind(u)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../manager/GlobalConfig":"GlobalConfig","../vip/UserVip":"UserVip"}],UserGem:[function(e,t,i){"use strict";cc._RF.push(t,"2643ff0KshNkKhujJxICQBL","UserGem"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../entity/SubRoles"),r=e("./UserForge"),s=function(e){function t(){var t=e.call(this)||this;return t.sysId=a.PackageID.Gem,t.regNetMsg(2,t.postForgeUpdata),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postForgeUpdata=function(e){var t=e.readShort(),i=o.default.ins().getSubRoleByIndex(t).parseForgeChange(e,this.sysId);r.default.ins().postForgeUpdate(this.sysId,i)},t.prototype.sendUpGrade=function(e,t){var i=this.getBytes(2);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.ROLL_NUM=8,t}(n.default);i.default=s,s.ins(),cc._RF.pop()},{"../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/SubRoles":"SubRoles","./UserForge":"UserForge"}],UserJingMai:[function(e,t,i){"use strict";cc._RF.push(t,"f9a85smGH5CUb7ne0gHkcaP","UserJingMai"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("../../../core/net/PackageID"),r=e("../../entity/SubRoles"),s=e("../tips/UserTips"),u=e("../../manager/GlobalConfig"),l=e("../bag/UserBag"),c=e("../../../core/base/MessageCenter"),d=cc._decorator,f=d.ccclass,p=(d.property,function(e){function t(){var t=e.call(this)||this;return c.default.compile(i),t.sysId=o.PackageID.JingMai,t.regNetMsg(1,t.doUpData),t.regNetMsg(4,t.doBigUpLevel),t}var i;return __extends(t,e),i=t,t.ins=function(){return e.ins.call(this)},t.prototype.sendBoost=function(e){var t=this.getBytes(1);t.writeShort(e),this.sendToServer(t)},t.prototype.sendUpgrade=function(e){var t=this.getBytes(2);t.writeShort(e),this.sendToServer(t)},t.prototype.doUpData=function(e){var t=e.readShort();r.default.ins().getSubRoleByIndex(t).jingMaiData.parser(e),this.postUpdate()},t.prototype.postUpdate=function(){},t.prototype.sendBigUpLevel=function(e){var t=this.getBytes(4);t.writeInt(e),this.sendToServer(t)},t.prototype.doBigUpLevel=function(e){var t;e.readInt()?t="\u9053\u5177\u4e0d\u8db3\u591f":e.readInt()||(t="\u4f7f\u7528\u6210\u529f\uff0c\u7ecf\u8109\u7b49\u9636+1");t&&s.default.ins().showTips(t)},t.prototype.canGradeupJingMai=function(){for(var e,t=[!1,!1,!1],i=0,n=0,a=r.default.ins().subRolesLen,o=0;o<a;o++){var s=r.default.ins().getSubRoleByIndex(o);if(i=(e=u.default.JingMaiLevelConfig[s.jingMaiData.level]).count){if(l.default.ins().getBagGoodsCountById(0,200103)){t[o]=!0;break}n=l.default.ins().getBagGoodsCountById(0,e.itemId),t[o]=n>=i}else t[o]=!1}return t},t=i=__decorate([f],t)}(a.default));i.default=p,function(e){e.userJingMai=p.ins.bind(p)}(n||(n={})),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../tips/UserTips":"UserTips"}],UserMail:[function(e,t,i){"use strict";cc._RF.push(t,"e6fca+4b8ZGhLNPsrNd0VoS","UserMail"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../../../core/utils/Algorithm"),s=e("./MailData"),u=function(e){function t(){var i=e.call(this)||this;return i.currentMailHandle=0,i.mailData=[],o.default.compile(t),i.sysId=a.PackageID.Mail,i.regNetMsg(1,i.doMailData),i.regNetMsg(2,i.doMailDetailedData),i.regNetMsg(3,i.doDeleteMail),i.regNetMsg(4,i.doGetItemMail),i.regNetMsg(5,i.doAddMail),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},Object.defineProperty(t.prototype,"mailListData",{get:function(){return this.mailData},enumerable:!0,configurable:!0}),t.prototype.sendMailContentData=function(e){var t=this.getBytes(2);t.writeInt(e),this.sendToServer(t)},t.prototype.sendGetItem=function(e){var t=this.getBytes(4);t.writeInt(e.length);for(var i=0;i<e.length;i++)t.writeInt(e[i]);this.sendToServer(t)},t.prototype.doMailData=function(e){this.parser(e,1),this.postMailData()},t.prototype.postMailData=function(){},t.prototype.doMailDetailedData=function(e){var i=new s.default;i.parser(e);for(var n=0;n<this.mailData.length;n++)if(this.mailData[n].handle==i.handle){this.mailData.splice(n,1,i);break}this.currentMailHandle=i.handle,t.ins().isAllReceive||ViewManager.ins().open(MailDetailedWin),this.postMailDetail(i)},t.prototype.postMailDetail=function(e){return e},t.prototype.doDeleteMail=function(e){this.deleteMailDataByHandle(e.readInt()),this.postMailData()},t.prototype.doGetItemMail=function(e){this.setMailListData(e)},t.prototype.postGetItemFromMail=function(){},t.prototype.doAddMail=function(e){this.parser(e,0),this.postMailData()},t.prototype.parser=function(e,t){if(t){this.mailData=[];for(var i=e.readInt(),n=0;n<i;n++){(a=new s.default).disposeData(e),this.mailData.push(a)}this.mailSort(1)}else{var a;(a=new s.default).disposeData(e),this.mailData.unshift(a)}},t.prototype.getMailDataByHandle=function(e){for(var t=0,i=this.mailData;t<i.length;t++){var n=i[t];if(n.handle==e)return n}return null},t.prototype.deleteMailDataByHandle=function(e){for(var t=0;t<this.mailData.length;t++)if(this.mailData[t].handle==e)return void this.mailData.splice(t,1)},t.prototype.getMailByReceive=function(e){void 0===e&&(e=0);for(var t=[],i=this.mailData.length-1;i>=0;i--)this.mailData[i].receive==e&&t.push(this.mailData[i]);return t},t.prototype.getUnreadMail=function(){for(var e=0,t=this.mailData.length-1;t>=0;t--){var i=this.mailData[t];0!=i.type&&0!=i.receive||(e+=1)}return e},t.prototype.getCurrentMail=function(){return this.getMailDataByHandle(this.currentMailHandle)},t.prototype.setMailListData=function(e){for(var t=e.readInt(),i=0;i<t;i++)for(var n=e.readInt(),a=0,o=this.mailData;a<o.length;a++){var r=o[a];if(r.handle==n){r.type=e.readInt(),r.receive=e.readInt(),this.postMailDetail(r);break}}this.postGetItemFromMail()},t.prototype.sortDesc=function(e,t){var i=e.times,n=t.times;return r.default.sortDesc(i,n)},t.prototype.sortAsc=function(e,t){var i=e.times,n=t.times;return r.default.sortAsc(i,n)},t.prototype.mailSort=function(e){var t=this.mailData;return e?t.sort(this.sortDesc):t.sort(this.sortAsc),t},t.prototype.mailSort2=function(e,t){var i=0;return 0!=(i=r.default.sortAsc(e.type,t.type))?i:0==e.receive&&0!=t.receive?-1:0!=e.receive&&0==t.receive?1:i=r.default.sortDesc(e.times,t.times)},t}(n.default);i.default=u,window.GameSystem.push(u.ins.bind(u)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../../core/utils/Algorithm":"Algorithm","../../base/BaseSystem":"BaseSystem","./MailData":"MailData"}],UserMiji:[function(e,t,i){"use strict";cc._RF.push(t,"3bae8a47y9GILIPDnI4cUZA","UserMiji"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("../../../core/net/PackageID"),r=e("../../entity/SubRoles"),s=e("../../manager/GlobalConfig"),u=e("./UserZs"),l=e("../bag/UserBag"),c=e("../setting/Setting"),d=e("../../../core/base/MessageCenter"),f=function(e){function t(){var i=e.call(this)||this;return d.default.compile(t),i.sysId=o.PackageID.Miji,i.regNetMsg(1,i.postMijiData),i.regNetMsg(2,i.postMijiUpDate),i.regNetMsg(3,i.postMijiChange),i.regNetMsg(6,i.postMijiLockInfo),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postMijiData=function(e){this.grid=e.readShort();var t=r.default.ins().subRolesLen;this.miji=[];for(var i=0;i<t;i++){this.miji[i]=[];for(var n=0;n<this.grid;n++){var a=new MijiData;a.id=e.readInt(),a.isLocked=e.readInt(),this.miji[i][n]=a}}},t.prototype.sendMijiLearn=function(e,t){var i=this.getBytes(2);i.writeShort(e),i.writeInt(t),this.sendToServer(i)},t.prototype.postMijiUpDate=function(e){var t=e.readShort(),i=e.readShort()-1,n=e.readInt(),a=e.readByte(),o=this.miji[t][i].id;return this.miji[t][i].id=n,[i,n,o,a]},t.prototype.sendMijiChange=function(e,t,i){var n=this.getBytes(3);n.writeInt(e),n.writeInt(t),n.writeInt(i),this.sendToServer(n)},t.prototype.sendMijiwancheng=function(e){var t=this.getBytes(4);t.writeShort(e),this.sendToServer(t)},t.prototype.sendMijiAddLock=function(e,t){var i=this.getBytes(5);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.sendMijiDelLock=function(e,t){var i=this.getBytes(6);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.getSkillListOfRole=function(e){return this.miji&&this.miji[e]?this.miji[e]:null},t.prototype.getMijiData=function(e,t){var i=this.getSkillListOfRole(e);return i&&i[t]?i[t].id:null},t.prototype.hasSpecificSkillOfRole=function(e,t){var i=!1,n=this.getSkillListOfRole(e);if(null!=n){for(var a=!1,o=0;o<n.length;o++)n[o].id==t&&(a=!0);a&&(i=!0)}return i},t.prototype.mijiIsLock=function(e,t){var i=!1,n=this.getSkillListOfRole(e);if(null!=n){for(var a=!1,o=0;o<n.length;o++)Math.floor(n[o].id/10)==Math.floor(t/10)&&n[o].isLocked&&(a=!0);a&&(i=!0)}return i},t.prototype.hasNewSkillOfRole=function(e){var t=!1,i=this.getSkillListOfRole(e);return null!=i&&i.every(function(e){return!(e.id>0)||(t=!0,!1)}),t},t.prototype.postMijiChange=function(e){return e.readInt()},t.prototype.postMijiLockInfo=function(e){for(var t=this.miji[e.readInt()],i=e.readInt(),n=0;n<t.length;n++)if(t[n].id==i){var a=e.readInt();t[n].isLocked=a;break}},t.prototype.getPowerByRole=function(e){for(var t=0,i=this.miji[e],n=0;n<i.length;n++)i[n].id&&(t+=s.default.MiJiSkillConfig[i[n].id].power);return t},t.prototype.postSelectedMiji=function(e,t){return[e,t]},t.prototype.postBagUseMiji=function(e){return e},t.prototype.hasEquipMiji=function(e,t){void 0===t&&(t=0);var i=this.miji[t];if(!i)return!1;for(var n=0;n<i.length;n++){if(i[n]&&0!=i[n].id)if(s.default.MiJiSkillConfig[i[n].id].item==e)return!0}return!1},t.prototype.isMjiSum=function(){if(u.default.ins().lv<t.ZsLv)return!1;if(!this.miji)return!1;var e=l.default.ins().getBagGoodsByType(2);if(!(e.length>0))return!1;if(c.default.ins().getValue(c.ClientSet.mijiRedPoint))return!1;for(var i=r.default.ins().subRolesLen,n=0;n<i;n++)for(var a=this.miji[n],o=0;o<a.length;o++)if(a[o].id)for(var d=s.default.MiJiSkillConfig[a[o].id],f=0;f<e.length;f++)if(d.item==e[f]._configID)return c.default.ins().setValue(c.ClientSet.mijiRedPoint,1),!1;return!0},t.ZsLv=1,t.BAGOPEN=5,t}(a.default);i.UserMiji=f,function(e){e.userMiji=f.ins.bind(f)}(n||(n={})),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../setting/Setting":"Setting","./UserZs":"UserZs"}],UserReadPlayer:[function(e,t,i){"use strict";cc._RF.push(t,"5589bh6pTtP/a9L/eEvj3vW","UserReadPlayer"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../../entity/Role"),s=function(e){function t(){var i=e.call(this)||this;return o.default.compile(t),i.sysId=a.PackageID.Default,i.regNetMsg(16,i.postPlayerResult),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendFindPlayer=function(e,t){void 0===t&&(t=0);var i=this.getBytes(16);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.postPlayerResult=function(e){var i=t.ins().otherPlayerData;return i||(i=new u),i.parser(e),i},t}(n.default);i.default=s;var u=function(){function e(){this.roleData=[],this.lilianLv=0,this.zhanlingID=0,this.zhanlingLevel=0}return e.prototype.parser=function(e){this.id=e.readInt(),this.serverId=e.readInt(),this.name=e.readString(),this.level=e.readShort(),this.vipLevel=e.readShort(),this.zhuan=e.readShort(),this.lilianLv=e.readInt(),this.ce=e.readDouble(),this.guildId=e.readInt(),this.guildName=e.readString(),this.zhanlingID=e.readInt(),this.zhanlingLevel=e.readInt();for(var t=e.readShort(),i=0;i<t;i++)this.roleData[i]=new r.default,this.roleData[i].parser(e)},e}();i.OtherPlayerData=u,window.GameSystem.push(s.ins.bind(s)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Role":"Role"}],UserRole:[function(e,t,i){"use strict";cc._RF.push(t,"7569cneVMFL2ri6YhLWSPLn","UserRole"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../bag/UserBag"),o=e("../../entity/Actor"),r=e("../gamescene/GameLogic"),s=e("./UserEquip"),u=e("../loongsoul/JadeNew"),l=e("../specialring/LyMark"),c=e("./Wing"),d=e("../fb/UserFb"),f=e("../../manager/TimerManager"),p=e("../../entity/SubRoles"),h=e("../../config/ItemConfig"),g=e("../zs/UserZs"),y=e("../samsara/data/SamsaraModel"),v=e("../opensystem/OpenSystem"),m=e("../../consts/SystemConst"),b=e("../specialring/SpecialRing"),_=e("./UserSkill"),C=e("../loongsoul/LongHun"),I=e("../dress/Dress"),T=e("../rune/data/RuneRedPointMgr"),S=e("../godwing/GodWingRedPoint"),R=e("../../manager/GlobalConfig"),B=e("./view/RoleWin"),M=e("../../../core/base/ViewManager"),E=e("../../../core/base/MessageCenter"),D=function(e){function t(){var i=e.call(this)||this;return i.timeID=0,E.default.compile(t),i.canChangeEquips=[[],[],[]],i.observe(a.default.ins().postItemChange,i.startCheckHaveCan),i.observe(a.default.ins().postItemAdd,i.startCheckHaveCan),i.observe(a.default.ins().postItemDel,i.startCheckHaveCan),i.observe(o.default.ins().postLevelChange,i.startCheckHaveCan),i.observe(r.default.ins().postSubRoleChange,i.startCheckHaveCan),i.observe(s.default.ins().postEquipChange,i.startCheckHaveCan),i.observe(u.default.ins().postJadeData,i.startCheckHaveCan),i.observe(l.default.ins().postMarkData,i.startCheckHaveCan),i.observe(c.default.ins().postUseDanSuccess,i.startCheckHaveCan),i.observe(c.default.ins().postWingUpgrade,i.startCheckHaveCan),i.observe(o.default.ins().postGoldChange,i.delayShowNavBtnRedPoint),i.observe(r.default.ins().postRuneExchange,i.delayShowNavBtnRedPoint),i.observe(r.default.ins().postRuneShatter,i.delayShowNavBtnRedPoint),i.observe(a.default.ins().postHuntStore,i.delayShowNavBtnRedPoint),i.observe(d.default.ins().postFbRingInfo,i.delayShowNavBtnRedPoint),i}return __extends(t,e),t.prototype.startCheckHaveCan=function(e,t){var i=this;void 0===e&&(e=!1),void 0===t&&(t=-1),this.timeID||(this.timeID=1,f.default.ins().doTimer(50,1,function(){i.checkHaveCan(e,t)},this))},t.ins=function(){return e.ins.call(this)},t.prototype.checkHaveCan=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=-1),this.timeID=0;var i=a.default.ins().getBagEquipByType(0);if(i){for(var n=p.default.ins(),r=t>=0?t:0,u=t>=0?t+1:n.subRolesLen,l=[[],[],[]],c=n.subRolesLen,d=0;d<c;d++)for(var f=0,y=n.getSubRoleByIndex(d).equipsData;f<y.length;f++){var v=y[f];l[d].push(v.item)}for(var m=0,b=i;m<b.length;m++)for(var _=b[m],C=r;C<u;C++){var I=h.default.getJob(_.itemConfig);if((0==I||p.default.ins().getSubRoleByIndex(C).job==I)&&!(g.default.ins().lv<_.itemConfig.zsLevel||o.default.level<_.itemConfig.level)){var T=a.default.ins().getLowEquipIndex(l[C],h.default.getSubType(_.itemConfig));T>=0&&(l[C][T]=this.contrastEquip(l[C][T]||n.getSubRoleByIndex(C).equipsData[T].item,_))}}var S=l.length;for(d=0;d<S;d++){for(C=0;C<l[d].length;C++)this.canChangeEquips[d][C]=!1,l[d][C]&&l[d][C].handle!=n.getSubRoleByIndex(d).equipsData[C].item.handle&&(e&&t==d?(s.default.ins().sendWearEquipment(l[d][C].handle,C,t),this.canChangeEquips[d][C]=!1):this.canChangeEquips[d][C]=!0);this.canChangeEquips[d].indexOf(!0)<0&&(this.canChangeEquips[d].length=0)}this.showNavBtnRedPoint()}},t.prototype.contrastEquip=function(e,t){if(!e||0==e.handle)return t;if(!t||0==t.handle)return e;var i=e.point;return t.point>i?t:e},t.prototype.getCanChangeEquips=function(){for(var e=0;e<this.canChangeEquips.length;e++)for(var t=0;t<this.canChangeEquips[e].length;t++)if(this.canChangeEquips[e][t])return!0;return!1},t.prototype.delayShowNavBtnRedPoint=function(){f.default.ins().isExists(this.showNavBtnRedPoint,this)||f.default.ins().doTimer(60,1,this.showNavBtnRedPoint,this)},t.prototype.showNavBtnRedPoint=function(e){void 0===e&&(e=!1);for(var t=0;t<this.canChangeEquips.length;t++){for(var i=0;i<this.canChangeEquips[t].length;i++)if(this.canChangeEquips[t][i]){e=!0;break}if(e)break}if(!e&&y.default.ins().isCanAddSpirit()&&(e=!0),!e&&v.default.ins().checkSysOpen(m.SystemType.RING)&&(b.default.ins().checkHaveUpRing()||b.default.ins().isCanStudySkill()||b.default.ins().isCanUpgradeSkill()||b.default.ins().fireRingRedPoint()||l.default.ins().checkRed())&&(e=!0),!e&&_.default.ins().canHejiEquip()&&(e=!0),!e&&_.default.ins().canExchange()&&(e=!0),!e&&_.default.ins().canSolve()&&(e=!0),!e&&C.default.ins().canShowRedPointInAll()?e=!0:!e&&g.default.ins().canOpenZSWin()&&!g.default.ins().isMaxLv()&&(g.default.ins().canGet()>0||g.default.ins().canUpgrade())?e=!0:(!e&&this.and(c.default.ins().canGradeupWing())||this.and(c.default.ins().canItemGradeupWing())||c.default.ins().isHaveActivationWing())&&(e=!0),!e&&I.default.ins().redPoint()&&(e=!0),!e&&T.default.ins().checkAllSituation(!1)&&(e=!0),!e){for(var n=p.default.ins().subRolesLen,o=0;o<n;o++){var r=p.default.ins().getSubRoleByIndex(o);for(t=0;t<8;t++){this["equip"+t];if(!(e=s.default.ins().setOrangeEquipItemState(t,r))&&t<2&&(e=s.default.ins().setLegendEquipItemState(t>0?2:0,r)),e){var d=a.default.ins().checkEqRedPoint(t,r);e=null!=d?d:e}if(e)break}if(e)break}if(!e)for(t=0;t<n&&!(e=s.default.ins().checkRedPointEx(5,t));t++);e||(e=a.default.ins().getLegendHasResolve()),e||(e=Boolean(a.default.ins().getHuntGoods(0).length))}e||(e=p.default.ins().isLockRole()),e||(e=S.default.ins().getGodWingRedPoint()),e||(e=y.default.ins().isCanUpgrade()||y.default.ins().isCanExchange()||y.default.ins().isCanUpgradeSoul()),e||(e=u.default.ins().checkRed()),e||(e=c.default.ins().canUseFlyUp()),e||(e=c.default.ins().canUseAptitude()),this.postRoleHint(e)},t.prototype.postRoleHint=function(e){return e?1:0},t.prototype.and=function(e){for(var t in e)if(1==e[t])return!0;return!1},t.prototype.seekRoleItem=function(){for(var e=!1,t=a.default.ins().getBagItemNum(0),i=0;i<t;i++){if(e)return e;switch(a.default.ins().getBagGoodsByIndex(0,i).itemConfig.id){case 200001:break;case 200004:e=this.roleHint(5);break;case 200013:e=this.roleHint(0);break;case 200014:e=this.roleHint(1)}}return e},t.prototype.roleHint=function(e){for(var t=p.default.ins().subRolesLen,i=!1,n=0;n<t;n++){var a=p.default.ins().getSubRoleByIndex(n);if(i=this.roleHintCheck(a,e))return i}return i},t.prototype.roleHintCheck=function(e,t){var i=1,n=0,o=0;switch(t){case 0:i=e.getExRingsData(0);var r=R.default.ExRing0Config[i];if(i>=1)return!1;r&&(n=r.cost,o=R.default.ExRingConfig[0].costItem);break;case 1:i=e.getExRingsData(1);var s=R.default.ExRing1Config[i];if(i>=1)return!1;s&&(n=s.cost,o=R.default.ExRingConfig[1].costItem);break;case C.default.TYPE_LONG_HUN:i+=e.loongSoulData.level;var u=R.default.LoongSoulConfig[i],l=R.default.LoongSoulStageConfig[e.loongSoulData.stage];u&&(n=l.normalCost,o=u.itemId);break;case C.default.TYPE_HU_DUN:i+=e.shieldData.level;var c=R.default.ShieldConfig[i],d=R.default.ShieldStageConfig[e.loongSoulData.stage];c&&(n=d.normalCost,o=c.itemId);break;case 5:i=e.jingMaiData.level;var f=R.default.JingMaiLevelConfig[i];f&&(n=f.count,o=f.itemId)}return!!(n&&a.default.ins().getBagGoodsCountById(0,o)>=n)},t.prototype.setCanChange=function(){var e=M.default.ins().getView(B.default);e&&(e.roleInfoPanel.setCanChange(this.canChangeEquips),e.canChangeEquips=this.canChangeEquips)},t.oneKeyOpenLevel=60,t}(n.default);i.default=D,window.GameSystem.push(D.ins.bind(D)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/base/ViewManager":"ViewManager","../../base/BaseSystem":"BaseSystem","../../config/ItemConfig":"ItemConfig","../../consts/SystemConst":"SystemConst","../../entity/Actor":"Actor","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../bag/UserBag":"UserBag","../dress/Dress":"Dress","../fb/UserFb":"UserFb","../gamescene/GameLogic":"GameLogic","../godwing/GodWingRedPoint":"GodWingRedPoint","../loongsoul/JadeNew":"JadeNew","../loongsoul/LongHun":"LongHun","../opensystem/OpenSystem":"OpenSystem","../rune/data/RuneRedPointMgr":"RuneRedPointMgr","../samsara/data/SamsaraModel":"SamsaraModel","../specialring/LyMark":"LyMark","../specialring/SpecialRing":"SpecialRing","../zs/UserZs":"UserZs","./UserEquip":"UserEquip","./UserSkill":"UserSkill","./Wing":"Wing","./view/RoleWin":"RoleWin"}],UserSkill:[function(e,t,i){"use strict";cc._RF.push(t,"2b3cb3g6URNBqJOViQJPdgj","UserSkill"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("./model/PunchEquipForgeData"),o=e("../../../core/net/PackageID"),r=e("../../base/EntityManager"),s=e("../skill/data/SkillData"),u=e("../../consts/DamageTypes"),l=e("../../entity/EntityBuff"),c=e("../../base/ObjectPool"),d=e("../../manager/GlobalConfig"),f=e("../../Utils/EgretUtils"),p=e("../../../core/base/MessageCenter"),h=e("../../entity/SubRoles"),g=e("../tips/UserTips"),y=e("../bag/ItemData"),v=e("../artifact/Artifact"),m=e("../../entity/Actor"),b=e("../zs/UserZs"),_=e("../../consts/MoneyConst"),C=e("../bag/UserBag"),I=e("../gamescene/const/ExAttributeType"),T=e("../server/GameServer"),S=e("../heji/model/HejiProgressData"),R=e("../../ai/AIUtil"),B=function(e){function t(){var i=e.call(this)||this;return i.hejiLevel=-1,i.hejiCD=0,i.hejiEnable=!1,i.isFirst=!0,i.fieldUse=!1,i.equipListData=[],i.hejiProgressList=[],i.reduceCD=0,i.sysId=o.PackageID.Skill,p.default.compile(t),i.regNetMsg(1,i.doSkillResult),i.regNetMsg(2,i.postDoBuff),i.regNetMsg(3,i.postDoRemoveBuff),i.regNetMsg(6,i.doAddEffect),i.regNetMsg(7,i.doRemoveEffect),i.regNetMsg(4,i.postSkillUpgrade),i.regNetMsg(5,i.postSkillUpgradeAll),i.regNetMsg(9,i.postHejiInfo),i.regNetMsg(10,i.doHejiEquipInfo),i.regNetMsg(11,i.doHejiEquipUpdate),i.regNetMsg(12,i.doHejiUpdateInfo),i.regNetMsg(13,i.postUpgradeForge),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.getPunchForge=function(){return this.punchEquipForge||(this.punchEquipForge=new a.default),this.punchEquipForge},t.prototype.sendUseSkill=function(e,t,i){var n=this.getBytes(1);n.writeDouble(e),n.writeDouble(t),n.writeInt(i),this.sendToServer(n)},t.prototype.doSkillResult=function(e){var t=e.readDouble(),i=e.readInt(),n=e.readDouble(),a=r.default.ins().getEntityByHandle(t);if(a){var o=r.default.ins().getEntityByHandle(n);if(o&&a.parent){var l=new s.default(i);7==Math.floor(i/1e4)&&u.DamageTypes.Heji;for(var c=e.readShort(),d=[],f=[],p=0;p<c;p++)f=[e.readDouble()],d[p]=f;R.default.ins().userSkill(a,o,l)}}},t.prototype.postDoBuff=function(e){var t=e.readDouble(),i=r.default.ins().getEntityByHandle(t);if(i){var n=c.default.shift(l.default);n.effConfig=d.default.EffectsConfig[e.readInt()],n.value=0,n.addTime=f.default.getTimer(),i.addBuff(n)}},t.prototype.postDoRemoveBuff=function(e){var t=e.readDouble(),i=r.default.ins().getEntityByHandle(t);if(i){var n=d.default.EffectsConfig[e.readInt()].group;i.hasBuff(n)&&i.removeBuff(i.buffList[n])}},t.prototype.doAddEffect=function(e){var t=e.readDouble(),i=r.default.ins().getEntityByHandle(t);if(i){var n=e.readInt();i.addEffect(n)}},t.prototype.doRemoveEffect=function(e){var t=e.readDouble(),i=r.default.ins().getEntityByHandle(t);i&&i.removeEffect(e.readInt())},t.prototype.sendGrewUpSkill=function(e,t){var i=this.getBytes(4);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t.prototype.postSkillUpgrade=function(e){var t=e.readShort(),i=e.readShort(),n=e.readShort(),a=h.default.ins().getSubRoleByIndex(t),o=a.skillsData[i].lv;return a.skillsData[i]=s.default.getSkillByJob(a.job,i+1,n),0==o&&0!=n&&g.default.ins().showSkillTips(a.skillsData[i].configID),[t,i,n]},t.prototype.sendGrewUpAllSkill=function(e,t,i){void 0===t&&(t=!0),void 0===i&&(i=0);var n=this.getBytes(5);n.writeShort(t?1:0),n.writeShort(e),n.writeShort(i),this.sendToServer(n)},t.prototype.postSkillUpgradeAll=function(e){var t=e.readShort(),i=h.default.ins().getSubRoleByIndex(t),n=i.skillsData;i.skillsData=[];for(var a=0;a<5;a++)i.skillsData.push(s.default.getSkillByJob(i.job,a+1,e.readShort()));return[n,t]},t.prototype.postHejiInfo=function(e){var t=e.readUnsignedInt(),i=e.readUnsignedInt(),n=!1;return-1==this.hejiLevel&&1==t&&(n=!0),this.hejiLevel!=t&&(this.hejiLevel=t,this.postHejiUpdate()),this.setHejiCD(i),{isAct:n}},t.prototype.doHejiEquipInfo=function(e){var t;this.equipListData=[];for(var i=0;i<8;i++)(t=new y.default).parser(e),this.equipListData.push(t);this.setQimingInfo(),this.postHejiEquipChange()},t.prototype.setQimingInfo=function(){if(this.qimingEquipDic={},!this.qmArr){this.qmArr=[];var e=d.default.TogetherHitEquipQmConfig;for(var t in e)for(var i in e[t])if(!isNaN(Number(t))&&!isNaN(Number(i))){var n=1e4*Number(t)+Number(i);this.qmArr.push(n)}}for(var a in this.equipListData)if(0!=this.equipListData[a].configID)for(var o=this.equipListData[a].itemConfig,r=1e4*(o.zsLevel||0)+o.level,s=0;s<this.qmArr.length;s++)if(!(r<this.qmArr[s])){i=this.qmArr[s];this.qimingEquipDic[i]?this.qimingEquipDic[i].num++:(this.qimingEquipDic[i]={num:0},this.qimingEquipDic[i].num=1)}this.setQmAttr()},t.prototype.setQmAttr=function(){var e=d.default.TogetherHitEquipQmConfig;for(var t in this.qimingAttrDic={},this.qimingEquipDic){var i=Math.floor(Number(t)/1e4),n=Math.floor(Number(t)%1e4),a=this.qimingEquipDic[t].num,o=e[i][n];if(o)for(var r in o)a>=Number(r)&&(this.qimingAttrDic[t]||(this.qimingAttrDic[t]={}),this.qimingAttrDic[t][r]=o[r])}for(var t in this.qimingValueDic={},this.qimingAttrDic)for(var s in this.qimingAttrDic[t]){var u=this.qimingAttrDic[t][s].exAttr[0];this.qimingValueDic[s]||(this.qimingValueDic[s]=new Object),this.qimingValueDic[s].value||(this.qimingValueDic[s].value=0),this.qimingValueDic[s].type=u.type,this.qimingValueDic[s].value+=u.value}},t.prototype.doHejiEquipUpdate=function(e){var t=e.readShort(),i=new y.default;i.parser(e),this.equipListData[t]=i,this.setQimingInfo(),this.postHejiEquipChange()},t.prototype.checkHejiOpen=function(){var e=d.default.TogerherHitBaseConfig.actImbaId;return!!v.default.ins().getNewArtifactBy(v.default.ins().getArtifactIndexById(e))&&v.default.ins().getNewArtifactBy(v.default.ins().getArtifactIndexById(e)).open},t.prototype.canHejiEquip=function(){if(t.ins().hejiLevel<=0)return!1;if(m.default.level<t.HEJI_SHOW_LEVEL)return!1;if(!this.equipListData)return!1;for(var e=0;e<this.equipListData.length;e++)if(this.checkIsHaveBestEquip(e))return!0;return!1},t.prototype.canExchange=function(){if(t.ins().hejiLevel<=0)return!1;if(m.default.level<t.HEJI_SHOW_LEVEL)return!1;var e,i=this.getMaxzLv();for(var n in this.equipListData){var a=this.equipListData[n];if(a&&a.configID)for(var o=+n+1;;o+=8){var r=d.default.TogetherHitEquipExchangeConfig[o];if(!r)break;var s=a.itemConfig.level?a.itemConfig.level:0,u=a.itemConfig.zsLevel?a.itemConfig.zsLevel:0,l=r.level,c=r.zsLevel,f=r.getItem.id;if(!(l<=s&&c<=u)&&!(f%1e4<=a.configID%1e4||l>m.default.level||c>b.default.ins().lv)){if(c>i[0]||l>i[1])break;if(c>=u&&l>=s){if(e=r.exchangeMaterial[0].count,r.exchangeMaterial[0].id==_.MoneyConst.punch1&&m.default.togeatter1>=e)return!0;if(r.exchangeMaterial[0].id==_.MoneyConst.punch2&&m.default.togeatter2>=e)return!0}}}else{var p=d.default.TogetherHitEquipExchangeConfig[Number(n)+1];if(p){if(e=p.exchangeMaterial[0].count,p.exchangeMaterial[0].id==_.MoneyConst.punch1&&m.default.togeatter1>=e)return!0;if(p.exchangeMaterial[0].id==_.MoneyConst.punch2&&m.default.togeatter2>=e)return!0}}}return!1},t.prototype.getMaxzLv=function(){var e=0,i=0,n=0,a=t.ins().qimingEquipDic;for(var o in a)+o>e&&(e=+o);if(i=Math.floor(e/1e4),n=e%1e4,0==e||8==a[e].num){var r=d.default.TogetherHitEquipQmConfig,s=[];for(var u in r)s.push(+u);for(var l in s.sort(function(e,t){return e<t?-1:1}),0==e?i=s[0]:void 0==(i=s[s.indexOf(i)+1])&&(i=s[s.length-1]),r[i])n=+l}return[i,n]},t.prototype.getPunchExchangePageRedPoint=function(e){var t,i=this.getMaxzLv();for(var n in this.equipListData){var a=this.equipListData[n];if(a&&a.configID){if(1==e)continue;var o=+n+1+8*(e-2),r=d.default.TogetherHitEquipExchangeConfig[o];if(r.getItem.id!=a.configID)continue;var s=+n+1+8*(e-1);if(r=d.default.TogetherHitEquipExchangeConfig[s]){var u=a.itemConfig.level?a.itemConfig.level:0,l=a.itemConfig.zsLevel?a.itemConfig.zsLevel:0,c=r.level,f=r.zsLevel,p=r.getItem.id;if(c<=u&&f<=l)continue;if(p%1e4<=a.configID%1e4)continue;if(c>m.default.level||f>b.default.ins().lv)continue;if(f>i[0]||c>i[1])continue;if(f>=l&&c>=u){if(t=r.exchangeMaterial[0].count,r.exchangeMaterial[0].id==_.MoneyConst.punch1&&m.default.togeatter1>=t)return!0;if(r.exchangeMaterial[0].id==_.MoneyConst.punch2&&m.default.togeatter2>=t)return!0}}}else if(1==e){var h=d.default.TogetherHitEquipExchangeConfig[Number(n)+1];if(h){if(t=h.exchangeMaterial[0].count,h.exchangeMaterial[0].id==_.MoneyConst.punch1&&m.default.togeatter1>=t)return!0;if(h.exchangeMaterial[0].id==_.MoneyConst.punch2&&m.default.togeatter2>=t)return!0}}}return!1},t.prototype.getPunchExchangeItemRedPoint=function(e){var t,i=(e-1)%8,n=Math.ceil(e/8),a=this.equipListData[i];if(1==n){if(a&&a.configID)return!1}else{if(!a||!a.configID)return!1;if(d.default.TogetherHitEquipExchangeConfig[e-8].getItem.id!=a.configID)return!1}var o=d.default.TogetherHitEquipExchangeConfig[e];if(o){if(o.zsLevel>b.default.ins().lv||o.level>m.default.level)return!1;if(t=o.exchangeMaterial[0].count,o.exchangeMaterial[0].id==_.MoneyConst.punch1&&m.default.togeatter1>=t)return!0;if(o.exchangeMaterial[0].id==_.MoneyConst.punch2&&m.default.togeatter2>=t)return!0}return!1},t.prototype.canAcitve=function(){return!1},t.prototype.canSolve=function(){if(t.ins().hejiLevel<=0)return!1;if(m.default.level<t.HEJI_SHOW_LEVEL)return!1;var e=[];return C.default.ins().checkHejiEquipsTodestroy(e),!!e.length},t.prototype.doHejiUpdateInfo=function(e){var t=e.readByte();this.hejiProgressList=[];for(var i=0;i<t;i++){var n=new S.default;n.parser(e),this.hejiProgressList[n.id-1]=n}},t.prototype.setHejiCD=function(e){if(void 0===e&&(e=0),this.hejiLevel>0){var i=t.ins().getHejiSkillId();this.reduceCD=0;var n=r.default.ins().getMainRole(0);n&&n.infoModel&&n.infoModel.getExAtt(I.ExAttributeType.eatTogetherHitCdSub)>0&&(this.reduceCD=n.infoModel.getExAtt(I.ExAttributeType.eatTogetherHitCdSub)/1e4*i.cd),this.hejiCD=-1==e?T.default.serverTime+i.cd-this.reduceCD:T.default.serverTime+e,this.postHejiStartCD()}},t.prototype.getHejiSkillId=function(){var e=d.default.TogetherHitConfig[t.ins().hejiLevel],i=h.default.ins().getSubRoleByIndex(0);if(!i)return new s.default(d.default.SkillsConfig[e.skill_id[0]].id);var n=d.default.SkillsConfig[e.skill_id[i.job-1]];return new s.default(n.id)},t.prototype.getHejiSkillIdIcon=function(){var e=d.default.TogetherHitConfig[t.ins().hejiLevel],i=h.default.ins().getSubRoleByIndex(0);i||(i={job:1});var n=d.default.SkillsConfig[e.skill_id[i.job-1]];return 1e3*Math.floor(n.id/1e3)+"_png"},t.prototype.getSkillIdIcon=function(e){var t=d.default.SkillsConfig[e];return 1e3*Math.floor(t.id/1e3)+"_png"},t.prototype.sendGrewUpHejiSkill=function(){this.sendBaseProto(9)},t.prototype.sendUseHejiSkill=function(){this.sendBaseProto(10)},t.prototype.sendDressHejiEquip=function(e,t){var i=this.getBytes(11);i.writeDouble(e),i.writeShort(t),this.sendToServer(i)},t.prototype.sendExchangeHejiEquip=function(e){var t=this.getBytes(12);t.writeShort(e),this.sendToServer(t)},t.prototype.getWearEquipsData=function(e){return this.equipListData[e]?this.equipListData[e]:null},t.prototype.getSkillLimitLevel=function(){return b.default.ins().lv>0?80+10*b.default.ins().lv:m.default.level>80?80:m.default.level},t.prototype.getSingleSkillGrewUpCost=function(e,t){var i=this.getSkillLimitLevel(),n=h.default.ins().getSubRoleByIndex(e).skillsData[t],a=m.default.gold,o=0;if(n.lv>0){for(var r=n.lv;r<i;r++){var s=d.default.SkillsUpgradeConfig[r].cost;if(o+s>a)return o;o+=s}return o}return 0},t.prototype.getSingleSkillGrewUpCostTest=function(e,t){var i=this.getSkillLimitLevel(),n=h.default.ins().getSubRoleByIndex(e).skillsData[t],a=m.default.gold,o=0;if(n.lv>0){for(var r=n.lv;r<i;r++){var s=d.default.SkillsUpgradeConfig[r].cost;if(o+s>a)return 0==o?s:o;o+=s}return o}return 0},t.prototype.canGrewupSkill=function(){for(var e=[],t=this.getSkillLimitLevel(),i=h.default.ins().subRolesLen,n=0;n<i;n++)for(var a=h.default.ins().getSubRoleByIndex(n),o=0;o<a.skillsData.length;o++){var r=a.skillsData[o];if(r.lv>0&&t>r.lv){var s=d.default.SkillsUpgradeConfig[r.lv].cost;if(m.default.gold>=s){e[n]=!0;break}}}return e},t.prototype.canGrewupAllSkills=function(e){for(var i=this.getSkillLimitLevel(),n=h.default.ins().getSubRoleByIndex(e).skillsData,a=!1,o=m.default.gold,r=0;r<n.length;r++){if(0!=(u=n[r]).configID){var s=d.default.SkillsUpgradeConfig[u.lv];s&&o>=s.cost&&u.configID!=i&&(a=!0)}}if(a){for(r=0;r<5;r++){var u;if((u=n[r]).lv>0)if(u.lv<t.ins().getSkillLimitLevel())if(t.ins().getSingleSkillGrewUpCost(e,r)>0)return!0}return!1}return a},t.prototype.postShowSkillWord=function(e){return e},t.prototype.postHejiUpdate=function(){},t.prototype.postHejiStartCD=function(){},t.prototype.postHejiRemove=function(){},t.prototype.postHejiEquipChange=function(){},t.prototype.checkIsHaveBestEquip=function(e,t){void 0===t&&(t=-1);var i=this.equipListData[e],n=C.default.ins().getHejiEquipsByType(e);if(n.length>0)for(var a=void 0,o=0;o<n.length;o++){var r=(a=n[o]).itemConfig.level?a.itemConfig.level:0,s=a.itemConfig.zsLevel?a.itemConfig.zsLevel:0;if(a.itemConfig.level<=200&&(r<=m.default.level||s<=b.default.ins().lv)&&a.itemConfig.level<=m.default.level&&s<=b.default.ins().lv){var u=0;if(!i||0==i.configID){if(a.itemConfig.useCond)continue;return!0}if(u=i.point,a.point>u&&a.itemConfig.useCond==i.itemConfig.id)return!0}}return!1},t.prototype.sendUpgradeForge=function(e){var t=this.getBytes(13);t.writeShort(e),this.sendToServer(t)},t.prototype.postUpgradeForge=function(e){this.getPunchForge().parser(e)},t.prototype.sendChangeTogeatterHigh=function(e){var t=this.getBytes(14);t.writeInt(e),this.sendToServer(t)},t.prototype.isHejiSkill=function(e){for(var t in d.default.TogetherHitConfig)if(d.default.TogetherHitConfig[t].skill_id.indexOf(e)>=0)return!0;return!1},t.MAX_LEVEL=200,t.ACTIVE_LEVEL=10,t.HEJI_SKILL=7e4,t.HEJI_SHOW_LEVEL=60,t.descArr=["\u5408\u51fb\u6280\u80fd\u5bf9\u89d2\u8272\u4f24\u5bb3+%s","\u5408\u51fb\u6280\u80fd\u5bf9\u602a\u7269\u4f24\u5bb3+%s","\u6012\u6c14\u6062\u590d\u901f\u5ea6+%s"],t}(n.default);i.default=B,B.ins(),function(e){e[e.MAGIC=24]="MAGIC",e[e.CURE=32]="CURE",e[e.POISONING=33]="POISONING",e[e.ARMOR=34]="ARMOR",e[e.SUMMON=35]="SUMMON"}(i.SHORT_SKILLID||(i.SHORT_SKILLID={}));var M=function(){function e(){}return e.EFF_SKY_BALL=53001,e.HEJI_SKILLS=[71001,72001,73001],e}();i.SkillConst=M,cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../Utils/EgretUtils":"EgretUtils","../../ai/AIUtil":"AIUtil","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../base/ObjectPool":"ObjectPool","../../consts/DamageTypes":"DamageTypes","../../consts/MoneyConst":"MoneyConst","../../entity/Actor":"Actor","../../entity/EntityBuff":"EntityBuff","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../artifact/Artifact":"Artifact","../bag/ItemData":"ItemData","../bag/UserBag":"UserBag","../gamescene/const/ExAttributeType":"ExAttributeType","../heji/model/HejiProgressData":"HejiProgressData","../server/GameServer":"GameServer","../skill/data/SkillData":"SkillData","../tips/UserTips":"UserTips","../zs/UserZs":"UserZs","./model/PunchEquipForgeData":"PunchEquipForgeData"}],UserTask:[function(e,t,i){"use strict";cc._RF.push(t,"7c70cXRYTFKLb63YpLQu+W2","UserTask"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("./TaskData"),o=e("../../../core/net/PackageID"),r=e("../../../core/base/MessageCenter"),s=e("../../manager/GlobalConfig"),u=e("../../../core/base/ErrorLog"),l=e("../server/GameServer"),c=e("../../entity/Actor"),d=e("../lilian/LiLian"),f=e("./AchievementData"),p=e("./VitalityData"),h=e("./LimitTaskData"),g=e("../../../core/base/ViewManager"),y=e("./view/LimitStartTipsView"),v=function(e){function t(){var i=e.call(this)||this;return i.limitTaskList=[],i.limitTaskDic={},i.limitTaskState=0,i.limitTaskCount=0,i.limitTaskEndTime=-1,i.currTaskListsId=-1,i.lastState=-1,r.default.compile(t),i.sysId=o.PackageID.Task,i.regNetMsg(1,i.doTaskData),i.regNetMsg(2,i.doTaskChangeData),i.regNetMsg(3,i.doVitality),i.regNetMsg(4,i.doVitalityAwards),i.regNetMsg(5,i.doAchieveData),i.regNetMsg(7,i.doJoinAchieveData),i.regNetMsg(8,i.doAchieveChangeData),i.regNetMsg(9,i.doLimitDataChange),i.regNetMsg(10,i.doUpdateLimitData),i.achiEvement=[],i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendGetTask=function(e){var t=this.getBytes(1);t.writeInt(e),this.sendToServer(t)},t.prototype.sendGetVitalityAwards=function(e){var t=this.getBytes(2);t.writeInt(e),this.sendToServer(t)},t.prototype.sendGetAchieve=function(e){var t=this.getBytes(3);t.writeInt(e),this.sendToServer(t)},t.prototype.doTaskData=function(e){this.task=[],this.vitalityAwards=[];for(var t=e.readInt(),i=0;i<t;i++){var n=new a.default;n.id=e.readInt(),n.value=e.readInt(),n.state=e.readInt(),this.task.push(n)}this.vitality=e.readInt();var o=e.readInt();for(i=0;i<o;i++){var r=new p.default;r.id=e.readInt(),r.state=e.readInt(),this.vitalityAwards.push(r)}this.sortTask()},t.prototype.doTaskChangeData=function(e){var i=e.readInt(),n=t.ins().getTaskDataById(i);u.default.Assert(n,"UserTask  doTaskChangeData id  = "+i)||(n.value=e.readInt(),n.state=e.readInt(),t.ins().sortTask(),t.ins().postTaskChangeData())},t.prototype.postTaskChangeData=function(){},t.prototype.doVitality=function(e){this.vitality=e.readInt()},t.prototype.doVitalityAwards=function(e){var i=e.readInt();this.getVitalityAwardsById(i).state=e.readInt(),t.ins().postTaskChangeData()},t.prototype.doAchieveData=function(e){this.achiEvement.length=0;for(var i=e.readInt(),n=0;n<i;n++){var a=new f.default;a.achievementId=e.readInt(),a.id=e.readInt(),a.state=e.readInt(),a.value=e.readInt();var o=this.getAchieveConfById(a.id);null==o?debug.warn("\u65e0\u6cd5\u83b7\u5f97\u6210\u5c31\u914d\u7f6e:"+a.id+"\uff0c\u8bf7\u68c0\u67e5\u914d\u7f6e"):a.achievementType=o.achievementType,1e3==a.achievementId?(this.taskTrace=a,100003==this.taskTrace.id&&this.taskTrace.state,t.ins().postUpdteTaskTrace()):this.achiEvement.push(a)}this.sortAchiEvement(),this.postUpdateAchieve()},t.prototype.getTaskData=function(e,t){for(var i,n=this.achiEvement.length,a=0;a<n;a++){var o=this.achiEvement[a];if(o.achievementId==e&&o.id==t){i=o;break}}return i},t.prototype.getTaskTarget=function(e){var t=0,i=this.getAchieveConfById(e);return i&&(t=i.target),t},t.prototype.postUpdateAchieve=function(){},t.prototype.postUpdteTaskTrace=function(){},t.prototype.postUpdteLimitTaskData=function(e){return e},t.prototype.postLimitTaskEnd=function(){},t.prototype.doJoinAchieveData=function(e){this.changeAchieve(e)},t.prototype.doAchieveChangeData=function(e){this.changeAchieve(e)},t.prototype.doLimitDataChange=function(e){var i=e.readByte();if(this.limitTaskState=i,this.limitTaskCount=0,0==i)this.currTaskListsId=e.readInt(),this.initLimitTaskData(this.currTaskListsId);else if(1==i){this.currTaskListsId=e.readInt(),this.initLimitTaskData(this.currTaskListsId),this.limitTaskEndTime=e.readInt();var n=s.default.LimitTimeConfig[this.currTaskListsId];1==this.currTaskListsId&&n.time==this.limitTaskEndTime&&g.default.ins().open(y.default),this.limitTaskEndTime+=Math.floor(l.default.serverTime/1e3);for(var a=e.readShort(),o=0;o<a;o++){var r=e.readInt();this.limitTaskDic[r].parser(e),2==this.limitTaskDic[r].state&&this.limitTaskCount++}}t.ins().postUpdteLimitTaskData()},t.prototype.initLimitTaskData=function(e){this.limitTaskList=[],this.limitTaskDic={};var t=s.default.LimitTimeConfig[e];for(var i in t.taskIds){var n=s.default.LimitTimeTaskConfig[t.taskIds[i]],a=new h.default;a.setBaseData(n),this.limitTaskList.push(a),this.limitTaskDic[a.id]=a}},t.prototype.doUpdateLimitData=function(e){var i=e.readInt(),n=this.limitTaskDic[i];n?(n.parser(e),2==n.state&&this.limitTaskCount++,t.ins().postUpdteLimitTaskData(n)):console.error("\u9650\u65f6\u4efb\u52a1\u672a\u521d\u59cb\u5316\uff1a"+i)},t.prototype.sendGetLimitTask=function(){this.sendBaseProto(5)},t.prototype.sendGetLimitTaskReward=function(e){var t=this.getBytes(6);t.writeInt(e),this.sendToServer(t)},t.prototype.changeAchieve=function(e){var i,n=e.readInt();i=1e3==n?this.taskTrace:this.getAchieveDataById(n),u.default.Assert(i,"UserTask  data is null  achievementId = "+n)||(i.id=e.readInt(),i.state=e.readInt(),i.value=e.readInt(),1e3==i.achievementId?t.ins().postUpdteTaskTrace():(this.sortAchiEvement(),t.ins().postTaskChangeData()))},t.prototype.getChengjiuDataByType=function(e){if(void 0!=this.achiEvement){for(var t=[],i=0;i<this.achiEvement.length;i++)this.achiEvement[i].achievementType==e&&t.push(this.achiEvement[i]);return this.sortAchievementAcByType(t)}console.info("\u901a\u8fc7\u6210\u5c31\u7c7b\u578b\u83b7\u53d6\u6210\u5c31\u6570\u636e  achiEvement = null")},t.prototype.sortAchievementAcByType=function(e){return e&&e.sort(function(e,t){return 2==e.state?1:2==t.state?-1:t.state-e.state}),e},t.prototype.getAchieveDataById=function(e){if(void 0!=this.achiEvement){for(var t=0;t<this.achiEvement.length;t++)if(this.achiEvement[t].achievementId==e)return this.achiEvement[t];return null}console.trace("\u901a\u8fc7\u6210\u5c31\u7c7b\u578b\u83b7\u53d6\u6210\u5c31\u6570\u636e  achiEvement = null")},t.prototype.getAchieveByTaskId=function(e){for(var t=0;t<this.achiEvement.length;t++)if(this.achiEvement[t].id==e)return this.achiEvement[t];return null},t.prototype.getVitalityAwardsById=function(e){for(var t=0;t<this.vitalityAwards.length;t++)if(this.vitalityAwards[t].id==e)return this.vitalityAwards[t];return null},t.prototype.getTaskDataById=function(e){if(!this.task)return null;for(var t=0;t<this.task.length;t++)if(this.task[t].id==e)return this.task[t];return null},t.prototype.getAchieveConfById=function(e){var t,i=s.default.AchievementTaskConfig;for(t in i){var n=i[t];if(n.taskId==e)return n}return null},t.prototype.getAwardsConfigById=function(e){var t,i=s.default.DailyAwardConfig;for(t in i){var n=i[t];if(n.id==e)return n}return null},t.prototype.getTaskStast=function(){if(this.task){var e=void 0;for(e=0;e<this.task.length;e++)if(1==this.task[e].state)return void t.ins().postUpdataTaskPoint(!0);for(e=0;e<this.vitalityAwards.length;e++){var i=this.getAwardsConfigById(this.vitalityAwards[e].id);if(this.vitality>=i.valueLimit&&0==this.vitalityAwards[e].state)return void t.ins().postUpdataTaskPoint(!0)}for(e=0;e<this.achiEvement.length;e++)if(1==this.achiEvement[e].state)return void t.ins().postUpdataTaskPoint(!0);t.ins().postUpdataTaskPoint(!1)}else;},t.prototype.postUpdataTaskPoint=function(e){return e},t.prototype.sortTask=function(){if(this.task.length>2){this.task.sort(this.sort);for(var e=[],t=0;t<this.task.length;t++)0!=this.task[t].state&&(e.push(this.task[t]),this.task.splice(t,1),t--);e.length>0&&(this.task=this.task.concat(e))}},t.prototype.sort=function(e,t){var i=e.id,n=t.id;return i<n?-1:i>n?1:0},t.prototype.sortAchiEvement=function(){for(var e=0;e<this.achiEvement.length;e++){var t=this.achiEvement[e];1==t.state?(this.achiEvement.splice(e,1),this.achiEvement.unshift(t)):2==t.state&&(this.achiEvement.splice(e,1),this.achiEvement.push(t))}},t.prototype.getIsOpenChengjiu=function(){return c.default.level>=7},t.prototype.getIsHaveChengjiuReward=function(){if(!this.getIsOpenChengjiu())return!1;for(var e=0,t=d.default.ins().chengjiuMaxData();e<t.length;e++){var i=t[e],n=this.getChengjiuDataByType(i);if(void 0==n)return void console.trace("\u662f\u5426\u6709\u6210\u5c31\u5956\u52b1\u53ef\u9886\u53d6 datas = null");for(var a=0,o=n;a<o.length;a++){if(1==o[a].state)return!0}}return!1},t.prototype.getIsHaveChengjiuRewardBytype=function(e){for(var t=0,i=this.getChengjiuDataByType(e);t<i.length;t++){if(1==i[t].state)return!0}return!1},t.prototype.getTaskState=function(){var e=t.ins().taskTrace;if(e){t.ins().getAchieveConfById(e.id);return!(!t.ins().getAchieveConfById(e.id+1)&&2==e.state)}return!1},t.prototype.getLimitTaskRed=function(){for(var e=0;e<t.ins().limitTaskList.length;e++)if(1==t.ins().limitTaskList[e].state)return 1;return 0},t.prototype.postParabolicItem=function(){},t.prototype.getLimitTimeId=function(e){for(var t in s.default.LimitTimeConfig){var i=s.default.LimitTimeConfig[t];if(-1!=i.taskIds.indexOf(e))return i.id}return 0},t}(n.default);i.default=v,window.GameSystem.push(v.ins.bind(v)),cc._RF.pop()},{"../../../core/base/ErrorLog":"ErrorLog","../../../core/base/MessageCenter":"MessageCenter","../../../core/base/ViewManager":"ViewManager","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../lilian/LiLian":"LiLian","../server/GameServer":"GameServer","./AchievementData":"AchievementData","./LimitTaskData":"LimitTaskData","./TaskData":"TaskData","./VitalityData":"VitalityData","./view/LimitStartTipsView":"LimitStartTipsView"}],UserTips:[function(e,t,i){"use strict";cc._RF.push(t,"664c9//b5dLW5sU0NA8UupL","UserTips"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/base/BaseClass"),a=e("../../manager/UILoadMgr"),o=e("../../../core/utils/TextFlowMaker"),r=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.tipsItem=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.showTips=function(e){var t=this;"\u5143\u5b9d\u4e0d\u8db3"!=e&&"|C:0xf3311e&T:\u5143\u5b9d\u4e0d\u8db3|"!=e||console.error("\u91cd\u5199 \u63d0\u793a");var i=a.default.inst.getPrefab(a.prefabName.common_tips),n=cc.instantiate(i);n.getChildByName("RichText").getComponent(cc.RichText).string=o.default.generateTextFlow(e);var r=cc.director.getScene().getChildByName("Canvas");n.parent=r;var s=this.tipsItem.length;s>0&&(this.tipsItem[s-1].y>300?n.position=cc.v2(0,70):n.position=cc.v2(0,this.tipsItem[s-1].y+41)),this.tipsItem.push(n);var u=cc.sequence(cc.spawn(cc.moveBy(1,0,30),cc.fadeOut(3)),cc.callFunc(function(){t.tipsItem.shift().removeFromParent()}));n.runAction(u)},t.prototype.showCenterTips=function(e){this.showTips(e)},t.prototype.showTaskTips=function(e){this.showTips(e)},t}(n.default);i.default=r,cc._RF.pop()},{"../../../core/base/BaseClass":"BaseClass","../../../core/utils/TextFlowMaker":"TextFlowMaker","../../manager/UILoadMgr":"UILoadMgr"}],UserTupo:[function(e,t,i){"use strict";cc._RF.push(t,"45727suxblJe5+wjcqlDNb2","UserTupo"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../entity/SubRoles"),r=e("./UserForge"),s=function(e){function t(){var t=e.call(this)||this;return t.sysId=a.PackageID.Tupo,t.regNetMsg(2,t.postForgeUpdata),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postForgeUpdata=function(e){var t=e.readShort();o.default.ins().getSubRoleByIndex(t).parseForgeChange(e,this.sysId),r.default.ins().postForgeUpdate(this.sysId)},t.prototype.sendUpGrade=function(e,t){var i=this.getBytes(2);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t}(n.default);i.default=s,s.ins(),cc._RF.pop()},{"../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/SubRoles":"SubRoles","./UserForge":"UserForge"}],UserVip:[function(e,t,i){"use strict";cc._RF.push(t,"937c2N7BadPIb0O1zLwra0G","UserVip"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../manager/GlobalConfig"),r=e("../server/GameServer"),s=e("../../entity/Actor"),u=e("../../../core/base/MessageCenter"),l=function(e){function t(){var i=e.call(this)||this;return i.weekState=0,i.vipGiftState=[],i.sysId=a.PackageID.Vip,u.default.compile(t),i.regNetMsg(1,i.postUpdateVipData),i.regNetMsg(2,i.postUpdataExp),i.regNetMsg(3,i.postUpdateVipAwards),i.regNetMsg(4,i.postUpdateWeekAwards),i.regNetMsg(5,i.postVipGiftBuy),i.regNetMsg(6,i.postSuperVipInfo),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initLogin=function(){var e=window.getVipInfo();e&&(this.superVipData=e,this.postSuperVipData(this.superVipData))},t.prototype.postSuperVipData=function(e){return e},t.prototype.sendGetAwards=function(e){var t=this.getBytes(1);t.writeInt(e),this.sendToServer(t)},t.prototype.sendGetWeekAwards=function(){this.sendBaseProto(4)},t.prototype.sendGetVipGift=function(e){var t=this.getBytes(5);t.writeByte(e),this.sendToServer(t)},t.prototype.sendGetSuperVipInfo=function(){this.sendBaseProto(6)},t.prototype.postUpdateVipData=function(e){this.lv=e.readShort(),this.exp=e.readInt(),this.state=e.readInt(),this.weekState=e.readShort();var t=e.readShort();this.vipGiftState=[];for(var i=0;i<t;i++){var n={id:e.readUnsignedInt(),state:e.readByte()};this.vipGiftState.push(n)}},t.prototype.postUpdataExp=function(e){var t=e.readShort();this.exp=e.readInt(),this.weekState=e.readShort(),t>this.lv&&(this.lv=t)},t.prototype.postUpdateVipAwards=function(e){this.state=e.readInt()},t.prototype.postUpdateWeekAwards=function(e){e.readBoolean()&&(this.weekState=0)},t.prototype.postVipGiftBuy=function(e){for(var t=e.readShort(),i=0;i<t;i++)for(var n=e.readUnsignedInt(),a=e.readByte(),o=0;o<this.vipGiftState.length;o++)n==this.vipGiftState[o].id&&(this.vipGiftState[o].state=a)},t.prototype.postSuperVipInfo=function(e){this.superVip=this.superVip||[];for(var t=0;t<2;t++)this.superVip[t]=Math.floor(e.readInt()/100)},t.prototype.getSuperVipState=function(){if(this.superVip)for(var e in o.default.SuperVipConfig){var t=+e-1;if(o.default.SuperVipConfig[e].money<=(this.superVip[t]||0))return!0}return!1},t.prototype.getVipState=function(){for(var e=!1,t=0;t<this.lv;t++)if(void 0!=this.state&&0==(this.state>>t&1))return e=!0;return e},t.prototype.getVipGiftCanBuy=function(e){var t=o.default.VipGiftConfig[e];if(t.cond)for(var i=0,n=t.cond;i<n.length;i++){var a=n[i];if(0==(1&this.vipGiftState[+a-1].state))return!1}return!0},t.prototype.getVipGiftIsBuy=function(e){return 1==(1&this.vipGiftState[e-1].state)},t.prototype.getVipGiftRedPoint=function(e){var t=o.default.VipGiftConfig[e];return this.lv>=t.vipLv&&(this.getVipGiftCanBuy(e)&&!this.getVipGiftIsBuy(e)&&t.needYb<=s.default.yb)},t.prototype.getVipIndex=function(e){for(var t in o.default.VipGiftConfig){var i=o.default.VipGiftConfig[t].hfTimes;if((i=i||0)==e)return o.default.VipGiftConfig[t]}return null},t.prototype.checkVipSuccess=function(e){var t=!0;for(var i in o.default.VipGiftConfig){var n=o.default.VipGiftConfig[i].hfTimes;if((n=n||0)==e){var a=o.default.VipGiftConfig[i].id;if(!this.getVipGiftIsBuy(a)){t=!1;break}}}return t},t.prototype.getVipPage=function(){var e=[];for(var t in o.default.VipGiftConfig){var i=o.default.VipGiftConfig[t].hfTimes;i=i||0,r.default._hefuCount>=i&&-1==e.indexOf(i)&&e.push(i)}return e},t}(n.default);i.default=l,window.GameSystem.push(l.ins.bind(l)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../server/GameServer":"GameServer"}],UserWarn:[function(e,t,i){"use strict";cc._RF.push(t,"2bc36ejklBBBajOt5gngHkn","UserWarn"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("../../../core/base/ViewManager"),r=e("./view/WarnWin"),s=e("./view/ShopGoodsWarn"),u=function(e){function t(){return e.call(this)||this}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.setWarnLabel=function(e,t,i,n,a){void 0===n&&(n="normal"),void 0===a&&(a="left"),o.default.ins().open(r.default);var s=o.default.ins().getView(r.default);return s.setWarnLabel(e,t,i,n,a),s},t.prototype.setBuyGoodsWarn=function(e,t){void 0===t&&(t=1),o.default.ins().open(s.default);var i=o.default.ins().getView(s.default);return i.setData(e,t),i},t}(a.default);i.UserWarn=u,function(e){e.userWarn=u.ins.bind(u)}(n||(n={})),cc._RF.pop()},{"../../../core/base/ViewManager":"ViewManager","../../base/BaseSystem":"BaseSystem","./view/ShopGoodsWarn":"ShopGoodsWarn","./view/WarnWin":"WarnWin"}],UserZhuLing:[function(e,t,i){"use strict";cc._RF.push(t,"209656tkMdBiKWMqOm+Gsph","UserZhuLing"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../entity/SubRoles"),r=e("./UserForge"),s=function(e){function t(){var t=e.call(this)||this;return t.sysId=a.PackageID.Zhuling,t.regNetMsg(2,t.postForgeUpdata),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postForgeUpdata=function(e){var t=e.readShort(),i=o.default.ins().getSubRoleByIndex(t).parseForgeChange(e,this.sysId);r.default.ins().postForgeUpdate(this.sysId,i)},t.prototype.sendUpGrade=function(e,t){var i=this.getBytes(2);i.writeShort(e),i.writeShort(t),this.sendToServer(i)},t}(n.default);i.default=s,s.ins(),cc._RF.pop()},{"../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/SubRoles":"SubRoles","./UserForge":"UserForge"}],UserZs:[function(e,t,i){"use strict";cc._RF.push(t,"38262OTi6ZCSYhy7M3SNgFz","UserZs"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../core/net/PackageID"),a=e("../../base/BaseSystem"),o=e("../../entity/Actor"),r=e("../../../core/base/MessageCenter"),s=e("../../manager/GlobalConfig"),u=e("../bag/UserBag"),l=function(e){function t(){var i=e.call(this)||this;return i.isSendXW=[],r.default.compile(t),i.sysId=n.PackageID.Zs,i.regNetMsg(1,i.postZsData),i.exchange=!1,i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postZsData=function(e){this.lv=e.readInt();this.exp;this.exp=e.readInt(),this.upgradeCount=[e.readShort(),e.readShort(),e.readShort()],this.postZsLv()},t.prototype.postZsLv=function(){},t.prototype.sendGetXiuWei=function(e){var t=this.getBytes(1);t.writeByte(e),this.sendToServer(t)},t.prototype.sendZsUpgrade=function(){this.sendBaseProto(2)},t.prototype.canUpgrade=function(){var e=s.default.ZhuanShengLevelConfig[this.lv+1];return!!e&&this.exp>=e.exp},t.prototype.isMaxLv=function(){return!s.default.ZhuanShengLevelConfig[this.lv+1]},t.prototype.canGet=function(){var e=0;if(!this.upgradeCount)return e;for(var i=s.default.ZhuanShengConfig,n=[i.conversionCount,i.normalCount,i.advanceCount],a=[0,i.normalItem,i.advanceItem],r=0;r<n.length;r++)n[r]-this.upgradeCount[r]&&(!a[r]&&o.default.level>80||u.default.ins().getBagGoodsCountById(0,a[r]))&&(0==r&&t.ins().exchange||(e|=1<<r));return e},t.prototype.canOpenZSWin=function(){var e=o.default.level;return!((null!=this.lv?this.lv:0)<=0&&e<80)},t}(a.default);i.default=l,l.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag"}],Util:[function(e,t,i){"use strict";cc._RF.push(t,"59820vJTWJEkYAk0kkWABGO","Util"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.isNullOrUndefined=function(t){return e.isUndefined(t)||null==t},e.isUndefined=function(e){return void 0===e},e.isNull=function(e){return null==e},e.isNumber=function(e){return"number"==typeof e},e.isString=function(e){return"string"==typeof e},e.isBoolean=function(e){return"boolean"==typeof e},e.isFunction=function(e){return"function"==typeof e},e.isEmptyOrNullString=function(t){return e.isNullOrUndefined(t)||""===t},e.getStrBytes=function(e){for(var t=0,i=0;i<e.length;i++){var n=e.charCodeAt(i);t+=n>0&&n<128?1:2}return t},e.getColoFromHEXByQua=function(t){return cc.Color.BLACK.fromHEX(e.QUALITY_COLOR[t])},e.getJobNameSting=function(t){return e.JobNameString[t]},e.getEquipPartName=function(t){return e.EquipPartName[t]},e.gethashcode=function(){var e=(new Date).valueOf();return function(e){for(var t=0,i=e.length,n=0;n<i;n++)(t=31*t+e.charCodeAt(n))>2147483647&&(t%=2147483648);return t}(function(e,t,i){var n="",a=t,o=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];e&&(a=Math.round(Math.random()*(i-t))+t);for(var r=0;r<a;r++)n+=o[Math.round(Math.random()*(o.length-1))];return n}(!1,6,26)+e.toString())},e.QUALITY_COLOR=["#e2dfd4","#35e62d","#d242fb","#ff750f","#f3311e","#ffd93f"],e.JobNameString=["","\u6218\u58eb","\u6cd5\u5e08","\u9053\u58eb"],e.EquipPartName=["\u6b66\u5668","\u5934\u76d4","\u8863\u670d","\u9879\u94fe","\u62a4\u8155","\u8170\u5e26","\u6212\u6307","\u978b\u5b50"],e}();i.Util=n,cc._RF.pop()},{}],ViewManager:[function(e,t,i){"use strict";cc._RF.push(t,"e60ae07xONGaoY+gN9FRmrl","ViewManager"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/base/BaseClass"),a=e("../../game/Utils/EgretUtils"),o=e("../../MainScene"),r=e("../view/BaseEuiView"),s=e("../../game/enum/LayerManager"),u=function(e){function t(){var t=e.call(this)||this;return t._views=new Map,t._opens=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.open=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=this.getKey(e);this._views.get(n)||(this.showUIFab(n,t),console.log("\u6253\u5f00\u7a97\u53e3",n,t),this._opens.push(n))},t.prototype.close=function(e){for(var t=[],i=1;i<arguments.length;i++)t[i-1]=arguments[i];var n=this.getKey(e);if(this._views.get(n)){var a=this._opens.indexOf(n);a>=0&&this._opens.splice(a,1),this._views.get(n).getComponent(n).close(),this._views.get(n).destroy(),this._views.delete(n)}else console.error("\u4e0d\u5b58\u5728\u7a97\u53e3",e)},t.prototype.isShow=function(e){return this._opens.indexOf(this.getKey(e))>=0},t.prototype.showUIFab=function(e){for(var t=this,i=[],n=1;n<arguments.length;n++)i[n-1]=arguments[n];var a=window.ResPath[e];a?cc.loader.loadRes(a,cc.Prefab,function(n,a){if(n)console.error("prefab path error",e);else{var r=cc.instantiate(a),s=r.getComponent(e);if(s){s.initUI(),s.initData(),s.open(i);var u=s.parentRoot;u?r.parent=o.default.inst[u]:console.error(e+" parentRoot null"),t._views.set(e,r)}else console.error("\u672a\u6dfb\u52a0\u7ec4\u4ef6\u811a\u672c:",e)}}):console.error(e+" keypath null")},t.prototype.getView=function(e){var t=this.getKey(e);return this._views.get(t)?this._views.get(t).getComponent(t):null},t.prototype.getKey=function(e){var t="";return"string"==typeof e?t=e:"function"==typeof e?t=a.default.getQualifiedClassName(e):e instanceof r.default?t=e.__proto__.__classname__:debug.log("\u6253\u5f00\u754c\u9762\u53ea\u652f\u6301\u7c7b\u540d\u548c\u7c7b\u540d\u7684\u5b57\u7b26\u4e32\u5f62\u5f0f,\u5173\u95ed\u754c\u9762\u53ea\u652f\u6301\u7c7b\u540d\u548c\u7c7b\u540d\u7684\u5b57\u7b26\u4e32\u4ee5\u53ca\u7c7b\u7684\u5b9e\u4f8b\u5f62\u5f0f,\u9519\u8bef\u7f16\u53f7:"+e),t},t.prototype.closeLastTopView=function(){for(var e=this._opens.length-1;e>=0;e--){var t=this.getView(this._opens[e]);if(t&&t.parentRoot==s.LayerManager.UI_Main){this.close(t);break}}},t}(n.default);i.default=u,cc._RF.pop()},{"../../MainScene":"MainScene","../../core/base/BaseClass":"BaseClass","../../game/Utils/EgretUtils":"EgretUtils","../../game/enum/LayerManager":"LayerManager","../view/BaseEuiView":"BaseEuiView"}],VipConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e8135yUoW9CjotMY6Nm9dVn","VipConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.boss1buy=0,this.boss2buy=0}}();i.default=n,cc._RF.pop()},{}],VipGiftConfig:[function(e,t,i){"use strict";cc._RF.push(t,"23524QjHi1LAIR5lzwF29l9","VipGiftConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],VipGiftIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"946167MlCBKu7vaVifq4L2j","VipGiftIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../../entity/Actor"),o=e("../../vip/UserVip"),r=e("../../recharge/Recharge"),s=e("../../opensystem/OpenSystem"),u=e("../../../consts/SystemConst"),l=e("../../../manager/GlobalConfig"),c=e("../../server/GameServer"),d=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.showMessage=[a.default.ins().postLevelChange,o.default.ins().postVipGiftBuy],n.updateMessage=[o.default.ins().postUpdateVipData,o.default.ins().postVipGiftBuy,r.default.ins().postUpdateRechargeEx,a.default.ins().postYbChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!s.default.ins().checkSysOpen(u.SystemType.VIPGIFT))return!1;for(var e=Object.keys(l.default.VipGiftConfig).length,t=o.default.ins().vipGiftState,i=1;i<=e;i++){var n=l.default.VipGiftConfig[i].hfTimes;if(n=n||0,c.default._hefuCount>=n&&0==(1&t[i-1].state))return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=o.default.ins().lv;for(var t in l.default.VipGiftConfig){var i=l.default.VipGiftConfig[t],n=i.hfTimes;if(n=n||0,e>=i.vipLv&&c.default._hefuCount>=n&&o.default.ins().getVipGiftRedPoint(+t))return 1}return 0},t.prototype.tapExecute=function(){ViewManager.ins().open(VipGiftWin)},t}(n.default);i.default=d,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../manager/GlobalConfig":"GlobalConfig","../../opensystem/OpenSystem":"OpenSystem","../../recharge/Recharge":"Recharge","../../server/GameServer":"GameServer","../../vip/UserVip":"UserVip","./RuleIconBase":"RuleIconBase"}],VipGridConfig:[function(e,t,i){"use strict";cc._RF.push(t,"336ccbckOJMBa+WaoqxD3TR","VipGridConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],VitalityData:[function(e,t,i){"use strict";cc._RF.push(t,"4b98cscdx5NfoT7eg2NBc/H","VitalityData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],WJBattleData:[function(e,t,i){"use strict";cc._RF.push(t,"8118e/VQetBNre1iNYQKe90","WJBattleData");var n;(function(){function e(){this.isFirstKiller=0,this.isMVP=0,this.isResult=!1}e.prototype.readResultData=function(e){this.servId=e.readInt(),this.playerName=e.readString(),this.camp=e.readInt(),this.killNum=e.readInt(),this.killedNum=e.readInt(),this.assistsNum=e.readInt(),this.collectFlagNum=e.readInt(),this.isFirstKiller=e.readByte(),this.isMVP=e.readByte()},e.prototype.readViewData=function(e){this.servId=e.readInt(),this.playerName=e.readString(),this.camp=e.readInt(),this.killNum=e.readInt(),this.killedNum=e.readInt(),this.assistsNum=e.readInt(),this.collectFlagNum=e.readInt(),this.isFirstKiller=e.readByte()},e.prototype.readMyData=function(e){this.killNum=e.readInt(),this.killedNum=e.readInt(),this.assistsNum=e.readInt(),this.collectFlagNum=e.readInt()}})();(function(e){e[e.ME=100]="ME",e[e.ENEMY=200]="ENEMY"})(n||(n={})),cc._RF.pop()},{}],WJBattleIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"50511v2koVNZZuNVXH3mjri","WJBattleIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../kf/wujiBattlefield/WJBattlefieldSys"),o=e("../../kf/KFBattleRedPoint"),r=function(e){function t(t,i){return e.call(this,t,i)||this}return __extends(t,e),t.prototype.checkShowIcon=function(){return a.default.ins().isOpen},t.prototype.checkShowRedPoint=function(){return o.default.ins().redPoint1},t.prototype.tapExecute=function(){ViewManager.ins().open(WJBattlefieldWin)},t}(n.default);i.default=r,cc._RF.pop()},{"../../kf/KFBattleRedPoint":"KFBattleRedPoint","../../kf/wujiBattlefield/WJBattlefieldSys":"WJBattlefieldSys","./RuleIconBase":"RuleIconBase"}],WJBattleRedPoint:[function(e,t,i){"use strict";cc._RF.push(t,"f6681dKkddKqqEzQhOKI0o3","WJBattleRedPoint"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(e){function t(){return e.call(this)||this}return __extends(t,e),t}(e("../../../base/BaseSystem").default);i.default=n,window.GameSystem.push(n.ins.bind(n)),cc._RF.pop()},{"../../../base/BaseSystem":"BaseSystem"}],WJBattlefieldSys:[function(e,t,i){"use strict";cc._RF.push(t,"8cbb3RCJHVC/rovC9T6q3/t","WJBattlefieldSys"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../base/BaseSystem"),a=e("../../../../core/net/PackageID"),o=e("../../../../core/base/MessageCenter"),r=e("../../gamescene/GameLogic"),s=e("../../../map/GameMap"),u=e("../KFServerSys"),l=e("../../../../core/utils/DateUtils"),c=e("../../../Utils/EgretUtils"),d=e("../../server/GameServer"),f=function(e){function t(){var i=e.call(this)||this;return i.campAScores=0,i.campBScores=0,i.flagInfos=[],i.overCounts=0,i.matchingTime=0,i.isWJBattle=!1,i.isActiveQuit=!1,o.default.compile(t),i.sysId=a.PackageID.WJBattle,i.regNetMsg(0,i.postStateInfo),i.regNetMsg(1,i.postMatchData),i.regNetMsg(2,i.doCancelMatch),i.regNetMsg(3,i.postEnterFbInfo),i.regNetMsg(4,i.doBattleResult),i.regNetMsg(5,i.postRefCampScores),i.regNetMsg(6,i.postRefCampFlag),i.regNetMsg(7,i.postFirstKiller),i.regNetMsg(8,i.postInfo),i.regNetMsg(9,i.postChatInfo),i.regNetMsg(10,i.doViewDataInfo),i.regNetMsg(11,i.postRemain),i.regNetMsg(12,i.postMyData),i.observe(r.default.ins().postEnterMap,function(){i.isWJBattle&&52e3!=s.default.fubenID&&i.quitWJBattle()}),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postStateInfo=function(e){this.isOpen=e.readByte()>0,this._prepStartTime=e.readInt(),this._startTime=e.readInt(),this._endTime=e.readInt()},t.prototype.postMatchData=function(e){ViewManager.ins().open(WJBattlefieldMatchPanel)},t.prototype.doCancelMatch=function(e){ViewManager.ins().close(WJBattlefieldMatchPanel),t.ins().matchingTime=0},t.prototype.postEnterFbInfo=function(e){e.readInt();this.myCampId=e.readInt(),this.campAScores=e.readInt(),this.campBScores=e.readInt(),this.flagHandle=[];for(var i=e.readByte(),n=0;n<i;n++)this.flagHandle[e.readByte()]=e.readDouble();this.isWJBattle=!0,t.ins().matchingTime=0,ViewManager.ins().close(WJBattlefieldWin),ViewManager.ins().open(WJBattlefieldMainUI),ViewManager.ins().open(WJBattlefieldStartCountdownPanel),u.default.ins().linkingKFState(!1)},t.prototype.doBattleResult=function(e){var t=e.readInt(),i=e.readInt();this.resultMyInfoData=[],this.resultEnemyInfoData=[];for(var n=e.readByte(),a=0;a<n;a++){var o=new WJBattleData;o.readResultData(e),o.isResult=!0,o.camp==this.myCampId?this.resultMyInfoData.push(o):this.resultEnemyInfoData.push(o)}ViewManager.ins().open(WJBattlefieldResultWin,t,i,this.resultMyInfoData,this.resultEnemyInfoData)},t.prototype.postRefCampScores=function(e){this.campAScores=e.readInt(),this.campBScores=e.readInt()},t.prototype.postRefCampFlag=function(e){var t=e.readByte();this.flagInfos[t]=e.readInt()},t.prototype.postFirstKiller=function(e){},t.prototype.postInfo=function(e){var t=this;this.overCounts=e.readInt(),e.readByte()&&!this.isActiveQuit&&WarnWin.show("\u60a8\u6709\u6b63\u5728\u8fdb\u884c\u7684\u73a9\u6cd5\uff0c\u662f\u5426\u7acb\u523b\u8fd4\u56de\uff1f",function(){t.sendEnter()},this,null,null,"sure"),this.isActiveQuit=!1},t.prototype.postChatInfo=function(e){return"s"+e.readInt()+"."+e.readString()+":"+e.readString()},t.prototype.doViewDataInfo=function(e){for(var t=e.readByte(),i=[],n=[],a=0;a<t;a++){var o=new WJBattleData;o.readViewData(e),o.isResult=!1,o.camp==this.myCampId?i.push(o):n.push(o)}ViewManager.ins().open(WJBattlefieldDataWin,i,n)},t.prototype.postRemain=function(e){var t=e.readShort();ViewManager.ins().open(ReliveWin,t,"\u654c\u65b9")},t.prototype.postMyData=function(e){return this.myData=new WJBattleData,this.myData.readMyData(e),this.myData},t.prototype.sendMatch=function(e){var t=this.getBytes(1);t.writeShort(e?1:0),this.sendToServer(t)},t.prototype.sendEnter=function(){this.sendBaseProto(3)},t.prototype.sendCancelMatch=function(){this.sendBaseProto(2)},t.prototype.sendChatInfo=function(e){var t=this.getBytes(9);t.writeString(e),this.sendToServer(t)},t.prototype.sendViewDataInfo=function(){this.sendBaseProto(10)},t.prototype.quitWJBattle=function(){this.isWJBattle=!1,this.myCampId=0,this.campAScores=0,this.campBScores=0,ViewManager.ins().close(WJBattlefieldMainUI),ViewManager.ins().close(WJBattlefieldResultWin),this.isActiveQuit=!0},t.postSwitchServer=function(){ViewManager.ins().close(WJBattlefieldMatchPanel)},t.prototype.getPrepStartTimeStamp=function(){return this._prepStartTime-c.default.getTimer()},t.prototype.getStartTime=function(){return Math.floor((l.default.formatMiniDateTime(this._startTime)-d.default.serverTime)/1e3)},t.prototype.getEndTime=function(){return Math.floor((l.default.formatMiniDateTime(this._endTime)-d.default.serverTime)/1e3)},t.prototype.getMatchingTime=function(){return 0==this.matchingTime?0:this.matchingTime+c.default.getTimer()/1e3>>0},t}(n.default);i.default=f,window.GameSystem.push(f.ins.bind(f)),cc._RF.pop()},{"../../../../core/base/MessageCenter":"MessageCenter","../../../../core/net/PackageID":"PackageID","../../../../core/utils/DateUtils":"DateUtils","../../../Utils/EgretUtils":"EgretUtils","../../../base/BaseSystem":"BaseSystem","../../../map/GameMap":"GameMap","../../gamescene/GameLogic":"GameLogic","../../server/GameServer":"GameServer","../KFServerSys":"KFServerSys"}],WJBattlefieldTrusteeshipAi:[function(e,t,i){"use strict";cc._RF.push(t,"1b38eKtG1pMDoWMeWdbBUzM","WJBattlefieldTrusteeshipAi"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../../../../core/base/BaseClass"),o=e("../WJBattlefieldSys"),r=e("../../../../../core/base/MessageCenter"),s=e("../../../../map/MapView"),u=e("../../../../manager/TimerManager"),l=e("../../../../base/EntityManager"),c=e("../../../gamescene/const/EntityAction"),d=e("../../../../ai/RoleAI"),f=e("../../../gamescene/GameLogic"),p=e("../../../../map/GameMap"),h=e("../../../../../core/utils/MathUtils"),g=e("../../../../../core/utils/Algorithm"),y=function(e){function t(){var t=e.call(this)||this;return t.AI_INTERVAL=1e3,t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.startAi=function(){o.default.ins().isWJBattle&&(r.default.ins().addListener(s.default.moveComplete,this.moveEnd,this),u.default.ins().doTimer(this.AI_INTERVAL,0,this.runLogic,this),this.state=n.Normal)},t.prototype.closeAi=function(){r.default.ins().removeAll(this),u.default.ins().remove(this.runLogic,this);var e=l.default.ins().getNoDieRole();e.stopMove(),e.playAction(c.EntityAction.STAND)},t.prototype.runLogic=function(){if(l.default.ins().getNoDieRole().AI_STATE==d.AI_State.Stand)switch(this.state){case n.Normal:var e=this.findCanCollectFlag();if(e)if(this.checkCanCollectByDis(e)){this.state=n.Collect;for(var t=0;t<3;t++){var i=o.default.ins().flagInfos[t+1];if(!i||i!=o.default.ins().myCampId){var a=this.findNearFlag();a&&f.default.ins().postChangeAttrPoint(a);break}}}else p.default.moveTo(e.x,e.y);else{var r=this.findCampFlag();p.default.moveTo(r.x,r.y)}break;case n.Collect:break;case n.Attack:var s=this.checkNearbyEnemy();s&&s.infoModel?f.default.ins().postChangeAttrPoint(s.infoModel.handle):this.state=n.Normal}},t.prototype.moveEnd=function(e){if(e.team==d.Team.My){var t=this.findCanCollectFlag();this.state=t?n.Collect:n.Attack}},t.prototype.findCanCollectFlag=function(){for(var e=[],t=l.default.ins().getNoDieRole(),i=0;i<3;i++){var n={};n.distance=h.default.getDistance(t.x,t.y,n.x,n.y),e.push(n)}return e.sort(function(e,t){return e.distance>t.distance?1:e.distance<t.distance?-1:0}),e.length?e[0]:null},t.prototype.findCampFlag=function(){for(var e=[],t=(l.default.ins().getNoDieRole(),0);t<3;t++){e.push({})}return e.length?e[h.default.limit(0,e.length-1)]:null},t.prototype.findNearFlag=function(){var e=[],t=l.default.ins().getNoDieRole();if(!t)return 0;for(var i=0,n=o.default.ins().flagHandle;i<n.length;i++){var a=n[i],r=o.default.ins().flagHandle[a],s=l.default.ins().getEntityByHandle(r);if(s&&s.infoModel){if(o.default.ins().flagInfos[a]&&o.default.ins().flagInfos[a]==o.default.ins().myCampId)continue;var u=h.default.getDistance(s.x,s.y,t.x,t.y);e[o.default.ins().flagHandle.indexOf(r)]=u}}return e.sort(g.default.sortAsc),e[1]?o.default.ins().flagHandle[e[1]]:0},t.prototype.checkNearbyEnemy=function(){for(var e=l.default.ins().getNoDieRole(),t=l.default.ins().screeningTargetByPos(e,!1,4,6),i=t.length-1;i>-1;i--)t[i]&&t[i].infoModel&&t[i].infoModel.camp==o.default.ins().myCampId&&t.splice(i,1);return t.length?t[h.default.limit(0,t.length-1)]:null},t.prototype.checkCanCollectByDis=function(e){var t=l.default.ins().getNoDieRole();return h.default.getDistance(t.x,t.y,e.x,e.y)<=50},t}(a.default);i.default=y,function(e){e[e.Normal=0]="Normal",e[e.Collect=1]="Collect",e[e.Attack=2]="Attack"}(n||(n={})),cc._RF.pop()},{"../../../../../core/base/BaseClass":"BaseClass","../../../../../core/base/MessageCenter":"MessageCenter","../../../../../core/utils/Algorithm":"Algorithm","../../../../../core/utils/MathUtils":"MathUtils","../../../../ai/RoleAI":"RoleAI","../../../../base/EntityManager":"EntityManager","../../../../manager/TimerManager":"TimerManager","../../../../map/GameMap":"GameMap","../../../../map/MapView":"MapView","../../../gamescene/GameLogic":"GameLogic","../../../gamescene/const/EntityAction":"EntityAction","../WJBattlefieldSys":"WJBattlefieldSys"}],WanBaGiftbagBasic:[function(e,t,i){"use strict";cc._RF.push(t,"d87f476VcxI6aJ1ErszkifT","WanBaGiftbagBasic"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],WarnWin:[function(e,t,i){"use strict";cc._RF.push(t,"cdca0So1JZNOIVrx0l+34YX","WarnWin"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../enum/LayerManager"),o=e("../UserWarn"),r=e("../../setting/SysSetting"),s=e("../../../../core/base/ViewManager"),u=e("../../../../core/utils/TextFlowMaker"),l=cc._decorator,c=l.ccclass,d=(l.property,function(e){function t(){var t=e.call(this)||this;return t.parentRoot=a.LayerManager.UI_Popup,t}var i;return __extends(t,e),i=t,t.prototype.initData=function(){},t.show=function(e,t,i,n,a,r,s){return void 0===n&&(n=null),void 0===a&&(a=null),void 0===r&&(r="normal"),void 0===s&&(s="center"),o.UserWarn.ins().setWarnLabel(e,{func:t,thisObj:i},{func2:n,thisObj2:a},r,s)},t.prototype.showUI=function(e,t,i,n){this.leftGroup.visible=!1,this.icon1.visible=!1,this.label1.visible=!1,this.rightGroup.visible=!1,this.icon2.visible=!1,this.label2.visible=!1,(e||t)&&(this.leftGroup.visible=!0,e&&(this.icon1.visible=!0,this.icon1.source=e),t&&(this.label1.visible=!0,this.label1.text=t)),(i||n)&&(this.rightGroup.visible=!0,i&&(this.icon2.visible=!0,this.icon2.source=i),n&&(this.label2.visible=!0,this.label2.text=n))},t.prototype.initUI=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addTouchEvent(this.sureBtn,this.onTap),this.addTouchEvent(this.notBtn,this.onTap),this.addTouchEvent(this.bgClose,this.onTap),this.addTouchEvent(this.cbx,this.onTap),this.cbx.selected=r.default.ins().getBool(r.default.DICE)},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeTouchEvent(this.sureBtn,this.onTap),this.removeTouchEvent(this.notBtn,this.onTap),this.removeTouchEvent(this.bgClose,this.onTap),this.removeTouchEvent(this.cbx,this.onTap)},t.prototype.onTap=function(e){switch(e.currentTarget){case this.sureBtn:null!=this.callBack.func&&this.callBack.func.call(this.callBack.thisObj);break;case this.notBtn:case this.bgClose:this.calback2.func2&&this.calback2.func2.call(this.calback2.thisObj2);break;case this.cbx:r.default.ins().setBool(r.default.DICE,e.currentTarget.selected)}e.currentTarget!=this.cbx&&s.default.ins().close(i)},Object.defineProperty(t.prototype,"isShowWin",{get:function(){return this._isShowWin},set:function(e){this._isShowWin!=e&&(this._isShowWin=e)},enumerable:!0,configurable:!0}),t.prototype.setWarnLabel=function(e,t,i,n,a){void 0===i&&(i=null),void 0===n&&(n="normal"),void 0===a&&(a="left"),this.warnLabel.textFlow=u.default.generateTextFlow(e),this.callBack=t,this.calback2=i,this.warnLabel.textAlign=a},t.prototype.setBtnLabel=function(e,t){e&&(this.sureBtn.label=e),t&&(this.notBtn.label=t)},t=i=__decorate([c],t)}(n.default));i.default=d,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/utils/TextFlowMaker":"TextFlowMaker","../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager","../../setting/SysSetting":"SysSetting","../UserWarn":"UserWarn"}],WaveDropData:[function(e,t,i){"use strict";cc._RF.push(t,"a110ahFZ4lLAJO8KmEYk8xF","WaveDropData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../activity/model/RewardData"),a=function(){function e(){this.drops=[]}return e.prototype.parser=function(e){for(var t=0;t<1;t++)this.drops[t]=this.drops[t]||new n.default,this.drops[t].parser(e);this.drops.length=1},e}();i.default=a,cc._RF.pop()},{"../activity/model/RewardData":"RewardData"}],WeaponSoulBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"15878bfei1Cpqm0R2aKzCV9","WeaponSoulBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.maxItemNum=0,this.itemid=0}}();i.default=n,cc._RF.pop()},{}],WeaponSoulConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5b6a0uucURKwZBFIrnWqVe/","WeaponSoulConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=1,this.name="",this.actcond=[],this.inside=[],this.outside=[],this.pic=[],this.icon=""}}();i.default=n,cc._RF.pop()},{}],WeaponSoulItemAttr:[function(e,t,i){"use strict";cc._RF.push(t,"b6c26sn+/lHQodNOMvcnHVm","WeaponSoulItemAttr"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.attr=[]}}();i.default=n,cc._RF.pop()},{}],WeaponSoulPosConfig:[function(e,t,i){"use strict";cc._RF.push(t,"36d4aAqNXJCgLApX4lO6CXl","WeaponSoulPosConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.level=0,this.costItem=0,this.costNum=0,this.showlv=0}}();i.default=n,cc._RF.pop()},{}],WeaponSoulSuit:[function(e,t,i){"use strict";cc._RF.push(t,"ffb02f/y41FVJPdHbGrxHy4","WeaponSoulSuit"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.id=0,this.level=0,this.attr=[],this.ex_attr=[],this.skillname="",this.skillicon="",this.skilldesc=""}}();i.default=n,cc._RF.pop()},{}],WeaponsData:[function(e,t,i){"use strict";cc._RF.push(t,"8b9acp3XHJH0YUi4TrY08+7","WeaponsData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../manager/GlobalConfig"),a=e("../../bag/UserBag"),o=e("../../../../core/utils/CommonUtils"),r=e("./WeaponsSoulInfo"),s=function(){function e(){var e=Object.keys(n.default.WeaponSoulConfig);this.WeaponsSoulInfoData={};for(var t=0;t<e.length;t++){var i=e[t],a=new r.default;this.WeaponsSoulInfoData[i]=a}e=Object.keys(n.default.WeaponSoulPosConfig),this.WeaponsInfoData={};for(t=0;t<e.length;t++){i=e[t];this.WeaponsInfoData[i]||(this.WeaponsInfoData[i]={})}this.WeaponsFlexibleInfoData=[],this.weaponsId=0,this.flexibleCount=0}return e.prototype.getSuitConfig=function(e){for(var t,i=this.getInfoData(),a=0,o=!1,r=n.default.WeaponSoulConfig[e],s=0;s<r.actcond.length;s++){var u=r.actcond[s];if(o=!0,Object.keys(i[u]).length)for(var l in i[u]){var c=i[u][l];if(0==s&&(a=c.level),!c.level){o=!1;break}c.level<=a&&(a=c.level)}else o=!1;if(!o)break}if(o){var d="";for(var f in n.default.WeaponSoulSuit[e]){if(!(a>=Number(f)))break;d=f}d&&(t=n.default.WeaponSoulSuit[e][d])}return t},e.prototype.getNextSuitConfig=function(e){var t,i=this.getSuitConfig(e);for(var a in i||(i=n.default.WeaponSoulSuit[e][0]),n.default.WeaponSoulSuit[e])if(n.default.WeaponSoulSuit[e][a].level>i.level){t=n.default.WeaponSoulSuit[e][a];break}return t},e.prototype.parser=function(e){this.parserInfo(e),this.parserSoulInfo(e),this.parserWeaponFlexibleInfo(e)},e.prototype.parserInfo=function(e){for(var t=e.readShort(),i=0;i<t;i++){var n=e.readShort(),a=e.readInt();this.WeaponsInfoData[n]={};var o=new WeaponsInfo;o.setInfo(n,a),this.WeaponsInfoData[n][a]=o}},e.prototype.parserSoulInfo=function(e){for(var t=e.readShort(),i=0;i<t;i++){var n=e.readShort();this.WeaponsSoulInfoData[n].setSoulInfo(n)}},e.prototype.parserWeaponFlexibleInfo=function(e){for(var t=e.readShort(),i=0;i<t;i++){var n=e.readShort();this.WeaponsFlexibleInfoData.push(n)}this.flexibleCount=e.readShort(),this.flexibleCount&&this.flexibleCount++},e.prototype.parserInfoOnly=function(e){var t=e.readShort(),i=e.readInt();this.WeaponsInfoData[t]={};var n=new WeaponsInfo;n.setInfo(t,i),this.WeaponsInfoData[t][i]=n},e.prototype.parserSoulInfoOnly=function(e,t){},e.prototype.getRedPointBySuit=function(e){var t=n.default.WeaponSoulConfig[e];if(!t)return!1;if(!this.WeaponsSoulInfoData[e].id&&this.IsActivityWeapon(e))return!0;for(var i in t.actcond){var o=t.actcond[i],r=this.getInfoLevel(o),s=n.default.WeaponSoulPosConfig[o][r],u=s.costNum,l=n.default.WeaponSoulPosConfig[o][r+1];if(u&&l){var c=a.default.ins().getBagItemById(s.costItem);if((c?c.count:0)>=u)return!0}}return this.IsHaveAndNotWear(e)},e.prototype.IsHaveAndNotWear=function(e){if(!this.weaponsId)for(var t in this.WeaponsSoulInfoData){var i=this.WeaponsSoulInfoData[t];if(e){if(e==i.id)return!0}else if(i.id)return!0}return!1},e.prototype.getInfoLevel=function(e){var t=0;if(!this.WeaponsInfoData[e])return 0;for(var i in this.WeaponsInfoData[e]){t=this.WeaponsInfoData[e][i].level;break}return t},e.prototype.getSlotByInfo=function(e){var t;if(!this.WeaponsInfoData[e])return t;for(var i in this.WeaponsInfoData[e]){t=this.WeaponsInfoData[e][i];break}return t},e.prototype.getWeapsInfoBySoulId=function(e){return this.WeaponsSoulInfoData[e]},e.prototype.IsActivityWeapon=function(e){var t=n.default.WeaponSoulConfig[e];if(t){for(var i=0;i<t.actcond.length;i++){var a=t.actcond[i];if(!o.default.getObjectLength(this.WeaponsInfoData[a]))return!1}return!0}return!1},e.prototype.getInfoData=function(){return this.WeaponsInfoData},e.prototype.getSoulInfoData=function(){return this.WeaponsSoulInfoData},e.prototype.getFlexibleData=function(){return this.WeaponsFlexibleInfoData},e}();i.default=s,cc._RF.pop()},{"../../../../core/utils/CommonUtils":"CommonUtils","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","./WeaponsSoulInfo":"WeaponsSoulInfo"}],WeaponsInfo:[function(e,t,i){"use strict";cc._RF.push(t,"80b2cqr835H/ocoIEHAnUxV","WeaponsInfo");(function(){function e(){this.id=0,this.level=0,this.costItem=0,this.costNum=0,this.showlv=0,this.assault=0,this.icon="",this.name="",this.attr=[],this.ex_attr=[]}e.prototype.setInfo=function(e,t){if(e>0&&t>0){var i=GlobalConfig.WeaponSoulPosConfig[e][t];if(!i)return;this.id=i.id,this.level=i.level,this.costItem=i.costItem,this.costNum=i.costNum,this.showlv=i.showlv,this.assault=i.assault,this.icon=i.icon,this.name=i.name,this.attr=i.attr,this.ex_attr=i.ex_attr}}})();cc._RF.pop()},{}],WeaponsSoulInfo:[function(e,t,i){"use strict";cc._RF.push(t,"0c4f0AsnvNOX7pPw6n67iDr","WeaponsSoulInfo"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../manager/GlobalConfig"),a=function(){function e(){this.icon="",this.id=0,this.name="",this.actcond=[],this.inside=[],this.outside=[],this.pic=[],this.icon=""}return e.prototype.setSoulInfo=function(e){if(e>0){var t=n.default.WeaponSoulConfig[e];if(!t)return;this.id=t.id,this.name=t.name,this.actcond=t.actcond,this.inside=t.inside,this.outside=t.outside,this.pic=t.pic,this.icon=t.icon}},e}();i.default=a,cc._RF.pop()},{"../../../manager/GlobalConfig":"GlobalConfig"}],WeaponsSuitInfo:[function(e,t,i){"use strict";cc._RF.push(t,"f1f6abF2bFGe4T+ZsGrPdkm","WeaponsSuitInfo");(function(){function e(){this.id=0,this.level=0,this.attr={},this.ex_attr={}}e.prototype.setInfo=function(e){}})();cc._RF.pop()},{}],Weapons:[function(e,t,i){"use strict";cc._RF.push(t,"7a370QptCREMqLI6B0l7JhW","Weapons"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../base/BaseSystem"),o=e("../../../core/net/PackageID"),r=e("../../manager/GlobalConfig"),s=e("../../../core/base/MessageCenter"),u=e("../../entity/SubRoles"),l=e("../forge/model/ForgeRedPoint"),c=e("../bag/UserBag"),d=e("../../base/EntityManager"),f=function(e){function t(){var i=e.call(this)||this;return i.sysId=o.PackageID.Weapons,s.default.compile(t),i.regNetMsg(0,i.postWeaponsInfo),i.regNetMsg(1,i.postWeaponsUpLevel),i.regNetMsg(2,i.postWeaponsAct),i.regNetMsg(3,i.postWeaponsUse),i.regNetMsg(4,i.postWeaponsFlexibleAct),i.regNetMsg(5,i.postWeaponsFlexibleCount),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.checkRedPoint=function(e){if(!OpenSystem.ins().checkSysOpen(SystemType.WEAPONS))return!1;var t=u.default.ins().getSubRoleByIndex(e);for(var i in r.default.WeaponSoulConfig){var n=r.default.WeaponSoulConfig[i];if(t.weapons.getRedPointBySuit(n.id))return!0}return!!l.default.ins().getFlexibleRedPoint(e)||!!(c.default.ins().getBagItemById(r.default.WeaponSoulBaseConfig.itemid)&&t.weapons.flexibleCount-1<r.default.WeaponSoulBaseConfig.maxItemNum)},t.prototype.checkIsUseFlexible=function(e,t){return-1!=u.default.ins().getSubRoleByIndex(e).weapons.getFlexibleData().indexOf(t)},t.prototype.sendWeaponsUpLevel=function(e,t){var i=this.getBytes(1);i.writeByte(e),i.writeShort(t),this.sendToServer(i)},t.prototype.sendWeaponsAct=function(e,t){var i=this.getBytes(2);i.writeByte(e),i.writeShort(t),this.sendToServer(i)},t.prototype.sendWeaponsUse=function(e,t){var i=this.getBytes(3);i.writeByte(e),i.writeShort(t),this.sendToServer(i)},t.prototype.sendWeaponsFlexibleAct=function(e,t,i){var n=this.getBytes(4);n.writeByte(e),n.writeByte(t),n.writeShort(i),this.sendToServer(n)},t.prototype.sendWeaponsFlexibleCount=function(e){var t=this.getBytes(5);t.writeByte(e),this.sendToServer(t)},t.prototype.postWeaponsInfo=function(e){var t=e.readUnsignedByte();u.default.ins().getSubRoleByIndex(t).weapons.parser(e)},t.prototype.postWeaponsUpLevel=function(e){var t=e.readUnsignedByte();u.default.ins().getSubRoleByIndex(t).weapons.parserInfoOnly(e)},t.prototype.postWeaponsAct=function(e){var t=e.readUnsignedByte();u.default.ins().getSubRoleByIndex(t).weapons.parserSoulInfoOnly(e,t)},t.prototype.postWeaponsUse=function(e){var t=e.readUnsignedByte(),i=u.default.ins().getSubRoleByIndex(t);i.weapons.weaponsId=e.readShort();var n=d.default.ins().getEntityByHandle(i.handle);n&&n.updateModel()},t.prototype.postWeaponsFlexibleAct=function(e){var t=e.readUnsignedByte(),i=e.readUnsignedByte(),a=e.readShort(),o=u.default.ins().getSubRoleByIndex(t).weapons.getFlexibleData();if(i==n.act)-1==o.indexOf(a)&&o.push(a);else for(var r=0;r<o.length;r++)if(o[r]==a){o.splice(r,1);break}},t.prototype.postWeaponsFlexibleCount=function(e){var t=e.readByte(),i=e.readShort(),n=u.default.ins().getSubRoleByIndex(t);n&&(n.weapons.flexibleCount=i?i+1:0)},t}(a.default);i.default=f,function(e){e[e.act=0]="act",e[e.cancel=1]="cancel"}(n||(n={})),f.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../forge/model/ForgeRedPoint":"ForgeRedPoint"}],WebSock:[function(e,t,i){"use strict";cc._RF.push(t,"70df2VbIU9B66Fr+op8FKJp","WebSock"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){this._ws=null,this.onConnected=null,this.onMessage=null,this.onError=null,this.onClosed=null}return e.prototype.connect=function(e){var t=this;if(this._ws&&this._ws.readyState===WebSocket.CONNECTING)return console.log("websocket connecting, wait for a moment..."),!1;var i=null;if(e.url)i=e.url;else{var n=e.host,a=e.port;e.protocol;i="ws://"+n+":"+a}return this._ws=new WebSocket(i),this._ws.binaryType="arraybuffer",this._ws.onmessage=function(e){t.onMessage(e.data)},this._ws.onopen=this.onConnected,this._ws.onerror=this.onError,this._ws.onclose=this.onClosed,!0},e.prototype.send=function(e){return this._ws.readyState==WebSocket.OPEN&&(this._ws.send(e),!0)},e.prototype.close=function(e,t){this._ws.close(e,t)},e}();i.WebSock=n,cc._RF.pop()},{}],WeiWangCC:[function(e,t,i){"use strict";cc._RF.push(t,"aabdaylTs1ItYXuhthOA8o/","WeiWangCC"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../../manager/GlobalConfig"),s=e("../../entity/Actor"),u=e("../server/GameServer"),l=function(e){function t(){var i=e.call(this)||this;return i._weiWangBack=0,o.default.compile(t),i.sysId=a.PackageID.WeiWang,i.regNetMsg(1,i.postWeiWangBack),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postWeiWangBack=function(e){this._weiWangBack=e.readInt()},Object.defineProperty(t.prototype,"weiWangBack",{get:function(){return this._weiWangBack},enumerable:!0,configurable:!0}),t.prototype.sendFindWeiWang=function(){this.sendBaseProto(2)},t.prototype.getWeiWangCfg=function(e){for(var t=Object.keys(r.default.PrestigeLevel).length,i=1;i<=t;i++)if(e<r.default.PrestigeLevel[i].exp)return r.default.PrestigeLevel[i-1];return r.default.PrestigeLevel[e?t:1]},Object.defineProperty(t.prototype,"isOpen",{get:function(){return!(s.default.level<r.default.PrestigeBase.openLevel||u.default.serverOpenDay<r.default.PrestigeBase.openDay-1)},enumerable:!0,configurable:!0}),t}(n.default);i.default=l,window.GameSystem.push(l.ins.bind(l)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../server/GameServer":"GameServer"}],WeiXiGuanZhuConst:[function(e,t,i){"use strict";cc._RF.push(t,"a4032zWF7hOG7bDsQpfhhhC","WeiXiGuanZhuConst"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],WelfareConfig:[function(e,t,i){"use strict";cc._RF.push(t,"159f5BglWNINZ/uc5W1B0Qo","WelfareConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],WildPlayerData:[function(e,t,i){"use strict";cc._RF.push(t,"2cf9cx7XExDuKDB7+vnaWJi","WildPlayerData"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],WingCommonConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e607aiK6JFP66Mv2xhhycnG","WingCommonConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],WingLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a5743BbOxxAxLO70riHloOP","WingLevelConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.exp=0,this.pasSkillId=0}}();i.default=n,cc._RF.pop()},{}],WingPanel:[function(e,t,i){"use strict";cc._RF.push(t,"93105jIli5DrLUtDTUAAMqC","WingPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/view/BaseEventView"),a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){var t=e.call(this)||this;return t.currViewNum=0,t.lastTimeDown=0,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.init()},t.prototype.init=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.updateLevel=function(){},t.prototype.updateDans=function(){},t.prototype.onTap=function(e){},t.prototype.skillItemClick=function(e){},t.prototype.stopAutoUp=function(){},t.prototype.autoUpStar=function(){},t.prototype.notOpenStatus=function(){},t.prototype.openStatusOpen=function(){},t.prototype.showBoost=function(e){this.expBarChange(),this.updateAtt(),this.isShowUpGradeBtn()},t.prototype.setWingView=function(e){},t.prototype.setWingData=function(){},t.prototype.setSeeBtnStatu=function(){},t.prototype.setTimeDown=function(){},t.prototype.refushTimeLabel=function(){},t.prototype.updateAtt=function(){},t.prototype.getDanAttrs=function(e){return null},t.prototype.expBarChange=function(){},t.prototype.isShowUpGradeBtn=function(){this.updateDans()},t.prototype.showOpenMovie=function(){},t.prototype.flowReckEffect=function(){},t.prototype.updateRedPoint=function(){},t=__decorate([o],t)}(n.default));i.default=r,cc._RF.pop()},{"../../core/view/BaseEventView":"BaseEventView"}],WingStarConfig:[function(e,t,i){"use strict";cc._RF.push(t,"42726MpR2tERINIwBfryr4O","WingStarConfig");cc._RF.pop()},{}],WingsData:[function(e,t,i){"use strict";cc._RF.push(t,"8de9f/VCaZHjbTErjb2Q6vU","WingsData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./EquipsData"),a=e("../../../entity/SubRoles"),o=e("../Wing"),r=e("../../../manager/GlobalConfig"),s=function(){function e(){this.openStatus=0,this.clearTime=0,this.aptitudeDan=0,this.flyUpDan=0}return e.prototype.getEquipByIndex=function(e){return this.equipdata[e]},Object.defineProperty(e.prototype,"equipsLen",{get:function(){return this.equipdata.length},enumerable:!0,configurable:!0}),e.prototype.parser=function(e){this.parserBoost(e),this.parserOpenStatus(e),this.parserClearTime(e),this.parserDans(e)},e.prototype.parserBoost=function(e){this.lv=e.readInt(),this.exp=e.readUnsignedInt()},e.prototype.parserOpenStatus=function(e){this.openStatus=e.readInt()},e.prototype.parserClearTime=function(e){this.clearTime=e.readUnsignedInt()},e.prototype.parserDans=function(e){this.aptitudeDan=e.readShort(),this.flyUpDan=e.readShort()},e.prototype.parserWingEqupip=function(e){var t;this.equipdata=[];for(var i=0;i<4;i++)(t=new n.default).parser(e),this.equipdata.push(t)},e.prototype.getImgSource=function(){return this.lv>o.default.WingMaxLv||this.lv<0?"":r.default.WingLevelConfig[this.lv].appearance+"_png"},e.getWingAllLevel=function(){for(var e=0,t=a.default.ins().subRolesLen,i=0;i<t;i++){var n=a.default.ins().getSubRoleByIndex(i).wingsData;e+=n.lv,n.openStatus&&(e+=1)}return e},e}();i.default=s,cc._RF.pop()},{"../../../entity/SubRoles":"SubRoles","../../../manager/GlobalConfig":"GlobalConfig","../Wing":"Wing","./EquipsData":"EquipsData"}],Wing:[function(e,t,i){"use strict";cc._RF.push(t,"aae751wfs1E7JE67GLX7Ejz","Wing"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../bag/UserBag"),o=e("../../entity/Actor"),r=e("../../entity/SubRoles"),s=e("../../manager/GlobalConfig"),u=e("../../base/EntityManager"),l=e("../bag/ItemData"),c=e("./UserRole"),d=e("../tips/UserTips"),f=e("../../../core/base/ViewManager"),p=e("./view/RoleWin"),h=e("../../consts/ItemType"),g=e("../../../core/base/MessageCenter"),y=function(e){function t(){var i=e.call(this)||this;return i.timeID=0,i.godWing=[],i.isListen=!1,g.default.compile(t),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initConfig=function(){},t.prototype.getWingSkillByIndex=function(e){return this.initConfig(),this.wingSkillDic[e]},t.prototype.startCheckHaveCan=function(e,t){void 0===e&&(e=!1),void 0===t&&(t=-1)},t.prototype.sendBoost=function(e,t){},t.prototype.sendUpgrade=function(e){},t.prototype.sendActivate=function(e){var t=this.getBytes(4);t.writeShort(e),this.sendToServer(t)},t.prototype.dressWingEquip=function(e,t,i){var n=this.getBytes(11);n.writeDouble(t),n.writeShort(e),n.writeShort(i),this.sendToServer(n)},t.prototype.sendBigUpLevel=function(e){var t=this.getBytes(12);t.writeInt(e),this.sendToServer(t)},t.prototype.doBigUpLevel=function(e){if(e.readInt())"\u9053\u5177\u4e0d\u8db3\u591f";else e.readInt()},t.prototype.doUpDataWing=function(e){var t=e.readShort();r.default.ins().getSubRoleByIndex(t).wingsData.parser(e)},t.prototype.doBoost=function(e){var t=e.readShort(),i=r.default.ins().getSubRoleByIndex(t).wingsData.lv;r.default.ins().getSubRoleByIndex(t).wingsData.parserBoost(e);var n,a=e.readInt();if(r.default.ins().getSubRoleByIndex(t).wingsData.parserClearTime(e),n=e.readShort(),this.postBoost(n,a),i!=r.default.ins().getSubRoleByIndex(t).wingsData.lv){s.default.WingLevelConfig[r.default.ins().getSubRoleByIndex(t).wingsData.lv].pasSkillId,r.default.ins().getSubRoleByIndex(t).setWingSkill();var o=u.default.ins().getMainRole(t);o&&o.updateModel(),this.postWingUpgrade()}this.postWingTime()},t.prototype.postBoost=function(e,t){return[e,t]},t.prototype.postWingUpgrade=function(){},t.prototype.postActivate=function(e){var t=e.readShort();r.default.ins().getSubRoleByIndex(t).wingsData.parserOpenStatus(e);s.default.WingLevelConfig[0];var i=u.default.ins().getMainRole(t);i&&i.updateModel()},t.prototype.postWingEquip=function(e){var t=e.readShort(),i=e.readShort(),n=new l.default;n.parser(e),r.default.ins().getSubRoleByIndex(t).wingsData.getEquipByIndex(i).item=n;var a=u.default.ins().getMainRole(t);a&&a.updateModel()},t.prototype.postWingTime=function(){},t.prototype.showNavBtnRedPoint=function(){this.isListen=!1;o.default.level;o.default.level>=s.default.WingCommonConfig.openLevel&&this.and(this.canGradeupWing())?c.default.ins().showNavBtnRedPoint(!0):this.canUseFlyUp()?c.default.ins().showNavBtnRedPoint(!0):this.canUseAptitude()?c.default.ins().showNavBtnRedPoint(!0):c.default.ins().showNavBtnRedPoint(!1)},t.prototype.and=function(e){for(var t in e)if(1==e[t])return!0;return!1},t.prototype.getLevelBySkill=function(e){if(!this.wingSkillLevelDic){this.wingSkillLevelDic=[];var t=s.default.WingLevelConfig;for(var i in t)t[i].pasSkillId>0&&this.wingSkillLevelDic.push(t[i].level)}return this.wingSkillLevelDic[e]?this.wingSkillLevelDic[e]:0},t.prototype.canGradeupWing=function(){return[!1,!1,!1]},t.prototype.canItemGradeupWing=function(){for(var e=[!1,!1,!1],i=t.WingMaxLv,n=r.default.ins().subRolesLen,o=0;o<n;o++){if(r.default.ins().getSubRoleByIndex(o).wingsData.openStatus){var u=r.default.ins().getSubRoleByIndex(o).wingsData.lv;if(u<i&&u<t.WingExpRedPoint){var l=s.default.WingLevelConfig[u],c=a.default.ins().getBagGoodsCountById(0,l.itemId);e[o]=l.itemNum<=c}else e[o]=!1;if(!e[o]){var d=a.default.ins().getBagGoodsCountById(0,s.default.WingCommonConfig.levelItemid);e[o]=d>0&&u==t.WingExpRedPoint}}}return e},t.prototype.isHaveActivationWing=function(e){if(void 0===e&&(e=-1),o.default.level<s.default.WingCommonConfig.openLevel)return!1;var t=r.default.ins().subRolesLen;if(-1==e)for(var i=0;i<t;i++){if(!r.default.ins().getSubRoleByIndex(i).wingsData.openStatus)return!0}else if(!r.default.ins().getSubRoleByIndex(e).wingsData.openStatus)return!0;return!1},t.prototype.canRoleOpenWing=function(){for(var e=[!1,!1,!1],t=r.default.ins().subRolesLen,i=0;i<t;i++){var n=r.default.ins().getSubRoleByIndex(i).wingsData.openStatus;e[i]=!n&&o.default.level>=16}return e},t.prototype.sendWingWear=function(e,t){var i=this.getBytes(3);i.writeShort(e),i.writeInt(t),this.sendToServer(i)},t.prototype.postWingWear=function(e){return e.readBoolean()},t.prototype.postGodWingData=function(e){var t=e.readShort();this.godWing[t]||(this.godWing[t]=new v),this.godWing[t].parser(e)},t.prototype.sendUseDan=function(e,t){var i=this.getBytes(8);i.writeByte(e),i.writeByte(t),this.sendToServer(i)},t.prototype.postUseDanSuccess=function(e){var t=r.default.ins().getSubRoleByIndex(e.readByte()).wingsData,i=e.readByte(),n=e.readShort();0==i?t.aptitudeDan=n:t.flyUpDan=n},t.prototype.canUseFlyUp=function(){for(var e=r.default.ins().roles.length,t=0;t<e;t++)if(this.canUseFlyUpByRoleID(t))return!0;return!1},t.prototype.canUseFlyUpByRoleID=function(e){var t=r.default.ins().getSubRoleByIndex(e);if(t.wingsData&&1==t.wingsData.openStatus&&t.wingsData.flyUpDan<s.default.WingLevelConfig[t.wingsData.lv].flyPill){var i=a.default.ins().getBagItemById(s.default.WingCommonConfig.flyPillId);if(i?i.count:0)return!0}return!1},t.prototype.canUseAptitude=function(){for(var e=r.default.ins().roles.length,t=0;t<e;t++)if(this.canUseAptitudeByRoleID(t))return!0;return!1},t.prototype.canUseAptitudeByRoleID=function(e){var t=r.default.ins().getSubRoleByIndex(e);if(t.wingsData&&1==t.wingsData.openStatus&&t.wingsData.aptitudeDan<s.default.WingLevelConfig[t.wingsData.lv].attrPill){var i=a.default.ins().getBagItemById(s.default.WingCommonConfig.attrPillId);if(i?i.count:0)return!0}return!1},t.prototype.userDans=function(e){for(var t,i,n=r.default.ins().roles.length,a=null,o=null,u=0,l=0,c=e==s.default.WingCommonConfig.attrPillId,h=0;h<n;h++)1==(t=r.default.ins().getSubRoleByIndex(h)).wingsData.openStatus?(i=s.default.WingLevelConfig[t.wingsData.lv],c&&t.wingsData.aptitudeDan>=i.attrPill||!c&&t.wingsData.flyUpDan>=i.flyPill?l++:(a||(a=t),t.wingsData.lv>a.wingsData.lv&&(a=t),o||(o=t),c&&t.wingsData.aptitudeDan>a.wingsData.aptitudeDan&&(o=t),!c&&t.wingsData.flyUpDan>a.wingsData.flyUpDan&&(o=t))):u++;if(u>=n)d.default.ins().showTips("\u6240\u6709\u89d2\u8272\u5747\u672a\u5f00\u542f\u7fbd\u7ffc");else if(l>=n)d.default.ins().showTips("\u6240\u6709\u89d2\u8272\u7fbd\u7ffc"+(c?"\u8d44\u8d28":"\u98de\u5347")+"\u5df2\u6ee1\u7ea7");else{var g=a.index;a.index!=o.index&&a.wingsData.lv==o.wingsData.lv&&(g=o.index),f.default.ins().open(p.default,3,g)}},t.prototype.sendWingCompose=function(e,t,i){var n=e,a=this.getBytes(6);a.writeShort(n),a.writeInt(t),1==n&&a.writeInt(i),this.sendToServer(a)},t.prototype.sendResetGodWing=function(e,t){var i=this.getBytes(7);i.writeInt(e),i.writeInt(t),this.sendToServer(i)},t.prototype.getCurLevelItemId=function(e,t){var i;return this.godWing[e]&&(i=this.godWing[e].getLevel(t))?s.default.GodWingLevelConfig[i][t]:null},t.prototype.getNextLevelItemId=function(e,t){var i;return i=(i=this.godWing[e].getLevel(t))?this.getNextLevel(i):0,s.default.GodWingLevelConfig[i]?s.default.GodWingLevelConfig[i][t]:null},t.prototype.quickComposeRedPoint=function(e,i){var n=t.ins().getGodWing(e).getLevel(i),a=this.getNextLevel(n);if(!a)return!1;var o=s.default.GodWingLevelConfig[a][i];return!!this.checkGodWingLevel(e,o.itemId)&&!!this.checkGodWingItem(e,o.itemId,i)},t.prototype.wearItemRedPoint=function(e,t){return!!this.checkSlotLevel(e,t)},t.prototype.gridRedPoint=function(e,t){return!!this.wearItemRedPoint(e,t)||this.quickComposeRedPoint(e,t)},t.prototype.isWearGodWing=function(e){var i=r.default.ins().getSubRoleByIndex(e);if(!i)return!1;for(var n=1;n<=t.GodWingMaxSlot;n++)if(this.gridRedPoint(i.index,n))return!0;return!1},t.prototype.checkSlot=function(e,i){return!!t.ins().getGodWing(e).getLevel(i)},t.prototype.getWearItem=function(e,i){for(var n=t.ins().getGodWing(e).getLevel(i),o=a.default.ins().getBagGoodsByType(h.ItemType.TYPE_16),r=0;r<o.length;r++){var u=s.default.GodWingItemConfig[o[r].configID];if(this.checkGodWingLevel(e,u.itemId)&&u.slot==i&&u.level>n)return u.itemId}return 0},t.prototype.checkSlotLevel=function(e,i){for(var n=t.ins().getGodWing(e).getLevel(i),o=a.default.ins().getBagGoodsByType(h.ItemType.TYPE_16),r=0;r<o.length;r++){var u=s.default.GodWingItemConfig[o[r].configID];if(this.checkGodWingLevel(e,u.itemId)&&u.slot==i&&u.level>n)return!0}return!1},t.prototype.checkGodWingLevel=function(e,t){var i=s.default.GodWingItemConfig[t],n=0,a=r.default.ins().getSubRoleByIndex(e).wingsData;return n+=a.lv,a.openStatus&&(n+=1),n>=i.level},t.prototype.checkGodWingItem=function(e,t,i){var n=s.default.GodWingItemConfig[t],o=n.composeItem.count,r=0,u=a.default.ins().getBagItemById(n.composeItem.id);(u&&(r=u.count),i)&&(this.getGodWing(e).getLevel(i)&&(o-=1));return r>=o},t.prototype.isQuicComposeGodWing=function(e,i){if(!r.default.ins().getSubRoleByIndex(e))return!1;var n=this.godWing[e].getLevel(i);if(n||(n=this.getStartLevel(i)),!n)return!1;var o=0,u=r.default.ins().getSubRoleByIndex(e).wingsData;if(o+=u.lv,u.openStatus&&(o+=1),o<n)return!1;if(t.ins().getGodWing(e).getLevel(i)&&!(n=this.getNextLevel(n)))return!1;var l=s.default.GodWingLevelConfig[n][i].itemId,c=s.default.GodWingItemConfig[l],d=c.composeItem.count,f=0,p=a.default.ins().getBagItemById(c.composeItem.id);p&&(f=p.count);var h=t.ins().getGodWing(e).getLevel(i);h&&(s.default.GodWingLevelConfig[h][i].itemId==c.composeItem.id&&(f+=1));return f>=d},t.prototype.isComposeGodWingOnly=function(e){var t=s.default.GodWingItemConfig[e],i=t.composeItem.count,n=0,o=a.default.ins().getBagItemById(t.composeItem.id);return o&&(n=o.count),n>=i},t.prototype.isComposeGodWingAll=function(){for(var e in s.default.GodWingSuitConfig)for(var i=s.default.GodWingSuitConfig[e],n=1;n<=t.GodWingMaxSlot;n++){var a=s.default.GodWingLevelConfig[i.lv][n];if(this.isComposeGodWingOnly(a.itemId))return!0}return!1},t.prototype.isComposeGodWingLevel=function(e,t){var i=s.default.GodWingLevelConfig[e][t];return!!this.isComposeGodWingOnly(i.itemId)},t.prototype.isComposeGodWingSlot=function(e,t){var i=s.default.GodWingSuitConfig[e],n=s.default.GodWingLevelConfig[i.lv][t];return!!this.isComposeGodWingOnly(n.itemId)},t.prototype.isComposeGodWing=function(e){r.default.ins().subRolesLen;for(var t=0;t<3;t++){if(r.default.ins().getSubRoleByIndex(t))for(var i=this.calcGodWingSlot(t),n=0;n<i.length;n++){var o=s.default.GodWingLevelConfig[i[n].level][i[n].slot];if(e){var u=0,l=r.default.ins().getSubRoleByIndex(t).wingsData;if(u+=l.lv,l.openStatus&&(u+=1),u<o.level)continue}var c=s.default.GodWingItemConfig[o.itemId],d=c.composeItem.id,f=a.default.ins().getBagItemById(d),p=c.composeItem.count;if((f?f.count:0)>=p)return!0}}return!1},t.prototype.calcGodWingSlot=function(e){for(var i=[],n=1;n<=t.GodWingMaxSlot;n++){var a=t.ins().getGodWing(e).getLevel(n),o={slot:0,level:0};o.slot=n,a||(a=this.getStartLevel(n)),o.level=a,i.push(o)}return i},t.prototype.getStartLevel=function(e){for(var t in s.default.GodWingLevelConfig){var i=s.default.GodWingLevelConfig[t];for(var n in i)if(i[n].slot==e)return i[n].level}return 0},t.prototype.getPreLevel=function(e){var t=0;for(var i in s.default.GodWingLevelConfig)if(t){if(Number(i)==e)return t;t=Number(i)}else t=Number(i);return t},t.prototype.getNextLevel=function(e){var t=[];for(var i in s.default.GodWingLevelConfig)t.push(+i);t.sort(function(e,t){return e<t?-1:1});for(var n=0,a=t;n<a.length;n++){var o=a[n];if(e<o)return o}return 0},t.prototype.getNameFromSlot=function(e){var t="";switch(e){case 1:t="\u98de\u7fbd";break;case 2:t="\u7ea4\u7fbd";break;case 3:t="\u7ed2\u7fbd";break;case 4:t="\u7fce\u7fbd"}return t},t.prototype.getGodWing=function(e){return this.godWing[e]||(this.godWing[e]=new v),this.godWing[e]},t.WingMaxLv=9,t.WingExpRedPoint=3,t.GodWingMaxSlot=4,t.hint=!0,t}(n.default);i.default=y;var v=function(){function e(){this.data={}}return e.prototype.parser=function(e){for(var t=e.readShort(),i=0;i<t;i++){var n=e.readShort(),a=e.readInt();this.data[n]={slot:n,level:a}}},e.prototype.getLevel=function(e){return this.data[e]?this.data[e].level:0},e.prototype.getData=function(){return this.data},e.prototype.getSuitLevel=function(){var e=Number.MAX_VALUE,t=0;for(var i in this.data)this.data[i].level<e&&(t=this.data[i].slot,e=this.data[i].level);if(!t)return 0;var n=s.default.GodWingLevelConfig[e][t];if(!n)return 0;var a=[];for(var o in s.default.GodWingItemConfig){var r=s.default.GodWingItemConfig[o];if(a.length>=y.GodWingMaxSlot)break;r.level>=n.level&&n.slot!=r.slot&&this.data[r.slot]&&this.data[r.slot].level>=r.level&&a.push(r.itemId)}return a.length>=y.GodWingMaxSlot-1?e:0},e.prototype.getSuitSum=function(){var e=this.getSuitLevel(),t=0;for(var i in this.data)this.data[i].level>=e&&t++;return t},e}();i.GodWingData=v,window.GameSystem.push(y.ins.bind(y)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/base/ViewManager":"ViewManager","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../consts/ItemType":"ItemType","../../entity/Actor":"Actor","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig","../bag/ItemData":"ItemData","../bag/UserBag":"UserBag","../tips/UserTips":"UserTips","./UserRole":"UserRole","./view/RoleWin":"RoleWin"}],WorldBossBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"06cc5JlqPZF5oYn+lmx53e1","WorldBossBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.refreshHour=0,this.refreshMinute=0,this.levelUpTime=0,this.challengeCd=0,this.convertRate=0,this.maxGold=0,this.clearCdCost=[],this.lotteryTime=0,this.dayCount=[],this.buyCountPrice=[],this.rebornItem=0}}();i.default=n,cc._RF.pop()},{}],WorldBossConfig:[function(e,t,i){"use strict";cc._RF.push(t,"5e77bdirpFIqII0eMJp6EKE","WorldBossConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.zsLevel=0,this.level=0,this.fbid=0,this.bossId=0,this.shield=0,this.joinReward=0,this.shieldReward=0,this.belongReward=0,this.killReward=0,this.vip=0,this.samsaraLv=0}}();i.default=n,cc._RF.pop()},{}],WorldBossItemData:[function(e,t,i){"use strict";cc._RF.push(t,"043ebKv6DVACYdHUsRdVCOP","WorldBossItemData");(function(){function e(){this.id=0,this.roleName="",this.guildName="",this.relieveTime=0,this.bossState=0,this.hp=0,this.people=0,this.challengeing=0}e.prototype.parser=function(e){this.id=e.readInt(),this.roleName=e.readString(),this.guildName=e.readString();var t=e.readInt();this.relieveTime=1e3*t+egret.getTimer(),this.bossState=e.readShort(),this.hp=e.readByte(),this.people=e.readShort(),this.challengeing=e.readByte()},Object.defineProperty(e.prototype,"isDie",{get:function(){return(this.relieveTime-egret.getTimer())/1e3>0},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canInto",{get:function(){var e=GlobalConfig.WorldBossConfig[this.id].zsLevel;if("number"==typeof e)return e>0?UserZs.ins().lv>=e:Actor.level>=e;var t=e;if(t.length>1)return UserZs.ins().lv>=t[0]&&UserZs.ins().lv<=t[1];console.log("WorldBossConfig\u914d\u7f6e\u9519\u8bef\uff01 "+t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"canChallenge",{get:function(){return!this.isDie&&this.canInto},enumerable:!0,configurable:!0})})();cc._RF.pop()},{}],WorldBossKillMsgConfig:[function(e,t,i){"use strict";cc._RF.push(t,"72db8uoPj1Babj7LRhPBlEj","WorldBossKillMsgConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.msg="",this.id=0}}();i.default=n,cc._RF.pop()},{}],WorldBossRankItemData:[function(e,t,i){"use strict";cc._RF.push(t,"14d2504dsFKBJida3G0QXeN","WorldBossRankItemData"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/utils/CommonUtils"),a=function(){function e(){}return e.prototype.parser=function(e){this.id=e.readInt(),this.roleName=e.readString(),this.value=e.readDouble()},e.prototype.parser1=function(e){this.roleName=e.readString(),this.value=e.readInt()},Object.defineProperty(e.prototype,"name",{get:function(){return this.roleName+":"+n.default.overLength(this.value)},enumerable:!0,configurable:!0}),e}();i.default=a,cc._RF.pop()},{"../../../../core/utils/CommonUtils":"CommonUtils"}],WorldRewardConfig:[function(e,t,i){"use strict";cc._RF.push(t,"36d2eHO+VtHKJDezRi37hoS","WorldRewardConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],WujiBaseConfig:[function(e,t,i){"use strict";cc._RF.push(t,"56fd1kjSrBFyI7h5wpRP/Ag","WujiBaseConfig"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],XiaoNianIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"2ec83bjOm5MA4Jh/oW/4hQ6","XiaoNianIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../bag/UserBag"),s=e("../../opensystem/OpenSystem"),u=e("../../../consts/SystemConst"),l=e("../../activity/model/ActivityDataFactory"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postYbChange,r.default.ins().postItemAdd,r.default.ins().postItemChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!s.default.ins().checkSysOpen(u.SystemType.XIAONIAN))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==l.ActivityPageStyle.XIAONIAN&&n.isOpenActivity()&&!n.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==l.ActivityPageStyle.XIAONIAN&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(XiaoNianWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=c,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../bag/UserBag":"UserBag","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],XueyuStageConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e3163kxq81P65Y7+3kPduJ+","XueyuStageConfig");cc._RF.pop()},{}],YBZhuanPanIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"15d1cMunp9KhIVMoNtpQyWp","YBZhuanPanIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../../manager/TimerManager"),s=e("../../activity/model/ActivityDataFactory"),u=e("../../opensystem/OpenSystem"),l=e("../../../consts/SystemConst"),c=e("../../../manager/UILoadMgr"),d=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.activityId=0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postYbChange],n}return __extends(t,e),t.prototype.createTar=function(){var t=e.prototype.createTar.call(this);return this.alertText=cc.instantiate(c.default.inst.getPrefab(c.prefabName.common_lab)).getComponent(cc.Label),this.runTime(),this.addTime(),t},t.prototype.addTime=function(){r.default.ins().doTimer(1e3,0,this.runTime,this)},t.prototype.removeTime=function(){r.default.ins().remove(this.runTime,this)},t.prototype.runTime=function(){var e=a.default.ins().activityData;if(!this.activityId)for(var t in e){var i=e[t];if(i.pageStyle==s.ActivityPageStyle.YBZHUANPAN&&i.isOpenActivity()&&!i.getHide()){this.activityId=+t;break}}if(this.activityId){var n=e[this.activityId];if(n){n.getLeftTime()||this.removeTime();var o=n.getRemainTime();this.alertText.string=o}else this.alertText.string=""}else this.alertText.string=""},t.prototype.checkShowIcon=function(){if(!u.default.ins().checkSysOpen(l.SystemType.CHRISTMAS))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==s.ActivityPageStyle.YBZHUANPAN&&n.isOpenActivity()&&!n.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==s.ActivityPageStyle.YBZHUANPAN&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(YBZhuanPanWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=d,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../../manager/TimerManager":"TimerManager","../../../manager/UILoadMgr":"UILoadMgr","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],YouDangConfig:[function(e,t,i){"use strict";cc._RF.push(t,"6e66ebgqjNMIIvTze+3OiYO","YouDangConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],YuPeiBasicConfig:[function(e,t,i){"use strict";cc._RF.push(t,"a159e4uU4BAbrrRrGDR6ACf","YuPeiBasicConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],YuPeiConfig:[function(e,t,i){"use strict";cc._RF.push(t,"921b4eQS49KtoLEAUnamZ0Y","YuPeiConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhanLingBase:[function(e,t,i){"use strict";cc._RF.push(t,"cbac1HY61FKvoe7eq5o4GMt","ZhanLingBase"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhanLingBox:[function(e,t,i){"use strict";cc._RF.push(t,"5b7564S7DVFHLkkwnDImUNp","ZhanLingBox");cc._RF.pop()},{}],ZhanLingConfig:[function(e,t,i){"use strict";cc._RF.push(t,"cfd71pYA/hMaKmf3nbZdSII","ZhanLingConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhanLingData:[function(e,t,i){"use strict";cc._RF.push(t,"a1643bzjNlOq6heZWlb29ed","ZhanLingData"),Object.defineProperty(i,"__esModule",{value:!0});var n,a=e("../../../manager/GlobalConfig"),o=function(){function e(e){this._id=e||0,this._level=0,this._exp=0,this._items=[];for(var t=0;t<a.default.ZhanLingConfig.equipPosCount;t++)this._items.push(0);for(var t in this._talentLv=0,this._drugs=[],a.default.ZhanLingConfig.upgradeInfo)this._drugs.push({itemId:Number(t),count:0})}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},set:function(e){this._id=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"level",{get:function(){return this._level},set:function(e){this._level=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"exp",{get:function(){return this._exp},set:function(e){this._exp=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"items",{get:function(){return this._items},set:function(e){this._items=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"talentLv",{get:function(){return this._talentLv},set:function(e){this._talentLv=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"drugs",{get:function(){return this._drugs},set:function(e){this._drugs=e},enumerable:!0,configurable:!0}),e}();i.default=o,function(e){e[e.ITEM1=1]="ITEM1",e[e.ITEM2=2]="ITEM2",e[e.ITEM3=3]="ITEM3",e[e.ITEM4=4]="ITEM4"}(n||(n={})),cc._RF.pop()},{"../../../manager/GlobalConfig":"GlobalConfig"}],ZhanLingEquip:[function(e,t,i){"use strict";cc._RF.push(t,"a0811b5jRtOQqifRrvG2ZA/","ZhanLingEquip"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhanLingID:[function(e,t,i){"use strict";cc._RF.push(t,"b855ax6hTRJCpvESuBMxlGK","ZhanLingID");cc._RF.pop()},{}],ZhanLingIconRule:[function(e,t,i){"use strict";cc._RF.push(t,"ac442Xc3ttNBJhL2zJnI9PF","ZhanLingIconRule"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("./RuleIconBase"),a=e("../../activity/Activity"),o=e("../../../entity/Actor"),r=e("../../bag/UserBag"),s=e("../../../consts/SystemConst"),u=e("../../opensystem/OpenSystem"),l=e("../../activity/model/ActivityDataFactory"),c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.firstTap=!0,n.showMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postLevelChange],n.updateMessage=[a.default.ins().postActivityIsGetAwards,o.default.ins().postYbChange,r.default.ins().postItemAdd,r.default.ins().postItemChange],n}return __extends(t,e),t.prototype.checkShowIcon=function(){if(!u.default.ins().checkSysOpen(s.SystemType.ZHANLING))return!1;var e=a.default.ins().activityData,t=Object.keys(e);if(!t||!t.length)return!1;for(var i in e){var n=e[i];if(n.pageStyle==l.ActivityPageStyle.ZHANLING&&n.isOpenActivity()&&!n.getHide())return!0}return!1},t.prototype.checkShowRedPoint=function(){var e=a.default.ins().activityData;for(var t in e){var i=e[t];if(i.pageStyle==l.ActivityPageStyle.ZHANLING&&i.isOpenActivity()&&i.canReward()&&!i.getHide())return 1}return 0},t.prototype.getEffName=function(e){if(this.firstTap||e)return this.effX=38,this.effY=38,"actIconCircle"},t.prototype.tapExecute=function(){ViewManager.ins().open(ZhanLingACTWin),this.firstTap&&(this.firstTap=!1,this.update())},t}(n.default);i.default=c,cc._RF.pop()},{"../../../consts/SystemConst":"SystemConst","../../../entity/Actor":"Actor","../../activity/Activity":"Activity","../../activity/model/ActivityDataFactory":"ActivityDataFactory","../../bag/UserBag":"UserBag","../../opensystem/OpenSystem":"OpenSystem","./RuleIconBase":"RuleIconBase"}],ZhanLingLevel:[function(e,t,i){"use strict";cc._RF.push(t,"eb940/eJedMqp8ZXzLeFam2","ZhanLingLevel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhanLingModel:[function(e,t,i){"use strict";cc._RF.push(t,"d5ed73E249KOqfTf5CkIxdr","ZhanLingModel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/base/BaseClass"),a=e("../../../../core/base/AttributeType"),o=e("../../../manager/GlobalConfig"),r=e("../../server/GameServer"),s=e("../../zs/UserZs"),u=e("../../bag/UserBag"),l=e("../../../../core/base/AttributeData"),c=e("../../../entity/SubRoles"),d=e("../../../config/ItemConfig"),f=e("../../../entity/Actor"),p=function(e){function t(){var t=e.call(this)||this;return t._ZhanLingData={},t._ZhanLingSkinId=0,t._showZLlist=[],t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},Object.defineProperty(t.prototype,"ZhanLingData",{get:function(){return this._ZhanLingData},enumerable:!0,configurable:!0}),t.prototype.getZhanLingDataById=function(e){return this._ZhanLingData[e]},t.prototype.setZhanLingData=function(e){e&&(this._ZhanLingData[e.id]=e)},Object.defineProperty(t.prototype,"ZhanLingSkinId",{get:function(){return this._ZhanLingSkinId},set:function(e){this._ZhanLingSkinId=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"showZLlist",{get:function(){return this._showZLlist},set:function(e){this._showZLlist=e},enumerable:!0,configurable:!0}),t.prototype.ZhanLingOpen=function(){return s.default.ins().lv>=o.default.ZhanLingConfig.openzhuanshenglv&&r.default.serverOpenDay+1>=o.default.ZhanLingConfig.openserverday},t.prototype.getZhanLingDataByLevel=function(e){return this._ZhanLingData[e]?this._ZhanLingData[e].level:0},t.prototype.getZhanLingDataByStage=function(e){if(!this._ZhanLingData[e].level)return 1;var t=Math.floor(this._ZhanLingData[e].level/10);return t+=1,Math.floor(this._ZhanLingData[e].level%10)||(t-=1),t||(t=1),t},t.prototype.getZhanLingDataByNextStage=function(e){var t=0;this._ZhanLingData[e]&&(t=this._ZhanLingData[e].talentLv);var i,n=o.default.ZhanLingLevel[e];for(var a in n){var r=n[a];if(r.talentLevel>t){i=r;break}}return i?this.getStageLv(i.level):null},t.prototype.getZhanLingDataByStar=function(e){if(!this._ZhanLingData[e]||!this._ZhanLingData[e].level)return 0;var t=Math.floor(this._ZhanLingData[e].level%10);return t||(t=10),t},t.prototype.getZhanLingDataByTalentLv=function(e){if(!this._ZhanLingData[e])return 0;var t=this.getZhanLingDataByLevel(e),i=o.default.ZhanLingLevel[e][t].talentLevel;return i&&(this._ZhanLingData[e].talentLv=i),this._ZhanLingData[e].talentLv},t.prototype.getZhanLingDataByExp=function(e){return this._ZhanLingData[e]?this._ZhanLingData[e].exp:0},t.prototype.getZhanLingDataByItem=function(e,t){return this._ZhanLingData[e]?this._ZhanLingData[e].items[t-1]:0},t.prototype.getZhanLingDataByDrugUse=function(e,t){if(!this._ZhanLingData[e])return!1;var i=u.default.ins().getBagItemById(t);if(!(i?i.count:0))return!1;var n=this._ZhanLingData[e].level,a=o.default.ZhanLingLevel[e][n];e&&a.maxCount;var r=!1;if(a.maxCount&&a.maxCount[t])for(var s=0;s<this._ZhanLingData[e].drugs.length;s++)if(this._ZhanLingData[e].drugs[s].itemId==t&&this._ZhanLingData[e].drugs[s].count>=a.maxCount[t]){r=!0;break}return!r},t.prototype.getZhanLingDataByTalentId=function(e){var t=o.default.ZhanLingBase[e];return t?t.talent:0},t.prototype.getZhanLingDataBySkill=function(e){return this._ZhanLingData[e]?o.default.ZhanLingBase[e].skill:[]},t.prototype.getZhanLingDataByDrug=function(e,t){if(!this._ZhanLingData[e])return 0;for(var i=0;i<this._ZhanLingData[e].drugs.length;i++)if(this._ZhanLingData[e].drugs[i].itemId==t)return this._ZhanLingData[e].drugs[i].count;return 0},t.prototype.getZhanLingDataBySuit=function(e){if(!this._ZhanLingData[e])return 0;for(var t=0,i=0;i<this._ZhanLingData[e].items.length;i++){var n=this._ZhanLingData[e].items[i],a=o.default.ZhanLingEquip[n];if(!a)return 0;t||(t=a.level),t>a.level&&(t=a.level)}return t},t.prototype.getZhanLingDataBySuitCount=function(e,t){if(!this._ZhanLingData[e])return 0;for(var i=0,n=0;n<this._ZhanLingData[e].items.length;n++){var a=this._ZhanLingData[e].items[n];o.default.ZhanLingEquip[a].level>=t&&i++}return i},t.prototype.getZhanLingDataByMat=function(e,t){if(!t&&!this._ZhanLingData[e])return 0;var i=o.default.ZhanLingBase[e].talent,n=0;if(t)n=1;else{if(!this._ZhanLingData[e].talentLv)return 0;n=this._ZhanLingData[e].talentLv+1}var a=o.default.ZhanLingTalent[i][n];return a?a.costCount:0},t.prototype.getZhanLingPower=function(e){var i=0,n=t.ins().getZhanLingDataByLevel(e),a=o.default.ZhanLingLevel[e][n];if(!a)return[i,[],[]];var r=t.ins().getZhanLingDataById(e);if(!r)return[i,[],[]];var s=o.default.ZhanLingLevel[e][n+1],f=0,p=[],h=[],g=0,y=0,v=[],m=[],b=0,_=[],C=[],I=0,T=0;f+=u.default.getAttrPower(a.attrs)*c.default.ins().subRolesLen;for(var S=0;S<c.default.ins().subRolesLen;S++){var R=c.default.ins().getSubRoleByIndex(S);for(var B in a.attrs)f+=d.default.relatePower(a.attrs[B],R)}f+=(a.expower?a.expower:0)*c.default.ins().subRolesLen,p=this.addAttrs(p,a.attrs),s&&(h=this.addAttrs(h,s.attrs));var M=t.ins().getZhanLingDataBySuit(e);if(M){var E=o.default.ZhanLingSuit[M];if(E&&E.attrs){y+=u.default.getAttrPower(E.attrs)*c.default.ins().subRolesLen;for(B=0;B<E.attrs.length;B++)for(S=0;S<c.default.ins().subRolesLen;S++){R=c.default.ins().getSubRoleByIndex(S);y+=d.default.relatePower(E.attrs[B],R)}v=l.default.getPercentAttr(p,E.precent/1e4),s&&(m=l.default.getPercentAttr(h,E.precent/1e4))}}for(B=0;B<r.drugs.length;B++){for(var D=[],A=[],P=o.default.ZhanLingConfig.upgradeInfo[r.drugs[B].itemId],w=[],L=0;L<P.attr.length;L++){var k=new l.default;k.type=P.attr[L].type,k.value=P.attr[L].value*r.drugs[B].count,w.push(k)}var F={attr:w,precent:P.precent?P.precent*r.drugs[B].count:0,sort:P.sort};b+=u.default.getAttrPower(F.attr)*c.default.ins().subRolesLen,_=this.addAttrs(_,F.attr),C=this.addAttrs(C,F.attr),F.precent&&(b+=Math.floor(f*F.precent/1e4),M&&(b+=Math.floor(f*F.precent/1e4)),D=l.default.getPercentAttr(p,F.precent/1e4),_=this.addAttrs(_,D),s&&(A=l.default.getPercentAttr(h,F.precent/1e4),C=this.addAttrs(C,A)));for(S=0;S<c.default.ins().subRolesLen;S++){R=c.default.ins().getSubRoleByIndex(S);b+=d.default.relatePower(F.attr[B],R)}}for(B=1;B<=o.default.ZhanLingConfig.equipPosCount;B++){var G=t.ins().getZhanLingDataByItem(e,B);g+=this.getZhanLingItemPower(G,1)}var x=this.getZhanLingDataByTalentId(e),N=this.getZhanLingDataByTalentLv(e),U=o.default.ZhanLingTalent[x][N];if(U){var O=U.expower;I+=(O||0)*c.default.ins().subRolesLen,U.attrs&&(I+=u.default.getAttrPower(U.attrs)*c.default.ins().subRolesLen)}var H=o.default.ZhanLingBase[e];for(B=0;B<H.skill.length;B++){var j=o.default.ZhanLingSkill[H.skill[B].id];if(j.attrs){T+=u.default.getAttrPower(j.attrs)*c.default.ins().subRolesLen;for(S=0;S<c.default.ins().subRolesLen;S++){R=c.default.ins().getSubRoleByIndex(S);for(var W=0;W<j.attrs.length;W++)T+=d.default.relatePower(j.attrs[W],R)}j.expower&&(T+=j.expower)}}return i=f+g+y+b+I+T,p=this.addAttrs(p,v),p=this.addAttrs(p,_),s&&(h=this.addAttrs(h,m),h=this.addAttrs(h,C)),[i,p,h]},t.prototype.addAttrs=function(e,i,n){void 0===n&&(n=!0);var a=n?[]:e;if(n)for(var o=0;o<e.length;o++)-1!=t.showTypeList.indexOf(e[o].type)&&a.push(new l.default(e[o].type,e[o].value));for(var r=0;r<i.length;r++){var s=!1;if(-1!=t.showTypeList.indexOf(i[r].type)){for(var u=0;u<e.length;u++)if(e[u].type==i[r].type){a[u].value+=i[r].value,s=!0;break}s||a.push(new l.default(i[r].type,i[r].value))}}return a},t.prototype.getZhanLingItemPower=function(e,t){void 0===t&&(t=0);var i=0,n=o.default.ZhanLingEquip[e];if(!n)return i;var a=t?c.default.ins().subRolesLen:3;if(i+=u.default.getAttrPower(n.attrs)*a,t)for(var r=0;r<a;r++)for(var s=c.default.ins().getSubRoleByIndex(r),l=0;l<n.attrs.length;l++)i+=d.default.relatePower(n.attrs[l],s);return i},t.prototype.isUpGradeByStar=function(e){if(!this.getZhanLingDataById(e))return this.isUpGradeByTalent(e,!0);var i=t.ins().getZhanLingDataByLevel(e),n=o.default.ZhanLingLevel[e][i];if(!n||!n.exp)return!1;var a=t.ins().getZhanLingDataByExp(e),r=n.exp-a;r=r>0?r:0;var s=Math.ceil(r/o.default.ZhanLingConfig.stageitemexp),l=u.default.ins().getBagItemById(o.default.ZhanLingConfig.stageitemid);return(l?l.count:0)>=s},t.prototype.isHintNum=function(e){var i=t.ins().getZhanLingDataById(e);if(!i)return!1;var n=o.default.ZhanLingLevel[e][i.level];if(!n||!n.exp)return!1;var a=u.default.ins().getBagItemById(o.default.ZhanLingConfig.stageitemid);return(a?a.count:0)>=o.default.ZhanLingConfig.hintNum},t.prototype.isUpGradeByTalent=function(e,i){void 0===i&&(i=!1);var n=t.ins().getZhanLingDataById(e);if(!i&&!n)return!1;var a=o.default.ZhanLingBase[e];if(!a.mat)return!1;var r=u.default.ins().getBagItemById(a.mat),s=r?r.count:0,l=this.getZhanLingDataByMat(e,i);return!!l&&s>=l},t.prototype.updateShowZLlist=function(){var e=[];for(var i in o.default.ZhanLingBase)o.default.ZhanLingBase[i].sort&&e.push(o.default.ZhanLingBase[i]);e.sort(function(e,t){return e.sort<t.sort?-1:1}),this.showZLlist=[];for(var n=0;n<e.length;n++){if(e[n].show)if(t.ins().getZhanLingDataById(e[n].id))this.showZLlist.push(e[n]);else{var a=u.default.ins().getBagItemById(e[n].mat);a&&a.count&&this.showZLlist.push(e[n])}else this.showZLlist.push(e[n])}},t.prototype.getZhanLingItemRedPoint=function(e){var t=this.getZhanLingDataById(e);if(!t)return!1;var i=u.default.ins().getBagGoodsByType(ItemType.TYPE_21);i&&i.sort(function(e,t){var i=o.default.ZhanLingEquip[e.configID],n=o.default.ZhanLingEquip[t.configID];return i.level>n.level?-1:1});for(var n=0;n<t.items.length;n++){var a=n+1,r=t.items[n],l=void 0;r&&(l=o.default.ZhanLingEquip[r]);for(var c=0;c<i.length;c++){var d=i[c].configID,p=o.default.ItemConfig[d];if(p){var h=o.default.ZhanLingEquip[d];if(h&&a==h.pos){var g=p.level?p.level:0,y=p.zsLevel?p.zsLevel:0;if(s.default.ins().lv>=y&&f.default.level>=g){if(l){if(h.level>l.level)return!0;break}return!0}}}}}return!1},t.prototype.getStageLv=function(e){var t=Math.floor(e/10),i=Math.floor(e%10);return i?t+=1:e&&e%10==0?i=10:t+=1,[t,i]},t.showTypeList=[a.AttributeType.atAttack,a.AttributeType.atMaxHp,a.AttributeType.atDef,a.AttributeType.atRes],t}(n.default);i.default=p,cc._RF.pop()},{"../../../../core/base/AttributeData":"AttributeData","../../../../core/base/AttributeType":"AttributeType","../../../../core/base/BaseClass":"BaseClass","../../../config/ItemConfig":"ItemConfig","../../../entity/Actor":"Actor","../../../entity/SubRoles":"SubRoles","../../../manager/GlobalConfig":"GlobalConfig","../../bag/UserBag":"UserBag","../../server/GameServer":"GameServer","../../zs/UserZs":"UserZs"}],ZhanLingPanel:[function(e,t,i){"use strict";cc._RF.push(t,"40d24GBv4xAnYPDo+IPVBss","ZhanLingPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/view/BaseEuiView"),a=e("../../core/base/MessageCenter"),o=e("../enum/LayerManager"),r=cc._decorator,s=r.ccclass,u=(r.property,function(e){function t(){var t=e.call(this)||this;return t.parentRoot=o.LayerManager.UI_Main,a.default.compile(i),t}var i;return __extends(t,e),i=t,t.prototype.initData=function(){},t.prototype.initUI=function(){},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.init=function(){},t=i=__decorate([s],t)}(n.default));i.default=u,cc._RF.pop()},{"../../core/base/MessageCenter":"MessageCenter","../../core/view/BaseEuiView":"BaseEuiView","../enum/LayerManager":"LayerManager"}],ZhanLingSkill:[function(e,t,i){"use strict";cc._RF.push(t,"35478NGpPROI6PWPWqSzVfN","ZhanLingSkill"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhanLingStage:[function(e,t,i){"use strict";cc._RF.push(t,"a58a5ZA6wBAQZj+uJwTblkh","ZhanLingStage");cc._RF.pop()},{}],ZhanLingSuit:[function(e,t,i){"use strict";cc._RF.push(t,"32c518f9y9ITo3ykT+kXALP","ZhanLingSuit"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhanLingTalent:[function(e,t,i){"use strict";cc._RF.push(t,"e3a61TgFN1CQKftXqJfsu6H","ZhanLingTalent"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhanLing:[function(e,t,i){"use strict";cc._RF.push(t,"d2a67j0V8JG2JlTXC3INvGz","ZhanLing"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../bag/UserBag"),r=e("../zs/UserZs"),s=e("../../manager/GlobalConfig"),u=e("./model/ZhanLingModel"),l=e("./model/ZhanLingData"),c=e("../../base/EntityManager"),d=e("../rolewin/UserSkill"),f=e("../../../core/base/MessageCenter"),p=function(e){function t(){var i=e.call(this)||this;return i.sysId=a.PackageID.WarSpirit,f.default.compile(t),i.regNetMsg(1,i.postZhanLingInfo),i.regNetMsg(2,i.postZhanLingUpExp),i.regNetMsg(3,i.postZhanLingDrug),i.regNetMsg(4,i.postZhanLingWear),i.regNetMsg(6,i.postZhanLingComposeItem),i.regNetMsg(7,i.postZhanLingBubble),i.regNetMsg(8,i.doZhanLingSkill),i.regNetMsg(11,i.postZhanLingSkinUpGrade),i.regNetMsg(12,i.postZhangLingSkinChange),i.observe(r.default.ins().postZsLv,i.initZhanLing),i.observe(o.default.ins().postItemAdd,u.default.ins().updateShowZLlist),i.observe(o.default.ins().postItemDel,u.default.ins().updateShowZLlist),i.observe(o.default.ins().postItemCountChange,u.default.ins().updateShowZLlist),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.initLogin=function(){u.default.ins().updateShowZLlist()},t.prototype.initZero=function(){!u.default.ins().getZhanLingDataById(0)&&u.default.ins().ZhanLingOpen()&&u.default.ins().setZhanLingData(new l.default)},t.prototype.initZhanLing=function(){!u.default.ins().getZhanLingDataById(0)&&u.default.ins().ZhanLingOpen()&&u.default.ins().setZhanLingData(new l.default)},t.prototype.checkRedPoint=function(){if(!u.default.ins().ZhanLingOpen())return!1;var e=0,t=u.default.ins().isUpGradeByStar(e)||u.default.ins().isHintNum(e);if(t)return!0;if(t=u.default.ins().isUpGradeByTalent(e))return!0;var i=s.default.ZhanLingConfig;for(var n in i.upgradeInfo)if(t=u.default.ins().getZhanLingDataByDrugUse(e,Number(n)))return!0;for(var a=0;a<u.default.ins().showZLlist.length;a++){if(e=u.default.ins().showZLlist[a].id){if(t=u.default.ins().isUpGradeByStar(e)||u.default.ins().isHintNum(e))return!0;if(t=u.default.ins().isUpGradeByTalent(e))return!0}}return e=0,!!(t=u.default.ins().getZhanLingItemRedPoint(e))},t.prototype.ZhanLingItemTips=function(e,t,i){void 0===t&&(t=0),void 0===i&&(i=!1);var n=e,a=s.default.ItemConfig[n],r=i?1:0,l=u.default.ins().getZhanLingItemPower(n,r),c=l,d=a.level?a.level+"\u7ea7":"\u65e0\u7ea7\u522b",f=s.default.ZhanLingEquip[n],p={left:"\u90e8\u4f4d:\n\u7b49\u7ea7:",right:s.default.ZhanLingConfig.zlEquipName[f.pos-1]+"\n"+d},h=[];h.push({title:"\u57fa\u7840\u5c5e\u6027:",attr:f.attrs});var g,y,v=s.default.ZhanLingEquip[n].level;v=v||1;for(var m,b=s.default.ZhanLingSuit[v],_=65280,C=u.default.ins().getZhanLingDataById(t),I=16711935,T=16711935,S=0,R="",B=0;B<s.default.ZhanLingConfig.equipPosCount;B++){var M=65280,E=C?s.default.ZhanLingEquip[C.items[B]]:null;!C||!C.items[B]||!E||E.level<v?(M=_=16711680,I=T=6710886):S++,i||B+1==s.default.ZhanLingEquip[n].pos&&(M=65280);var D="|C:"+M+"&T:"+s.default.ZhanLingConfig.zlEquipName[B];B+1<s.default.ZhanLingConfig.equipPosCount&&(D+="|C:"+M+"&T:\u3001"),R+=D}i||(S=1),y="\u6218\u7075\u57fa\u7840\u5c5e\u6027\u589e\u52a0+"+b.precent/100+"%",m="|C:"+_+"&T:("+S+"/"+s.default.ZhanLingConfig.equipPosCount+")",g=R,h.push({title:"|C:0xff00ff&T:"+b.suitWithName+"|"+m,attr:b.attrs,colorName:I,colorValue:T,others:{suitdesc:g,exdesc:y}}),ViewManager.ins().open(EquipTipsBase,o.default.BAG_TYPE_OTHTER,n,c,l,p,h)},t.prototype.sendZhanLingUpExp=function(e,t){void 0===t&&(t=0);var i=this.getBytes(2);i.writeByte(e),i.writeByte(t),this.sendToServer(i)},t.prototype.sendZhanLingDrug=function(e,t){var i=this.getBytes(3);i.writeByte(e),i.writeInt(t),this.sendToServer(i)},t.prototype.sendZhanLingWear=function(e,t){var i=this.getBytes(4);i.writeByte(e),i.writeInt(t),this.sendToServer(i)},t.prototype.sendZhanLingComposeItem=function(e){var t=this.getBytes(5);t.writeInt(e),this.sendToServer(t)},t.prototype.sendZhanLingSkinUpGrade=function(e){var t=this.getBytes(11);t.writeByte(e),this.sendToServer(t)},t.prototype.sendZhangLingSkinChange=function(e){var t=this.getBytes(12);t.writeByte(e),this.sendToServer(t)},t.prototype.postZhanLingInfo=function(e){for(var t=e.readByte(),i=0;i<t;i++){var n=new l.default;n.id=e.readInt(),n.talentLv=e.readByte(),n.level=e.readShort(),n.exp=e.readInt(),n.drugs=[];for(var a=e.readByte(),o=0;o<a;o++){var r=e.readInt(),s=e.readShort();n.drugs.push({itemId:r,count:s})}var c=e.readByte();if(c){n.items=[];for(var d=0;d<c;d++)n.items.push(e.readInt())}u.default.ins().setZhanLingData(n)}var f=e.readByte();u.default.ins().ZhanLingSkinId=f},t.prototype.postZhanLingUpExp=function(e){var t=e.readByte(),i=e.readShort(),n=e.readInt(),a=u.default.ins().getZhanLingDataById(t);if(a){var o=a.level;a.level=i,a.exp=n,i>o&&this.postZhanLingUpgrade()}},t.prototype.postZhanLingUpgrade=function(){},t.prototype.postZhanLingDrug=function(e){var t=e.readByte(),i=e.readInt(),n=e.readShort(),a=u.default.ins().getZhanLingDataById(t);if(a){for(var o=!1,r=0;r<a.drugs.length;r++)if(a.drugs[r].itemId==i){a.drugs[r].count=n,o=!0;break}o||a.drugs.push({itemId:i,count:n})}},t.prototype.postZhanLingWear=function(e){var t=e.readByte(),i=e.readInt(),n=u.default.ins().getZhanLingDataById(t);if(n){var a=s.default.ZhanLingEquip[i];a&&(n.items[a.pos-1]=i)}},t.prototype.postZhanLingComposeItem=function(e){var t=e.readByte(),i=e.readByte(),n=u.default.ins().getZhanLingDataById(t);if(n)for(var a=0;a<i;a++)n.items[a]=e.readInt()},t.prototype.postZhanLingBubble=function(e){var t=e.readDouble(),i=e.readInt(),n=e.readByte(),a=c.default.ins().getEntityByHandle(t);a&&a.showZhanling(n,i)},t.prototype.doZhanLingSkill=function(e){var t=u.default.ins().getZhanLingDataById(0),i=s.default.ZhanLingLevel[0][t.level].talentLevel,n=s.default.ZhanLingTalent[0][i];d.default.ins().postShowSkillWord(n.showWords)},t.prototype.postZhanLingSkinUpGrade=function(e){var t=e.readByte(),i=e.readShort(),n=u.default.ins().getZhanLingDataById(t),a=0;n?a=n.talentLv:((n=new l.default).id=t,u.default.ins().setZhanLingData(n)),i!=a&&this.postZhanLingTalentLvUpGrade(),n.talentLv=i},t.prototype.postZhanLingTalentLvUpGrade=function(){},t.prototype.postZhangLingSkinChange=function(e){var t=e.readByte();u.default.ins().ZhanLingSkinId=t},t}(n.default);i.default=p,window.GameSystem.push(p.ins.bind(p)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../base/EntityManager":"EntityManager","../../manager/GlobalConfig":"GlobalConfig","../bag/UserBag":"UserBag","../rolewin/UserSkill":"UserSkill","../zs/UserZs":"UserZs","./model/ZhanLingData":"ZhanLingData","./model/ZhanLingModel":"ZhanLingModel"}],ZhiZunEquipLevel:[function(e,t,i){"use strict";cc._RF.push(t,"107d5nWNglJ1KWtCtlLoN0H","ZhiZunEquipLevel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.ex_power=0}}();i.default=n,cc._RF.pop()},{}],ZhiZunLinkLevel:[function(e,t,i){"use strict";cc._RF.push(t,"c6cccvxU29LorprscTa8DbN","ZhiZunLinkLevel"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.ex_power=0}}();i.default=n,cc._RF.pop()},{}],ZhuZaiData:[function(e,t,i){"use strict";cc._RF.push(t,"0c5b7kIotdEG47f+oeD44w9","ZhuZaiData");(function(){function e(){}e.prototype.parser=function(e){this.id=e.readInt(),this.rank=e.readShort(),this.growupID=e.readInt()},Object.defineProperty(e.prototype,"lv",{get:function(){return this.rank*GlobalConfig.EquipPointConstConfig.rankGrowUp+this.growupID},enumerable:!0,configurable:!0}),e.prototype.isMaxLevel=function(){return!GlobalConfig.EquipPointGrowUpConfig[this.id][this.lv+1]},e.prototype.canLevelup=function(){var e=GlobalConfig.EquipPointGrowUpConfig[this.id][this.lv],t=e.growUpItem.id,i=e.needLevel/1e3>>0,n=e.needLevel%1e3;return!(this.isMaxLevel()||i&&UserZs.ins().lv<i||Actor.level<n)&&!(UserBag.ins().getBagGoodsCountById(0,t)<e.growUpItem.count)},e.prototype.canAdvance=function(){var e=GlobalConfig.EquipPointRankConfig[this.id][this.rank];if(!this.lv||!e)return!1;var t=e.rankUpItem.id;return!(UserBag.ins().getBagGoodsCountById(0,t)<e.rankUpItem.count)}})();cc._RF.pop()},{}],ZhuanShengConfig:[function(e,t,i){"use strict";cc._RF.push(t,"11a29bm3RJDCpsDSXQhqfjR","ZhuanShengConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhuanShengExpConfig:[function(e,t,i){"use strict";cc._RF.push(t,"d9ecdN+0P9FXKrdzp9ZwwXb","ZhuanShengExpConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhuanShengLevelConfig:[function(e,t,i){"use strict";cc._RF.push(t,"cdc00t6WbJCwqpAYx6oQGIk","ZhuanShengLevelConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhuangBanConfig:[function(e,t,i){"use strict";cc._RF.push(t,"e6293TSOKJOZ4jp8Y/k8K87","ZhuangBanConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhuangBanId:[function(e,t,i){"use strict";cc._RF.push(t,"df426J2NhNANq6+e672GspJ","ZhuangBanId"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhuangBanLevelUp:[function(e,t,i){"use strict";cc._RF.push(t,"f4db4WNeftHDbhKEl2/HHTB","ZhuangBanLevelUp"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],ZhulingAttrConfig:[function(e,t,i){"use strict";cc._RF.push(t,"bf7f2wKiGlBMpruIcTW1xzk","ZhulingAttrConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){}}();i.default=n,cc._RF.pop()},{}],ZhulingCostConfig:[function(e,t,i){"use strict";cc._RF.push(t,"ad853zsqj9Jw6ym0x3wau0N","ZhulingCostConfig"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){return function(){this.level=1,this.itemId=1,this.count=1}}();i.default=n,cc._RF.pop()},{}],ZhuzaiEquip:[function(e,t,i){"use strict";cc._RF.push(t,"8bd2fihArJH7aluxJX9b9Y0","ZhuzaiEquip"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../entity/SubRoles"),r=e("../../manager/GlobalConfig"),s=function(e){function t(){var t=e.call(this)||this;return t.sysId=a.PackageID.ZhuZaiEquip,t.regNetMsg(1,t.postZhuZaiData),t.regNetMsg(3,t.postShengjie),t.regNetMsg(4,t.postShengjie),t}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.postZhuZaiData=function(e){for(var t,i=e.readShort(),n=0;n<i;n++){t=e.readByte();for(var a=e.readShort(),r=0;r<a;r++){var s=new ZhuZaiData;s.parser(e),o.default.ins().getSubRoleByIndex(t).setZhuZaiData(s.id-1,s)}}},t.prototype.sendShengjie=function(e,t){var i=this.getBytes(3);i.writeByte(e),i.writeInt(t),this.sendToServer(i)},t.prototype.postShengjie=function(e){return e.readBoolean()},t.prototype.sendGrow=function(e,t){var i=this.getBytes(4);i.writeByte(e),i.writeInt(t),this.sendToServer(i)},t.prototype.sendFenjie=function(){this.sendBaseProto(5)},t.prototype.canFengjie=function(){return!1},t.prototype.canAllLevelup=function(){for(var e=o.default.ins().subRolesLen,t=0;t<e;t++)if(this.canLevelup(t))return!0;return!1},t.prototype.canLevelup=function(e){var t=r.default.EquipPointBasicConfig;for(var i in t){var n=o.default.ins().getSubRoleByIndex(e).getZhuZaiDataByIndex(parseInt(i)-1);if(n&&n.canLevelup())return!0}return!1},t.prototype.canAllAdvance=function(){for(var e=o.default.ins().subRolesLen,t=0;t<e;t++)if(this.canAdvance(t))return!0;return!1},t.prototype.canAdvance=function(e){var t=r.default.EquipPointBasicConfig;for(var i in t){var n=o.default.ins().getSubRoleByIndex(e).getZhuZaiDataByIndex(parseInt(i)-1);if(n&&n.canAdvance())return!0}return!1},t}(n.default);i.default=s,s.ins(),cc._RF.pop()},{"../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/SubRoles":"SubRoles","../../manager/GlobalConfig":"GlobalConfig"}],ZsBossRuleSpeak:[function(e,t,i){"use strict";cc._RF.push(t,"e4a33wVvm5Gb7TVCCNyVnvd","ZsBossRuleSpeak"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../../../core/view/BaseEuiView"),a=e("../../../../core/base/ViewManager"),o=e("../../../enum/LayerManager"),r=function(e){function t(){var t=e.call(this)||this;return t.parentRoot=o.LayerManager.UI_Popup,t}return __extends(t,e),t.prototype.initData=function(){},t.prototype.initUI=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},t.prototype.otherClose=function(e){a.default.ins().close(this)},t}(n.default);i.default=r,cc._RF.pop()},{"../../../../core/base/ViewManager":"ViewManager","../../../../core/view/BaseEuiView":"BaseEuiView","../../../enum/LayerManager":"LayerManager"}],ZsBoss:[function(e,t,i){"use strict";cc._RF.push(t,"ae77aid3PxFlqWd52dtdSgN","ZsBoss"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../../core/net/PackageID"),o=e("../../../core/base/MessageCenter"),r=e("../boss/UserBoss"),s=e("../zs/UserZs"),u=e("../tips/UserTips"),l=e("../activity/model/RewardData"),c=e("../../manager/TimerManager"),d=e("../../manager/GlobalConfig"),f=e("../../entity/Actor"),p=function(e){function t(){var i=e.call(this)||this;return i.promptList=["","\u4f60\u4eca\u5929\u5df2\u7ecf\u53c2\u52a0\u8fc71\u6b21\u6d3b\u52a8\u4e86\uff0c\u8bf7\u660e\u5929\u518d\u6765","\u6311\u6218CD\u4e2d","\u8f6c\u751fBOSS\u5df2\u7ecf\u88ab\u51fb\u6740","\u6ca1\u6709\u7b26\u5408\u6761\u4ef6\u7684boss","\u6d3b\u52a8\u672a\u5f00\u542f","\u5728\u526f\u672c\u4e2d"],i.firstShowWin=!1,i._clearOther=!1,i.canChange=!0,o.default.compile(t),i.sysId=a.PackageID.ZsBoss,i.regNetMsg(1,i.postBossList),i.regNetMsg(2,i.postBossOpen),i.regNetMsg(3,i.postRrmainTime),i.regNetMsg(4,i.postRankInfo),i.regNetMsg(5,i.postLotteryInfo),i.regNetMsg(7,i.postChallengeResult),i.regNetMsg(8,i.postHudunPoint),i.regNetMsg(9,i.postWinResult),i.regNetMsg(11,i.doGetMyPoint),i.regNetMsg(12,i.doTalkMaxPoint),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.sendGetBossList=function(){this.sendBaseProto(1)},t.prototype.sendRequstChallenge=function(){this.sendBaseProto(3)},t.prototype.sendRequstBossRank=function(e){var t=this.getBytes(4);t.writeInt(e),this.sendToServer(t)},t.prototype.sendJoinChoujiang=function(){this.sendBaseProto(5)},t.prototype.sendBuyCd=function(){this.sendBaseProto(6)},t.prototype.postBossList=function(e){var t=e.readShort();this.bossInfoList=[];for(var i=0;i<t;i++)this.bossInfoList.push(new h(e));this.aliveBossNum=e.readShort()},t.prototype.getBossListLength=function(){var e=0;return null!=this.bossInfoList&&(e=this.bossInfoList.length),e},t.prototype.getBossInfoByIndex=function(e){var t=null;return null!=this.bossInfoList&&e>=0&&e<this.bossInfoList.length&&(t=this.bossInfoList[e]),t},t.prototype.postBossOpen=function(e){this.acIsOpen=e.readBoolean(),this.acIsOpen?s.default.ins().lv>0&&r.default.ins().worldBossLeftTime[r.default.BOSS_SUBTYPE_WORLDBOSS]&&r.default.ins().postBossData(!0,this.canPlayBossName()):this.reliveTime=0},t.prototype.postRrmainTime=function(e){this.remainTime=e.readShort(),this.reliveTime=e.readShort()},t.prototype.postRankInfo=function(e){this.parseBossRankList(e)},t.prototype.postLotteryInfo=function(e){this.lotteryItemId=e.readInt(),ViewManager.ins().open(ZSBossLotteryWin)},t.prototype.postChallengeResult=function(e){var i=e.readByte();i>0?u.default.ins().showTips(t.ins().promptList[i]):0==i&&ViewManager.ins().close(BossWin)},t.prototype.postHudunPoint=function(e){this.hudun=e.readInt()},t.prototype.postWinResult=function(e){for(var t,i=[e.readString(),e.readString(),e.readShort()],n=e.readShort(),a=[],o=0;o<n;o++)(t=new l.default).parser(e),a.push(t);ViewManager.ins().open(ZsBossResultWin,i,a)},Object.defineProperty(t.prototype,"reliveTime",{get:function(){return this._reliveTime},set:function(e){this._reliveTime!=e&&(this._reliveTime=e,c.default.ins().remove(this.timeClock,this),c.default.ins().doTimer(1e3,this._reliveTime,this.timeClock,this))},enumerable:!0,configurable:!0}),t.prototype.timeClock=function(){this._reliveTime--,this._reliveTime<=0&&c.default.ins().remove(this.timeClock,this)},t.prototype.parseBossRankList=function(e){this.bossRankList=[];e.readInt();for(var t=e.readShort(),i=0;i<t;i++)this.bossRankList.push(new g(e,i+1))},t.prototype.getBarList=function(){if(this.barList&&this.barList.length>0)return this.barList;var e;this.barList||(this.barList=[]);for(var t=1;t<5;t++)e=d.default.OtherBoss1Config[t],this.barList.push(e.llimit+"-"+e.hlimit+"\u8f6c");return this.barList},t.prototype.isZsBossFb=function(e){for(var t=1;t<5;t++)if(e==d.default.OtherBoss1Config[t].fbid)return!0;return!1},t.prototype.checkIsMoreMoney=function(){return f.default.yb>=d.default.WorldBossBaseConfig.clearCdCost[r.default.ins().currBossSubType-1]},t.prototype.checkIsShowNoticeWin=function(){return!1},t.prototype.canPlayBossIndex=function(){for(var e,t=s.default.ins().lv,i=4;i>=1;i--)if(t>=(e=d.default.OtherBoss1Config[i]).llimit&&t<=e.hlimit&&this.aliveBossNum>=i)return i;return 0},t.prototype.canPlayBossName=function(){var e=this.canPlayBossIndex();if(e>0){var t=d.default.OtherBoss1Config[e];return d.default.MonstersConfig[t.bossId].name}return"\u8f6c\u751fboss "},Object.defineProperty(t.prototype,"clearOther",{get:function(){return this._clearOther},set:function(e){this._clearOther!=e&&(this._clearOther=e,this.canChange=!1,c.default.ins().doTimer(1e3,10,this.overDealy,this,this.dealyOver,this))},enumerable:!0,configurable:!0}),t.prototype.dealyOver=function(){c.default.ins().remove(this.overDealy,this),this.canChange=!0},t.prototype.overDealy=function(){},t.prototype.doGetMyPoint=function(e){this.postLotteryPoint(e.readShort())},t.prototype.postLotteryPoint=function(e){return e},t.prototype.doTalkMaxPoint=function(e){this.postLotteryMaxPost(e.readString(),e.readShort())},t.prototype.postLotteryMaxPost=function(e,t){return[e,t]},t}(n.default);i.default=p;var h=function(){return function(e){this.bossId=e.readInt(),this.kill=e.readBoolean(),this.challengeIn=e.readBoolean()}}(),g=function(){return function(e,t){this.id=e.readInt(),this.names=e.readString(),this.shanghai=e.readDouble(),this.rank=t}}();window.GameSystem.push(p.ins.bind(p)),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../../core/net/PackageID":"PackageID","../../base/BaseSystem":"BaseSystem","../../entity/Actor":"Actor","../../manager/GlobalConfig":"GlobalConfig","../../manager/TimerManager":"TimerManager","../activity/model/RewardData":"RewardData","../boss/UserBoss":"UserBoss","../tips/UserTips":"UserTips","../zs/UserZs":"UserZs"}],ZsPanel:[function(e,t,i){"use strict";cc._RF.push(t,"515d0MQU0BF2J+DPs5IFZXP","ZsPanel"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../core/view/BaseEventView"),a=cc._decorator,o=a.ccclass,r=(a.property,function(e){function t(){var t=e.call(this)||this;return t.lastZsLevel=-1,t}return __extends(t,e),t.prototype.childrenCreated=function(){this.init()},t.prototype.init=function(){},t.prototype.open=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.addEvents()},t.prototype.close=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.removeEvent()},t.prototype.addEvents=function(){},t.prototype.removeEvent=function(){},t.prototype.onTap=function(e){},t.prototype.setData=function(){},t=__decorate([o],t)}(n.default));i.default=r,cc._RF.pop()},{"../../core/view/BaseEventView":"BaseEventView"}],binary:[function(e,t,i){"use strict";function n(e,t){this.lo=e>>>0,this.hi=t>>>0}cc._RF.push(t,"7628cjal75LhJNrrIbzRTrJ","binary");var a,o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1},n.fromNumber=function(e){if(0===e)return o;var t=e<0;t&&(e=-e);var i=e>>>0,a=(e-i)/4294967296>>>0;return t&&(a=~a>>>0,i=~i>>>0,++i>4294967295&&(i=0,++a>4294967295&&(a=0))),new n(i,a)},n.from=function(e){return"number"==typeof e?n.fromNumber(e):e.low||e.high?new n(e.low>>>0,e.high>>>0):o},n.prototype.toNumber=function(e){if(!e&&this.hi>>>31){var t=1+~this.lo>>>0,i=~this.hi>>>0;return t||(i=i+1>>>0),-(t+4294967296*i)}return this.lo+4294967296*this.hi},n.prototype.toLong=function(e){return util.Long?new util.Long(0|this.lo,0|this.hi,Boolean(e)):{low:0|this.lo,high:0|this.hi,unsigned:Boolean(e)}},function(e){var t=function(){function e(){}return e.LITTLE_ENDIAN="littleEndian",e.BIG_ENDIAN="bigEndian",e}();e.Endian=t;var i=function(){function i(e,i){void 0===i&&(i=0),this.bufferExtSize=0,this.EOF_byte=-1,this.EOF_code_point=-1,i<0&&(i=0),this.bufferExtSize=i;var n,a=0;if(e){var o=void 0;if(e instanceof Uint8Array?(o=e,a=e.length):(a=e.byteLength,o=new Uint8Array(e)),0==i)n=new Uint8Array(a);else n=new Uint8Array((1+(a/i|0))*i);n.set(o)}else n=new Uint8Array(i);this.write_position=a,this._position=0,this._bytes=n,this.data=new DataView(n.buffer),this.endian=t.BIG_ENDIAN}return Object.defineProperty(i.prototype,"endian",{get:function(){return 0==this.$endian?t.LITTLE_ENDIAN:t.BIG_ENDIAN},set:function(e){this.$endian=e==t.LITTLE_ENDIAN?0:1},enumerable:!0,configurable:!0}),i.prototype.setArrayBuffer=function(e){},Object.defineProperty(i.prototype,"readAvailable",{get:function(){return this.write_position-this._position},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"buffer",{get:function(){return this.data.buffer.slice(0,this.write_position)},set:function(e){var t,i=e.byteLength,n=new Uint8Array(e),a=this.bufferExtSize;0==a?t=new Uint8Array(i):t=new Uint8Array((1+(i/a|0))*a);t.set(n),this.write_position=i,this._bytes=t,this.data=new DataView(t.buffer)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"rawBuffer",{get:function(){return this.data.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bytes",{get:function(){return this._bytes},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"dataView",{get:function(){return this.data},set:function(e){this.buffer=e.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"bufferOffset",{get:function(){return this.data.byteOffset},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"position",{get:function(){return this._position},set:function(e){this._position=e,e>this.write_position&&(this.write_position=e)},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"length",{get:function(){return this.write_position},set:function(e){this.write_position=e,this.data.byteLength>e&&(this._position=e),this._validateBuffer(e)},enumerable:!0,configurable:!0}),i.prototype._validateBuffer=function(e){if(this.data.byteLength<e){var t=this.bufferExtSize,i=void 0;if(0==t)i=new Uint8Array(e);else i=new Uint8Array((1+(e/t>>0))*t);i.set(this._bytes),this._bytes=i,this.data=new DataView(i.buffer)}},Object.defineProperty(i.prototype,"bytesAvailable",{get:function(){return this.data.byteLength-this._position},enumerable:!0,configurable:!0}),i.prototype.clear=function(){var e=new ArrayBuffer(this.bufferExtSize);this.data=new DataView(e),this._bytes=new Uint8Array(e),this._position=0,this.write_position=0},i.prototype.readBoolean=function(){if(this.validate(1))return!!this._bytes[this.position++]},i.prototype.readByte=function(){if(this.validate(1))return this.data.getInt8(this.position++)},i.prototype.readBytes=function(t,i,n){if(void 0===i&&(i=0),void 0===n&&(n=0),t){var a=this._position,o=this.write_position-a;if(o<0)e.$error(1025);else{if(0==n)n=o;else if(n>o)return void e.$error(1025);var r=t._position;t._position=0,t.validateBuffer(i+n),t._position=r,t._bytes.set(this._bytes.subarray(a,a+n),i),this.position+=n}}},i.prototype.readDouble=function(){if(this.validate(8)){var e=this.data.getFloat64(this._position,0==this.$endian);return this.position+=8,e}},i.prototype.readFloat=function(){if(this.validate(4)){var e=this.data.getFloat32(this._position,0==this.$endian);return this.position+=4,e}},i.prototype.readInt=function(){if(this.validate(4)){var e=this.data.getInt32(this._position,0==this.$endian);return this.position+=4,e}},i.prototype.readShort=function(){if(this.validate(2)){var e=this.data.getInt16(this._position,0==this.$endian);return this.position+=2,e}},i.prototype.readUnsignedByte=function(){if(this.validate(1))return this._bytes[this.position++]},i.prototype.readUnsignedInt=function(){if(this.validate(4)){var e=this.data.getUint32(this._position,0==this.$endian);return this.position+=4,e}},i.prototype.readUnsignedShort=function(){if(this.validate(2)){var e=this.data.getUint16(this._position,0==this.$endian);return this.position+=2,e}},i.prototype.readUTF=function(){var e=this.readUnsignedShort();return e>0?this.readUTFBytes(e):""},i.prototype.readUTFBytes=function(e){if(this.validate(e)){var t=this.data,i=new Uint8Array(t.buffer,t.byteOffset+this._position,e);return this.position+=e,this.decodeUTF8(i)}},i.prototype.writeBoolean=function(e){this.validateBuffer(1),this._bytes[this.position++]=+e},i.prototype.writeByte=function(e){this.validateBuffer(1),this._bytes[this.position++]=255&e},i.prototype.writeBytes=function(e,t,i){var n;void 0===t&&(t=0),void 0===i&&(i=0),t<0||i<0||(n=0==i?e.length-t:Math.min(e.length-t,i))>0&&(this.validateBuffer(n),this._bytes.set(e._bytes.subarray(t,t+n),this._position),this.position=this._position+n)},i.prototype.writeDouble=function(e){this.validateBuffer(8),this.data.setFloat64(this._position,e,0==this.$endian),this.position+=8},i.prototype.writeFloat=function(e){this.validateBuffer(4),this.data.setFloat32(this._position,e,0==this.$endian),this.position+=4},i.prototype.writeInt=function(e){this.validateBuffer(4),this.data.setInt32(this._position,e,0==this.$endian),this.position+=4},i.prototype.writeShort=function(e){this.validateBuffer(2),this.data.setInt16(this._position,e,0==this.$endian),this.position+=2},i.prototype.writeUnsignedInt=function(e){this.validateBuffer(4),this.data.setUint32(this._position,e,0==this.$endian),this.position+=4},i.prototype.writeUnsignedShort=function(e){this.validateBuffer(2),this.data.setUint16(this._position,e,0==this.$endian),this.position+=2},i.prototype.writeUTF=function(e){var t=this.encodeUTF8(e),i=t.length;this.validateBuffer(2+i),this.data.setUint16(this._position,i,0==this.$endian),this.position+=2,this._writeUint8Array(t,!1)},i.prototype.writeUTFBytes=function(e){this._writeUint8Array(this.encodeUTF8(e))},i.prototype.toString=function(){return"[ByteArray] length:"+this.length+", bytesAvailable:"+this.bytesAvailable},i.prototype._writeUint8Array=function(e,t){void 0===t&&(t=!0);var i=this._position,n=i+e.length;t&&this.validateBuffer(n),this.bytes.set(e,i),this.position=n},i.prototype.validate=function(t){var i=this._bytes.length;if(i>0&&this._position+t<=i)return!0;e.$error(1025)},i.prototype.validateBuffer=function(e){this.write_position=e>this.write_position?e:this.write_position,e+=this._position,this._validateBuffer(e)},i.prototype.encodeUTF8=function(e){for(var t=0,i=this.stringToCodePoints(e),n=[];i.length>t;){var a=i[t++];if(this.inRange(a,55296,57343))this.encoderError(a);else if(this.inRange(a,0,127))n.push(a);else{var o=void 0,r=void 0;for(this.inRange(a,128,2047)?(o=1,r=192):this.inRange(a,2048,65535)?(o=2,r=224):this.inRange(a,65536,1114111)&&(o=3,r=240),n.push(this.div(a,Math.pow(64,o))+r);o>0;){var s=this.div(a,Math.pow(64,o-1));n.push(128+s%64),o-=1}}}return new Uint8Array(n)},i.prototype.decodeUTF8=function(e){for(var t,i=0,n="",a=0,o=0,r=0,s=0;e.length>i;){var u=e[i++];if(u==this.EOF_byte)t=0!=o?this.decoderError(!1):this.EOF_code_point;else if(0==o)this.inRange(u,0,127)?t=u:(this.inRange(u,194,223)?(o=1,s=128,a=u-192):this.inRange(u,224,239)?(o=2,s=2048,a=u-224):this.inRange(u,240,244)?(o=3,s=65536,a=u-240):this.decoderError(!1),a*=Math.pow(64,o),t=null);else if(this.inRange(u,128,191))if(r+=1,a+=(u-128)*Math.pow(64,o-r),r!==o)t=null;else{var l=a,c=s;a=0,o=0,r=0,s=0,t=this.inRange(l,c,1114111)&&!this.inRange(l,55296,57343)?l:this.decoderError(!1,u)}else a=0,o=0,r=0,s=0,i--,t=this.decoderError(!1,u);null!==t&&t!==this.EOF_code_point&&(t<=65535?t>0&&(n+=String.fromCharCode(t)):(t-=65536,n+=String.fromCharCode(55296+(t>>10&1023)),n+=String.fromCharCode(56320+(1023&t))))}return n},i.prototype.encoderError=function(t){e.$error(1026,t)},i.prototype.decoderError=function(t,i){return t&&e.$error(1027),i||65533},i.prototype.inRange=function(e,t,i){return t<=e&&e<=i},i.prototype.div=function(e,t){return Math.floor(e/t)},i.prototype.stringToCodePoints=function(e){for(var t=[],i=0,n=e.length;i<e.length;){var a=e.charCodeAt(i);if(this.inRange(a,55296,57343))if(this.inRange(a,56320,57343))t.push(65533);else if(i==n-1)t.push(65533);else{var o=e.charCodeAt(i+1);if(this.inRange(o,56320,57343)){var r=1023&a,s=1023&o;i+=1,t.push(65536+(r<<10)+s)}else t.push(65533)}else t.push(a);i+=1}return t},i.prototype.writeUnsignedByte=function(e){this.validateBuffer(1),this.data.setUint8(this._position,e,0==this.$endian),this.position+=1},i.prototype.writeLong=function(e){this.validateBuffer(8);var t=n.from(e);0==this.$endian?(this.data.setUint32(this._position,t.lo,0==this.$endian),this.data.setUint32(this._position+4,t.hi,0==this.$endian)):(this.data.setUint32(this._position,t.hi,0==this.$endian),this.data.setUint32(this._position+4,t.lo,0==this.$endian)),this.position+=8},i.prototype.readLong=function(e){if(this.validate(8)){var t=new n(0,0);return 0==this.$endian?(t.lo=this.data.getUint32(this._position,0==this.$endian),t.hi=this.data.getUint32(this._position+4,0==this.$endian)):(t.hi=this.data.getUint32(this._position,0==this.$endian),t.lo=this.data.getUint32(this._position+4,0==this.$endian)),this.position+=8,t.toNumber(!0)}},i.prototype.writeUnsignedLong=function(e){this.validateBuffer(8);var t=n.from(e);0==this.$endian?(this.data.setUint32(this._position,t.lo,0==this.$endian),this.data.setUint32(this._position+4,t.hi,0==this.$endian)):(this.data.setUint32(this._position,t.hi,0==this.$endian),this.data.setUint32(this._position+4,t.lo,0==this.$endian)),this.position+=8},i.prototype.readUnsignedLong=function(e){if(this.validate(8)){this.data.getFloat64(this._position,0==this.$endian);var t=new n(0,0);return 0==this.$endian?(t.lo=this.data.getUint32(this._position,0==this.$endian),t.hi=this.data.getUint32(this._position+4,0==this.$endian)):(t.hi=this.data.getUint32(this._position,0==this.$endian),t.lo=this.data.getUint32(this._position+4,0==this.$endian)),this.position+=8,t.toNumber(!1)}},i}();e.ByteArray=i}(a||(a={})),t.exports=a,cc._RF.pop()},{}],hint:[function(e,t,i){"use strict";cc._RF.push(t,"fe0bcP2HK5Hp5zeMaicCDbQ","hint"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../../base/BaseSystem"),a=e("../../manager/GlobalConfig"),o=e("../bag/UserBag"),r=e("../../map/GameMap"),s=e("../tips/UserTips"),u=e("../../../core/base/MessageCenter"),l=function(e){function t(){var i=e.call(this)||this;return i.presceneid=-1,i.prefbId=-1,i.killType=0,i.picKillBoss="",u.default.compile(t),i}return __extends(t,e),t.ins=function(){return e.ins.call(this)},t.prototype.checkHint=function(e,i,n,o){if(!e){switch(i){case t.TARTYPE_WELCOME:return this.showHint(i),!0;case t.TARTYPE_KILL_BOSS:for(var r in a.default.HintConfig){var s=a.default.HintConfig[r];if(s.target[0].guanqiaId==o.gqid)return this.showHint(i,s.image),!0}}return!1}if(e){if(null!=(u=this.HitConfig(e,i)))return this.showHint(i,u),!0}else for(var r in n){var u,l=n[r];if(null!=(u=this.HitConfig(l,i)))return this.showHint(i,u),!0}return!1},t.prototype.HitConfig=function(e,i){var n=e;for(var s in a.default.HintConfig){var u=a.default.HintConfig[s];if(u.targetType==i)switch(i){case t.TARTYPE_ACH_BEF:if(n.achievementId==u.target[0].achievementId&&n.taskId==u.target[0].taskId&&u.target[0].isfull&&u.target[0].isfull>0&&o.default.ins().getSurplusCount())return u.image;break;case t.TARTYPE_ACH_AFT:if(n.achievementId==u.target[0].achievementId&&n.taskId==u.target[0].taskId)return u.image;break;case t.TARTYPE_SCE_IN:if(r.default.mapID==u.target[0].sceneid&&r.default.fubenID==u.target[0].fbId&&this.presceneid==u.target[0].presceneid&&this.prefbId==u.target[0].prefbId)return u.image}}return null},t.prototype.showHint=function(e,i){if(!i&&e==t.TARTYPE_WELCOME)return i=a.default.HintConfig[1].image,void s.default.ins().showHintTips(i);i&&""!=i&&s.default.ins().showHintTips(i)},t.prototype.postWelcome=function(){this.checkHint(null,t.TARTYPE_WELCOME)},t.prototype.postAchievementBef=function(e){e&&this.checkHint(e,t.TARTYPE_ACH_BEF)},t.prototype.postAchievementAft=function(e){if(e){var i;for(var n in a.default.AchievementTaskConfig){var o=a.default.AchievementTaskConfig[n];if(o.achievementId==e.achievementId&&o.taskId==e.id){i=o;break}}i&&this.checkHint(i,t.TARTYPE_ACH_AFT)}},t.prototype.postSeceneIn=function(){-1==this.presceneid&&(this.presceneid=r.default.mapID),-1==this.prefbId&&(this.prefbId=r.default.fubenID);var e=a.default.ScenesConfig[r.default.mapID];e&&(this.checkHint(e,t.TARTYPE_SCE_IN),this.presceneid=r.default.mapID,this.prefbId=r.default.fubenID)},t.prototype.postKillBoss=function(e){this.checkHint(e,t.TARTYPE_KILL_BOSS)},t.prototype.postKillBossEx=function(e){this.checkHint(null,t.TARTYPE_KILL_BOSS,null,{gqid:e})},t.TARTYPE_WELCOME=1,t.TARTYPE_ACH_BEF=2,t.TARTYPE_ACH_AFT=3,t.TARTYPE_SCE_IN=4,t.TARTYPE_KILL_BOSS=5,t}(n.default);i.default=l,l.ins(),cc._RF.pop()},{"../../../core/base/MessageCenter":"MessageCenter","../../base/BaseSystem":"BaseSystem","../../manager/GlobalConfig":"GlobalConfig","../../map/GameMap":"GameMap","../bag/UserBag":"UserBag","../tips/UserTips":"UserTips"}],skillConst:[function(e,t,i){"use strict";cc._RF.push(t,"57d85tQBjpMfqsbybOOMkWl","skillConst"),Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function e(){}return e.baseSkillIndex=[11,21,31],e}();i.skillConst=n,function(e){e[e.Single=0]="Single",e[e.All=1]="All",e[e.NoEff=2]="NoEff",e[e.SelfAndTarget=3]="SelfAndTarget"}(i.SkillEffNumType||(i.SkillEffNumType={})),function(e){e[e.Friend=1]="Friend",e[e.Other=2]="Other",e[e.Self=3]="Self",e[e.SelfHpLess=4]="SelfHpLess"}(i.castType||(i.castType={})),cc._RF.pop()},{}],"types.d.ts":[function(e,t,i){"use strict";cc._RF.push(t,"73697xn1VNDdbPuM03v3l7G","types.d.ts"),Object.defineProperty(i,"__esModule",{value:!0}),cc._RF.pop()},{}],uint64:[function(e,t,i){"use strict";cc._RF.push(t,"6b493sOKz1K343bTqnXI9Pe","uint64"),Object.defineProperty(i,"__esModule",{value:!0});var n=e("../net/GameByteArray"),a=function(){function e(e){this._lowUint=0,this._highUint=0,this.value=e}return e.prototype.isEqual=function(e){return!!e&&(this._lowUint==e._lowUint&&this._highUint==e._highUint)},e.prototype.isGreaterThan=function(t){if(t instanceof e)return this._highUint>t._highUint||this._highUint==t._highUint&&this._lowUint>t._lowUint;var i=new e;return"string"==typeof t?(i.value=t,this.isGreaterThanOrEqual(i)):"number"==typeof t?(i.value=t.toString(),this.isGreaterThanOrEqual(i)):void 0},e.prototype.isGreaterThanOrEqual=function(t){if(t instanceof e)return this._highUint>t._highUint||this._highUint==t._highUint&&this._lowUint>=t._lowUint;var i=new e;return"string"==typeof t?(i.value=t,this.isGreaterThanOrEqual(i)):"number"==typeof t?(i.value=t.toString(),this.isGreaterThanOrEqual(i)):void 0},Object.defineProperty(e.prototype,"isZero",{get:function(){return 0==this._lowUint&&0==this._highUint},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"isGreaterThanZero",{get:function(){return this._lowUint>0||this._highUint>0},enumerable:!0,configurable:!0}),e.prototype.writeByte=function(e){e.writeUnsignedInt(this._lowUint),e.writeUnsignedInt(this._highUint)},e.prototype.setValue=function(e,t){void 0===e&&(e=0),void 0===t&&(t=0),this._lowUint=e,this._highUint=t},Object.defineProperty(e.prototype,"value",{set:function(t){t instanceof n.default?(this._lowUint=t.readUnsignedInt(),this._highUint=t.readUnsignedInt()):"string"==typeof t&&e.stringToUint64(t,10,this)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"valueByString",{set:function(e){},enumerable:!0,configurable:!0}),e.prototype.leftMove=function(t,i){void 0===i&&(i=null),i=i||this;var n=e.LeftMoveMask[t]&this._lowUint;n>>>=32-t,i._lowUint=this._lowUint<<t,i._highUint=this._highUint<<t,i._highUint=i._highUint|n},e.prototype.add=function(t,i){void 0===i&&(i=null),i=i||this;var n=this._lowUint+t._lowUint;i._highUint=this._highUint+t._highUint,n>=e.MaxLowUint?(i._highUint++,i._lowUint=n-e.MaxLowUint):i._lowUint=n},e.prototype.subtraction=function(t,i){void 0===i&&(i=null),i=i||this;var n=this._lowUint-t._lowUint;i._highUint=this._highUint-t._highUint,n<0?(i._highUint--,i._lowUint=n+e.MaxLowUint):i._lowUint=n},e.prototype.scale=function(t,i){void 0===i&&(i=null),i=i||this;var n=this._lowUint*t;i._highUint=this._highUint*t,i._highUint+=Math.floor(Math.abs(n/e.MaxLowUint)),i._lowUint=n%e.MaxLowUint},e.prototype.toString=function(t){void 0===t&&(t=10);for(var i,n,a,o="",r=this._lowUint,s=this._highUint;0!=s||0!=r;)o=(n=(a=(i=s%t)*e.MaxLowUint+r)%t)+o,s=(s-i)/t,r=(a-n)/t;return o.length?o:"0"},e.stringToUint64=function(t,i,n){void 0===i&&(i=10),void 0===n&&(n=null),n=n||new e;for(var a,o=0,r=0,s=t.length,u=0;u<s;u++)a=o*i+parseInt(t.charAt(u)),r=r*i+Math.floor(a/e.MaxLowUint),o=a%e.MaxLowUint;return n.setValue(o,r),n},e.LeftMoveMask=[0,2147483648,1073741824,536870912,268435456,134217728,67108864,33554432,16777216,8388608,4194304,2097152,1048576,524288,262144,131072,65536,32768,16384,8192,4096,2048,1024,512,256,128,64,32,16,8,4,2,1],e.MaxLowUint=4294967296,e}();i.default=a,cc._RF.pop()},{"../net/GameByteArray":"GameByteArray"}]},{},["GameApp","CreateScene","MainScene","MostEntityCtroller","RoleEntityCtroller","SplashScene","AStar","AStarNode","BresenhamLine","MapGrid","MapGridNode","MapInfo","AttributeData","AttributeFormat","AttributeType","BaseClass","DelayOptManager","ErrorLog","GameConfig","MessageCenter","RedPointBase","ResultManager","ViewManager","CRC16","Encrypt","GuideUtils","GameByteArray","GameSocket","NetInterface","PackageID","WebSock","binary","BaseSound","SoundBg","SoundEffects","SoundManager","types.d.ts","Algorithm","ArrayUtil","ColorUtil","CommonUtils","ComponentUtil","DateUtils","DebugUtils","DictionaryUtil","DirUtil","DisplayUtils","MathUtils","RegExpUtil","StringUtils","TextFlowMaker","Util","EventData","EventDelegate","EventDispatcher","IEventDispatcher","uint64","BaseComponent","BaseEuiView","BaseEventView","BaseItemRender","BaseView","IBaseView","EgretUtils","AIUtil","ExSkillAiLogic","RoleAI","BaseSystem","BaseWinEvents","EntityHideBody","EntityManager","EntityShowMgr","EntityType","IItemRenderer","ListScrollScript","NodeObjectPool","NodePool","NodeResusePool","ObjectPool","AchievementTaskConfig","Activity4configSunmit","ActivityBtnConfig","ActivityConfig","ActivityType10Config","ActivityType11_1Config","ActivityType11_2Config","ActivityType12Config","ActivityType17_1Config","ActivityType17_2Config","ActivityType17_3Config","ActivityType18Config","ActivityType19Config","ActivityType1Config","ActivityType20Config","ActivityType22_1Config","ActivityType22_3Config","ActivityType2Config","ActivityType3Config","ActivityType4Config","ActivityType5Config","ActivityType6Config","ActivityType7Config","ActivityType8Config","ActivityType9Config","ActorExRing2Config","ActorExRing3Config","ActorExRing4Config","ActorExRing5Config","ActorExRing6Config","ActorExRing7Config","ActorExRingAbilityConfig","ActorExRingBookConfig","ActorExRingCommon","ActorExRingConfig","ActorExRingFubenConfig","ActorExRingItemConfig","AllWorldConfig","ArtifactsRankConfig","AttrPowerConfig","AuctionConfig","AuctionItem","BagBaseConfig","BagExpandConfig","BookListConfig","BossHomeConfig","BubbleConfig","CaiKuangConfig","CampBattleConfig","CampBattlePersonalAwardConfig","CampBattlePersonalRankAwardConfig","CardConfig","CashCowAmplitudeConfig","CashCowBasicConfig","CashCowBoxConfig","CashCowLimitConfig","ChaptersConfig","ChaptersRewardConfig","ChongZhi1Config","ChongZhi2Config","ChongZhiConfig","CityBaseConfig","CityBossConfig","ClientGlobalConfig","CrossArenaBase","CrossArenaDataStruct","CrossArenaScore","CrossBossBase","CrossBossConfig","DailyAwardConfig","DailyConfig","DailyFubenConfig","DailyRechargeConfig","DeathGuideConfig","DeathgainWayConfig","DecomposeConfig","DefineEff","DevilBossBase","DevilBossConfig","EffectConfig","EffectsConfig","EnhanceAttrConfig","EnhanceCostConfig","EquipConfig","EquipItemConfig","EquipPointBasicConfig","EquipPointConstConfig","EquipPointGrowUpConfig","EquipPointRankConfig","EquipPointResolveConfig","EquipWithEffConfig","ExRing0Config","ExRing1Config","ExRingAttrConfig","ExRingConfig","ExRingExtendAttrConfig","ExpConfig","ExpFbMonsterConfig","ExpFubenBaseConfig","ExpFubenConfig","FbChNameConfig","FbChallengeBaseConfig","FbChallengeConfig","FbChallengeLotteryConfig","FeatsStore","FieldBossConfig","FirstRechargeClientConfig","FirstRechargeConfig","FlameStamp","FlameStampEffect","FlameStampLevel","FlameStampMat","ForgeIndexConfig","FriendLimit","FsFbConfig","FuLiBtnConfig","FuncNoticeConfig","FuwenTreasureConfig","FuwenTreasureLevelConfig","FuwenTreasureRewardConfig","GGWWaveConf","GWSkillReviseConfig","GainItemConfig","GainWay","GodWeaponBaseConfig","GodWeaponFubenConfig","GodWeaponLevelConfig","GodWeaponLineConfig","GodWeaponTaskConfig","GodWingItemConfig","GodWingLevelConfig","GodWingSuitConfig","GodweaponItemConfig","GuanYinAwardConfig","GuardGodWeaponConf","GuideCondition","GuideConfig","GuildActivityConfig","GuildBattleConst","GuildBattleDayAward","GuildBattleDistributionAward","GuildBattleLevel","GuildBattlePersonalAward","GuildBattlePersonalRankAward","GuildBonFireConfig","GuildBossConfig","GuildBossHpAwardsConfig","GuildBossInfoConfig","GuildBossRankConfig","GuildCommonSkillConfig","GuildConfig","GuildCreateConfig","GuildDonateConfig","GuildLevelConfig","GuildPracticeSkillConfig","GuildStoreConfig","GuildTaskConfig","HeartMethodBaseConfig","HeartMethodConfig","HeartMethodLevelConfig","HeartMethodPosConfig","HeartMethodStageConfig","HeartMethodStarConfig","HeartMethodSuitConfig","HeirloomEquipConfig","HeirloomEquipFireConfig","HeirloomEquipItemConfig","HeirloomEquipSetConfig","HeirloomTreasureConfig","HeirloomTreasureRewardConfig","HelpInfoConfig","HideBossConfig","HintConfig","HunGuConf","HunGuEquip","HunGuSuit","HunYuEquip","ImbaConf","ImbaJigsawConf","ImbaSkillReviseConfig","InstanceBaseConfig","InstanceConfig","IntegralStore","ItemComposeConfig","ItemConfig","ItemDescConfig","ItemGiftConfig","ItemStoreConfig","JadePlateBaseConfig","JadePlateLevelConfig","JingMaiCommonConfig","JingMaiLevelConfig","JingMaiStageConfig","KnighthoodBasicConfig","KnighthoodConfig","KnighthoodStageConfig","KuangDiTuConfig","KuangYuanConfig","LeadFubenBaseConfig","LegendComposeConfig","LegendLevelupConfig","LevelMailConfig","LimitTimeConfig","LimitTimeTaskConfig","LoginActivateConfig","LoginDayMailConfig","LoginRewardsConfig","LoongSoulBaseConfig","LoongSoulConfig","LoongSoulStageConfig","LoopRechargeConfig","MailIdConfig","MergeConfig","MergeTotal","MiJiGridConfig","MiJiSkillConfig","MijiBaseConfig","MoneyConfig","MonsterSpeakConfig","MonsterTitleConf","MonstersConfig","MonstershpConfig","MonthCardConfig","MonthSignBaseConfig","MonthSignConfig","MonthSignDaysConfig","MonthSignVipConfig","MorshipConfig","MultiDayRechargeConfig","NeiGongBaseConfig","NeiGongStageConfig","NewFuncNoticeConfig","NewRoleConfig","NewWorldBossAttrConfig","NewWorldBossBaseConfig","NewWorldBossRankConfig","NpcBaseConfig","OpenSystemConfig","OptionalGiftConfig","OtherBoss1Config","OtherBoss2Config","PActivity1Config","PActivity2Config","PActivity3Config","PActivity9Config","PActivityBtnConfig","PActivityConfig","PassionPointAwardConfig","PassionPointConfig","PayItemsConfig","PeakRaceBase","PeakRaceCrossTime","PeakRaceTime","PlayFunConfig","PrestigeBase","PrestigeLevel","PrivilegeData","PublicBossBaseConfig","PublicBossConfig","PunchEquipConfig","PunchEquipMasterConfig","RechargeDaysAwardsConfig","RechargeItemsConfig","RefinesystemExpConfig","ReincarnateEquip","ReincarnateEquipCompose","ReincarnateSpirit","ReincarnateSuit","ReincarnationBase","ReincarnationExchange","ReincarnationLevel","RichManBaseConfig","RichManGridConfig","RichManRoundAwardConfig","RobberfbConfig","RoleConfig","RongLuExpConfig","RongLuLevelConfig","RuneAttrTypeConfig","RuneBaseConfig","RuneComposeConfig","RuneConverConfig","RuneLockPosConfig","RuneNameConfig","RuneOtherConfig","SDKConfig","ScenesConfig","ServerTips","ShenShouBase","ShenShouConfig","ShenShouEquip","ShenShouSkill","ShieldConfig","ShieldStageConfig","ShopConfig","SkillPowerConfig","SkillsConfig","SkillsDescConfig","SkillsOpenConfig","SkillsSorderConfig","SkillsUpgradeConfig","SkirmishBaseConfig","SkirmishRankConfig","SkirmishRewardConfig","SpecialEquipsConfig","StoneLevelConfig","StoneLevelCostConfig","StoneOpenConfig","SuitConfig","SuperVipConfig","TeamFuBenBaseConfig","TeamFuBenConfig","TeamFuBenGuideConfig","TerraceDescConfig","TianTiConstConfig","TianTiDanConfig","TianTiRankAwardConfig","TitleConf","TogerherHitBaseConfig","TogetherHitConfig","TogetherHitEquipExchangeConfig","TogetherHitEquipPageConfig","TogetherHitEquipQmConfig","TrainBaseConfig","TrainDayAwardConfig","TrainLevelAwardConfig","TrainLevelConfig","TreasureBoxBaseConfig","TreasureBoxConfig","TreasureBoxGridConfig","TreasureBoxRateConfig","TreasureHuntConfig","TreasureHuntPoolConfig","TreasureHuntPoolHefuConfig","TreasureOverViewConfig","TupoAttrConfig","TupoCostConfig","UpdateRemindConfig","VipConfig","VipGiftConfig","VipGridConfig","WanBaGiftbagBasic","WeaponSoulBaseConfig","WeaponSoulConfig","WeaponSoulItemAttr","WeaponSoulPosConfig","WeaponSoulSuit","WeiXiGuanZhuConst","WelfareConfig","WingCommonConfig","WingLevelConfig","WingStarConfig","WorldBossBaseConfig","WorldBossConfig","WorldBossKillMsgConfig","WorldRewardConfig","WujiBaseConfig","XueyuStageConfig","YouDangConfig","YuPeiBasicConfig","YuPeiConfig","ZhanLingBase","ZhanLingBox","ZhanLingConfig","ZhanLingEquip","ZhanLingID","ZhanLingLevel","ZhanLingSkill","ZhanLingStage","ZhanLingSuit","ZhanLingTalent","ZhiZunEquipLevel","ZhiZunLinkLevel","ZhuanShengConfig","ZhuanShengExpConfig","ZhuanShengLevelConfig","ZhuangBanConfig","ZhuangBanId","ZhuangBanLevelUp","ZhulingAttrConfig","ZhulingCostConfig","DamageTypes","ItemConst","ItemType","JobConst","MoneyConst","SystemConst","skillConst","EquipItemIcon","HejiPanel","ItemBase","ItemIconSimple","JimMaiItem","JingMaiPanel","LevelImage","MijiPanel","PowerPanel","PunchEquipItem","RoleInfoItem","RoleInfoPanel","RoleItem","RoleSelectPanel","SkillPanel","WingPanel","ZhanLingPanel","ZsPanel","Actor","CharEffect","CharMiner","CharModel","CharMonster","CharNpc","CharRole","CharTransfer","EffectModel","EntityBuff","EntityFilterUtil","EntityModel","IChar","MineModel","NpcModel","Role","SubRoles","Colour.ts","LayerManager","GlobalConfig","SceneMgr","TimerManager","TimerMgr","Tips","UILoadMgr","GameMap","MapView","GameGuider","Activationtongyong","Activity","ActivityTypeConst","HBSystem","ThreeHeroes","ActivityBaseData","ActivityDataFactory","ActivityType0Data","ActivityType10Data","ActivityType11Data","ActivityType12Data","ActivityType17Data","ActivityType18Data","ActivityType19Data","ActivityType1Data","ActivityType20Data","ActivityType21Data","ActivityType22Data","ActivityType2Data","ActivityType3Data","ActivityType4Data","ActivityType5Data","ActivityType6Data","ActivityType7Data","ActivityType8Data","ActivityType9Data","RewardData","SpringBeginShopVo","PActivity","PActivityDataFactory","PActivityType1Data","PActivityType2Data","PActivityType3Data","PActivityType9Data","Artifact","ArtifactData","NewArtifactData","Auction","AuctionRecordVo","AuctionVo","BagEnum","ItemData","UserBag","BagWin","EquipDetailedWin","FlowerUseTipsWin","HejiEquipTipsWin","ItemCurrencyWin","ItemDetailedWin","ItemUseTipsWin","RuneTipsWin","SmeltEquipTotalWin","BagWinItemScript","BattleCC","CommonHelpWin","BattleRankVo","Book","BookConst","BooKData","BookRedPoint","AutoChallengeBoss","DarkMjBoss","GwBoss","UserBoss","NewWorldBossData","PublicBossInfo","WorldBossItemData","WorldBossRankItemData","Box","BoxItemData","BoxModel","BoxOpenData","BoxRoomData","BoxTipsData","Chat","ChatDataBase","ChatInfoData","ChatSystemData","DailyCheckIn","CheckInConfigMgr","CheckInData","CityCC","DieGuide","Dress","DressItemInfo","DressPosInfo","DressTimeInfo","DressWin","Encounter","EncounterFight","EncounterModel","WildPlayerData","UserExpGold","ExtremeEquipModel","ExtremeEquipPanel","TeamFuBenRoleVo","FbModel","FbRedPoint","MapType","MonsterSpeak","SkyLevelModel","UserFb","UserFb2","WaveDropData","UserForge","UserGem","UserTupo","UserZhuLing","EquipPos","ForgeConst","ForgeRedPoint","ForgeWin","Friends","FriendData","UserFuLi","GameLogic","GameSceneCtr","EntityAction","EquipAddAttrType","ExAttributeType","SkillEffType","DropHelp","GameSceneView","UIView2","GodWeaponCC","GodWeaponItemCC","GodWeaponData","GodWeaponItemData","GodWeaponItemModel","GodWeaponRedPoint","GwFubenData","GwRankInfoData","GwTaskData","GodWingRedPoint","GuardCopyInfo","GuardWeaponModel","Guild","GuildBoss","GuildFB","GuildRedPoint","GuildRobber","GuildStore","GuildWar","GuildBuilding","GuildLanguage","GuildOffice","GuildApplyInfo","GuildFBModel","GuildFBRankInfo","GuildListInfo","GuildMemberInfo","GuildMessageInfo","GuildSkillInfo","GuildStoreItemData","GuildStoreModel","GuildStoreRecordInfo","GuildTaskInfo","GuildWarModel","GuillRoleSkillInfo","RobberStartInfo","HeartMethod","HeartMethodRedPoint","Heirloom","HeirloomData","HeirloomInfo","HejiProgressData","HejiUseMgr","IHejiUse","PunchEquipAttrWin","PunchEquipForge","PunchExchangeItem","PunchExchangeWin","PunchExtShowWin","PunchResWin","PunchTransformWin","HintTargetData","hint","Hungu","HunguRedPoint","HunguData","KFBattleRedPoint","KFServerSys","KFData","DevildomRedPoint","DevildomSys","DevildomBossModel","KfArenaRedPoint","KfArenaSys","KFInviteData","KfArenaData","KfArenaNoticeData","KfArenaRankData","KfArenaRoleVo","KFBossRedpoint","KFBossSys","KFBossData","PeakedRedpoint","PeakedSys","PeakedData","PeakedHelp","WJBattleRedPoint","WJBattlefieldSys","WJBattleData","WJBattlefieldTrusteeshipAi","KuaFuRank","Ladder","LiLian","WeiWangCC","LiLianWin","JadeDataNew","JadeNew","LongHun","LongHunData","MailData","UserMail","MergeCC","ComposePanel","Millionaire","MillionaireData","Mine","MineData","MineEnemyModel","MineFight","MineRecord","MineSceneInfo","NeiGong","NeiGongModel","NeiGongWin","NewEquip","Notice","EffectivenessTip","OpenSystem","PaoDianCC","PaoDianRankVo","PfActivity","PlayFun","PlayFunView","ActivityForeshowModel","ActivityExIconRule","ActivityIconRule","AuctionIconRule","BattleIconRule","BossIconRule","BoxIconRule","CDkeyIconRule","CelebrationIconRule","ChristmasIconRule","CityIconRule","CityMonsterIconRule","DesktopIconRule","DoubleElevenIconRule","DoubleTwelveActivityIconRule","DoubleTwelveRechargeIconRule","FbBtnIconRule","FengceIconRule","FirstRechargeIconRule","FocusIconRule","FriendsIconRule","FuncNoticeIconRule","FunctionOpenIconRule","GodWeaponIconRule","GuildIconRule","GuildWarIconRule","GuoQingIconRule","HappySevenDayIconRule","KFArenaRule","KFIconRule","KaiMenHongIconRule","LabaBossIconRule","LabaIconRule","LadderBtnIconRule","LimitTaskIconRule","LongTaiTouIconRule","MaBiIconRule","MailIconRule","MallIconRule","MonthCardIconRule","NewWorldBossIconRule","NewYearIconRule","PaoDianIconRule","PeakedIconRule","RankIconRule","RingIconRule","RuleIconBase","SanbaIconRule","ShareIconRule","ShenQiIconRule","SpringBeginIconRule","SpringEightDayIconRule","SpringFestivalIconRule","SuperVipIconRule","TaskTraceIconRule","ThanksIconRule","TotalRechargeIconRule","TreasureIconRule","VipGiftIconRule","WJBattleIconRule","XiaoNianIconRule","YBZhuanPanIconRule","ZhanLingIconRule","Rank","RankDataType","UserReadPlayer","PraiseData","RankDataBase","RankDataBook","RankDataLadder","RankDataLongHun","RankDataScore","RankDataSkirmish","RankDataWeiWang","RankDataWing","RankDataZhuZao","RankDataZhuan","Recharge","RechargeData","ReportData","UserEquip","UserJingMai","UserRole","UserSkill","Wing","EquipsData","JingMaiData","PunchEquipForgeData","WingsData","RoleAttrWin","RoleChooseEquipWin","RoleEquipChooseItem","RoleWin","Rune","RuneConfigMgr","RuneDataMgr","RuneRedPointMgr","SamsaraCC","ReincarnationDemonLevel","ReincarnationLinkLevel","ReincarnationSoulLevel","SamsaraModel","SamsaraVO","SamsaraEquipTips","SamsaraPanel","GameServer","Setting","SysSetting","Shop","FeatsStoreData","BlackMarketItemRenderer","BlackMarketPanel","BuySpecialWin","BuyWin","HonorMarketPanel","IntegrationItemRenderer","IntegrationPanel","ItemShopPanel","MedalShopItemRenderer","MedalShopPanel","NobleShopItemRender","NobleShopPanel","ShopBestTips","ShopRedPoint","ShopWin","SkillData","SkillWin","SoundUtil","LyMark","LyMarkEffect","SpecialRing","BookSkillInfo","OtherFireRingData","RingSkillInfo","SpecialRingData","AchievementData","LimitTaskData","TaskData","UserTask","VitalityData","LimitStartTipsView","LimitTaskView","UserTips","FuncNoticeWin","TipsView","Hunt","AdvanEquipWin","LegendEquipPanel","OrangeEquipPanel","UserVip","UserWarn","BagAddItemWarn","BagFullTipsWin","ShopGoodsWarn","WarnWin","Weapons","WeaponsData","WeaponsInfo","WeaponsSoulInfo","WeaponsSuitInfo","ZhanLing","ZhanLingData","ZhanLingModel","ZhuZaiData","ZhuzaiEquip","UserMiji","UserZs","MijiData","GainZsWin","MiJiTujianWin","MijiLearnItemRenderer","MijiLearnWin","MijiLockWin","MijiTipWin","MijiZhWin","ZsBoss","ZsBossRuleSpeak","RoleMgr","SelectRoleData"]);